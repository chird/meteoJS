{"version":3,"sources":["webpack://meteoJS/./node_modules/regenerator-runtime/runtime.js","webpack://meteoJS/./src/meteoJS/calc.js","webpack://meteoJS/./src/meteoJS/Events.js","webpack://meteoJS/./src/meteoJS/RepetitiveRequests.js","webpack://meteoJS/./src/meteoJS/Timeline.js","webpack://meteoJS/external \"jQuery\"","webpack://meteoJS/./src/meteoJS/timeline/Animation.js","webpack://meteoJS/./src/meteoJS/timeline/Visualisation.js","webpack://meteoJS/./src/meteoJS/timeline/visualisation/Text.js","webpack://meteoJS/./src/meteoJS/timeline/visualisation/Slider.js","webpack://meteoJS/./src/meteoJS/timeline/visualisation/bsButtons.js","webpack://meteoJS/./src/meteoJS/timeline/visualisation/bsDropdown.js","webpack://meteoJS/./src/meteoJS/synview/SynviewMap.js","webpack://meteoJS/./src/meteoJS/synview/Collection.js","webpack://meteoJS/external \"ol.layer.Group\"","webpack://meteoJS/external \"ol.layer.Vector\"","webpack://meteoJS/external \"ol.Observable\"","webpack://meteoJS/./src/meteoJS/synview/Resource.js","webpack://meteoJS/./src/meteoJS/synview/ResourceCollection.js","webpack://meteoJS/./src/meteoJS/synview/Type.js","webpack://meteoJS/./src/meteoJS/synview/TypeCollection.js","webpack://meteoJS/./src/meteoJS/synview/Tooltip.js","webpack://meteoJS/./src/meteoJS/Synview.js","webpack://meteoJS/external \"ol.proj\"","webpack://meteoJS/./src/meteoJS/synview/map/MapOL.js","webpack://meteoJS/./src/meteoJS/synview/map/MapLL.js","webpack://meteoJS/external \"ol.format.GeoJSON\"","webpack://meteoJS/external \"ol.source.Vector\"","webpack://meteoJS/./src/meteoJS/synview/resource/Vector.js","webpack://meteoJS/./src/meteoJS/synview/resource/GeoJSON.js","webpack://meteoJS/external \"ol.source.VectorTile\"","webpack://meteoJS/external \"ol.layer.VectorTile\"","webpack://meteoJS/./src/meteoJS/synview/resource/VectorTile.js","webpack://meteoJS/./src/meteoJS/synview/resource/GeoJSONTile.js","webpack://meteoJS/external \"ol.source.ImageStatic\"","webpack://meteoJS/external \"ol.layer.Image\"","webpack://meteoJS/./src/meteoJS/synview/resource/Image.js","webpack://meteoJS/external \"ol.source.OSM\"","webpack://meteoJS/external \"ol.layer.Tile\"","webpack://meteoJS/./src/meteoJS/synview/resource/OSM.js","webpack://meteoJS/./src/meteoJS/Tooltip.js","webpack://meteoJS/./src/meteoJS/tooltip/BootstrapTooltip.js","webpack://meteoJS/./src/meteoJS/base/Unique.js","webpack://meteoJS/./src/meteoJS/base/Collection.js","webpack://meteoJS/./src/meteoJS/Modelviewer.js","webpack://meteoJS/./src/meteoJS/base/Named.js","webpack://meteoJS/./src/meteoJS/base/UniqueNamed.js","webpack://meteoJS/./src/meteoJS/modelviewer/Variable.js","webpack://meteoJS/./src/meteoJS/modelviewer/TimeVariable.js","webpack://meteoJS/./src/meteoJS/modelviewer/VariableCollection.js","webpack://meteoJS/./src/meteoJS/base/NamedCollection.js","webpack://meteoJS/./src/meteoJS/modelviewer/Node.js","webpack://meteoJS/./src/meteoJS/modelviewer/Resource.js","webpack://meteoJS/./src/meteoJS/modelviewer/resource/Image.js","webpack://meteoJS/./src/meteoJS/sounding/Parcel.js","webpack://meteoJS/./src/meteoJS/Sounding.js","webpack://meteoJS/./src/meteoJS/modelviewer/resource/Sounding.js","webpack://meteoJS/./src/meteoJS/modelviewer/Resources.js","webpack://meteoJS/./src/meteoJS/modelviewer/NWPResources.js","webpack://meteoJS/./src/meteoJS/modelviewer/Display.js","webpack://meteoJS/./src/meteoJS/modelviewer/Container.js","webpack://meteoJS/external \"SVG\"","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/Functions.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/DiagramParcel.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/DiagramSounding.js","webpack://meteoJS/./src/meteoJS/ThermodynamicDiagramPluggable.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/CoordinateSystem.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/coordinateSystem/StueveDiagram.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/coordinateSystem/Emagram.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/coordinateSystem/SkewTlogPDiagram.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/PlotArea.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/PlotDataArea.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/PlotAltitudeDataArea.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/TDDiagram.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/WindbarbsProfile.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/WindspeedProfile.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/Hodograph.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/axes/yAxis.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/axes/xAxis.js","webpack://meteoJS/./src/meteoJS/ThermodynamicDiagram.js","webpack://meteoJS/./src/meteoJS/modelviewer/display/Simple.js","webpack://meteoJS/./src/meteoJS/index.js","webpack://meteoJS/./src/meteoJS/timeline/animation/ToggleButton.js","webpack://meteoJS/./src/meteoJS/modelviewer/display/SelectNavigation.js","webpack://meteoJS/webpack/bootstrap","webpack://meteoJS/webpack/startup","webpack://meteoJS/webpack/runtime/compat get default export","webpack://meteoJS/webpack/runtime/define property getters","webpack://meteoJS/webpack/runtime/hasOwnProperty shorthand","webpack://meteoJS/webpack/runtime/make namespace object","webpack://meteoJS/webpack/runtime/node module decorator"],"names":["runtime","exports","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","altitudeISAByPres","p","Math","pow","pressureISAByAltitude","a","potentialTempByTempAndPres","temp","pres","tempByPotentialTempAndPres","potentialTemp","tempByEquiPotTempAndPres","thetae","s","pcon","t","delta","abs","saturationHMRByTempAndPres","exp","dewpointByHMRAndPres","hmr","x","log","wetbulbTempByTempAndDewpointAndPres","dewpoint","Ediff","incr","previoussign","E","equiPotentialTempByTempAndDewpointAndPres","potTemp","lclTemperatureByTempAndDewpoint","saturationPressureByTemp","coef","Array","escold","retval","tt","inx","e","lclByPotentialTempAndHMR","b","hmrp","potentialTempByLCLAndHMR","lcl","Th","lclTh","tempCelsiusToKelvin","tempKelvinToCelsius","windspeedMSToKMH","wind","windspeedKMHToMS","windspeedMSToKN","windspeedKNToMS","windspeedMSToBF","min","windspeedBFToMS","snowlineByTemp850hPaAndAltidude","pressureByBarometricFormula","p0","h","T0","T1","M","densityHumidAirByPressureAndTempAndRelHumidity","T","rh","pv","on","listener","callback","thisArg","listeners","result_key","random","substr","un","once","once_listeners","hasListener","trigger","args","arguments","shift","apply","RepetitiveRequests","url","user","password","start","defaultTimeout","timeoutOnError","pauseOnHiddenDocument","responseType","_url","_user","_password","_isStarted","_defaultTimeout","_timeoutOnError","_pauseOnHiddenDocument","_initPauseOnHiddenDocument","_responseType","_timeoutID","_loading","_startRequest","clearTimeout","delay","setTimeout","_makeRequest","request","cacheControl","getResponseHeader","maxAges","exec","round","_planRequest","XMLHttpRequest","addEventListener","status","open","send","document","hidden","addEventFunctions","Timeline","maxTimeGap","keyboardNavigation","selectedTime","Date","times","enabledTimes","allEnabledTimes","timesByKey","_keyboardNavigation","_initKeyboardNavigation","time","_setSelectedTime","_indexOfTimeInTimesArray","id","enabled","_updateTimes","_updateEnabledTimes","getFirstEnabledTime","getLastEnabledTime","getNextEnabledTime","getPrevEnabledTime","getNextAllEnabledTime","getPrevAllEnabledTime","amount","timeKey","d","getSelectedTime","valueOf","setUTCFullYear","getUTCFullYear","setUTCMonth","getUTCMonth","setUTCDate","getUTCDate","index","reduce","acc","oldTime","timesArr","_sortTimesArray","lastTime","getTime","first","last","prevAllEnabledTime","nextAllEnabledTime","add","sub","event","test","matches","match","_isEventMatchPressedKeys","findIndex","sort","keyboardEvent","pressedKeys","cur","indexOf","o","keyCode","jQuery","Animation","timeline","restartPause","imagePeriod","imageFrequency","enabledStepsOnly","allEnabledStepsOnly","options","animationIntervalID","animationTimeoutID","animationStep","timesHash","onChangeTimes","_getTimelineTimesMethod","_getTimelineChangeTimesEvent","isStarted","_updateAnimation","setImagePeriod","Number","_setStep","_clearAnimation","step","_getCount","_initAnimation","_initRestartPause","window","setInterval","setSelectedTime","clearInterval","insertFrequencyInput","node","animation","suffix","number","$","addClass","attr","inputGroupNumber","append","text","setImageFrequency","val","onChangeImageFrequency","getImageFrequency","insertFrequencyRange","frequencies","range","insertRestartPauseInput","input","setRestartPause","onChange","getRestartPause","Visualisation","textInvalid","getTimeText","outputTimezone","inputListener","emptyNode","detachEventListeners","isListenersDefined","attachEventListener","onChangeTime","onInitNode","updateOutput","methodName","format","toISOString","func","listenerArr","off","rest","setNode","timeToText","timesIndexes","getTimelineTimes","prop","that","grouping","groupingFormat","classMain","classButtonGroup","classButtonGroupMargin","classLabel","classLabelSpan","classButton","classButtonActive","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled","toolbarNode","find","each","data","removeClass","empty","lastNode","btnGroup","span","btn","isTimeAllEnabled","isTimeEnabled","click","hasClass","children","buttonFormat","groupingDivider","classDropdownMenu","classDropdownItem","classItemActive","classItemNotEnabled","classItemEnabled","classItemAllEnabled","classDropdownHeader","classDropdownDivider","classDropdownButton","visualisationButtonText","Text","dropdownNode","setOutputTimezone","lastGroupTimeStr","getElementById","button","SynviewMap","map","layerGroup","synviewType","layer","feature","color","Collection","itemIds","items","getIndexById","itemId","item","getId","containsId","getItemById","splice","ol","Group","Vector","Observable","Resource","datetime","mimetype","reloadTime","className","imageSmoothingEnabled","_normalizeOLOptions","reloadTimerId","visible","zIndex","opacity","_imageSmoothing","getUrl","_reload","setVisible","addTo","removeLayer","setZIndex","setOpacity","getLayers","remove","getLLLayer","getVisible","addLayer","getOLLayer","setReloadTime","getReloadTime","_makeOLLayer","VectorLayer","makeOLLayer","events","eventName","source","getSource","contextOptions_","msImageSmoothingEnabled","_makeLLLayer","L","Layer","makeLLLayer","reloadFunction","getState","unByKey","getOpacity","getZIndex","bind","style","imageSmoothing","res","getResourceByTime","resource","_append","_sortTimes","_remove","resources","_filterTimesByResources","getDatetime","tIndex","containsStaticResource","filter","Type","displayMethod","displayMaxResourceAge","displayFadeStart","displayFadeStartOpacity","tooltip","preload","collection","ResourceCollection","displayedResourceTime","_addOLLayer","_preload","_removeOLLayer","newResource","oldResource","_replaceOLLayer","setResources","getResourceCollection","getItems","setLayerGroup","LayerGroup","group","setDisplayTime","_hideVisibleResource","getTimes","time_to_show","_getResourceTimeByDisplayTime","styleArguments","setOLStyle","getLayerGroup","resultTime","resourceTime","exclusiveVisibility","syncVisibility","isVisible","getVisibleTypes","isVisibleType","typeCollection","tooltipFeature","tooltipPixelColor","getOwnPropertyDescriptor","tooltipNode","css","prependTo","getMap","getTargetElement","dragging","getExtendedEventByTypeCollection","join","show","posX","pixel","posY","tooltipContent","getTooltip","content","hide","Synview","TypeCollection","getTypeCollection","updateTimes","isLastTime","isLastEnabledTime","setTimesBySetID","appendType","makeLayerGroup","getTimeline","Tooltip","removeType","deleteSetID","removedType","newId","setId","proj","projwgs84","getView","transform","getCenter","getProjection","center","valid","setCenter","fromLonLat","getZoom","zoom","setZoom","visibleTypes","Map","set","visibleLayers","Set","visibleLayerClassnames","getArray","get","getClassName","forEachFeatureAtPixel","l","hitTolerance","layerFilter","has","forEachLayerAtPixel","GeoJSON","opt","sourceOptions","projection","VectorSource","setStyle","getStyle","GeoJSONFormat","VectorTile","VectorTileSource","VectorTileLayer","ImageStatic","Image","extent","imageExtent","transformExtent","ImageLayer","Static","imageOverlay","image_","load","OSM","Tile","TileLayer","OSMSource","_isShown","_content","fireShowEvent","isShown","fireHideEvent","oldContent","onContentChange","bootstrapOptions","closeOnMouseMove","closeOnMouseEnter","_initBootstrapOptions","_tooltipNode","left","top","isStringContent","_updateNonStringContent","update","mousemove","mouseenter","_initTooltipNode","_id","fireReplace","fireAddRemoveOnReplace","appendOnReplace","sortFunction","emptyObjectMaker","_itemIds","_items","Unique","addItem","removeItem","replaceItem","itemInCollection","_sort","realItem","ids","containersNode","makeContainerNode","firstTimeOnInit","lastTimeOnInit","_resources","_containersNode","jquery","_timeline","_makeContainerNode","listenerKeys","container","modelviewer","containerNode","_getContainerNode","c","parentNode","removeChild","containers","createElement","appendChild","names","langSortation","_name","_names","_langSortation","lang","getNameByLang","lS","langs","ia","ib","getDefaultName","Named","variableCollection","_variableCollection","UniqueNamed","_datetime","Variable","_node","setNameByLang","getNameByLangNoFallback","Node","_parents","_children","nodes","_addParent","addedCount","getVariableByVariableCollection","variables","variable","removedCount","exactlyMatch","isDefinedBy","r","run","offset","_variables","_run","_offset","_updateDatetime","v","variablesSet","tmpc","dwpc","ptrace","ttrace","blayer","tlayer","lclpres","lclhght","lfcpres","lfchght","elpres","elhght","mplpres","mplhght","bplus","bminus","bfzl","b3km","b6km","p0c","pm10c","pm20c","pm30c","hght0c","hghtm10c","hghtm20c","hghtm30c","wm10c","wm20c","wm30c","li5","li3","brnshear","brnu","brnv","limax","limaxpres","cap","cappres","bmin","bminpres","calcMissing","parcels","levels","_parcelCollection","Parcel","levelsData","levelData","addLevel","calculateMissingData","hght","u","wdir","wspd","tmpk","dwpk","relh","mixr","theta","wetbulb","vtmp","sin","PI","cos","sqrt","arctan","levelA","levelB","sounding","_sounding","SoundingData","Resources","topNode","timesVariableCollections","_topNode","_availableVariablesMap","_timesVariableCollections","addedResources","_getTopNodeOfResourceDefinition","_getTopMostChildWithAllVariables","_addAvailableVariablesMapByResource","INTERNAL_CHANGE_RESOURCES","timeoutId","removedResources","removedNodeResourcesMap","size","_removeAvailableVariablesMapByResources","fullCheckVariables","entries","resourcesSet","getResourcesByVariables","getNodeByVariableCollection","_collectResourcesOfNodeChildren","VariableCollection","isDefinedByVariableOf","childNode","bubbleDown","isVariableContained","_getNodeByVariableCollection","compareFunc","_findChildNodeByVariableCollection","n","from","exact","collectTimes","pushChildCollections","collections","models","runs","regions","fields","accumulations","thresholds","TimeVariable","getNodeByVariableCollectionId","Display","alwaysAvailableCollections","_alwaysAvailableCollections","_modelviewer","_container","_parentNode","_resourceNode","_resourceOutput","image","thermodynamicDiagram","onInit","onChangeVisibleResource","variableCollections","_onChangeSelectedVariables","addedVariables","_changeResources","selectedVariables","contains","_getParentsVariables","availableVariables","getAvailableVariables","parents","parentResult","visibleResource","isAppended","soundings","getSounding","addSounding","_onChangeVisibleResource","resourceNode","Container","display","adaptSuitableResource","_display","_containerNode","_adaptSuitableResource","_initAdaptSuitableResource","_visibleResource","_displayVariables","_selectedVariables","_selectedNode","_enabledResources","_listeners","mirror","listenerKey","displayVariables","displayVariable","f","onChangeDisplayVariables","newDisplayVariables","exchangeDisplayVariable","_getSelectedVariablesWithResources","contained","selectedVariable","availableTimes","getTimesByVariables","lastSelectedVariable","_setSelectedVariables","isResourceSelected","possibleSelectedVariables","availableSelectedVariables","availableVariablesMap","availableVariable","getPossibleVariables","possibleSelectedVariable","tempSelectedVariables","resultSelectedVariables","resultLastSelectedVariable","isOnlyTimesVariables","selectedNode","removedVariables","_setTimes","_setEnabledResources","clear","setEnabledTimesBySetID","_setVisibleResource","oldVisibleResource","availableSV","lastAddedVariable","_updateSelectedVariables","SVG","getNormalizedLineStyleOptions","width","defaults","getFirstDefinedValue","getNormalizedFontOptions","anchor","getNormalizedLineOptions","updateLineOptions","updateOptions","styleKey","params","drawTextInto","y","horizontalMargin","verticalMargin","font","fill","background","rect","textNode","dy","bbox","height","dx","drawWindbarbInto","strokeStyle","fillTriangle","triangleRatio","barbDistanceRatio","barbHeightRatio","circleOnLowWindspeed","circleRadiusRatio","windspeed","windbarbGroup","barbGroup","triangleWidth","barbDistance","windbarbHeight","yPosition","windspeedResidual","circle","cx","cy","stroke","line","polyline","barbsWidth","scale","rotate","DiagramParcel","parcel","dewp","_parcel","_options","linecap","willTrigger","oldVisible","DiagramSounding","diagram","windprofile","hodograph","_diagramParcelCollection","_visible","getNormalizedDiagramOptions","getNormalizedWindprofileOptions","getNormalizedParcelsOptions","parcelCollection","addParcel","diagramParcel","getParcelOptions","dp","updateDiagramOptions","updateWindprofileOptions","updateParcelsOptions","diagramParcelCollection","updateOptionsPart","windbarbs","lineKeys","renderTo","_svgNode","boundingRect","getBoundingClientRect","computedStyle","getComputedStyle","parseFloat","getPropertyValue","_plotAreas","plotArea","svgNode","dispatchEvent","target","_hoverLabelsGroup","removeSounding","coordinateSystem","formerCoordinateSystem","diagramSounding","CoordinateSystem","pressure","temperature","_width","_height","temperatureBottomLeft","temperatureBottomRight","inclinationTan","_initPressureOptions","_initTemperatureOptions","inclinationAngle","max","x0","getTByXY","getYByXP","getXByYT","getPByXY","getTByXP","getXByPT","getXByPPotentialTemperatur","getYByXPotentialTemperature","getYByPT","thetaEY","getYByXT","reference","_normalizeTemperatureRange","tan","yReference","xTmin","deltaT","oldWidth","oldHeight","k","PlotArea","_getNormalizedStyle","_svgNodeBackground","_coordinateSystem","_coordinateSystemListenerKey","onCoordinateSystemChange","_initEvents","drawBackground","_drawBackground","overflow","dblclick","mousedown","mouseup","mouseover","mouseout","touchstart","touchmove","touchleave","touchend","touchcancel","eventKey","customEvent","getExtendedEvent","point","pageX","pageXOffset","pageY","pageYOffset","elementX","elementY","getSoundingVisibility","dataGroupIds","getCoordinatesByLevelData","insertDataGroupInto","filterDataPoint","minDataPointsDistance","_getSoundingVisibility","_dataGroupIds","_getCoordinatesByLevelData","_insertDataGroupInto","_filterDataPoint","_minDataPointsDistance","_svgNodeData","_soundings","listenerKeyVisible","onChangeSoundingVisibility","listenerKeyOptions","drawSounding","setDisplayOfSounding","drawSoundings","soundingGroup","filterDataPointFunction","_getFilterDataPointFunction","lastLevel","getLevels","getData","dataGroupId","level","lastPoint","oldValue","hoverLabels","_isHoverLabelsRemote","_initHoverLabels","diagramPres","remote","insertLabelsFunc","hoverLabelsSounding","getNearestLevel","PlotDataArea","unit","isobars","isotherms","dryadiabats","pseudoadiabats","mixingratio","getNormalizedDiagramLineOptions","highlightedLines","dasharray","minPressure","svgGroups","border","_parcelsOptions","_parcels","soundingParcelsItems","parcelsGroup","parcelsGroups","addItemListenerKey","changeVisibleListeners","changeOptionsListeners","onAddParcel","drawParcel","listenerObj","init","plotIsobars","plotIsotherms","plotDryadiabats","plotPseudoadiabats","plotMixingratio","parcelsObj","drawParcels","pottmpk","lcltmpk","lclthetaek","tempGroup","dewpGroup","yInterval","y0","getXByYPotentialTemperature","y1","getYByPPotentialTemperatur","x1","tempPolyline","isDryAdiabatStraightLine","y2","x2","getXByYEquiPotTemp","x0dwp","getXByYHMR","x1dwp","dewpPolyline","redraw","_plotLines","interval","isIsothermsVertical","TKelvin","points","lines","thetaeKelvin","maxPressure","getYByPEquiPotTemp","getYByPHMR","valuesOptions","pointsFunc","ceil","end","floor","highlightLineWidth","vHighlight","diagramTmpk","snapToData","align","radius","radiusPlus","_makeInsertLabelsFunc","hghtStr","drawPressureHoverLabelInto","labelOptions","lineWidth","fillOptions","PlotAltitudeDataArea","windbarbLength","windbarbData","_windbarbLength","windspeedMax","pixelPerSpeed","grid","origin","_gridOptions","getNormalizedGridOptions","minLength","move","axes","axesLength","circles","labels","xText","angle","yText","textAnchor","plain","before","getNormalizedTextOptions","yAxis","title","_labelsOptions","_titleOptions","getNormalizedTitleOptions","svgLabelsGroup","minLevel","maxLevel","fontSize","xAxis","minT","maxT","windbarbsProfile","windspeedProfile","normalizePlotAreaOptions","defaultPadding","TDDiagram","appendPlotArea","yAxisClass","xAxisClass","WindbarbsProfile","WindspeedProfile","Hodograph","StueveDiagram","Emagram","SkewTlogPDiagram","exchangeCoordinateSystem","ThermodynamicDiagramPluggable","Simple","imgNode","ThermodynamicDiagram","makeTimeTextCallbackFunction","moment","m","utc","local","tz","ToggleButton","startedContent","startedClass","stoppedContent","stoppedClass","classDropdownToggle","menu","menuImageFrequency","imageFrequencyCaption","menuFrequencies","menuRestartPause","restartPauseCaption","animationButton","is","onStart","String","onStop","toggle","btnDropdown","menuDropdown","label","div","insertFrequencyButtonGroup","btnGroupClass","btnClass","freq","insertRestartPauseRange","pauses","insertRestartPauseButtonGroup","pause","visualisation","Slider","bsButtons","bsDropdown","synview","SynviewCollection","MapOL","MapLL","GeoJSONTile","BootstrapTooltip","ModelviewerResource","ModelviewerImage","Sounding","ModelviewerSounding","NWPResources","SelectNavigation","ignoreVariableCollections","selectCaption","navigationClass","selectDivClass","selectClass","navigationNode","selectNodes","count","_appendSelectNode","_changeSelected","_appendOptionNode","selectNode","captionOption","option","optionsClass","functions","__webpack_module_cache__","__webpack_require__","moduleId","loaded","__webpack_modules__","getter","__esModule","definition","nmd","paths"],"mappings":"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","file":"meteoJS.min.js","sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/**\n * @module meteoJS/calc\n */\n\n/**\n * Umrechnung eines Luftdrucks zur entsprechenden Höhe in der\n * Internationalen Standard-Atmosphäre (ISA).\n * \n * Formel ist gültig bis 11 km Höhe\n * (https://de.wikipedia.org/wiki/Barometrische_H%C3%B6henformel#Internationale_H.C3.B6henformel)\n * \n * @static\n * @public\n * @param {number|undefined} p Luftdruck [hPa]\n * @return {number|undefined} Höhe in der Standard-Atmosphäre [m ü.M.]\n */\nexport function altitudeISAByPres(p) {\n  if (p === undefined ||\n      isNaN(p))\n    return undefined;\n  return 44330.769*(1 - Math.pow(p/1013.25, 0.19029496));\n}\n\n/**\n * Umrechnung einer Höhe in einen Luftdruck in der\n * Internationalen Standard-Atmosphäre (ISA).\n * \n * Formel ist gültig bis 11 km Höhe\n * (https://de.wikipedia.org/wiki/Barometrische_H%C3%B6henformel#Internationale_H.C3.B6henformel)\n * \n * @static\n * @public\n * @param {number|undefined} a Höhe [m ü.M.]\n * @return {number|undefined} Luftdruck in der Standard-Atmosphäre [hPa]\n */\nexport function pressureISAByAltitude(a) {\n  if (a === undefined ||\n      isNaN(a))\n    return undefined;\n  return 1013.25*Math.pow(1-a/44330.769, 5.255);\n}\n\n/**\n * Berechnung der potentielle Temperatur θ aus der Temperatur und des Drucks\n * eines Luftpakets.\n * \n * Berechnung zum Normaldruck von 1000 hPa\n * (https://de.wikipedia.org/wiki/Potentielle_Temperatur#Trockenpotentielle_Temperatur)\n * \n * @param {number|undefined} temp Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Potentielle Temperatur [K]\n */\nexport function potentialTempByTempAndPres(temp, pres) {\n  if (temp === undefined || isNaN(temp) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  return temp * Math.pow(1000/pres, 0.286);\n}\n\n/**\n * Berechnung der Lufttemperatur bei einem Luftdruck für ein Luftpaket mit\n * entsprechender potentiellen Temperatur.\n * \n * Berechnung zum Normaldurck von 1000 hPa\n * \n * @param {number|undefined} potentialTemp Potentielle Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Temperatur [K]\n */\nexport function tempByPotentialTempAndPres(potentialTemp, pres) {\n  if (potentialTemp === undefined || isNaN(potentialTemp) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  return potentialTemp*Math.pow(pres/1000, 0.286);\n}\n\n/**\n * Temperatur eines Luftpaktes mit Druck 'pres' und der Äquivalent potentiellen Temperatur 'thetae'.\n * \n * @param {number|undefined} thetae Äquivalent potentielle Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Temperatur [K]\n */\nexport function tempByEquiPotTempAndPres(thetae, pres) {\n  if (pres === undefined || isNaN(pres))\n    return undefined;\n  var s = undefined;\n  var th = undefined;\n  var pcon = Math.pow(1000/pres, .286);\n  var t = 273.0;\n  var delta = 20;\n  var i = 0;\n  while (Math.abs(delta) > 0.1 && i < 100) {\n    i++;\n    s = saturationHMRByTempAndPres(t, pres);\n    th = t * pcon * Math.exp(2.5*s/t);\n    if ((th-thetae)*delta > 0.0)\n      delta = -.5 * delta;\n    t = t + delta;\n  }\n  return t;\n}\n\n/**\n * Taupunkt eines Luftpaktes über Mischungsverhältnis und Druck.\n * \n * @param {number|undefined} hmr Mischungsverhätlnis [g/kg]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Taupunkttemperatur [K]\n */\nexport function dewpointByHMRAndPres(hmr, pres) {\n  if (hmr === undefined || isNaN(hmr) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  var x = 0.4343 * Math.log(hmr * pres /(622. + hmr));\n  return Math.pow(10,.0498646455 * x + 2.4082965 ) -\n         7.07475 +\n         38.9114 * Math.pow((Math.pow(10, .0915 * x) - 1.2035),2);\n}\n\n/**\n * Wetbulb-Temperature, Psychro-Temperature aus Temperatur, Taupunkt und Luftdruck\n * \n * @param {number|undefined} temp Temperatur [K]\n * @param {number|undefined} dewpoint Taupunkttemperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Wetbulb-Temperatur [K]\n */\nexport function wetbulbTempByTempAndDewpointAndPres(temp, dewpoint, pres) {\n  if (temp === undefined || isNaN(temp) ||\n      dewpoint === undefined || isNaN(dewpoint) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  var result = dewpoint-273.15;\n  var Ediff = 1;\n  var incr = 10;\n  var previoussign = 1;\n  var E = 6.112 * Math.exp((17.67 * result) / (result + 243.5));\n  while (Math.abs(Ediff) > 0.05) {\n    var Eguess = 6.112 * Math.exp((17.67 * result) / (result + 243.5)) -\n                 pres * (temp-273.15 - result) * 0.00066 * (1 + (0.00115 * result));\n    Ediff = E - Eguess;\n    if (Ediff == 0)\n      break;\n    else {\n      if (Ediff < 0) {\n        if (-1 != previoussign) {\n          previoussign = -1;\n          incr = incr/10;\n        }\n      }\n      else {\n        if (1 != previoussign) {\n          previoussign = 1;\n          incr = incr/10;\n        }\n      }\n    }\n    if (Math.abs(Ediff) <= 0.05)\n      break;\n    else\n      result = result + incr*previoussign;\n  }\n  return result+273.15;\n}\n\n/**\n * Äquivalent Potentielle Temperatur eines Luftpaktes.\n * \n * Gemäss Formel von Holten (https://en.wikipedia.org/wiki/Equivalent_potential_temperature#Formula)\n * \n * @param {number|undefined} temp Temperatur [K]\n * @param {number|undefined} dewpoint Taupunkts-Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Äquivalent potentielle Temperatur [K]\n */\nexport function equiPotentialTempByTempAndDewpointAndPres(temp, dewpoint, pres) {\n  var potTemp = potentialTempByTempAndPres(temp, pres);\n  if (potTemp === undefined ||\n      dewpoint === undefined || isNaN(dewpoint) ||\n      temp === undefined || isNaN(temp) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  return potTemp *\n    Math.exp(2481.9e-3 *\n             saturationHMRByTempAndPres(dewpoint, pres) /\n             lclTemperatureByTempAndDewpoint(temp, dewpoint));\n}\n\n/**\n * Berechnung des Sättigung-Dampfdrucks zu einer Temperatur\n * \n * @param {number|undefined} temp Temperatur [K]\n * @return {number|undefined} Sättigungs-Dampfdruck [hPa]\n */\nexport function saturationPressureByTemp(temp) {\n  if (temp === undefined || isNaN(temp))\n    return undefined;\n  var coef= new Array(6.1104546, 0.4442351, 1.4302099e-2, 2.6454708e-4, 3.0357098e-6, 2.0972268e-8, 6.0487594e-11,-1.469687e-13);\n  var inx=0;\n  // sat vap pressures every 5C from -50 to -200\n  var escold= new Array(\n    0.648554685769663908E-01, 0.378319512256073479E-01,\n    0.222444934288790197E-01, 0.131828928424683120E-01,\n    0.787402077141244848E-02, 0.473973049488473318E-02,\n    0.287512035504357928E-02, 0.175743037675810294E-02,\n    0.108241739518850975E-02, 0.671708939185605941E-03,\n    0.419964702632039404E-03, 0.264524363863469876E-03,\n    0.167847963736813220E-03, 0.107285397631620379E-03,\n    0.690742634496135612E-04, 0.447940489768084267E-04,\n    0.292570419563937303E-04, 0.192452912634994161E-04,\n    0.127491372410747951E-04, 0.850507010275505138E-05,\n    0.571340025334971129E-05, 0.386465029673876238E-05,\n    0.263210971965005286E-05, 0.180491072930570428E-05,\n    0.124607850555816049E-05, 0.866070571346870824E-06,\n    0.605982217668895538E-06, 0.426821197943242768E-06,\n    0.302616508514379476E-06, 0.215963854234913987E-06,\n    0.155128954578336869E-06);\n\n  temp = temp - 273.15;\n  var retval = 0;\n  //try {\n  if (temp > -50.) {\n    retval = ( coef[0] + temp*(coef[1] + temp*(coef[2] + temp*(coef[3] +\n    temp*(coef[4] + temp*(coef[5] + temp*(coef[6] + temp*coef[7])))))));\n\n  } else {\n    var tt = (-temp - 50.)/5.;\n    //var = (int) tt;\n    if (inx < escold.length-1) {\n      retval = escold[inx] + (tt % 1.)*(escold[inx+1]-escold[inx]);\n    } else {\n      retval = 1e-7;\n    }\n  }\n  // } catch (Exception e) {\n  //   GWT.log(\"caught exception: \"+e);\n  //  retval = 1e-7;\n  //}\n  return retval;\n}\n\n/**\n * Berechnung des Sättigungs-Mischungsverhältnisses aus Temperatur und Druck\n * \n * HMR = humidity mixing ratio\n * \n * @param {number|undefined} temp Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Sättigungs-Mischungsverhältnis [g/kg]\n */\nexport function saturationHMRByTempAndPres(temp, pres) {\n  var e = saturationPressureByTemp(temp);\n  if (e === undefined ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  return 621.97*e/(pres - e);\n}\n\n/**\n * Lifting Condensation Level (LCL) eines Luftpakets mit entsprechender\n * potentieller Temperatur und Mischungsverhältnis.\n * \n * @param {number|undefined} potentialTemp Potentielle Temperatur [K]\n * @param {number|undefined} hmr Mischungsverhältnis [g/kg]\n * @return {undefined|number} LCL [hPa]\n */\nexport function lclByPotentialTempAndHMR(potentialTemp, hmr) {\n  if (hmr === undefined || isNaN(hmr))\n    return undefined;\n  // Binäre Suche\n  var a = 1013;\n  var b = 100;\n  while (a-b > 10) {\n    var p = b+(a-b)/2;\n    var hmrp = saturationHMRByTempAndPres(\n      tempByPotentialTempAndPres(potentialTemp, p),\n      p);\n    if (hmrp === undefined)\n      return undefined;\n    if (hmrp < hmr)\n      b = p;\n    else\n      a = p;\n  }\n  return b+(a-b)/2;\n}\n\n/**\n * Potentielle Temperatur zu einem Lifting Condensation Level (LCL) bei\n * gegebenem Mischungsverhältnis.\n * \n * @param {number|undefined} lcl LCL [hPa]\n * @param {number|undefined} hmr Mischungsverhältnis [g/kg]\n * @return {number|undefined} Potentielle Temperatur [K]\n */\nexport function potentialTempByLCLAndHMR(lcl, hmr) {\n  if (lcl === undefined || isNaN(lcl))\n    return undefined;\n  // Binäre Suche\n  var a = 323;\n  var b = 223;\n  while (a-b > 0.1) {\n    var Th = b+(a-b)/2;\n    var lclTh = lclByPotentialTempAndHMR(Th, hmr);\n    if (lclTh === undefined)\n      return undefined;\n    if (lclTh > lcl)\n      b = Th;\n    else\n      a = Th;\n  }\n  return b+(a-b)/2;\n}\n\n/**\n * Temperatur eines Luftpaktes, welches zum LCL angehoben wird.\n * \n * @param {number|undefined} temp Lufttemperatur [K]\n * @param {number|undefined} dewpoint Taupunktstemperatur [K]\n * @return {undefined|number} Temperatur [K]\n */\nexport function lclTemperatureByTempAndDewpoint(temp, dewpoint) {\n  if (temp === undefined || isNaN(temp) ||\n      dewpoint === undefined || isNaN(dewpoint))\n    return undefined;\n  return (dewpoint - (.001296*dewpoint - .15772)*(temp-dewpoint) );\n}\n\n/**\n * Umwandlung Temperatur von Celsius in Kelvin\n * \n * @param {number|undefined} temp [°C]\n * @return {undefined|number} [K]\n */\nexport function tempCelsiusToKelvin(temp) {\n  return (temp === undefined || isNaN(temp)) ? undefined : temp+273.15;\n}\n\n/**\n * Umwandlung Temperatur von Kelvin zu Celsius\n * \n * @param {number|undefined} temp [K]\n * @return {undefined|number} [°C]\n */\nexport function tempKelvinToCelsius(temp) {\n  return (temp === undefined || isNaN(temp)) ? undefined : temp-273.15;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von m/s in km/h\n * \n * @param {number|undefined} wind [m/s]\n * @return {undefined|number} [km/h]\n */\nexport function windspeedMSToKMH(wind) {\n  return (wind === undefined || isNaN(wind)) ? undefined : wind*3.6;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von km/h in m/s\n * \n * @param {number|undefined} wind [km/h]\n * @return {undefined|number} [m/s]\n */\nexport function windspeedKMHToMS(wind) {\n  return (wind === undefined || isNaN(wind)) ? undefined : wind/3.6;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von m/s in Knoten\n * \n * @param {number|undefined} wind [m/s]\n * @return {undefined|number} [kn]\n */\nexport function windspeedMSToKN(wind) {\n  return (wind === undefined || isNaN(wind)) ? undefined : wind*900/463;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von Knoten in m/s\n * \n * @param {number|undefined} wind [kn]\n * @return {undefined|number} [m/s]\n */\nexport function windspeedKNToMS(wind) {\n  return (wind === undefined || isNaN(wind)) ? undefined : wind*463/900;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von m/s in Beaufort\n * \n * @param {number|undefined} wind [m/s]\n * @return {undefined|number} [bf]\n */\nexport function windspeedMSToBF(wind) {\n  return (wind === undefined || isNaN(wind)) ?\n    undefined :\n    Math.min(12, Math.pow(wind/0.8360, 2/3));\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von Beaufort in m/s\n * \n * @param {number|undefined} wind [bf]\n * @return {undefined|number} [m/s\n */\nexport function windspeedBFToMS(wind) {\n  return (wind === undefined || isNaN(wind)) ?\n    undefined :\n    0.8360 * Math.pow(wind, 3/2);\n}\n\n/**\n * Abschätzung der Schneefallgrenze aus Temperatur und Höhe des 850hPa-Levels\n * \n * Formel aus Weathercalc herauskopiert.\n * \n * @static\n * @public\n * @param {number|undefined} temp Temperatur auf 850 hPa [K]\n * @param {number|undefined} a Höhe des 850 hPa Levels [m ü.M.]\n * @return {number|undefined} Abgeschätzte Schneefallgrenze [m ü.M.]\n */\nexport function snowlineByTemp850hPaAndAltidude(temp, a) {\n  if (temp === undefined || isNaN(temp) ||\n      a === undefined || isNaN(a))\n    return undefined;\n  return 153.0 * tempKelvinToCelsius(temp) + 0.9985 * a - 304.26;\n}\n\n/**\n * Barometrische Höhenformel. Berechnung von Luftdruck in anderer Höhe.\n * \n * Formel aus Wiki-Artikel https://de.wikipedia.org/wiki/Barometrische_H%C3%B6henformel\n * \n * @static\n * @public\n * @param {number|undefined} p0 Druck auf dem Startlevel [hPa]\n * @param {number|undefined} h Höhe bis zum Ziellevel (positiv für höher über Meereslevel) [m]\n * @param {number|undefined} T0 Temperatur auf dem Startlevel [K]\n * @param {number|undefined} T1 Temperatur auf dem Ziellevel, wenn undefined\n *                              wird Isothermie angenommen [K]\n * @return {number|undefined} Luftdruck auf dem Ziellevel [hPa]\n */\nexport function pressureByBarometricFormula(p0, h, T0, T1) {\n  if (p0 === undefined || isNaN(p0) ||\n      h === undefined || isNaN(h) ||\n      T0 === undefined || isNaN(T0))\n    return undefined;\n  if (h == 0)\n    return p0;\n  var M = 0.02896;\n  var g = 9.807;\n  var R = 8.314;\n  if (T1 === undefined)\n    T1 = T0;\n  // Isotherme Atmosphäre\n  if (T0 == T1)\n    return p0 * Math.exp(-M*g/R/T0*h);\n  var a = (T0 - T1)/h;\n  return p0 * Math.exp(M*g/R/a*Math.log(1-a*h/T0));\n}\n\n/**\n * Dichte von feuchter Luft.\n * \n * Formel aus Wiki-Artikel https://en.wikipedia.org/wiki/Density_of_air\n * \n * @param {number|undefined} p Luftdruck [hPa]\n * @param {number|undefined} T Lufttemperatur [K]\n * @param {number|undefined} rh Luftfeuchtigkeit []\n * @return {number|undefined} Dichte [kg/m^3]\n */\nexport function densityHumidAirByPressureAndTempAndRelHumidity(p, T, rh) {\n  if (p === undefined || isNaN(p) ||\n      T === undefined || isNaN(T) ||\n      rh === undefined || isNaN(rh))\n    return undefined;\n  var Rd = 287.058; // J/(kg·K)\n  var Rv = 461.495; // J/(kg·K)\n  var pv = saturationPressureByTemp(T)*rh;\n  return (p - pv)*100/Rd/T + pv*100/Rv/T;\n}","/**\n * @module meteoJS/events\n */\n\n/**\n * Listen for a certain type of event\n * \n * @abstract\n * @param {string} listener - Event type.\n * @param {callback} callback - Listener function.\n * @param {mixed} [thisArg] - Objekt für this beim Ausführen von callback.\n * @returns {number} Listener function key.\n */\nfunction on(listener, callback, thisArg) {\n  if (!('listeners' in this) ||\n      this.listeners === undefined)\n    this.listeners = {};\n  if (!(listener in this.listeners))\n    this.listeners[listener] = {};\n  // Adapted from https://gist.github.com/gordonbrander/2230317\n  var result_key = Math.random().toString(36).substr(2, 9);\n  this.listeners[listener][result_key] = {\n    callback: callback,\n    thisArg:  thisArg\n  };\n  return result_key;\n}\n\n/**\n * Unlisten for a certain type of event\n * \n * @abstract\n * @param {string} listener - Event type.\n * @param {number} key - Listener function key.\n */\nfunction un(listener, key) {\n  if ('listeners' in this &&\n      this.listeners !== undefined &&\n      listener in this.listeners &&\n      key in this.listeners[listener])\n    delete this.listeners[listener][key];\n}\n\n/**\n * Listen once for a certain type of event\n * \n * @abstract\n * @param {string} listener - Event type.\n * @param {callback} callback - Listener function.\n * @param {mixed} [thisArg] - Objekt für this beim Ausführen von callback.\n */\nfunction once(listener, callback, thisArg) {\n  if (!('once_listeners' in this) ||\n      this.once_listeners === undefined)\n    this.once_listeners = {};\n  if (!(listener in this.once_listeners) ||\n      !('push' in this.once_listeners[listener]))\n    this.once_listeners[listener] = [];\n  this.once_listeners[listener].push({\n    callback: callback,\n    thisArg:  thisArg\n  });\n}\n\n/**\n * Gibt es Listener Funktionen für einen Event Type\n * \n * @abstract\n * @param {string} listener - Event type.\n * @returns {boolean}\n */\nfunction hasListener(listener) {\n  return ('listeners' in this &&\n          this.listeners !== undefined &&\n          listener in this.listeners &&\n          Object.keys(this.listeners[listener]).length) ||\n         ('once_listeners' in this &&\n          listener in this.once_listeners &&\n          Object.keys(this.once_listeners[listener]).length);\n}\n\n/**\n * Execute all listener functions für einen Event Type\n * \n * @abstract\n * @param {string} listener - Event type.\n */\nfunction trigger(listener) {\n  let args = Array.prototype.slice.call(arguments);\n  args.shift();\n  if ('listeners' in this &&\n      this.listeners !== undefined &&\n      listener in this.listeners &&\n      typeof this.listeners[listener] == 'object') {\n    Object.keys(this.listeners[listener]).forEach(key => {\n      this.listeners[listener][key].callback.apply(\n        this.listeners[listener][key].thisArg === undefined ?\n          this :\n          this.listeners[listener][key].thisArg,\n        args);\n    });\n  }\n  if ('once_listeners' in this &&\n      this.once_listeners !== undefined &&\n      listener in this.once_listeners &&\n      'forEach' in this.once_listeners[listener]) {\n    let once_listeners = this.once_listeners[listener];\n    this.once_listeners[listener] = [];\n    once_listeners.forEach(obj => {\n      obj.callback.apply(obj.thisArg === undefined ? this : obj.thisArg, args);\n    });\n  }\n}\n\n/**\n * Fügt einem Objekt alle Event-Funktionen hinzu.\n * \n * @param {object} obj\n */\nexport function addEventFunctions(obj) {\n  obj.on = on;\n  obj.un = un;\n  obj.once = once;\n  obj.hasListener = hasListener;\n  obj.trigger = trigger;\n}\nexport default addEventFunctions;","/**\n * @module meteoJS/repetitiveRequests\n */\nimport addEventFunctions from './Events.js';\n\n/**\n * Event fired before a request is executed.\n * \n * @event module:meteoJS/repetitiveRequests#before:request\n */\n\n/**\n * Event fired on a successful request.\n * \n * @event module:meteoJS/repetitiveRequests#success:request\n * @property {external:XMLHttpRequest} request - XMLHttpRequest of the successful request.\n */\n\n/**\n * Event fired if a request failed.\n * \n * @event module:meteoJS/repetitiveRequests#error:request\n * @property {external:XMLHttpRequest} request - XMLHttpRequest of the failed request.\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/repetitiveRequests~options\n * @property {undefined|string} [url=undefined] - URL to make repetitive\n *   requests to. If undefined, no request will be done.\n * @property {string} [user=''] - User to send with request.\n * @property {string} [password=''] - Password to send with request.\n * @property {boolean} [start=true] - Start repetetive requests on construction.\n * @property {undefined|string} [defaultTimeout=undefined]\n *   Default timeout until next request, if response has no Cache-Control\n *   HTTP-Header. In milliseconds. If undefined, a further request will only be\n *   done, if the reponse returned a valid Cache-Control header.\n * @property {undefined|string} [timeoutOnError=undefined]\n *   Timeout until next request after a error response. In milliseconds. If\n *   undefined, no further request will be done after an error.\n * @property {boolean} [pauseOnHiddenDocument=false] - Pause making repetitive\n *   requests when document is hidden.\n * @property {''|'arraybuffer'|'blob'|'document'|'json'|'text'} [responseType='']\n *   Specifies the content type of the response.\n *   See {@link https://developer.mozilla.org/de/docs/Web/API/XMLHttpRequest/responseType}.\n */\n\n/**\n * Makes requests again and again. Useful to stay up to date with\n *   the data available on the server. If the response returns a Cache-Control\n *   HTTP-Header, then the next request will be done per default after this\n *   time.\n * \n * @fires module:meteoJS/repetitiveRequests#before:request\n * @fires module:meteoJS/repetitiveRequests#success:request\n * @fires module:meteoJS/repetitiveRequests#error:request\n */\nexport class RepetitiveRequests {\n  \n  /**\n   * @param {module:meteoJS/repetitiveRequests~options} [options] - Options.\n   */\n  constructor({\n    url = undefined,\n    user = '',\n    password = '',\n    start = true,\n    defaultTimeout = undefined,\n    timeoutOnError = undefined,\n    pauseOnHiddenDocument = false,\n    responseType = ''\n  } = {}) {\n    \n    /**\n     * @type undefined|string\n     * @private\n     */\n    this._url = url;\n    \n    /**\n     * @type string\n     * @private\n     */\n    this._user = user;\n    \n    /**\n     * @type string\n     * @private\n     */\n    this._password = password;\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._isStarted = start;\n    \n    /**\n     * @type undefined|integer\n     * @private\n     */\n    this._defaultTimeout = defaultTimeout;\n    \n    /**\n     * @type undefined|integer\n     * @private\n     */\n    this._timeoutOnError = timeoutOnError;\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._pauseOnHiddenDocument = pauseOnHiddenDocument;\n    this._initPauseOnHiddenDocument();\n    \n    /**\n     * @type string\n     * @private\n     */\n    this._responseType = responseType;\n    \n    /**\n     * @type mixed\n     * @private\n     */\n    this._timeoutID = undefined;\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._loading = false;\n    \n    if (this._isStarted)\n      this.start();\n  }\n  \n  /**\n   * Current URL to make requests to.\n   * \n   * @type undefined|string\n   */\n  get url() {\n    return this._url;\n  }\n  set url(url) {\n    this._url = url;\n  }\n  \n  /**\n   * User to send with request.\n   * \n   * @type string\n   */\n  get user() {\n    return this._user;\n  }\n  set user(user) {\n    this._user = user;\n  }\n  \n  /**\n   * Password to send with request.\n   * \n   * @type string\n   */\n  get password() {\n    return this._password;\n  }\n  set password(password) {\n    this._password = password;\n  }\n  \n  /**\n   * Content type of the response.\n   * \n   * @type string\n   */\n  get responseType() {\n    return this._responseType;\n  }\n  set responseType(responseType) {\n    this._responseType = responseType;\n  }\n  \n  /**\n   * Start repetitive requests. Makes immediatly the first request.\n   */\n  start() {\n    this._isStarted = true;\n    this._startRequest();\n  }\n  \n  /**\n   * Stops repetitive requests. Events aren't triggered anymore. Even if a\n   * former request creates a response.\n   */\n  stop() {\n    this._isStarted = false;\n    if (this._timeoutID !== undefined) {\n      clearTimeout(this._timeoutID);\n      this._timeoutID = undefined;\n    }\n  }\n  \n  /**\n   * Executes next request after the passed delay. If already another request\n   * is planned, nothing is done.\n   * \n   * @private\n   * @param {integer} delay - Delay in milliseconds.\n   */\n  _planRequest({\n    delay\n  }) {\n    if (this._timeoutID !== undefined)\n      return;\n    \n    this._timeoutID = setTimeout(() => {\n      this._startRequest();\n    }, delay);\n  }\n  \n  /**\n   * Makes a new request and triggeres events.\n   * \n   * @private\n   */\n  _startRequest() {\n    if (this._timeoutID !== undefined) {\n      clearTimeout(this._timeoutID);\n      this._timeoutID = undefined;\n    }\n    \n    this._makeRequest()\n      .then(({ request }) => {\n        if (!this._isStarted)\n          return;\n      \n        let delay = this._defaultTimeout;\n      \n        // Read ResponseHeader\n        let cacheControl = request.getResponseHeader('Cache-Control');\n        if (cacheControl !== null) {\n          let maxAges = /(^|,\\s*)max-age=([0-9]+)($|\\s*,)/.exec(cacheControl);\n          if (maxAges !== null &&\n            maxAges[2] > 0)\n            delay = Math.round(maxAges[2]*1000);\n        }\n      \n        this.trigger('success:request', { request });\n      \n        if (delay !== undefined)\n          this._planRequest({ delay });\n      }, ({ request } = {}) => {\n        if (!this._isStarted)\n          return;\n      \n        if (request === undefined)\n          return;\n      \n        this.trigger('error:request', { request });\n      \n        if (this._timeoutOnError !== undefined)\n          this._planRequest({ delay: this._timeoutOnError });\n      });\n  }\n  \n  /**\n   * Makes a new request immediatly, except another request is already loading.\n   * \n   * @private\n   * @returns {Promise}\n   */\n  async _makeRequest() {\n    this.trigger('before:request');\n    return new Promise((resolve, reject) => {\n      if (this._url === undefined) {\n        reject();\n        return;\n      }\n      \n      if (this._loading) {\n        reject();\n        return;\n      }\n      this._loading = true;\n      \n      let request = new XMLHttpRequest();\n      if (this.responseType !== undefined)\n        request.responseType = this.responseType;\n      request.addEventListener('load', () => {\n        this._loading = false;\n        \n        if (request.status == 200)\n          resolve({ request });\n        else\n          reject({ request });\n      });\n      request.addEventListener('error', () => {\n        this._loading = false;\n        reject({ request });\n      });\n      \n      request.open('GET', this._url, true, this._user, this._password);\n      request.send();\n    });\n  }\n  \n  /**\n   * @private\n   */\n  _initPauseOnHiddenDocument() {\n    if (!this._pauseOnHiddenDocument)\n      return;\n    \n    document.addEventListener('visibilitychange', () => {\n      if ('hidden' in document)\n        if (document.hidden)\n          this.stop();\n        else\n          this.start();\n    });\n  }\n}\naddEventFunctions(RepetitiveRequests.prototype);\nexport default RepetitiveRequests;\n","/**\n * @module meteoJS/timeline\n */\nimport addEventFunctions from './Events.js';\n\n/**\n * Special key identifier.\n * \n * @typedef {\"ctrl\"|\"alt\"|\"shift\"|\"meta\"|Number}\n *   module:meteoJS/timeline~specialKeyIdentifier\n */\n\n/**\n * Definition of pressed keys with optional special keys.\n * \n * @typedef {module:meteoJS/timeline~specialKeyIdentifier|\n             module:meteoJS/timeline~specialKeyIdentifier[]}\n *   module:meteoJS/timeline~optionPressedKeys\n */\n\n/**\n * Keyboard navigation options.\n * \n * @typedef {Object} module:meteoJS/timeline~optionKeyboardNavigation\n * @param {boolean} [enabled=false] - Enable Keyboard Navigation.\n * @param {module:meteoJS/timeline~optionPressedKeys} [first=36]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#first|first()}.\n *   Default: Home.\n * @param {module:meteoJS/timeline~optionPressedKeys} [last=35]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#last|last()}.\n *   Default: End.\n * @param {module:meteoJS/timeline~optionPressedKeys} [prev=37]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#prev|prev()}.\n *   Default: Arrow left.\n * @param {module:meteoJS/timeline~optionPressedKeys} [next=39]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#next|next()}.\n *   Default: Arrow right.\n * @param {module:meteoJS/timeline~optionPressedKeys} [prevAllEnabledTime=[37, 'ctrl']]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#prevAllEnabledTime|prevAllEnabledTime()}.\n *   Default: Arrow left + Ctrl.\n * @param {module:meteoJS/timeline~optionPressedKeys} [nextAllEnabledTime=[39, 'ctrl']]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#nextAllEnabledTime|nextAllEnabledTime()}.\n *   Default: Arrow right + Ctrl.\n * @param {Object.<string,module:meteoJS/timeline~optionPressedKeys>} [add]\n *   Keyboard event to execute {@link module:meteoJS/timeline.Timeline#add|add()}.\n *   The keys are combined with an amount integer and a timeKey\n *   (definition analog to the add() function).\n *   Defaults: ArrowRight plus 3h:Ctrl+Shift, 6h:Shift, 12h:Alt+Shift, 24h:Alt\n * @param {Object.<string,module:meteoJS/timeline~optionPressedKeys>} [sub]\n *   Keyboard event to execute {@link module:meteoJS/timeline.Timeline#sub|sub()}.\n *   The keys are combined with an amount integer and a timeKey\n *   (definition analog to the add() function).\n *   Defaults: ArrowLeft plus 3h:Ctrl+Shift, 6h:Shift, 12h:Alt+Shift, 24h:Alt\n */\n\n/**\n * Options for timeline constructor.\n * \n * @typedef {Object} module:meteoJS/timeline~options\n * @param {number|undefined} [maxTimeGap]\n *   Maximum of time period (in seconds) between two timestamps. If this option\n *   is specified, than e.g. the method getTimes() could return more timestamps\n *   than defined by setTimesBySetID.\n * @param {module:meteoJS/timeline~optionKeyboardNavigation}\n *   [keyboardNavigation] - Keyboard navigation options.\n */\n\n/**\n * @event module:meteoJS/timeline#change:time\n * @property {Date} oldDate - Time before change.\n */\n\n/**\n * @event module:meteoJS/timeline#change:times\n */\n\n/**\n * @event module:meteoJS/timeline#change:enabledTimes\n */\n\n/**\n * @classdesc\n * Class represents a timeline.\n * On this timeline, you could define different set of times. This is useful for\n * the usecase 1: You have different data types for different times (like radar\n * and satellite pictures). Then, the timeline provides a list of all available\n * times. Each time in each set of times could be enabled or disabled. This\n * yields to the usecase 2: In a viewer of model charts, you probably want to\n * show all the times with charts. (Global models normally have a time interval\n * of 3 hours between charts) But for different parameters, you only provide\n * charts at a greater interval. E.g. you calculate 24h-precipiation sums only\n * for 00 UTC. So you can set the times of the 3-hour-interval and only set\n * the 00 UTC timestamps as enabled. To visualise the timeline use some\n * child class of the\n * {@link module:meteoJS/timeline/visualisation.Visualisation} class. To animate\n * through time steps use the {@link module:meteoJS/timeline/animation.Animation}\n * class.\n */\nexport class Timeline {\n  \n  /**\n   * @param {module:meteoJS/timeline~options} [options] - Options.\n   */\n  constructor({ maxTimeGap = undefined,\n    keyboardNavigation = {} } = {}) {\n    /**\n     * @type undefined|number\n     * @private\n     */\n    this.maxTimeGap = maxTimeGap;\n  \n    /**\n     * Date object with current selected time. Maybe invalid.\n     * @member {Date}\n     * @private\n     */\n    this.selectedTime = new Date('invalid');\n  \n    /**\n     * Times of this timeline. Sorted upwardly.\n     * @member {Date[]}\n     * @private\n     */\n    this.times = [];\n  \n    /**\n     * Times of this timeline, that are enabled at least in one set of times.\n     * Sorted upwardly.\n     * @member {Date[]}\n     * @private\n     */\n    this.enabledTimes = [];\n  \n    /**\n     * Times of this timeline, that are enabled through all set of times.\n     * Sorted upwardly.\n     * @member {Date[]}\n     * @private\n     */\n    this.allEnabledTimes = [];\n  \n    /**\n     * Objekt mit keys und Date-Arrays (zeitlich sortiert)\n     * @type Object.<mixed,Object>\n     * @private\n     */\n    this.timesByKey = {};\n    \n    /**\n     * @type {module:meteoJS/timeline~keyboardNavigationOptions}\n     * @private\n     */\n    this._keyboardNavigation = {};\n    this._initKeyboardNavigation(keyboardNavigation);\n  }\n  \n  /**\n   * Current selected time.\n   * \n   * @returns {Date} Selected time, could be invalid.\n   */\n  getSelectedTime() {\n    return this.selectedTime;\n  }\n  \n  /**\n   * Sets current selected time. You can select a time returned by getTimes only.\n   * If this is not the case, an invalid timestamp will be set.\n   * \n   * @param {Date} time - Time to select.\n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   * @fires module:meteoJS/timeline#change:time\n   */\n  setSelectedTime(time) {\n    this._setSelectedTime(\n      (_indexOfTimeInTimesArray(time, this.times) > -1) ?\n        time : new Date('invalid'));\n    return this;\n  }\n  \n  /**\n   * Returns a list of all timestamps represented by this timeline.\n   * This includes on the one hand all timestamps defined by setTimesBySetID, on\n   * the other hand there could exists additional timestamps (e.g. through the\n   * maxTimeGap option).\n   * \n   * @returns {Date[]} All defined times, sorted upwardly.\n   */\n  getTimes() {\n    return this.times;\n  }\n  \n  /**\n   * Returns a list of all enabled timestamps of this timeline.\n   * \n   * @returns {Date[]} All enabled times, sorted upwardly.\n   */\n  getEnabledTimes() {\n    return this.enabledTimes;\n  }\n  \n  /**\n   * Returns a list of times. These times are enabled throug every set of times.\n   * \n   * @returns {Date[]} Enabled times, sorted upwardly.\n   */\n  getAllEnabledTimes() {\n    return this.allEnabledTimes;\n  }\n  \n  /**\n   * Defines a set of times. Set is identified by an ID.\n   * If the set was already defined, the set of times will be overwritten.\n   * \n   * @param {mixed} id - ID of the set of times.\n   * @param {Date[]} times - Times (must be sorted upwardly).\n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   * @fires module:meteoJS/timeline#change:times\n   * @fires module:meteoJS/timeline#change:enabledTimes\n   */\n  setTimesBySetID(id, times) {\n    this.timesByKey[id] = {\n      times: times,\n      enabled: times\n    };\n    this._updateTimes();\n    this._updateEnabledTimes();\n    return this;\n  }\n  \n  /**\n   * Defines the enbaled times of a set of times. The passed times must be\n   * contained in the times of the set (defined earlier by setTimesBySetID).\n   * \n   * @param {mixed} id - ID of the set of times.\n   * @param {Date[]} times - Times to set enabled (must be sorted upwardly).\n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   * @fires module:meteoJS/timeline#change:enabledTimes\n   */\n  setEnabledTimesBySetID(id, times) {\n    if (id in this.timesByKey) {\n      this.timesByKey[id].enabled = times;\n      this._updateEnabledTimes();\n    }\n    return this;\n  }\n  \n  /**\n   * Returns IDs of all defined sets.\n   * \n   * @return {mixed[]} IDs.\n   */\n  getSetIDs() {\n    return Object.keys(this.timesByKey);\n  }\n  \n  /**\n   * Deletes a set of times.\n   * \n   * @param {mixed} id - ID of the set of times.\n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   * @fires module:meteoJS/timeline#change:times\n   * @fires module:meteoJS/timeline#change:enabledTimes\n   */\n  deleteSetID(id) {\n    if (id in this.timesByKey) {\n      delete this.timesByKey[id];\n      this._updateTimes();\n      this._updateEnabledTimes();\n    }\n    return this;\n  }\n  \n  /**\n   * Set selected time to the first time, which is enabled.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  first() {\n    this._setSelectedTime(this.getFirstEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Set selected time to the last time, which is enabled.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  last() {\n    this._setSelectedTime(this.getLastEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes selected time to the next enabled time.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  next() {\n    this._setSelectedTime(this.getNextEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes selected time to the previous enabled time.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  prev() {\n    this._setSelectedTime(this.getPrevEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes selected time to the next time, which is enabled by all sets.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  nextAllEnabledTime() {\n    this._setSelectedTime(this.getNextAllEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes selected time to the previous time, which is enabled by all sets.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  prevAllEnabledTime() {\n    this._setSelectedTime(this.getPrevAllEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes the selected time width adding an amount of \"time\".\n   * If the \"new\" timestamp is not available, the selected time is not changed.\n   * \n   * @param {number} amount - \"Time\"-Amount.\n   * @param {'years'|'y'|'months'|'M'|'days'|'d'|'hours'|'h'|'minutes'|'m'|'seconds'|'s'|'milliseconds'|'ms'}\n   *   timeKey - Period, nomenclature analogue to momentjs.\n   * @returns {module:meteoJS/timeline.Timeline} - Returns this.\n   */\n  add(amount, timeKey) {\n    let d = this.getSelectedTime();\n    let delta = 0;\n    switch (timeKey) {\n    case 'hours':\n    case 'h':\n      delta = amount * 3600 * 1000;\n      break;\n    case 'minutes':\n    case 'm':\n      delta = amount * 60 * 1000;\n      break;\n    case 'seconds':\n    case 's':\n      delta = amount * 1000;\n      break;\n    case 'milliseconds':\n    case 'ms':\n      delta = amount;\n      break;\n    }\n    if (delta != 0)\n      d = new Date(d.valueOf() + delta);\n    \n    switch (timeKey) {\n    case 'years':\n    case 'y':\n      d.setUTCFullYear(d.getUTCFullYear() + amount);\n      break;\n    case 'months':\n    case 'M':\n      d.setUTCMonth(d.getUTCMonth() + amount);\n      break;\n    case 'days':\n    case 'd':\n      d.setUTCDate(d.getUTCDate() + amount);\n      break;\n    }\n    \n    if (_indexOfTimeInTimesArray(d, this.times) > -1)\n      this._setSelectedTime(d);\n    return this;\n  }\n  \n  /**\n   * Changes the selected time width subracting an amount of \"time\".\n   * If the \"new\" timestamp is not available, the selected time is not changed.\n   * \n   * @param {number} amount - \"Time\"-Amount.\n   * @param {'years'|'y'|'months'|'M'|'days'|'d'|'hours'|'h'|'minutes'|'m'|'seconds'|'s'|'milliseconds'|'ms'}\n   *   timeKey - Period, nomenclature analogue to momentjs.\n   * @returns {module:meteoJS/timeline.Timeline} - Returns this.\n   */\n  sub(amount, timeKey) {\n    let d = this.getSelectedTime();\n    let delta = 0;\n    switch (timeKey) {\n    case 'hours':\n    case 'h':\n      delta = amount * 3600 * 1000;\n      break;\n    case 'minutes':\n    case 'm':\n      delta = amount * 60 * 1000;\n      break;\n    case 'seconds':\n    case 's':\n      delta = amount * 1000;\n      break;\n    case 'milliseconds':\n    case 'ms':\n      delta = amount;\n      break;\n    }\n    if (delta != 0)\n      d = new Date(d.valueOf() - delta);\n    \n    switch (timeKey) {\n    case 'years':\n    case 'y':\n      d.setUTCFullYear(d.getUTCFullYear() - amount);\n      break;\n    case 'months':\n    case 'M':\n      d.setUTCMonth(d.getUTCMonth() - amount);\n      break;\n    case 'days':\n    case 'd':\n      d.setUTCDate(d.getUTCDate() - amount);\n      break;\n    }\n    \n    if (_indexOfTimeInTimesArray(d, this.times) > -1)\n      this._setSelectedTime(d);\n    return this;\n  }\n  \n  /**\n   * Returns first time in this timeline, which is enabled by at least one set.\n   * \n   * @returns {Date} First enabled time, could be invalid.\n   */\n  getFirstEnabledTime() {\n    return (this.enabledTimes.length > 0) ?\n      this.enabledTimes[0] : new Date('invalid');\n  }\n  \n  /**\n   * Returns last time in this timeline, which is enabled by at least one set.\n   * \n   * @returns {Date} Last enabled time, could be invalid.\n   */\n  getLastEnabledTime() {\n    return (this.enabledTimes.length > 0) ?\n      this.enabledTimes[this.enabledTimes.length-1] : new Date('invalid');\n  }\n  \n  /**\n   * Returns next time after the selected time, which is enabled by at least\n   * one set. If selected time is invalid, the first enabled time is returned.\n   * \n   * @returns {Date} Next enabled time.\n   */\n  getNextEnabledTime() {\n    if (this.enabledTimes.length < 1)\n      return new Date('invalid');\n    var index = _indexOfTimeInTimesArray(this.getSelectedTime(), this.enabledTimes);\n    if (index > -1) {\n      index++;\n      return (index < this.enabledTimes.length) ?\n        this.enabledTimes[index] :\n        this.enabledTimes[this.enabledTimes.length-1];\n    }\n    else if (isNaN(this.getSelectedTime()))\n      return this.enabledTimes[0];\n    else {\n      // Es war kein Zeitpunkt aus enabledTimes\n      var result = new Date('invalid');\n      for (var i=0; i<this.enabledTimes.length; i++)\n        if (this.getSelectedTime().valueOf() < this.enabledTimes[i].valueOf()) {\n          result = this.enabledTimes[i];\n          break;\n        }\n      return result;\n    }\n  }\n  \n  /**\n   * Returns previous time before the selected time, which is enabled by at least\n   * one set. If selected time is invalid, the last enabled time is returned.\n   * \n   * @returns {Date} Previous enabled time.\n   */\n  getPrevEnabledTime() {\n    if (this.enabledTimes.length < 1)\n      return new Date('invalid');\n    var index = _indexOfTimeInTimesArray(this.getSelectedTime(), this.enabledTimes);\n    if (index > -1) {\n      index--;\n      return (-1 < index) ? this.enabledTimes[index] : this.enabledTimes[0];\n    }\n    else if (isNaN(this.getSelectedTime()))\n      return this.enabledTimes[0];\n    else {\n      // Es war kein Zeitpunkt aus enabledTimes\n      var result = new Date('invalid');\n      for (var i=this.enabledTimes.length-1; i>=0; i--)\n        if (this.getSelectedTime().valueOf() > this.enabledTimes[i].valueOf()) {\n          result = this.enabledTimes[i];\n          break;\n        }\n      return result;\n    }\n  }\n  \n  /**\n   * Returns first time in this timeline, which is enabled by at all sets.\n   * \n   * @returns {Date} First time, which is enabled by all sets.\n   */\n  getFirstAllEnabledTime() {\n    return (this.allEnabledTimes.length > 0) ?\n      this.allEnabledTimes[0] : new Date('invalid');\n  }\n  \n  /**\n   * Returns last time in this timeline, which is enabled by at all sets.\n   * \n   * @returns {Date} Last time, which is enabled by all sets.\n   */\n  getLastAllEnabledTime() {\n    return (this.allEnabledTimes.length > 0) ?\n      this.allEnabledTimes[this.allEnabledTimes.length-1] : new Date('invalid');\n  }\n  \n  /**\n   * Returns next time after the selected time, which is enabled by\n   * all sets. If selected time is invalid, the last all enabled time is returned.\n   * \n   * @returns {Date} Next time, which is enabled by all sets.\n   */\n  getNextAllEnabledTime() {\n    if (this.allEnabledTimes.length < 1)\n      return new Date('invalid');\n    var index = _indexOfTimeInTimesArray(this.getSelectedTime(), this.allEnabledTimes);\n    if (index > -1) {\n      index++;\n      return (index < this.allEnabledTimes.length) ?\n        this.allEnabledTimes[index] :\n        this.allEnabledTimes[this.allEnabledTimes.length-1];\n    }\n    else if (isNaN(this.getSelectedTime()))\n      return this.allEnabledTimes[0];\n    else {\n      // Es war kein Zeitpunkt aus allEnabledTimes\n      var result = new Date('invalid');\n      for (var i=0; i<this.allEnabledTimes.length; i++)\n        if (this.getSelectedTime().valueOf() < this.allEnabledTimes[i].valueOf()) {\n          result = this.allEnabledTimes[i];\n          break;\n        }\n      return result;\n    }\n  }\n  \n  /**\n   * Returns previous time before the selected time, which is enabled by\n   * all sets. If selected time is invalid, the first all enabled time is returned.\n   * \n   * @returns {Date} Previous time, which is enabled by all sets.\n   */\n  getPrevAllEnabledTime() {\n    if (this.allEnabledTimes.length < 1)\n      return new Date('invalid');\n    var index = _indexOfTimeInTimesArray(this.getSelectedTime(), this.allEnabledTimes);\n    if (index > -1) {\n      index--;\n      return (-1 < index) ? this.allEnabledTimes[index] : this.allEnabledTimes[0];\n    }\n    else if (isNaN(this.getSelectedTime()))\n      return this.allEnabledTimes[0];\n    else {\n      // Es war kein Zeitpunkt aus allEnabledTimes\n      var result = new Date('invalid');\n      for (var i=this.allEnabledTimes.length-1; i>=0; i--)\n        if (this.getSelectedTime().valueOf() > this.allEnabledTimes[i].valueOf()) {\n          result = this.allEnabledTimes[i];\n          break;\n        }\n      return result;\n    }\n  }\n  \n  /**\n   * Returns if the passed time is an enabled time.\n   * \n   * @returns {boolean}\n   */\n  isTimeEnabled(time) {\n    return this.enabledTimes.reduce(function (acc, t) {\n      return (t.valueOf() == time.valueOf()) ? true : acc;\n    }, false);\n  }\n  \n  /**\n   * Returns if the passed time is an enabled time.\n   * \n   * @returns {boolean}\n   */\n  isTimeAllEnabled(time) {\n    return this.allEnabledTimes.reduce(function (acc, t) {\n      return (t.valueOf() == time.valueOf()) ? true : acc;\n    }, false);\n  }\n  \n  /**\n   * Is the selected time the first enabled time.\n   * \n   * @returns {boolean}\n   */\n  isFirstEnabledTime() {\n    return this.getFirstEnabledTime().valueOf() == this.getSelectedTime().valueOf();\n  }\n  \n  /**\n   * Is the selected time the last enabled time.\n   * \n   * @returns {boolean}\n   */\n  isLastEnabledTime() {\n    return this.getLastEnabledTime().valueOf() == this.getSelectedTime().valueOf();\n  }\n  \n  /**\n   * Internal setter of the selected time. Caller must guarantee, that either\n   * the passed timestamp exists in this.times or is invalid.\n   * @param {Date} selectedTime - Selected time.\n   * @fires module:meteoJS/timeline#change:time\n   * @private\n   */\n  _setSelectedTime(selectedTime) {\n    var oldTime = this.selectedTime;\n    this.selectedTime = selectedTime;\n    this.trigger('change:time', oldTime);\n    return this.selectedTime;\n  }\n  \n  /**\n   * Bringt den Inhalt des Arrays this.times in\n   * Übereinstimmung mit dem Inhalt von this.timesByKey\n   * @private\n   * @fires module:meteoJS/timeline#change:times\n   */\n  _updateTimes() {\n    this.times = [];\n    var timesArr = [];\n    var times = {};\n    for (var key in this.timesByKey)\n      this.timesByKey[key].times.forEach(function (t) {\n        if (!(t.valueOf() in times)) {\n          timesArr.push(t);\n          times[t.valueOf()] = t;\n        }\n      });\n    _sortTimesArray(timesArr);\n    timesArr.forEach(function (time) {\n      if (this.times.length < 1) {\n        this.times.push(time);\n        return;\n      }\n      var lastTime = this.times[this.times.length-1];\n      if (this.maxTimeGap !== undefined &&\n          (time.valueOf()-lastTime.valueOf()) > 1000*this.maxTimeGap) {\n        var t = lastTime;\n        do {\n          t = new Date(t.getTime() + this.maxTimeGap*1000);\n          this.times.push(t);\n        } while ((time.valueOf()-t.valueOf()) > 1000*this.maxTimeGap);\n      }\n      this.times.push(time);\n    }, this);\n    _sortTimesArray(this.times);\n    this.trigger('change:times');\n  }\n  \n  /**\n   * Bringt den Inhalt der Arrays this.enabledTimes und this.allEnabledTimes in\n   * Übereinstimmung mit dem Inhalt von this.timesByKey\n   * @private\n   * @fires module:meteoJS/timeline#change:enabledTimes\n   */\n  _updateEnabledTimes() {\n    this.enabledTimes = [];\n    this.allEnabledTimes = [];\n    var enabledTimes = {};\n    var allEnabledTimes = {};\n    for (var key in this.timesByKey) {\n      this.timesByKey[key].enabled.forEach(function (t) {\n        if (!(t.valueOf() in enabledTimes)) {\n          this.enabledTimes.push(t);\n          enabledTimes[t.valueOf()] = t;\n        }\n        if (!(t.valueOf() in allEnabledTimes))\n          allEnabledTimes[t.valueOf()] = 1;\n        else\n          allEnabledTimes[t.valueOf()]++;\n      }, this);\n    }\n    _sortTimesArray(this.enabledTimes);\n    for (var value in allEnabledTimes)\n      if (allEnabledTimes[value] == Object.keys(this.timesByKey).length)\n        this.allEnabledTimes.push(enabledTimes[value]);\n    _sortTimesArray(this.allEnabledTimes);\n    this.trigger('change:enabledTimes');\n  }\n  \n  /**\n   * Intialize property \"_keyboardNavigation\".\n   * \n   * @param {module:meteoJS/timeline~optionKeyboardNavigation}\n   *   [keyboardNavigation] - Keyboard navigation options.\n   * @private\n   */\n  _initKeyboardNavigation({\n    enabled = false,\n    first = 36,\n    last = 35,\n    prev = 37,\n    next = 39,\n    prevAllEnabledTime = [37, 'ctrl'],\n    nextAllEnabledTime = [39, 'ctrl'],\n    add = undefined,\n    sub = undefined\n  } = {}) {\n    if (add === undefined)\n      add = {\n        '3h': [39, 'ctrl', 'shift'],\n        '6h': [39, 'shift'],\n        '12h': [39, 'alt', 'shift'],\n        '24h': [39, 'alt']\n      };\n    if (sub === undefined)\n      sub = {\n        '3h': [37, 'ctrl', 'shift'],\n        '6h': [37, 'shift'],\n        '12h': [37, 'alt', 'shift'],\n        '24h': [37, 'alt']\n      };\n    this._keyboardNavigation = {\n      enabled,\n      first,\n      last,\n      prev,\n      next,\n      prevAllEnabledTime,\n      nextAllEnabledTime,\n      add,\n      sub\n    };\n    if (document && this._keyboardNavigation.enabled)\n      document.addEventListener('keydown', event => {\n        Object.keys(this._keyboardNavigation).forEach(method => {\n          if (method == 'enabled')\n            return;\n          if (/^(add|sub)$/.test(method)) {\n            Object.keys(this._keyboardNavigation[method]).forEach(time => {\n              const matches = time.match(/^([0-9]+)\\s*([a-zA-Z]+)$/);\n              if (matches === null)\n                return;\n              if (_isEventMatchPressedKeys(event, this._keyboardNavigation[method][time]))\n                this[method](+matches[1], matches[2]);\n            });\n          }\n          else\n            if (method in this &&\n                _isEventMatchPressedKeys(event, this._keyboardNavigation[method]))\n              this[method]();\n        });\n      });\n  }\n}\naddEventFunctions(Timeline.prototype);\nexport default Timeline;\n\n/**\n * Gibt den Index eines Zeitpunktes in einem Array aus Zeitpunkten zurück.\n * @param {Date} time Zeitpunkt\n * @param {Date[]} times Array aus Zeitpunkten\n * @returns {number} -1 für \"nicht gefunden\n * @static\n * @private\n */\nexport let _indexOfTimeInTimesArray = (time, times) => {\n  return times.findIndex(function (t) {\n    return t.valueOf() == time.valueOf();\n  });\n};\n\n/**\n * Sortiert einen Array aus Zeitpunkten zeitlich aufwärts\n * @param {Date[]} times Array aus Zeitpunkten\n * @static\n * @private\n */\nfunction _sortTimesArray(times) {\n  times.sort(function (a,b) { return a.valueOf()-b.valueOf(); });\n}\n\n/**\n * Returns if an event represents a certain key pressed with (optional)\n * additional special keys.\n * \n * @param {KeyboardEvent} keyboardEvent - Keyboard event.\n * @param {module:meteoJS/timeline~optionPressedKeys} pressedKeys\n *   Checks if this keys are pressed.\n * @private\n */\nexport function _isEventMatchPressedKeys(keyboardEvent, pressedKeys) {\n  if (typeof pressedKeys != 'object' ||\n      !('forEach' in pressedKeys))\n    pressedKeys = [pressedKeys];\n  if (pressedKeys.length == 0)\n    return false;\n  let result =\n    [['ctrl', 'ctrlKey'],\n      ['alt', 'altKey'],\n      ['shift', 'shiftKey'],\n      ['meta', 'metaKey']]\n      .reduce((acc, cur) => acc && (((pressedKeys.indexOf(cur[0]) > -1))\n        ? keyboardEvent[cur[1]]\n        : !keyboardEvent[cur[1]]),\n      true);\n  pressedKeys.forEach(o => {\n    switch (o) {\n    case 'ctrl':\n    case 'alt':\n    case 'shift':\n    case 'meta':  break;\n    default:      if (o != keyboardEvent.keyCode) result = false;\n    }\n  });\n  return result;\n}","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","/**\n * @module meteoJS/timeline/animation\n */\nimport $ from 'jquery';\nimport addEventFunctions from '../Events.js';\nimport Timeline from '../Timeline.js';\n\n/**\n * Options for animation constructor.\n * \n * @typedef {Object} module:meteoJS/timeline/animation~options\n * @param {module:meteoJS/timeline.Timeline} timeline - Timeline to animate.\n * @param {number} [restartPause]\n *   Time in seconds to pause before the animation restart.\n * @param {number} [imagePeriod]\n *   Time in seconds between animation of two images.\n *   Ignored, if imageFrequency is specified.\n * @param {number|undefined} [imageFrequency]\n *   Time of images during one second.\n * @param {boolean} [enabledStepsOnly] - Use only enabled times.\n * @param {boolean} [allEnabledStepsOnly]\n *   Use only times that are enabled by all sets of time.\n */\n\n/**\n * Event on animation start.\n * \n * @event module:meteoJS/timeline/animation#start:animation\n */\n\n/**\n * Event on animation stop.\n * \n * @event module:meteoJS/timeline/animation#stop:animation\n */\n\n/**\n * Event on reaching last timestamp.\n * \n * @event module:meteoJS/timeline/animation#end:animation\n */\n\n/**\n * Event triggered immediatly before restart of animation.\n * \n * @event module:meteoJS/timeline/animation#restart:animation\n */\n\n/**\n * Event triggered when imageFrequency/imagePeriod is changed.\n * \n * @event module:meteoJS/timeline/animation#change:imageFrequency\n */\n\n/**\n * Event triggered when restartPause is changed.\n * \n * @event module:meteoJS/timeline/animation#change:restartPause\n */\n\n/**\n * Object to animate {@link module:meteoJS/timeline.Timeline}.\n */\nexport class Animation {\n  \n  /**\n   * @param {module:meteoJS/timeline/animation~options} options - Options.\n   */\n  constructor({ timeline,\n    restartPause = 1.8,\n    imagePeriod = 0.2,\n    imageFrequency,\n    enabledStepsOnly = true,\n    allEnabledStepsOnly = false } = {}) {\n    /**\n     * @type module:meteoJS/timeline/animation~options\n     * @private\n     */\n    this.options = {\n      timeline,\n      restartPause,\n      imagePeriod,\n      imageFrequency,\n      enabledStepsOnly,\n      allEnabledStepsOnly\n    };\n    // Normalize options\n    if (this.options.timeline === undefined)\n      this.options.timeline = new Timeline();\n    if (this.options.imageFrequency !== undefined &&\n        this.options.imageFrequency != 0)\n      this.options.imagePeriod = 1/this.options.imageFrequency;\n    /**\n     * ID to window.setInterval() of the animation.\n     * If undefined, there is no started animation.\n     * @type undefined|number\n     * @private\n     */\n    this.animationIntervalID = undefined;\n    \n    /**\n     * ID to window.setTimeout() ot the animation (used for restart-pause).\n     * If undefined, there is no started setTimeout (i.e. no restart-pause).\n     * @type undefined|number\n     * @private\n     */\n    this.animationTimeoutID = undefined;\n    \n    /**\n     * Current position in this.times in the animation.\n     * @type integer\n     * @private\n     */\n    this.animationStep = 0;\n    \n    /**\n     * Hash with timestamps-valueOf's as keys and index in this.times as values.\n     * @type Object\n     * @private\n     */\n    this.timesHash = {};\n    \n    /**\n     * List of timestamps. Current list of times of the timeline to animate over.\n     * @type Date[]\n     * @private\n     */\n    this.times = [];\n    \n    // Timeline initialisieren\n    let onChangeTimes = () => {\n      this.times = this.options.timeline[this._getTimelineTimesMethod()]();\n      this.timesHash = {};\n      this.times.forEach((time, i) => this.timesHash[time.valueOf()] = i);\n    };\n    this.options.timeline.on(this._getTimelineChangeTimesEvent(), onChangeTimes);\n    onChangeTimes();\n  }\n  \n  /**\n   * Returns time period between two animation steps (in s).\n   * \n   * @returns {number} Time period.\n   */\n  getImagePeriod() {\n    return this.options.imagePeriod;\n  }\n  \n  /**\n   * Sets time period between to animation steps (in s)\n   * \n   * @param {number} imagePeriod - Time period.\n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   */\n  setImagePeriod(imagePeriod) {\n    this.options.imagePeriod = imagePeriod;\n    if (this.isStarted())\n      this._updateAnimation();\n    this.trigger('change:imageFrequency');\n    return this;\n  }\n  \n  /**\n   * Returns time frequency of animation steps (in 1/s).\n   * \n   * @returns {number} Time frequency.\n   */\n  getImageFrequency() {\n    return 1/this.options.imagePeriod;\n  }\n  \n  /**\n   * Sets time frequency of animation steps (in 1/s).\n   * \n   * @param {number} imageFrequency - Time frequency.\n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   */\n  setImageFrequency(imageFrequency) {\n    if (imageFrequency != 0)\n      this.setImagePeriod(1/imageFrequency);\n    return this;\n  }\n  \n  /**\n   * Returns time duration before a restart (jump from end to beginning, in s).\n   * \n   * @returns {number} Time duration.\n   */\n  getRestartPause() {\n    return this.options.restartPause;\n  }\n  \n  /**\n   * Sets time duration before a restart (in s).\n   * \n   * @param {number} restartPause - Time duration.\n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   */\n  setRestartPause(restartPause) {\n    this.options.restartPause = Number(restartPause); // Convert string to number\n    this.trigger('change:restartPause');\n    return this;\n  }\n  \n  /**\n   * Is animation started.\n   * \n   * @returns {boolean}\n   */\n  isStarted() {\n    return this.animationIntervalID !== undefined ||\n           this.animationTimeoutID !== undefined;\n  }\n  \n  /**\n   * Starts the animation.\n   * \n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   * @fires module:meteoJS/timeline/animation#start:animation\n   */\n  start() {\n    if (this.options.timeline.getSelectedTime().valueOf() in this.timesHash)\n      this._setStep(this.timesHash[this.options.timeline.getSelectedTime().valueOf()]);\n    if (!this.isStarted())\n      this._updateAnimation();\n    this.trigger('start:animation');\n  }\n  \n  /**\n   * Stops the animation.\n   * \n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   * @fires module:meteoJS/timeline/animation#stop:animation\n   */\n  stop() {\n    this._clearAnimation();\n    this.trigger('stop:animation');\n  }\n  \n  /**\n   * Toggles the animation.\n   * \n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   */\n  toggle() {\n    if (this.isStarted())\n      this.stop();\n    else\n      this.start();\n  }\n  \n  /**\n   * Setzt Schritt der Animation\n   * @private\n   * @param {number} step\n   */\n  _setStep(step) {\n    if (0 <= step && step < this._getCount())\n      this.animationStep = step;\n  }\n  \n  /**\n   * Gibt timeline-Event Name zum abhören von Änderungen der Zeitschritte zurück.\n   * @private\n   * @returns {string}\n   */\n  _getTimelineChangeTimesEvent() {\n    return (this.options.enabledStepsOnly || this.options.allEnabledStepsOnly)\n      ? 'change:enabledTimes' : 'change:times';\n  }\n  \n  /**\n   * Gibt timeline-Methode aller Zeitschritte zurück.\n   * @private\n   * @returns {string}\n   */\n  _getTimelineTimesMethod() {\n    return this.options.allEnabledStepsOnly ? 'getAllEnabledTimes' :\n      this.options.enabledStepsOnly ? 'getEnabledTimes' : 'getTimes';\n  }\n  \n  /**\n   * Gibt Anzahl Animationsschritte zurück\n   * @private\n   * @returns {number}\n   */\n  _getCount() {\n    return this.options.timeline[this._getTimelineTimesMethod()]().length;\n  }\n  \n  /**\n   * Handelt die Animation\n   * @private\n   * @fires module:meteoJS/timeline/animation#end:animation\n   * @fires module:meteoJS/timeline/animation#restart:animation\n   */\n  _updateAnimation() {\n    this._clearAnimation();\n    if (this.animationStep < this._getCount()-1)\n      this._initAnimation();\n    else\n      this._initRestartPause();\n  }\n  \n  /**\n   * Startet Animation\n   * @private\n   */\n  _initAnimation() {\n    if (this.animationIntervalID === undefined)\n      this.animationIntervalID = window.setInterval(() => {\n        this.animationStep++;\n        if (this.animationStep < this.times.length)\n          this.options.timeline.setSelectedTime(this.times[this.animationStep]);\n        if (this.animationStep >= this._getCount()-1) {\n          this.trigger('end:animation');\n          this._clearAnimation();\n          this._initRestartPause();\n        }\n      }, this.options.imagePeriod * 1000);\n  }\n  \n  /**\n   * Startet den Timer für die Restart-Pause\n   * Verwende als Zeitspanne imagePeriod+restartPause. Sonst wird bei restartPause\n   * 0s der letzte Zeitschritt gar nie angezeigt.\n   * @private\n   */\n  _initRestartPause() {\n    if (this.animationTimeoutID === undefined)\n      this.animationTimeoutID = window.setTimeout(() => {\n        this.animationStep = 0;\n        this.trigger('restart:animation');\n        if (this.animationStep < this.times.length)\n          this.options.timeline.setSelectedTime(this.times[this.animationStep]);\n        this._clearAnimation();\n        this._initAnimation();\n      }, (this.options.imagePeriod + this.options.restartPause) * 1000);\n  }\n  \n  /**\n   * Löscht window.interval, falls vorhanden\n   * @private\n   */\n  _clearAnimation() {\n    if (this.animationIntervalID !== undefined) {\n      window.clearInterval(this.animationIntervalID);\n      this.animationIntervalID = undefined;\n    }\n    if (this.animationTimeoutID !== undefined) {\n      window.clearTimeout(this.animationTimeoutID);\n      this.animationTimeoutID = undefined;\n    }\n  }\n  \n}\naddEventFunctions(Animation.prototype);\nexport default Animation;\n\n/**\n * Insert an input-group to change frequency.\n * \n * @param {external:jQuery} node - Node to insert input-group.\n * @param {Object} options - Options for input-group.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {string} options.suffix - Suffix text for input-group.\n * @returns {external:jQuery} Input-group node.\n */\nexport function insertFrequencyInput(node, { animation, suffix = 'fps' }) {\n  let number = $('<input>')\n    .addClass('form-control')\n    .attr('type', 'number')\n    .attr('min', 1)\n    .attr('step', 1);\n  let inputGroupNumber = $('<div>')\n    .addClass('input-group')\n    .append(number)\n    .append($('<div>')\n      .addClass('input-group-append')\n      .append($('<span>').addClass('input-group-text').text(suffix)));\n  number.on('change', () => animation.setImageFrequency(number.val()));\n  let onChangeImageFrequency = () => number.val(animation.getImageFrequency());\n  animation.on('change:imageFrequency', onChangeImageFrequency);\n  onChangeImageFrequency();\n  node.append(inputGroupNumber);\n  return inputGroupNumber;\n}\n\n/**\n * Insert an input-range to change frequency.\n * \n * @param {external:jQuery} node - Node to insert input-range.\n * @param {Object} options - Options for input-range.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {number[]} options.frequencies - Frequencies to select.\n * @returns {external:jQuery} Input-range node.\n */\nexport function insertFrequencyRange(node, { animation, frequencies }) {\n  frequencies = frequencies ? frequencies : [1];\n  let range = $('<input>')\n    .addClass('custom-range')\n    .attr('type', 'range')\n    .attr('min', 0)\n    .attr('max', frequencies.length-1);\n  range.on('change input', () => {\n    let i = range.val();\n    if (i < frequencies.length)\n      animation.setImageFrequency(frequencies[i]);\n  });\n  let onChangeImageFrequency = () => {\n    let i = frequencies.indexOf(animation.getImageFrequency());\n    if (i > -1)\n      range.val(i);\n  };\n  animation.on('change:imageFrequency', onChangeImageFrequency);\n  onChangeImageFrequency();\n  node.append(range);\n  return range;\n}\n\n/**\n * Insert an button-group to change frequency.\n * \n * @param {external:jQuery} node - Node to insert the button-group.\n * @param {Object} options - Options for the button-group.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {number[]} options.frequencies - Frequencies to select.\n * @param {string|undefined} btnGroupClass - Class added to the button-group node.\n * @param {string|undefined} btnClass - Class added to each button.\n * @param {string} options.suffix - Suffix text for each button after frequency.\n * @returns {external:jQuery} Button-group node.\n */\nexport function insertFrequencyButtonGroup(node, { animation,\n  frequencies,\n  btnGroupClass = 'btn-group',\n  btnClass = 'btn btn-primary',\n  suffix = 'fps' }) {\n  let btnGroup = $('<div>').addClass(btnGroupClass);\n  frequencies = frequencies ? frequencies : [];\n  frequencies.forEach(freq => {\n    btnGroup.append($('<button>')\n      .addClass(btnClass)\n      .data('frequency', freq)\n      .text(freq + ' ' + suffix)\n      .click(() => animation.setImageFrequency(freq)));\n  });\n  let onChange = () => {\n    btnGroup.children('button').removeClass('active').each(function () {\n      if ($(this).data('frequency') == animation.getImageFrequency())\n        $(this).addClass('active');\n    });\n  };\n  animation.on('change:imageFrequency', onChange);\n  onChange();\n  node.append(btnGroup);\n  return btnGroup;\n}\n\n/**\n * Insert an input-group to change restart pause.\n * \n * @param {external:jQuery} node - Node to insert input-group.\n * @param {Object} options - Options for input-group.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {string} options.suffix - Suffix text for input-group.\n * @returns {external:jQuery} Input-group node.\n */\nexport function insertRestartPauseInput(node, { animation, suffix = 's' }) {\n  let input = $('<input>')\n    .addClass('form-control')\n    .attr('type', 'number')\n    .attr('min', 0)\n    .attr('step', 0.1);\n  let inputGroupNumber = $('<div>')\n    .addClass('input-group')\n    .append(input)\n    .append($('<div>')\n      .addClass('input-group-append')\n      .append($('<span>').addClass('input-group-text').text(suffix)));\n  input.on('change', () => animation.setRestartPause(input.val()));\n  let onChange = () => input.val(animation.getRestartPause());\n  animation.on('change:restartPause', onChange);\n  onChange();\n  node.append(inputGroupNumber);\n  return inputGroupNumber;\n}\n\n/**\n * Insert an input-range to change restart pause.\n * \n * @param {external:jQuery} node - Node to insert input-range.\n * @param {Object} options - Options for input-range.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {number[]} options.pauses - Restart pauses to select.\n * @returns {external:jQuery} Input-range node.\n */\nexport function insertRestartPauseRange(node, { animation, pauses }) {\n  pauses = pauses ? pauses : [1];\n  pauses = pauses.map(p => Math.round(p * 1000));\n  let range = $('<input>')\n    .addClass('custom-range')\n    .attr('type', 'range')\n    .attr('min', 0)\n    .attr('max', pauses.length-1);\n  range.on('change input', () => {\n    let i = range.val();\n    if (i < pauses.length)\n      animation.setRestartPause(pauses[i] / 1000);\n  });\n  let onChangeImageFrequency = () => {\n    let i =\n      pauses.indexOf(Math.round(animation.getRestartPause() * 1000));\n    if (i > -1)\n      range.val(i);\n  };\n  animation.on('change:imageFrequency', onChangeImageFrequency);\n  onChangeImageFrequency();\n  node.append(range);\n  return range;\n}\n\n/**\n * Insert an button-group to change restart pause.\n * \n * @param {external:jQuery} node - Node to insert the button-group.\n * @param {Object} options - Options for the button-group.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {number[]} options.pauses - Restart pauses to select.\n * @param {string|undefined} btnGroupClass - Class added to the button-group node.\n * @param {string|undefined} btnClass - Class added to each button.\n * @param {string} options.suffix - Suffix in each button after duration text.\n * @returns {external:jQuery} Button-group node.\n */\nexport function insertRestartPauseButtonGroup(node, { animation,\n  pauses,\n  btnGroupClass = 'btn-group',\n  btnClass = 'btn btn-primary',\n  suffix = 's' }) {\n  let btnGroup = $('<div>').addClass(btnGroupClass);\n  pauses = pauses ? pauses : [];\n  pauses.forEach(pause => {\n    btnGroup.append($('<button>')\n      .addClass(btnClass)\n      .data('pause', pause)\n      .text(pause + ' ' + suffix)\n      .click(() => animation.setRestartPause(pause)));\n  });\n  let onChange = () => {\n    btnGroup.children('button').removeClass('active').each(function () {\n      if ($(this).data('pause') == animation.getRestartPause())\n        $(this).addClass('active');\n    });\n  };\n  animation.on('change:restartPause', onChange);\n  onChange();\n  node.append(btnGroup);\n  return btnGroup;\n}","/**\n * @module meteoJS/timeline/visualisation\n */\nimport addEventFunctions from '../Events.js';\nimport Timeline from '../Timeline.js';\n\n/**\n * Returns a textual representation of a time according to a passed format.\n * \n * This function could be used to convert Date-objects to a readable time with\n * external libraries. One such implementation is given by\n * {@link module:meteoJS/timeline/visualisation.makeTimeTextCallbackFunction}.\n * \n * @typedef {Function}\n *   module:meteoJS/timeline/visualisation~timeTextCallbackFunction\n * @param {Date} time - A valid datetime.\n * @param {string} format - Format string.\n * @returns {string} Textual representation.\n */\n\n/**\n * Options for Visualisation.\n * \n * @typedef {Object} module:meteoJS/timeline/visualisation~options\n * @param {module:meteoJS/timeline.Timeline} [timeline]\n *   Timeline object.\n * @param {external:jQuery} [node] - Node.\n * @param {module:meteoJS/timeline/animation.Animation} [animation]\n *   Animation object. If specified, the animation will be stopped on user\n *   interaction with the visualisation object.\n * @param {boolean} [enabledStepsOnly=true] - Use only enabled times.\n * @param {boolean} [allEnabledStepsOnly=false]\n *   Use only times that are enabled by all sets of time.\n * @param {string} [textInvalid='-']\n *   Output string, if time of timeline is invalid.\n * @param {module:meteoJS/timeline/visualisation~timeTextCallbackFunction}\n *   [getTimeText]\n *   Returns a textual representation of a time according to a passed format.\n * @param {string} [outputTimezone]\n *   'local' for browser local timezone.\n */\n\n/**\n * Object to visualise {@link module:meteoJS/timeline.Timeline}.\n * \n * How to create your own visualisation object:\n * * Inherit this object\n * * Inherit method onChangeTime()\n * * Inherit method onChangeTimes()\n * * Inherit method emptyNode()\n * * Inherit method onInitNode()\n * * To get all times to display use getTimelineTimes()\n * * Use method timeToText() to convert a Date to String.\n * * Use method attachEventListener() to attach event listeners on a object.\n *   The event listener will be deleted automatically if the output is muted.\n * * At the end of the constructor call \"this.setNode(this.options.node);\".\n * \n * @abstract\n * @listens module:meteoJS/timeline#change:time\n * @listens module:meteoJS/timeline#change:times\n * @listens module:meteoJS/timeline#change:enabledTimes\n */\nexport class Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation~options} options - Options.\n   */\n  constructor({\n    timeline = undefined,\n    node = undefined,\n    animation = undefined,\n    enabledStepsOnly = true,\n    allEnabledStepsOnly = false,\n    textInvalid = '-',\n    getTimeText = undefined,\n    outputTimezone = undefined\n  } = {}) {\n    /**\n     * @type Object\n     * @private\n     */\n    this.options = {\n      timeline,\n      node,\n      animation,\n      enabledStepsOnly,\n      allEnabledStepsOnly,\n      textInvalid,\n      getTimeText,\n      outputTimezone\n    };\n    \n    // Normalize options\n    if (this.options.timeline === undefined)\n      this.options.timeline = new Timeline();\n    \n    /**\n     * @member {Array[]}\n     * @private\n     */\n    this.listeners = [];\n    \n    /**\n     * @member {undefined|mixed}\n     * @private\n     */\n    this.inputListener = undefined;\n  }\n  \n  /**\n   * Sets jQuery-Node for output.\n   * \n   * @public\n   * @param {external:jQuery|undefined} node Node, undefined to mute the output.\n   * @returns {module:meteoJS/timeline/visualisation.Visualisation} This.\n   */\n  setNode(node) {\n    if (this.options.node !== undefined)\n      this.emptyNode();\n  \n    if (node === undefined) {\n      this.detachEventListeners();\n      this.options.node = node;\n    }\n    else {\n      this.options.node = node;\n      var isListenersDefined = this.listeners.length > 0;\n      if (!isListenersDefined) {\n        this.attachEventListener(this.options.timeline, 'change:time', function () {\n          this.onChangeTime();\n        }, this);\n        this.attachEventListener(this.options.timeline, 'change:times', function () {\n          this.onChangeTimes();\n        }, this);\n        this.attachEventListener(this.options.timeline, 'change:enabledTimes', function () {\n          this.onChangeTimes();\n        }, this);\n      }\n      this.onInitNode(isListenersDefined);\n      this.onChangeTimes();\n      this.onChangeTime();\n    }\n  \n    if (this.inputListener === undefined)\n      this.inputListener = this.on('input', function () {\n        if (this.options.animation !== undefined)\n          this.options.animation.stop();\n      }, this);\n  \n    return this;\n  }\n  \n  /**\n   * Gets current value of output timezone.\n   * \n   * @public\n   * @returns {string|undefined} Output timezone.\n   */\n  getOutputTimezone() {\n    return this.options.outputTimezone;\n  }\n  \n  /**\n   * Sets output timezone, undefined for UTC.\n   * \n   * @public\n   * @param {string|undefined} outputTimezone Timezone for datetime output.\n   * @returns {module:meteoJS/timeline/visualisation.Visualisation} This.\n   */\n  setOutputTimezone(outputTimezone) {\n    var updateOutput = (this.options.outputTimezone != outputTimezone);\n    this.options.outputTimezone = outputTimezone;\n    if (updateOutput &&\n        this.options.node !== undefined) {\n      this.onChangeTimes();\n      this.onChangeTime();\n    }\n    return this;\n  }\n  \n  /**\n   * Called if the timeline triggers the\n   * {@link module:meteoJS/timeline#change:time} event.\n   * Prerequisite: this.options.node must be defined.\n   * \n   * @abstract\n   * @protected\n   */\n  onChangeTime() {}\n  \n  /**\n   * Called if the timeline triggers the {@link module:meteoJS/timeline#change:times}\n   * or {@link module:meteoJS/timeline#change:enabledTimes} event.\n   * Prerequisite: this.options.node must be defined.\n   * \n   * @abstract\n   * @protected\n   */\n  onChangeTimes() {}\n  \n  /**\n   * Called to empty the output node. Mainly if the output is muted.\n   * Prerequisite: this.options.node must be defined.\n   * \n   * @abstract\n   * @protected\n   */\n  emptyNode() {}\n  \n  /**\n   * Called once an output node is set.\n   * Prerequisite: this.options.node must be defined.\n   * \n   * @abstract\n   * @protected\n   * @param {boolean} isListenersDefined\n   *   True if the event listeners are already set.\n   */\n  onInitNode() {}\n  \n  /**\n   * Returns the times to display. This could be either all times in the timeline\n   * or only the enabled times or the all enabled times. The user of the\n   * visualisation object select this by the options.\n   * \n   * @protected\n   * @returns {Date[]} Times.\n   */\n  getTimelineTimes() {\n    var methodName = this.options.allEnabledStepsOnly ?\n      'getAllEnabledTimes' :\n      this.options.enabledStepsOnly ? 'getEnabledTimes' : 'getTimes';\n    return this.options.timeline[methodName]();\n  }\n  \n  /**\n   * Converts a Date-object to a string.\n   * \n   * @protected\n   * @param {Date} time - Time.\n   * @param {string} format - Format string, passed to the .\n   * @returns {string} String.\n   */\n  timeToText(time, format) {\n    if (isNaN(time))\n      return this.options.textInvalid;\n    if (this.options.getTimeText !== undefined)\n      return this.options.getTimeText.call(this, time, format);\n    return time.toISOString();\n  }\n  \n  /**\n   * Attach an event listener on an object. Object could be a jQuery-object or\n   * an object using {@link module:meteoJS/events}.\n   * \n   * @protected\n   * @param {object} obj - Object to put the event listener on.\n   * @param {mixed} listener - Event listener key.\n   * @param {function} func - Function to be executed when event is triggered.\n   * @param {object} [thisArg] - This in the function func when event triggered.\n   */\n  attachEventListener(obj, listener, func, thisArg) {\n    this.listeners.push([obj, listener]);\n    obj.on(listener, func, thisArg);\n  }\n  \n  /**\n   * Detaches all event listeners.\n   * \n   * @private\n   */\n  detachEventListeners() {\n    this.listeners.forEach(function (listenerArr) {\n      if ('un' in listenerArr[0])\n        listenerArr[0].un(listenerArr[1]);\n      else if ('off' in listenerArr[0])\n        listenerArr[0].off(listenerArr[1]);\n    });\n    this.listeners = [];\n  }\n  \n}\naddEventFunctions(Visualisation.prototype);\nexport default Visualisation;\n\n/**\n * Format a Date-object via the {@link https://momentjs.com|Moment.js} library.\n * \n * @param {Object} moment - Moment.js object.\n * @returns {module:meteoJS/timeline/visualisation~timeTextCallbackFunction}\n *   Callback.\n */\nexport function makeTimeTextCallbackFunction(moment) {\n  return function (time, format) {\n    const m = moment.utc(time);\n    if (this.options.outputTimezone !== undefined)\n      (this.options.outputTimezone == 'local')\n        ? m.local()\n        : m.tz(this.options.outputTimezone);\n    return m.format(format);\n  };\n}","/**\n * @module meteoJS/timeline/visualisation/text\n */\nimport Visualisation from '../Visualisation.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/timeline/visualisation/slider~options}\n *  module:meteoJS/timeline/visualisation/text~options\n * @param {string|undefined} format\n *   Format string, used for 'getTimeText'.\n */\n\n/**\n * Show current selected time of a timeline as text.\n * \n * @extends module:meteoJS/timeline/visualisation.Visualisation\n */\nexport class Text extends Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation/text~options} options - Options.\n   */\n  constructor({\n    format = undefined,\n    ...rest\n  } = {}) {\n    super(rest);\n    \n    this.options.format = format;\n    this.setNode(this.options.node);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTime() {\n    this.options.node.text(\n      this.timeToText(this.options.timeline.getSelectedTime(),\n        this.options.format));\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  emptyNode() {\n    this.options.node.text('');\n  }\n  \n}\nexport default Text;","/**\n * @module meteoJS/timeline/visualisation/slider\n */\nimport $ from 'jquery';\nimport Visualisation from '../Visualisation.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/timeline/visualisation~options}\n     module:meteoJS/timeline/visualisation/slider~options\n */\n\n/**\n * Show timeline as a slider.\n * \n * @extends module:meteoJS/timeline/visualisation.Visualisation\n */\nexport class Slider extends Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation/slider~options} options\n   *   Options.\n   */\n  constructor(options) {\n    super(options);\n    \n    /**\n     * @member {Date[]}\n     * @private\n     */\n    this.times = [];\n    /**\n     * @member {Object}\n     * @private\n     */\n    this.timesIndexes = {};\n    \n    this.setNode(this.options.node);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTime() {\n    var t = this.options.timeline.getSelectedTime();\n    if (t.valueOf() in this.timesIndexes)\n      this.options.node.val(this.timesIndexes[t.valueOf()]+1);\n    else\n      this.options.node.val(1);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTimes() {\n    this.times = this.getTimelineTimes();\n    this.timesIndexes = {};\n    this.times.forEach(function (time, i) {\n      this.timesIndexes[time.valueOf()] = i;\n    }, this);\n    this.options.node.prop('max', this.times.length);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onInitNode(isListenersDefined) {\n    this.options.node.prop('min', 1);\n    this.options.node.prop('step', 1);\n    if (!isListenersDefined) {\n      var that = this;\n      this.attachEventListener(this.options.node, 'change input', function () {\n        var i = +$(this).val();\n        if (0 < i &&\n            i <= that.times.length)\n          that.options.timeline.setSelectedTime(that.times[i-1]);\n        that.trigger('input');\n      });\n    }\n  }\n  \n}\nexport default Slider;","/**\n * @module meteoJS/timeline/visualisation/bsButtons\n */\nimport $ from 'jquery';\nimport Visualisation from '../Visualisation.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/timeline/visualisation~options}\n     module:meteoJS/timeline/visualisation/bsButtons~options\n */\n\n/**\n * Show timeline as a group of buttons.\n * \n * @extends module:meteoJS/timeline/visualisation.Visualisation\n */\nexport class bsButtons extends Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation/bsButtons~options} options - Options.\n   */\n  constructor({\n    format = 'HH',\n    grouping = 'daily',\n    groupingFormat = 'ddd, DD. MMM',\n    classMain = 'btn-toolbar',\n    classButtonGroup = 'btn-group',\n    classButtonGroupMargin = 'mr-2',\n    classLabel = undefined,\n    classLabelSpan = 'd-block w-100',\n    classButton = 'btn',\n    classButtonActive = 'active',\n    classButtonNotEnabled = 'btn-light',\n    classButtonEnabled = 'btn-secondary',\n    classButtonAllEnabled = 'btn-primary',\n    /*prependNodes = undefined,\n      appendNodes = undefined*/\n    ...rest\n  } = {}) {\n    super(rest);\n    \n    this.options.format = format;\n    this.options.grouping = grouping;\n    this.options.groupingFormat = groupingFormat;\n    this.options.classMain = classMain;\n    this.options.classButtonGroup = classButtonGroup;\n    this.options.classButtonGroupMargin = classButtonGroupMargin;\n    this.options.classLabel = classLabel;\n    this.options.classLabelSpan = classLabelSpan;\n    this.options.classButton = classButton;\n    this.options.classButtonActive = classButtonActive;\n    this.options.classButtonNotEnabled = classButtonNotEnabled;\n    this.options.classButtonEnabled = classButtonEnabled;\n    this.options.classButtonAllEnabled = classButtonAllEnabled;\n    \n    /**\n     * @member {external:jQuery|undefined}\n     * @private\n     */\n    this.toolbarNode = undefined;\n    \n    this.setNode(this.options.node);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTime() {\n    if (this.toolbarNode === undefined)\n      return;\n    \n    var time = this.options.timeline.getSelectedTime();\n    var that = this;\n    this.toolbarNode.find('button').each(function () {\n      var t = new Date(+$(this).data('time'));\n      $(this)\n        .removeClass(that.options.classButtonActive);\n      /*.removeClass(that.options.classButtonAllEnabled)\n        .removeClass(that.options.classButtonEnabled)\n        .removeClass(that.options.classButtonNotEnabled);*/\n      if (time.valueOf() == t.valueOf())\n        $(this).addClass(that.options.classButtonActive);\n      /*else if (that.options.timeline.isTimeAllEnabled(t))\n        $(this).addClass(that.options.classButtonAllEnabled);\n      else if (that.options.timeline.isTimeEnabled(t))\n        $(this).addClass(that.options.classButtonEnabled);\n      else\n        $(this).addClass(that.options.classButtonNotEnabled);*/\n    });\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTimes() {\n    if (this.toolbarNode === undefined)\n      this.toolbarNode = $('<div>');\n    this.toolbarNode.empty();\n    \n    var groupingFormat =\n      (this.options.grouping == 'daily') ? 'YYYY-MM-DD' :\n        (this.options.grouping == 'hourly') ? 'YYYY-MM-DD HH' :\n          this.options.grouping;\n    var lastNode = undefined;\n    this.getTimelineTimes().forEach(function (time) {\n      if (lastNode === undefined ||\n          lastNode.data('date') != this.timeToText(time, groupingFormat)) {\n        var btnGroup = $('<div>')\n          .addClass(this.options.classButtonGroup)\n          .addClass(this.options.classButtonGroupMargin)\n          .attr('role', 'group')\n          .attr('aria-label', this.timeToText(time, groupingFormat));\n        if (this.options.groupingFormat === undefined) {\n          lastNode = btnGroup;\n        }\n        else {\n          var span = $('<span>')\n            .addClass(this.options.classLabelSpan)\n            .text(this.timeToText(time, this.options.groupingFormat));\n          lastNode = $('<label>')\n            .addClass(this.options.classLabel)\n            .append(span);\n          btnGroup.attr('aria-label', span.text());\n          lastNode.append(btnGroup);\n        }\n        lastNode.data('date', this.timeToText(time, groupingFormat));\n        this.toolbarNode.append(lastNode);\n      }\n      \n      var btn = $('<button>')\n        .addClass(this.options.classButton)\n        .attr('type', 'button')\n        .text(this.timeToText(time, this.options.format))\n        .data('time', time.valueOf());\n      if (this.options.timeline.isTimeAllEnabled(time))\n        btn.addClass(this.options.classButtonAllEnabled);\n      else if (this.options.timeline.isTimeEnabled(time))\n        btn.addClass(this.options.classButtonEnabled);\n      else\n        btn.addClass(this.options.classButtonNotEnabled);\n      var that = this;\n      btn.click(function () {\n        that.options.timeline.setSelectedTime(new Date(+$(this).data('time')));\n        that.trigger('input');\n      });\n      if (lastNode.hasClass(this.options.classButtonGroup))\n        lastNode.append(btn);\n      else\n        lastNode.children('div').append(btn);\n    }, this);\n    this.toolbarNode.find('div.'+this.options.classButtonGroup).last().removeClass(this.options.classButtonGroupMargin);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  emptyNode() {\n    this.toolbarNode = undefined;\n    this.options.node.empty();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onInitNode() {\n    this.toolbarNode = $('<div>')\n      .addClass(this.options.classMain)\n      .attr('role', 'toolbar')\n      .attr('aria-label', 'Timeline toolbar');\n    this.options.node.append(this.toolbarNode);\n  }\n  \n}\nexport default bsButtons;","/**\n * @module meteoJS/timeline/visualisation/bsDropdown\n */\nimport $ from 'jquery';\nimport Visualisation from '../Visualisation.js';\nimport Text from './Text.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/timeline/visualisation~options}\n *   module:meteoJS/timeline/visualisation/bsDropdown~options\n * @param {string|undefined} format\n *   Format string for dropdown items, used for 'getTimeText'.\n * @param {string|undefined} buttonFormat\n *   Format string for dropdown button, used for 'getTimeText'.\n * @param {string} grouping\n *   'daily', 'hourly' or a format string. Defines if items will be grouped and\n *   be title depending on groupingDivider and groupingFormat.\n * @param {boolean} groupingDivider Show dropdown divider above an item group.\n * @param {undefined|string} groupingFormat\n *   Format string for a dropdown header above an item group.\n * @param {undefined|string} classMain Class for the main node.\n * @param {undefined|string} classDropdownMenu Class for the dropdown node.\n * @param {undefined|string} classDropdownItem Class for a dropdown item.\n * @param {undefined|string} classItemActive Class for an active item.\n * @param {undefined|string} classItemNotEnabled Class for a not enabled item.\n * @param {undefined|string} classItemEnabled Class for an enabled item.\n * @param {undefined|string} classItemAllEnabled Class for an all enabled item.\n * @param {undefined|string} classDropdownHeader Class for dropdown header.\n * @param {undefined|string} classDropdownDivider Class for dropdown divider.\n * @param {undefined|string} classDropdownButton Class for the dropdown button.\n * @param {undefined|string} classButtonNotEnabled\n *   Class for the dropdown button if the selected time is not enabled.\n * @param {undefined|string} classButtonEnabled\n *   Class for the dropdown button if the selected time is enabled.\n * @param {undefined|string} classButtonAllEnabled\n *   Class for the dropdown button if the selected time is all enabled.\n */\n\n/**\n * Show timeline in a dropdown menu. The menu will be build according to\n * bootstrap.\n * \n * @extends module:meteoJS/timeline/visualisation.Visualisation\n */\nexport class bsDropdown extends Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation/bsDropdown~options} options - Options.\n   */\n  constructor({\n    format = 'HH:mm',\n    buttonFormat = 'DD. MMMM YYYY HH:mm',\n    grouping = 'daily',\n    groupingDivider = true,\n    groupingFormat = 'ddd, DD. MMMM YYYY',\n    classMain = 'dropdown',\n    classDropdownMenu = 'dropdown-menu',\n    classDropdownItem = 'dropdown-item',\n    classItemActive = 'active',\n    classItemNotEnabled = 'disabled',\n    classItemEnabled = undefined,\n    classItemAllEnabled = undefined,\n    classDropdownHeader = 'dropdown-header',\n    classDropdownDivider = 'dropdown-divider',\n    classDropdownButton = 'btn dropdown-toggle',\n    classButtonNotEnabled = undefined,\n    classButtonEnabled = undefined,\n    classButtonAllEnabled = undefined,\n    ...rest\n  } = {}) {\n    super(rest);\n    \n    this.options.format = format;\n    this.options.buttonFormat = buttonFormat;\n    this.options.grouping = grouping;\n    this.options.groupingDivider = groupingDivider;\n    this.options.groupingFormat = groupingFormat;\n    this.options.classMain = classMain;\n    this.options.classDropdownMenu = classDropdownMenu;\n    this.options.classDropdownItem = classDropdownItem;\n    this.options.classItemActive = classItemActive;\n    this.options.classItemNotEnabled = classItemNotEnabled;\n    this.options.classItemEnabled = classItemEnabled;\n    this.options.classItemAllEnabled = classItemAllEnabled;\n    this.options.classDropdownHeader = classDropdownHeader;\n    this.options.classDropdownDivider = classDropdownDivider;\n    this.options.classDropdownButton = classDropdownButton;\n    this.options.classButtonNotEnabled = classButtonNotEnabled;\n    this.options.classButtonEnabled = classButtonEnabled;\n    this.options.classButtonAllEnabled = classButtonAllEnabled;\n    \n    /**\n     * @member {module:meteoJS/timeline/visualisation/text.Text}\n     * @private\n     */\n    this.visualisationButtonText = new Text({\n      timeline: this.options.timeline,\n      format: this.options.buttonFormat,\n      textInvalid: this.options.textInvalid,\n      outputTimezone: this.options.outputTimezone,\n      getTimeText: this.options.getTimeText\n    });\n    /**\n     * @member {external:jQuery|undefined}\n     * @private\n     */\n    this.dropdownNode = undefined;\n    \n    this.setNode(this.options.node);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  setOutputTimezone(outputTimezone) {\n    super.setOutputTimezone(outputTimezone);\n    this.visualisationButtonText.setOutputTimezone(outputTimezone);\n    return this;\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTime() {\n    if (this.dropdownNode === undefined)\n      return;\n    \n    var time = this.options.timeline.getSelectedTime();\n    this.options.node.children('button')\n      .removeClass(this.options.classButtonActive)\n      .removeClass(this.options.classButtonNotEnabled)\n      .removeClass(this.options.classButtonEnabled)\n      .removeClass(this.options.classButtonAllEnabled);\n    if (this.options.timeline.isTimeAllEnabled(time))\n      this.options.node.children('button')\n        .addClass(this.options.classButtonAllEnabled);\n    else if (this.options.timeline.isTimeEnabled(time))\n      this.options.node.children('button')\n        .addClass(this.options.classButtonEnabled);\n    else\n      this.options.node.children('button')\n        .addClass(this.options.classButtonNotEnabled);\n    var that = this;\n    this.dropdownNode\n      .children('button.'+this.options.classDropdownItem)\n      .each(function () {\n        var t = new Date(+$(this).data('time'));\n        $(this)\n          .removeClass(that.options.classItemActive)\n          .removeClass(that.options.classItemNotEnabled)\n          .removeClass(that.options.classItemEnabled)\n          .removeClass(that.options.classItemAllEnabled);\n        if (time.valueOf() == t.valueOf())\n          $(this).addClass(that.options.classItemActive);\n        else if (that.options.timeline.isTimeAllEnabled(t))\n          $(this).addClass(that.options.classItemAllEnabled);\n        else if (that.options.timeline.isTimeEnabled(t))\n          $(this).addClass(that.options.classItemEnabled);\n        else\n          $(this).addClass(that.options.classItemNotEnabled);\n      });\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTimes() {\n    if (this.dropdownNode === undefined)\n      this.dropdownNode = $('<div>');\n    this.dropdownNode.empty();\n    \n    var groupingFormat =\n            (this.options.grouping == 'daily') ? 'YYYY-MM-DD' :\n              (this.options.grouping == 'hourly') ? 'YYYY-MM-DD HH' :\n                this.options.grouping;\n    var lastGroupTimeStr = undefined;\n    this.getTimelineTimes().forEach(function (time) {\n      if (lastGroupTimeStr === undefined ||\n                    lastGroupTimeStr != this.timeToText(time, groupingFormat)) {\n        if (lastGroupTimeStr !== undefined && // No divider at the beginning\n                        this.options.groupingDivider)\n          this.dropdownNode\n            .append($('<div>')\n              .addClass(this.options.classDropdownDivider));\n        if (this.options.groupingFormat !== undefined)\n          this.dropdownNode\n            .append($('<h6>')\n              .addClass(this.options.classDropdownHeader)\n              .text(this.timeToText(time, this.options.groupingFormat)));\n        lastGroupTimeStr = this.timeToText(time, groupingFormat);\n      }\n      var btn = $('<button>')\n        .addClass(this.options.classDropdownItem)\n        .attr('type', 'button')\n        .text(this.timeToText(time, this.options.format))\n        .data('time', time.valueOf());\n      var that = this;\n      btn.click(function () {\n        that.options.timeline.setSelectedTime(new Date(+$(this).data('time')));\n        that.trigger('input');\n      });\n      this.dropdownNode.append(btn);\n    }, this);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  emptyNode() {\n    if (this.visualisationButtonText !== undefined)\n      this.visualisationButtonText.setNode(undefined);\n    this.dropdownNode = undefined;\n    this.options.node.empty();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onInitNode() {\n    var id = 'dropdownMenuButton';\n    var i=0;\n    while (document.getElementById(id) != null) {\n      id = 'dropdownMenuButton'+(++i);\n    }\n    \n    var button = $('<button>')\n      .addClass(this.options.classDropdownButton)\n      .attr('type', 'button')\n      .attr('id', id)\n      .attr('data-toggle', 'dropdown')\n      .attr('aria-haspopup', true)\n      .attr('aria-expanded', false);\n    this.visualisationButtonText.setNode(button);\n    this.dropdownNode = $('<div>')\n      .addClass(this.options.classDropdownMenu)\n      .attr('aria-labelledby', id);\n    this.options.node\n      .addClass(this.options.classMain)\n      .append(button)\n      .append(this.dropdownNode);\n  }\n  \n}\nexport default bsDropdown;","/**\n * @module meteoJS/synview/map\n */\nimport $ from 'jquery';\nimport addEventFunctions from '../Events.js';\n\n/** \n * Event object.\n * \n * @typedef {Object} module:meteoJS/synview/map~extendedEvent\n * @param {module:meteoJS/synview/type.Type} type Type belonging to the event.\n * @param {Object} layer Layer belonging to the event.\n * @param {Object} feature Vector feature, if present.\n * @param {Mixed[]} color Color of pixel (rgba), if present.\n */\n\n/**\n * Options for meteoJS/synview/map.\n * \n * @typedef {Object} module:meteoJS/synview/map~options\n * @param {mixed} map Map object.\n * @param {mixed} layerGroup Layer group within synview will operate.\n */\n\n/**\n * Triggered on view changes.\n * \n * @event module:meteoJS/synview/map#change:view\n */\n\n/**\n * Triggered on pointer moves over map.\n * \n * @event module:meteoJS/synview/map#move:pointer\n */\n\n/**\n * Triggered on pointer clicks into the map, with no dragging. A double click\n * will fire two events.\n * \n * @event module:meteoJS/synview/map#click:pointer\n */\n\n/**\n * Triggered on pointer clicks into the map, with no dragging and no double\n * click.\n * \n * @event module:meteoJS/synview/map#singleclick:pointer\n */\n\n/**\n * Triggered on pointer double clicks into the map, with no dragging.\n * \n * @event module:meteoJS/synview/map#dblclick:pointer\n */\n\n/**\n * Triggered on pointer dragging.\n * \n * @event module:meteoJS/synview/map#drag:pointer\n */\n\n/**\n * Abstract class to defined interface to the mapping library.\n * \n * @abstract\n * @fires module:meteoJS/synview/map#change:view\n */\nexport class SynviewMap {\n  \n  /**\n   * @param {module:meteoJS/synview/map~options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @member {meteoJS/synview/map~options}\n     * @private\n     */\n    this.options = $.extend(true, {\n      map: undefined,\n      layerGroup: undefined\n    }, options);\n  }\n  \n  /**\n   * Returns map object.\n   * \n   * @return {mixed} Map object.\n   */\n  getMap() {\n    return this.options.map;\n  }\n  \n  /**\n   * Helper function. Returns the view center in WGS84 coordinates, lat/lon.\n   * \n   * @abstract\n   * @return {number[]|undefined} Center.\n   */\n  getViewCenter() {}\n  \n  /**\n   * Helper function. Sets the view center in WGS84 coordinates, lat/lon.\n   * \n   * @abstract\n   * @param {number[]|undefined} center Center.\n   * @return {module:meteoJS/synview/map.SynviewMap} This.\n   */\n  setViewCenter() {\n    return this;\n  }\n  \n  /**\n   * Helper function. Returns the view zoom level.\n   * \n   * @abstract\n   * @return {number|undefined} Zoom level.\n   */\n  getViewZoom() {}\n  \n  /**\n   * Helper function. Sets the view zoom level.\n   * \n   * @abstract\n   * @param {number|undefined} zoom Zoom level.\n   * @return {module:meteoJS/synview/map.SynviewMap} This.\n   */\n  setViewZoom() {\n    return this;\n  }\n  \n  /**\n   * Returns a new layer group, already added to the map.\n   * \n   * @abstract\n   * @return {mixed} New layer group.\n   */\n  makeLayerGroup() {}\n  \n  /**\n   * Returns an event object, that is extended by several keys.\n   * Synview internal method.\n   * \n   * @abstract\n   * @param {object} event Map event object.\n   * @param {module:meteoJS/synview/typeCollection.TypeCollection} collection Type collection.\n   * @return {module:meteoJS/synview/map~extendedEvent} Event object.\n   */\n  getExtendedEventByTypeCollection(event) {\n    event.synviewType = undefined;\n    event.layer = undefined;\n    event.feature = undefined;\n    event.color = undefined;\n    return event;\n  }\n  \n  /**\n   * Returns index of the passed layer inside the layer group of the passed type.\n   * Synview internal method.\n   * \n   * @abstract\n   * @param {object} layer Layer object.\n   * @param {module:meteoJS/synview/type.Type} type Type.\n   * @return {integer} Index.\n   */\n  findLayerInType() {\n    return -1;\n  }\n  \n}\naddEventFunctions(SynviewMap.prototype);\nexport default SynviewMap;","/**\n * @module meteoJS/synview/collection\n */\nimport addEventFunctions from '../Events.js';\n\n/**\n * Triggered on adding item to collection.\n * \n * @event module:meteoJS/synview/collection#add:item\n * @param {object} Added item.\n */\n\n/**\n * Triggered on replacing item with already existing ID.\n * \n * @event module:meteoJS/synview/collection#replace:item\n * @param {object} Added item.\n * @param {object} Replaced and removed item.\n */\n\n/**\n * Triggered on removing item from collection.\n * \n * @event module:meteoJS/synview/collection#remove:item\n * @param {object} Removed item.\n */\n\n/**\n * Collection of items.\n * Items have at least a getId() method, which returns a unique ID.\n */\nexport class Collection {\n  \n  constructor() {\n    /**\n     * List of IDs of the items.\n     * @member {mixed}\n     * @private\n     */\n    this.itemIds = [];\n    \n    /**\n     * List of items, ID as key of the object.\n     * @member {Object}\n     * @private\n     */\n    this.items = {};\n  }\n  \n  /**\n   * Returns count of items in this collection.\n   * \n   * @return {integer} Count.\n   */\n  getCount() {\n    return this.itemIds.length;\n  }\n  \n  /**\n   * Returns items (in order as appended).\n   * \n   * @return {Object[]} Items.\n   */\n  getItems() {\n    return this.itemIds.map(function (id) { return this.items[id]; }, this);\n  }\n  \n  /**\n   * Returns a list of IDs (in order as appended).\n   * \n   * @return {mixed[]} List of IDs.\n   */\n  getItemIds() {\n    return this.itemIds;\n  }\n  \n  /**\n   * Returns item by ID, undefined if ID doesn't exist.\n   * \n   * @param {mixed} id ID.\n   * @return {Object|undefined} Item.\n   */\n  getItemById(id) {\n    return (id in this.items) ? this.items[id] : undefined;\n  }\n  \n  /**\n   * Returns if an ID exists in this collection.\n   * \n   * @param {mixed} id ID.\n   * @return {boolean} If exists.\n   */\n  containsId(id) {\n    return this.getIndexById(id) !== -1;\n  }\n  \n  /**\n   * Returns index of the item in this collecition, -1 if not existant.\n   * \n   * @param {mixed} id ID.\n   * @return {integer} Index.\n   */\n  getIndexById(id) {\n    var result = -1;\n    this.itemIds.forEach(function (itemId, i) {\n      if (itemId == id)\n        result = i;\n    });\n    return result;\n  }\n  \n  /**\n   * Append an item to the collection.\n   * \n   * @param {object} item New item.\n   * @return {module:meteoJS/synview/collection.Collection} This.\n   * @fires module:meteoJS/synview/collection#add:item\n   * @fires module:meteoJS/synview/collection#replace:item\n   */\n  append(item) {\n    var id = item.getId();\n    if (this.containsId(id)) {\n      this.trigger('replace:item', item, this.getItemById(id));\n      this.items[id] = item;\n    }\n    else {\n      this.itemIds.push(id);\n      this.items[id] = item;\n      this.trigger('add:item', item);\n    }\n    return this;\n  }\n  \n  /**\n   * Removes an item from the collection.\n   * \n   * @param {mixed} id ID of the item to delete.\n   * @return {module:meteoJS/synview/collection.Collection} This.\n   * @fires module:meteoJS/synview/collection#remove:item\n   */\n  remove(id) {\n    var item = this.getItemById(id);\n    if (item !== undefined) {\n      var index = this.getIndexById(id);\n      delete this.items[id];\n      this.itemIds.splice(index, 1);\n      this.trigger('remove:item', item);\n    }\n    return this;\n  }\n  \n}\naddEventFunctions(Collection.prototype);\nexport default Collection;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.Group;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.Vector;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.Observable;","/**\n * @module meteoJS/synview/resource\n */\nimport VectorLayer from 'ol/layer/Vector';\nimport { unByKey } from 'ol/Observable';\nimport addEventFunctions from '../Events.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/synview/resource~options\n * @param {undefined|String} url - URL to resource.\n * @param {undefined|Date} datetime\n *   Datetime for this resource, undefined if resource have no datetime.\n * @param {undefined|String} mimetype - MIME-Type of the resource.\n * @param {undefined|Integer} reloadTime\n *   After this time period the resource will be reloaded. Undefined for no\n *   reload. (in seconds)\n * @param {undefined|String} className - Type's classname.\n * @param {undefined|boolean} [imageSmoothingEnabled=undefined]\n *   Disable image smoothing to draw sharp edges in image layers.\n *   Undefined uses the default (true).\n * @param {Object} ol - Options for openlayers.\n * @param {Object|external:ol/source/Source~Source|undefined} ol.source\n *   Options for openlayers source object or OL source object already.\n * @param {Object.<string,Function>|undefined} ol.events \n *   Function to listen to module:ol/render/Event~RenderEvent.\n * @param {undefined|external:ol/style/Style~Style|external:ol/style/Style~Style|external:ol/style/Style~StyleFunction} [ol.style]\n *   Style for features. If this is a module:ol/style/Style~StyleFunction,\n *   then \"this\" will be bound to this module:meteoJS/synview/resource~Resource.\n */\n\n/**\n * Object representing a resource.\n */\nexport class Resource {\n  \n  /**\n   * @param {module:meteoJS/synview/resource~options} options - Options.\n   */\n  constructor({\n    url = undefined,\n    datetime = undefined,\n    mimetype = undefined,\n    reloadTime = undefined,\n    className = undefined,\n    imageSmoothingEnabled = undefined,\n    ol = {}\n  } = {}) {\n    /**\n     * @type {Object}\n     * @private\n     */\n    this.options = {\n      url,\n      datetime,\n      mimetype,\n      reloadTime,\n      className,\n      ol\n    };\n    this._normalizeOLOptions(this.options.ol);\n    \n    /**\n     * @type {external:ol.layer.Layer|undefined}\n     * @private\n     */\n    this.layer = undefined;\n    \n    /**\n     * @type {ol.layer.Group|L.layerGroup|undefined}\n     * @private\n     */\n    this.layerGroup = undefined;\n    \n    /**\n     * @type {number|undefined}\n     * @private\n     */\n    this.reloadTimerId = undefined;\n    \n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.visible = false;\n    \n    /**\n     * @type {number|undefined}\n     * @private\n     */\n    this.zIndex = undefined;\n    \n    /**\n     * @type {number}\n     * @private\n     */\n    this.opacity = 1.0;\n    \n    /**\n     * @type {boolean}\n     * @private\n     */\n    this._imageSmoothing = imageSmoothingEnabled;\n  }\n  \n  /**\n   * Returns an ID for this resource. Should change, if content of resource\n   * changes.\n   * \n   * @return {mixed} Id.\n   */\n  getId() {\n    return this.getUrl();\n  }\n  \n  /**\n   * Returns URL to the resource. Undefined if unknown.\n   * \n   * @return {string|undefined} URL.\n   */\n  getUrl() {\n    return this.options.url;\n  }\n  \n  /**\n   * Returns the datetime of the resource.\n   * \n   * @return {Date|undefined} Date.\n   */\n  getDatetime() {\n    return this.options.datetime;\n  }\n  \n  /**\n   * Returns MIME-Type of the resource.\n   * \n   * @return {string} MIME-Type.\n   */\n  getMIMEType() {\n    return (this.options.mimetype === undefined) ?\n      'application/octet-stream' : this.options.mimetype;\n  }\n  \n  /**\n   * Returns the current reload time.\n   * \n   * @return {undefined|integer} Reload time period.\n   */\n  getReloadTime() {\n    return this.options.reloadTime;\n  }\n  \n  /**\n   * Sets the reload time.\n   * \n   * @param {undefined|integer} reloadTime Reload time period.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setReloadTime(reloadTime) {\n    this.options.reloadTime = reloadTime;\n    this._reload(); // starts or stops frequent reload\n    return this;\n  }\n  \n  /**\n   * Returns the visibility of the resource layer.\n   * \n   * @return {boolean} Visible.\n   */\n  getVisible() {\n    return this.visible;\n  }\n  \n  /**\n   * Sets the visibility of the resource layer.\n   * \n   * @param {boolean} visible Visible.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setVisible(visible) {\n    this.visible = visible;\n    if (this.layer !== undefined) {\n      // OpenLayers\n      if ('setVisible' in this.layer)\n        this.layer.setVisible(visible);\n      // Leaflet\n      else {\n        if (this.visible)\n          this.layer.addTo(this.layerGroup);\n        else\n          this.layerGroup.removeLayer(this.layer);\n      }\n    }\n    return this;\n  }\n  \n  /**\n   * Returns the z-Index of the resource layer.\n   * \n   * @return {number|undefined} z-Index.\n   */\n  getZIndex() {\n    return this.zIndex;\n  }\n  \n  /**\n   * Sets the z-Index of the resource layer.\n   * \n   * @param {number|undefined} zIndex z-Index.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setZIndex(zIndex) {\n    this.zIndex = zIndex;\n    if (this.layer !== undefined)\n      this.layer.setZIndex(zIndex);\n    return this;\n  }\n  \n  /**\n   * Returns opacity of the resource layer.\n   * \n   * @return {number} Opacity.\n   */\n  getOpacity() {\n    return this.opacity;\n  }\n  \n  /**\n   * Sets opacity of the resource layer.\n   * \n   * @param {number} opacity Opacity.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setOpacity(opacity) {\n    this.opacity = opacity;\n    if (this.layer !== undefined)\n      this.layer.setOpacity(opacity);\n    return this;\n  }\n  \n  /**\n   * Classname.\n   * \n   * @type undefined|String\n   */\n  get className() {\n    return this.options.className;\n  }\n  set className(className) {\n    this.options.className = className;\n  }\n  \n  /**\n   * imageSmoothingEnabled.\n   * \n   * @type undefined|boolean\n   */\n  get imageSmoothingEnabled() {\n    return this._imageSmoothing;\n  }\n  set imageSmoothingEnabled(imageSmoothing) {\n    this._imageSmoothing = imageSmoothing;\n  }\n  \n  /**\n   * Returns the layer group of the resource layer.\n   * \n   * @return {external:ol.layer.group|external:L.layerGroup|undefined} Layer group.\n   */\n  getLayerGroup() {\n    return this.layerGroup;\n  }\n  \n  /**\n   * Sets the layer group and adds the resource layer to this group.\n   * If undefined is passed, the resource layer will be deleted and removed for\n   * any layer group.\n   * \n   * @param {external:ol.layer.group|external:L.layerGroup|undefined} layerGroup Layer group.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setLayerGroup(layerGroup) {\n    if (this.layerGroup !== undefined &&\n        this.layer !== undefined) {\n      // OpenLayers\n      if ('remove' in this.layerGroup.getLayers())\n        this.layerGroup.getLayers().remove(this.layer);\n      // Leaflet\n      else\n        this.layerGroup.removeLayer(this.layer);\n    }\n    if (layerGroup === undefined)\n      this.layer = undefined;\n    this.layerGroup = layerGroup;\n    if (this.layerGroup !== undefined) {\n      // Leaflet\n      if ('addLayer' in this.layerGroup) {\n        var layer = this.getLLLayer();\n        if (this.getVisible())\n          this.layerGroup.addLayer(layer);\n      }\n      // OpenLayers\n      else\n        this.layerGroup.getLayers().push(this.getOLLayer());\n    }\n    this.setReloadTime(this.getReloadTime()); // Trigger reload interval\n    return this;\n  }\n  \n  /**\n   * Returns layer for openlayers of this resource.\n   * \n   * @return {external:ol.layer.Layer} openlayers layer.\n   */\n  getOLLayer() {\n    if (this.layer !== undefined)\n      return this.layer;\n    this.layer = this._makeOLLayer();\n    return this.layer;\n  }\n  \n  /**\n   * Returns openlayers layer of this resource. Must be overwritten by child\n   * classes.\n   * \n   * @protected\n   * @return {external:ol.layer.Layer} openlayers layer.\n   */\n  makeOLLayer() {\n    // Dies on instantiation of ol.layer.Layer, so use ol.layer.Vector\n    return new VectorLayer({\n      className: this.className\n    });\n  }\n  \n  /**\n   * Returns a ready to use OpenLayers layer.\n   * \n   * @private\n   * @return {external:ol.layer.Layer} openlayers layer.\n   */\n  _makeOLLayer() {\n    let layer = this.makeOLLayer();\n    layer.setVisible(this.visible);\n    layer.setZIndex(this.zIndex);\n    layer.setOpacity(this.opacity);\n    if ('events' in this.options.ol &&\n        this.options.ol.events !== undefined)\n      ['prerender', 'postrender'].forEach(eventName => {\n        if (eventName in this.options.ol.events &&\n            this.options.ol.events[eventName] !== undefined)\n          layer.on(eventName, event => {\n            this.options.ol.events[eventName].call(this, event, layer);\n          });\n      });\n    \n    if (!this._imageSmoothing) {\n      const source = layer.getSource();\n      if (source !== null &&\n          'contextOptions_' in source)\n        source.contextOptions_ = {\n          imageSmoothingEnabled: false,\n          msImageSmoothingEnabled: false\n        };\n    }\n    \n    return layer;\n  }\n  \n  /**\n   * Returns layer for Leaflet of this resource.\n   * \n   * @return {external:L.layer} Leaflet layer.\n   */\n  getLLLayer() {\n    if (this.layer !== undefined)\n      return this.layer;\n    this.layer = this._makeLLLayer();\n    return this.layer;\n  }\n  \n  /**\n   * Returns Leaflet layer of this resource. Must be overwritten by child\n   * classes.\n   * \n   * @protected\n   * @return {external:L.Layer} Leaflet layer.\n   */\n  makeLLLayer() {\n    // Dies on instantiation of ol.layer.Layer, so use ol.layer.Vector\n    return L.Layer();\n  }\n  \n  /**\n   * Preload resource. By default, openlayers loads the resource as soon as\n   * the resource gets visible.\n   */\n  preload() {}\n  \n  /**\n   * Returns a ready to use Leaflet layer.\n   * \n   * @private\n   * @return {external:L.Layer} Leaflet layer.\n   */\n  _makeLLLayer() {\n    return this.makeLLLayer();\n  }\n  \n  /**\n   * Reload source.\n   * \n   * @private\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  _reload() {\n    // Stop possible earlier reload\n    if (this.reloadTimerId !== undefined) {\n      clearTimeout(this.reloadTimerId);\n      this.reloadTimerId = undefined;\n    }\n    // No frequent reload\n    if (this.options.reloadTime === undefined)\n      return;\n    // Reload could only be handled, if layerGroup is defined\n    if (this.layerGroup === undefined)\n      return;\n    var reloadFunction = (function () {\n      this.reloadTimerId = undefined;\n      if (this.layerGroup === undefined)\n        return;\n      var layer = this._makeOLLayer();\n      // Hackish reload of sources, it is not handled properly by OpenLayers.\n      // 1. Non-tile sources, they have a 'getUrl' method.\n      if ('getUrl' in layer.getSource()) {\n        var layerGroup = this.layerGroup;\n        // event triggered, even if source is cached.\n        var key = layer.getSource().on('change', (function () {\n          if (layer.getSource().getState() == 'ready' ||\n              layer.getSource().getState() == 'error') {\n            // Execute code once, once the data is loaded.\n            unByKey(key);\n            if (layer.getSource().getState() == 'ready' &&\n                this.layerGroup !== undefined) {\n              layer.setVisible(this.layer.getVisible());\n              layer.setOpacity(this.layer.getOpacity());\n              layer.setZIndex(this.layer.getZIndex());\n              this.layerGroup.getLayers().remove(this.layer);\n              this.layer = layer;\n            }\n            else if (this.layerGroup !== undefined)\n              this.layerGroup.getLayers().remove(layer);\n            else\n              layerGroup.getLayers().remove(layer);\n            if (this.reloadTimerId === undefined &&\n                this.options.reloadTime !== undefined &&\n                this.layerGroup !== undefined)\n              this.reloadTimerId =\n                setTimeout(reloadFunction, this.options.reloadTime * 1000);\n          }\n        }).bind(this));\n        this.layerGroup.getLayers().push(layer);\n        layer.setVisible(true); // Force load of data by make the layer visible.\n      }\n      else {\n        /* Tile sources in OpenLayers doesn't support a request to check, if all\n         * tiles are loaded, because cached tiles doesn't generate any event.\n         * Uncached tiles fire tileloadstart/end/error events.\n         * So we wait a second and exchange then the old with the new layer. If\n         * the reload of the data is smaller of one second, this suppresses that\n         * neither the old layer nor the new data is visible. */\n        this.layerGroup.getLayers().push(layer);\n        layer.setVisible(true);\n        setTimeout((function () {\n          this.layer = layer;\n          if (this.reloadTimerId === undefined &&\n              this.options.reloadTime !== undefined)\n            this.reloadTimerId =\n              setTimeout(reloadFunction, this.options.reloadTime * 1000);\n        }).bind(this), 1000);\n      }\n    }).bind(this);\n    this.reloadTimerId =\n      setTimeout(reloadFunction, this.options.reloadTime * 1000);\n    return this;\n  }\n  \n  /**\n   * Normalizes this.options.ol.\n   * \n   * @private\n   * @param {Object|external:ol/source/Source~Source|undefined} source\n   * @param {Object.<string,Function>|undefined} events\n   * @param {external:ol/style/Style~Style|external:ol/style/Style~StyleLike|external:ol/style/Style~StyleFunction|undefined} [style]\n   */\n  _normalizeOLOptions({\n    source = {},\n    events = undefined,\n    style = undefined\n  }) {\n    this.options.ol = {\n      source,\n      events,\n      style\n    };\n  }\n  \n}\naddEventFunctions(Resource.prototype);\nexport default Resource;","/**\n * @module meteoJS/synview/resourceCollection\n */\nimport Collection from './Collection.js';\nimport Resource from './Resource.js';\n\n/**\n * Collection of resource objects.\n * Extends meteoJS.synview.collection with storage of time objects.\n * This collection contains either a list of resources assigned with time or\n * one resource with no time (or both). With the methods from\n * meteoJS.synview.collection all resources (with or without time) will be\n * retrieved. Id of the resource without time is '' (empty string).\n * \n * @extends module:meteoJS/synview/collection.Collection\n */\nexport class ResourceCollection extends Collection {\n  \n  constructor() {\n    super();\n    \n    /**\n     * List of the datetime objects of the resources (sorted upwardly).\n     * @member {Date[]}\n     * @private\n     */\n    this.times = [];\n  }\n  \n  /**\n   * Returns all resources assigned with time (ordered temporal upwardly).\n   * \n   * @return {module:meteoJS/synview/resource.Resource[]} Resources.\n   */\n  getResources() {\n    return this.times.map(function (time) {\n      return this.items[time.valueOf()];\n    }, this);\n  }\n  \n  /**\n   * Returns times (ordered temporal upwardly).\n   * \n   * @return {Date[]} Times (no invalid times).\n   */\n  getTimes() {\n    return this.times;\n  }\n  \n  /**\n   * @override\n   * @param {mixed} id ID.\n   * @return {module:meteoJS/synview/resource.Resource} Resource.\n   */\n  getItemById(id) {\n    var res = super.getItemById(id);\n    return (res === undefined) ? new Resource() : res;\n  }\n  \n  /**\n   * Returns resource valid at passed datetime (could be an invalid datetime).\n   * If resource doesn't exist, an empty object is returned.\n   * \n   * @param {Date} time Datetime.\n   * @return {module:meteoJS/synview/resource.Resource} Resource.\n   */\n  getResourceByTime(time) {\n    return this.getItemById(isNaN(time) ? '' : time.valueOf());\n  }\n  \n  /**\n   * Returns if a resource with passed time exists. Time could be invalid.\n   * \n   * @param {Date} Time.\n   * @return {boolean} If exists.\n   */\n  containsTime(time) {\n    return this.getIndexById(isNaN(time) ? '' : time.valueOf()) > -1;\n  }\n  \n  /**\n   * Returns index of the time inside the times array. Time could be invalid.\n   * -1 if not existant.\n   * \n   * @param {Date} time Time.\n   * @return {integer} Index.\n   */\n  getIndexByTime(time) {\n    var result = -1;\n    if (!isNaN(time))\n      this.times.forEach(function (t, i) {\n        if (t.valueOf() == time.valueOf())\n          result = i;\n      });\n    return result;\n  }\n  \n  /**\n   * Returns if a resource with ID exists in this collection.\n   * \n   * @return {module:meteoJS/synview/resource.Resource}\n   */\n  getNewestResource() {\n    if (this.times.length < 1)\n      return new Resource();\n    return this.getResourceByTime(this.times[this.times.length-1]);\n  }\n  \n  /**\n   * Append a resource to the collection.\n   * \n   * @override\n   * @param {module:meteoJS/synview/resource.Resource} resource Resource.\n   * @return {module:meteoJS/synview/resourceCollection.ResourceCollection} This.\n   */\n  append(resource) {\n    this._append(resource);\n    this._sortTimes();\n    return this;\n  }\n  \n  /**\n   * Removes a resource from the collection.\n   * \n   * @override\n   * @param {Date} time Resource's time.\n   * @return {module:meteoJS/synview/resourceCollection.ResourceCollection} This.\n   */\n  remove(time) {\n    this._remove(isNaN(time) ? '' : time.valueOf());\n    this._sortTimes();\n    return this;\n  }\n  \n  /**\n   * Exchanges the collection content with a list of resource.\n   * \n   * @param {module:meteoJS/synview/resource.Resource[]} resources Resources.\n   * @fires module:meteoJS/synview/collection#add:item\n   * @fires module:meteoJS/synview/collection#replace:item\n   * @fires module:meteoJS/synview/collection#remove:item\n   * @return {module:meteoJS/synview/resourceCollection.ResourceCollection} This.\n   */\n  setResources(resources) {\n    resources.forEach(function (resource) {\n      this._append(resource);\n    }, this);\n    this._filterTimesByResources(resources);\n    this._sortTimes();\n    return this;\n  }\n  \n  /**\n   * Append a resource to the collection without reordering times-array.\n   * \n   * @private\n   * @param {module:meteoJS/synview/resource.Resource} resource Resource.\n   */\n  _append(resource) {\n    var time = resource.getDatetime();\n    var id = (time === undefined) ? '' : time.valueOf();\n    if (this.containsId(id)) {\n      this.trigger('replace:item', resource, this.getItemById(id));\n      this.items[id] = resource;\n    }\n    else {\n      this.itemIds.push(id);\n      this.items[id] = resource;\n      if (time !== undefined && !isNaN(time))\n        this.times.push(time);\n      this.trigger('add:item', resource);\n    }\n  }\n  \n  /**\n   * Removes a resource fromt the collection without reordering times-array.\n   * \n   * @private\n   * @param {mixed} id Resource ID.\n   */\n  _remove(id) {\n    var index = this.getIndexById(id);\n    if (index > -1) {\n      var resource = this.items[id];\n      delete this.items[id];\n      this.itemIds.splice(index, 1);\n      if (id !== undefined && id !== '' && !isNaN(id)) {\n        var tIndex = this.times.findIndex(function (t) {\n          return t.valueOf() == id;\n        });\n        if (tIndex > -1)\n          this.times.splice(tIndex, 1);\n      }\n      this.trigger('remove:item', resource);\n    }\n  }\n  \n  /**\n   * Removes all resources whose times doesn't exist in the collection.\n   * \n   * @private\n   * @param {module:meteoJS/synview/resource.Resource[]}\n   */\n  _filterTimesByResources(resources) {\n    var containsStaticResource = false;\n    this.times = this.times.filter(function (t) {\n      var filter = false;\n      var i = resources.findIndex(function (resource) {\n        var match = false;\n        var time = resource.getDatetime();\n        if (time !== undefined &&\n            t.valueOf() == time.valueOf()) {\n          match = true;\n        }\n        else if (time === undefined)\n          containsStaticResource = true;\n        return match;\n      }, this);\n      if (i < 0) {\n        this.remove(t.valueOf());\n        filter = true;\n      }\n      return !filter;\n    }, this);\n    if (containsStaticResource)\n      this.remove('');\n  }\n  \n  /**\n   * Sortiert den Zeit-Array this.times der Reihe nach.\n   * @private\n   */\n  _sortTimes() {\n    this.times.sort(function (a, b) {\n      return a.valueOf()-b.valueOf();\n    });\n  }\n  \n}\nexport default ResourceCollection;","/**\n * @module meteoJS/synview/type\n */\nimport LayerGroup from 'ol/layer/Group';\nimport addEventFunctions from '../Events.js';\nimport ResourceCollection from './ResourceCollection.js';\nimport Resource from './Resource.js';\n\n/**\n * Preload options.\n * \n * @typedef {Object} module:meteoJS/synview/type~preloadOptions\n * @property {boolean} [enabled=false] - Enable preload of the resources.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/synview/type~options\n * @param {string|undefined} id ID.\n * @param {boolean} [visible] Visibility.\n * @param {undefined|number} [zIndex] zIndex on map.\n * @param {'nearest'|'floor'} [displayMethod]\n *   Method to determine the displayed resource.\n * @param {number} [displayMaxResourceAge]\n *   Maximum time space between display and resource time (in seconds).\n * @param {number} [displayFadeStart]\n *   Fade resource from this age to the display time (in seconds).\n * @param {number} [displayFadeStartOpacity]\n *   Opacity (between 0 and 1) at displayFadingTime.\n * @param {undefined|String} className - Classname.\n * @param {undefined|boolean} [imageSmoothingEnabled=undefined]\n *   Value of\n *   {@link https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/imageSmoothingEnabled|imageSmoothingEnabled}\n *   when drawing the layers of this type to canvas.\n *   Undefined uses the default (true). When a\n *   {@link module:meteoJS/synview/resource.Resource}\n *   has explicitly set an own value \n *   ({@link module:meteoJS/synview/resource.Resource#imageSmoothingEnabled}),\n *   this will be ignored.\n * @param {module:meteoJS/synview/tooltip~contentFunction|undefined} [tooltip]\n *   Tooltip function. If color detection will be used with this type, you must\n *   set an unique className.\n * @param {module:meteoJS/synview/type~preloadOptions} [preload]\n *   Preload options.\n */\n\n/**\n * Triggered on change of visibilty.\n * \n * @event module:meteoJS/synview/type#change:visible\n */\n\n/**\n * Triggered, if the set of timestamps changes (due to resource changes).\n * \n * @event module:meteoJS/synview/type#change:resources\n */\n\n/**\n * @classdesc Type to display by synview, like a serie of radar images.\n * \n * @fires module:meteoJS/synview/type#change:visible\n */\nexport class Type {\n  \n  /**\n   * @param {module:meteoJS/synview/type~options} options Options.\n   */\n  constructor({\n    id = undefined,\n    visible = true,\n    zIndex = undefined,\n    displayMethod = 'floor',\n    displayMaxResourceAge = 3*3600,\n    displayFadeStart = 15*60,\n    displayFadeStartOpacity = 0.95,\n    resources = undefined,\n    className = undefined,\n    imageSmoothingEnabled = undefined,\n    tooltip = undefined,\n    preload = {}\n  } = {}) {\n    /**\n     * @type Object\n     * @private\n     */\n    this.options = {\n      id,\n      visible,\n      zIndex,\n      displayMethod,\n      displayMaxResourceAge,\n      displayFadeStart,\n      displayFadeStartOpacity,\n      resources,\n      className,\n      imageSmoothingEnabled,\n      tooltip\n    };\n    \n    /**\n     * The mapping group to display all the resources. (openlayers specific)\n     * @member {undefined|external:ol/layer/Group~LayerGroup}\n     * @default\n     * @private\n     */\n    this.layerGroup = undefined;\n    \n    /**\n     * Collection of resources.\n     * @member {module:meteoJS/synview/resourceCollection.ResourceCollection}\n     * @private\n     */\n    this.collection = new ResourceCollection();\n    \n    /**\n     * Time of displayed resource.\n     * @member {Date}\n     * @private\n     */\n    this.displayedResourceTime = new Date('invalid');\n    \n    // Collection initialisieren\n    this.collection.on('add:item', function (resource) {\n      resource.className = this.className;\n      this._addOLLayer(resource);\n      if (this._preload.enabled)\n        resource.preload();\n    }, this);\n    this.collection.on('remove:item', function (resource) {\n      this._removeOLLayer(resource);\n    }, this);\n    this.collection.on('replace:item', function (newResource, oldResource) {\n      if (newResource !== oldResource) {\n        newResource.className = this.className;\n        this._replaceOLLayer(newResource, oldResource);\n        if (this._preload.enabled)\n          newResource.preload();\n      }\n    }, this);\n    \n    /**\n     * Preload options.\n     * @type module:meteoJS/synview/type~preloadOptions\n     * @private\n     */\n    this._preload = preload;\n    \n    if (this.options.resources !== undefined)\n      this.collection.setResources(this.options.resources);\n    delete this.options.resources;\n  }\n  \n  /**\n   * Returns ID of type.\n   * \n   * @return {string|undefined}\n   */\n  getId() {\n    return this.options.id;\n  }\n  \n  /**\n   * Sets ID of type.\n   * \n   * @param {string|undefined} id ID.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setId(id) {\n    this.options.id = id;\n    return this;\n  }\n  \n  /**\n   * Returns visibility.\n   * \n   * @return {boolean} Visibility.\n   */\n  getVisible() {\n    return this.options.visible;\n  }\n  \n  /**\n   * Sets visibility.\n   * \n   * @param {boolean} visible Visibility.\n   * @return {module:meteoJS/synview/type.Type} This.\n   * @fires module:meteoJS/synview/type#change:visible\n   */\n  setVisible(visible) {\n    // Nur etwas unternehmen, falls Visible ändert\n    if (this.options.visible ? !visible : visible) {\n      this.options.visible = visible ? true : false;\n      if (this.layerGroup !== undefined)\n        this.layerGroup.setVisible(this.options.visible);\n      this.getResourceCollection().getItems().forEach(function (resource) {\n        if (isNaN(resource.getDatetime()))\n          resource.setVisible(this.options.visible);\n        resource.setLayerGroup(this.options.visible ? this.layerGroup : undefined);\n      }, this);\n      this.trigger('change:visible');\n    }\n    return this;\n  }\n  \n  /**\n   * Returns the z Index.\n   * \n   * @return {undefined|number}\n   */\n  getZIndex() {\n    return this.options.zIndex;\n  }\n  \n  /**\n   * Sets the z Index.\n   * \n   * @param {undefined|number} zIndex z-Index.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setZIndex(zIndex) {\n    this.options.zIndex = zIndex;\n    if (this.layerGroup !== undefined)\n      this.layerGroup.setZIndex(zIndex);\n    this.getResourceCollection().getItems().forEach(function (resource) {\n      resource.setZIndex(zIndex);\n    });\n    return this;\n  }\n  \n  /**\n   * Classname.\n   * \n   * @type undefined|String\n   */\n  get className() {\n    return this.options.className;\n  }\n  set className(className) {\n    this.options.className = className;\n  }\n  \n  /**\n   * Returns layer-group of this type on the map.\n   * \n   * return {external:ol/layer/Group~LayerGroup} Layer-group.\n   */\n  getLayerGroup() {\n    return (this.layerGroup === undefined) ? new LayerGroup() : this.layerGroup;\n  }\n  \n  /**\n   * Sets map layer-group for this type.\n   * \n   * @param {external:ol/layer/Group~LayerGroup} group layer-group.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setLayerGroup(group) {\n    this.layerGroup = group;\n    if (this.layerGroup !== undefined) {\n      if ('setVisible' in this.layerGroup) // Leaflet doesn't know visibility\n        this.layerGroup.setVisible(this.options.visible);\n      this.layerGroup.setZIndex(this.options.zIndex);\n    }\n    this.getResourceCollection().getItems().forEach(function (resource) {\n      resource.setLayerGroup(this.options.visible ? group : undefined);\n    }, this);\n    return this;\n  }\n  \n  /**\n   * Returns collection of the resources.\n   * Note: If you directly append resources to the collection, no\n   * {@link module:meteoJS/synview/type#change:resources} event will be fired.\n   * \n   * @return {module:meteoJS/synview/resourceCollection.ResourceCollection} resourceCollection.\n   */\n  getResourceCollection() {\n    return this.collection;\n  }\n  \n  /**\n   * Append a resource to the collection.\n   * If type is visible, this might also change the resources on the map.\n   * \n   * @param {module:meteoJS/synview/resource.Resource} resource Resource object.\n   * @return {module:meteoJS/synview/type.Type} This.\n   * @fires module:meteoJS/synview/type#change:resources\n   */\n  appendResource(resource) {\n    this.collection.append(resource);\n    \n    // show current layer again\n    this.setDisplayTime(this.displayedResourceTime);\n    \n    /* Trigger event after setDisplayTime, therewith the synview object can\n     * set the desired time in the timeline object. */\n    this.trigger('change:resources');\n    return this;\n  }\n  \n  /**\n   * Removes a resource from the collection.\n   * If type is visible, this might also change the resources on the map.\n   * \n   * @param {module:meteoJS/synview/resource.Resource} resource Resource object.\n   * @return {module:meteoJS/synview/type.Type} This.\n   * @fires module:meteoJS/synview/type#change:resources\n   */\n  removeResource(resource) {\n    // hide current layer\n    this._hideVisibleResource();\n    \n    this.collection.remove(resource.getDatetime());\n    \n    // show current layer again\n    this.setDisplayTime(this.displayedResourceTime);\n    \n    /* Trigger event after setDisplayTime, therewith the synview object can\n     * set the desired time in the timeline object. */\n    this.trigger('change:resources');\n    return this;\n  }\n  \n  /**\n   * Sets resources in the collection (and replaces previous ones).\n   * If type is visible, this might also change the resources on the map.\n   * \n   * @param {module:meteoJS/synview/resource.Resource[]} resources List of resource objects.\n   * @return {module:meteoJS/synview/type.Type} This.\n   * @fires module:meteoJS/synview/type#change:resources\n   */\n  setResources(resources) {\n    // hide current layer\n    this._hideVisibleResource();\n    \n    this.collection.setResources(resources);\n    \n    // show current layer again\n    this.setDisplayTime(this.displayedResourceTime);\n    \n    /* Trigger event after setDisplayTime, therewith the synview object can\n     * set the desired time in the timeline object. */\n    this.trigger('change:resources');\n    return this;\n  }\n  \n  /**\n   * Returns resource of the displayed resource. If type contains resources\n   * with timestamps as well as a static resource, only a resource with timestamp\n   * will be returned. If type is invisible or no layer group is set, no resource\n   * is display, therefore an empty resource will be returned.\n   * \n   * @return {module:meteoJS/synview/resource.Resource} Resource.\n   */\n  getDisplayedResource() {\n    if (this.getVisible() &&\n        this.layerGroup !== undefined) {\n      if (isNaN(this.displayedResourceTime))\n        return (this.collection.getTimes().length > 0) ?\n          new Resource() :\n          this.collection.getResourceByTime(this.displayedResourceTime);\n      else\n        return this.collection.getResourceByTime(this.displayedResourceTime);\n    }\n    else\n      return new Resource();\n  }\n  \n  /**\n   * Sets time to display. Corresponding to the options an adequate resource will\n   * be searched and displayed. (accessible via getDisplayedResource())\n   * \n   * @param {Date} time Display time.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setDisplayTime(time) {\n    if (!this.getVisible())\n      return this;\n    var time_to_show = this._getResourceTimeByDisplayTime(time);\n    if (time_to_show === undefined ||\n        time_to_show !== undefined &&\n        !isNaN(this.displayedResourceTime) &&\n        this.displayedResourceTime.valueOf() != time_to_show.valueOf())\n      this._hideVisibleResource();\n    if (time_to_show !== undefined) {\n      this.displayedResourceTime = time_to_show;\n      var resource = this.getResourceCollection().getItemById(time_to_show.valueOf());\n      if (resource.getId()) {\n        resource.setVisible(true);\n        var opacity = 1.0;\n        if (Math.abs(time.valueOf() - time_to_show.valueOf()) > this.options.displayMaxResourceAge*1000) // 3h\n          opacity = 0.0;\n        else if (Math.abs(time.valueOf() - time_to_show.valueOf()) > this.options.displayFadeStart*1000) // 15min\n          opacity = this.options.displayFadeStartOpacity *\n            (Math.abs(time.valueOf() - time_to_show.valueOf()) -\n             this.options.displayMaxResourceAge * 1000) /\n            (1000 *\n             (this.options.displayFadeStart - this.options.displayMaxResourceAge));\n        resource.setOpacity(opacity);\n      }\n    }\n    else\n      this.displayedResourceTime = new Date('invalid');\n    return this;\n  }\n  \n  /**\n   * Returns the current tooltip function, undefined for no tooltip.\n   * \n   * @return {module:meteoJS/synview/tooltip~contentFunction|undefined} Tooltip function.\n   */\n  getTooltip() {\n    return this.options.tooltip;\n  }\n  \n  /**\n   * Sets the tooltip function. Undefined for no tooltip.\n   * \n   * @param {module:meteoJS/synview/tooltip~contentFunction|undefined} tooltip Tooltip function.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setTooltip(tooltip) {\n    this.options.tooltip = tooltip;\n    return this;\n  }\n  \n  /**\n   * Sets style of all resources (if resource has 'setOLStyle' method).\n   * If argument 'style' isn't declared, the style will be updated.\n   * Convenience method, you could also loop over all resources.\n   * \n   * @param {externalol/style/Style~Style} [style] OpenLayers style.\n   * @returns {module:meteoJS/synview/type.Type} This.\n   */\n  setResourcesOLStyle() {\n    var styleArguments = arguments;\n    this.getResourceCollection().getItems().forEach(function (resource) {\n      if ('setOLStyle' in resource)\n        resource.setOLStyle.apply(resource, styleArguments);\n    });\n    return this;\n  }\n  \n  /**\n   * Blendet aktuell dargestellten OL-Layer aus.\n   * @private\n   */\n  _hideVisibleResource() {\n    if (!isNaN(this.displayedResourceTime))\n      this.getResourceCollection()\n        .getItemById(this.displayedResourceTime.valueOf())\n        .setVisible(false);\n  }\n  \n  /**\n   * Füge dem layers-Objekt einen neuen OL-Layer hinzu\n   * @private\n   * @param {module:meteoJS/synview/resource.Resource} resource Entsprechende Resource zum Hinzufügen\n   */\n  _addOLLayer(resource) {\n    // Show static resources if visible\n    if (isNaN(resource.getDatetime()))\n      resource.setVisible(this.getVisible());\n    if (this.options.imageSmoothingEnabled !== undefined &&\n        resource.imageSmoothingEnabled === undefined)\n      resource.imageSmoothingEnabled = this.options.imageSmoothingEnabled;\n    resource.setLayerGroup(this.getLayerGroup());\n    resource.setZIndex(this.options.zIndex);\n  }\n  \n  /**\n   * Löscht aus layers-Objekt einen OL-Layer\n   * @private\n   * @param {module:meteoJS/synview/resource.Resource} resource Entsprechende Resource zum Hinzufügen\n   */\n  _removeOLLayer(resource) {\n    resource.setLayerGroup(undefined);\n  }\n  \n  /**\n   * Ersetzt im layers-Objekt einen OL-Layer\n   * @private\n   * @param {module:meteoJS/synview/resource.Resource} newResource Resource zum Hinzufügen\n   * @param {module:meteoJS/synview/resource.Resource} oldResource Resource zum Ersetzen\n   */\n  _replaceOLLayer(newResource, oldResource) {\n    this._removeOLLayer(oldResource);\n    this._addOLLayer(newResource);\n  }\n  \n  /**\n   * Gibt eine Zeit mit vorhandener Resource zu einer darzustellenden Zeit zurück.\n   * Es gibt dazu verschiedene Optionen (this.options.displayMethod):\n   * 'nearest': Wähle die zeitlich nächstgelegene Resource aus\n   * 'floor':   Wähle die Resource direkt zum Zeitpunkt oder zeitlich direkt vor\n   *            dem Termin.\n   * @private\n   * @return {undefined|Date} Resource time or undefined if not existing.\n   */\n  _getResourceTimeByDisplayTime(time) {\n    if (isNaN(time))\n      return undefined;\n    var resultTime = undefined;\n    this.collection.getTimes().forEach(function (resourceTime) {\n      /*if (resultTime === undefined)\n        resultTime = resourceTime;\n      else {*/\n      switch (this.options.displayMethod) {\n      case 'exact':\n        if (time.valueOf() == resourceTime.valueOf())\n          resultTime = resourceTime;\n        break;\n      case 'nearest':\n        if (resultTime === undefined ||\n                Math.abs(time.valueOf() - resourceTime.valueOf()) <\n                  Math.abs(time.valueOf() - resultTime.valueOf()))\n          resultTime = resourceTime;\n        break;\n      case 'floor':\n      default:\n        if (resultTime === undefined ||\n                resourceTime.valueOf() <= time.valueOf() &&\n                (time.valueOf() - resourceTime.valueOf() <\n                 time.valueOf() - resultTime.valueOf()))\n          resultTime = resourceTime;\n      }\n      //}\n    }, this);\n    return resultTime;\n  }\n  \n}\naddEventFunctions(Type.prototype);\nexport default Type;","/**\n * @module meteoJS/synview/typeCollection\n */\nimport $ from 'jquery';\nimport Collection from './Collection.js';\nimport Type from './Type.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/synview/typeCollection~options\n * @param {boolean} [exclusiveVisibility]\n *   At the same time, only one single type is visible.\n * @param {boolean} [syncVisibility]\n *   If the visibility of a type changes, all other types are also adjusted.\n *   If exclusiveVisibility is set to true, this will be ignored.\n */\n\n/**\n * Collection of type-objects.\n * Could ensure, that only a single type of this collection is visible.\n * \n * @extends module:meteoJS/synview/collection.Collection\n * @fires module:meteoJS/synview/typeCollection#change:typeVisible\n */\nexport class TypeCollection extends Collection {\n  \n  /**\n   * @param {module:meteoJS/synview/typeCollection~options} options - Options.\n   */\n  constructor(options) {\n    super();\n    \n    /**\n     * Options.\n     * @member {module:meteoJS/synview/typeCollection~options}\n     * @private\n     */\n    this.options = $.extend(true, {\n      exclusiveVisibility: false,\n      syncVisibility: false\n    }, options);\n  }\n  \n  /**\n   * Returns type with the passed ID or empty type if not existant.\n   * \n   * @override\n   * @param {mixed} id ID.\n   * @return {module:meteoJS/synview/type.Type} Type.\n   */\n  getItemById(id) {\n    var item = super.getItemById(id);\n    return (item === undefined) ? new Type() : this.items[id];\n  }\n  \n  /**\n   * Append type to this collection. If type with same ID is present, the type\n   * will be exchanged.\n   * \n   * @override\n   * @param {module:meteoJS/synview/type.Type} type Type.\n   * @return {module:meteoJS/synview/typeCollection.TypeCollection} This.\n   */\n  append(type) {\n    var that = this;\n    if (this.options.exclusiveVisibility &&\n        type.getVisible() &&\n        this.isVisible()) {\n      type.setVisible(false);\n    }\n    else if (that.options.syncVisibility) {\n      if (type.getVisible()) {\n        if (!this.isVisible())\n          this.getItems().forEach(function (t) {\n            t.setVisible(true);\n          }, this);\n      }\n      else {\n        if (this.isVisible())\n          type.setVisible(true);\n      }\n    }\n    type.on('change:visible', function () {\n      if (that.options.exclusiveVisibility) {\n        if (this.getVisible())\n          that.getItems().forEach(function (t) {\n            if (t.getId() != this.getId())\n              t.setVisible(false);\n          }, this);\n      }\n      else if (that.options.syncVisibility) {\n        that.getItems().forEach(function (t) {\n          if (t.getId() != this.getId())\n            t.setVisible(this.getVisible());\n        }, this);\n      }\n    });\n    return super.append(type);\n  }\n  \n  /**\n   * Returns the types of this collection with getVisible() == true.\n   * \n   * @return {module:meteoJS/synview/type.Type[]} Types.\n   */\n  getVisibleTypes() {\n    return this.getItems().filter(function (type) { return type.getVisible(); });\n  }\n  \n  /**\n   * Returns, if at least one type is visible.\n   * \n   * @return {boolean}\n   */\n  isVisible() {\n    return this.getVisibleTypes().length > 0;\n  }\n  \n  /**\n   * Sets the option exclusiveVisibility.\n   * If several types are visible and this will be set to true, then the first\n   * type in the getItems() iterator will stay visible.\n   * \n   * @return {module:meteoJS/synview/typeCollection.TypeCollection} This.\n   */\n  setExclusiveVisibility(exclusiveVisibility) {\n    if (this.options.exclusiveVisibility != exclusiveVisibility &&\n        exclusiveVisibility) {\n      var isVisibleType = false;\n      this.getItems().forEach(function (t) {\n        if (!isVisibleType)\n          isVisibleType = t.getVisible();\n        else\n          t.setVisible(false);\n      }, this);\n    }\n    this.options.exclusiveVisibility = exclusiveVisibility;\n    return this;\n  }\n  \n  /**\n   * Sets the option syncVisibility.\n   * If any type is visible and this will be set to true, then every type will\n   * be set visible.\n   * \n   * @return {module:meteoJS/synview/typeCollection.TypeCollection} This.\n   */\n  setSyncVisibility(syncVisibility) {\n    if (this.options.syncVisibility != syncVisibility &&\n        syncVisibility &&\n        this.isVisible()) {\n      this.getItems().forEach(function (t) {\n        t.setVisible(true);\n      }, this);\n    }\n    this.options.syncVisibility = syncVisibility;\n    return this;\n  }\n  \n}\nexport default TypeCollection;","/**\n * @module meteoJS/synview/tooltip\n */\nimport $ from 'jquery';\n\n/**\n * Function called that should return content for the tooltip. Undefined for\n * no tooltip.\n * \n * @typedef {Object} module:meteoJS/synview/tooltip~contentFunction\n * @param\n * @return {string|external:jQuery|undefined} Tooltip content.\n\n  sollte auch irgendwie die Resource-Objekt übernehmen...\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/synview/tooltip~options\n * @param {module:meteoJS/synview/map.SynviewMap} map - Map object.\n * @param {module:meteoJS/synview/typeCollection.TypeCollection} typeCollection\n *   Collection with all types.\n * @param {module:meteoJS/tooltip.Tooltip} tooltip - Tooltip object.\n */\n\n/**\n * Object to show a tooltip. Is instantiated by the main synview\n *   object.\n */\nexport class Tooltip {\n  \n  /**\n   * @param {module:meteoJS/synview/tooltip~options} [options] - Options.\n   */\n  constructor({\n    map,\n    typeCollection,\n    tooltip\n  }) {\n    \n    /**\n     * @type Object|undefined\n     * @private\n     */\n    this.tooltipFeature = undefined;\n    \n    /**\n     * @type mixed[]|undefined\n     * @private\n     */\n    this.tooltipPixelColor = undefined;\n    \n    /**\n     * @type module:meteoJS/synview/map.SynviewMap\n     * @private\n     */\n    this.map = map;\n    \n    /**\n     * @type module:meteoJS/synview/typeCollection.TypeCollection\n     * @private\n     */\n    this.typeCollection = typeCollection;\n    \n    /**\n     * @type module:meteoJS/tooltip.Tooltip\n     * @private\n     */\n    this.tooltip = tooltip;\n    \n    // Initialize tooltipNode\n    if (Object.getOwnPropertyDescriptor(\n      Object.getPrototypeOf(this.tooltip),\n      'tooltipNode'\n    ) &&\n        this.tooltip.tooltipNode === undefined)\n      this.tooltip.tooltipNode =\n        $('<div>')\n          .css('position', 'absolute')\n          .prependTo(this.map.getMap().getTargetElement());\n    \n    // On hide tooltip\n    this.tooltip.on('hide:tooltip', () => {\n      this.tooltipFeature = undefined;\n      this.tooltipPixelColor = undefined;\n    });\n    \n    // Mouse moves on map\n    this.map.on('move:pointer', e => {\n      if (e.dragging)\n        return;\n      e = this.map.getExtendedEventByTypeCollection(e, this.typeCollection);\n      if (e.feature ||\n          e.color) {\n        if (e.feature === this.tooltipFeature &&\n            (e.color === undefined &&\n             this.tooltipPixelColor === undefined ||\n             e.color !== undefined &&\n             this.tooltipPixelColor !== undefined &&\n             e.color.join(',') === this.tooltipPixelColor.join(','))) {\n          this.tooltip.show({\n            posX: e.pixel[0],\n            posY: e.pixel[1]\n          });\n          return;\n        }\n        \n        this.tooltipFeature = undefined;\n        this.tooltipPixelColor = undefined;\n        let tooltipContent = e.synviewType.getTooltip().call(undefined, e);\n        // Show tooltip only if there is content\n        if (tooltipContent !== undefined) {\n          this.tooltipFeature = e.feature;\n          this.tooltipPixelColor = e.color;\n          this.tooltip.content = tooltipContent;\n          this.tooltip\n            .hide()\n            .show({\n              posX: e.pixel[0],\n              posY: e.pixel[1]\n            });\n        }\n        else\n          this.tooltip.hide();\n      }\n      else\n        this.tooltip.hide();\n    });\n  }\n  \n}\nexport default Tooltip;","/**\n * @module meteoJS/synview\n */\n\nimport $ from 'jquery';\nimport SynviewMap from './synview/SynviewMap.js';\nimport Timeline from './Timeline.js';\nimport TypeCollection from './synview/TypeCollection.js';\nimport Tooltip from './synview/Tooltip.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/synview~options\n * @param {module:meteoJS/synview/map.SynviewMap|undefined} [map]\n *   Synview map object.\n * @param {module:meteoJS/timeline.Timeline|undefined} [timeline]\n *   Timeline object.\n * @param {module:meteoJS/tooltip.Tooltip} [tooltip] - Tooltip object.\n */\n\n/**\n * Mapping object to show map data for different timestamps. Create one object\n * per map.\n */\nexport default class Synview {\n  \n  /**\n   * @param {module:meteoJS/synview~options} options - Options.\n   */\n  constructor(options) {\n    /**\n     * @type {module:meteoJS/synview~options}\n     * @private\n     */\n    this.options = $.extend(true, {\n      map: undefined,\n      timeline: undefined,\n      tooltip: undefined\n    }, options);\n    // Normalize options\n    if (this.options.map === undefined)\n      this.options.map = new SynviewMap();\n    if (this.options.timeline === undefined)\n      this.options.timeline = new Timeline();\n    \n    /**\n     * Collection of synview types.\n     * @member {module:meteoJS/synview/typecollection.TypeCollection}\n     */\n    this.typeCollection = new TypeCollection();\n    /** @type meteoJS/synview/tooltip~Tooltip|undefined */\n    this.tooltip = undefined;\n    \n    // Timeline initialisieren\n    this.options.timeline.on('change:time', function () {\n      this.getTypeCollection().getItems().map(function (type) {\n        type.setDisplayTime(this.options.timeline.getSelectedTime());\n      }, this);\n    }, this);\n    \n    // typeCollection initialisieren\n    var timeline = this.options.timeline;\n    var updateTimes = function () {\n      var isLastTime = timeline.isLastEnabledTime();\n      // Zeitpunkte einlesen\n      if (this.getVisible())\n        timeline.setTimesBySetID(this.getId(), this.getResourceCollection().getTimes());\n      else\n        timeline.setTimesBySetID(this.getId(), []);\n      // Switch to last timestamp, if it was the last one already before.\n      if (isLastTime)\n        timeline.last();\n      else if (isNaN(timeline.getSelectedTime()))\n        timeline.first();\n    };\n    var appendType = function (type) {\n      type.setLayerGroup(this.options.map.makeLayerGroup());\n      updateTimes.call(type);\n      type.setDisplayTime(this.getTimeline().getSelectedTime());\n      type.on('change:resources', updateTimes);\n      // Zeitpunkte bei visible-Änderungen löschen oder hinzufügen\n      type.on('change:visible', updateTimes);\n      if (type.getTooltip() !== undefined &&\n          this.tooltip === undefined) {\n        this.tooltip = new Tooltip({\n          map: this.options.map,\n          typeCollection: this.typeCollection,\n          tooltip: this.options.tooltip\n        });\n      }\n    };\n    var removeType = function (type) {\n      this.getTimeline().deleteSetID(type.getId());\n      // Layer-Group löschen (bzw. aus OL entfernen)\n      // Events aus dem Type löschen\n    };\n    this.typeCollection.on('add:item', appendType, this);\n    this.typeCollection.on('remove:item', removeType, this);\n    this.typeCollection.on('replace:item', function (type, removedType) {\n      appendType.call(this, type);\n      removeType.call(this, removedType);\n    }, this);\n  }\n  \n  /**\n   * Returns timeline object.\n   * \n   * @return {meteoJS.timeline} Timeline.\n   */\n  getTimeline() {\n    return this.options.timeline;\n  }\n  \n  /**\n   * Returns map object.\n   * \n   * @return {meteoJS.synview.map} Map object.\n   */\n  getMap() {\n    return this.options.map;\n  }\n  \n  /**\n   * Returns collection object of appended types.\n   * \n   * @return {meteoJS.synview.typeCollection} Type collection.\n   */\n  getTypeCollection() {\n    return this.typeCollection;\n  }\n  \n  /**\n   * Append a type to this synview. Wrapper for getTypeCollection().append(type),\n   * but ensures, that the new type has an id different than undefined.\n   * \n   * @param {meteoJS.synview.type} type Type to append.\n   * @return {meteoJS.synview} This.\n   */\n  appendType(type) {\n    if (type.getId() === undefined) {\n      var prefixId = 'synview-type-';\n      var i = 0;\n      var newId;\n      do {\n        newId = prefixId + (i++);\n      } while (this.getTypeCollection().containsId(newId));\n      type.setId(newId);\n    }\n    this.getTypeCollection().append(type);\n    return this;\n  }\n  \n  /**\n   * Returns the tooltip object.\n   * \n   * @returns {module:meteoJS/tooltip~Tooltip} - Tooltip object.\n   */\n  getTooltip() {\n    return this.options.tooltip;\n  }\n  \n}","const __WEBPACK_NAMESPACE_OBJECT__ = ol.proj;","/**\n * @module meteoJS/synview/map/ol\n */\nimport SynviewMap from '../SynviewMap.js';\nimport LayerGroup from 'ol/layer/Group';\nimport { transform, fromLonLat } from 'ol/proj';\n\n/**\n * Name of mercator projection in openlayers\n * \n * @constant {string}\n */\nexport const projmerc = 'EPSG:3857';\n\n/**\n * Name of wgs84 projection in openlayers (lat/lon in degrees)\n * \n * @constant {string}\n */\nexport const projwgs84 = 'EPSG:4326';\n\n/**\n * Object to \"communicate\" with openlayers.\n * \n * @extends module:meteoJS/synview/map.SynviewMap\n */\nexport class MapOL extends SynviewMap {\n  \n  constructor(options) {\n    super(options);\n    \n    // Normalize options\n    if (this.options.layerGroup === undefined) {\n      this.options.layerGroup = new LayerGroup();\n      this.options.map.addLayer(this.options.layerGroup);\n    }\n    \n    // Listen to view changes.\n    this.options.map.getView().on('change:center', (function () {\n      this.trigger('change:view', this);\n    }).bind(this));\n    this.options.map.getView().on('change:resolution', (function () {\n      this.trigger('change:view', this);\n    }).bind(this));\n    this.options.map.on('pointermove', (function (e) {\n      this.trigger('move:pointer', e);\n    }).bind(this));\n    this.options.map.on('click', (function (e) {\n      this.trigger('click:pointer', e);\n    }).bind(this));\n    this.options.map.on('singleclick', (function (e) {\n      this.trigger('singleclick:pointer', e);\n    }).bind(this));\n    this.options.map.on('dblclick', (function (e) {\n      this.trigger('dblclick:pointer', e);\n    }).bind(this));\n    this.options.map.on('pointerdrag', (function (e) {\n      this.trigger('drag:pointer', e);\n    }).bind(this));\n  }\n  \n  /**\n   * Helper function. Returns the view center in WGS84 coordinates, lat/lon.\n   * \n   * @return {number[]} Center.\n   */\n  getViewCenter() {\n    return transform(\n      this.options.map.getView().getCenter(),\n      this.options.map.getView().getProjection(),\n      projwgs84\n    );\n  }\n  \n  /**\n   * Helper function. Sets the view center in WGS84 coordinates, lat/lon.\n   * \n   * @param {number[]} center Center.\n   * @return {module:meteoJS/synview/map/ol~MapOL} This.\n   */\n  setViewCenter(center) {\n    var valid = true;\n    center = center.map(function (a) {\n      if (isNaN(a)) {\n        valid = false;\n        return undefined;\n      }\n      else\n        return a*1;\n    });\n    if (valid)\n      this.options.map.getView().setCenter(fromLonLat(center));\n    return this;\n  }\n  \n  /**\n   * Helper function. Returns the view zoom level.\n   * \n   * @return {number|undefined} Zoom level.\n   */\n  getViewZoom() {\n    return this.options.map.getView().getZoom();\n  }\n  \n  /**\n   * Helper function. Sets the view zoom level.\n   * \n   * @param {number|undefined} zoom Zoom level.\n   * @returns {module:meteoJS/synview/map/ol~MapOL} This.\n   */\n  setViewZoom(zoom) {\n    if (!isNaN(zoom))\n      this.options.map.getView().setZoom(zoom*1);\n    return this;\n  }\n  \n  /**\n   * Returns a new layer group, already added to the map.\n   * \n   * @returns {external:ol/layer/Group~LayerGroup} New layer group.\n   */\n  makeLayerGroup() {\n    var group = new LayerGroup();\n    this.options.layerGroup.getLayers().push(group);\n    return group;\n  }\n  \n  /**\n   * Returns an event object, that is extended by several keys.\n   * Synview internal method.\n   * \n   * @param {external:ol/MapBrowserPointerEvent} event Map event object.\n   * @param {module:meteoJS/synview/typeCollection.TypeCollection} collection Type collection.\n   * @returns {module:meteoJS/synview/map~extendedEvent} Event object.\n   */\n  getExtendedEventByTypeCollection(event, collection) {\n    event = super.getExtendedEventByTypeCollection(event, collection);\n    let visibleTypes = new Map();\n    collection.getVisibleTypes()\n      .filter(type => { return type.getTooltip() !== undefined; })\n      .map(type => visibleTypes.set(type, []));\n    let visibleLayers = new Set();\n    let visibleLayerClassnames = new Set();\n    for (let type of visibleTypes.keys()) {\n      type.getLayerGroup().getLayers().getArray()\n        .filter(layer => layer.getVisible())\n        .forEach(layer => {\n          visibleTypes.get(type).push(layer);\n          visibleLayers.add(layer);\n          visibleLayerClassnames.add(layer.getClassName());\n        });\n    }\n    \n    this.options.map.forEachFeatureAtPixel(event.pixel, (feature, layer) => {\n      for (let type of visibleTypes.keys()) {\n        visibleTypes.get(type).forEach(l => {\n          if (event.synviewType !== undefined)\n            return;\n          if (l === layer) {\n            event.feature = feature;\n            event.layer = layer;\n            event.synviewType = type;\n          }\n        });\n        if (event.synviewType !== undefined)\n          break;\n      }\n      return event.synviewType !== undefined;\n    }, {\n      hitTolerance: 5,\n      layerFilter: layer => visibleLayers.has(layer)\n    });\n    \n    if (event.feature === undefined) {\n      this.options.map.forEachLayerAtPixel(event.pixel, (layer, color) => {\n        if (color == null || color.length < 1)\n          return false;\n        for (let type of visibleTypes.keys()) {\n          visibleTypes.get(type).forEach(l => {\n            if (event.synviewType !== undefined)\n              return;\n            if (l.getClassName() == layer.getClassName()) {\n              event.color = color;\n              event.layer = layer;\n              event.synviewType = type;\n            }\n          });\n          if (event.synviewType !== undefined)\n            break;\n        }\n        return event.synviewType !== undefined;\n      }, {\n        hitTolerance: 5,\n        layerFilter: layer => visibleLayerClassnames.has(layer.getClassName())\n      });\n    }\n    return event;\n  }\n  \n  /**\n   * Returns index of the passed layer inside the layer group of the passed type.\n   * Synview internal method.\n   * \n   * @param {external:ol/layer/Layer~Layer} layer Layer object.\n   * @param {module:meteoJS/synview/type.Type} type Type.\n   * @return {integer} Index.\n   */\n  findLayerInType(layer, type) {\n    return type.getLayerGroup().getLayers().getArray().findIndex(function (l) {\n      return l == layer;\n    }) > -1;\n  }\n  \n}\nexport default MapOL;","/**\n * @module meteoJS/synview/map/ll\n */\nimport SynviewMap from '../SynviewMap.js';\n\n/**\n * Object to \"communicate\" with Leaflet.\n * \n * @extends module:meteoJS/synview/map.SynviewMap\n */\nexport class MapLL extends SynviewMap {\n  \n  constructor(options) {\n    super (options);\n    \n    // Normalize options\n    if (this.options.layerGroup === undefined)\n      this.options.layerGroup = L.layerGroup().addTo(this.options.map);\n  }\n  \n  /**\n   * Returns a new layer group, already added to the map.\n   * \n   * @inheritdoc\n   * @return {L.layerGroup} New layer group.\n   */\n  makeLayerGroup() {\n    return L.layerGroup().addTo(this.options.layerGroup);\n  }\n  \n}\nexport default MapLL;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.format.GeoJSON;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.Vector;","/**\n * @module meteoJS/synview/resource/Vector\n */\nimport VectorSource from 'ol/source/Vector';\nimport VectorLayer from 'ol/layer/Vector';\nimport Resource from '../Resource.js';\nimport { projwgs84 } from '../map/MapOL.js';\n\n/**\n * Object representing a Vector-resource.\n * \n * @extends  module:meteoJS/synview/resource.Resource\n */\nexport class Vector extends Resource {\n  \n  /**\n   * @inheritdoc\n   */\n  getId() {\n    var d = this.getDatetime();\n    return isNaN(d) ? '' : d.toISOString();\n  }\n  \n  /**\n   * Returns openlayers layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:ol/layer/Vector~VectorLayer} Openlayers layer.\n   */\n  makeOLLayer() {\n    let opt = {\n      source: this.options.ol.source,\n      events: this.options.ol.events,\n      style: this.options.ol.style\n    };\n    this.options.ol;\n    // source not an ol/source/Source~Source object (via duck typing)\n    if (!('refresh' in opt.source)) {\n      let sourceOptions = opt.source;\n      if (this.options.url !== undefined &&\n          'format' in sourceOptions &&\n          sourceOptions.format !== undefined)\n        sourceOptions.url = this.options.url;\n      if (!('projection' in sourceOptions) ||\n          sourceOptions.projection === undefined)\n        sourceOptions.projection = projwgs84;\n      opt.source = new VectorSource(sourceOptions);\n    }\n    if (typeof opt.style === 'function')\n      opt.style = opt.style.bind(this);\n    if (this.className)\n      opt.className = this.className;\n    return new VectorLayer(opt);\n  }\n  \n  /**\n   * Sets style of the OpenLayers vector layer.\n   * If argument 'style' is omitted, the style will be updated.\n   * \n   * @param {external:ol/style/Style~Style} [style] OpenLayers style.\n   * @returns {module:meteoJS/synview/resource/Vector.Vector} This.\n   */\n  setOLStyle(style) {\n    if (this.layer === undefined)\n      this.getOLLayer();\n    if (this.layer === undefined ||\n        !('setStyle' in this.layer))\n      return this;\n    if (arguments.length == 0)\n      this.layer.setStyle(this.layer.getStyle());\n    else\n      this.layer.setStyle(style);\n    return this;\n  }\n  \n}\nexport default Vector;","/**\n * @module meteoJS/synview/resource/GeoJSON\n */\nimport GeoJSONFormat from 'ol/format/GeoJSON';\nimport Vector from './Vector.js';\n\n/**\n * Object representing a GeoJSON-resource.\n * \n * @extends module:meteoJS/synview/resource/Vector.Vector\n */\nexport class GeoJSON extends Vector {\n  \n  constructor(options) {\n    super(options);\n    \n    this.options.ol.source.url = this.options.url;\n    this.options.ol.source.format = new GeoJSONFormat();\n  }\n  \n}\nexport default GeoJSON;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.VectorTile;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.VectorTile;","/**\n * @module meteoJS/synview/resource/VectorTile\n */\nimport VectorTileSource from 'ol/source/VectorTile';\nimport VectorTileLayer from 'ol/layer/VectorTile';\nimport Vector from './Vector.js';\nimport { projwgs84 } from '../map/MapOL.js';\n\n/**\n * Object representing a VectorTile-resource.\n * \n * @extends  module:meteoJS/synview/resource/Vector~Vector\n */\nexport class VectorTile extends Vector {\n  \n  /**\n   * Returns openlayers layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:ol/layer/VectorTile~VectorTileLayer} Openlayers layer.\n   */\n  makeOLLayer() {\n    let opt = {\n      source: this.options.ol.source,\n      events: this.options.ol.events,\n      style: this.options.ol.style\n    };\n    // source not an ol/source/Source~Source object (via duck typing)\n    if (!('refresh' in opt.source)) {\n      let sourceOptions = opt.source;\n      if (!('tileUrlFunction' in sourceOptions) &&\n          this.options.url !== undefined &&\n          'format' in sourceOptions &&\n          sourceOptions.format !== undefined)\n        sourceOptions.url = this.options.url;\n      if (!('projection' in sourceOptions) ||\n          sourceOptions.projection === undefined)\n        sourceOptions.projection = projwgs84;\n      opt.source = new VectorTileSource(sourceOptions);\n    }\n    if (typeof opt.style === 'function')\n      opt.style = opt.style.bind(this);\n    if (this.className)\n      opt.className = this.className;\n    return new VectorTileLayer(opt);\n  }\n  \n}\nexport default VectorTile;","/**\n * @module meteoJS/synview/resource/GeoJSONTile\n */\nimport GeoJSON from 'ol/format/GeoJSON';\nimport VectorTile from './VectorTile.js';\n\n/**\n * Object representing a GeoJSON-Tile-resource.\n * \n * @extends module:meteoJS/synview/resource/VectorTile.VectorTile\n */\nexport class GeoJSONTile extends VectorTile {\n  \n  constructor(options) {\n    super(options);\n    \n    this.options.ol.source.format = new GeoJSON();\n  }\n  \n}\nexport default GeoJSONTile;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.ImageStatic;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.Image;","/**\n * @module meteoJS/synview/resource/Image\n */\nimport Static from 'ol/source/ImageStatic';\nimport ImageLayer from 'ol/layer/Image';\nimport { transformExtent } from 'ol/proj';\nimport Resource from '../Resource.js';\nimport { projmerc, projwgs84 } from '../map/MapOL.js';\n\n/**\n * Options for module:meteoJS/synview/resource/Image~Image.\n * \n * @typedef {module:meteoJS/synview/resource~options}\n *   module:meteoJS/synview/resource/Image~options\n * @param {number[]} extent - Extent.\n */\n\n/**\n * Object representing an image.\n * \n * <pre><code>import Image from 'meteoJS/synview/resource/Image';\nimport { Image } from 'meteoJS/synview/resource/Image';\nimport { ImageStatic } from 'meteoJS/synview/resource/Image';</code></pre>\n * \n * @extends  module:meteoJS/synview/resource.Resource\n */\nexport class ImageStatic extends Resource {\n  \n  /**\n   * @param {module:meteoJS/synview/resource/Image~options} options - Options.\n   */\n  constructor({\n    url = undefined,\n    datetime = undefined,\n    mimetype = undefined,\n    reloadTime = undefined,\n    className = undefined,\n    extent,\n    ol = {}\n  } = {}) {\n    super({\n      url,\n      datetime,\n      mimetype,\n      reloadTime,\n      className,\n      ol\n    });\n    \n    this.options.extent = extent;\n  }\n  \n  /**\n   * Returns openlayers layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:ol/layer/Image~ImageLayer} Openlayers layer.\n   */\n  makeOLLayer() {\n    let sourceOptions = this.options.ol.source;\n    sourceOptions.url = this.options.url;\n    sourceOptions.imageExtent =\n      transformExtent(this.options.extent,\n        projwgs84,\n        projmerc);\n    return new ImageLayer({\n      source: new Static(sourceOptions),\n      className: this.className\n    });\n  }\n  \n  /**\n   * Returns Leaflet layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:L.imageOverlay} Leaflet layer.\n   */\n  makeLLLayer() {\n    return L.imageOverlay(this.options.url, [\n      [this.options.extent[1], this.options.extent[0]],\n      [this.options.extent[3], this.options.extent[2]]\n    ]);\n  }\n  \n  \n  /**\n   * @inheritdoc\n   */\n  preload() {\n    this.getOLLayer().getSource().image_.load();\n  }\n}\nexport { ImageStatic as Image };\nexport default ImageStatic;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.OSM;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.Tile;","/**\n * @module meteoJS/synview/resource/OSM\n */\nimport OSMSource from 'ol/source/OSM';\nimport TileLayer from 'ol/layer/Tile';\nimport Resource from '../Resource.js';\n\n/**\n * Object representing a OSM-resource.\n * \n * @extends  module:meteoJS/synview/resource.Resource\n */\nexport class OSM extends Resource {\n  \n  /**\n   * Returns openlayers layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:ol/layer/Tile~TileLayer} Openlayers layer.\n   */\n  makeOLLayer() {\n    let sourceOptions = this.options.ol.source;\n    sourceOptions.url = this.options.url;\n    return new TileLayer({\n      source: new OSMSource(sourceOptions)\n    });\n  }\n  \n}\nexport default OSM;","/**\n * @module meteoJS/tooltip\n */\nimport addEventFunctions from './Events.js';\n\n/**\n * Triggered, when tooltip starts to be shown.\n * \n * @event module:meteoJS/tooltip#show:tooltip\n */\n\n/**\n * Triggered, when tooltip starts to be hidden.\n * \n * @event module:meteoJS/tooltip#hide:tooltip\n */\n\n/**\n * @classdesc Abstract class to create a tooltip.\n * \n * @abstract\n * @fires module:meteoJS/tooltip#show:tooltip\n * @fires module:meteoJS/tooltip#hide:tooltip\n */\nexport class Tooltip {\n  \n  constructor() {\n    /**\n     * @type Boolean\n     * @private\n     */\n    this._isShown = false;\n    \n    /**\n     * @type undefined|mixed\n     * @private\n     */\n    this._content = undefined;\n  }\n  \n  /**\n   * Is tooltip shown.\n   * \n   * @type Boolean\n   * @readonly\n   */\n  get isShown() {\n    return this._isShown;\n  }\n  \n  /**\n   * Content of tooltip. Could be a String or a HTMLElement or a jQuery object.\n   * \n   * @type undefined|mixed\n   */\n  get content() {\n    return this._content;\n  }\n  set content(content) {\n    let oldContent = this._content;\n    this._content = content;\n    if (oldContent !== this._content)\n      this.onContentChange();\n  }\n  \n  /**\n   * Show tooltip.\n   * \n   * @abstract\n   * @param {Object} [options] - Options.\n   * @param {Number} options.posX - Position in x direction.\n   * @param {Number} options.posY - Position in y direction.\n   * @returns {module:meteoJS/tooltip.Tooltip} This.\n   */\n  show() {\n    let fireShowEvent = !this.isShown;\n    this._isShown = true;\n    if (fireShowEvent)\n      this.trigger('show:tooltip');\n    return this;\n  }\n  \n  /**\n   * Hide tooltip.\n   * \n   * @abstract\n   * @returns {module:meteoJS/tooltip.Tooltip} This.\n   */\n  hide() {\n    let fireHideEvent = this.isShown;\n    this._isShown = false;\n    if (fireHideEvent)\n      this.trigger('hide:tooltip');\n    return this;\n  }\n  \n  /**\n   * Update tooltip. E.g. due to content change, which moved the tooltip.\n   * \n   * @abstract\n   * @returns {module:meteoJS/tooltip.Tooltip} This.\n   */\n  update() {\n    return this;\n  }\n  \n  /**\n   * Called when property 'content' changes.\n   * \n   * @abstract\n   * @protected\n   */\n  onContentChange() {}\n  \n}\naddEventFunctions(Tooltip.prototype);\nexport default Tooltip;","/**\n * @module meteoJS/tooltip/bootstrapTooltip\n */\nimport $ from 'jquery';\nimport 'bootstrap/js/dist/tooltip';\nimport Tooltip from '../Tooltip.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/tooltip/bootstrapTooltip~options\n * @property {undefined|external:jQuery|external:HTMLElement} [tooltipNode=undefined]\n *   Create Bootstrap's tooltip on this element.\n * @property {Object} [bootstrapOptions] - Options passed to the '.tooltip' method.\n * @property {boolean} [closeOnMouseMove=true]\n *   Close tooltip, when mouse is moved over the tooltip.\n * @property {boolean} [closeOnMouseEnter=false]\n *   Close tooltip, when mouse is entered in the tooltip.\n */\n\n/**\n * Tooltip which uses the Bootstrap's tooltip.\n * \n * @extends module:meteoJS/tooltip.Tooltip\n * @inheritdoc\n */\nexport class BootstrapTooltip extends Tooltip {\n  \n  /**\n   * @param {module:meteoJS/tooltip/bootstrapTooltip~options} [options] - Options.\n   */\n  constructor({\n    tooltipNode = undefined,\n    bootstrapOptions = undefined,\n    closeOnMouseMove = true,\n    closeOnMouseEnter = false\n  } = {}) {\n    super();\n    \n    /**\n     * @type undefined|Object\n     * @private\n     */\n    this.bootstrapOptions = bootstrapOptions ? bootstrapOptions : {};\n    this._initBootstrapOptions(bootstrapOptions);\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this.closeOnMouseMove = closeOnMouseMove;\n    \n    /**\n     * @type Bboolean\n     * @private\n     */\n    this.closeOnMouseEnter = closeOnMouseEnter;\n    \n    /**\n     * @type external:jQuery\n     * @private\n     */\n    this._tooltipNode = undefined;\n    this.tooltipNode = tooltipNode;\n  }\n  \n  /**\n   * Bootstap's tooltip is assigned to this node.\n   * \n   * @type undefined|external:jQuery\n   */\n  get tooltipNode() {\n    return this._tooltipNode;\n  }\n  set tooltipNode(tooltipNode) {\n    if (tooltipNode === undefined) {\n      this._tooltipNode = tooltipNode;\n      return;\n    }\n    \n    this._tooltipNode = $(tooltipNode);\n    this._initTooltipNode();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  show({\n    posX,\n    posY\n  }) {\n    this.tooltipNode\n      .css({\n        left: `${posX}px`,\n        top: `${posY}px`\n      })\n      .tooltip(this.isShown ? 'update' : 'show');\n    return super.show();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  hide() {\n    if (this.isShown)\n      this.tooltipNode\n        .tooltip('hide')\n        .attr('data-original-title', undefined);\n    return super.hide();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  update() {\n    this.tooltipNode.tooltip('update');\n    return super.update();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onContentChange() {\n    /* If no content is passed, the tooltip will not open with a\n     * content-callback until the tooltip is initialized otherwise. */\n    this.tooltipNode.attr('data-original-title',\n      isStringContent(this.content) ? this.content : '-');\n    \n    this._updateNonStringContent();\n    this.update();\n  }\n  \n  /**\n   * Default options to Bootstrap's tooltip.\n   * \n   * @private\n   */\n  _initBootstrapOptions({\n    trigger = 'manual'\n  } = {}) {\n    this.bootstrapOptions.trigger = trigger;\n  }\n  \n  /**\n   * Initialize Bootstrap's tooltip.\n   * \n   * @private\n   */\n  _initTooltipNode() {\n    this.tooltipNode\n      .tooltip(this.bootstrapOptions)\n      .on('inserted.bs.tooltip', () => {\n        let tooltipNode = this._updateNonStringContent();\n        if (!tooltipNode.length)\n          return;\n        if (this.closeOnMouseMove)\n          tooltipNode.children('.tooltip-inner').mousemove(() => this.hide());\n        if (this.closeOnMouseEnter)\n          tooltipNode.children('.tooltip-inner').mouseenter(() => this.hide());\n      });\n  }\n  \n  /**\n   * Updates tooltips content, if not simply a string.\n   * \n   * @private\n   * @returns {external:jQuery} - Tooltip node.\n   */\n  _updateNonStringContent() {\n    let tooltipNode =\n      $(document.getElementById(this.tooltipNode.attr('aria-describedby')));\n    if (!tooltipNode.length)\n      return;\n    if (this.content !== undefined &&\n        !isStringContent(this.content))\n      tooltipNode\n        .children('.tooltip-inner')\n        .empty()\n        .append(this.content);\n    return tooltipNode;\n  }\n  \n}\nexport default BootstrapTooltip;\n\nconst isStringContent = function(content) {\n  return Object.prototype.toString.call(content) == '[object String]';\n};","/**\n * @module meteoJS/base/unique\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/base/unique~options\n * @property {mixed} [id] - Id.\n */\n\n/**\n * Class that describe an object with an unique id.\n */\nexport class Unique {\n  \n  /**\n   * @param {module:meteoJS/base/unique~options} [options] - Options.\n   */\n  constructor({ id } = {}) {\n    this._id = id;\n  }\n  \n  /**\n   * Id.\n   * \n   * @type {mixed}\n   */\n  get id() {\n    return this._id;\n  }\n  set id(id) {\n    this._id = id;\n    this.setId(id);\n  }\n  \n  /**\n   * Fired, wenn id-setter is called.\n   * \n   * @protected\n   * @param {mixed} id - Id.\n   */\n  setId() {}\n}\nexport default Unique;","/**\n * @module meteoJS/base/collection\n */\nimport addEventFunctions from '../Events.js';\nimport Unique from './Unique.js';\n\n/**\n * Triggered on adding item to collection.\n * \n * @event module:meteoJS/base/collection#add:item\n * @param {module:meteoJS/base/unique.Unique} item - Added item.\n */\n\n/**\n * Triggered on replacing item with already existing ID.\n * \n * @event module:meteoJS/base/collection#replace:item\n * @param {module:meteoJS/base/unique.Unique} item - Added item.\n * @param {module:meteoJS/base/unique.Unique} removedItem - Replaced and removed item.\n */\n\n/**\n * Triggered on removing item from collection.\n * \n * @event module:meteoJS/base/collection#remove:item\n * @param {module:meteoJS/base/unique.Unique} item - Removed item.\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/base/collection~options\n * @property {boolean} [fireReplace] - Fire {@link module:meteoJS/base/collection#replace:item|replace:item}.\n * @property {boolean} [fireAddRemoveOnReplace] -\n *   Fire {@link module:meteoJS/base/collection#add:item|add:item} and\n *   {@link module:meteoJS/base/collection#remove:item|remove:item} on\n *   replacing an item.\n * @property {boolean} [appendOnReplace] -\n *   Append item to the end, if item is replaced.\n * @property {undefined|Function} [sortFunction] -\n *   Sort function to sort the collection list.\n * @property {undefined|Function} [emptyObjectMaker] -\n *   Function that returns an empty\n *   {@link module:meteoJS/base/unqiue.Unique|Unique}-Object or\n *   an instance of a child class.\n */\n\n/**\n * Collection-class for {@link module:meteoJS/base/unqiue.Unique|Unique}-Objects\n * or objects of child classes.\n * \n * @implements {Iterator}\n * @fires module:meteoJS/base/collection#add:item\n * @fires module:meteoJS/base/collection#remove:item\n * @fires module:meteoJS/base/collection#replace:item\n */\nexport class Collection {\n  \n  /**\n   * @param {module:meteoJS/base/collection~options} options - Options.\n   */\n  constructor({ fireReplace=true,\n    fireAddRemoveOnReplace=false,\n    appendOnReplace=true,\n    sortFunction,\n    emptyObjectMaker\n  } = {}) {\n    /** @type Object */\n    this.options = {\n      fireReplace,\n      fireAddRemoveOnReplace,\n      appendOnReplace,\n      sortFunction,\n      emptyObjectMaker\n    };\n    \n    /**\n     * List of the IDs of the items.\n     * @type mixed[]\n     * @private\n     */\n    this._itemIds = [];\n    \n    /**\n     * Items, ID as key of the object.\n     * @type Object.<mixed,module:meteoJS/base/unique.Unique>\n     * @private\n     */\n    this._items = {};\n  }\n  \n  /**\n   * Count of the items in this collection.\n   * \n   * @type integer\n   * @readonly\n   */\n  get count() {\n    return this._itemIds.length;\n  }\n  \n  [Symbol.iterator]() {\n    let i = 0;\n    return {\n      next: () => {\n        return (i < this._itemIds.length)\n          ? { value: this._items[this._itemIds[i++]] }\n          : { done: true };\n      }\n    };\n  }\n  \n  /**\n   * Items (ordered list).\n   * \n   * @type module:meteoJS/base/unique.Unique[]\n   * @readonly\n   */\n  get items() {\n    return this._itemIds.map(id => this._items[id]);\n  }\n  \n  /**\n   * List of IDs (ordered list).\n   * \n   * @type mixed[]\n   * @readonly\n   */\n  get itemIds() {\n    return this._itemIds;\n  }\n  \n  /**\n   * Sort function for the items.\n   * \n   * @type undefined|Function\n   */\n  get sortFunction() {\n    return this.options.sortFunction;\n  }\n  set sortFunction(sortFunction) {\n    this.options.sortFunction = sortFunction;\n    this._sort();\n  }\n  \n  /**\n   * Returns item by ID, Unique-Object with undefined id, if ID doesn't exist.\n   * \n   * @param {mixed} id - ID.\n   * @returns {module:meteoJS/base/unique.Unique} Item.\n   */\n  getItemById(id) {\n    return (id in this._items) ? this._items[id] :\n      (this.options.emptyObjectMaker === undefined)\n        ? new Unique()\n        : this.options.emptyObjectMaker.call(this);\n  }\n  \n  /**\n   * Is item appended to the collection.\n   * \n   * @param {module:meteoJS/base/unique.Unique} item - Item.\n   * @returns {boolean} If appended.\n   */\n  contains(item) {\n    let result = this.containsId(item.id);\n    if (result)\n      result = item === this.getItemById(item.id);\n    return result;\n  }\n  \n  /**\n   * Exists an ID in this collection.\n   * \n   * @param {mixed} id - ID.\n   * @returns {boolean} If exists.\n   */\n  containsId(id) {\n    return (id in this._items);\n  }\n  \n  /**\n   * Append an item to the collection.\n   * \n   * @param {...module:meteoJS/base/unique.Unique} items - New items.\n   * @returns {module:meteoJS/base/collection.Collection} This.\n   * @fires module:meteoJS/base/collection#add:item\n   * @fires module:meteoJS/base/collection#remove:item\n   * @fires module:meteoJS/base/collection#replace:item\n   */\n  append(...items) {\n    const addItem = [];\n    const removeItem = [];\n    const replaceItem = [];\n    items.forEach(item => {\n      let id = item.id;\n      if (this.containsId(id)) {\n        let itemInCollection = this.getItemById(id);\n        if (this.options.appendOnReplace) {\n          this._itemIds.splice(this._itemIds.indexOf(id), 1);\n          this._itemIds.push(id);\n        }\n        if (itemInCollection !== item) {\n          this._items[id] = item;\n          if (this.options.fireReplace)\n            replaceItem.push([item, itemInCollection]);\n          if (this.options.fireAddRemoveOnReplace) {\n            removeItem.push(itemInCollection);\n            addItem.push(item);\n          }\n        }\n      }\n      else {\n        this._itemIds.push(id);\n        this._items[id] = item;\n        addItem.push(item);\n      }\n    });\n    this._sort();\n    addItem.forEach(item => this.trigger('add:item', item));\n    removeItem.forEach(item => this.trigger('remove:item', item));\n    replaceItem.forEach(([item, itemInCollection]) => this.trigger('replace:item', item, itemInCollection));\n    return this;\n  }\n  \n  /**\n   * Removes an item from the collection.\n   * \n   * @param {...module:meteoJS/base/unique.Unique} items - Items to remove.\n   * @returns {module:meteoJS/base/collection.Collection} This.\n   * @fires module:meteoJS/base/collection#remove:item\n   */\n  remove(...items) {\n    items.forEach(item => {\n      let i = this._itemIds.indexOf(item.id);\n      if (i > -1) {\n        let realItem = this._items[item.id];\n        delete this._items[item.id];\n        this._itemIds.splice(i, 1);\n        this.trigger('remove:item', realItem);\n      }\n    });\n    return this;\n  }\n  \n  /**\n   * Removes an item by ID from the collection.\n   * \n   * @param {mixed} id - ID of the item to delete.\n   * @returns {module:meteoJS/base/collection.Collection} This.\n   * @fires module:meteoJS/base/collection#remove:item\n   */\n  removeById(...ids) {\n    ids.forEach(id => {\n      let i = this._itemIds.indexOf(id);\n      if (i > -1) {\n        let item = this._items[id];\n        delete this._items[id];\n        this._itemIds.splice(i, 1);\n        this.trigger('remove:item', item);\n      }\n    });\n    return this;\n  }\n  \n  /**\n   * Sorts Collection-List.\n   * \n   * @private\n   */\n  _sort() {\n    if (this.options.sortFunction === undefined)\n      return;\n    this._itemIds.sort((a,b) => {\n      return this.options.sortFunction(this._items[a], this._items[b]);\n    });\n  }\n}\naddEventFunctions(Collection.prototype);\nexport default Collection;","/**\n * @module meteoJS/modelviewer\n */\nimport Collection from './base/Collection.js';\nimport Timeline from './Timeline.js';\n\n/**\n * Creates and returns a HTMLElement or jQuery object for a container. The\n * content of the container is appended to this element. This function has to\n * append the element to the modelviewer's containersNode.\n * \n * @typedef {Function} module:meteoJS/modelviewer~makeContainerNode\n * @param {module:meteoJS/modelviewer/container.Container} container\n *   Container to append.\n * @this module:meteoJS/modelviewer~Modelviewer\n * @returns {HTMLElement|jQuery} Top node of the appended container.\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/modelviewer~options\n * @param {module:meteoJS/modelviewer/resources.Resources} resources\n *   Available resources.\n * @param {HTMLElement|jQuery} containersNode Node to append the containers.\n * @param {module:meteoJS/timeline.Timeline} [timeline]\n *   Shared Timeline between containers.\n * @param {module:meteoJS/modelviewer~makeContainerNode} [makeContainerNode]\n *   Function to create the top node of each container.\n * @param {boolean} [firstTimeOnInit=true] - Selects the first time in timeline\n *   once for the first time times are added to the timeline.\n * @param {boolean} [lastTimeOnInit=false] - Selects the last time in timeline\n *   once for the first time times are added to the timeline.\n *   Ignored if firstTimeOnInit is true.\n */\n\n/**\n * @classdesc\n \n * Entscheidet über das Design der Container (auch Darstellungsbreite -> entsprechend welche Navigation)\n * Wie kann der User die Anordnung der Container ändern?\n   * Dies soll für Bootstrap aber auch allg. funktionieren\n   * Wie soll dazu die Navigation angepasst werden können\n * Handelt wahrscheinlich die Darstellung der Container (irgendwie…)\n * Eigentlich wäre gut, wenn auch keine Abhängikeit von jQuery… (geht das?)\n * Output Container -> Modelviewer\n   * Kann entweder nur ein Bild/Sounding/etc. anzeigen\n   * Kann je nach dem auch noch Navigation(en) ausgeben\n   * Je nach Output unterschiedlicher Aufbau des Container-div's\n   * Wie übergibt man diesem Objekt die Darstellung (z.B. der Navigation)\n   * Navigation muss sich anpassen (Änderung einer Collection, Änderung der Resource, …)\n * Wie löst man das Vererben der Anzeige des vorangegangenen Containers -> Modelviewer\n * Wie löst man, dass öffnen eines nächsten Runs vom vorangegangenen Container -> Modelviewer\n * Bei Image -> hover funktion -> Modelviewer\n * Bei Image -> Überblenden von Punkten für z.B. Ensembles -> Modelviewer\n * Default-Navigation mit <select>-Nodes. -> Modelviewer\n * 2te Default-Navigation mit vertikal angeordneten Listen -> Modelviewer\n * \n * ToDo:\n * * Alle Zeitpunkte für Modell/Run\n * * Alle Zeitpunkte für eine gewählte Resource (oder mind. displayVariables)\n *   -> dabei sollten keine Unter-Nodes berücksichtigt werden.\n * * Auswahl der DisplayVariable entweder nur per 1:1 Übereinstimmung oder aber\n *   durch Best-Match (wie soll dies gelöst werden).\n * Aktuell befindet sich ziemlicher Rubbish-Code in den Klassen.\n * collectTimesVariableCollections in Resources ist nicht die Lösung\n */\nexport class Modelviewer extends Collection {\n  \n  /**\n   * @param {module:meteoJS/modelviewer~options} options - Options.\n   */\n  constructor({ resources,\n    containersNode,\n    timeline = undefined,\n    makeContainerNode = undefined,\n    firstTimeOnInit = true,\n    lastTimeOnInit = false } = {}) {\n    super({\n      fireReplace: false,\n      fireAddRemoveOnReplace: true\n    });\n    \n    /**\n     * @type module:meteoJS/modelviewer/resources.Resources\n     * @private\n     */\n    this._resources = resources;\n    \n    /**\n     * @type HTMLElement\n     * @private\n     */\n    this._containersNode =\n      (typeof containersNode == 'object' && containersNode.jquery)\n        ? containersNode[0] : containersNode;\n    \n    /**\n     * @type module:meteoJS/timeline.Timeline\n     * @private\n     */\n    this._timeline = (timeline === undefined) ? new Timeline() : timeline;\n    \n    /**\n     * @type undefined|Function\n     * @private\n     */\n    this._makeContainerNode = makeContainerNode;\n    \n    /**\n     * @type Map<module:meteoJS/modelviewer/container.Container,mixed>\n     * @private\n     */\n    let listenerKeys = new Map();\n    \n    this.on('add:item', container => {\n      container.modelviewer = this;\n      container.containerNode =\n        this._getContainerNode(container);\n      if (!isNaN(this.timeline.getSelectedTime().valueOf()) ||\n          !firstTimeOnInit && !lastTimeOnInit)\n        return;\n      \n      listenerKeys\n        .set(container, container.on('change:selectedVariables', ()  => {\n          if (isNaN(this._timeline.getSelectedTime().valueOf())) {\n            if (firstTimeOnInit)\n              this._timeline.first();\n            else if (lastTimeOnInit)\n              this._timeline.last();\n            if (!isNaN(this._timeline.getSelectedTime().valueOf()))\n              for (let c of listenerKeys.keys()) {\n                c.un('change:selectedVariables', listenerKeys.get(c));\n                listenerKeys.delete(c);\n              }\n          }\n        }));\n    });\n    \n    this.on('remove:item', container => {\n      if (container.containerNode !== undefined &&\n          container.containerNode.parentNode != null)\n        container.containerNode.parentNode.removeChild(container.containerNode);\n      container.modelviewer = undefined;\n      container.containerNode = undefined;\n      if (listenerKeys.has(container)) {\n        container.un('change:selectedVariables', listenerKeys.get(container));\n        listenerKeys.delete(container);\n      }\n      this.timeline.deleteSetID(container.id);\n    });\n  }\n  \n  /**\n   * Resources.\n   * \n   * @type module:meteoJS/modelviewer/resources.Resources\n   * @readonly\n   */\n  get resources() {\n    return this._resources;\n  }\n  \n  /**\n   * Node to append the container's node into.\n   * \n   * @type HTMLElement\n   * @readonly\n   */\n  get containersNode() {\n    return this._containersNode;\n  }\n  \n  /**\n   * Timeline.\n   * \n   * @type module:meteoJS/timeline.Timeline\n   * @readonly\n   */\n  get timeline() {\n    return this._timeline;\n  }\n  \n  /**\n   * Appends container(s).\n   * \n   * @param {...module:meteoJS/modelviewer/container.Container} containers\n   *   New containers.\n   * @returns {module:meteoJS/modelviewer.Modelviewer} This.\n   * @override\n   */\n  append(...containers) {\n    let ids = [...this.itemIds];\n    containers\n      .filter(container => container.id !== undefined)\n      .forEach(container => ids.push(container.id));\n    containers\n      .filter(container => container.id === undefined)\n      .forEach(container => {\n        let i = 1;\n        let id = `container${i}`;\n        while (ids.indexOf(id) > -1) {\n          i++;\n          id = `container${i}`;\n        }\n        container.id = id;\n        ids.push(id);\n      });\n    super.append(...containers);\n    return this;\n  }\n  \n  /**\n   * Creates a HTMLElement to append the container content into it. This\n   * element is appended to the containersNode.\n   * \n   * @param {module:meteoJS/modelviewer/container.Container} container\n   *   Create Node for this container.\n   * @returns {HTMLElement} Node.\n   * @private\n   */\n  _getContainerNode(container) {\n    if (this._makeContainerNode !== undefined) {\n      let result =\n        this._makeContainerNode.call(this, this.containersNode, container);\n      return (typeof result == 'object' && result.jquery) ? result[0] : result;\n    }\n    else {\n      let containerNode =\n        (container.containerNode !== undefined)\n          ? container.containerNode\n          : document.createElement('div');\n      if (this.containersNode !== undefined)\n        this.containersNode.appendChild(containerNode);\n      return containerNode;\n    }\n  }\n}\nexport default Modelviewer;","/**\n * @module meteoJS/base/named\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/base/named~options\n * @property {string} [name] - Default name.\n * @property {Object.<string,string>} [names] - Names.\n * @property {string[]} [langSortation] - Priority of language codes.\n */\n\n/**\n * Class with a name in different languages.\n */\nexport class Named {\n  \n  /**\n   * @param {module:meteoJS/base/named~options} [options] - Options.\n   */\n  constructor({ name = undefined, names = {}, langSortation = [] } = {}) {\n    /**\n     * @type undefined|string\n     * @private\n     */\n    this._name = name;\n    \n    /**\n     * @type Object<string,string>\n     * @private\n     */\n    this._names = names;\n    \n    /**\n     * @type string[]\n     * @private\n     */\n    this._langSortation = langSortation;\n  }\n  \n  /**\n   * Default name.\n   * \n   * @type {string}\n   */\n  get name() {\n    return this.getDefaultName();\n  }\n  set name(name) {\n    this._name = name;\n  }\n  \n  /**\n   * Returns the name in the passed language.\n   * \n   * @param {string} lang - Language code.\n   * @returns {string} Name in the passed language.\n   */\n  getNameByLangNoFallback(lang) {\n    return (lang in this._names)  ? this._names[lang] : '';\n  }\n  \n  /**\n   * Sets the name of a certain language. Pass undefined to delete name.\n   * \n   * @param {string} lang - Language code.\n   * @param {string} name - Name.\n   */\n  setNameByLang(lang, name) {\n    this._names[lang] = name;\n    if (name === undefined)\n      delete this._names[lang];\n  }\n  \n  /**\n   * Default order of the languages.\n   * \n   * @type string[]\n   */\n  get langSortation() {\n    return this._langSortation;\n  }\n  set langSortation(langSortation) {\n    this._langSortation = langSortation;\n  }\n  \n  /**\n   * Default name.\n   * \n   * @returns {string}\n   * @protected\n   */\n  getDefaultName() {\n    return (this._name !== undefined) ? this._name : this.getNameByLang();\n  }\n  \n  /**\n   * Returns a name, if available in the passed language, otherwise in a\n   * fallback language.\n   * \n   * @param {string} [lang] - Language code.\n   * @param {Object} [options] - Options.\n   * @param {string[]} [options.langSortation] - Priority of language codes.\n   * @returns {string} Name in the passed or a fallback language.\n   */\n  getNameByLang(lang = undefined, { langSortation = undefined } = {}) {\n    let lS =\n      (langSortation === undefined) ? this._langSortation : langSortation;\n    let langs = Object.keys(this._names);\n    if (langs.length < 1)\n      return (this._name === undefined) ? '' : this._name;\n    return this._names[langs.sort((a, b) => {\n      if (a == lang) return -1;\n      if (b == lang) return 1;\n      let ia = lS.indexOf(a);\n      let ib = lS.indexOf(b);\n      if (ib < 0) return 0;\n      if (ia < 0) return 1;\n      return ia < ib ? -1 : ia == ib ? 0 : 1;\n    })[0]];\n  }\n}\nexport default Named;","/**\n * @module meteoJS/base/uniquenamed\n */\nimport Unique from './Unique.js';\nimport Named from './Named.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/base/named~options}\n *   module:meteoJS/base/uniquenamed~options\n * @property {mixed} [id] - Id.\n */\n\n/**\n * Class that describe objects with an unique id and with names.\n * \n * @extends module:meteoJS/base/unique.Unique\n * @extends module:meteoJS/base/named.Named\n */\nexport class UniqueNamed extends Named {\n  \n  /**\n   * @param {module:meteoJS/base/uniquenamed~options} [options] - Options.\n   */\n  constructor({ id, name = undefined, names = {}, langSortation = [] } = {}) {\n    super({\n      name,\n      names,\n      langSortation\n    });\n    \n    Object.defineProperty(this, 'id',\n      Object.getOwnPropertyDescriptor(Unique.prototype, 'id'));\n    // constructor code of Unique\n    this._id = id;\n  }\n  \n  /**\n   * @override\n   */\n  setId(id) {\n    Unique.prototype.setId.call(this, id);\n  }\n  \n  /**\n   * @override\n   */\n  getDefaultName() {\n    return (this._name !== undefined)\n      ? this._name\n      : (Object.keys(this._names).length > 0)\n        ? this.getNameByLang()\n        : (this._id === undefined) ? '' : this._id;\n  }\n}\nexport default UniqueNamed;","/**\n * @module meteoJS/modelviewer/variable\n */\nimport UniqueNamed from '../base/UniqueNamed.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/base/uniquenamed~options}\n *   module:meteoJS/modelviewer/variable~options\n * @param {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n *   [variableCollection] - Belongs to this VariableCollection.\n */\n\n/**\n * @classdesc Object for e.g. a model, a runtime or a field.\n */\nexport class Variable extends UniqueNamed {\n  \n  /**\n   * @param {module:meteoJS/modelviewer/variable~options} [options] - Options.\n   */\n  constructor({ id,\n    name = undefined,\n    names = {},\n    langSortation = [],\n    variableCollection } = {}) {\n    super({\n      id,\n      name,\n      names,\n      langSortation\n    });\n    \n    /**\n     * @type undefined|module:meteoJS/modelviewer/variableCollection.VariableCollection\n     * @private\n     */\n    this._variableCollection = variableCollection;\n  }\n  \n  /**\n   * This Variable belongs to this VariableCollection.\n   * @type undefined|module:meteoJS/modelviewer/variableCollection.VariableCollection\n   */\n  get variableCollection() {\n    return this._variableCollection;\n  }\n  set variableCollection(variableCollection) {\n    this._variableCollection = variableCollection;\n  }\n}\nexport default Variable;","/**\n * @module meteoJS/modelviewer/timeVariable\n */\nimport Variable from './Variable.js';\n\n/**\n * Options for TimeVariable constructor\n * \n * @typedef {module:meteoJS/base/uniquenamed~options}\n *   module:meteoJS/modelviewer/timeVariable~options\n * @param {Date|undefined} [datetime] - Datetime.\n */\n\n/**\n * @classdesc Class for something representing a time, e.g. runtime or offset.\n */\nexport class TimeVariable extends Variable {\n  \n  /**\n   * @param {module:meteoJS/modelviewer/timeVariable~options} options - Options.\n   */\n  constructor({ id,\n    name = undefined,\n    names = {},\n    langSortation = [],\n    datetime = undefined } = {}) {\n    super({\n      id,\n      name,\n      names,\n      langSortation\n    });\n    \n    /**\n     * @type Date|undefined\n     * @private\n     */\n    this._datetime = (this.id === undefined) ? undefined : new Date(this.id);\n    \n    if (datetime !== undefined)\n      this.datetime = datetime;\n  }\n  \n  /**\n   * @override\n   */\n  setId(id) {\n    this._datetime = (id === undefined) ? undefined : new Date(id);\n  }\n  \n  /**\n   * @type Date|undefined\n   */\n  get datetime() {\n    return this._datetime;\n  }\n  set datetime(datetime) {\n    this._datetime = datetime;\n    this._id = (datetime !== undefined) ? datetime.valueOf() : undefined;\n  }\n}\nexport default TimeVariable;","/**\n * @module meteoJS/modelviewer/variableCollection\n */\nimport Variable from './Variable.js';\nimport Unique from '../base/Unique.js';\nimport UniqueNamed from '../base/UniqueNamed.js';\nimport NamedCollection from '../base/NamedCollection.js';\n\n/**\n * Triggered on adding a Variable to collection.\n * \n * @event module:meteoJS/modelviewer/variableCollection#add:variable\n * @param {module:meteoJS/modelviewer/variable.Variable} variable -\n *   Added variable.\n */\n\n/**\n * Triggered on removing a Variable from collection.\n * \n * @event module:meteoJS/modelviewer/variableCollection#remove:variable\n * @param {module:meteoJS/modelviewer/variable.Variable} variable -\n *   Removed variable.\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/base/namedCollection~options}\n *   module:meteoJS/modelviewer/variableCollection~options\n */\n\n/**\n * @classdesc A collection of Variable-objects. It also defines a hierarchy\n *   of the collections. So a VariableCollection could have children and\n *   parents. A variable object can only belong to one collection.\n * @augments module:meteoJS/base/unique.Unique\n * @fires module:meteoJS/modelviewer/variableCollection#add:variable\n * @fires module:meteoJS/modelviewer/variableCollection#remove:variable\n */\nexport class VariableCollection extends NamedCollection {\n  \n  /**\n   * @param {module:meteoJS/modelviewer/variableCollection~options} options\n   *   - Options.\n   */\n  constructor({ id,\n    fireReplace=true,\n    fireAddRemoveOnReplace=false,\n    appendOnReplace=true,\n    sortFunction,\n    names,\n    langSortation } = {}) {\n    super({\n      emptyObjectMaker: () => { return new Variable(); },\n      fireReplace,\n      fireAddRemoveOnReplace,\n      appendOnReplace,\n      sortFunction,\n      names,\n      langSortation\n    });\n    \n    Object.defineProperty(this, 'id',\n      Object.getOwnPropertyDescriptor(Unique.prototype, 'id'));\n    // constructor code of Unique\n    this._id = id;\n    \n    // ID as name\n    Object.defineProperty(this, 'getDefaultName',\n      Object.getOwnPropertyDescriptor(UniqueNamed.prototype, 'getDefaultName'));\n    \n    /**\n     * @type undefined|module:meteoJS/modelviewer/node.Node\n     * @private\n     */\n    this._node = undefined;\n    \n    this.on('add:item', item => {\n      if (item.variableCollection !== undefined)\n        item.variableCollection.remove(item);\n      item.variableCollection = this;\n      this.trigger('add:variable', item);\n    });\n    this.on('remove:item', item => this.trigger('remove:variable', item));\n  }\n  \n  /**\n   * @override\n   */\n  setId(id) {\n    Unique.prototype.setId.call(this, id);\n  }\n  \n  /**\n   * Variables contained by this collection.\n   * \n   * @type module:meteoJS/modelviewer/variable.Variable[]\n   */\n  get variables() {\n    return this.items;\n  }\n  \n  /**\n   * Alias of getItemById.\n   * \n   * @param {mixed} id ID.\n   * @returns {module:meteoJS/modelviewer/variable.Variable} Variable.\n   */\n  getVariableById(id) {\n    return this.getItemById(id);\n  }\n  \n  /**\n   * If defined, this VariableCollection belongs to this node.\n   * \n   * @type undefined|module:meteoJS/modelviewer/node.Node\n   */\n  get node() {\n    return this._node;\n  }\n  set node(node) {\n    this._node = node;\n  }\n}\nexport default VariableCollection;","/**\n * @module meteoJS/base/namedCollection\n */\nimport Collection from './Collection.js';\nimport Named from './Named.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/base/collection~options}\n *   module:meteoJS/base/namedCollection~options\n * @property {string} [name] - Default name.\n * @property {Object.<string,string>} [names] - Names.\n * @property {string[]} [langSortation] - Priority of language codes.\n */\n\n/**\n * Collection-class with i18n names.\n * \n * @extends module:meteoJS/base/collection.Collection\n * @extends module:meteoJS/base/named.Named\n */\nexport class NamedCollection extends Collection {\n  \n  /**\n   * @param {module:meteoJS/base/namedCollection~options} options - Options.\n   */\n  constructor({ fireReplace=true,\n    fireAddRemoveOnReplace=false,\n    appendOnReplace=true,\n    sortFunction,\n    emptyObjectMaker,\n    name = undefined,\n    names = {},\n    langSortation = []\n  } = {}) {\n    super({\n      fireReplace,\n      fireAddRemoveOnReplace,\n      appendOnReplace,\n      sortFunction,\n      emptyObjectMaker\n    });\n    \n    Object.defineProperty(this, 'name',\n      Object.getOwnPropertyDescriptor(Named.prototype, 'name'));\n    Object.getPrototypeOf(this).getDefaultName = Named.prototype.getDefaultName;\n    Object.getPrototypeOf(this).getNameByLang = Named.prototype.getNameByLang;\n    Object.getPrototypeOf(this).setNameByLang = Named.prototype.setNameByLang;\n    Object.getPrototypeOf(this).getNameByLangNoFallback =\n      Named.prototype.getNameByLangNoFallback;\n    // Named constructor code\n    /**\n     * @type undefined|string\n     * @private\n     */\n    this._name = name;\n    \n    /**\n     * @type Object<string,string>\n     * @private\n     */\n    this._names = names;\n    \n    /**\n     * @type string[]\n     * @private\n     */\n    this._langSortation = langSortation;\n  }\n}\nexport default NamedCollection;","/**\n * @module meteoJS/modelviewer/node\n */\nimport addEventFunctions from '../Events.js';\n\n/**\n * Triggered on append of a child node.\n * \n * @event module:meteoJS/modelviewer/node#append:child\n * @param {module:meteoJS/modelviewer/node.Node} node - Appended child node.\n */\n\n/**\n * A node has always a correspondent VariableCollection. With the node objects\n * a hierarchy of the collections is build up. This hierarchy is mainly used\n * to achieve a good user experience. This way, the menus in the\n * {@link module:meteoJS/modelviewer/container.Container|modelviewer-container}\n * could be setup to present the user only available fields or levels or only\n * activate buttons which are available for a certain model and run.\n * Additionally a node contains a list of resources, this is used internally\n * in {@link module:meteoJS/modelviewer/resources.Resources}.\n * \n * @fires module:meteoJS/modelviewer/node#append:child\n */\nexport class Node {\n  \n  /**\n   * @param {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n   *   variableCollection\n   *   This node belongs to this collection.\n   */\n  constructor(variableCollection) {\n    \n    /**\n     * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n     * @private\n     */\n    this._variableCollection = variableCollection;\n    variableCollection.node = this;\n    \n    /**\n     * @type module:meteoJS/modelviewer/node.Node[]\n     * @private\n     */\n    this._parents = [];\n    \n    /**\n     * @type module:meteoJS/modelviewer/node.Node[]\n     * @private\n     */\n    this._children = [];\n    \n    /**\n     * @type Map<module:meteoJS/modelviewer/variableCollection.VariableCollection,\n     *           Set<module:meteoJS/modelviewer/resource.Resource>>\n     * @private\n     */\n    this._resources = new Map();\n  }\n  \n  /**\n   * VariableCollection correspondent to this node.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   */\n  get variableCollection() {\n    return this._variableCollection;\n  }\n  \n  /**\n   * Parent nodes.\n   * \n   * @type module:meteoJS/modelviewer/node.Node[]\n   */\n  get parents() {\n    return this._parents;\n  }\n  \n  /**\n   * Child nodes.\n   * \n   * @type module:meteoJS/modelviewer/node.Node[]\n   */\n  get children() {\n    return this._children;\n  }\n  \n  /**\n   * Appends a node as a child.\n   * \n   * @param {...module:meteoJS/modelviewer/node.Node} nodes - Node to append.\n   * @returns {module:meteoJS/modelviewer/node.Node} This.\n   * @fires module:meteoJS/modelviewer/node#append:child\n   */\n  appendChild(...nodes) {\n    nodes.forEach(node => {\n      this._children.push(node);\n      node._addParent(this);\n      this.trigger('append:child', node);\n    });\n    return this;\n  }\n  \n  /**\n   * Adds a parent node.\n   * \n   * @param {module:meteoJS/modelviewer/node.Node} node - Node to add.\n   * @package\n   */\n  _addParent(node) {\n    this._parents.push(node);\n  }\n  \n  /**\n   * All contained resources.\n   * \n   * @type module:meteoJS/modelviewer/resource.Resource[]\n   * @package\n   */\n  get resources() {\n    let result = new Set();\n    for (let resources of this._resources.values()) {\n      for (let r of resources.values())\n        result.add(r);\n    }\n    return [...result];\n  }\n  \n  /**\n   * Append resources.\n   * \n   * @param {...module:meteoJS/modelviewer/resource.Resource} resources\n   *   Resources.\n   * @returns {integer} Count of really added resources.\n   * @package\n   */\n  append(...resources) {\n    let addedCount = 0;\n    resources.forEach(resource => {\n      let variable =\n        resource.getVariableByVariableCollection(this.variableCollection);\n      /* Only append resources, that have variables which belongs to node's\n       * collection.\n       */\n      if (variable.id === undefined)\n        return;\n      resource.variables.forEach(variable => {\n        if (!this._resources.has(variable.variableCollection))\n          this._resources.set(variable.variableCollection, new Set());\n        if (!this._resources.get(variable.variableCollection).has(resource))\n          addedCount++;\n        this._resources.get(variable.variableCollection).add(resource);\n      });\n    });\n    return addedCount;\n  }\n  \n  /**\n   * Removes resources.\n   * \n   * @param {...module:meteoJS/modelviewer/resource.Resource} resources\n   *   Resources.\n   * @returns {integer} Count of really removed resources.\n   * @package\n   */\n  remove(...resources) {\n    let removedCount = 0;\n    resources.forEach(resource => {\n      resource.variables.forEach(variable => {\n        if (this._resources.has(variable.variableCollection))\n          if (this._resources.get(variable.variableCollection).delete(resource))\n            removedCount++;\n      });\n    });\n    return removedCount;\n  }\n  \n  /**\n   * Returns all or a part of the resources contained in this node. The returned\n   * resources are defined by all of the passed variables.\n   * \n   * @param {boolean} [exactlyMatch=false] - Only return resources, which are\n   *   defined exactly by the passed variables.\n   * @param {...module:meteoJS/modelviewer/variable.Variable} variables\n   *   Variables.\n   * @returns {module:meteoJS/modelviewer/resource.Resource[]} Resources.\n   */\n  getResourcesByVariables(...variables) {\n    let exactlyMatch = false;\n    if (variables.length &&\n        typeof variables[0] === 'boolean')\n      exactlyMatch = variables.shift();\n    \n    if (exactlyMatch && variables.length == 0)\n      return [];\n    \n    return this.resources.filter(resource => {\n      return resource.isDefinedBy(exactlyMatch, ...variables);\n    });\n  }\n}\naddEventFunctions(Node.prototype);\nexport default Node;","/**\n * @module meteoJS/modelviewer/resource\n */\nimport Variable from './Variable.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/modelviewer/resource~options\n * @param {module:meteoJS/modelviewer/variable.Variable[]} [variables] -\n *   Variables, which define this resource uniquely.\n * @param {Date} [datetime] - Datetime, ignored if run and offset are defined.\n * @param {Date} [run] - Runtime.\n * @param {integer} [offset] - Offset in seconds.\n */\n\n/**\n * @classdesc Class to describe a data resource like a modelplot or a\n *   sounding data. The resource must be defined uniquely by several variables\n *   (like model, runtime, …). You should not define the resource by\n *   several variables of the same collection.\n * @abstract\n */\nexport class Resource {\n  \n  /**\n   * @param {module:meteoJS/modelviewer/resource~options} [options] - Options.\n   */\n  constructor({ variables = [],\n    datetime = undefined,\n    run = undefined,\n    offset = undefined } = {}) {\n    /**\n     * @type Set<module:meteoJS/modelviewer/variable.Variable>\n     * @private\n     */\n    this._variables = new Set;\n    variables.forEach(variable => this._variables.add(variable));\n    \n    /**\n     * @type Date|undefined\n     * @private\n     */\n    this._datetime = datetime;\n    \n    /**\n     * @type undefined|Date\n     */\n    this._run = run;\n    \n    /**\n     * @type undefined|integer\n     */\n    this._offset = offset;\n    \n    this._updateDatetime();\n  }\n  \n  /**\n   * Variable objects, which define this resource. Like model, run, offset,…\n   * \n   * @type module:meteoJS/modelviewer/variable.Variable[]\n   * @readonly\n   */\n  get variables() {\n    return [...this._variables];\n  }\n  \n  /**\n   * Resource is valid for this datetime. If undefined, than the resource is\n   * not only valid at one datetime.\n   * \n   * @type Date|undefined\n   */\n  get datetime() {\n    return this._datetime;\n  }\n  set datetime(datetime) {\n    this._datetime = datetime;\n  }\n  \n  /**\n   * Runtime.\n   * \n   * @type Date|undefined\n   */\n  get run() {\n    return this._run;\n  }\n  set run(run) {\n    this._run = run;\n    this._updateDatetime();\n  }\n  \n  /**\n   * Offset.\n   * \n   * @type integer|undefined\n   */\n  get offset() {\n    return this._offset;\n  }\n  set offset(offset) {\n    this._offset = offset;\n    this._updateDatetime();\n  }\n  \n  /**\n   * Returns the variable-object that is part of the definition of this resource\n   * and contains to the passed collection. If you define the resource by\n   * several variables of the same variable collection, it is not defined\n   * which variable is returned.\n   * \n   * @param {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n   *   variableCollection - VariableCollection.\n   * @returns {module:meteoJS/modelviewer/variable.Variable}\n   */\n  getVariableByVariableCollection(variableCollection) {\n    let result = undefined;\n    this.variables.forEach(variable => {\n      if (variable.variableCollection === variableCollection)\n        result = variable;\n    });\n    return (result === undefined) ? new Variable() : result;\n  }\n  \n  /**\n   * Returns if the passed Variable-objects all define this resource.\n   * \n   * @param {boolean} [exactlyMatch] - Only return true, if the passed\n   *   variables exactly define the resource.\n   * @param {...module:meteoJS/modelviewer/variable.Variable} variables\n   *   Variables.\n   * @returns {boolean} All passed variables defines the resource.\n   */\n  isDefinedBy(...variables) {\n    let exactlyMatch = false;\n    if (variables.length &&\n        typeof variables[0] === 'boolean')\n      exactlyMatch = variables.shift();\n    if (!exactlyMatch)\n      return variables.filter(v => !this._variables.has(v)).length == 0;\n    \n    let result = true;\n    let variablesSet = new Set(variables);\n    for (let variable of variablesSet)\n      if (!this._variables.has(variable))\n        result = false;\n    for (let variable of this._variables)\n      if (!variablesSet.has(variable))\n        result = false;\n    return result;\n  }\n  \n  /**\n   * Returns if a Variable-object of the passed collection defines this\n   * resource.\n   * \n   * @param {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n   *   variableCollection - VariableCollection.\n   * @returns {boolean} A variable of the collection defines the resource.\n   */\n  isDefinedByVariableOf(variableCollection) {\n    let result = false;\n    variableCollection.variables.forEach(variable => {\n      if (this.isDefinedBy(variable))\n        result = true;\n    });\n    return result;\n  }\n  \n  /**\n   * Sets datetime according to run and offset.\n   * \n   * @private\n   */\n  _updateDatetime() {\n    if (this._run !== undefined &&\n        this._offset !== undefined)\n      this.datetime = new Date(this._run.valueOf() + this._offset * 1000);\n  }\n}\nexport default Resource;","/**\n * @module meteoJS/modelviewer/resource/image\n */\nimport Resource from '../Resource.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/modelviewer/resource~options}\n *   module:meteoJS/modelviewer/resource/image~options\n * @param {string} [url] - URL to the Image.\n */\n\n/**\n * @classdesc Class to describe an image resource.\n */\nexport class Image extends Resource {\n  \n  /**\n   * @param {module:meteoJS/modelviewer/resource/image~options} [options]\n   *   Options.\n   */\n  constructor({ variables = [],\n    datetime = undefined,\n    run = undefined,\n    offset = undefined,\n    url = undefined /*, mimetype, ...*/ } = {}) {\n    super({\n      variables,\n      datetime,\n      run,\n      offset\n    });\n    \n    /**\n     * @type string\n     * @private\n     */\n    this._url = url;\n  }\n  \n  /**\n   * URL to the Image.\n   * \n   * @type string\n   */\n  get url() {\n    return this._url;\n  }\n}\nexport default Image;","/**\n * @module meteoJS/sounding/parcel\n */\nimport Unique from '../base/Unique.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/sounding/parcel~options\n * @param {undefined|number} [pres=undefined]\n *   Parcel beginning pressure (mb).\n * @param {undefined|number} [tmpc=undefined]\n *   Parcel beginning temperature (C).\n * @param {undefined|number} [dwpc=undefined]\n *   Parcel beginning dewpoint (C).\n * @param {undefined|number} [ptrace=undefined]\n *   Parcel trace pressure (mb).\n * @param {undefined|number} [ttrace=undefined]\n *   Parcel trace temperature (C).\n * @param {undefined|number} [blayer=undefined]\n *   Pressure of the bottom of the layer the parcel is lifted (mb).\n * @param {undefined|number} [tlayer=undefined]\n *   Pressure of the top of the layer the parcel is lifted (mb).\n * @param {undefined|number} [lclpres=undefined]\n *   Parcel LCL (lifted condensation level) pressure (mb).\n * @param {undefined|number} [lclhght=undefined]\n *   Parcel LCL height (m AGL).\n * @param {undefined|number} [lfcpres=undefined]\n *   Parcel LFC (level of free convection) pressure (mb).\n * @param {undefined|number} [lfchght=undefined]\n *   Parcel LFC height (m AGL).\n * @param {undefined|number} [elpres=undefined]\n *   Parcel EL (equilibrium level) pressure (mb).\n * @param {undefined|number} [elhght=undefined]\n *   Parcel EL height (m AGL).\n * @param {undefined|number} [mplpres=undefined]\n *   Maximum Parcel Level (mb).\n * @param {undefined|number} [mplhght=undefined]\n *   Maximum Parcel Level (m AGL).\n * @param {undefined|number} [bplus=undefined]\n *   Parcel CAPE (J/kg).\n * @param {undefined|number} [bminus=undefined]\n *   Parcel CIN (J/kg).\n * @param {undefined|number} [bfzl=undefined]\n *   Parcel CAPE up to freezing level (J/kg).\n * @param {undefined|number} [b3km=undefined]\n *   Parcel CAPE up to 3 km (J/kg).\n * @param {undefined|number} [b6km=undefined]\n *   Parcel CAPE up to 6 km (J/kg).\n * @param {undefined|number} [p0c=undefined]\n *   Pressure value at 0 C  (mb).\n * @param {undefined|number} [pm10c=undefined]\n *   Pressure value at -10 C (mb).\n * @param {undefined|number} [pm20c=undefined]\n *   Pressure value at -20 C (mb).\n * @param {undefined|number} [pm30c=undefined]\n *   Pressure value at -30 C (mb).\n * @param {undefined|number} [hght0c=undefined]\n *   Height value at 0 C (m AGL).\n * @param {undefined|number} [hghtm10c=undefined]\n *   Height value at -10 C (m AGL).\n * @param {undefined|number} [hghtm20c=undefined]\n *   Height value at -20 C (m AGL).\n * @param {undefined|number} [hghtm30c=undefined]\n *   Height value at -30 C (m AGL).\n * @param {undefined|number} [wm10c=undefined]\n *   Wet bulb velocity at -10 C.\n * @param {undefined|number} [wm20c=undefined]\n *   Wet bulb velocity at -20 C.\n * @param {undefined|number} [wm30c=undefined]\n *   Wet bulb at -30 C.\n * @param {undefined|number} [li5=undefined]\n *   Lifted Index at 500 mb (C).\n * @param {undefined|number} [li3=undefined]\n *   Lifted Index at 300 mb (C).\n * @param {undefined|number} [brnshear=undefined]\n *   Bulk Richardson Number Shear.\n * @param {undefined|number} [brnu=undefined]\n *   Bulk Richardson Number U (kts).\n * @param {undefined|number} [brnv=undefined]\n *   Bulk Richardson Number V (kts).\n * @param {undefined|number} [brn=undefined]\n *   Bulk Richardson Number (unitless).\n * @param {undefined|number} [limax=undefined]\n *   Maximum Lifted Index (C).\n * @param {undefined|number} [limaxpres=undefined]\n *   Pressure at Maximum Lifted Index (mb).\n * @param {undefined|number} [cap=undefined]\n *   Cap Strength (C).\n * @param {undefined|number} [cappres=undefined]\n *   Cap strength pressure (mb).\n * @param {undefined|number} [bmin=undefined]\n *   Buoyancy minimum in profile (C).\n * @param {undefined|number} [bminpres=undefined]\n *   Buoyancy minimum pressure (mb).\n */\n\n/**\n * Class representing a parcel lifting.\n * \n * @extends module:meteoJS/base/unique.Unique\n */\nexport class Parcel extends Unique {\n  \n  /**\n   * @param {module:meteoJS/sounding/parcel~options} [options] - Options.\n   */\n  constructor({\n    id = undefined,\n    pres = undefined,\n    tmpc = undefined,\n    dwpc = undefined,\n    ptrace = undefined,\n    ttrace = undefined,\n    blayer = undefined,\n    tlayer = undefined,\n    lclpres = undefined,\n    lclhght = undefined,\n    lfcpres = undefined,\n    lfchght = undefined,\n    elpres = undefined,\n    elhght = undefined,\n    mplpres = undefined,\n    mplhght = undefined,\n    bplus = undefined,\n    bminus = undefined,\n    bfzl = undefined,\n    b3km = undefined,\n    b6km = undefined,\n    p0c = undefined,\n    pm10c = undefined,\n    pm20c = undefined,\n    pm30c = undefined,\n    hght0c = undefined,\n    hghtm10c = undefined,\n    hghtm20c = undefined,\n    hghtm30c = undefined,\n    wm10c = undefined,\n    wm20c = undefined,\n    wm30c = undefined,\n    li5 = undefined,\n    li3 = undefined,\n    brnshear = undefined,\n    brnu = undefined,\n    brnv = undefined,\n    limax = undefined,\n    limaxpres = undefined,\n    cap = undefined,\n    cappres = undefined,\n    bmin = undefined,\n    bminpres = undefined\n  } = {}) {\n    super({ id });\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.pres = pres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.tmpc = tmpc;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.dwpc = dwpc;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.ptrace = ptrace;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.ttrace = ttrace;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.blayer = blayer;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.tlayer = tlayer;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.lclpres = lclpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.lclhght = lclhght;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.lfcpres = lfcpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.lfchght = lfchght;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.elpres = elpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.elhght = elhght;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.mplpres = mplpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.mplhght = mplhght;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bplus = bplus;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bminus = bminus;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bfzl = bfzl;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.b3km = b3km;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.b6km = b6km;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.p0c = p0c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.pm10c = pm10c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.pm20c = pm20c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.pm30c = pm30c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.hght0c = hght0c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.hghtm10c = hghtm10c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.hghtm20c = hghtm20c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.hghtm30c = hghtm30c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.wm10c = wm10c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.wm20c = wm20c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.wm30c = wm30c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.li5 = li5;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.li3 = li3;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.brnshear = brnshear;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.brnu = brnu;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.brnv = brnv;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.limax = limax;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.limaxpres = limaxpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.cap = cap;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.cappres = cappres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bmin = bmin;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bminpres = bminpres;\n  }\n}\nexport default Parcel;","/**\n * @module meteoJS/sounding\n */\nimport { altitudeISAByPres,\n  potentialTempByTempAndPres,\n  equiPotentialTempByTempAndDewpointAndPres,\n  dewpointByHMRAndPres } from './calc.js';\nimport Collection from './base/Collection.js';\nimport Parcel from './sounding/Parcel.js';\n\n/**\n * Data for a sounding level.\n * Nomenclature is analogue to the SHARPpy project (sharppy/sharptab/profile.py)\n * Exception for some units:\n * * Windspeed always in m/s\n * * Temperature in Kelvin\n * * Relative humidity unitless\n * \n * @typedef {Object} module:meteoJS/sounding~levelData\n * @param {float} pres Pressure level [hPa].\n * @param {float|undefined} [hght] Altitude above sealevel [m].\n * @param {float|undefined} [tmpk] Temperature [K].\n * @param {float|undefined} [dwpk] Dewpoint-temperature [K].\n * @param {float|undefined} [wdir] Wind direction [°].\n * @param {float|undefined} [wspd] Absolute windspeed [m/s].\n * @param {float|undefined} [u] Windspeed in U-direction [m/s].\n * @param {float|undefined} [v] Windspeed in V-direction [m/s].\n * @param {float|undefined} [relh] Relative humidity [].\n * @param {float|undefined} [mixr] Mixing ration [g/kg].\n * @param {float|undefined} [theta] Isentropic temperature [K].\n * @param {float|undefined} [thetae] Equivalent isentropic temperature [K].\n * @param {float|undefined} [wetbulb] Wetbulb isentropic temperature [K].\n * @param {float|undefined} [vtmp] Virtual temperature [K].\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/sounding~options\n * @param {boolean} [calcMissing] - Calculate missing data in each level.\n */\n\n/**\n * Class represents an atmospheric (radio-)sounding.\n */\nexport class Sounding {\n  \n  /**\n   * @param {module:meteoJS/sounding~options} [options] - Options.\n   */\n  constructor({\n    calcMissing = false,\n    parcels = []\n  } = {}) {\n    this.options = {\n      calcMissing\n    };\n    this.levels = {};\n    \n    /**\n     * @type module:meteoJS/base/collection.Collection\n     * @private\n     */\n    this._parcelCollection = new Collection({\n      fireAddRemoveOnReplace: true,\n      fireReplace: false,\n      emptyObjectMaker: () => new Parcel()\n    });\n    this._parcelCollection.append(...parcels);\n  }\n  \n  /**\n   * @type module:meteoJS/base/collection.Collection\n   * @public\n   * @readonly\n   */\n  get parcelCollection() {\n    return this._parcelCollection;\n  }\n  \n  /**\n   * Adds/replaces sounding data.\n   * \n   * @param {module:meteoJS/sounding~levelData[]} levelsData\n   *   Array with data at different levels.\n   * @param {module:meteoJS/sounding~options} [options] - Options.\n   * @returns {module:meteoJS/sounding.Sounding} This.\n   */\n  addLevels(levelsData, options) {\n    levelsData.forEach(function (levelData) {\n      this.addLevel(levelData, options);\n    }, this);\n    return this;\n  }\n\n  /**\n   * Adds/replaces Data for a certain level.\n   * \n   * @param {module:meteoJS/sounding~levelData} levelData - Data to add.\n   * @param {module:meteoJS/sounding~options} [options] - Options.\n   * @returns {module:meteoJS/sounding.Sounding} This.\n   */\n  addLevel(levelData, { calcMissing } = {}) {\n    calcMissing = calcMissing ? calcMissing : this.options.calcMissing;\n    if ('pres' in levelData &&\n      levelData.pres !== undefined) {\n      if (calcMissing)\n        levelData = this.calculateMissingData(levelData);\n      this.levels[levelData.pres] = levelData;\n    }\n    return this;\n  }\n\n  /**\n   * Calculates different parameters, if missing.\n   * \n   * @param {module:meteoJS/sounding~levelData} d - Data.\n   * @returns {module:meteoJS/sounding~levelData} Adjusted data.\n   */\n  calculateMissingData({ pres, hght,\n    u, v, wdir, wspd,\n    tmpk, dwpk,\n    relh, mixr, theta, thetae, wetbulb, vtmp }) {\n    let d = { pres, hght,\n      u, v, wdir, wspd,\n      tmpk, dwpk,\n      relh, mixr, theta, thetae, wetbulb, vtmp };\n  \n    // Height\n    if (d.hght === undefined)\n      d.hght = altitudeISAByPres(d.pres);\n  \n    // Wind\n    if (d.u === undefined &&\n      d.v === undefined &&\n      d.wdir !== undefined &&\n      d.wspd !== undefined) {\n      d.u = d.wspd * Math.sin(d.wdir / 180 * Math.PI);\n      d.v = d.wspd * Math.cos(d.wdir / 180 * Math.PI);\n    }\n    else if (d.u !== undefined &&\n           d.v !== undefined &&\n           d.wdir === undefined &&\n           d.wspd === undefined) {\n      d.wspd = Math.sqrt(Math.pow(d.u, 2) + Math.pow(d.v, 2));\n      d.wdir = Math.arctan(d.u/d.v) / Math.PI * 180;\n    }\n  \n    // Humidity\n    if (d.tmpk !== undefined &&\n      d.dwpk !== undefined) {\n    //if (d.relh === undefined)\n    //  meteoJS.calc.;\n    //if (d.mixr === undefined)\n    //  d.mixr = meteoJS.calc;\n      if (d.theta === undefined)\n        d.theta = potentialTempByTempAndPres(d.tmpk, d.pres);\n      if (d.thetae === undefined)\n        d.thetae =\n        equiPotentialTempByTempAndDewpointAndPres(d.tmpk, d.dwpk, d.pres);\n    }\n    else if (d.mixr !== undefined) {\n      if (d.dwpk === undefined)\n        d.dwpk = dewpointByHMRAndPres(d.mixr, d.pres);\n    }\n  \n    return d;\n  }\n\n  /**\n   * Removes the Data for a certain level (if existing).\n   * \n   * @param {float} pres - Remove the data at this Level [hPa].\n   * @returns {module:meteoJS/sounding.Sounding} this.\n   */\n  removeLevel(pres) {\n    if (pres in this.levels)\n      delete this.levels[pres];\n    return this;\n  }\n\n  /**\n   * Get the data for a specific level. Returns the levelData as passed to the\n   * constructor or addLevel.\n   * \n   * @param {float} pres - Level [hPa].\n   * @returns {module:meteoJS/sounding~levelData|undefined}\n   *   Data at a level, undefined if no data available.\n   */\n  getData(pres) {\n    return (pres in this.levels) ? \n      this.levels[pres] :\n      {\n        pres: undefined,\n        hght: undefined,\n        tmpk: undefined,\n        dwpk: undefined,\n        wdir: undefined,\n        wspd: undefined,\n        u: undefined,\n        v: undefined,\n        relh: undefined,\n        mixr: undefined,\n        theta: undefined,\n        thetae: undefined,\n        wetbulb: undefined,\n        vtmp: undefined\n      };\n  }\n\n  /**\n   * Get data for all defined levels. Upward sorted.\n   * \n   * @returns {module:meteoJS/sounding~levelData[]} Array of all the data.\n   */\n  getLevels() {\n    return Object\n      .keys(this.levels)\n      .map(function (pres) { return +pres; })\n      .sort(function (a,b) { return a-b; });\n  }\n\n  /**\n   * Get nearest level [hPa] with data.\n   * \n   * @param {float} pres Pressure [hPa].\n   * @returns {float|undefined} Level with data or undefined. [hPa]\n   */\n  getNearestLevel(pres) {\n    if (Object.keys(this.levels).length < 1)\n      return undefined;\n    return Object\n      .keys(this.levels)\n      .sort(function (levelA, levelB) {\n        return Math.abs(levelA-pres) - Math.abs(levelB-pres);\n      }).shift();\n  }\n}\nexport default Sounding;","/**\n * @module meteoJS/modelviewer/resource/sounding\n */\nimport Resource from '../Resource.js';\nimport SoundingData from '../../Sounding.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/modelviewer/resource~options}\n *   module:meteoJS/modelviewer/resource/sounding~options\n * @param {module:meteoJS/sounding.Sounding} [sounding] - Sounding data.\n */\n\n/**\n * @classdesc Class to describe an sounding resource.\n */\nexport class Sounding extends Resource {\n  \n  /**\n   * @param {module:meteoJS/modelviewer/resource/sounding~options} [options]\n   *   Options.\n   */\n  constructor({ variables = [],\n    datetime = undefined,\n    run = undefined,\n    offset = undefined,\n    sounding = undefined } = {}) {\n    super({\n      variables,\n      datetime,\n      run,\n      offset\n    });\n    \n    /**\n     * @type undefined|module:meteoJS/sounding.Sounding\n     * @private\n     */\n    this._sounding = sounding;\n  }\n  \n  /**\n   * Sounding data.\n   * \n   * @type module:meteoJS/sounding.Sounding\n   */\n  get sounding() {\n    return (this._sounding === undefined) ? new SoundingData() : this._sounding;\n  }\n  set sounding(sounding) {\n    this._sounding = sounding;\n  }\n}\nexport default Sounding;","/**\n * @module meteoJS/modelviewer/resources\n */\nimport addEventFunctions from '../Events.js';\nimport Image from './resource/Image.js';\nimport VariableCollection from './VariableCollection.js';\nimport Node from './Node.js';\n\n/**\n * Triggered on adding and removing Resource-Objects.\n * \n * @event module:meteoJS/modelviewer/resources#change:resources\n * @type {Object}\n * @property {module:meteoJS/modelviewer/resource.Resource} [addedResources] -\n *   Added resources.\n * @property {module:meteoJS/modelviewer/resource.Resource} [removedResources] -\n *   Removed resources.\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/modelviewer/resources~options\n * @param {module:meteoJS/modelviewer/node.Node} topNode - Top level node.\n * @param {Set<module:meteoJS/modelviewer/variableCollection.VariableCollection>}\n *   timesVariableCollections - These collections group the top part of the\n *   hierarchy. For NWP, this contains  typically the model and the run\n *   collection.\n */\n\n/**\n * @classdesc Linchpin of the modelviewer. In this class every available\n *   resource is registered. Additionally requests about data per Variable can\n *   be performed, like all available run times of a model or all available\n *   fields of model, etc. The hierarchy via\n *   {@link module:meteoJS/modelviewer/node.Node|Node}\n *   has to be defined before the construction of Resources.\n * \n * @fires module:meteoJS/modelviewer/resources#change:resources\n */\nexport class Resources {\n  \n  constructor({ topNode,\n    timesVariableCollections = [] } = {}) {\n    \n    /**\n     * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n     * @private\n     */\n    this._topNode = topNode;\n    \n    /**\n     * @type Map<module:meteoJS/modelviewer/node.Node,\n     *           Set<module:meteoJS/modelviewer/variable.Variable>>\n     * @private\n     */\n    this._availableVariablesMap = new Map();\n    \n    /**\n     * @type Set<module:meteoJS/modelviewer/variableCollection.VariableCollection>\n     * @private\n     */\n    this._timesVariableCollections = timesVariableCollections;\n  }\n  \n  /**\n   * VariableCollectionNode that stand on the top of the hierarchy.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   * @readonly\n   */\n  get topNode() {\n    return this._topNode;\n  }\n  \n  /**\n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection[]\n   * @readonly\n   */\n  get variableCollections() {\n    let pushChildCollections;\n    pushChildCollections = node => {\n      node.children.forEach(n => {\n        result.push(n.variableCollection);\n        pushChildCollections(n);\n      });\n    };\n    let result = [this.topNode.variableCollection];\n    pushChildCollections(this.topNode);\n    return result;\n  }\n  \n  /**\n   * Map of nodes and their variables (contained in the variableCollection of\n   * the node). For each variable exists at least one resource in this\n   * Resources-object that is defined by this variable.\n   * \n   * @type Map<module:meteoJS/modelviewer/node.Node,\n   *           Set<module:meteoJS/modelviewer/variable.Variable>>\n   * @readonly\n   */\n  get availableVariablesMap() {\n    return this._availableVariablesMap;\n  }\n  \n  /**\n   * Append resources.\n   * \n   * @param {...module:meteoJS/modelviewer/resource.Resource} resources\n   *   Available resources.\n   * @returns {module:meteoJS/modelviewer/resources.Resources} This.\n   * @fires module:meteoJS/modelviewer/resources#change:resources\n   */\n  append(...resources) {\n    let addedResources = [];\n    resources.forEach(resource => {\n      let topNode = this._getTopNodeOfResourceDefinition(resource, this.topNode);\n      if (topNode !== undefined) {\n        let node = this._getTopMostChildWithAllVariables(new Set(resource.variables), topNode, true);\n        if (node !== undefined) {\n          let addedCount = node.append(resource);\n          if (addedCount > 0) {\n            addedResources.push(resource);\n            this._addAvailableVariablesMapByResource(resource);\n          }\n        }\n      }\n    });\n    if (addedResources.length > 0) {\n      // Debounce firing\n      if (INTERNAL_CHANGE_RESOURCES.timeoutId)\n        clearTimeout(INTERNAL_CHANGE_RESOURCES.timeoutId);\n      INTERNAL_CHANGE_RESOURCES.addedResources.push(...addedResources);\n      INTERNAL_CHANGE_RESOURCES.timeoutId = setTimeout(() => {\n        this.trigger('change:resources', {\n          addedResources: INTERNAL_CHANGE_RESOURCES.addedResources\n        });\n        INTERNAL_CHANGE_RESOURCES.addedResources = [];\n      }, 100);\n    }\n    return this;\n  }\n  \n  /**\n   * Adds variables of a resource to _availableVariablesMap.\n   * \n   * @param {module:meteoJS/modelviewer/resource.Resource} resource - Resource.\n   * @private\n   */\n  _addAvailableVariablesMapByResource(resource) {\n    resource.variables.forEach(variable => {\n      if (variable.variableCollection.node === undefined)\n        return;\n      if (!this._availableVariablesMap.has(variable.variableCollection.node))\n        this._availableVariablesMap.set(variable.variableCollection.node, new Set());\n      this._availableVariablesMap.get(variable.variableCollection.node).add(variable);\n    });\n  }\n  \n  /**\n   * Removes resources.\n   * \n   * @param {...module:meteoJS/modelviewer/resource.Resource} resources\n   *   Resources.\n   * @returns {module:meteoJS/modelviewer/resources.Resources} This.\n   * @fires module:meteoJS/modelviewer/resources#change:resources\n   */\n  remove(...resources) {\n    let removedResources = [];\n    let removedNodeResourcesMap = new Map();\n    resources.forEach(resource => {\n      let topNode = this._getTopNodeOfResourceDefinition(resource, this.topNode);\n      if (topNode !== undefined) {\n        let node = this._getTopMostChildWithAllVariables(new Set(resource.variables), topNode, true);\n        if (node !== undefined) {\n          let removedCount = node.remove(resource);\n          if (removedCount > 0) {\n            removedResources.push(resource);\n            if (!removedNodeResourcesMap.has(node))\n              removedNodeResourcesMap.set(node, new Set());\n            removedNodeResourcesMap.get(node).add(resource);\n          }\n        }\n      }\n    });\n    if (removedNodeResourcesMap.size > 0)\n      this._removeAvailableVariablesMapByResources(removedNodeResourcesMap);\n    if (removedResources.length > 0)\n      this.trigger('change:resources', { removedResources });\n    return this;\n  }\n  \n  /**\n   * Removes variables from _availableVariablesMap.\n   * Prerequisite: The resources have already to be removed of the nodes.\n   * \n   * @param {Map<module:meteoJS/modelviewer/node.Node,\n   *         Set<module:meteoJS/modelviewer/resource.Resource>>}\n   *   removedNodeResourcesMap - Map of Nodes with their removed Resources.\n   * @private\n   */\n  _removeAvailableVariablesMapByResources(removedNodeResourcesMap) {\n    let fullCheckVariables = new Set();\n    for (let [node, resourcesSet] of removedNodeResourcesMap.entries()) {\n      let variables = new Set();\n      for (let resource of resourcesSet)\n        resource.variables.forEach(variable => variables.add(variable));\n      for (let variable of variables)\n        if (node.getResourcesByVariables(variable).length == 0)\n          fullCheckVariables.add(variable);\n    }\n    for (let variable of fullCheckVariables) {\n      let node = this.getNodeByVariableCollection(variable.variableCollection);\n      if (this._collectResourcesOfNodeChildren(node, [ variable ]).length == 0)\n        if (this._availableVariablesMap.has(node))\n          this._availableVariablesMap.get(node).delete(variable);\n    }\n  }\n  \n  /**\n   * Returns a node of the hierarchy, so that all parents and itself contain\n   * all the passed variables. The returned node is the most top in hierarchy\n   * as possible. If no node is found, an empty node object is returned.\n   * \n   * @param {...module:meteoJS/modelviewer/variable.Variable} variables\n   *   Variables.\n   * @returns {module:meteoJS/modelviewer/node.Node} - Node.\n   */\n  getTopMostNodeWithAllVariables(...variables) {\n    let result =\n      this._getTopMostChildWithAllVariables(new Set(variables), this.topNode, true);\n    return (result === undefined) ? new Node(new VariableCollection()) : result;\n  }\n  \n  /**\n   * Returns first node in hierarchy that contains a VariableCollection which\n   * is part of the definition of the passed resource.\n   * \n   * @param {module:meteoJS/modelviewer/resource.Resource} resource\n   *   Resource.\n   * @param {module:meteoJS/modelviewer/node.Node} node\n   *   Search from 'node' and all the children.\n   * @returns {undefined|module:meteoJS/modelviewer/node.Node}\n   *   Node or undefined if no node is found.\n   * @private\n   */\n  _getTopNodeOfResourceDefinition(resource, node) {\n    if (resource.isDefinedByVariableOf(node.variableCollection))\n      return node;\n    let result = undefined;\n    node.children.forEach(childNode => {\n      if (result !== undefined)\n        result = this._getTopNodeOfResourceDefinition(resource, childNode);\n    });\n    return result;\n  }\n  \n  /**\n   * Returns top most node for which on the way down (beginning from node)\n   * all variables are contained by the VariableCollections of the travelled\n   * nodes.\n   * \n   * @param {Set<module:meteoJS/modelviewer/variable.Variable>} variables\n   *   Variables which have still to be found.\n   * @param {module:meteoJS/modelviewer/node.Node} node - Node.\n   * @param {boolean} bubbleDown - .\n   * @returns {undefined|module:meteoJS/modelviewer/node.Node} Child node.\n   */\n  _getTopMostChildWithAllVariables(variables, node, bubbleDown) {\n    let isVariableContained = false;\n    node.variableCollection.variables.forEach(variable => {\n      if (variables.has(variable)) {\n        isVariableContained = true;\n        variables.delete(variable);\n      }\n    });\n    if (variables.size == 0)\n      return node;\n    else if (node.children.length == 0)\n      return undefined;\n    else if (!isVariableContained &&\n             !bubbleDown)\n      return undefined;\n    let result = undefined;\n    node.children.forEach(childNode => {\n      if (result === undefined)\n        result = this._getTopMostChildWithAllVariables(variables, childNode, bubbleDown);\n    });\n    return result;\n  }\n  \n  /**\n   * Returns node which contains the passed variableCollection\n   * \n   * @param {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n   *   variableCollection\n   *   VariableCollection.\n   * @returns {module:meteoJS/modelviewer/node.Node} Node.\n   */\n  getNodeByVariableCollection(variableCollection) {\n    return (variableCollection.node === undefined)\n      ? new Node(new VariableCollection())\n      : variableCollection.node;\n  }\n  \n  /**\n   * Returns node which contains the variableCollection with the passed Id.\n   * \n   * @param {mixed} id - Id.\n   * @returns {module:meteoJS/modelviewer/node.Node} Node.\n   */\n  getNodeByVariableCollectionId(id) {\n    let result = this._getNodeByVariableCollection(a => id == a.id);\n    return (result === undefined) ? new Node(new VariableCollection()) : result;\n  }\n  \n  /**\n   * Returns node which contains the passed variableCollection.\n   * \n   * @param {Function} compareFunc - Argument is a VariableCollection-object.\n   * @returns {undefined|module:meteoJS/modelviewer/node.Node} Node.\n   * @private\n   */\n  _getNodeByVariableCollection(compareFunc) {\n    return (compareFunc(this.topNode.variableCollection))\n      ? this.topNode\n      : this._findChildNodeByVariableCollection(compareFunc, this.topNode);\n  }\n  \n  /**\n   * Returns a VariableCollection with passed variableCollection of\n   * node's children.\n   * \n   * @param {Function} compareFunc - Argument is a VariableCollection-object.\n   * @param {module:meteoJS/modelviewer/node.Node} parentNode\n   *   Search recursively in this node's children.\n   * @returns {undefined|module:meteoJS/modelviewer/node.Node} Node.\n   * @private\n   */\n  _findChildNodeByVariableCollection(compareFunc, parentNode) {\n    let result;\n    parentNode.children.forEach(n => {\n      if (result === undefined &&\n          compareFunc(n.variableCollection)) {\n        result = n;\n        return;\n      }\n      if (result === undefined &&\n          n.children.length > 0)\n        result = this._findChildNodeByVariableCollection(compareFunc, n);\n    });\n    return result;\n  }\n  \n  /**\n   * Appends an Image-resource. Alias for append(new Image(…)).\n   * \n   * @see module:meteoJS/modelviewer/resource/image.Image\n   * @returns {module:meteoJS/modelviewer/resources.Resources} This.\n   */\n  appendImage({ variables, datetime, run, offset, url }) {\n    this.append(new Image({\n      variables,\n      datetime,\n      run,\n      offset,\n      url\n    }));\n    return this;\n  }\n  \n  /**\n   * Returns the {@link module:meteoJS/modelviewer/variable.Variable|Variable}-Objects\n   * from the {@link module:meteoJS/modelviewer/variableCollection.VariableCollection|collection}\n   *  with content. With this method\n   * you can deactive for example the other variables, so the user can't select\n   * a variable with no resource.\n   * \n   * This means the method returns a subset from the passed collection. For\n   * these Variable-Objects at least one resource is available (in the\n   * {@link meteoJS/modelviewer/variableCollection.VariableCollection#node|node}\n   * of the collection or one of its children). The resources are defined by\n   * on of these Variable-Objects. If you pass 'variables', you can\n   * additionally constrain the returned variables. E.g. you look for all\n   * run's with resources of a model, you pass the model's Variable-Object.\n   * \n   * @param {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n   *   variableCollection\n   *   Return Variables of this VariableCollection.\n   * @param {Object} options - Options.\n   * @param {module:meteoJS/modelviewer/variable.Variable[]} [options.variables]\n   *   Only \n   * @returns {Set<module:meteoJS/modelviewer/variable.Variable>}\n   *   Available variables.\n   */\n  getAvailableVariables(variableCollection, { variables = [] } = {}) {\n    variables = new Set(variables);\n    const resources = [];\n    Array.from(variableCollection)\n      .forEach(variable => {\n        [].push.apply(resources,\n          variableCollection.node.getResourcesByVariables(variable, ...variables));\n        [].push.apply(resources,\n          this._collectResourcesOfNodeChildren(variableCollection.node,\n            [variable, ...variables]));\n      });\n    const result = new Set();\n    resources.forEach(resource => {\n      for (const variable of variableCollection)\n        if (resource.isDefinedBy(variable))\n          result.add(variable);\n    });\n    return result;\n  }\n  \n  /**\n   * Traverses all child nodes of the passed node. Collects\n   * all resources in these traversed nodes, which are defined by all of the\n   * passed variables. Returns these collected resources.\n   * \n   * @param {module:meteoJS/modelviewer/node.Node} node - Node.\n   * @param {module:meteoJS/modelviewer/variable.Variable[]} variables\n   *   Look for resources defined by these variables.\n   * @returns {module:meteoJS/modelviewer/resource.Resource[]} Resources.\n   * @private\n   */\n  _collectResourcesOfNodeChildren(node, variables) {\n    let result = [];\n    node.children.forEach(n => {\n      [].push.apply(result, n.getResourcesByVariables(...variables));\n      [].push.apply(result, this._collectResourcesOfNodeChildren(n, variables));\n    });\n    return result;\n  }\n  \n  /**\n   * Returns all times with at least one resource. The resources are defined\n   * by the passed variable. If exact=true, then the resources are exactly\n   * defined by the variables.\n   * With NWP models, you could get all times from a model-run with at least\n   * one resource when you pass the model and run variable object.\n   * If you want to know all available times for a set of variables (e.g. all\n   * available image-plots for the EU-region, from the temperature in a specific\n   * level), then pass exact=true and all the variables.\n   * \n   * @param {Object} [options] - Options.\n   * @param {module:meteoJS/modelviewer/variable.Variable[]} [options.variables]\n   *   Variables.\n   * @param {boolean} [options.exact=false] - When true, only resources which\n   *   are exactly defined by the passed variables are taken into account.\n   * @returns {Date[]} - Sorted upwardly.\n   */\n  getTimesByVariables({\n    variables = [],\n    exact = false\n  } = {}) {\n    const node = this._getTopMostChildWithAllVariables(\n      new Set(variables),\n      this.topNode,\n      true);\n    if (node === undefined)\n      return [];\n    \n    const times = new Set();\n    const collectTimes = node => {\n      node.getResourcesByVariables(exact, ...variables).forEach(resource => {\n        if (resource.datetime !== undefined)\n          times.add(resource.datetime.valueOf());\n      });\n      node.children.forEach(n => collectTimes(n));\n    };\n    collectTimes(node);\n    return [...times].sort().map(t => new Date(t));\n  }\n}\naddEventFunctions(Resources.prototype);\nexport default Resources;\n\n/**\n * @private\n */\nconst INTERNAL_CHANGE_RESOURCES = {\n  timeoutId: undefined,\n  addedResources: []\n};\n","/**\n * @module meteoJS/modelviewer/nwpResources\n */\nimport Resources from './Resources.js';\nimport VariableCollection from './VariableCollection.js';\nimport Node from './Node.js';\nimport Variable from './Variable.js';\nimport TimeVariable from './TimeVariable.js';\n\n/**\n * @classdesc For usage of NWP (numerical weather prediction). This class is\n *   designed to use the modelviewer for NWP.\n */\nexport class NWPResources extends Resources {\n  \n  constructor() {\n    let collections = new Set();\n    ['models', 'runs', 'regions', 'fields', 'levels', 'accumulations', 'thresholds']\n      .forEach(id => collections.add(new VariableCollection({ id })));\n    let nodes = {};\n    for (let collection of collections)\n      nodes[collection.id] = new Node(collection);\n    // build hierarchy\n    nodes.models.appendChild(nodes.runs);\n    nodes.runs.appendChild(nodes.regions);\n    nodes.regions.appendChild(nodes.fields);\n    nodes.fields.appendChild(nodes.levels, nodes.accumulations);\n    nodes.accumulations.appendChild(nodes.thresholds);\n    \n    super({\n      topNode: nodes.models,\n      timesVariableCollections: new Set([nodes.models.variableCollection, nodes.runs.variableCollection])\n    });\n  }\n  \n  /**\n   * Creates a Variable-Object and adds it to the VariableCollection.\n   * \n   * @param {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n   *   variableCollection - VariableCollection.\n   * @param {Object} [options] - Variable options.\n   * @param {mixed} [options.id] - Variable id.\n   * @param {string} [options.name] - Default name.\n   * @param {Object.<string,string>} [options.names] - Names.\n   * @param {string[]} [options.langSortation] - Priority of language codes.\n   * @param {Date|undefined} [option.sdatetime] - Datetime.\n   * @returns {module:meteoJS/modelviewer/nwpResources.NWPResources} This.\n   */\n  addVariable(variableCollection,\n    { id,\n      name = undefined,\n      names = {},\n      langSortation = [],\n      datetime = undefined } = {}) {\n    let variable =\n      (datetime === undefined)\n        ? new Variable({\n          id,\n          name,\n          names,\n          langSortation\n        })\n        : new TimeVariable({\n          id,\n          name,\n          names,\n          langSortation,\n          datetime\n        });\n    variableCollection.append(variable);\n    return this;\n  }\n  \n  /**\n   * Collection of all defined models.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   * @readonly\n   */\n  get models() {\n    return this.getNodeByVariableCollectionId('models').variableCollection;\n  }\n  \n  /**\n   * Collection of all defined runs.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   * @readonly\n   */\n  get runs() {\n    return this.getNodeByVariableCollectionId('runs').variableCollection;\n  }\n  \n  /**\n   * Collection of all defined regions.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   * @readonly\n   */\n  get regions() {\n    return this.getNodeByVariableCollectionId('regions').variableCollection;\n  }\n  \n  /**\n   * Collection of all defined fields.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   * @readonly\n   */\n  get fields() {\n    return this.getNodeByVariableCollectionId('fields').variableCollection;\n  }\n  \n  /**\n   * Collection of all defined levels.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   * @readonly\n   */\n  get levels() {\n    return this.getNodeByVariableCollectionId('levels').variableCollection;\n  }\n  \n  /**\n   * Collection of all defined accumulations.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   * @readonly\n   */\n  get accumulations() {\n    return this.getNodeByVariableCollectionId('accumulations').variableCollection;\n  }\n  \n  /**\n   * Collection of all defined thresholds.\n   * \n   * @type module:meteoJS/modelviewer/variableCollection.VariableCollection\n   * @readonly\n   */\n  get thresholds() {\n    return this.getNodeByVariableCollectionId('thresholds').variableCollection;\n  }\n}\nexport default NWPResources;","/**\n * @module meteoJS/modelviewer/display\n */\nimport $ from 'jquery';\nimport addEventFunctions from '../Events.js';\n\n/**\n * Display initalisation event.\n * \n * @event module:meteoJS/modelviewer/display#init:display\n */\n\n/**\n * VariableCollection add event. Also fired, once the object is assigned to\n * a Container object.\n * \n * @event module:meteoJS/modelviewer/display#add:variableCollection\n * @type {Object}\n * @property {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n *   variableCollection - The added variableCollection.\n */\n\n/**\n * Adding a variable to a variableCollection event. Also fired for each variable\n * in the available variableCollections, once the object is assigned to a\n * Container object.\n * \n * @event module:meteoJS/modelviewer/display#add:variable\n * @type {Object}\n * @property {module:meteoJS/modelviewer/variable.Variable} variable\n *   The added variable.\n */\n\n/**\n * Change available variables event.\n * \n * @event module:meteoJS/modelviewer/display#change:availableVariables\n * @type {Object}\n * @property {Set<module:meteoJS/modelviewer/variable.Variable>}\n *   availableVariables - Set of the available variables of a collection.\n * @property {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n *   variableCollection - The collection all the variables belong to.\n */\n\n/**\n * Change selected variable event.\n * \n * @event module:meteoJS/modelviewer/display#change:selectedVariable\n * @type {Object}\n * @property {module:meteoJS/modelviewer/variable.Variable} variable\n *   The currently selected variable of the variableCollection. Could also be a\n *   empty variable with no id.\n * @property {module:meteoJS/modelviewer/variableCollection.VariableCollection}\n *   variableCollection - VariableCollection.\n */\n\n/**\n * Change visible resource event.\n * \n * @event module:meteoJS/modelviewer/display#change:visibleResource\n * @type {Object}\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object}\n * @param\n *   {Iterable.<module:meteoJS/modelviewer/variableCollection.VariableCollection>}\n *   [alwaysAvailableCollections]\n *   Variables from these variableCollections are always available.\n */\n\n/**\n * @classdesc\n * \n * @fires module:meteoJS/modelviewer/display#init:display\n * @fires module:meteoJS/modelviewer/display#add:variableCollection\n * @fires module:meteoJS/modelviewer/display#add:variable\n * @fires module:meteoJS/modelviewer/display#change:availableVariables\n * @fires module:meteoJS/modelviewer/display#change:selectedVariable\n * @fires module:meteoJS/modelviewer/display#change:visibleResource\n */\nexport class Display {\n  \n  /**\n   * @param {module:meteoJS/modelviewer/display~options} [options] - Options.\n   */\n  constructor({\n    alwaysAvailableCollections = []\n  } = {}) {\n    \n    /**\n     * @type Set<module:meteoJS/modelviewer/variableCollection.VariableCollection>\n     * @private\n     */\n    this._alwaysAvailableCollections = new Set(alwaysAvailableCollections);\n    \n    /**\n     * @type undefined|module:meteoJS/modelviewer.Modelviewer\n     * @private\n     */\n    this._modelviewer = undefined;\n    \n    /**\n     * @type undefined|module:meteoJS/modelviewer/container.Container\n     * @private\n     */\n    this._container = undefined;\n    \n    /**\n     * @type undefined|HTMLElement|jQuery\n     * @private\n     */\n    this._parentNode = undefined;\n    \n    /**\n     * @type undefined|HTMLElement|jQuery\n     * @private\n     */\n    this._resourceNode = undefined;\n    \n    this._resourceOutput = {\n      image: undefined,\n      thermodynamicDiagram: undefined\n    };\n  }\n  \n  /**\n   * @type undefined|module:meteoJS/modelviewer.Modelviewer\n   * @package\n   */\n  get modelviewer() {\n    return this._modelviewer;\n  }\n  set modelviewer(modelviewer) {\n    this._modelviewer = modelviewer;\n    if (this._modelviewer === undefined)\n      return;\n    \n    this._modelviewer.resources.variableCollections.forEach(collection => {\n      collection.on('add:variable', variable => {\n        this.trigger('add:variable', { variable });\n      });\n    });\n    this._modelviewer.resources\n      .on('change:resources', () => this._changeResources());\n  }\n  \n  /**\n   * @type undefined|module:meteoJS/modelviewer/container.Container\n   * @package\n   */\n  get container() {\n    return this._container;\n  }\n  set container(container) {\n    this._container = container;\n    if (this._container === undefined)\n      return;\n    \n    this._container.on('change:selectedVariables',\n      ({ addedVariables }) => {\n        this._onChangeSelectedVariables(addedVariables);\n      });\n    this._onChangeSelectedVariables();\n    this._container.on('change:visibleResource', () => {\n      this._onChangeVisibleResource();\n    });\n  }\n  \n  /**\n   * @type HTMLElement|jQuery\n   * @package\n   */\n  get parentNode() {\n    return this._parentNode;\n  }\n  set parentNode(parentNode) {\n    this._parentNode = parentNode;\n    this.onInit();\n  }\n  \n  /**\n   * @type undefined|HTMLElement|jQuery\n   * @package\n   */\n  get resourceNode() {\n    return this._resourceNode;\n  }\n  set resourceNode(resourceNode) {\n    this._resourceNode = resourceNode;\n    this._onChangeVisibleResource();\n  }\n  \n  /**\n   * Re-Render this display.\n   */\n  render() {\n    this.onInit();\n    this.onChangeVisibleResource();\n  }\n  \n  /**\n   * @private\n   */\n  onInit() {\n    if (this.parentNode === undefined)\n      return;\n    \n    $(this.parentNode).empty();\n    this.trigger('init:display');\n    if (this._modelviewer === undefined)\n      return;\n    \n    this._modelviewer.resources.variableCollections\n      .forEach(variableCollection => {\n        this.trigger('add:variableCollection', { variableCollection });\n        for (let variable of variableCollection)\n          this.trigger('add:variable', { variable });\n      });\n    this._onChangeSelectedVariables();\n  }\n  \n  /**\n   * @private\n   */\n  _onChangeSelectedVariables(addedVariables = undefined) {\n    this._changeResources();\n    \n    if (this._modelviewer === undefined)\n      return;\n    \n    let selectedVariables = (addedVariables === undefined)\n      ? this._container.selectedVariables\n      : addedVariables;\n    this._modelviewer.resources.variableCollections\n      .forEach(variableCollection => {\n        [...selectedVariables].forEach(variable => {\n          if (variableCollection.contains(variable))\n            this.trigger('change:selectedVariable',\n              { variable, variableCollection });\n        });\n      });\n  }\n  \n  /**\n   * @private\n   */\n  _changeResources() {\n    if (this._modelviewer === undefined ||\n        this._container === undefined)\n      return;\n    \n    Array.from(this._modelviewer.resources.variableCollections)\n      .forEach(variableCollection => {\n        const variables = this._getParentsVariables(variableCollection.node);\n        \n        const availableVariables = this._modelviewer.resources\n          .getAvailableVariables(variableCollection, { variables });\n        \n        this.trigger('change:availableVariables',\n          { availableVariables, variableCollection });\n      });\n  }\n  \n  _getParentsVariables(node) {\n    let result = new Set();\n    node.parents.forEach(parentNode => {\n      Array.from(parentNode.variableCollection).forEach(variable => {\n        if (this._container.selectedVariables.has(variable))\n          result.add(variable);\n      });\n      const parentResult = this._getParentsVariables(parentNode);\n      if (parentResult.size > 0)\n        result = new Set([...result, ...parentResult]);\n    });\n    return result;\n  }\n  \n  /**\n   * @private\n   */\n  _onChangeVisibleResource() {\n    if (this._resourceNode === undefined) {\n      this.trigger('change:visibleResource');\n      return;\n    }\n    if (this._container === undefined)\n      return;\n    \n    let visibleResource = this._container.visibleResource;\n    if ('url' in visibleResource) {\n      if (this.thermodynamicDiagram !== undefined) {\n        this.thermodynamicDiagram = undefined;\n        $(this._resourceNode).empty();\n      }\n      if (this._resourceOutput.image === undefined) {\n        $(this._resourceNode).empty();\n        this._resourceOutput.image = $('<img>').css({ 'max-width': '100%' });\n        $(this._resourceNode).append(this._resourceOutput.image);\n      }\n      this._resourceOutput.image.attr('src', visibleResource.url);\n    }\n    else if ('sounding' in visibleResource) {\n      if (this._resourceOutput.image !== undefined) {\n        this._resourceOutput.image = undefined;\n        $(this._resourceNode).empty();\n      }\n      /*if (this._resourceOutput.thermodynamicDiagram === undefined)\n        this._resourceOutput.thermodynamicDiagram = new ThermodynamicDiagram({\n          renderTo: $(this._resourceNode)\n        });*/\n      let isAppended = false;\n      this._resourceOutput.thermodynamicDiagram.soundings.forEach(sounding => {\n        if (sounding.getSounding() === visibleResource.sounding) {\n          isAppended = true;\n          sounding.visible(true);\n        }\n        else\n          sounding.visible(false);\n      });\n      if (!isAppended)\n        this._resourceOutput.thermodynamicDiagram\n          .addSounding(visibleResource.sounding);\n    }\n    else {\n      if (this._resourceOutput.image !== undefined) {\n        this._resourceOutput.image = undefined;\n        $(this._resourceNode).empty();\n      }\n      if (this._resourceOutput.thermodynamicDiagram !== undefined)\n        this._resourceOutput.thermodynamicDiagram.soundings\n          .forEach(sounding => sounding.visible(false));\n    }\n  }\n}\naddEventFunctions(Display.prototype);\nexport default Display;","/**\n * @module meteoJS/modelviewer/container\n */\nimport Unique from '../base/Unique.js';\nimport addEventFunctions from '../Events.js';\nimport Resource from './Resource.js';\nimport Node from './Node.js';\nimport Display from './Display.js';\nimport VariableCollection from './VariableCollection.js';\n\n/**\n * Triggered, when visible Resource changes.\n * \n * @event module:meteoJS/modelviewer/container#change:enabledResources\n * @type {Object}\n * @property {Object} options - Options.\n * @property {Map.<integer,module:meteoJS/modelviewer/resource.Resource>}\n *   [options.enabledResources] - Enabled resources, selected by selectedVariables.\n */\n\n/**\n * Triggered, when visible Resource changes.\n * \n * @event module:meteoJS/modelviewer/container#change:visibleResource\n */\n\n/**\n * Triggered, when displayVariables is changed.\n * \n * @event module:meteoJS/modelviewer/container#change:displayVariables\n * @type {Object}\n * @property {Object} options - Options.\n * @property {Set.<module:meteoJS/modelviewer/variable.Variable>}\n *   [options.addedVariables] - Added variables to displayVariables.\n * @property {Set.<module:meteoJS/modelviewer/variable.Variable>}\n *   [options.removedVariables] - Removed variables to displayVariables.\n */\n\n/**\n * Triggered, when selectedVariables is changed.\n * \n * @event module:meteoJS/modelviewer/container#change:selectedVariables\n * @type {Object}\n * @property {Object} options - Options.\n * @property {Set.<module:meteoJS/modelviewer/variable.Variable>}\n *   [options.addedVariables] - Added variables to selectedVariables.\n * @property {Set.<module:meteoJS/modelviewer/variable.Variable>}\n *   [options.removedVariables] - Removed variables to selectedVariables.\n */\n\n/**\n * If a suitable resource is searched, this method will be called several times.\n * The first argument ist a list of variables. These variables are collected of\n * one hierarchy level, defined by the\n * {@link module:meteoJS/modelviewer/resources.Resources|resources object}.\n * The method returns an ordered list of these passed variables (or a subset).\n * For these variables, further down in the hierarchy, a possible resource is\n * searched. If one is found, this variable will be used for selectedVariables.\n * Method is only used if adaptSuitableResource is enabled. Default algorythm is\n * to return the list in the order of the Iterator.\n * \n * @typedef {Function} module:meteoJS/modelviewer/container~getPossibleVariables\n * @param {module:meteoJS/modelviewer/variable.Variable[]}\n *   possibleSelectedVariables - Variables to return an ordered list.\n * @param {Set<module:meteoJS/modelviewer/variable.Variable>}\n *   selectedVariables - Already selected variables so far, top-down in\n *   hierarchy.\n * @returns {module:meteoJS/modelviewer/variable.Variable[]} - Ordered list.\n */\n\n/**\n * With the passed selectedVariables, the method determines if already a\n * suitable resource should be selected. If method returns true, the property\n * selectedVariables will be set by the passed Set.\n * Method used if adaptSuitableResource is enabled. Default algorythm is to\n * return true if the Node of the lastAddedVariable contains resources.\n * \n * @typedef {Function} module:meteoJS/modelviewer/container~isResourceSelected\n * @param {Set<module:meteoJS/modelviewer/variable.Variable>}\n *   selectedVariables - Selected variables so far.\n * @param {undefined|module:meteoJS/modelviewer/variable.Variable}\n *   lastAddedVariable - Last added variable to selectedVariables.\n * @returns {boolean} - True if a suitable resource should be selected with the\n *   current state of selectedVariables.\n */\n\n/**\n * Options to adapt a suitable resource to display.\n * \n * @typedef {Object}\n *   module:meteoJS/modelviewer/container~adaptSuitableResource\n * @param {boolean} enabled - Enabled adapt suitable resource.\n * @param {module:meteoJS/modelviewer/container~getPossibleVariables}\n *   getPossibleVariables - Determines order of variables of a hierarchy level.\n * @param {module:meteoJS/modelviewer/container~isResourceSelected}\n *   isResourceSelected - Is selectedVariables complete.\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/base/unique~options}\n *   module:meteoJS/modelviewer/container~options\n * @param {module:meteoJS/modelviewer/display.Display} [display]\n *   Display object to output the container content to DOM.\n * @param {module:meteoJS/modelviewer/container~adaptSuitableResource}\n *   [adaptSuitableResource] - Options for adapt suitable resource.\n */\n\n/**\n * This object represents a container, that displays one resource.\n * Via displayVariables the appropriate resource is chosen.\n * \n * @extends module:meteoJS/base/unique.Unique\n * @fires module:meteoJS/modelviewer/container#change:visibleResource\n * @fires module:meteoJS/modelviewer/container#change:enabledResources\n * @fires module:meteoJS/modelviewer/container#change:displayVariables\n * @fires module:meteoJS/modelviewer/container#change:selectedVariables\n */\nexport class Container extends Unique {\n\n  /**\n   * @param {module:meteoJS/modelviewer/container~options} [options] - Options.\n   */\n  constructor({\n    id,\n    display = undefined,\n    adaptSuitableResource = {}\n  } = {}) {\n    super({\n      id\n    });\n    \n    /**\n     * @type undefined|module:meteoJS/modelviewer/display.Display\n     * @private\n     */\n    this._display = (display === undefined) ? new Display() : display;\n    this._display.modelviewer = this.modelviewer;\n    this._display.container = this;\n    this._display.parentNode = this._containerNode;\n    \n    /**\n     * @type module:meteoJS/modelviewer/container~adaptSuitableResource\n     * @private\n     */\n    this._adaptSuitableResource = {};\n    this._initAdaptSuitableResource(adaptSuitableResource);\n    \n    /**\n     * @type undefined|module:meteoJS/modelviewer.Modelviewer\n     * @private\n     */\n    this._modelviewer = undefined;\n    \n    /**\n     * @type undefined|module:meteoJS/modelviewer/resource.Resource\n     * @private\n     */\n    this._visibleResource;\n    \n    /**\n     * @type Set<module:meteoJS/modelviewer/variable.Variable>\n     * @private\n     */\n    this._displayVariables = new Set();\n    \n    /**\n     * @type Set<module:meteoJS/modelviewer/variable.Variable>\n     * @private\n     */\n    this._selectedVariables = new Set();\n    \n    /**\n     * @type module:meteoJS/modelviewer/node.Node|undefined\n     * @private\n     */\n    this._selectedNode = undefined;\n    \n    /**\n     * @type Map<integer,module:meteoJS/modelviewer/resource.Resource>\n     * @private\n     */\n    this._enabledResources = new Map();\n    \n    /**\n     * @type undefined|external:HTMLElement\n     * @private\n     */\n    this._containerNode = undefined;\n    \n    /**\n     * @type Object<string,Object<string,mixed>>\n     * @private\n     */\n    this._listeners = {\n      mirror: {\n        container: undefined,\n        listenerKey: undefined\n      },\n      timeline: {\n        timeline: undefined,\n        listenerKey: undefined\n      },\n      resources: {\n        resources: undefined,\n        listenerKey: undefined\n      }\n    };\n  }\n  \n  /**\n   * Display object to generate dom output.\n   * \n   * @type undefined|module:meteoJS/modelviewer/display.Display\n   * @readonly\n   */\n  get display() {\n    return this._display;\n  }\n  \n  /**\n   * This container belongs to this modelviewer object.\n   * \n   * @type undefined|module:meteoJS/modelviewer.Modelviewer\n   * @package\n   */\n  get modelviewer() {\n    return this._modelviewer;\n  }\n  set modelviewer(modelviewer) {\n    this._modelviewer = modelviewer;\n    if (this._modelviewer === undefined) {\n      if (this._listeners.timeline.listenerKey !== undefined)\n        this._listeners.timeline.timeline\n          .un('change:time', this._listeners.timeline.listenerKey);\n      if (this._listeners.resources.listenerKey !== undefined)\n        this._listeners.resources.resources\n          .un('change:resources', this._listeners.resources.listenerKey);\n      return;\n    }\n    this._display.modelviewer = modelviewer;\n    \n    this._listeners.timeline.timeline = this._modelviewer.timeline;\n    this._listeners.timeline.listenerKey = this._modelviewer.timeline\n      .on('change:time', () => this._setVisibleResource());\n    this._listeners.resources.resources = this._modelviewer.resources;\n    this._listeners.resources.listenerKey = this._modelviewer.resources\n      .on('change:resources', () => {\n        this._setTimes();\n        this._setEnabledResources();\n        this._updateSelectedVariables();\n      });\n    this._setTimes();\n  }\n  \n  /**\n   * DOM node to append container's output.\n   * \n   * @type undefined|external:HTMLElement\n   * @package\n   */\n  get containerNode() {\n    return this._containerNode;\n  }\n  set containerNode(containerNode) {\n    this._containerNode = containerNode;\n    if (this._containerNode === undefined)\n      return;\n    this._display.parentNode = this._containerNode;\n  }\n  \n  /**\n   * Currently visible resource. Could be an empty resource.\n   * \n   * @type module:meteoJS/modelviewer/resource.Resource\n   * @readonly\n   */\n  get visibleResource() {\n    return (this._visibleResource === undefined) ?\n      new Resource() : this._visibleResource;\n  }\n  \n  /**\n   * These variables define, which resource is displayed.\n   * If adaptSuitableResource is not enabled, then the displayed resource is\n   * exactly defined by these variables (and additionally the datetime selected\n   * by the timeline object). If adaptSuitableResource is enabled, then a\n   * resource is displayed, that matches the variables but can be defined by\n   * additional variables.\n   * Setter allows Set or Array. Getter returns always Set.\n   * \n   * @type Set<module:meteoJS/modelviewer/variable.Variable>\n   */\n  get displayVariables() {\n    return this._displayVariables;\n  }\n  set displayVariables(variables) {\n    let addedVariables = new Set();\n    variables = new Set(variables);\n    for (let variable of variables)\n      if (!this._displayVariables.has(variable))\n        addedVariables.add(variable);\n    let removedVariables = new Set();\n    for (let displayVariable of this.displayVariables)\n      if (!variables.has(displayVariable))\n        removedVariables.add(displayVariable);\n    if (\n      addedVariables.size > 0 ||\n      removedVariables.size > 0\n    ) {\n      this._displayVariables = variables;\n      this._updateSelectedVariables();\n      this.trigger(\n        'change:displayVariables',\n        { addedVariables, removedVariables }\n      );\n    }\n  }\n  \n  /**\n   * These variables define excactly, which resource will be displayed. These\n   * variables are retrieved from the available resources and displayVariables.\n   * Together with the selected time in the timeline, the resource to display\n   * is uniquely defined.\n   * If adaptSuitableResource is not enabled, selectedVariables is equal to\n   * displayVariables.\n   * \n   * @type Set<module:meteoJS/modelviewer/variable.Variable>\n   * @readonly\n   */\n  get selectedVariables() {\n    return this._selectedVariables;\n  }\n  \n  /**\n   * Returns an array of times (for the timeline). For all of these times, there\n   * exists resources which match with the current displayVariables.\n   * \n   * @type Date[]\n   * @readonly\n   */\n  get enabledTimes() {\n    return [...this._enabledResources.keys()]\n      .filter(datetime => !isNaN(datetime))\n      .map(datetime => new Date(datetime));\n  }\n  \n  /**\n   * Exchanges variables in displayVariables. The variable with the same\n   * Collection will be exchanged. If none is found, the variable will be added.\n   * \n   * @param {Set<module:meteoJS/modelviewer/variable.Variable>} variables\n   *   Add these variables to the set of displayVariables.\n   * @returns {module:meteoJS/modelviewer/container.Container} - This.\n   * @fires module:meteoJS/modelviewer/container#change:displayVariables\n   */\n  exchangeDisplayVariable(variables) {\n    let displayVariables = new Set(this.displayVariables);\n    for (let variable of variables)\n      for (let displayVariable of this.displayVariables)\n        if (displayVariable.variableCollection ===\n            variable.variableCollection) {\n          displayVariables.delete(displayVariable);\n          displayVariables.add(variable);\n        }\n    for (let variable of variables)\n      if (!displayVariables.has(variable))\n        displayVariables.add(variable);\n    this.displayVariables = displayVariables;\n    return this;\n  }\n  \n  /**\n   * Mirrors (parts of) the displayVariables form another container. With this\n   * feature, e.g. in different containers can be viewed plots of different\n   * models. If you change e.g. the field in the first container, all other\n   * containers, that mirrors form this container, will also change the viewed\n   * content.\n   * \n   * @param {module:meteoJS/modelviewer/container.Container} [container]\n   *   Mirrors from this container.\n   * @param {module:meteoJS/modelviewer/variableCollection.VariableCollection[]}\n   *   [variableCollections] - The displayVariables of these VariableCollections\n   *   are mirrored.\n   */\n  mirrorsFrom(container = undefined, variableCollections = undefined) {\n    if (this._listeners.mirror.listenerKey !== undefined)\n      this._listeners.mirror.container\n        .un('change:displayVariables', this._listeners.mirror.listenerKey);\n    if (container === undefined)\n      return;\n    if (variableCollections === undefined)\n      variableCollections = this.modelviewer.resources.variableCollections;\n    this._listeners.mirror.container = container;\n    let onChangeDisplayVariables = () => {\n      let newDisplayVariables = new Set();\n      for (let variable of container.displayVariables)\n        variableCollections.forEach(collection => {\n          if (variable.variableCollection === collection)\n            newDisplayVariables.add(variable);\n        });\n      this.exchangeDisplayVariable(newDisplayVariables);\n    };\n    this._listeners.mirror.listenerKey =\n      container.on('change:displayVariables', onChangeDisplayVariables);\n    onChangeDisplayVariables();\n  }\n  \n  /**\n   * Sets all available times in the timeline object for this container.\n   * \n   * @private\n   */\n  _setTimes() {\n    let [selectedVariables] =\n      this._getSelectedVariablesWithResources(\n        [this.modelviewer.resources.topNode],\n        new Set(),\n        undefined,\n        selectedVariables => {\n          let result = true;\n          this.modelviewer.resources._timesVariableCollections.forEach(collection => {\n            let contained = false;\n            for (let selectedVariable of selectedVariables) {\n              if (collection.contains(selectedVariable))\n                contained = true;\n            }\n            if (!contained)\n              result = false;\n          });\n          return result;\n        }\n      );\n    \n    if (selectedVariables === undefined)\n      selectedVariables = new Set();\n    \n    const availableTimes = (selectedVariables.size == 0)\n      ? []\n      : this.modelviewer.resources\n        .getTimesByVariables({ variables: selectedVariables });\n    this.modelviewer.timeline.setTimesBySetID(this.id, availableTimes);\n  }\n  \n  /**\n   * Updates the selected variables, according to displayVariables.\n   * \n   * @private\n   */\n  _updateSelectedVariables() {\n    let [selectedVariables, lastSelectedVariable] =\n      this._getSelectedVariablesWithResources(\n        [this.modelviewer.resources.topNode],\n        new Set(),\n        undefined\n      );\n    \n    let node;\n    if (selectedVariables === undefined) {\n      selectedVariables = new Set();\n      node = new Node({ variableCollection: new VariableCollection() });\n    }\n    else\n      node = lastSelectedVariable.variableCollection.node;\n    this._setSelectedVariables(selectedVariables, node);\n  }\n  \n  /**\n   * @typedef result_getSelectedVariablesWithResources\n   * @type {Array}\n   * @property {undefined|Set<module:meteoJS/modelviewer/variable.Variable>} 0\n   * @property {undefined|module:meteoJS/modelviewer/variable.Variable} 1\n   */\n  \n  /**\n   * \n   * \n   * @param {Set<module:meteoJS/modelviewer/node.Node>} nodes - Nodes to check.\n   * @param {Set<module:meteoJS/modelviewer/variable.Variable>}\n   *   selectedVariables - Selected Variables from top until this node.\n   * @returns {result_getSelectedVariablesWithResources}\n   *   Array with first element the SelectedVariables, second element the last\n   *   selectedVariable (node most down in the tree).\n   * @private\n   */\n  _getSelectedVariablesWithResources(\n    nodes,\n    selectedVariables,\n    lastSelectedVariable,\n    isResourceSelected = this._adaptSuitableResource.isResourceSelected\n  ) {\n    if (isResourceSelected.call(this, selectedVariables, lastSelectedVariable))\n      return [selectedVariables, lastSelectedVariable];\n    \n    let possibleSelectedVariables = [];\n    let availableSelectedVariables = [];\n    for (let childNode of nodes) {\n      if (this.modelviewer.resources.availableVariablesMap.has(childNode) &&\n          this.modelviewer.resources.availableVariablesMap.get(childNode).size)\n        for (let availableVariable\n          of this.modelviewer.resources.availableVariablesMap.get(childNode)) {\n          if (this.displayVariables.has(availableVariable))\n            possibleSelectedVariables.push(availableVariable);\n          else if (this._adaptSuitableResource.enabled)\n            availableSelectedVariables.push(availableVariable);\n        }\n    }\n    \n    [].push.call(\n      possibleSelectedVariables,\n      ...this._adaptSuitableResource\n        .getPossibleVariables\n        .call(this, availableSelectedVariables, selectedVariables)\n    );\n    \n    let result = [undefined, undefined];\n    possibleSelectedVariables.forEach(possibleSelectedVariable => {\n      if (result[0] !== undefined)\n        return;\n      \n      let tempSelectedVariables = new Set(selectedVariables);\n      tempSelectedVariables.add(possibleSelectedVariable);\n      let [resultSelectedVariables, resultLastSelectedVariable] =\n        this\n          ._getSelectedVariablesWithResources(\n            possibleSelectedVariable.variableCollection.node.children,\n            tempSelectedVariables,\n            possibleSelectedVariable,\n            isResourceSelected\n          );\n      if (resultSelectedVariables !== undefined) {\n        result[0] = resultSelectedVariables;\n        result[1] = resultLastSelectedVariable;\n        return;\n      }\n      \n      let isOnlyTimesVariables = true;\n      for (let selectedVariable of tempSelectedVariables) {\n        let contained = false;\n        this.modelviewer.resources._timesVariableCollections.forEach(collection => {\n          if (collection.contains(selectedVariable))\n            contained = true;\n        });\n        if (!contained)\n          isOnlyTimesVariables = false;\n      }\n      if (isOnlyTimesVariables &&\n          tempSelectedVariables.size == this.modelviewer.resources._timesVariableCollections.size) {\n        result[0] = tempSelectedVariables;\n        result[1] = possibleSelectedVariable;\n      }\n    });\n    \n    return result;\n  }\n  \n  /**\n   * @param {Set<module:meteoJS/modelviewer/variable.Variable>}\n   *   selectedVariables - New selectedVariables.\n   * @param {module:meteoJS/modelviewer/node.Node} selectedNode\n   *   Selectes resources from this Node.\n   * @private\n   */\n  _setSelectedVariables(selectedVariables, selectedNode) {\n    let addedVariables = new Set();\n    selectedVariables = new Set(selectedVariables);\n    for (let variable of selectedVariables)\n      if (!this.selectedVariables.has(variable))\n        addedVariables.add(variable);\n    let removedVariables = new Set();\n    for (let selectedVariable of this.selectedVariables)\n      if (!selectedVariables.has(selectedVariable))\n        removedVariables.add(selectedVariable);\n    if (\n      addedVariables.size > 0 ||\n      removedVariables.size > 0\n    ) {\n      this._selectedVariables = selectedVariables;\n      this._selectedNode = selectedNode;\n      this._setTimes();\n      this._setEnabledResources();\n      this.trigger(\n        'change:selectedVariables',\n        { addedVariables, removedVariables }\n      );\n    }\n  }\n  \n  /**\n   * Sets internally _enabledResources. These resources are selected by\n   * selectedVariable. The visibleResource is determined from this resources.\n   * \n   * @private\n   */\n  _setEnabledResources() {\n    this._enabledResources.clear();\n    if (this._selectedNode === undefined)\n      return;\n    if (this.selectedVariables.size != 0)\n      this._selectedNode\n        .getResourcesByVariables(true, ...this.selectedVariables)\n        .filter(r => r.datetime && !isNaN(r.datetime.valueOf()))\n        .forEach(r => this._enabledResources.set(r.datetime.valueOf(), r));\n    this.modelviewer.timeline\n      .setEnabledTimesBySetID(this.id, this.enabledTimes);\n    this.trigger('change:enabledResources', this._enabledResources);\n    this._setVisibleResource();\n  }\n  \n  /**\n   * Sets visible resource.\n   * \n   * @private\n   */\n  _setVisibleResource() {\n    let oldVisibleResource = this._visibleResource;\n    let datetime = this.modelviewer.timeline.getSelectedTime().valueOf();\n    if (this._enabledResources.has(datetime))\n      this._visibleResource = this._enabledResources.get(datetime);\n    else\n      this._visibleResource = undefined;\n    if (this._visibleResource !== oldVisibleResource)\n      this.trigger('change:visibleResource');\n  }\n  \n  /**\n   * Inits private property _adaptSuitableResource.\n   * \n   * @param {module:meteoJS/modelviewer/container~adaptSuitableResource}\n   *   [adaptSuitableResource] - Adapt suitable resource.\n   * @private\n   */\n  _initAdaptSuitableResource({ enabled = true,\n    getPossibleVariables = undefined,\n    isResourceSelected = undefined,\n    //excludeVariableCollectionFromSimiliarDisplay = []\n  } = {}) {\n    this._adaptSuitableResource = {\n      enabled,\n      getPossibleVariables,\n      isResourceSelected\n    };\n    \n    if (this._adaptSuitableResource.getPossibleVariables === undefined)\n      this._adaptSuitableResource.getPossibleVariables =\n        availableSV => availableSV;\n    if (this._adaptSuitableResource.isResourceSelected === undefined)\n      this._adaptSuitableResource.isResourceSelected =\n      (selectedVariables, lastAddedVariable) => {\n        if (lastAddedVariable === undefined)\n          return false;\n        let resources = lastAddedVariable.variableCollection\n          .node.getResourcesByVariables(true, ...selectedVariables);\n        return resources.length > 0;\n      };\n  }\n}\naddEventFunctions(Container.prototype);\nexport default Container;","const __WEBPACK_NAMESPACE_OBJECT__ = SVG;","/**\n * @module meteoJS/thermodynamicDiagram/functions\n */\nimport { windspeedMSToKN } from '../calc.js';\n\n/**\n * Definition of a line style. Some properties misses.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram~lineStyleOptions\n * @property {string} [color='black'] - Color.\n * @property {number} [width=1] - Width.\n * @property {undefined|number} [opacity=undefined] - Opacity.\n * @property {'butt'|'round'|'square'} [linecap=undefined] - Linecap.\n * @property {'arcs'|'bevel'|'miter'|'miter-clip'|'round'} [linejoin=undefined]\n *   Linejoin.\n * @property {string} [dasharray=undefined] - Dasharray.\n * @property {number|string} [dashoffset=undefined] - Dashoffset.\n */\n\n/**\n * Returns normalized lineStyle-Options.\n * \n * @param {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   Normalized options.\n * @private\n */\nexport function getNormalizedLineStyleOptions({\n  color = undefined,\n  width = undefined,\n  ...result\n} = {}, defaults = {}) {\n  result.color = getFirstDefinedValue(color, defaults.color, 'black');\n  result.width = getFirstDefinedValue(width, defaults.width, 1);\n  Object.keys(defaults).forEach(key => {\n    if (key != 'color' && key != 'width' && result[key] === undefined)\n      result[key] = defaults[key];\n  });\n  return result;\n}\n\n/**\n * Definition of font options. Some properties misses.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram~fontOptions\n * @param {mixed} [size=12] - Size.\n * @param {mixed} [color='black'] - Color.\n * @param {'start'|'middle'|'end'} [anchor=undefined] - Anchor.\n */\n\n/**\n * Returns normalized font-Options.\n * \n * @param {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   Normalized options.\n * @private\n */\nexport function getNormalizedFontOptions({\n  size = undefined,\n  color = undefined,\n  anchor = undefined,\n  ...result\n} = {}, defaults = {}) {\n  result.size = getFirstDefinedValue(size, defaults.size, 12);\n  result.color = getFirstDefinedValue(color, defaults.color, 'black');\n  anchor = getFirstDefinedValue(anchor, defaults.anchor);\n  if (anchor !== undefined)\n    result.anchor = anchor;\n  Object.keys(defaults).forEach(key => {\n    if (key != 'color' && key != 'size' && key != 'anchor'\n      && result[key] === undefined)\n      result[key] = defaults[key];\n  });\n  return result;\n}\n\n/**\n * A line with its visibility and style.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram~lineOptions\n * @param {boolean} [visible=true] - Visibility of the line.\n * @param {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   [style] - Line style.\n */\n\n/**\n * Returns normalized line options with visibility and line style.\n * \n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   Normalized options.\n * @internal\n */\nexport function getNormalizedLineOptions({\n  visible = undefined,\n  style = {}\n} = {}, defaults = {}) {\n  return {\n    visible: getFirstDefinedValue(visible, defaults.visible, true),\n    style: getNormalizedLineStyleOptions(style, defaults.style)\n  };\n}\n\n/**\n * A text with its visibility, style and font style.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram~textOptions\n * @param {boolean} [visible=true] - Visibility of the line.\n * @param {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   [font] - Font defintions.\n */\n\n/**\n * Returns normalized text options with visibility and line style.\n * \n * @param {module:meteoJS/thermodynamicDiagram~textOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~textOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~textOptions}\n *   Normalized options.\n * @internal\n */\nexport function getNormalizedTextOptions({\n  visible = true,\n  font = {}\n} = {}, defaults = {}) {\n  return {\n    visible: getFirstDefinedValue(visible, defaults.visible, true),\n    font: getNormalizedFontOptions(font, defaults.font)\n  };\n}\n\n/**\n * An object with its visibility, style and font style.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   module:meteoJS/thermodynamicDiagram~lineTextOptions\n * @property {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   [font] - Font defintions.\n */\n\n/**\n * Returns normalized text options with visibility, line and font style.\n * \n * @param {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   Normalized options.\n * @internal\n */\nexport function getNormalizedLineTextOptions({\n  visible = true,\n  style = {},\n  font = {}\n} = {}, defaults = {}) {\n  return {\n    visible: getFirstDefinedValue(visible, defaults.visible, true),\n    style: getNormalizedLineStyleOptions(style, defaults.style),\n    font: getNormalizedFontOptions(font, defaults.font)\n  };\n}\n\n/**\n * Updates current options with some new options.\n * \n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [options] - Current options.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [updateOptions] - Some new options.\n * @returns {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   New options object.\n * @private\n */\nexport function updateLineOptions(options = {}, updateOptions = {}) {\n  if ('visible' in updateOptions)\n    options.visible = updateOptions.visible;\n  if ('style' in updateOptions) {\n    ['color', 'width', 'opacity',  'linecap',  'linejoin',  'dasharray']\n      .forEach(styleKey => {\n        if (styleKey in updateOptions.style)\n          options.style[styleKey] = updateOptions.style[styleKey];\n      });\n  }\n  return options;\n}\n\n/**\n * Returns the first defined argument.\n * \n * @param {mixed|undefined} [...params] - Some values.\n * @returns {mixed|undefined} - First defined value, if available.\n */\nexport function getFirstDefinedValue(...params) {\n  return params\n    .reduce((acc, cur) => { return (acc !== undefined) ? acc : cur; });\n}\n\n/**\n * Draws text in a SVG node.\n * \n * @param {Object} options - Options.\n * @param {external:SVG} options.node - SVG node.\n * @param {string} options.text - Text.\n * @param {number} options.x - X coordinate.\n * @param {number} options.y - Base Y coordinate.\n * @param {number} [options.horizontalMargin=0] - Padding in x direction.\n * @param {number} [options.verticalMargin=0] - Padding in y direction.\n * @param {module:meteoJS/thermodynamicDiagram~fontOptions} [options.font] - Font style.\n * @prarm {string|Object} [options.fill] - Fill for background.\n * @returns {external:SVG} - SVG group containing the inserted elements.\n */\nexport function drawTextInto({\n  node,\n  text,\n  x,\n  y,\n  horizontalMargin = 0,\n  verticalMargin = 0,\n  font = {},\n  fill = {}\n}) {\n  const group = node.group();\n  if (!('color' in fill))\n    fill.color = 'white';\n  const background = group.rect().fill(fill);\n  const textNode = group\n    .text(text)\n    .attr({ x, y })\n    .font(font);\n  if (font['alignment-baseline'] == 'bottom')\n    textNode.dy(-textNode.bbox().height - 5);\n  textNode\n    .dx(horizontalMargin * ((textNode.attr('text-anchor') == 'end') ? -1 : 1))\n    .dy(verticalMargin * ((font['alignment-baseline'] == 'bottom') ? -1 : 1));\n  background.attr({\n    x: textNode.bbox().x,\n    y: textNode.bbox().y,\n    width: textNode.bbox().width,\n    height: textNode.bbox().height\n  });\n  return group;\n}\n\n/**\n * Draws a windbarb into an SVG node.\n * \n * @param {Object} options - Options.\n * @param {external:SVG} options.node - SVG node.\n * @param {number} [options.x=0] - X coordinate for windbarb tip.\n * @param {number} [options.y=0] - Y coordinate for windbarb tip.\n * @param {number} [options.wspd=0] - Wind speed [m/s].\n * @param {number} [options.wdir=0] - Wind direction [°].\n * @param {number} [options.length=50] - Windbarb length.\n * @param {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   [options.strokeStyle] - Line style.\n * @param {boolean} [options.fillTriangle=true] - Fill the 50 knots triangles.\n * @param {boolean} [options.triangleRatio=0.2]\n *   Width of the 50 knots triangles according to length.\n * @param {boolean} [options.barbDistanceRatio=0.1]\n *   Distance between triangles and/or 10 knot lines according to length.\n * @param {boolean} [options.barbHeightRatio=0.375]\n *   Height of the triangles and lines according to length.\n */\nexport function drawWindbarbInto({\n  node,\n  x = 0,\n  y = 0,\n  wspd = 0,\n  wdir = 270,\n  length = 50,\n  strokeStyle = undefined,\n  fillTriangle = true,\n  triangleRatio = 1 / 5,\n  barbDistanceRatio = 1 / 10,\n  barbHeightRatio = 3 / 8,\n  circleOnLowWindspeed = true,\n  circleRadiusRatio = 1 / 10\n} = {}) {\n  strokeStyle = getNormalizedLineStyleOptions(strokeStyle);\n  \n  const windspeed = windspeedMSToKN(wspd);\n  const windbarbGroup = node.group();\n  const barbGroup = (windspeed >= 5) ? windbarbGroup.group() : undefined;\n  const triangleWidth = length * triangleRatio;\n  const barbDistance = length * barbDistanceRatio;\n  const windbarbHeight = length * barbHeightRatio;\n  let yPosition = y - length;\n  let windspeedResidual = windspeed;\n  \n  if (windspeed < 5 && circleOnLowWindspeed) {\n    windbarbGroup\n      .circle(length * circleRadiusRatio)\n      .cx(x)\n      .cy(y)\n      .stroke(strokeStyle)\n      .fill('none');\n    return;\n  }\n  \n  // base line\n  windbarbGroup\n    .line(x, yPosition, x, y)\n    .stroke(strokeStyle);\n  \n  // 50 knots triangles\n  while (windspeedResidual >= 50) {\n    barbGroup\n      .polyline([\n        [x, yPosition],\n        [x + windbarbHeight, yPosition + triangleWidth/2],\n        [x, yPosition + triangleWidth]\n      ])\n      .fill(fillTriangle ? strokeStyle : 'none')\n      .stroke(strokeStyle);\n    windspeedResidual -= 50;\n    yPosition += triangleWidth + ((windspeedResidual >= 50) ? barbDistance/2 : barbDistance);\n  }\n  \n  // 10 knots lines\n  while (windspeedResidual >= 10) {\n    barbGroup\n      .line(\n        x, yPosition,\n        x + windbarbHeight, yPosition - triangleWidth/2\n      )\n      .stroke(strokeStyle);\n    yPosition += barbDistance;\n    windspeedResidual -= 10;\n  }\n  \n  if (windspeed < 10)\n    yPosition += barbDistance;\n  \n  // 5 knot line\n  if (windspeedResidual >= 5)\n    barbGroup\n      .line(\n        x, yPosition,\n        x + windbarbHeight/2, yPosition - triangleWidth/4\n      )\n      .stroke(strokeStyle);\n  \n  // compress barbs on high windspeed\n  const barbsWidth = yPosition - (y - length);\n  if (barbsWidth > length * 0.9)\n    barbGroup.scale(1, (length * 0.9) / barbsWidth, x, y - length);\n  \n  if (wdir != 0)\n    windbarbGroup.rotate(wdir, x, y);\n}","/**\n * @module meteoJS/thermodynamicDiagram/diagramParcel\n */\nimport addEventFunctions from '../Events.js';\nimport Unique from '../base/Unique.js';\nimport {\n  getNormalizedLineOptions,\n  updateLineOptions\n} from '../thermodynamicDiagram/Functions.js';\n\n/**\n * Change visibility event. Only triggered, if the visibility of the parcel\n * changes.\n * \n * @event module:meteoJS/thermodynamicDiagram/diagramParcel#change:visible\n */\n\n/**\n * Change options event.\n * \n * @event module:meteoJS/thermodynamicDiagram/diagramParcel#change:options\n */\n\n/**\n * Style/visibility options for a parcel in the thermodynamic diagram.\n * \n * @typedef {Object}\n *   module:meteoJS/thermodynamicDiagram/diagramParcel~parcelOptions\n * @property {boolean} [visible=true]\n *   Visibility in the thermodynamic diagram.\n * @property {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [temp] - Options for the temperature curve.\n * @property {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [dewp] - Options for the dewpoint curve.\n */\n\n/**\n * Definition of the options for the constructor.\n * \n * @typedef {module:meteoJS/base/unique~options}\n *   module:meteoJS/thermodynamicDiagram/diagramParcel~options\n * @property {module:meteoJS/sounding/parcel.Parcel} [parcel] - Parcel object.\n * @property {boolean} [visible=true] - Visibility of the parcel.\n * @property {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [temp] - Options for the temperature curve.\n * @property {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [dewp] - Options for the dewpoint curve.\n */\n\n/**\n * Representation of a plotted parcel (data and display options)\n * \n * <pre><code>import DiagramParcel from 'meteojs/thermodynamicDiagram/DiagramParcel';</code></pre>\n * \n * @extends module:meteoJS/base/unique.Unique\n * @fires module:meteoJS/thermodynamicDiagram/diagramParcel#change:visible\n * @fires module:meteoJS/thermodynamicDiagram/diagramParcel#change:options\n */\nexport class DiagramParcel extends Unique {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/diagramParcel~options} [options] - Options.\n   */\n  constructor({\n    parcel = undefined,\n    visible = true,\n    temp = {},\n    dewp = {},\n    ...rest\n  } = {}) {\n    super(rest);\n    \n    /**\n     * @type module:meteoJS/sounding/parcel.Parcel\n     * @private\n     */\n    this._parcel = parcel;\n    if (this.id === undefined && parcel !== undefined)\n      this.id = parcel.id;\n    \n    /**\n     * @type {module:meteoJS/thermodynamicDiagram/diagramParcel~parcelOptions}\n     * @private\n     */\n    this._options = {\n      visible,\n      temp: getNormalizedLineOptions(temp, {\n        style: {\n          color: 'rgb(255, 153, 0)',\n          width: 3,\n          linecap: 'round'\n        }\n      }),\n      dewp: getNormalizedLineOptions(dewp, {\n        style: {\n          color: 'rgb(255, 153, 0)',\n          width: 3,\n          linecap: 'round'\n        }\n      })\n    };\n  }\n\n  /**\n   * Parcel object.\n   * \n   * @type module:meteoJS/sounding/parcel.Parcel\n   * @readonly\n   */\n  get parcel() {\n    return this._parcel;\n  }\n  \n  /**\n   * Visibility of the parcel.\n   * \n   * @type {boolean}\n   * @fires module:meteoJS/thermodynamicDiagram/diagramParcel#change:visible\n   */\n  get visible() {\n    return this._options.visible;\n  }\n  set visible(visible) {\n    let oldVisible = this._options.visible;\n    this._options.visible = visible ? true : false;\n    if (oldVisible != this._options.visible)\n      this.trigger('change:visible');\n  }\n  \n  /**\n   * Style options for the parcel.\n   * \n   * @type {module:meteoJS/thermodynamicDiagram/diagramParcel~parcelOptions}\n   * @readonly\n   */\n  get options() {\n    return this._options;\n  }\n  \n  /**\n   * Updates the style options for the parcel.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramParcel~parcelOptions}\n   *   [options] - Options.\n   * @fires module:meteoJS/thermodynamicDiagram/diagramParcel#change:visible\n   * @fires module:meteoJS/thermodynamicDiagram/diagramParcel#change:options\n   */\n  update({\n    visible = undefined,\n    temp = undefined,\n    dewp = undefined\n  } = {}) {\n    let willTrigger = false;\n    if (temp === undefined)\n      temp = {};\n    else\n      willTrigger = true;\n    if (dewp === undefined)\n      dewp = {};\n    else\n      willTrigger = true;\n    \n    \n    this._options.temp = updateLineOptions(this._options.temp, temp);\n    this._options.dewp = updateLineOptions(this._options.dewp, dewp);\n    \n    if (willTrigger)\n      this.trigger('change:options');\n    \n    if (visible !== undefined)\n      this.visible = visible;\n  }\n}\naddEventFunctions(DiagramParcel.prototype);\nexport default DiagramParcel;","/**\n * @module meteoJS/thermodynamicDiagram/diagramSounding\n */\nimport addEventFunctions from '../Events.js';\nimport Unique from '../base/Unique.js';\nimport Collection from '../base/Collection.js';\nimport {\n  getNormalizedLineOptions,\n  updateLineOptions\n} from '../thermodynamicDiagram/Functions.js';\nimport DiagramParcel from './DiagramParcel.js';\n\n/**\n * Change visibility event. Only triggered, if the visibility of the sounding\n * changes, not if only a part's visibility (like hodograph) changes.\n * \n * @event module:meteoJS/thermodynamicDiagram/diagramSounding#change:visible\n */\n\n/**\n * Change options event.\n * \n * @event module:meteoJS/thermodynamicDiagram/diagramSounding#change:options\n */\n\n/**\n * Definition of the options for the constructor.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/diagramSounding~options\n * @param {boolean} [visible=true] - Visibility of the sounding.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   [diagram] - Options for the thermodynamic diagram part.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   [windprofile] - Options for the windprofile part.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [hodograph] - Options for this sounding for the hodograph.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   [parcels] - Options for this sounding for the parcels.\n */\n\n/**\n * Representation of a plotted sounding (data and display options)\n * \n * <pre><code>import DiagramSounding from 'meteojs/thermodynamicDiagram/DiagramSounding';</code></pre>\n * \n * @extends module:meteoJS/base/unique.Unique\n * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:visible\n * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:options\n */\nexport class DiagramSounding extends Unique {\n  \n  /**\n   * @param {module:meteoJS/sounding.Sounding} sounding - Sounding data.\n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~options} [options] - Options.\n   */\n  constructor(sounding, {\n    visible = true,\n    diagram = {},\n    windprofile = {},\n    hodograph = {},\n    parcels = {}\n  } = {}) {\n    super();\n    \n    /**\n     * @type module:meteoJS/sounding.Sounding\n     * @private\n     */\n    this._sounding = sounding;\n    \n    /**\n     * @type module:meteoJS/base/collection.Collection\n     * @private\n     */\n    this._diagramParcelCollection = new Collection({\n      fireReplace: false,\n      fireAddRemoveOnReplace: true,\n      emptyObjectMaker: () => new DiagramParcel()\n    });\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._visible = visible;\n    \n    /**\n     * @type Object\n     * @private\n     */\n    this._options = {\n      diagram: getNormalizedDiagramOptions(diagram),\n      windprofile:  getNormalizedWindprofileOptions(windprofile),\n      hodograph: getNormalizedLineOptions(hodograph),\n      parcels: getNormalizedParcelsOptions(parcels)\n    };\n    \n    // Initialize soundig-object with its parcels.\n    if (this._sounding !== undefined) {\n      this._sounding.parcelCollection.on('add:item',\n        parcel => this.addParcel(parcel));\n      this._sounding.parcelCollection.on('remove:item', parcel => {\n        for (let diagramParcel of this._diagramParcelCollection)\n          if (diagramParcel.parcel === parcel)\n            this._diagramParcelCollection.remove(diagramParcel);\n      });\n      for (let parcel of this._sounding.parcelCollection)\n        this.addParcel(parcel);\n    }\n  }\n  \n  /**\n   * Sounding data.\n   * \n   * @type module:meteoJS/sounding.Sounding\n   * @readonly\n   */\n  get sounding() {\n    return this._sounding;\n  }\n  \n  /**\n   * Visibility of the sounding.\n   * \n   * @type {boolean}\n   * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:visible\n   */\n  get visible() {\n    return this._visible;\n  }\n  set visible(visible) {\n    let oldVisible = this._visible;\n    this._visible = visible ? true : false;\n    if (oldVisible != this._visible)\n      this.trigger('change:visible');\n  }\n  \n  get options() {\n    return this._options;\n  }\n  \n  /**\n   * Collection of the DiagramParcel objects.\n   * \n   * @type module:meteoJS/base/collection.Collection\n   * @readonly\n   */\n  get diagramParcelCollection() {\n    return this._diagramParcelCollection;\n  }\n  \n  /**\n   * Add a parcel with styles to the sounding.\n   * (analogue to {@link module:meteoJS/thermodynamicDiagramPluggable.ThermodynamicDiagramPluggable#addSounding})\n   * \n   * @param {module:meteoJS/sounding/parcel.Parcel} parcel - Parcel object.\n   * @param {module:meteoJS/thermodynamicDiagram/diagramParcel~parcelOptions}\n   *   [options] - Style options.\n   * @returns {module:meteoJS/thermodynamicDiagram/diagramParcel.diagramParcel}\n   *   Parcel object for the diagram with style options.\n   */\n  addParcel(parcel, options = undefined) {\n    options = (options === undefined) ? this.getParcelOptions(parcel) : options;\n    options.parcel = parcel;\n    const dp = new DiagramParcel(options);\n    this._diagramParcelCollection.append(dp);\n    return dp;\n  }\n  \n  /**\n   * Updated the style options for this sounding.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~options}\n   *   [options] - Options.\n   * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:visible\n   * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:options\n   */\n  update({\n    visible = undefined,\n    diagram = undefined,\n    windprofile = undefined,\n    hodograph = undefined,\n    parcels = undefined\n  } = {}) {\n    let willTrigger = false;\n    if (diagram === undefined)\n      diagram = {};\n    else\n      willTrigger = true;\n    if (windprofile === undefined)\n      windprofile = {};\n    else\n      willTrigger = true;\n    if (hodograph === undefined)\n      hodograph = {};\n    else\n      willTrigger = true;\n    \n    this._options.diagram =\n      updateDiagramOptions(this._options.diagram, diagram);\n    this._options.windprofile =\n      updateWindprofileOptions(this._options.windprofile, windprofile);\n    this._options.hodograph =\n      updateLineOptions(this._options.hodograph, hodograph);\n    if (willTrigger)\n      this.trigger('change:options');\n    \n    if (parcels === undefined)\n      parcels = {};\n    this._options.parcels =\n      updateParcelsOptions(this._options.parcels, parcels);\n    for (let diagramParcel of this.diagramParcelCollection) {\n      if (diagramParcel.id in parcels)\n        diagramParcel.update(parcels[diagramParcel.id]);\n    }\n    \n    if (visible !== undefined)\n      this.visible = visible;\n  }\n  \n  /**\n   * Returns normalized visibility and style options for a parcel. This is a\n   * combination of the specific options for the passed parcel and the defaults.\n   * \n   * @param {module:meteoJS/sounding/parcel.Parcel} [parcel] - Parcel.\n   * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n   *   Parcel options.\n   * @public\n   */\n  getParcelOptions(parcel = undefined) {\n    let result = {\n      visible: this.options.parcels.default.visible,\n      temp: {\n        visible: this.options.parcels.default.temp.visible,\n        style: {}\n      },\n      dewp: {\n        visible: this.options.parcels.default.dewp.visible,\n        style: {}\n      }\n    };\n    ['temp', 'dewp'].forEach(key => {\n      Object.keys(this.options.parcels.default[key].style).forEach(styleKey => {\n        result[key].style[styleKey] =\n          this.options.parcels.default[key].style[styleKey];\n      });\n    });\n    if (parcel !== undefined &&\n        parcel.id in this.options.parcels)\n      result = updateOptionsPart(result, this.options.parcels[parcel.id],\n        ['temp', 'dewp']);\n    return result;\n  }\n}\naddEventFunctions(DiagramSounding.prototype);\nexport default DiagramSounding;\n\n/**\n * Style/visibility options for a sounding in the thermodynamic diagram.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions\n * @param {boolean} [visible=true]\n *   Visibility in the thermodynamic diagram.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [temp] - Options for the temperature curve.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [dewp] - Options for the dewpoint curve.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [wetbulb] - Options for the wetbulb temperature curve.\n */\n\n/**\n * Returns normalized diagram options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   [options] - Options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   Normalized options.\n * @private\n */\nfunction getNormalizedDiagramOptions({\n  visible = true,\n  temp = {},\n  dewp = {},\n  wetbulb = {}\n} = {}) {\n  return {\n    visible,\n    temp: getNormalizedLineOptions(temp, {\n      style: {\n        color: 'red',\n        width: 3,\n        linecap: 'round'\n      }\n    }),\n    dewp: getNormalizedLineOptions(dewp, {\n      style: {\n        color: 'blue',\n        width: 3,\n        linecap: 'round'\n      }\n    }),\n    wetbulb: getNormalizedLineOptions(wetbulb, {\n      style: {\n        color: 'green',\n        width: 2,\n        linecap: 'round'\n      }\n    })\n  };\n}\n\n/**\n * Updates diagram options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   updateOptions - Some new options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   New options object.\n * @private\n */\nfunction updateDiagramOptions(options, updateOptions) {\n  return updateOptionsPart(options, updateOptions, ['temp', 'dewp', 'wetbulb']);\n}\n\n/**\n * Style/visibility options for a sounding in the windprofile.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions\n * @param {boolean} [visible=true] - Visibility in the windprofile part.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [windbarbs] - Options for the windbarbs.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [windspeed] - Options for the windspeed line.\n */\n\n/**\n * Returns normalized windprofile options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   [options] - Options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   Normalized options.\n * @private\n */\nfunction getNormalizedWindprofileOptions({\n  visible = true,\n  windbarbs = {},\n  windspeed = {}\n} = {}) {\n  return {\n    visible,\n    windbarbs: getNormalizedLineOptions(windbarbs),\n    windspeed: getNormalizedLineOptions(windspeed)\n  };\n}\n\n/**\n * Updates windprofile options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   updateOptions - Some new options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   New options object.\n * @private\n */\nfunction updateWindprofileOptions(options, updateOptions) {\n  return updateOptionsPart(options, updateOptions, ['windbarbs', 'windspeed']);\n}\n\n/**\n * Visibility/style of the parcels. This object can contain further keys with\n * values as {@link module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n * which applies to the parcel with the equivalent id.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions\n * @param {boolean} [visible=true] - Visibility of the parcels.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   [default] - Default options for a parcel.\n */\n\n/**\n * Returns normalized parcels options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   [options] - Options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   Normalized options.\n * @private\n */\nfunction getNormalizedParcelsOptions(options = {}) {\n  if (options.visible === undefined)\n    options.visible = true;\n  if (options.default === undefined)\n    options.default = {};\n  if (options.default.visible === undefined)\n    options.default.visible = false;\n  if (options.default.temp === undefined)\n    options.default.temp = {};\n  if (options.default.temp.visible === undefined)\n    options.default.temp.visible = true;\n  if (options.default.temp.style === undefined)\n    options.default.temp.style = {};\n  if (options.default.temp.style.color === undefined)\n    options.default.temp.style.color = 'rgb(255, 153, 0)';\n  if (options.default.temp.style.width === undefined)\n    options.default.temp.style.width = 3;\n  if (options.default.temp.style.linecap === undefined)\n    options.default.temp.style.linecap = 'round';\n  if (options.default.dewp === undefined)\n    options.default.dewp = {};\n  if (options.default.dewp.visible === undefined)\n    options.default.dewp.visible = true;\n  if (options.default.dewp.style === undefined)\n    options.default.dewp.style = {};\n  if (options.default.dewp.style.color === undefined)\n    options.default.dewp.style.color = 'rgb(255, 194, 102)';\n  if (options.default.dewp.style.width === undefined)\n    options.default.dewp.style.width = 3;\n  if (options.default.dewp.style.linecap === undefined)\n    options.default.dewp.style.linecap = 'round';\n  return options;\n}\n\n/**\n * Updates Parcels options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   updateOptions - Some new options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   New options object.\n * @private\n */\nfunction updateParcelsOptions(options, updateOptions) {\n  if ('visible' in updateOptions)\n    options.visible = updateOptions.visible;\n  if ('default' in updateOptions)\n    options.default =\n      updateOptionsPart(options.default, updateOptions.default,\n        ['temp', 'dewp']);\n  Object.keys(updateOptions)\n    .filter(key => key != 'visible' && key != 'default')\n    .forEach(key =>\n      options[key] =\n        updateDiagramOptions(\n          (key in options) ? options[key] : {},\n          updateOptions[key]));\n  return options;\n}\n\n/**\n * Updates diagram/windprofile options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions|module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions|module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   updateOptions - Some new options.\n * @param {Array.<string>} [lineKeys] - Keys to update.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions|module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   New options object.\n * @private\n */\nfunction updateOptionsPart(options, updateOptions, lineKeys = []) {\n  if ('visible' in updateOptions)\n    options.visible = updateOptions.visible;\n  lineKeys.forEach(key => {\n    if (key in updateOptions)\n      options[key] = updateLineOptions(options[key] ? options[key] : { style: {} }, updateOptions[key]);\n  });\n  return options;\n}","/**\n * @module meteoJS/thermodynamicDiagramPluggable\n */\nimport { SVG } from '@svgdotjs/svg.js';\nimport Collection from './base/Collection.js';\nimport DiagramSounding from './thermodynamicDiagram/DiagramSounding.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagramPluggable~options\n * @param {external:HTMLElement} [renderTo] - Element to render diagram into.\n * @param {integer} [width=undefined] - Width of the whole container.\n * @param {integer} [height=undefined] - Height of the whole container.\n */\n\n/**\n * Class to draw a SVG thermodynamic diagram.\n * \n * <pre><code>import ThermodynamicDiagramPluggable from 'meteoJS/thermodynamicDiagramPluggable';</code></pre>\n * \n * @extends module:meteoJS/base/collection.Collection\n */\nexport class ThermodynamicDiagramPluggable extends Collection {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram~options} options - Options.\n   */\n  constructor({\n    renderTo = undefined,\n    width = undefined,\n    height = undefined\n  } = {}) {\n    super({\n      fireReplace: false,\n      fireAddRemoveOnReplace: true,\n      emptyObjectMaker: () => new DiagramSounding()\n    });\n    \n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._svgNode =\n      (renderTo === undefined || 'node' in renderTo || 'instance' in renderTo)\n        ? SVG(renderTo) : SVG().addTo(renderTo);\n    if (width !== undefined ||\n        height !== undefined)\n      this._svgNode.size(width, height);\n    else if (width === undefined &&\n             height === undefined &&\n             renderTo !== undefined &&\n             'getBoundingClientRect' in renderTo) {\n      let boundingRect = renderTo.getBoundingClientRect(); // size incl. padding\n      let computedStyle = window.getComputedStyle(renderTo);\n      this._svgNode.size(\n        boundingRect.width -\n        parseFloat(computedStyle.getPropertyValue('padding-left')) -\n        parseFloat(computedStyle.getPropertyValue('padding-right')),\n        boundingRect.height - \n        parseFloat(computedStyle.getPropertyValue('padding-top')) -\n        parseFloat(computedStyle.getPropertyValue('padding-bottom'))\n      );\n    }\n    \n    /**\n     * @type Set.<module:meteoJS/thermodynamicDiagram/plotArea.PlotArea>\n     * @private\n     */\n    this._plotAreas = new Set();\n    \n    // PlotAltitudeDataArea objects\n    this._svgNode.on('mousemove', e => {\n      for (let plotArea of this._plotAreas)\n        if ('isHoverLabelsRemote' in plotArea)\n          plotArea.svgNode.dispatchEvent(e);\n    });\n    this._svgNode.on('mouseout', e => {\n      if (this._svgNode.node === e.target)\n        for (let plotArea of this._plotAreas)\n          if ('_hoverLabelsGroup' in plotArea)\n            plotArea._hoverLabelsGroup.clear();\n    });\n    \n    // PlotDataArea objects\n    this.on('add:item', sounding => {\n      for (let plotArea of this._plotAreas)\n        if ('addSounding' in plotArea)\n          plotArea.addSounding(sounding);\n    });\n    this.on('remove:item', sounding => {\n      for (let plotArea of this._plotAreas)\n        if ('removeSounding' in plotArea)\n          plotArea.removeSounding(sounding);\n    });\n  }\n\n  /**\n   * SVG object of the complete diagram.\n   * \n   * @type external:SVG\n   * @readonly\n   */\n  get svgNode() {\n    return this._svgNode;\n  }\n  \n  /**\n   * Appends a PlotArea object to this thermodynamic diagram.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/plotArea.PlotArea} plotArea\n   *   PlotArea object.\n   * @returns {module:meteoJS/thermodynamicDiagramPluggable.ThermodynamicDiagramPluggable}\n   *   This.\n   */\n  appendPlotArea(plotArea) {\n    if (this._plotAreas.has(plotArea))\n      return;\n    \n    this._plotAreas.add(plotArea);\n    \n    plotArea.addTo(this.svgNode);\n    for (let sounding of this)\n      if ('addSounding' in plotArea)\n        plotArea.addSounding(sounding);\n    \n    return this;\n  }\n  \n  /**\n   * Removes a PlotArea object from this thermodynamic diagram.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/plotArea.PlotArea} plotArea\n   *   PlotArea object.\n   * @returns {module:meteoJS/thermodynamicDiagramPluggable.ThermodynamicDiagramPluggable}\n   *   This.\n   */\n  removePlotArea(plotArea) {\n    if (!this._plotAreas.has(plotArea))\n      return;\n    \n    for (let sounding of this)\n      plotArea.removeSounding(sounding);\n    this._plotAreas.delete(plotArea);\n    \n    return this;\n  }\n  \n  /**\n   * Exchanges the coordinate system in the PlotArea objects. The optional,\n   * second argument defines an already used coordinate system. If this\n   * argument is passed, only the coordinate system of the PlotArea's with\n   * this coordinate system will exchanged.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem}\n   *   coordinateSystem - Coordinate system.\n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem}\n   *   [formerCoordinateSystem=undefined] - Coordinate system.\n   */\n  exchangeCoordinateSystem(\n    coordinateSystem,\n    formerCoordinateSystem = undefined\n  ) {\n    for (let plotArea of this._plotAreas)\n      if (formerCoordinateSystem === undefined ||\n          plotArea.coordinateSystem === formerCoordinateSystem)\n        plotArea.coordinateSystem = coordinateSystem;\n  }\n  \n  /**\n   * Add a sounding to the diagram.\n   * \n   * @param {module:meteoJS/sounding.Sounding} sounding - Sounding object.\n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~options}\n   *   [options] - Display options.\n   * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   Sounding object for the diagram with display options.\n   */\n  addSounding(sounding, options = {}) {\n    let diagramSounding = new DiagramSounding(sounding, options);\n    let i = 1;\n    let id = `sounding-${i}`;\n    while (this.containsId(id)) {\n      i++;\n      id = `sounding-${i}`;\n    }\n    diagramSounding.id = id;\n    this.append(diagramSounding);\n    return diagramSounding;\n  }\n  \n}\nexport default ThermodynamicDiagramPluggable;","/**\n * @module meteoJS/thermodynamicDiagram/coordinateSystem\n */\nimport { tempCelsiusToKelvin,\n  tempByPotentialTempAndPres,\n  tempByEquiPotTempAndPres,\n  potentialTempByTempAndPres,\n  dewpointByHMRAndPres,\n  saturationHMRByTempAndPres } from '../calc.js';\nimport addEventFunctions from '../Events.js';\n\n/**\n * Options change event.\n * \n * @event module:meteoJS/thermodynamicDiagram/coordinateSystem#change:options\n */\n\n/**\n * Pressure options.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/coordinateSystem~pressureOptions\n * @property {number} [min=100] - Minimum pressure on the diagram.\n * @property {number} [max=1050] - Maximum pressure on the diagram.\n */\n\n/**\n * Temperature options.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/coordinateSystem~temperatureOptions\n * @property {number} [min=-40°C]\n *   Temperature either on bottom-left on the diagram (if reference equals\n *   'base') or on the left of an isobar (if reference is a number).\n * @property {number} [max=45°C]\n *   Temperature either on bottom-right on the diagram (if reference equals\n *   'base') or on the right of an isobar (if reference is a number).\n * @property {'base'|integer} [reference='base']\n *   Reference for 'min' and 'max' values. Allowed values: 'base' or number.\n * @property {integer} [inclinationAngle=45]\n *   Angle of inclination to the right of the isotherms. Allowed values between\n *   0 and 90 (exclusive), in degrees.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/coordinateSystem~options\n * @param {integer} [width=100] - Width of the diagram.\n * @param {integer} [height=100] - Height of the diagram.\n * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~pressureOptions}\n *   [pressure] - Pressure options.\n * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~temperatureOptions}\n *   [temperature] - Temperature options.\n */\n\n/**\n * Abstract class to specify the coordinate system of the thermodynamicDiagram.\n * \n * Child classes define the explicit coordinate system.\n * This class defines already: (can be overridden by child classes)\n * * log-P y-axes with horizontal isobars\n * * straight isotherms, inclinated to the right\n * \n * <pre><code>import CoordinateSystem from 'meteoJS/thermodynamicDiagram/CoordinateSystem';</code></pre>\n * \n * @abstract\n * @fires module:meteoJS/thermodynamicDiagram/coordinateSystem#change:options\n */\nexport class CoordinateSystem {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~options} options\n   */\n  constructor({\n    width = 100,\n    height = 100,\n    pressure = {},\n    temperature = {}\n  } = {}) {\n    /**\n     * @type integer\n     * @private\n     */\n    this._width = width;\n    \n    /**\n     * @type integer\n     * @private\n     */\n    this._height = height;\n    \n    /**\n     * @type number\n     * @private\n     */\n    this.temperatureBottomLeft;\n    \n    /**\n     * @type number\n     * @private\n     */\n    this.temperatureBottomRight;\n    \n    /**\n     * @type number\n     * @private\n     */\n    this.inclinationTan;\n    \n    /**\n     * @type Object\n     * @private\n     */\n    this.options = {\n      pressure: {},\n      temperature: {}\n    };\n    \n    this._initPressureOptions(pressure);\n    this._initTemperatureOptions(temperature);\n  }\n  \n  /**\n   * Visible width, in pixels.\n   * \n   * @type integer\n   * @public\n   */\n  get width() {\n    return this._width;\n  }\n  set width(width) {\n    const oldWidth = this._width;\n    this._width = width;\n    if (oldWidth != this._width)\n      this.trigger('change:options');\n  }\n  \n  /**\n   * Visible height, in pixels.\n   * \n   * @type integer\n   * @public\n   */\n  get height() {\n    return this._height;\n  }\n  set height(height) {\n    const oldHeight = this._height;\n    this._height = height;\n    if (oldHeight != this._height)\n      this.trigger('change:options');\n  }\n  \n  /**\n   * Returns if isobars are straight lines in the defined coordinate system.\n   * \n   * @returns {boolean}\n   */\n  isIsobarsStraightLine() {\n    return true;\n  }\n\n  /**\n   * Returns if the dry adiabats are straight lines\n   * in the defined coordinate system.\n   * \n   * @returns {boolean}\n   */\n  isDryAdiabatStraightLine() {\n    return false;\n  }\n  \n  /**\n   * @returns {boolean}\n   */\n  isIsothermsVertical() {\n    return (this.options.temperature.inclinationAngle !== undefined) &&\n         (this.options.temperature.inclinationAngle == 0);\n  }\n\n  /**\n   * Pressure for a x-y coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} y - Pixels from bottom.\n   * @returns {number} Pressure in hPa.\n   */\n  getPByXY(x, y) {\n    return Math.pow(this.options.pressure.min, y / this.height) *\n         Math.pow(this.options.pressure.max,\n           (this.height - y)/this.height);\n  }\n\n  /**\n   * Temperature for x-y coordinate.\n   * Implementation valid for straight isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} y - Pixels from bottom.\n   * @returns {number} Temperature in Kelvin.\n   */\n  getTByXY(x, y) {\n  // bottom x coordinate of isotherm\n    let x0 = x - y * this.inclinationTan;\n    return this.temperatureBottomLeft +\n    x0 *\n    (this.temperatureBottomRight-this.temperatureBottomLeft) / this.width;\n  }\n\n  /**\n   * y coordinate for pressure and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} p - Pressure in hPa.\n   * @returns {number} Pixels from bottom.\n   */\n  getYByXP(x, p) {\n    return this.height *\n    Math.log(this.options.pressure.max / p) /\n    Math.log(this.options.pressure.max / this.options.pressure.min);\n  }\n\n  /**\n   * Temperature for pressure and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} p - Pressure in hPa.\n   * @returns {number} Temperature in Kelvin.\n   */\n  getTByXP(x, p) {\n    return this.getTByXY(x, this.getYByXP(x, p));\n  }\n\n  /**\n   * x coordinate for temperature and y coordinate.\n   * Implementation valid for straight isotherms.\n   * \n   * @param {number} y - Pixels from bottom.\n   * @param {number} T - Temperature in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByYT(y, T) {\n  // bottom x coordinate \n    let x0 =\n    (T-this.temperatureBottomLeft) *\n    this.width / (this.temperatureBottomRight-this.temperatureBottomLeft);\n    return x0 + y * this.inclinationTan;\n  }\n\n  /**\n   * y coordinate for temperature and x coordinate.\n   * Implementation valid for straight isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} T - Temperature in Kelvin.\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByXT(x, T) {\n    return (this.inclinationTan != 0) ?\n      (x - this.getXByYT(0, T)) / this.inclinationTan :\n      undefined;\n  }\n\n  /**\n   * x coordinate for pressure and temperature.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} T - Temperature in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByPT(p, T) {\n    return this.getXByYT(this.getYByXP(0, p), T);\n  }\n\n  /**\n   * y coordinate for pressure and temperature.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} T - Temperature in Kelvin.\n   * @returns {number} Pixels from bottom.\n   */\n  getYByPT(p) {\n    return this.getYByXP(0, p);\n  }\n\n  /**\n   * x coordinate for potential temperature and y coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} y - Pixels from bottom.\n   * @param {number} T - Potential temperature in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByYPotentialTemperature(y, T) {\n    T = tempByPotentialTempAndPres(T, this.getPByXY(0, y));\n    return this.getXByYT(y, T);\n  }\n\n  /**\n   * y coordinate for potential temperature and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} T - Potential temperature in Kelvin.\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByXPotentialTemperature(x, T) {\n    let a = this.getPByXY(x, 0);\n    let b = this.getPByXY(x, this.height);\n    if (potentialTempByTempAndPres(this.getTByXP(x, b), b) < T ||\n      T < potentialTempByTempAndPres(this.getTByXP(x, a), a))\n      return undefined;\n    while (a-b > 10) {\n      let p = b+(a-b)/2;\n      let tBin = this.getTByXP(x, p);\n      let potTemp = potentialTempByTempAndPres(tBin, p);\n      if (potTemp === undefined)\n        return undefined;\n      if (potTemp < T)\n        a = p;\n      else\n        b = p;\n    }\n    let y = this.getYByXP(x, b+(a-b)/2);\n    return y;\n  }\n\n  /**\n   * x coordinate for pressure and potential temperature.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} T - Potential temperature in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByPPotentialTemperatur(p, T) {\n    T = tempByPotentialTempAndPres(T, p);\n    return this.getXByPT(p, T);\n  }\n\n  /**\n   * y coordinate for pressure and potential temperature.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} T - Potential temperature in Kelvin.\n   * @returns {number} Pixels from bottom.\n   */\n  getYByPPotentialTemperatur(p, T) {\n    let x = this.getXByPPotentialTemperatur(p, T);\n    return this.getYByXPotentialTemperature(x, T);\n  }\n\n  /**\n   * x coordinate for humid mixing ratio and y coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} y - Pixels from bottom.\n   * @param {number} hmr - Humid mixing ratio. []\n   * @returns {number} Pixels from the left.\n   */\n  getXByYHMR(y, hmr) {\n    let p = this.getPByXY(0, y); // horizontal isobars\n    return this.getXByYT(y, dewpointByHMRAndPres(hmr, p));\n  }\n\n  /**\n   * y coordinate for humid mixing ratio and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} hmr - Humid mixing ratio. []\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByXHMR(x, hmr) {\n    let a = this.getPByXY(x, 0);\n    let b = this.getPByXY(x, this.height);\n    while (a-b > 10) {\n      let p = b+(a-b)/2;\n      let hmrp = saturationHMRByTempAndPres(this.getTByXP(x, p), p);\n      if (hmrp === undefined)\n        return undefined;\n      if (hmrp < hmr)\n        b = p;\n      else\n        a = p;\n    }\n    let y = this.getYByXP(x, b+(a-b)/2);\n    return y;\n  }\n\n  /**\n   * x coordinate for pressure and humid mixing ratio.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} hmr - Humid mixing ratio. []\n   * @returns {number} Pixels from the left.\n   */\n  getXByPHMR(p, hmr) {\n    let dewpoint = dewpointByHMRAndPres(hmr, p);\n    return this.getXByPT(p, dewpoint);\n  }\n\n  /**\n   * y coordinate for pressure and humid mixing ratio.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} hmr - Humid mixing ratio. []\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByPHMR(p, hmr) {\n    let dewpoint = dewpointByHMRAndPres(hmr, p);\n    return this.getYByPT(p, dewpoint);\n  }\n\n  /**\n   * x coordinate for equipotential temperature and y coordainte.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} y - Pixels from bottom.\n   * @param {number} thetae - Equipotential temperaturen in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByYEquiPotTemp(y, thetae) {\n    let T = tempByEquiPotTempAndPres(thetae, this.getPByXY(0, y));\n    return this.getXByYT(y, T);\n  }\n\n  /**\n   * y coordinate for equipotential temperature and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} thetae - Equipotential temperaturen in Kelvin.\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByXEquiPotTemp(x, thetae) {\n    let a = 0;\n    let b = this.height;\n    let y = undefined;\n    while (b-a > 10) {\n      y = a+(b-a)/2;\n      let thetaEY =\n      this.getYByXT(x,\n        tempByEquiPotTempAndPres(thetae, this.getPByXY(x, y)));\n      if (thetaEY === undefined)\n        return undefined;\n      if (thetaEY < thetae)\n        b = y;\n      else\n        a = y;\n    }\n    return y;\n  }\n\n  /**\n   * x coordinate for pressure and equipotential temperature .\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} thetae - Equipotential temperaturen in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByPEquiPotTemp(p, thetae) {\n    let T = tempByEquiPotTempAndPres(thetae, p);\n    return this.getXByPT(p, T);\n  }\n\n  /**\n   * y coordinate for pressure and equipotential temperature .\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} thetae - Equipotential temperaturen in Kelvin.\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByPEquiPotTemp(p, thetae) {\n    let T = tempByEquiPotTempAndPres(thetae, p);\n    return this.getYByPT(p, T);\n  }\n  \n  /**\n   * Updates options. To restore a default value, pass undefined.\n   * \n   * @param {Object} [options] - Options.\n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~pressureOptions}\n   *   [options.pressure] - Pressure options.\n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~temperatureOptions}\n   *   [options.temperature] - Temperature options.\n   */\n  update({\n    pressure = {},\n    temperature = {}\n  } = {}) {\n    if ('min' in pressure)\n      this.options.pressure.min =\n        (pressure.min === undefined) ? 100 : pressure.min;\n    if ('max' in pressure)\n      this.options.pressure.max =\n        (pressure.max === undefined) ? 1000 : pressure.max;\n    \n    if ('min' in temperature)\n      this.options.temperature.min =\n        (temperature.min === undefined)\n          ? tempCelsiusToKelvin(-40) : temperature.min;\n    if ('max' in temperature)\n      this.options.temperature.max =\n        (temperature.max === undefined)\n          ? tempCelsiusToKelvin(-45) : temperature.max;\n    if ('reference' in temperature)\n      this.options.temperature.reference =\n        (temperature.reference === undefined) ? 'base' : temperature.reference;\n    if ('inclinationAngle' in temperature)\n      this.options.temperature.inclinationAngle =\n        (temperature.inclinationAngle === undefined)\n          ? 45 : temperature.inclinationAngle;\n    \n    this._normalizeTemperatureRange();\n    \n    this.trigger('change:options');\n  }\n  \n  /**\n   * @private\n   */\n  _initPressureOptions({\n    min = 100,\n    max = 1050\n  }) {\n    this.options.pressure = {\n      min,\n      max\n    };\n  }\n  \n  /**\n   * @private\n   */\n  _initTemperatureOptions({\n    min = tempCelsiusToKelvin(-40),\n    max = tempCelsiusToKelvin(45),\n    reference = 'base',\n    inclinationAngle = 45\n  }) {\n    this.options.temperature = {\n      min,\n      max,\n      reference,\n      inclinationAngle\n    };\n    \n    this._normalizeTemperatureRange();\n  }\n  \n  /**\n   * @internal\n   */\n  _normalizeTemperatureRange() {\n    this.temperatureBottomLeft = this.options.temperature.min;\n    this.temperatureBottomRight = this.options.temperature.max;\n    this.inclinationTan =\n    (this.options.temperature.inclinationAngle == 45) ?\n      1 :\n      (this.options.temperature.inclinationAngle == 0) ?\n        0 :\n        Math.tan(this.options.temperature.inclinationAngle * Math.PI/180);\n    \n    // specific pressure level for temperature range\n    if (/^[0-9]+$/.test(this.options.temperature.reference)) {\n      let yReference = this.getYByXP(0, this.options.temperature.reference);\n      let xTmin = this.inclinationTan * yReference;\n      let deltaT =\n      (this.temperatureBottomRight - this.temperatureBottomLeft) /\n      this.width;\n      this.temperatureBottomLeft += deltaT * xTmin;\n      this.temperatureBottomRight += deltaT * xTmin;\n    }\n  }\n}\naddEventFunctions(CoordinateSystem.prototype);\nexport default CoordinateSystem;","/**\n * @module meteoJS/thermodynamicDiagram/coordinateSystem/stueveDiagram\n */\n\nimport CoordinateSystem from '../CoordinateSystem.js';\n\nconst k = 0.2857;\n\n/**\n * Coordinate system for a Stüve-Diagram. Straight lines:\n * * pressure/isobars (horizontal)\n * * temperature/isotherms (vertical)\n * * potential temperature/dry adiabats\n * \n * y-Axes in exponential Scale: p^k (k = 0.2857), thus dry adiabats are\n * straight lines (M. K. Yau and R. R. Rogers, Short Course in Cloud Physics,\n * Third Edition, published by Butterworth-Heinemann, pp. 8).\n * \n * @see {@link https://en.wikipedia.org/wiki/St%C3%BCve_diagram}\n * @extends module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n */\nexport class StueveDiagram extends CoordinateSystem {\n\n  /**\n   * @inheritdoc\n   */\n  constructor({\n    width = 100,\n    height = 100,\n    pressure = {},\n    temperature = {}\n  } = {}) {\n    // vertical isotherms\n    temperature.inclinationAngle = 0;\n    \n    super({\n      width,\n      height,\n      pressure,\n      temperature\n    });\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  isDryAdiabatStraightLine() {\n    return true;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  getPByXY(x, y) {\n    return Math.pow(\n      Math.pow(this.options.pressure.max, k) -\n      y *\n      (Math.pow(this.options.pressure.max, k) -\n       Math.pow(this.options.pressure.min, k)) /\n      this.height,\n      1/k);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  getYByXP(x, p) {\n    return this.height *\n    (Math.pow(this.options.pressure.max, k) - Math.pow(p, k)) /\n    (Math.pow(this.options.pressure.max, k) -\n     Math.pow(this.options.pressure.min, k));\n  }\n\n  /**\n   * @inheritdoc\n   */\n  getYByXT() {\n    return undefined;\n  }\n\n}\nexport default StueveDiagram;","/**\n * @module meteoJS/thermodynamicDiagram/coordinateSystem/emagram\n */\nimport CoordinateSystem from '../CoordinateSystem.js';\n\n/**\n * Coordinate system for an emagram. This diagram has straight lines:\n * Straight lines:\n * * pressure/isobars (horizontal)\n * * temperature/isotherms (vertical)\n * \n * @see {@link https://en.wikipedia.org/wiki/Emagram}\n * @extends module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n */\nexport class Emagram extends CoordinateSystem {\n  \n  /**\n   * @inheritdoc\n   */\n  constructor({\n    width = 100,\n    height = 100,\n    pressure = {},\n    temperature = {}\n  } = {}) {\n    // vertical isotherms\n    temperature.inclinationAngle = 0;\n    \n    super({\n      width,\n      height,\n      pressure,\n      temperature\n    });\n  }\n\n}\nexport default Emagram;","/**\n * @module meteoJS/thermodynamicDiagram/coordinateSystem/skewTlogPDiagram\n */\nimport CoordinateSystem from '../CoordinateSystem.js';\n\n/**\n * Coordinate system for a skew-T-log-P diagram. This diagram has straight lines:\n * * pressure/isobars (horizontal)\n * * temperature/isotherms (normally 45 degree inclination to the right)\n * \n * @extends module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n */\nexport class SkewTlogPDiagram extends CoordinateSystem {\n}\nexport default SkewTlogPDiagram;","/**\n * @module meteoJS/thermodynamicDiagram/plotArea\n */\nimport addEventFunctions from '../Events.js';\nimport { SVG } from '@svgdotjs/svg.js';\n\n/**\n * Event with a sounding object.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/plotArea~backgroundEvent\n * @property {external:SVG} node\n *   SVG node which contains the background nodes.\n */\n\n/**\n * Fired before creating the background.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotArea#prebuild:background\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~backgroundEvent}\n */\n\n/**\n * Fired after creating the background.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotArea#postbuild:background\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~backgroundEvent}\n */\n\n/**\n * Object passed on events.\n * \n * @typedef {external:Event} module:meteoJS/thermodynamicDiagram/plotArea~event\n * @property {number} elementX - X coordinate.\n * @property {number} elementY - Y coordinate.\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#click\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#dblclick\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mousedown\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mouseup\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mouseover\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mouseout\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mousemove\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchstart\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchmove\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchleave\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchend\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchcancel\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * Events options. On event a\n * {@link module:meteoJS/thermodynamicDiagram/plotArea~event}\n * is passed to the listener.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/plotArea~eventsOptions\n * @property {Function} [click] - Click listener.\n * @property {Function} [dblclick] - Dblclick listener.\n * @property {Function} [mousedown] - Mousedown listener.\n * @property {Function} [mouseup] - Mouseup listener.\n * @property {Function} [mouseover] - Mouseover listener.\n * @property {Function} [mouseout] - Mouseout listener.\n * @property {Function} [mousemove] - Mousemove listener.\n * @property {Function} [touchstart] - Touchstart listener.\n * @property {Function} [touchmove] - Touchmove listener.\n * @property {Function} [touchleave] - Touchleave listener.\n * @property {Function} [touchend] - Touchend listener.\n * @property {Function} [touchcancel] - Touchcancel listener.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/plotArea~options\n * @param {external:SVG} [svgNode] - SVG Node.\n * @param {integer} [x=0] - X.\n * @param {integer} [y=0] - Y.\n * @param {integer} [width=100] - Width.\n * @param {integer} [height=100] - Height.\n * @param {Object} [style] - SVG-Style for this Area. Default: overflow=hidden.\n * @param {boolean} [visible=true] - Visibility.\n * @param {module:meteoJS/thermodynamicDiagram/plotArea~eventsOptions}\n *   [events] - Events.\n */\n\n/**\n * Abstract class to define an area on the SVG.\n * \n * <pre><code>import PlotArea from 'meteoJS/thermodynamicDiagram/PlotArea';</code></pre>\n * \n * @fires module:meteoJS/thermodynamicDiagram/plotArea#change:visible\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#change:position\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#change:extent\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#prebuild:background\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#postbuild:background\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#click\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#dblclick\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mousedown\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mouseup\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mouseover\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mouseout\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mousemove\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchstart\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchmove\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchleave\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchend\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchcancel\n */\nexport class PlotArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/plotArea~options}\n   *   options - Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n    style = {},\n    visible = true,\n    events = {}\n  } = {}) {\n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._svgNode = SVG()\n      .attr({\n        x,\n        y,\n        width,\n        height\n      })\n      .css(this._getNormalizedStyle(style))\n      .css('display', visible ? 'inline' : 'none');\n    if (svgNode !== undefined)\n      this.addTo(svgNode);\n    \n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._svgNodeBackground = this._svgNode.group();\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._visible = visible;\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n     * @private\n     */\n    this._coordinateSystem = coordinateSystem;\n    \n    /**\n     * @type mixed\n     * @private\n     */\n    this._coordinateSystemListenerKey = (this._coordinateSystem !== undefined)\n      ? this._coordinateSystem\n        .on('change:options', () => this.onCoordinateSystemChange())\n      : undefined;\n    \n    this.on('change:extent', () => this.onCoordinateSystemChange());\n    \n    this._initEvents(events);\n  }\n  \n  /**\n   * SVG container node.\n   * \n   * @type external:SVG\n   * @public\n   * @readonly\n   */\n  get svgNode() {\n    return this._svgNode;\n  }\n  \n  /**\n   * Visibility of the area.\n   * \n   * @type boolean\n   * @public\n   */\n  get visible() {\n    return this._visible;\n  }\n  set visible(visible) {\n    let oldVisible = this._visible;\n    this._visible = visible;\n    if (oldVisible != this._visible) {\n      this._svgNode.style('display', this._visible ? 'inline' : 'none');\n      this.trigger('change:visible');\n    }\n  }\n  \n  /**\n   * X of the top-left edge.\n   * \n   * @type integer\n   * @public\n   */\n  get x() {\n    return this._svgNode.attr('x');\n  }\n  set x(x) {\n    this._svgNode.attr({ x });\n    this.trigger('change:position');\n  }\n  \n  /**\n   * Y of the top-left edge.\n   * \n   * @type integer\n   * @public\n   */\n  get y() {\n    return this._svgNode.attr('y');\n  }\n  set y(y) {\n    this._svgNode.attr({ y });\n    this.trigger('change:position');\n  }\n  \n  /**\n   * Width of the area.\n   * \n   * @type integer\n   * @public\n   */\n  get width() {\n    return this._svgNode.attr('width');\n  }\n  set width(width) {\n    this._svgNode.attr({ width });\n    this.trigger('change:extent');\n  }\n  \n  /**\n   * Height of the area.\n   * \n   * @type integer\n   * @public\n   */\n  get height() {\n    return this._svgNode.attr('height');\n  }\n  set height(height) {\n    this._svgNode.attr({ height });\n    this.trigger('change:extent');\n  }\n  \n  /**\n   * Overflow-style of the area.\n   * \n   * @type string\n   * @public\n   */\n  get style() {\n    return this._svgNode.css();\n  }\n  set style(style) {\n    this._svgNode.css(style);\n  }\n  \n  /**\n   * Coordinate system.\n   * \n   * @type module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n   * @public\n   */\n  get coordinateSystem() {\n    return this._coordinateSystem;\n  }\n  set coordinateSystem(coordinateSystem) {\n    if (this._coordinateSystemListenerKey !== undefined)\n      this._coordinateSystem\n        .un('change:options', this._coordinateSystemListenerKey);\n    this._coordinateSystem = coordinateSystem;\n    this._coordinateSystemListenerKey =\n      this._coordinateSystem\n        .on('change:options', () => this.onCoordinateSystemChange());\n    this.onCoordinateSystemChange();\n  }\n  \n  /**\n   * Minimal extent length (either width or height).\n   * \n   * @type integer\n   * @readonly\n   */\n  get minExtentLength() {\n    return Math.min(this.width, this.height);\n  }\n  \n  /**\n   * Maximal extent length (either width or height).\n   * \n   * @type integer\n   * @readonly\n   */\n  get maxExtentLength() {\n    return Math.max(this.width, this.height);\n  }\n  \n  /**\n   * Sets the plot area as a child of the argument.\n   * \n   * @param {external:SVG} svgNode - SVG node.\n   */\n  addTo(svgNode) {\n    this._svgNode.addTo(svgNode);\n  }\n  \n  /**\n   * Init the area.\n   * \n   * @protected\n   */\n  init() {\n    this.onCoordinateSystemChange();\n  }\n  \n  /**\n   * Called, when the coordinateSystem object changes.\n   * \n   * @protected\n   */\n  onCoordinateSystemChange() {\n    if (this._coordinateSystem !== undefined)\n      this.drawBackground(this._svgNodeBackground);\n  }\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * This method is only called, when this.coordinateSystem isn't undefined.\n   * \n   * @param {external:SVG} svgNode - SVG group, SVG.G.\n   * @protected\n   */\n  drawBackground(svgNode) {\n    svgNode.clear();\n    this.trigger('prebuild:background', { node: svgNode });\n    this._drawBackground(svgNode);\n    this.trigger('postbuild:background', { node: svgNode });\n  }\n  \n  /**\n   * Method to inherit from child classes to draw the background of the plot\n   * area.\n   * \n   * This method is only called, when this.coordinateSystem isn't undefined.\n   * \n   * @param {external:SVG} svgNode - SVG group, SVG.G.\n   * @protected\n   */\n  _drawBackground() {}\n  \n  /**\n   * Returns normalized SVG style.\n   * \n   * @private\n   * @param {Object} style - Input SVG style.\n   * @param {string} [style.overflow='hidden'] - Overflow style.\n   * @returns {Object} - SVG style.\n   */\n  _getNormalizedStyle({\n    overflow = 'hidden'\n  }) {\n    return {\n      overflow\n    };\n  }\n  \n  /**\n   * Initialize events.\n   * \n   * @param {Object} options - Options.\n   * @private\n   */\n  _initEvents({\n    click = undefined,\n    dblclick = undefined,\n    mousedown = undefined,\n    mouseup = undefined,\n    mouseover = undefined,\n    mouseout = undefined,\n    mousemove = undefined,\n    touchstart = undefined,\n    touchmove = undefined,\n    touchleave = undefined,\n    touchend = undefined,\n    touchcancel = undefined\n  }) {\n    const events = {\n      click,\n      dblclick,\n      mousedown,\n      mouseup,\n      mouseover,\n      mouseout,\n      mousemove,\n      touchstart,\n      touchmove,\n      touchleave,\n      touchend,\n      touchcancel\n    };\n    Object.keys(events).forEach(eventKey => {\n      this._svgNode.on(eventKey, e => {\n        const customEvent =\n          this.getExtendedEvent(e,\n            this._svgNode.point(\n              e.pageX - window.pageXOffset,\n              e.pageY - window.pageYOffset));\n        if (events[eventKey] !== undefined)\n          events[eventKey].call(this, customEvent);\n        this.trigger(eventKey, customEvent);\n      });\n    });\n  }\n  \n  /**\n   * Extend an event with some properties.\n   * \n   * @param {external:Event} e - Event.\n   * @param {external:SVG} p - Point.\n   * @protected\n   */\n  getExtendedEvent(e, p) {\n    e.elementX = p.x;\n    e.elementY = p.y;\n    return e;\n  }\n}\naddEventFunctions(PlotArea.prototype);\nexport default PlotArea;","/**\n * @module meteoJS/thermodynamicDiagram/plotDataArea\n */\nimport PlotArea from './PlotArea.js';\n\n/**\n * Event with a sounding object.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/plotDataArea~soundingEvent\n * @property {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Sounding.\n */\n\n/**\n * Fired on adding a sounding.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotDataArea#add:sounding\n * @type {module:meteoJS/thermodynamicDiagram/plotDataArea~soundingEvent}\n */\n\n/**\n * Fired on removing a sounding.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotDataArea#remove:sounding\n * @type {module:meteoJS/thermodynamicDiagram/plotDataArea~soundingEvent}\n */\n\n/**\n * Event with a sounding object and its SVG node.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotDataArea~soundingEvent}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~insertSoundingEvent\n * @property {external:SVG} node - SVG node, SVG.G.\n */\n\n/**\n * Fired before inserting the sounding data into the svg.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotDataArea#preinsert:sounding\n * @type {module:meteoJS/thermodynamicDiagram/plotDataArea~insertSoundingEvent}\n */\n\n/**\n * Fired after inserting the sounding data into the svg.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotDataArea#postinsert:sounding\n * @type {module:meteoJS/thermodynamicDiagram/plotDataArea~insertSoundingEvent}\n */\n\n/**\n * Visibility of the sounding in an area.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~getSoundingVisibility\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Sounding to determine its visibility.\n * @returns {boolean} Visibility.\n */\n\n/**\n * Returns x and y coordinates in the Plot-Area for the passed levelData.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~getCoordinatesByLevelData\n * @param {string} dataGroupId - Data group id.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Corresponding sounding.\n * @param {module:meteoJS/sounding~levelData}\n *   levelData - Level data of the sounding.\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea.PlotDataArea}\n *   plotArea - Plot-Area.\n * @returns {Object} - Containing x and y.\n */\n\n/**\n * Draws data into a SVG node.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~insertDataGroupInto\n * @param {external:SVG} svgNode - Insert sounding data into this SVG node.\n * @param {string} dataGroupId - Data group id.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Corresponding sounding.\n * @param {Object[]}\n *   data - Data of the sounding, containing x and y coordinates and levelData.\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea.PlotDataArea}\n *   plotArea - Plot-Area.\n */\n\n/**\n * Filter data point before drawing.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~filterDataPoint\n * @param {Object} pointData - Point data.\n * @param {module:meteoJS/sounding~levelData} pointData.levelData - Level data.\n * @param {number} pointData.x - x coordinate of the data point.\n * @param {nmber} pointData.y - y coordinate of the data point.\n * @param {Object} lastPointData - Data of the last point.\n * @param {module:meteoJS/sounding~levelData} [lastPointData.levelData]\n *   Level data of the last point.\n * @param {number} [lastPointData.x] - x coordinate of the last data point.\n * @param {nmber} [lastPointData.y] - y coordinate of the last data point.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotArea~options}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~options\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea~getSoundingVisibility} [getSoundingVisibility]\n *   Takes a sounding object and returns the visibility for the area.\n * @param {string[]} [dataGroupIds=[]] - IDs of several grouped datas.\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea~getCoordinatesByLevelData}\n *   [getCoordinatesByLevelData] - Coordinate function.\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea~insertDataGroupInto}\n *   [insertDataGroupInto] - SVG drawing function.\n * @param {undefined|module:meteoJS/thermodynamicDiagram/plotDataArea~filterDataPoint}\n *   [filterDataPoint] - Function to filter data points, that shouldn't be\n *   plotted. If undefined, no data point is filtered\n *   (expect minDataPointsDistance is set).\n * @param {number} [minDataPointsDistance=0]\n *   Minimum distance between data points in pixels. If filterDataPoint is set,\n *   minDataPointsDistance is ignored.\n */\n\n/**\n * Abstract class to define an area on the SVG with sounding data.\n * \n * <pre><code>import PlotDataArea from 'meteojs/thermodynamicDiagram/PlotDataArea';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotArea.PlotArea\n * \n * @fires module:meteoJS/thermodynamicDiagram/plotDataArea#add:sounding\n * @fires module:meteoJS/thermodynamicDiagram/plotDataArea#remove:sounding\n * @fires module:meteoJS/thermodynamicDiagram/plotDataArea#prebuild:sounding\n * @fires module:meteoJS/thermodynamicDiagram/plotDataArea#postbuild:sounding\n */\nexport class PlotDataArea extends PlotArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/plotDataArea~options}\n   *   options - Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n    style = {},\n    visible = true,\n    events = {},\n    getSoundingVisibility = sounding => sounding.visible,\n    dataGroupIds = [],\n    getCoordinatesByLevelData = () => { return { x: undefined, y: undefined }; },\n    insertDataGroupInto = () => {},\n    filterDataPoint = undefined,\n    minDataPointsDistance = 0\n  } = {}) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events\n    });\n    \n    /**\n     * @type Function\n     * @private\n     */\n    this._getSoundingVisibility = getSoundingVisibility;\n    \n    /**\n     * @type string[]\n     * @private\n     */\n    this._dataGroupIds = dataGroupIds;\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/plotDataArea~getCoordinatesByLevelData\n     * @private\n     */\n    this._getCoordinatesByLevelData = getCoordinatesByLevelData;\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/plotDataArea~insertDataGroupInto\n     * @private\n     */\n    this._insertDataGroupInto = insertDataGroupInto;\n    \n    /**\n     * @type undefined|module:meteoJS/thermodynamicDiagram/plotDataArea~filterDataPoint\n     * @private\n     */\n    this._filterDataPoint = filterDataPoint;\n    \n    /**\n     * @type number\n     * @private\n     */\n    this._minDataPointsDistance = minDataPointsDistance;\n    \n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._svgNodeData = this.svgNode.group();\n    \n    /**\n     * Contains all soundings to draw as key. The value-object contains 3 items:\n     * group (SVG), listenerKeyVisible, listenerKeyOptions.\n     * \n     * @type Map.<module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding,Object>\n     * @private\n     */\n    this._soundings = new Map();\n  }\n  \n  /**\n   * Groups of different data to plot onto the plot area.\n   * \n   * @type string[]\n   * @readonly\n   */\n  get dataGroupIds() {\n    return this._dataGroupIds;\n  }\n  \n  /**\n   * Returns x and y coordinated of some sounding data.\n   * \n   * @type module:meteoJS/thermodynamicDiagram/plotDataArea~getCoordinatesByLevelData\n   * @readonly\n   */\n  get getCoordinatesByLevelData() {\n    return this._getCoordinatesByLevelData;\n  }\n  \n  /**\n   * Minimum distance between data points in pixels.\n   * \n   * @type number\n   */\n  get minDataPointsDistance() {\n    return this._minDataPointsDistance;\n  }\n  set minDataPointsDistance(minDataPointsDistance) {\n    const oldValue = this._minDataPointsDistance;\n    this._minDataPointsDistance = minDataPointsDistance;\n    \n    if (oldValue != this._minDataPointsDistance)\n      this.drawSoundings();\n  }\n  \n  /**\n   * Adds a sounding to draw into the area.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   */\n  addSounding(sounding) {\n    let group = this._svgNodeData.group();\n    let listenerKeyVisible = sounding.on('change:visible',\n      () => this.onChangeSoundingVisibility(sounding, group));\n    let listenerKeyOptions = sounding.on('change:options', () => {\n      if (this.coordinateSystem !== undefined)\n        this.drawSounding(sounding, group);\n      this.onChangeSoundingVisibility(sounding, group);\n    });\n    this._soundings.set(sounding, {\n      group,\n      listenerKeyVisible,\n      listenerKeyOptions\n    });\n    this.trigger('add:sounding', sounding);\n    \n    if (this.coordinateSystem !== undefined)\n      this.drawSounding(sounding, group);\n    /* Don't call onChangeSoundingVisibility here.\n     * This is due to PlotAltitudeDataArea. In this class, hoverLabels will get\n     * invisible, when onChangeSoundingVisibility is called. This is not itended\n     * when the added sounding is invisible. But intended if the sounding is\n     * visible. */\n    this.setDisplayOfSounding(sounding, group);\n  }\n  \n  /**\n   * Removes a sounding from the area.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   */\n  removeSounding(sounding) {\n    if (this._soundings.has(sounding)) {\n      this._soundings.get(sounding).group.remove();\n      sounding.un(this._soundings.get(sounding).listenerKeyVisible);\n      sounding.un(this._soundings.get(sounding).listenerKeyOptions);\n      this._soundings.delete(sounding);\n    }\n    this.trigger('remove:sounding', sounding);\n  }\n  \n  /**\n   * Called, when the coordinateSystem object changes.\n   * \n   * @override\n   */\n  onCoordinateSystemChange() {\n    super.onCoordinateSystemChange();\n    \n    this.drawSoundings();\n  }\n  \n  /**\n   * Called, when a sounding changes its visibilty.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   * @param {external:SVG} group - SVG group, SVG.G.\n   * @protected\n   */\n  onChangeSoundingVisibility(sounding, group) {\n    this.setDisplayOfSounding(sounding, group);\n  }\n  \n  /**\n   * Sets 'display' property of a SVG group of a sounding, depending of the\n   * sounding's visibility.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   * @param {external:SVG} group - SVG group, SVG.G.\n   * @protected\n   */\n  setDisplayOfSounding(sounding, group) {\n    group.css('display',\n      this._getSoundingVisibility(sounding) ? 'inline' : 'none');\n  }\n  \n  /**\n   * Draws all soundings.\n   * \n   * @protected\n   */\n  drawSoundings() {\n    if (this.coordinateSystem === undefined)\n      return;\n    \n    for (let sounding of this._soundings.keys())\n      this.drawSounding(sounding, this._soundings.get(sounding).group);\n  }\n  \n  /**\n   * Draw the sounding into the SVG group.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   * @param {external:SVG} group - SVG group, SVG.G.\n   * @protected\n   */\n  drawSounding(sounding, group) {\n    group.clear();\n    \n    this.trigger('preinsert:sounding', { sounding, node: group });\n    \n    const soundingGroup = group.group();\n    \n    let data = {};\n    const filterDataPointFunction = this._getFilterDataPointFunction();\n    let lastLevel = {};\n    sounding.sounding.getLevels().reverse().forEach(pres => {\n      const levelData = sounding.sounding.getData(pres);\n      \n      this._dataGroupIds.forEach(dataGroupId => {\n        if (!(dataGroupId in data))\n          data[dataGroupId] = [];\n        \n        const level = {\n          levelData,\n          x: undefined,\n          y: undefined\n        };\n        const {x, y} =\n          this._getCoordinatesByLevelData(dataGroupId,\n            sounding, level.levelData, this);\n        level.x = x;\n        level.y = y;\n        \n        if (x === undefined ||\n            y === undefined ||\n            filterDataPointFunction !== undefined &&\n            filterDataPointFunction(level, {...lastLevel}))\n          return;\n        \n        lastLevel = level;\n        data[dataGroupId].push(level);\n      });\n    });\n    \n    Object.keys(data).forEach(dataGroupId => {\n      if (data[dataGroupId].length > 0)\n        this._insertDataGroupInto(soundingGroup, dataGroupId,\n          sounding, data[dataGroupId], this);\n    });\n    \n    this.trigger('postinsert:sounding', { sounding, node: group });\n  }\n  \n  /**\n   * @private\n   */\n  _getFilterDataPointFunction() {\n    return (this._filterDataPoint === undefined) ?\n      makeFilterDataPointFunction(this._minDataPointsDistance) :\n      this._filterDataPoint;\n  }\n}\nexport default PlotDataArea;\n\n/**\n * Creates a filterDataPoint function. It filters data points, which doesn't\n * have a minimal distance.\n * \n * @param {number} minDataPointsDistance - Minimal distance.\n * @returns {undefined|module:meteoJS/thermodynamicDiagram/plotDataArea~filterDataPoint}\n *   filterDataPoint function.\n * @private\n */\nfunction makeFilterDataPointFunction(minDataPointsDistance) {\n  if (minDataPointsDistance === 0)\n    return undefined;\n  \n  return ({ x, y }, lastPoint) => {\n    if (lastPoint.x === undefined ||\n        lastPoint.y === undefined) {\n      lastPoint.x = x;\n      lastPoint.y = y;\n      return false;\n    }\n    const distance =\n      Math.sqrt(Math.pow(x - lastPoint.x, 2) + Math.pow(y - lastPoint.y, 2));\n    const result = (distance < minDataPointsDistance);\n    if (!result) {\n      lastPoint.x = x;\n      lastPoint.y = y;\n    }\n    return result;\n  };\n}","/**\n * @module meteoJS/thermodynamicDiagram/plotAltitudeDataArea\n */\nimport PlotDataArea from './PlotDataArea.js';\n\n/**\n * Function to insert labels.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~insertLabelsFunc\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Diagram sounding to label.\n * @param {Object} levelData - Data to label.\n * @param {external:SVG} group - SVG group to insert labels.\n */\n\n/**\n * Options for labels on hovering the diagram.\n * \n * @typedef {Object}\n *   module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions\n * @property {boolean} [visible=true] - Visibility.\n * @property {string} [type='mousemove'] - Event type.\n * @property {boolean} [snapToData=true]\n *   Snap labels to data points.\n * @property {boolean} [remote=true]\n *   Show labels relative to the mouse position on the diagram, even when the\n *   pointer isn't directly on the plot area.\n * @property {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~insertLabelsFunc}\n *   [insertLabelsFunc] - Called to insert labels into a SVG group.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options\n * @param {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions}\n *   [hoverLabels] - Hover labels options.\n */\n\n/**\n * Abstract class to define an area on the SVG with sounding data, plotted with\n * pressure on the y-axis.\n * \n * <pre><code>import PlotAltitudeArea from 'meteojs/thermodynamicDiagram/PlotAltitudeArea';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotDataArea.PlotDataArea\n */\nexport class PlotAltitudeDataArea extends PlotDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options}\n   *   options - Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n    style = {},\n    visible = true,\n    events = {},\n    hoverLabels = {},\n    getSoundingVisibility = sounding => sounding.visible,\n    dataGroupIds = undefined,\n    getCoordinatesByLevelData = undefined,\n    insertDataGroupInto = undefined,\n    filterDataPoint = undefined,\n    minDataPointsDistance = 0\n  } = {}) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      getSoundingVisibility,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto,\n      filterDataPoint,\n      minDataPointsDistance\n    });\n    \n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._hoverLabelsGroup = this.svgNode.group();\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._isHoverLabelsRemote = true;\n    \n    this._initHoverLabels(hoverLabels);\n  }\n  \n  /**\n   * Called, when a sounding changes its visibilty.\n   * \n   * @override\n   */\n  onChangeSoundingVisibility(sounding, group) {\n    super.onChangeSoundingVisibility(sounding, group);\n    this._hoverLabelsGroup.clear();\n  }\n  \n  /**\n   * Draw the sounding into the SVG group.\n   * \n   * @override\n   */\n  drawSounding(sounding, group) {\n    super.drawSounding(sounding, group);\n    /* Only hide hoverLabels, when Sounding is visible. */\n    if (this._getSoundingVisibility(sounding))\n      this._hoverLabelsGroup.clear();\n  }\n  \n  /**\n   * Extend an event with pressure.\n   * \n   * @override\n   */\n  getExtendedEvent(e, p) {\n    e = super.getExtendedEvent(e, p);\n    \n    e.diagramPres = undefined;\n    if (this.coordinateSystem !== undefined)\n      e.diagramPres =\n        this.coordinateSystem.getPByXY(0,\n          this.coordinateSystem.height - e.elementY);\n    \n    return e;\n  }\n  \n  /**\n   * Show also hover labels when mouse isn't over the area.\n   * \n   * @type boolean\n   * @readonly\n   */\n  get isHoverLabelsRemote() {\n    return this._isHoverLabelsRemote;\n  }\n  \n  get hoverLabelsSounding() {\n    // Wie \"manuell\" setzen?\n    for (let sounding of this._soundings.keys()) {\n      if (this._getSoundingVisibility(sounding))\n        return sounding;\n    }\n    return undefined;\n  }\n  \n  /**\n   * Initialize hover labels options.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions}\n   *   options - Hover labels options.\n   */\n  _initHoverLabels({\n    visible = true,\n    type = 'mousemove',\n    //snapToData = true,\n    remote = true,\n    insertLabelsFunc = undefined\n  }) {\n    this._isHoverLabelsRemote = remote;\n    \n    if (!visible ||\n        insertLabelsFunc === undefined)\n      return;\n    \n    this.on('change:extent', () => this._hoverLabelsGroup.clear());\n    this.on(type, e => {\n      if (!e.diagramPres)\n        return;\n      const hoverLabelsSounding = this.hoverLabelsSounding;\n      if (hoverLabelsSounding === undefined)\n        return;\n      \n      const sounding = hoverLabelsSounding.sounding;\n      insertLabelsFunc(hoverLabelsSounding,\n        sounding.getData(sounding.getNearestLevel(e.diagramPres)),\n        this._hoverLabelsGroup);\n    });\n  }\n}\nexport default PlotAltitudeDataArea;","/**\n * @module meteoJS/thermodynamicDiagram/tdDiagram\n */\nimport {\n  tempCelsiusToKelvin,\n  tempKelvinToCelsius,\n  potentialTempByTempAndPres,\n  saturationHMRByTempAndPres,\n  lclByPotentialTempAndHMR,\n  lclTemperatureByTempAndDewpoint,\n  equiPotentialTempByTempAndDewpointAndPres,\n  wetbulbTempByTempAndDewpointAndPres,\n  altitudeISAByPres\n} from '../calc.js';\nimport {\n  getNormalizedLineStyleOptions,\n  getNormalizedFontOptions,\n  getFirstDefinedValue,\n  drawTextInto\n} from './Functions.js';\nimport PlotAltitudeDataArea from './PlotAltitudeDataArea.js';\n\n/**\n * Object passed on events.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotArea~event}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~event\n * @property {number} p - Pressure coordinate [hPa].\n * @property {number} T - Temperature coordinate [K].\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#click\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#dblclick\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mousedown\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mouseup\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mouseover\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mouseout\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mousemove\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchstart\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchmove\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchleave\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchend\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchcancel\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * Options for pressure label.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~presLabelOptions\n * @property {string|Object} [fill]\n *   Fill option for background rect. Default is 'white' with opacity 0.7.\n * @property {number} [horizontalMargin=5] - Margin in x direction.\n * @property {number} [verticalMargin=0] - Margin in y direction.\n * @property {number|'100%'} [length=60]\n *   Length of the horizontal line. A number is in pixel unit. A string\n *   with a appended '%' indicates a length relative to the diagram width.\n * @property {'left'|'right'} [align='left']\n *   Align pressure label left/right in the diagram.\n */\n\n/**\n * Options for labels.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions\n * @property {string|Object} [fill]\n *   Fill option for background rect. Default is 'white' with opacity 0.7.\n * @property {number} [horizontalMargin=10] - Margin in x direction.\n * @property {number} [verticalMargin=0] - Margin in y direction.\n * @property {number} [radius=undefined] - Radius for hover circle.\n * @property {number} [radiusPlus=2]\n *   Radius relative to line width for hover circle.\n */\n\n/**\n * Options for labels on hovering the thermodynamic diagram.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~hoverLabelsOptions\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~presLabelOptions}\n *   [pres] - Options for pressure label.\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions}\n *   [temp] - Options for temperature label.\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions}\n *   [dewp] - Options for dew point label.\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions}\n *   [wetbulb] - Options for wetbulb temperature label.\n */\n\n/**\n * Options for parcels in the diagram.\n * \n * @typedef {Object}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~parcelsOptions\n * @property {boolean} [visible=true] - Visibility of parcels.\n */\n\n/**\n * Definition of lines in a thermodynamic diagram.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions\n * @property {undefined|Array<number>} [highlightedLines=undefined]\n *   Highlight lines at this values.\n * @property {undefined|Array<number>} [lines=undefined]\n *   Draw values for this values.\n * @property {number} [max=undefined]\n *   Maximum value for a line. Ignored if lines is set.\n * @property {number} [min=undefined]\n *   Minimum value for a line. Ignored if lines is set.\n * @property {number} [interval=undefined]\n *   Interval between different lines. Ignored if lines is set.\n * @property {number} [maxPressure=undefined]\n *   Start line from this maximum pressure.\n * @property {number} [minPressure=undefined]\n *   End line at this minimum pressure.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~options\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [isobars] - Isobars configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [isotherms] - Isotherms configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [dryadiabats] - Dry adiabats configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [pseudoadiabats] - Pseudo adiabats configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [mixingratio] - Mixing ratio configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~hoverLabelsOptions}\n *   [hoverLabels] - Hover labels options.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~parcelsOptions}\n *   [parcels] - Parcels options.\n */\n\n/**\n * Class to draw the real thermodynamic diagram.\n * \n * <pre><code>import TDDiagram from 'meteojs/thermodynamicDiagram/TDDiagram';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea.PlotAltitudeDataArea\n * \n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#click\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#dblclick\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mousedown\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mouseup\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mouseover\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mouseout\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mousemove\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchstart\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchmove\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchleave\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchend\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchcancel\n */\nexport class TDDiagram extends PlotAltitudeDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions} [options]\n   *   Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n    style = {},\n    visible = true,\n    events = {},\n    dataGroupIds = ['temp', 'dewp', 'wetbulb'],\n    getCoordinatesByLevelData = (dataGroupId, sounding, levelData, plotArea) => {\n      if (levelData.pres === undefined)\n        return {};\n      \n      let value = undefined;\n      switch (dataGroupId) {\n      case 'temp':\n        value = levelData.tmpk;\n        break;\n      case 'dewp':\n        value = levelData.dwpk;\n        break;\n      case 'wetbulb':\n        value = wetbulbTempByTempAndDewpointAndPres(\n          levelData.tmpk,\n          levelData.dwpk,\n          levelData.pres\n        );\n        break;\n      }\n      if (value === undefined)\n        return {};\n      \n      return {\n        x: plotArea.coordinateSystem.getXByPT(levelData.pres, value),\n        y: plotArea.coordinateSystem.height -\n          plotArea.coordinateSystem.getYByPT(levelData.pres, value),\n        value: Math.round(tempKelvinToCelsius(value)*10)/10,\n        unit: '℃'\n      };\n    },\n    insertDataGroupInto = (svgNode, dataGroupId, sounding, data) => {\n      const options =\n        (dataGroupId in sounding.options.diagram)\n          ? sounding.options.diagram[dataGroupId].style : {};\n      svgNode.group()\n        .polyline(data.map(level => [ level.x, level.y ]))\n        .fill('none').stroke(options);\n    },\n    filterDataPoint = undefined,\n    minDataPointsDistance = 0,\n    isobars = {},\n    isotherms = {},\n    dryadiabats = {},\n    pseudoadiabats = {},\n    mixingratio = {},\n    hoverLabels = {},\n    parcels = {}\n  } = {}) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      hoverLabels,\n      getSoundingVisibility:\n        sounding => sounding.visible && sounding.options.diagram.visible,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto,\n      filterDataPoint,\n      minDataPointsDistance\n    });\n    \n    this.options = {\n      isobars: getNormalizedDiagramLineOptions(isobars),\n      isotherms:\n        getNormalizedDiagramLineOptions(isotherms, {\n          highlightedLines: [tempCelsiusToKelvin(0)]\n        }),\n      dryadiabats:\n        getNormalizedDiagramLineOptions(dryadiabats),\n      pseudoadiabats:\n        getNormalizedDiagramLineOptions(pseudoadiabats, {\n          style: {\n            color: 'rgb(102, 51, 0)',\n            dasharray: 6\n          }\n        }),\n      mixingratio:\n        getNormalizedDiagramLineOptions(mixingratio, {\n          minPressure: 500,\n          style: {\n            color: 'rgb(102, 51, 0)',\n            dasharray: 2\n          }\n        })\n    };\n    \n    this.svgGroups = {\n      border: this._svgNodeBackground.group(),\n      isobars: this._svgNodeBackground.group(),\n      isotherms: this._svgNodeBackground.group(),\n      dryadiabats: this._svgNodeBackground.group(),\n      mixingratio: this._svgNodeBackground.group(),\n      pseudoadiabats: this._svgNodeBackground.group()\n    };\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/tdDiagram~parcelsOptions\n     * @private\n     */\n    this._parcelsOptions = parcels;\n    if (!('visible' in this._parcelsOptions))\n      this._parcelsOptions.visible = true;\n    \n    /**\n     * @typedef {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsItems}\n     * @property {undefined|external:SVG} parcelsGroup\n     *   SVG Group to plot the parcels.\n     * @property {Map.<module:meteoJS/thermodynamicDiagram/diagramParcel.DiagramParcel,external:SVG>} parcelsGroup\n     *   Pairs of DiagramParcel objects and SVG Group. The parcel is plotted\n     *   into the group. The group is contained in 'parcelsGroup'.\n     * @property {undefined|mixed} addItemListenerKey\n     *   Listener key for the {@link module:meteoJS/base/collection#add:item} event\n     *   on {@link module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding#diagramParcelCollection}\n     *   for each sounding plotted in this diagram.\n     * @property {Object[]} changeVisibleListeners\n     * @property {Object[]} changeOptionsListeners\n     */\n    \n    /**\n     * @type Map.<module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding,module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsItems>\n     * @private\n     */\n    this._parcels = new Map();\n    this.on('add:sounding', sounding => {\n      /** @type module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsItems */\n      const soundingParcelsItems = {\n        parcelsGroup: undefined,\n        parcelsGroups: new Map(),\n        addItemListenerKey: undefined,\n        changeVisibleListeners: [],\n        changeOptionsListeners: []\n      };\n      const onAddParcel = diagramParcel => {\n        soundingParcelsItems.changeVisibleListeners.push({\n          diagramParcel,\n          listenerKey: diagramParcel.on('change:visible', () => {\n            if (!soundingParcelsItems.parcelsGroups.has(diagramParcel))\n              return;\n            const group = soundingParcelsItems.parcelsGroups.get(diagramParcel);\n            diagramParcel.visible ? group.show() : group.hide();\n          })\n        });\n        soundingParcelsItems.changeOptionsListeners.push({\n          diagramParcel,\n          listenerKey: diagramParcel.on('change:options', () => {\n            // Delte old parcel\n            const soundingParcelsItems = this._parcels.get(sounding);\n            if (soundingParcelsItems !== undefined) {\n              const group =\n                soundingParcelsItems.parcelsGroups.get(diagramParcel);\n              if (group !== undefined) {\n                soundingParcelsItems.parcelsGroups.delete(diagramParcel);\n                group.remove();\n              }\n            }\n            // Redraw\n            this.drawParcel(sounding, diagramParcel);\n          })\n        });\n      };\n      soundingParcelsItems.addItemListenerKey =\n        sounding.diagramParcelCollection.on('add:item', diagramParcel => {\n          onAddParcel(diagramParcel);\n          this.drawParcel(sounding, diagramParcel);\n        });\n      for (let diagramParcel of sounding.diagramParcelCollection)\n        onAddParcel(diagramParcel);\n      this._parcels.set(sounding, soundingParcelsItems);\n      /* After this event, {@link module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram#drawSounding}\n       * is executed and therefore also\n       * {@link module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram#drawParcels}.\n       */\n    });\n    // Remove all listeners on the parcels contained in the removed sounding.\n    this.on('remove:sounding', sounding => {\n      if (this._parcels.has(sounding)) {\n        /** @type module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsItems */\n        const soundingParcelsItems = this._parcels.get(sounding);\n        sounding.diagramParcelCollection\n          .un('add:item', soundingParcelsItems.addItemListenerKey);\n        soundingParcelsItems.changeVisibleListeners\n          .forEach(listenerObj =>\n            listenerObj.diagramParcel\n              .un('change:visible', listenerObj.listenerKey));\n        soundingParcelsItems.changeOptionsListeners\n          .forEach(listenerObj =>\n            listenerObj.diagramParcel\n              .un('change:options', listenerObj.listenerKey));\n      }\n      this._parcels.delete(sounding);\n    });\n    \n    this.init();\n  }\n  \n  /**\n   * Return the visibility of the isobars.\n   * @returns {boolean} Visibility of the isobars.\n   * @deprecated\n   */\n  getIsobarsVisible() {\n    return this.options.isobars.visible;\n  }\n  \n  /**\n   * Sets the visibility of the isobars.\n   * @param {boolean} visible Visibility of the isobars.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setIsobarsVisible(visible) {\n    this.options.isobars.visible = visible ? true : false;\n    this.plotIsobars();\n    return this;\n  }\n  \n  /**\n   * Return the visibility of the isotherms.\n   * @returns {boolean} Visibility of the isotherms.\n   * @deprecated\n   */\n  getIsothermsVisible() {\n    return this.options.isotherms.visible;\n  }\n  \n  /**\n   * Sets the visibility of the isotherms.\n   * @param {boolean} visible Visibility of the isotherms.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setIsothermsVisible(visible) {\n    this.options.isotherms.visible = visible ? true : false;\n    this.plotIsotherms();\n    return this;\n  }\n  \n  /**\n   * Return the visibility of the dry adiabats.\n   * @returns {boolean} Visibility of the dry adiabats.\n   * @deprecated\n   */\n  getDryadiabatsVisible() {\n    return this.options.dryadiabats.visible;\n  }\n  \n  /**\n   * Sets the visibility of the dry adiabats.\n   * @param {boolean} visible Visibility of the dry adiabats.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setDryadiabatsVisible(visible) {\n    this.options.dryadiabats.visible = visible ? true : false;\n    this.plotDryadiabats();\n    return this;\n  }\n  \n  /**\n   * Return the visibility of the pseudo adiabats.\n   * @returns {boolean} Visibility of the pseudo adiabats.\n   * @deprecated\n   */\n  getPseudoadiabatsVisible() {\n    return this.options.pseudoadiabats.visible;\n  }\n  \n  /**\n   * Sets the visibility of the pseudo adiabats.\n   * @param {boolean} visible Visibility of the pseudo adiabats.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setPseudoadiabatsVisible(visible) {\n    this.options.pseudoadiabats.visible = visible ? true : false;\n    this.plotPseudoadiabats();\n    return this;\n  }\n  \n  /**\n   * Return the visibility of the mixing ratio.\n   * @returns {boolean} Visibility of the mixing ratio.\n   * @deprecated\n   */\n  getMixingratioVisible() {\n    return this.options.mixingratio.visible;\n  }\n  \n  /**\n   * Sets the visibility of the mixing ratio.\n   * @param {boolean} visible Visibility of the mixing ratio.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setMixingratioVisible(visible) {\n    this.options.mixingratio.visible = visible ? true : false;\n    this.plotMixingratio();\n    return this;\n  }\n  \n  /**\n   * Draw the sounding into the SVG group.\n   * \n   * @override\n   */\n  drawSounding(sounding, group) {\n    super.drawSounding(sounding, group);\n    \n    // Draw parcels\n    if (this._parcels.has(sounding)) {\n      let parcelsObj = this._parcels.get(sounding);\n      parcelsObj.parcelsGroup = group.group();\n      if (!sounding.options.parcels.visible)\n        parcelsObj.parcelsGroup.hide();\n      this._parcels.set(sounding, parcelsObj);\n    }\n    this.drawParcels(sounding);\n  }\n  \n  /**\n   * Draws parcels of a sounding.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding.\n   */\n  drawParcels(sounding) {\n    if (!this._parcelsOptions.visible)\n      return;\n    if (!this._parcels.has(sounding))\n      return;\n    \n    /** @type module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsItems */\n    const soundingParcelsItems = this._parcels.get(sounding);\n    soundingParcelsItems.parcelsGroup.clear();\n    soundingParcelsItems.parcelsGroups.clear();\n    for (let diagramParcel of sounding.diagramParcelCollection)\n      this.drawParcel(sounding, diagramParcel);\n  }\n  \n  /**\n   * Draws a parcel.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   diagramSounding - DiagramSounding object, which contains the parcel.\n   * @param {module:meteoJS/thermodynamicDiagram/diagramParcel.DiagramParcel}\n   *   diagramParcel - Parcel lift to draw.\n   * @param {external:SVG} group - SVG group to draw parcel into.\n   * @private\n   */\n  drawParcel(diagramSounding, diagramParcel) {\n    const parcel = diagramParcel.parcel;\n    if (parcel.pres === undefined ||\n        parcel.tmpc === undefined ||\n        parcel.dwpc === undefined)\n      return;\n    if (!this._parcels.has(diagramSounding))\n      return;\n    const soundingParcelsItems = this._parcels.get(diagramSounding);\n    const group = soundingParcelsItems.parcelsGroup.group();\n    soundingParcelsItems.parcelsGroups.set(diagramParcel, group);\n    this._parcels.set(diagramSounding, soundingParcelsItems);\n    \n    const pottmpk =\n      potentialTempByTempAndPres(tempCelsiusToKelvin(parcel.tmpc), parcel.pres);\n    const hmr =\n      saturationHMRByTempAndPres(tempCelsiusToKelvin(parcel.dwpc), parcel.pres);\n    const lclpres = lclByPotentialTempAndHMR(pottmpk, hmr);\n    const lcltmpk = lclTemperatureByTempAndDewpoint(\n      tempCelsiusToKelvin(parcel.tmpc),\n      tempCelsiusToKelvin(parcel.dwpc));\n    const lclthetaek = equiPotentialTempByTempAndDewpointAndPres(\n      lcltmpk, lcltmpk, lclpres);\n    \n    const options = diagramParcel.options;\n    \n    // SVG groups\n    if (!options.visible)\n      group.hide();\n    const tempGroup = group.group();\n    if (!options.temp.visible)\n      tempGroup.hide();\n    let dewpGroup = group.group();\n    if (!options.dewp.visible)\n      dewpGroup.hide();\n    \n    // Draw temp curve\n    const yInterval = 10;\n    const y0 = this.coordinateSystem\n      .getYByPT(parcel.pres, tempCelsiusToKelvin(parcel.tmpc));\n    const x0 = this.coordinateSystem.getXByYPotentialTemperature(y0, pottmpk);\n    const y1 = this.coordinateSystem.getYByPPotentialTemperatur(lclpres, pottmpk);\n    const x1 = this.coordinateSystem.getXByYPotentialTemperature(y1, pottmpk);\n    let tempPolyline = [[x0, y0]];\n    if (!this.coordinateSystem.isDryAdiabatStraightLine())\n      for (let y=y0+yInterval; y<y1; y+=yInterval) {\n        tempPolyline.push([\n          this.coordinateSystem.getXByYPotentialTemperature(y, pottmpk),\n          y\n        ]);\n      }\n    tempPolyline.push([x1, y1]);\n    const y2 = this.coordinateSystem.height;\n    const x2 = this.coordinateSystem.getXByYEquiPotTemp(y2, lclthetaek);\n    for (let y=y1+yInterval; y<y2; y+=yInterval) {\n      tempPolyline.push([\n        this.coordinateSystem.getXByYEquiPotTemp(y, lclthetaek),\n        y\n      ]);\n    }\n    tempPolyline.push([x2, y2]);\n    tempGroup\n      .polyline(tempPolyline.map(point => {\n        point[1] = this.coordinateSystem.height - point[1];\n        return point;\n      }))\n      .fill('none')\n      .stroke(options.temp.style);\n    \n    // Draw mixing ratio curve\n    const x0dwp = this.coordinateSystem.getXByYHMR(y0, hmr);\n    const x1dwp = this.coordinateSystem.getXByYHMR(y1, hmr);\n    let dewpPolyline = [[x0dwp, y0]];\n    for (let y=y0+yInterval; y<y1; y+=yInterval) {\n      dewpPolyline.push([\n        this.coordinateSystem.getXByYHMR(y, hmr),\n        y\n      ]);\n    }\n    dewpPolyline.push([x1dwp, y1]);\n    dewpGroup\n      .polyline(dewpPolyline.map(point => {\n        point[1] = this.coordinateSystem.height - point[1];\n        return point;\n      }))\n      .fill('none')\n      .stroke(options.dewp.style);\n  }\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    super._drawBackground(svgNode);\n    \n    this.svgGroups = {\n      border: svgNode.group(),\n      isobars: svgNode.group(),\n      isotherms: svgNode.group(),\n      dryadiabats: svgNode.group(),\n      mixingratio: svgNode.group(),\n      pseudoadiabats: svgNode.group()\n    };\n    \n    // Rand des Diagramms\n    this.svgGroups.border.clear();\n    this.svgGroups.border\n      .rect(this.coordinateSystem.width, this.coordinateSystem.height)\n      .attr({stroke: 'black', 'stroke-width': 1, 'fill-opacity': 0});\n    \n    // Hilfelinien zeichnen\n    this.plotIsobars(true);\n    this.plotIsotherms(true);\n    this.plotDryadiabats(true);\n    this.plotPseudoadiabats(true);\n    this.plotMixingratio(true);\n  }\n   \n  /**\n   * @private\n   */\n  plotIsobars(redraw) {\n    let min = this.coordinateSystem.getPByXY(0, this.coordinateSystem.height);\n    let max = this.coordinateSystem.getPByXY(0, 0);\n    let delta = max - min;\n    this._plotLines(\n      this.svgGroups.isobars,\n      this.options.isobars,\n      {\n        min: min,\n        max: max,\n        interval: (delta > 500) ? 100 : (delta > 50) ? 10 : 1\n      },\n      p => {\n        let y = this.coordinateSystem.getYByXP(0, p);\n        return [[0, y], [this.coordinateSystem.width, y]];\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  plotIsotherms(redraw) {\n    let min = tempKelvinToCelsius(\n      this.coordinateSystem.getTByXY(0, this.coordinateSystem.height));\n    let max = tempKelvinToCelsius(\n      this.coordinateSystem.getTByXY(this.coordinateSystem.width, 0));\n    let delta = max - min;\n    this._plotLines(\n      this.svgGroups.isotherms,\n      this.options.isotherms,\n      {\n        min: min,\n        max: max,\n        interval: (delta > 50) ? 10 : 5\n      },\n      T => {\n        T = tempCelsiusToKelvin(T);\n        let result = [[undefined, undefined], [undefined, undefined]];\n        if (this.coordinateSystem.isIsothermsVertical()) {\n          result[0][1] = 0;\n          result[1][1] = this.coordinateSystem.height;\n          result[0][0] = result[1][0] = this.coordinateSystem.getXByYT(result[0][1], T);\n        }\n        else {\n          result[0][1] = 0;\n          result[0][0] = this.coordinateSystem.getXByYT(result[0][1], T);\n          if (result[0][0] < 0)\n            result[0][1] = this.coordinateSystem.getYByXT(result[0][0] = 0, T);\n          result[1][0] = this.coordinateSystem.width;\n          result[1][1] = this.coordinateSystem.getYByXT(result[1][0], T);\n          if (result[1][1] === undefined) {\n            result[1][0] = result[0][0];\n            result[1][1] = this.coordinateSystem.height;\n          }\n          else if (result[1][1] > this.coordinateSystem.height) {\n            result[1][1] = this.coordinateSystem.height;\n            result[1][0] = this.coordinateSystem.getXByYT(result[1][1], T);\n          }\n        }\n        return result;\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  plotDryadiabats(redraw) {\n    this._plotLines(\n      this.svgGroups.dryadiabats,\n      this.options.dryadiabats,\n      {\n        min: tempKelvinToCelsius(\n          potentialTempByTempAndPres(\n            this.coordinateSystem.getTByXY(0, 0),\n            this.coordinateSystem.getPByXY(0, 0))),\n        max: tempKelvinToCelsius(\n          potentialTempByTempAndPres(\n            this.coordinateSystem.getTByXY(this.coordinateSystem.width, this.coordinateSystem.height),\n            this.coordinateSystem.getPByXY(this.coordinateSystem.width, this.coordinateSystem.height))),\n        interval: 10\n      },\n      T => {\n        let TKelvin = tempCelsiusToKelvin(T);\n        let y0 = 0;\n        let x0 = this.coordinateSystem.getXByYPotentialTemperature(y0, TKelvin);\n        if (x0 === undefined ||\n          x0 > this.coordinateSystem.width) {\n          x0 = this.coordinateSystem.width;\n          y0 = this.coordinateSystem.getYByXPotentialTemperature(x0, TKelvin);\n        }\n        let x1 = 0;\n        let y1 = this.coordinateSystem.getYByXPotentialTemperature(x1, TKelvin);\n        if (y1 === undefined ||\n          y1 > this.coordinateSystem.height) {\n          y1 = this.coordinateSystem.height;\n          x1 = this.coordinateSystem.getXByYPotentialTemperature(y1, TKelvin);\n        }\n        if (x0 === undefined ||\n          y0 === undefined ||\n          x1 === undefined ||\n          y1 === undefined)\n          return undefined;\n        if (this.coordinateSystem.isDryAdiabatStraightLine()) {\n          return [[x0, y0], [x1, y1]];\n        }\n        else {\n          let points = [[x0, y0]];\n          let yInterval = 10;\n          for (let y=y0+yInterval; y<y1; y+=yInterval) {\n            points.push([\n              this.coordinateSystem.getXByYPotentialTemperature(y, TKelvin),\n              y\n            ]);\n          }\n          points.push([x1, y1]);\n          return points;\n        }\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  plotPseudoadiabats(redraw) {\n    this._plotLines(\n      this.svgGroups.pseudoadiabats,\n      this.options.pseudoadiabats,\n      {\n        lines: [-18, -5, 10, 30, 60, 110, 180]\n      },\n      thetae => {\n        let thetaeKelvin = tempCelsiusToKelvin(thetae);\n        const y0 =\n          Math.max(\n            0,\n            (this.options.pseudoadiabats.maxPressure === undefined)\n              ? 0\n              : this.coordinateSystem.getYByPEquiPotTemp(\n                this.options.pseudoadiabats.maxPressure, thetaeKelvin)\n          );\n        const x0 = this.coordinateSystem.getXByYEquiPotTemp(y0, thetaeKelvin);\n        const y1 =\n          Math.min(\n            this.coordinateSystem.height,\n            (this.options.pseudoadiabats.minPressure === undefined)\n              ? this.coordinateSystem.height\n              : this.coordinateSystem.getYByPEquiPotTemp(\n                this.options.pseudoadiabats.minPressure, thetaeKelvin)\n          );\n        const x1 = this.coordinateSystem.getXByYEquiPotTemp(y1, thetaeKelvin);\n        let points = [[x0, y0]];\n        let yInterval = 10;\n        for (let y=y0+yInterval; y<y1; y+=yInterval) {\n          points.push([\n            this.coordinateSystem.getXByYEquiPotTemp(y, thetaeKelvin),\n            y\n          ]);\n        }\n        points.push([x1, y1]);\n        return points;\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  plotMixingratio(redraw) {\n    this._plotLines(\n      this.svgGroups.mixingratio,\n      this.options.mixingratio,\n      {\n        lines: [0.01, 0.1, 1, 2, 4, 7, 10, 16, 21, 32, 40]\n      },\n      hmr => {\n        const y0 =\n          Math.max(\n            0,\n            (this.options.mixingratio.maxPressure === undefined)\n              ? 0\n              : this.coordinateSystem.getYByPHMR(\n                this.options.mixingratio.maxPressure, hmr)\n          );\n        const x0 = this.coordinateSystem.getXByYHMR(y0, hmr);\n        const y1 =\n          Math.min(\n            this.coordinateSystem.height,\n            (this.options.mixingratio.minPressure === undefined)\n              ? this.coordinateSystem.height\n              : this.coordinateSystem.getYByPHMR(\n                this.options.mixingratio.minPressure, hmr)\n          );\n        const x1 = this.coordinateSystem.getXByYHMR(y1, hmr);\n        let points = [[x0, y0]];\n        const yInterval = 10;\n        for (let y=y0+yInterval; y<y1; y+=yInterval) {\n          points.push([\n            this.coordinateSystem.getXByYHMR(y, hmr),\n            y\n          ]);\n        }\n        points.push([x1, y1]);\n        return points;\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  _plotLines(node, options, valuesOptions, pointsFunc, redraw) {\n    options.visible\n      ? node.show()\n      : node.hide();\n    if (!redraw)\n      return;\n    node.clear();\n    let lines = [];\n    if (options.lines !== undefined)\n      lines = options.lines;\n    else if (options.min === undefined &&\n           options.max === undefined &&\n           options.interval === undefined &&\n           valuesOptions.lines !== undefined)\n      lines = valuesOptions.lines;\n    else {\n      if (options.min !== undefined)\n        valuesOptions.min = options.min;\n      if (options.max !== undefined)\n        valuesOptions.max = options.max;\n      let interval = options.interval;\n      if (interval === undefined)\n        interval = valuesOptions.interval;\n      let start = Math.ceil(valuesOptions.min/interval)*interval;\n      let end = Math.floor(valuesOptions.max/interval)*interval;\n      for (let v=start; v<=end; v+=interval) {\n        lines.push(v);\n      }\n    }\n    let highlightLineWidth = 3;\n    if (options.style.width !== undefined)\n      highlightLineWidth = options.style.width+2;\n    lines.forEach(function (v) {\n      let points = pointsFunc.call(this, v);\n      let line = (points.length == 2) ?\n        node.line(points[0][0], this.coordinateSystem.height-points[0][1],\n          points[1][0], this.coordinateSystem.height-points[1][1])\n          .stroke(options.style) :\n        node.polyline(points.map(function (point) {\n          point[1] = this.coordinateSystem.height - point[1];\n          return point;\n        }, this))\n          .fill('none').stroke(options.style);\n      if (options.highlightedLines !== undefined)\n        options.highlightedLines.forEach(function (vHighlight) {\n          if (v == vHighlight)\n            line.stroke({width: highlightLineWidth});\n        }, this);\n    }, this);\n  }\n  \n  /**\n   * Extend an event with temperature and pressure.\n   * \n   * @override\n   */\n  getExtendedEvent(e, p) {\n    e = super.getExtendedEvent(e, p);\n    e.diagramTmpk =\n      this.coordinateSystem.getTByXY(e.elementX,\n        this.coordinateSystem.height - e.elementY);\n    return e;\n  }\n  \n  /**\n   * Initialize hover labels options.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~hoverLabelsOptions}\n   *   options - Hover labels options.\n   * @override\n   */\n  _initHoverLabels({\n    visible = true,\n    type = 'mousemove',\n    snapToData = true,\n    remote = true,\n    insertLabelsFunc = undefined,\n    pres = {},\n    temp = {},\n    dewp = {},\n    wetbulb = {}\n  }) {\n    pres.length = ('length' in pres) ? pres.length : 60;\n    pres.align = ('align' in pres) ? pres.align : 'left';\n    if (!('visible' in pres))\n      pres.visible = true;\n    if (!('style' in pres))\n      pres.style = {};\n    pres.font = getNormalizedFontOptions(pres.font, {\n      anchor: (pres.align == 'right') ? 'end' : 'start'\n    });\n    if (!('fill' in pres))\n      pres.fill = {};\n    if (pres.fill.opacity === undefined)\n      pres.fill.opacity = 0.7;\n    if (pres.horizontalMargin === undefined)\n      pres.horizontalMargin = 5;\n    \n    if (!('visible' in temp))\n      temp.visible = true;\n    if (!('style' in temp))\n      temp.style = {};\n    temp.font = getNormalizedFontOptions(temp.font, {\n      anchor: 'start',\n      'alignment-baseline': 'bottom'\n    });\n    if (!('fill' in temp))\n      temp.fill = {};\n    if (temp.fill.opacity === undefined)\n      temp.fill.opacity = 0.7;\n    temp.radius = ('radius' in temp) ? temp.radius : undefined;\n    temp.radiusPlus = ('radiusPlus' in temp) ? temp.radiusPlus : 2;\n    if (temp.horizontalMargin === undefined)\n      temp.horizontalMargin = 10;\n    \n    if (!('visible' in dewp))\n      dewp.visible = true;\n    if (!('style' in dewp))\n      dewp.style = {};\n    dewp.font = getNormalizedFontOptions(dewp.font, {\n      anchor: 'end',\n      'alignment-baseline': 'bottom'\n    });\n    if (!('fill' in dewp))\n      dewp.fill = {};\n    if (dewp.fill.opacity === undefined)\n      dewp.fill.opacity = 0.7;\n    dewp.radius = ('radius' in dewp) ? dewp.radius : undefined;\n    dewp.radiusPlus = ('radiusPlus' in dewp) ? dewp.radiusPlus : 2;\n    if (dewp.horizontalMargin === undefined)\n      dewp.horizontalMargin = 10;\n    \n    if (!('visible' in wetbulb))\n      wetbulb.visible = true;\n    if (!('style' in wetbulb))\n      wetbulb.style = {};\n    wetbulb.font = getNormalizedFontOptions(wetbulb.font, {\n      anchor: 'middle'\n    });\n    if (!('fill' in wetbulb))\n      wetbulb.fill = {};\n    if (wetbulb.fill.opacity === undefined)\n      wetbulb.fill.opacity = 0.7;\n    wetbulb.radius = ('radius' in wetbulb) ? wetbulb.radius : undefined;\n    wetbulb.radiusPlus = ('radiusPlus' in wetbulb) ? wetbulb.radiusPlus : 2;\n    if (wetbulb.verticalMargin === undefined)\n      wetbulb.verticalMargin = 10;\n    \n    if (insertLabelsFunc === undefined)\n      insertLabelsFunc =\n        this._makeInsertLabelsFunc(pres, temp, dewp, wetbulb);\n    \n    super._initHoverLabels({\n      visible,\n      type,\n      snapToData,\n      remote,\n      insertLabelsFunc\n    });\n  }\n  \n  /**\n   * Makes a default insertLabelsFunc.\n   * \n   * @param {Object} pres\n   * @param {Object} temp\n   * @param {Object} dewp\n   * @param {Object} wetbulb\n   * @private\n   */\n  _makeInsertLabelsFunc(pres, temp, dewp, wetbulb) {\n    return (sounding, levelData, group) => {\n      group.clear();\n      \n      if (levelData.pres === undefined)\n        return;\n      \n      if (pres.visible)\n        drawPressureHoverLabelInto(group, levelData, this.coordinateSystem, pres);\n      \n      this.dataGroupIds.reverse().forEach(dataGroupId => {\n        let labelOptions = {\n          visible: false\n        };\n        switch (dataGroupId) {\n        case 'temp': labelOptions = temp; break;\n        case 'dewp': labelOptions = dewp; break;\n        case 'wetbulb': labelOptions = wetbulb; break;\n        }\n        if (!labelOptions.visible)\n          return;\n        \n        const { x, y, value, unit } =\n          this._getCoordinatesByLevelData(dataGroupId,\n            sounding, levelData, this);\n        if (x === undefined ||\n            y === undefined)\n          return;\n        \n        const lineWidth =\n          (dataGroupId in this.hoverLabelsSounding.options.diagram)\n            ? this.hoverLabelsSounding.options.diagram[dataGroupId].style.width\n            : 3;\n        const radius = (labelOptions.radius === undefined)\n          ? lineWidth + labelOptions.radiusPlus\n          : labelOptions.radius;\n        const fillOptions = labelOptions.style;\n        if (!('color' in fillOptions) &&\n            (dataGroupId in this.hoverLabelsSounding.options.diagram))\n          fillOptions.color = sounding.options.diagram[dataGroupId].style.color;\n        group\n          .circle(2 * radius)\n          .attr({ cx: x, cy: y })\n          .fill(fillOptions);\n        drawTextInto({\n          node: group,\n          text: `${value} ${unit}`,\n          x,\n          y,\n          horizontalMargin: labelOptions.horizontalMargin,\n          verticalMargin: labelOptions.verticalMargin,\n          font: labelOptions.font,\n          fill: labelOptions.fill\n        });\n      });\n    };\n  }\n}\nexport default TDDiagram;\n\n/**\n * Draws pressure hover label.\n * \n * @param {external:SVG} svgNode - SVG node to draw into.\n * @param {number} pres - Pressure.\n * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem}\n *   coordinateSystem - Coordinate system.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~presLabelOptions}\n *   [options] - Options.\n */\nexport function drawPressureHoverLabelInto(svgNode, levelData, coordinateSystem, {\n  length = 60,\n  align = 'left',\n  horizontalMargin = undefined,\n  verticalMargin = undefined,\n  style = {},\n  font = {},\n  fill = {}\n} = {}) {\n  let x0 = 0;\n  let x1 = length;\n  const match = /^([0-9]+)%$/.exec(x1);\n  if (match)\n    x1 = match[1] / 100 * coordinateSystem.width;\n  if (align == 'right') {\n    x0 = coordinateSystem.width;\n    x1 = coordinateSystem.width - x1;\n  }\n  const y = coordinateSystem.height -\n    coordinateSystem.getYByXP(0, levelData.pres);\n  style = getNormalizedLineStyleOptions(style);\n  svgNode\n    .line([\n      [Math.min(x0, x1), y],\n      [Math.max(x0, x1), y]\n    ])\n    .stroke(style);\n  font = getNormalizedFontOptions(font);\n  font['alignment-baseline'] = 'bottom';\n  drawTextInto({\n    node: svgNode,\n    text: `${Math.round(levelData.pres)} hPa`,\n    x: x0,\n    y,\n    horizontalMargin,\n    verticalMargin,\n    font,\n    fill\n  });\n  \n  font['alignment-baseline'] = 'top';\n  let hghtStr = (levelData.hght === undefined)\n    ? `~${Math.round(altitudeISAByPres(levelData.pres))} m`\n    : `${Math.round(levelData.hght)} m`;\n  drawTextInto({\n    node: svgNode,\n    text: hghtStr,\n    x: x0,\n    y: y,\n    horizontalMargin,\n    verticalMargin,\n    font,\n    fill\n  });\n}\n\nfunction getNormalizedDiagramLineOptions({\n  highlightedLines = undefined,\n  interval = undefined,\n  lines = undefined,\n  max = undefined,\n  min = undefined,\n  maxPressure = undefined,\n  minPressure = undefined,\n  style = undefined,\n  visible = undefined\n}, defaults = {}) {\n  return {\n    highlightedLines: getFirstDefinedValue(highlightedLines, defaults.highlightedLines),\n    interval: getFirstDefinedValue(interval, defaults.interval),\n    lines: getFirstDefinedValue(lines, defaults.lines),\n    max: getFirstDefinedValue(max, defaults.max),\n    min: getFirstDefinedValue(min, defaults.min),\n    maxPressure: getFirstDefinedValue(maxPressure, defaults.maxPressure),\n    minPressure: getFirstDefinedValue(minPressure, defaults.minPressure),\n    style: getNormalizedLineStyleOptions(style, defaults.style),\n    visible: getFirstDefinedValue(visible, defaults.visible, true)\n  };\n}","/**\n * @module meteoJS/thermodynamicDiagram/windbarbsProfile\n */\nimport { drawWindbarbInto } from './Functions.js';\nimport PlotAltitudeDataArea from './PlotAltitudeDataArea.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/windbarbsProfile~options\n * @param {number} [windbarbLength]\n *   Length of windbarbs. Default is 40% of the Plot-Area width.\n * @param {number} [minDataPointsDistance]\n *   Minimum distance between data points in pixels. If filterDataPoint is set,\n *   minDataPointsDistance is ignored. If undefined, then minDataPointsDistance\n *   is set to the half of windbarbLength.\n */\n\n/**\n * Class to draw the profile with windbarbs.\n * \n * <pre><code>import WindbarbsProfile from 'meteojs/thermodynamicDiagram/WindbarbsProfile';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea.PlotAltitudeDataArea\n */\nexport class WindbarbsProfile extends PlotAltitudeDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/windbarbsProfile~options}\n   *   options - Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = undefined,\n    y = undefined,\n    width = undefined,\n    height = undefined,\n    style = {},\n    visible = true,\n    events = {},\n    hoverLabels = {},\n    windbarbLength = undefined,\n    dataGroupIds = ['windbarbs'],\n    getCoordinatesByLevelData = (dataGroupId, sounding, levelData, plotArea) => {\n      if (levelData.pres === undefined ||\n          levelData.wspd === undefined ||\n          levelData.wdir === undefined)\n        return {};\n      \n      return {\n        x: plotArea.width / 2,\n        y: plotArea.coordinateSystem.height -\n          plotArea.coordinateSystem.getYByXP(0, levelData.pres)\n      };\n    },\n    insertDataGroupInto = (svgNode, dataGroupId, sounding, data, plotArea) => {\n      data.forEach(windbarbData => {\n        drawWindbarbInto({\n          node: svgNode,\n          x: plotArea.width/2,\n          y: windbarbData.y,\n          wspd: windbarbData.levelData.wspd,\n          wdir: windbarbData.levelData.wdir,\n          length: plotArea._windbarbLength,\n          strokeStyle: sounding.options.windprofile.windbarbs.style\n        });\n      });\n    },\n    filterDataPoint = undefined,\n    minDataPointsDistance = undefined\n  }) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      hoverLabels,\n      getSoundingVisibility:\n        sounding => sounding.visible && sounding.options.windprofile.windbarbs.visible,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto,\n      filterDataPoint,\n      minDataPointsDistance:\n        (minDataPointsDistance === undefined) ? 0 : minDataPointsDistance\n    });\n    \n    /**\n     * @type number\n     * @private\n     */\n    this._windbarbLength = windbarbLength;\n    if (this._windbarbLength === undefined)\n      this._windbarbLength = this.width * 2/5;\n    \n    if (minDataPointsDistance === undefined)\n      this.minDataPointsDistance = this._windbarbLength / 2;\n    \n    this.init();\n  }\n}\nexport default WindbarbsProfile;","/**\n * @module meteoJS/thermodynamicDiagram/windspeedProfile\n */\nimport {\n  windspeedMSToKN,\n  windspeedKNToMS\n} from '../calc.js';\nimport {\n  getNormalizedFontOptions,\n  drawTextInto\n} from './Functions.js';\nimport PlotAltitudeDataArea from './PlotAltitudeDataArea.js';\n\n/**\n * Options for labels on hovering the windspeed profile.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions}\n *   module:meteoJS/thermodynamicDiagram/windspeedProfile~hoverLabelsOptions\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions}\n *   [windspeed] - Options for windspeed label.\n * @param {number} [windspeedMax=41.67]\n *   The maximum visible windspeed [m/s].\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/windspeedProfile~options\n */\n\n/**\n * Class to draw windspeed profiles.\n * \n * <pre><code>import WindspeedProfile from 'meteojs/thermodynamicDiagram/WindspeedProfile';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea.PlotAltitudeDataArea\n */\nexport class WindspeedProfile extends PlotAltitudeDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/windspeedProfile~options} options\n   *   Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = undefined,\n    y = undefined,\n    width = undefined,\n    height = undefined,\n    style = {},\n    visible = true,\n    events = {},\n    hoverLabels = {},\n    windspeedMax = windspeedKNToMS(150),\n    dataGroupIds = ['windspeed'],\n    getCoordinatesByLevelData = (dataGroupId, sounding, levelData, plotArea) => {\n      if (levelData.pres === undefined ||\n          levelData.wspd === undefined)\n        return {};\n      \n      return {\n        x: plotArea.width * levelData.wspd / windspeedMax,\n        y: plotArea.coordinateSystem.height -\n          plotArea.coordinateSystem.getYByXP(0, levelData.pres)\n      };\n    },\n    insertDataGroupInto = (svgNode, dataGroupId, sounding, data) => {\n      svgNode\n        .polyline(data.map(level => [ level.x, level.y ]))\n        .fill('none')\n        .stroke(sounding.options.windprofile.windspeed.style);\n    },\n    filterDataPoint = undefined,\n    minDataPointsDistance = 0\n  }) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      hoverLabels,\n      getSoundingVisibility:\n        sounding => sounding.visible && sounding.options.windprofile.windspeed.visible,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto,\n      filterDataPoint,\n      minDataPointsDistance\n    });\n    \n    this.init();\n  }\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    super._drawBackground(svgNode);\n    \n    svgNode\n      .line(0, 0, 0, this.height)\n      .stroke({color: 'black', width: 1});\n    svgNode\n      .line(this.width, 0, this.width, this.height)\n      .stroke({color: 'black', width: 1});\n  }\n  \n  /**\n   * Initialize hover labels options.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/windspeedProfile~hoverLabelsOptions}\n   *   options - Hover labels options.\n   * @override\n   */\n  _initHoverLabels({\n    visible = true,\n    type = 'mousemove',\n    snapToData = true,\n    remote = true,\n    insertLabelsFunc = undefined,\n    windspeed = {}\n  }) {\n    if (!('visible' in windspeed))\n      windspeed.visible = true;\n    if (!('style' in windspeed))\n      windspeed.style = {};\n    windspeed.font = getNormalizedFontOptions(windspeed.font, {\n      anchor: 'end',\n      'alignment-baseline': 'bottom'\n    });\n    if (!('fill' in windspeed))\n      windspeed.fill = {};\n    if (windspeed.fill.opacity === undefined)\n      windspeed.fill.opacity = 0.7;\n    windspeed.radius = ('radius' in windspeed) ? windspeed.radius : undefined;\n    windspeed.radiusPlus =\n      ('radiusPlus' in windspeed) ? windspeed.radiusPlus : 2;\n    if (windspeed.horizontalMargin === undefined)\n      windspeed.horizontalMargin = 10;\n    \n    if (insertLabelsFunc === undefined)\n      insertLabelsFunc = this._makeInsertLabelsFunc(windspeed);\n    \n    super._initHoverLabels({\n      visible,\n      type,\n      snapToData,\n      remote,\n      insertLabelsFunc\n    });\n  }\n  \n  /**\n   * Makes a default insertLabelsFunc.\n   * \n   * @param {Object} windspeed\n   * @private\n   */\n  _makeInsertLabelsFunc(windspeed) {\n    return (sounding, levelData, group) => {\n      group.clear();\n      \n      if (levelData.pres === undefined)\n        return;\n      \n      if (!windspeed.visible ||\n          levelData.wspd === undefined)\n        return;\n      \n      const { x, y } =\n        this._getCoordinatesByLevelData('windspeed',\n          sounding, levelData, this);\n      if (x === undefined ||\n          y === undefined)\n        return;\n      \n      const radius = (windspeed.radius === undefined)\n        ? this.hoverLabelsSounding.options.windprofile.windspeed.style.width / 2 +\n          windspeed.radiusPlus\n        : windspeed.radius;\n      const fillOptions = windspeed.style;\n      if (!('color' in fillOptions))\n        fillOptions.color = sounding.options.windprofile.windspeed.style.color;\n      const font = {...windspeed.font};\n      if (font.anchor == 'start' &&\n          this.width - x < 45)\n        font.anchor = 'end';\n      if (font.anchor == 'end' &&\n          x < 45)\n        font.anchor = 'start';\n      if (font['alignment-baseline'] == 'bottom' &&\n          y < font.size * 5/4)\n        font['alignment-baseline'] = 'top';\n      if (font['alignment-baseline'] == 'top' &&\n          this.height - y < font.size * 5/4)\n        font['alignment-baseline'] = 'bottom';\n      group\n        .circle(2 * radius)\n        .attr({ cx: x, cy: y })\n        .fill(fillOptions);\n      drawTextInto({\n        node: group,\n        text: `${Math.round(windspeedMSToKN(levelData.wspd)*10)/10} kn`,\n        x,\n        y,\n        horizontalMargin: windspeed.horizontalMargin,\n        verticalMargin: windspeed.verticalMargin,\n        font: font,\n        fill: windspeed.fill\n      });\n    };\n  }\n}\nexport default WindspeedProfile;","/**\n * @module meteoJS/thermodynamicDiagram/hodograph\n */\nimport { windspeedKMHToMS,\n  windspeedKNToMS,\n  windspeedMSToKMH } from '../calc.js';\nimport {\n  getNormalizedLineOptions,\n  getNormalizedTextOptions\n} from './Functions.js';\nimport PlotDataArea from './PlotDataArea.js';\n\n/**\n * Options for the circle grid.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   module:meteoJS/thermodynamicDiagram/hodograph~gridCirclesOptions\n * @param {number} [interval=13.89]\n *   Interval between grid circles (and value for the first grid circle).\n *   In m/s.\n */\n\n/**\n * Options for the grid labels.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~textOptions}\n *   module:meteoJS/thermodynamicDiagram/hodograph~gridLabelsOptions\n * @param {number} [angle=45]\n *   Angle of the labels startin from the origin\n *   (in degrees, 0 relates to North).\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/hodograph~options\n * @param {Object} [grid] - Options for the hodograph grid.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions} [grid.axes]\n *   Options for the hodograph's x- and y-axes.\n * @param {module:meteoJS/thermodynamicDiagram/hodograph~gridCirclesOptions}\n *   [grid.circles] - Options for the hodograph circle grid.\n * @param {module:meteoJS/thermodynamicDiagram/hodograph~gridLabelsOptions}\n *   [grid.labels] - Options for the hodograph grid labels.\n * @param {number|undefined} [grid.max=undefined]\n *   Maximum value for the grid axes and circles. If undefined, determined from\n *   'minWindspeedRange'.\n * @param {number} [windspeedMax=41.67]\n *   The maximum windspeed [m/s], that should be visible on the plot. This\n *   refers to the x- or y-direction with the origin in the middle of the plot,\n *   because in these directions, a polar plot has the least extent concerning\n *   distance.\n * @param {number[]|undefined} [origin=undefined]\n *   Move origin of polar plot. If 'undefined' the origin is in the center. To\n *   move, use an array with 2 elements. The first element moves the origin in\n *   x direction, the second in y direction. The values are interpreted as\n *   relative length (relating to the half width resp. height). Positive values\n *   to move in South-West direction. E.g. to move the origin the half way to\n *   South-West, use [0.5, 0.5].\n */\n\n/**\n * Class to draw the hodograph.\n * \n * <pre><code>import Hodograph from 'meteojs/thermodynamicDiagram/Hodograph';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotDataArea.PlotDataArea\n */\nexport class Hodograph extends PlotDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/hodograph~options} options\n   *   Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem,\n    x,\n    y,\n    width,\n    height,\n    style = {},\n    visible = true,\n    events = {},\n    dataGroupIds = ['windbarbs'],\n    getCoordinatesByLevelData = (dataGroupId, sounding, levelData, plotArea) => {\n      if (levelData.wspd === undefined ||\n          levelData.wdir === undefined)\n        return {};\n      \n      const x = levelData.wspd * -Math.sin(levelData.wdir / 180 * Math.PI);\n      const y = levelData.wspd * Math.cos(levelData.wdir / 180 * Math.PI);\n      return {\n        x: plotArea.center[0] + x * plotArea.pixelPerSpeed,\n        y: plotArea.center[1] + y * plotArea.pixelPerSpeed\n      };\n    },\n    insertDataGroupInto = (svgNode, dataGroupId, sounding, data) => {\n      svgNode\n        .polyline(data.map(level => [ level.x, level.y ]))\n        .fill('none').stroke(sounding.options.hodograph.style);\n    },\n    grid = {},\n    windspeedMax = windspeedKNToMS(150),\n    origin = undefined,\n    filterDataPoint = undefined,\n    minDataPointsDistance = 0\n  }) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto,\n      getSoundingVisibility:\n        sounding => sounding.visible && sounding.options.hodograph.visible,\n      filterDataPoint,\n      minDataPointsDistance\n    });\n    \n    this._gridOptions = this.getNormalizedGridOptions(grid);\n    \n    this.center = [this.width/2, this.height/2];\n    if (origin !== undefined) {\n      this.center[0] -= origin[0] * this.minLength/2;\n      this.center[1] += origin[1] * this.minLength/2;\n    }\n    this.pixelPerSpeed = Math.min(\n      Math.max(this.width - this.center[0], this.center[0]),\n      Math.max(this.height - this.center[1], this.center[1])\n    ) / windspeedMax;\n    if (this._gridOptions.max === undefined)\n      this._gridOptions.max = windspeedMax;\n    \n    this.init();\n  }\n  \n  /**\n   * Plots hodograph background.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    super._drawBackground(svgNode);\n    \n    // border, background\n    svgNode\n      .rect(this.width-2, this.height-2)\n      .move(1,1)\n      .fill({color: 'white'})\n      .stroke({color: 'black', width: 1});\n    //.attr({rx: 10, ry: 10});\n    \n    // x-/y-axes\n    if (this._gridOptions.axes.visible) {\n      let axesLength =\n        this._gridOptions.max + this._gridOptions.circles.interval / 2;\n      svgNode\n        .line(\n          Math.max(0, this.center[0] - axesLength * this.pixelPerSpeed),\n          this.center[1],\n          Math.min(this.width,\n            this.center[0] + axesLength * this.pixelPerSpeed),\n          this.center[1]\n        )\n        .stroke(this._gridOptions.axes.style);\n      svgNode\n        .line(\n          this.center[0],\n          Math.max(0, this.center[1] - axesLength * this.pixelPerSpeed),\n          this.center[0],\n          Math.min(this.height,\n            this.center[1] + axesLength * this.pixelPerSpeed)\n        )\n        .stroke(this._gridOptions.axes.style);\n    }\n    \n    // circles and labels\n    for (let v = this._gridOptions.circles.interval;\n      v <= this._gridOptions.max;\n      v += this._gridOptions.circles.interval) {\n      let radius = v * this.pixelPerSpeed;\n      svgNode\n        .circle(2*radius)\n        .attr({\n          cx: this.center[0],\n          cy: this.center[1]\n        })\n        .fill('none')\n        .stroke(this._gridOptions.circles.style);\n      if (this._gridOptions.labels.visible) {\n        let xText =\n          radius *\n          Math.cos((this._gridOptions.labels.angle - 90) / 180 * Math.PI);\n        let yText =\n          radius *\n          Math.sin((this._gridOptions.labels.angle - 90) / 180 * Math.PI);\n        let textAnchor = 'middle';\n        let dx = 0;\n        let dy = -this._gridOptions.labels.font.size;\n        if (this._gridOptions.labels.angle == 0 ||\n          this._gridOptions.labels.angle == 180) {\n          dx = -3;\n          textAnchor = 'end';\n        }\n        else if (this._gridOptions.labels.angle == 90 ||\n               this._gridOptions.labels.angle == 270)\n          dy = -3;\n        let text = svgNode\n          .plain('' + Math.round(windspeedMSToKMH(v)))\n          .move(this.center[0] + xText, this.center[1] + yText)\n          .attr({\n            'text-anchor': textAnchor,\n            //'alignment-baseline': 'middle'\n            dx: dx,\n            dy: dy // XXX: Hack für Firefox\n          })\n          .font(this._gridOptions.labels.font);\n        let bbox = text.bbox();\n        text.before(\n          svgNode\n            .rect(bbox.width, bbox.height)\n            .move(bbox.x, bbox.y)\n            .fill('white')\n        );\n      }\n    }\n  }\n  \n  /**\n   * Normalizes options for grid.\n   * \n   * @private\n   */\n  getNormalizedGridOptions({\n    axes = {},\n    circles = {},\n    labels = {},\n    max = undefined\n  }) {\n    axes = getNormalizedLineOptions(axes);\n    circles = getNormalizedLineOptions(circles);\n    if (!('interval' in circles) ||\n        circles.interval === undefined)\n      circles.interval = windspeedKMHToMS(50);\n    labels = getNormalizedTextOptions(labels);\n    if (!('angle' in labels) ||\n        labels.angle === undefined)\n      labels.angle = 225;\n    if (labels.font.size === undefined)\n      labels.font.size = 10;\n    \n    return {\n      axes,\n      circles,\n      labels,\n      max\n    };\n  }\n}\nexport default Hodograph;","/**\n * @module meteoJS/thermodynamicDiagram/axes/yAxis\n */\nimport { getNormalizedLineStyleOptions } from '../Functions.js';\nimport PlotArea from '../PlotArea.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotArea~options}\n *   module:meteoJS/thermodynamicDiagram/axes/yAxis~options\n * @property {module:meteoJS/thermodynamicDiagram/axes/axisLabels~options} labels\n *   Options for the yAxis Labels.\n * @property {module:meteoJS/thermodynamicDiagram/axes/axisTitle~options} title\n *   Options for the title of the x-Axis.\n */\n\n/**\n * Class to draw the yAxis labelling.\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotArea.PlotArea\n */\nexport class yAxis extends PlotArea {\n\n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/yAxis~options} options\n   *   Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem,\n    x,\n    y,\n    width,\n    height,\n    style = {},\n    visible = true,\n    events = {},\n    labels = {},\n    title = {}\n  }) {\n    if (style.overflow === undefined)\n      style.overflow = 'visible';\n    \n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events\n    });\n    \n    /**\n     * @type Object\n     * @private\n     */\n    this._labelsOptions = getNormalizedLabelsOptions(labels);\n    \n    /**\n     * @type Object\n     * @private\n     */\n    this._titleOptions = getNormalizedTitleOptions(title);\n    \n    this.init();\n  }\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    super._drawBackground(svgNode);\n    \n    if (this._labelsOptions.enabled) {\n      let svgLabelsGroup = svgNode.group();\n      let isobarsAzimut = 50;\n      let minLevel = Math.ceil(this.coordinateSystem.getPByXY(0, this.height)/isobarsAzimut)*isobarsAzimut;\n      let maxLevel = Math.floor(this.coordinateSystem.getPByXY(0, 0)/isobarsAzimut)*isobarsAzimut;\n      let fontSize = 11;\n      for (let level=minLevel; level<=maxLevel; level+=isobarsAzimut) {\n        let y = this.height - this.coordinateSystem.getYByXP(0, level);\n        let text = svgLabelsGroup.plain(level).attr({\n          y: y+fontSize*0.3,\n          x: this.width\n        });\n        text\n          .font({\n            size: fontSize+'px',\n            anchor: 'end'\n          })\n          .attr({\n            fill: this._labelsOptions.style.color\n          });\n      }\n    }\n    \n    if (this._titleOptions.text !== undefined) {\n      let svgTitleGroup = svgNode.group();\n      let fontSize = 12;\n      svgTitleGroup.plain(this._titleOptions.text)\n        .attr({\n          x: fontSize*0.4,\n          y: this.height/2,\n          fill: this._titleOptions.style.color\n        })\n        .font({\n          size: fontSize,\n          anchor: 'middle'\n        })\n        .rotate(-90);\n    }\n  }\n  \n}\nexport default yAxis;\n\nfunction getNormalizedLabelsOptions({\n  enabled = true,\n  style = {}\n}) {\n  let options = {\n    enabled,\n    style\n  };\n  options.style = getNormalizedLineStyleOptions(options.style);\n  return options;\n}\n\nfunction getNormalizedTitleOptions({\n  align = 'middle',\n  style = {},\n  text = undefined\n}) {\n  let options = {\n    align,\n    style,\n    text\n  };\n  options.style = getNormalizedLineStyleOptions(options.style);\n  return options;\n}","/**\n * @module meteoJS/thermodynamicDiagram/axes/xAxis\n */\nimport { tempKelvinToCelsius, tempCelsiusToKelvin } from '../../calc.js';\nimport yAxis from './yAxis.js';\n\n/**\n * Class to draw the xAxis labelling.\n * \n * @extends module:meteoJS/thermodynamicDiagram/axes/yAxis.yAxis\n */\nexport class xAxis extends yAxis {\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    svgNode.clear();\n    //super.drawBackground(svgNode);\n    \n    if (this._labelsOptions.enabled) {\n      let svgLabelsGroup = svgNode.group();\n      let isothermsAzimut = 10;\n      let minT = Math.ceil(tempKelvinToCelsius(this.coordinateSystem.getTByXY(0, 0))/isothermsAzimut)*isothermsAzimut;\n      let maxT = Math.floor(tempKelvinToCelsius(this.coordinateSystem.getTByXY(this.width, 0))/isothermsAzimut)*isothermsAzimut;\n      let fontSize = 10;\n      for (let T=minT; T<=maxT; T+=isothermsAzimut) {\n        let TKelvin = tempCelsiusToKelvin(T);\n        svgLabelsGroup\n          .plain(Math.round(tempKelvinToCelsius(TKelvin)))\n          .attr({\n            x: this.coordinateSystem.getXByYT(0, TKelvin),\n            y: fontSize,\n            fill: this._labelsOptions.style.color\n          })\n          .font({\n            size: fontSize+'px',\n            anchor: 'middle'\n          });\n      }\n    }\n    \n    if (this._titleOptions.text !== undefined) {\n      let svgTitleGroup = svgNode.group();\n      let fontSize = 12;\n      svgTitleGroup.plain(this._titleOptions.text)\n        .attr({\n          x: this.width/2,\n          y: this.height - fontSize*0.3,\n          fill: this._titleOptions.style.color\n        })\n        .font({\n          size: fontSize,\n          anchor: 'middle'\n        });\n    }\n  }\n  \n}\nexport default xAxis;","/**\n * @module meteoJS/thermodynamicDiagram\n */\nimport ThermodynamicDiagramPluggable from './ThermodynamicDiagramPluggable.js';\nimport StueveDiagram from './thermodynamicDiagram/coordinateSystem/StueveDiagram.js';\nimport Emagram from './thermodynamicDiagram/coordinateSystem/Emagram.js';\nimport SkewTlogPDiagram from './thermodynamicDiagram/coordinateSystem/SkewTlogPDiagram.js';\nimport TDDiagram from './thermodynamicDiagram/TDDiagram.js';\nimport WindbarbsProfile from './thermodynamicDiagram/WindbarbsProfile.js';\nimport WindspeedProfile from './thermodynamicDiagram/WindspeedProfile.js';\nimport Hodograph from './thermodynamicDiagram/Hodograph.js';\nimport { xAxis as xAxisClass } from './thermodynamicDiagram/axes/xAxis.js';\nimport { yAxis as yAxisClass } from './thermodynamicDiagram/axes/yAxis.js';\n\n/**\n * Options for the coordinate system.\n * \n * @typedef {module:meteoJS/thermodynamicDiagramPluggable~options}\n *   module:meteoJS/thermodynamicDiagram~coordinateSystemOptions\n * @property {'skewTlogP'|'stueve'|'emagram'} [type='skewTlogP']\n *   Thermodynamic diagarm type.\n * @property {module:meteoJS/thermodynamicDiagram/coordinateSystem~pressureOptions}\n *   [pressure] - Pressure options.\n * @property {module:meteoJS/thermodynamicDiagram/coordinateSystem~temperatureOptions}\n *   [temperature] - Temperature options.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagramPluggable~options}\n *   module:meteoJS/thermodynamicDiagram~options\n * @param {module:meteoJS/thermodynamicDiagram~coordinateSystemOptions}\n *   [coordinateSystem] - Coordinate system options.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~options} [diagram]\n *   Options for the real thermodynamic diagram.\n * @param {module:meteoJS/thermodynamicDiagram/windbarbsProfile~options}\n *   [windbarbs] - Options for the windbarbs profile.\n * @param {module:meteoJS/thermodynamicDiagram/windspeedProfile~options}\n *   [windprofile] - Options for the windspeed profile.\n * @param {module:meteoJS/thermodynamicDiagram/hodograph~options} [hodograph]\n *   Options for the hodograph container.\n * @param {module:meteoJS/thermodynamicDiagram/axes/xAxis~options} [xAxis]\n *   Options for the xAxis container.\n * @param {module:meteoJS/thermodynamicDiagram/axes/yAxis~options} [yAxis]\n *   Options for the yAxis container.\n */\n\n/**\n * Class to draw a SVG thermodynamic diagram.\n * \n * <pre><code>import ThermodynamicDiagram from 'meteoJS/ThermodynamicDiagram';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagramPluggable.ThermodynamicDiagramPluggable\n */\nexport class ThermodynamicDiagram extends ThermodynamicDiagramPluggable {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram~options} options - Options.\n   */\n  constructor({\n    renderTo = undefined,\n    width = undefined,\n    height = undefined,\n    coordinateSystem = {},\n    diagram = {},\n    windbarbsProfile = {},\n    windspeedProfile = {},\n    hodograph = {},\n    xAxis = {},\n    yAxis = {}\n  }) {\n    super({\n      renderTo,\n      width,\n      height\n    });\n    \n    diagram = normalizePlotAreaOptions(diagram);\n    windbarbsProfile = normalizePlotAreaOptions(windbarbsProfile);\n    windspeedProfile = normalizePlotAreaOptions(windspeedProfile);\n    hodograph = normalizePlotAreaOptions(hodograph);\n    xAxis = normalizePlotAreaOptions(xAxis);\n    yAxis = normalizePlotAreaOptions(yAxis);\n    \n    let defaultPadding = this.svgNode.width() * 0.05;\n    if (xAxis.width === undefined &&\n      diagram.width === undefined &&\n      windbarbsProfile.width === undefined &&\n      windspeedProfile.width === undefined) {\n      yAxis.width =\n        (this.svgNode.width() - 2 * defaultPadding) * 0.1;\n      diagram.width =\n        (this.svgNode.width() - 2 * defaultPadding) * 0.7;\n      windbarbsProfile.width =\n        (this.svgNode.width() - 2 * defaultPadding) * 0.2 * 1/3;\n      windspeedProfile.width =\n        (this.svgNode.width() - 2 * defaultPadding) * 0.2 * 2/3;\n    }\n    else if (diagram.width === undefined)\n      diagram.width =\n        this.svgNode.width() - 2 * defaultPadding\n        - windbarbsProfile.width- windspeedProfile.width;\n    else if (windbarbsProfile.width === undefined &&\n             windspeedProfile.width === undefined) {\n      windbarbsProfile.width =\n        (this.svgNode.width() - 2 * defaultPadding - diagram.width) * 1/3;\n      windspeedProfile.width =\n        (this.svgNode.width() - 2 * defaultPadding - diagram.width) * 2/3;\n    }\n    if (yAxis.x === undefined &&\n      diagram.x === undefined &&\n      windbarbsProfile.x === undefined &&\n      windspeedProfile.x === undefined) {\n      yAxis.x = defaultPadding;\n      diagram.x =\n        yAxis.x + yAxis.width;\n      windbarbsProfile.x =\n        diagram.x + diagram.width;\n      windspeedProfile.x =\n        windbarbsProfile.x + windbarbsProfile.width;\n    }\n    else if (diagram.x === undefined)\n      diagram.x =\n        windbarbsProfile.x - windbarbsProfile.width;\n    else if (windbarbsProfile.x === undefined &&\n             windspeedProfile.x === undefined) {\n      windbarbsProfile.x =\n        diagram.x + diagram.width;\n      windspeedProfile.x =\n        windbarbsProfile.x + windbarbsProfile.width;\n    }\n    if (xAxis.height === undefined)\n      xAxis.height = this.svgNode.height() * 0.06;\n    if (diagram.height === undefined)\n      diagram.height =\n        this.svgNode.height() - xAxis.height - 2 * defaultPadding;\n    if (yAxis.height === undefined)\n      yAxis.height = diagram.height;\n    if (windbarbsProfile.height === undefined)\n      windbarbsProfile.height = diagram.height;\n    if (windspeedProfile.height === undefined)\n      windspeedProfile.height = diagram.height;\n    if (diagram.y === undefined)\n      diagram.y = defaultPadding;\n    if (yAxis.y === undefined)\n      yAxis.y = diagram.y;\n    if (windbarbsProfile.y === undefined)\n      windbarbsProfile.y = diagram.y;\n    if (windspeedProfile.y === undefined)\n      windspeedProfile.y = diagram.y;\n    if (xAxis.width === undefined)\n      xAxis.width = diagram.width;\n    if (xAxis.x === undefined)\n      xAxis.x = diagram.x;\n    if (xAxis.y === undefined)\n      xAxis.y = diagram.y + diagram.height;\n    if (xAxis.height === undefined)\n      xAxis.height = defaultPadding;\n    \n    // Defintionen zum Hodograph\n    if (hodograph.x === undefined)\n      hodograph.x = diagram.x;\n    if (hodograph.y === undefined)\n      hodograph.y = diagram.y;\n    if (hodograph.width === undefined)\n      hodograph.width = Math.min(diagram.width, diagram.height) * 0.4;\n    if (hodograph.height === undefined)\n      hodograph.height = hodograph.width;\n    \n    this.diagram = new TDDiagram(diagram);\n    this.appendPlotArea(this.diagram);\n    \n    this.yAxis = new yAxisClass(yAxis);\n    this.appendPlotArea(this.yAxis);\n    \n    this.xAxis = new xAxisClass(xAxis);\n    this.appendPlotArea(this.xAxis);\n    \n    this.windbarbsProfile = new WindbarbsProfile(windbarbsProfile);\n    this.appendPlotArea(this.windbarbsProfile);\n    \n    this.windspeedProfile = new WindspeedProfile(windspeedProfile);\n    this.appendPlotArea(this.windspeedProfile);\n    \n    this.hodograph = new Hodograph(hodograph);\n    this.appendPlotArea(this.hodograph);\n    \n    if (coordinateSystem.type === undefined)\n      coordinateSystem.type = 'skewTlogP';\n    coordinateSystem.width = diagram.width;\n    coordinateSystem.height = diagram.height;\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n     * @private\n     */\n    this._coordinateSystem;\n    this.coordinateSystem =\n      (coordinateSystem.type == 'stueve') ?\n        new StueveDiagram(coordinateSystem) :\n        (coordinateSystem.type == 'emagram') ?\n          new Emagram(coordinateSystem) :\n          new SkewTlogPDiagram(coordinateSystem);\n  }\n  \n  /**\n   * Coordinate system for the different plot areas.\n   * \n   * @type module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n   * @public\n   */\n  get coordinateSystem() {\n    return this._coordinateSystem;\n  }\n  set coordinateSystem(coordinateSystem) {\n    this._coordinateSystem = coordinateSystem;\n    this.exchangeCoordinateSystem(this._coordinateSystem);\n  }\n  \n  /**\n   * Returns the object of the thermodynamic diagram plot area.\n   * \n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} Diagram object.\n   * @deprecated\n   */\n  getDiagramPlotArea() {\n    return this.diagram;\n  }\n}\nexport default ThermodynamicDiagram;\n\n/**\n * Returns normalized PlotArea options.\n * \n * @private\n */\nfunction normalizePlotAreaOptions({\n  svgNode = undefined,\n  coordinateSystem = undefined,\n  x = undefined,\n  y = undefined,\n  width = undefined,\n  height = undefined,\n  style = {},\n  visible = true,\n  events = {},\n  hoverLabels = {},\n  ...result\n}) {\n  result.svgNode = svgNode;\n  result.coordinateSystem = coordinateSystem;\n  result.x = x;\n  result.y = y;\n  result.width = width;\n  result.height = height;\n  result.style = style;\n  result.visible = visible;\n  result.events = events;\n  result.hoverLabels = hoverLabels;\n  return result;\n}","/**\n * @module meteoJS/modelviewer/display/simple\n */\nimport $ from 'jquery';\nimport ThermodynamicDiagram from '../../ThermodynamicDiagram.js';\nimport Display from '../Display.js';\n\n/**\n * @classdesc Displays a modelviewer container with a navigation on top of the\n *   resource. The navigation contains of several select-Nodes (each for a\n *   VariableCollection).\n */\nexport class Simple extends Display {\n  \n  constructor() {\n    super();\n    \n    /**\n     * @type undefined|jQuery\n     * @private\n     */\n    this.imgNode = undefined;\n    \n    /**\n     * @type undefined|meteoJS/thermodynamicDiagram.ThermodynamicDiagram\n     * @private\n     */\n    this.thermodynamicDiagram = undefined;\n    \n    /**\n     * @type undefined|jQuery\n     * @protected\n     */\n    this.resourceNode = undefined;\n  }\n  \n  /**\n   * @override\n   */\n  onInit() {\n    if (this.parentNode !== undefined) {\n      this.resourceNode = $(this.parentNode);\n      this.resourceNode.empty();\n    }\n  }\n  \n  /**\n   * @override\n   */\n  onChangeVisibleResource() {\n    if (this.resourceNode === undefined)\n      return;\n    let visibleResource = this.container.visibleResource;\n    if ('url' in visibleResource) {\n      if (this.thermodynamicDiagram !== undefined) {\n        this.thermodynamicDiagram = undefined;\n        this.resourceNode.empty();\n      }\n      if (this.imgNode === undefined) {\n        this.resourceNode.empty();\n        this.imgNode = $('<img>');\n        this.resourceNode.append(this.imgNode);\n      }\n      this.imgNode.attr('src', visibleResource.url);\n      this.imgNode.css({ 'max-width': '100%' });\n    }\n    else if ('sounding' in visibleResource) {\n      if (this.imgNode !== undefined) {\n        this.imgNode = undefined;\n        this.resourceNode.empty();\n      }\n      if (this.thermodynamicDiagram === undefined)\n        this.thermodynamicDiagram = new ThermodynamicDiagram({\n          renderTo: this.resourceNode\n        });\n      let isAppended = false;\n      this.thermodynamicDiagram.soundings.forEach(sounding => {\n        if (sounding.getSounding() === visibleResource.sounding) {\n          isAppended = true;\n          sounding.visible(true);\n        }\n        else\n          sounding.visible(false);\n      });\n      if (!isAppended)\n        this.thermodynamicDiagram.addSounding(visibleResource.sounding);\n    }\n    else {\n      this.imgNode = undefined;\n      this.resourceNode.empty();\n    }\n  }\n}\nexport default Simple;","/**\n * @module meteoJS\n */\n\n/**\n * jQuery object.\n * \n * @external jQuery\n * @see {@link https://api.jquery.com|API Doc}\n */\n\n/**\n * Any HTML element.\n * \n * @external HTMLElement\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement}\n */\n\n/**\n * Any event.\n * \n * @external Event\n * @see {@link https://developer.mozilla.org/de/docs/Web/API/Event}\n */\n\n/**\n * XMLHttpRequest object.\n * \n * @external XMLHttpRequest\n * @see {@link https://developer.mozilla.org/de/docs/Web/API/XMLHttpRequest}\n */\n\n/**\n * SVG object.\n * \n * @external SVG\n * @see {@link https://svgjs.com/docs/3.0/|API Doc}\n */\n\nimport 'regenerator-runtime/runtime.js';\n\nimport * as calc from './calc.js';\nexport { calc };\n\nimport { default as addEventFunctions } from './Events.js';\nexport const events = {\n  addEventFunctions\n};\n\nexport { default as RepetitiveRequests } from './RepetitiveRequests.js';\n\nexport { default as Timeline } from './Timeline.js';\nimport { default as Animation,\n  insertFrequencyInput,\n  insertFrequencyRange,\n  insertFrequencyButtonGroup,\n  insertRestartPauseInput,\n  insertRestartPauseRange,\n  insertRestartPauseButtonGroup } from './timeline/Animation.js';\nimport { default as ToggleButton } from './timeline/animation/ToggleButton.js';\nimport {\n  default as Visualisation,\n  makeTimeTextCallbackFunction\n} from './timeline/Visualisation.js';\nimport { default as Text } from './timeline/visualisation/Text.js';\nimport { default as Slider } from './timeline/visualisation/Slider.js';\nimport { default as bsButtons } from './timeline/visualisation/bsButtons.js';\nimport { default as bsDropdown } from './timeline/visualisation/bsDropdown.js';\nexport const timeline = {\n  Animation,\n  Visualisation,\n  makeTimeTextCallbackFunction,\n  animation: {\n    ToggleButton,\n    insertFrequencyInput,\n    insertFrequencyRange,\n    insertFrequencyButtonGroup,\n    insertRestartPauseInput,\n    insertRestartPauseRange,\n    insertRestartPauseButtonGroup\n  },\n  visualisation: {\n    Text,\n    Slider,\n    bsButtons,\n    bsDropdown\n  }\n};\n\nexport { default as Synview } from './Synview.js';\nimport { default as SynviewCollection } from './synview/Collection.js';\nimport { default as Map } from './synview/SynviewMap.js';\nimport { default as MapOL } from './synview/map/MapOL.js';\nimport { default as MapLL } from './synview/map/MapLL.js';\nimport { default as Resource } from './synview/Resource.js';\nimport { default as GeoJSON } from './synview/resource/GeoJSON.js';\nimport { default as GeoJSONTile } from './synview/resource/GeoJSONTile.js';\nimport { default as Image } from './synview/resource/Image.js';\nimport { default as OSM } from './synview/resource/OSM.js';\nimport { default as Vector } from './synview/resource/Vector.js';\nimport { default as VectorTile } from './synview/resource/VectorTile.js';\nimport { default as ResourceCollection } from './synview/ResourceCollection.js';\nimport { default as Tooltip } from './synview/Tooltip.js';\nimport { default as Type } from './synview/Type.js';\nimport { default as TypeCollection } from './synview/TypeCollection.js';\nexport const synview = {\n  Collection: SynviewCollection,\n  Map,\n  map: {\n    MapOL,\n    MapLL\n  },\n  Resource,\n  resource: {\n    GeoJSON,\n    GeoJSONTile,\n    Image,\n    OSM,\n    Vector,\n    VectorTile\n  },\n  ResourceCollection,\n  Tooltip,\n  Type,\n  TypeCollection\n};\n\nexport { Tooltip } from './Tooltip.js';\nimport BootstrapTooltip from './tooltip/BootstrapTooltip.js';\nexport const tooltip = {\n  BootstrapTooltip\n};\n\nexport { default as Modelviewer } from './Modelviewer.js';\nimport Variable from './modelviewer/Variable.js';\nimport TimeVariable from './modelviewer/TimeVariable.js';\nimport VariableCollection from './modelviewer/VariableCollection.js';\nimport Node from './modelviewer/Node.js';\nimport ModelviewerResource from './modelviewer/Resource.js';\nimport ModelviewerImage from './modelviewer/resource/Image.js';\nimport ModelviewerSounding from './modelviewer/resource/Sounding.js';\nimport Resources from './modelviewer/Resources.js';\nimport NWPResources from './modelviewer/NWPResources.js';\nimport Container from './modelviewer/Container.js';\nimport Display from './modelviewer/Display.js';\nimport Simple from './modelviewer/display/Simple.js';\nimport SelectNavigation from './modelviewer/display/SelectNavigation.js';\nexport const modelviewer = {\n  Variable,\n  TimeVariable,\n  VariableCollection,\n  Node,\n  Resource: ModelviewerResource,\n  resource: {\n    Image: ModelviewerImage,\n    Sounding: ModelviewerSounding\n  },\n  Resources,\n  NWPResources,\n  Container,\n  Display,\n  display: {\n    Simple,\n    SelectNavigation\n  }\n};\n\nexport { default as Sounding } from './Sounding.js';\nimport { default as Parcel } from './sounding/Parcel.js';\nexport const sounding = {\n  Parcel\n};\n\nexport { default as ThermodynamicDiagramPluggable } from './ThermodynamicDiagramPluggable.js';\nexport { default as ThermodynamicDiagram } from './ThermodynamicDiagram.js';\nimport CoordinateSystem from './thermodynamicDiagram/CoordinateSystem.js';\nimport StueveDiagram from './thermodynamicDiagram/coordinateSystem/StueveDiagram.js';\nimport Emagram from './thermodynamicDiagram/coordinateSystem/Emagram.js';\nimport SkewTlogPDiagram from './thermodynamicDiagram/coordinateSystem/SkewTlogPDiagram.js';\nimport DiagramSounding from './thermodynamicDiagram/DiagramSounding.js';\nimport Hodograph from './thermodynamicDiagram/Hodograph.js';\nimport TDDiagram from './thermodynamicDiagram/TDDiagram.js';\nimport { drawWindbarbInto } from './thermodynamicDiagram/Functions.js';\nimport WindbarbsProfile from './thermodynamicDiagram/WindbarbsProfile.js';\nimport WindspeedProfile from './thermodynamicDiagram/WindspeedProfile.js';\nimport xAxis from './thermodynamicDiagram/axes/xAxis.js';\nimport yAxis from './thermodynamicDiagram/axes/yAxis.js';\nexport const thermodynamicDiagram = {\n  CoordinateSystem,\n  coordinateSystem: {\n    StueveDiagram,\n    Emagram,\n    SkewTlogPDiagram\n  },\n  DiagramSounding,\n  Hodograph,\n  TDDiagram,\n  functions: {\n    drawWindbarbInto\n  },\n  WindbarbsProfile,\n  WindspeedProfile,\n  axes: {\n    xAxis,\n    yAxis\n  }\n};","/**\n * @module meteoJS/timeline/animation/togglebutton\n */\nimport $ from 'jquery';\nimport { insertFrequencyInput,\n  insertFrequencyRange,\n  insertRestartPauseInput } from '../Animation.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} meteoJS/timeline/animation/togglebutton~options\n * @param {meteoJS.timeline.animation} animation Animation object.\n * @param {HTMLElement} node\n *   Node to append the button and the dropdown menu (if menu set to true).\n *   If this is a 'button' element, this will be the animation button and\n *   no menu is added.\n * @param {string|HTMLElement|undefined} startedContent\n *   Content or text of button node if animation is running.\n * @param {string|undefined} startedClass\n *   Classed added to button node if animation is running.\n * @param {string|HTMLElement|undefined} stoppedContent\n *   Content of button node if animation is stopped.\n * @param {string|undefined} stoppedClass\n *   Classed added to button node if animation is running.\n * @param {string|undefined} classButton\n *   Classed added to button node.\n * @param {boolean} menu\n *   Add dropdown menu for animation setup to the button. Ignored, if node is a\n *   button element.\n * @param {boolean} menuImageFrequency\n *   Show frequency configuration in the dropdown menu.\n * @param {string} imageFrequencyCaption\n *   Label text for the frequency configuration in the dropdown menu.\n * @param {undefined|integer[]} menuFrequencies\n *   Array of frequencies for the range slider. If undefined the slider will be\n *   hidden.\n * @param {boolean} menuRestartPause\n *   Show restart pause configuration in the dropdown menu.\n * @param {string} restartPauseCaption\n *   Label text for the restart pause configuration in the dropdown menu.\n */\n\n/**\n * @classdesc\n * Object to style a button accordingly to the status of an animation object.\n */\nexport class ToggleButton {\n  \n  /**\n   * @param {meteoJS/timeline/animation/togglebutton~options} options Options.\n   */\n  constructor(options = {}) {\n    let { animation = undefined,\n      node = undefined,\n      startedContent = undefined,\n      startedClass = undefined,\n      stoppedContent = undefined,\n      stoppedClass = undefined,\n      classButton = undefined,\n      classDropdownToggle = undefined,\n      menu = true,\n      menuImageFrequency = true,\n      imageFrequencyCaption = 'Frequency',\n      menuFrequencies = undefined,\n      menuRestartPause = true,\n      restartPauseCaption = 'Restart pause' } = options;\n    if (!('startedContent' in options))\n      startedContent = '⏸';\n    if (!('stoppedContent' in options))\n      stoppedContent = '▶';\n    /**\n     * @type meteoJS/timeline/animation/togglebutton~options\n     * @private\n     */\n    this.options = {\n      animation,\n      node,\n      startedContent,\n      startedClass,\n      stoppedContent,\n      stoppedClass,\n      classButton,\n      classDropdownToggle,\n      menu,\n      menuImageFrequency,\n      imageFrequencyCaption,\n      menuFrequencies,\n      menuRestartPause,\n      restartPauseCaption\n    };\n    \n    this.options.node = $(this.options.node);\n    let animationButton = this.options.node;\n    if (!this.options.node.is('button')) {\n      animationButton = $('<button>').addClass('btn');\n      this.options.node.append(animationButton);\n    }\n    animationButton.addClass(this.options.classButton);\n    \n    let onStart = () => {\n      animationButton.removeClass(this.options.stoppedClass);\n      animationButton.addClass(this.options.startedClass);\n      animationButton.empty();\n      if (typeof this.options.startedContent === 'string' ||\n          this.options.startedContent instanceof String)\n        animationButton.text(this.options.startedContent);\n      else\n        animationButton.append(this.options.startedContent);\n    };\n    let onStop = () => {\n      animationButton.removeClass(this.options.startedClass);\n      animationButton.addClass(this.options.stoppedClass);\n      animationButton.empty();\n      if (typeof this.options.stoppedContent === 'string' ||\n          this.options.stoppedContent instanceof String)\n        animationButton.text(this.options.stoppedContent);\n      else\n        animationButton.append(this.options.stoppedContent);\n    };\n    this.options.animation.on('start:animation', onStart);\n    this.options.animation.on('stop:animation', onStop);\n    animationButton.click(() => this.options.animation.toggle());\n    this.options.animation.isStarted() ? onStart() : onStop();\n    \n    if (!this.options.node.is('button') &&\n        this.options.menu) {\n      // Add dropdown menu\n      this.options.node.addClass('btn-group');\n      let btnDropdown = $('<button>')\n        .attr('type', 'button')\n        .addClass('btn dropdown-toggle dropdown-toggle-split')\n        .addClass(this.options.classDropdownToggle)\n        .attr('data-toggle', 'dropdown')\n        .attr('aria-haspopup', true)\n        .attr('aria-expanded', false);\n      btnDropdown.append($('<span>').addClass('sr-only').text('Toggle Dropdown'));\n      this.options.node.append(btnDropdown);\n      let menuDropdown = $('<div>').addClass('dropdown-menu pl-4 pr-4 pt-2 pb-2 text-muted');\n      this.options.node.append(menuDropdown);\n      \n      if (this.options.menuImageFrequency) {\n        let label = $('<label>').text(this.options.imageFrequencyCaption);\n        let div = $('<div>').addClass('form-group').append(label);\n        menuDropdown.append(div);\n        insertFrequencyInput(label, {\n          animation: this.options.animation\n        });\n        if (this.options.menuFrequencies !== undefined)\n          insertFrequencyRange(div, {\n            animation: this.options.animation,\n            frequencies: this.options.menuFrequencies\n          });\n      }\n      \n      if (this.options.menuRestartPause) {\n        let label = $('<label>').text(this.options.restartPauseCaption);\n        let div = $('<div>').addClass('form-group').append(label);\n        insertRestartPauseInput(label, {\n          animation: this.options.animation\n        });\n        menuDropdown.append(div);\n      }\n    }\n  }\n  \n}\nexport default ToggleButton;","/**\n * @module meteoJS/modelviewer/display/selectNavigation\n */\nimport $ from 'jquery';\nimport Simple from './Simple.js';\n\n/**\n * @classdesc \n */\nexport class SelectNavigation extends Simple {\n  \n  constructor({ ignoreVariableCollections = [],\n    selectCaption = false,\n    navigationClass = undefined,\n    selectDivClass = undefined,\n    selectClass = undefined } = {}) {\n    super();\n    \n    this.options = {\n      ignoreVariableCollections: new Set(ignoreVariableCollections),\n      selectCaption,\n      navigationClass,\n      selectDivClass,\n      selectClass\n    };\n    \n    /**\n     * @type undefined|jQuery\n     * @private\n     */\n    this.navigationNode = undefined;\n    \n    /**\n     * @type Map<module:meteoJS/modelviewer/variableCollection.variableCollection,jQuery>\n     * @private\n     */\n    this.selectNodes = new Map();\n  }\n  \n  /**\n   * @override\n   */\n  onInit() {\n    if (this.parentNode === undefined)\n      return;\n    this.navigationNode = $('<div>').addClass(this.options.navigationClass);\n    this.resourceNode = $('<div>');\n    $(this.parentNode).empty().append(this.navigationNode, this.resourceNode);\n    if (this.modelviewer !== undefined)\n      this.modelviewer.resources.variableCollections\n        .filter(collection => !this.options.ignoreVariableCollections.has(collection) && collection.count > 0)\n        .forEach(collection => this._appendSelectNode(collection));\n    this._changeSelected();\n  }\n  \n  onChangeVisibleResource({ variable } = {}) {\n    super.onChangeVisibleResource({ variable });\n    this._changeSelected();\n  }\n  \n  onAppendVariable(variable) {\n    if (this.selectNodes.has(variable.variableCollection))\n      this._appendOptionNode(this.selectNodes.get(variable.variableCollection), variable);\n    else\n      this._appendSelectNode(variable.variableCollection);\n    this._changeSelected();\n  }\n  \n  _appendSelectNode(variableCollection) {\n    let selectNode = $('<select>').addClass(this.options.selectClass);\n    selectNode.on('change', () => {\n      let variable = variableCollection.getItemById(selectNode.val());\n      this.container.exchangeDisplayVariable = [ variable ];\n    });\n    if (this.options.selectCaption) {\n      let captionOption = $('<option>').text(variableCollection.name).attr('disabled', 'disabled').prop('selected', 'selected');\n      selectNode.append(captionOption);\n    }\n    variableCollection.variables.forEach(variable => {\n      this._appendOptionNode(selectNode, variable);\n    });\n    this.navigationNode.append($('<div>').addClass(this.options.selectDivClass).append(selectNode));\n    this.selectNodes.set(variableCollection, selectNode);\n  }\n  \n  _appendOptionNode(selectNode, variable) {\n    let option =\n      $('<option>')\n        .attr('value', variable.id)\n        .text(variable.name)\n        .addClass(this.options.optionsClass);\n    selectNode.append(option);\n  }\n  \n  _changeSelected() {\n    for (let variableCollection of this.selectNodes.keys()) {\n      if (!this.selectNodes.has(variableCollection))\n        continue;\n      let variable = this.container.visibleResource.getVariableByVariableCollection(variableCollection);\n      this.selectNodes.get(variableCollection).val(variable.id);\n    }\n  }\n}\nexport default SelectNavigation;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(857);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};"],"sourceRoot":""}