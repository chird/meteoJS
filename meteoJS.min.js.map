{"version":3,"sources":["webpack://meteoJS/webpack/bootstrap","webpack://meteoJS/external \"jQuery\"","webpack://meteoJS/external \"ol.layer.Group\"","webpack://meteoJS/external \"ol.proj\"","webpack://meteoJS/external \"SVG\"","webpack://meteoJS/external \"ol.layer.Vector\"","webpack://meteoJS/external \"ol.format.GeoJSON\"","webpack://meteoJS/external \"ol.Observable\"","webpack://meteoJS/external \"ol.source.Vector\"","webpack://meteoJS/external \"ol.source.VectorTile\"","webpack://meteoJS/external \"ol.layer.VectorTile\"","webpack://meteoJS/external \"ol.source.ImageStatic\"","webpack://meteoJS/external \"ol.layer.Image\"","webpack://meteoJS/external \"ol.source.OSM\"","webpack://meteoJS/external \"ol.layer.Tile\"","webpack://meteoJS/./node_modules/regenerator-runtime/runtime.js","webpack://meteoJS/(webpack)/buildin/module.js","webpack://meteoJS/external \"bootstrap\"","webpack://meteoJS/./src/meteoJS/calc.js","webpack://meteoJS/./src/meteoJS/Events.js","webpack://meteoJS/./src/meteoJS/RepetitiveRequests.js","webpack://meteoJS/./src/meteoJS/Timeline.js","webpack://meteoJS/./src/meteoJS/timeline/Animation.js","webpack://meteoJS/./src/meteoJS/timeline/animation/ToggleButton.js","webpack://meteoJS/./src/meteoJS/timeline/Visualisation.js","webpack://meteoJS/./src/meteoJS/timeline/visualisation/Text.js","webpack://meteoJS/./src/meteoJS/timeline/visualisation/Slider.js","webpack://meteoJS/./src/meteoJS/timeline/visualisation/bsButtons.js","webpack://meteoJS/./src/meteoJS/timeline/visualisation/bsDropdown.js","webpack://meteoJS/./src/meteoJS/synview/SynviewMap.js","webpack://meteoJS/./src/meteoJS/synview/Collection.js","webpack://meteoJS/./src/meteoJS/synview/Resource.js","webpack://meteoJS/./src/meteoJS/synview/ResourceCollection.js","webpack://meteoJS/./src/meteoJS/synview/Type.js","webpack://meteoJS/./src/meteoJS/synview/TypeCollection.js","webpack://meteoJS/./src/meteoJS/synview/Tooltip.js","webpack://meteoJS/./src/meteoJS/Synview.js","webpack://meteoJS/./src/meteoJS/synview/map/MapOL.js","webpack://meteoJS/./src/meteoJS/synview/map/MapLL.js","webpack://meteoJS/./src/meteoJS/synview/resource/Vector.js","webpack://meteoJS/./src/meteoJS/synview/resource/GeoJSON.js","webpack://meteoJS/./src/meteoJS/synview/resource/VectorTile.js","webpack://meteoJS/./src/meteoJS/synview/resource/GeoJSONTile.js","webpack://meteoJS/./src/meteoJS/synview/resource/Image.js","webpack://meteoJS/./src/meteoJS/synview/resource/OSM.js","webpack://meteoJS/./src/meteoJS/Tooltip.js","webpack://meteoJS/./src/meteoJS/tooltip/BootstrapTooltip.js","webpack://meteoJS/./src/meteoJS/base/Unique.js","webpack://meteoJS/./src/meteoJS/base/Collection.js","webpack://meteoJS/./src/meteoJS/sounding/Parcel.js","webpack://meteoJS/./src/meteoJS/Sounding.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/Functions.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/DiagramSounding.js","webpack://meteoJS/./src/meteoJS/ThermodynamicDiagramPluggable.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/CoordinateSystem.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/coordinateSystem/StueveDiagram.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/coordinateSystem/Emagram.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/coordinateSystem/SkewTlogPDiagram.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/PlotArea.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/PlotDataArea.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/PlotAltitudeDataArea.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/TDDiagram.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/WindbarbsProfile.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/WindspeedProfile.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/Hodograph.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/axes/yAxis.js","webpack://meteoJS/./src/meteoJS/thermodynamicDiagram/axes/xAxis.js","webpack://meteoJS/./src/meteoJS/ThermodynamicDiagram.js","webpack://meteoJS/./src/meteoJS/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","ol","layer","Group","proj","SVG","Vector","format","GeoJSON","Observable","source","VectorTile","ImageStatic","Image","OSM","Tile","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","obj","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","makeInvokeMethod","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","webpackPolyfill","deprecate","paths","children","bootstrap","altitudeISAByPres","Math","pow","pressureISAByAltitude","a","potentialTempByTempAndPres","temp","pres","tempByPotentialTempAndPres","potentialTemp","tempByEquiPotTempAndPres","thetae","pcon","delta","abs","saturationHMRByTempAndPres","exp","dewpointByHMRAndPres","hmr","x","log","wetbulbTempByTempAndDewpointAndPres","dewpoint","Ediff","incr","previoussign","E","equiPotentialTempByTempAndDewpointAndPres","potTemp","lclTemperatureByTempAndDewpoint","saturationPressureByTemp","coef","Array","escold","retval","tt","inx","e","lclByPotentialTempAndHMR","b","hmrp","potentialTempByLCLAndHMR","lcl","Th","lclTh","tempCelsiusToKelvin","tempKelvinToCelsius","windspeedMSToKMH","wind","windspeedKMHToMS","windspeedMSToKN","windspeedKNToMS","windspeedMSToBF","min","windspeedBFToMS","snowlineByTemp850hPaAndAltidude","pressureByBarometricFormula","p0","h","T0","T1","M","densityHumidAirByPressureAndTempAndRelHumidity","T","rh","pv","on","listener","callback","thisArg","listeners","result_key","random","substr","un","once","once_listeners","hasListener","trigger","args","arguments","shift","apply","addEventFunctions","RepetitiveRequests","url","user","password","start","defaultTimeout","timeoutOnError","pauseOnHiddenDocument","responseType","_url","_user","_password","_isStarted","_defaultTimeout","_timeoutOnError","_pauseOnHiddenDocument","_initPauseOnHiddenDocument","_responseType","_timeoutID","_loading","isStarted","_startRequest","timeoutID","clearTimeout","delay","setTimeout","_makeRequest","request","cacheControl","getResponseHeader","maxAges","exec","round","_planRequest","XMLHttpRequest","addEventListener","status","open","send","document","hidden","Timeline","maxTimeGap","keyboardNavigation","selectedTime","Date","times","enabledTimes","allEnabledTimes","timesByKey","_keyboardNavigation","_initKeyboardNavigation","time","_setSelectedTime","_indexOfTimeInTimesArray","id","enabled","_updateTimes","_updateEnabledTimes","getFirstEnabledTime","getLastEnabledTime","getNextEnabledTime","getPrevEnabledTime","getNextAllEnabledTime","getPrevAllEnabledTime","amount","timeKey","getSelectedTime","valueOf","setUTCFullYear","getUTCFullYear","setUTCMonth","getUTCMonth","setUTCDate","getUTCDate","index","reduce","acc","oldTime","timesArr","_sortTimesArray","lastTime","getTime","first","last","prevAllEnabledTime","nextAllEnabledTime","event","_isEventMatchPressedKeys","findIndex","sort","keyboardEvent","pressedKeys","cur","indexOf","keyCode","Animation","timeline","restartPause","imagePeriod","imageFrequency","enabledStepsOnly","allEnabledStepsOnly","options","animationIntervalID","animationTimeoutID","animationStep","timesHash","onChangeTimes","_getTimelineTimesMethod","_getTimelineChangeTimesEvent","_updateAnimation","setImagePeriod","Number","_setStep","_clearAnimation","step","_getCount","_initAnimation","_initRestartPause","window","setInterval","setSelectedTime","clearInterval","insertFrequencyInput","node","animation","suffix","number","$","addClass","attr","inputGroupNumber","append","text","setImageFrequency","val","onChangeImageFrequency","getImageFrequency","insertFrequencyRange","frequencies","range","insertRestartPauseInput","input","setRestartPause","onChange","getRestartPause","ToggleButton","startedContent","startedClass","stoppedContent","stoppedClass","classButton","classDropdownToggle","menu","menuImageFrequency","imageFrequencyCaption","menuFrequencies","menuRestartPause","restartPauseCaption","animationButton","is","onStart","removeClass","empty","String","onStop","click","toggle","btnDropdown","menuDropdown","label","div","Visualisation","textInvalid","getTimeText","outputTimezone","inputListener","emptyNode","detachEventListeners","isListenersDefined","attachEventListener","onChangeTime","onInitNode","updateOutput","methodName","toISOString","func","listenerArr","off","Text","rest","setNode","timeToText","Slider","timesIndexes","getTimelineTimes","prop","that","bsButtons","grouping","groupingFormat","classMain","classButtonGroup","classButtonGroupMargin","classLabel","classLabelSpan","classButtonActive","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled","toolbarNode","find","each","data","lastNode","btnGroup","span","btn","isTimeAllEnabled","isTimeEnabled","hasClass","bsDropdown","buttonFormat","groupingDivider","classDropdownMenu","classDropdownItem","classItemActive","classItemNotEnabled","classItemEnabled","classItemAllEnabled","classDropdownHeader","classDropdownDivider","classDropdownButton","visualisationButtonText","dropdownNode","setOutputTimezone","lastGroupTimeStr","getElementById","button","SynviewMap","extend","map","layerGroup","synviewType","feature","color","Collection","itemIds","items","getIndexById","itemId","item","getId","containsId","getItemById","splice","Resource","datetime","mimetype","reloadTime","className","imageSmoothingEnabled","_normalizeOLOptions","reloadTimerId","visible","zIndex","opacity","_imageSmoothing","getUrl","_reload","setVisible","addTo","removeLayer","setZIndex","setOpacity","getLayers","remove","getLLLayer","getVisible","addLayer","getOLLayer","setReloadTime","getReloadTime","_makeOLLayer","VectorLayer","makeOLLayer","events","eventName","getSource","contextOptions_","msImageSmoothingEnabled","_makeLLLayer","L","Layer","makeLLLayer","reloadFunction","getState","unByKey","getOpacity","getZIndex","style","imageSmoothing","ResourceCollection","res","getResourceByTime","resource","_append","_sortTimes","_remove","resources","_filterTimesByResources","getDatetime","tIndex","containsStaticResource","filter","match","Type","displayMethod","displayMaxResourceAge","displayFadeStart","displayFadeStartOpacity","tooltip","preload","collection","displayedResourceTime","_addOLLayer","_preload","_removeOLLayer","newResource","oldResource","_replaceOLLayer","setResources","getResourceCollection","getItems","setLayerGroup","LayerGroup","group","setDisplayTime","_hideVisibleResource","getTimes","time_to_show","_getResourceTimeByDisplayTime","styleArguments","setOLStyle","getLayerGroup","resultTime","resourceTime","TypeCollection","exclusiveVisibility","syncVisibility","isVisible","getVisibleTypes","isVisibleType","Tooltip","typeCollection","tooltipFeature","tooltipPixelColor","getOwnPropertyDescriptor","tooltipNode","css","prependTo","getMap","getTargetElement","dragging","getExtendedEventByTypeCollection","join","show","posX","pixel","posY","tooltipContent","getTooltip","content","hide","Synview","getTypeCollection","updateTimes","isLastTime","isLastEnabledTime","setTimesBySetID","appendType","makeLayerGroup","getTimeline","removeType","deleteSetID","removedType","newId","setId","MapOL","getView","transform","getCenter","getProjection","center","valid","setCenter","fromLonLat","getZoom","zoom","setZoom","visibleTypes","Map","set","visibleLayers","Set","visibleLayerClassnames","getArray","add","getClassName","forEachFeatureAtPixel","hitTolerance","layerFilter","has","forEachLayerAtPixel","MapLL","opt","sourceOptions","projection","VectorSource","setStyle","getStyle","GeoJSONFormat","VectorTileSource","VectorTileLayer","GeoJSONTile","extent","imageExtent","transformExtent","ImageLayer","Static","imageOverlay","image_","load","TileLayer","OSMSource","_isShown","_content","fireShowEvent","isShown","fireHideEvent","oldContent","onContentChange","BootstrapTooltip","bootstrapOptions","closeOnMouseMove","closeOnMouseEnter","_initBootstrapOptions","_tooltipNode","left","top","isStringContent","_updateNonStringContent","update","mousemove","mouseenter","_initTooltipNode","Unique","_id","fireReplace","fireAddRemoveOnReplace","appendOnReplace","sortFunction","emptyObjectMaker","_itemIds","_items","itemInCollection","_sort","realItem","ids","Parcel","tmpc","dwpc","ptrace","ttrace","blayer","tlayer","lclpres","lclhght","lfcpres","lfchght","elpres","elhght","mplpres","mplhght","bplus","bminus","bfzl","b3km","b6km","p0c","pm10c","pm20c","pm30c","hght0c","hghtm10c","hghtm20c","hghtm30c","wm10c","wm20c","wm30c","li5","li3","brnshear","brnu","brnv","limax","limaxpres","cap","cappres","bmin","bminpres","Sounding","calcMissing","parcels","levels","_parcelCollection","levelsData","levelData","addLevel","calculateMissingData","hght","u","v","wdir","wspd","tmpk","dwpk","relh","mixr","theta","wetbulb","vtmp","sin","PI","cos","sqrt","arctan","levelA","levelB","getNormalizedLineStyleOptions","width","defaults","getFirstDefinedValue","getNormalizedFontOptions","size","anchor","getNormalizedLineOptions","params","drawTextInto","y","horizontalMargin","verticalMargin","font","fill","background","rect","textNode","dy","bbox","height","dx","drawWindbarbInto","strokeStyle","fillTriangle","triangleRatio","barbDistanceRatio","barbHeightRatio","circleOnLowWindspeed","circleRadiusRatio","windspeed","windbarbGroup","barbGroup","triangleWidth","barbDistance","windbarbHeight","yPosition","windspeedResidual","circle","stroke","line","polyline","barbsWidth","scale","rotate","DiagramSounding","sounding","diagram","windprofile","hodograph","_sounding","_visible","_options","getNormalizedDiagramOptions","getNormalizedWindprofileOptions","getNormalizedParcelsOptions","willTrigger","updateDiagramOptions","updateWindprofileOptions","updateLineOptions","updateParcelsOptions","parcel","dewp","updateOptionsPart","oldVisible","linecap","updateOptions","windbarbs","lineKeys","styleKey","ThermodynamicDiagramPluggable","renderTo","_svgNode","boundingRect","getBoundingClientRect","computedStyle","getComputedStyle","parseFloat","getPropertyValue","_plotAreas","plotArea","svgNode","dispatchEvent","target","_hoverLabelsGroup","clear","addSounding","removeSounding","coordinateSystem","formerCoordinateSystem","diagramSounding","CoordinateSystem","pressure","temperature","_width","_height","temperatureBottomLeft","temperatureBottomRight","inclinationTan","_initPressureOptions","_initTemperatureOptions","inclinationAngle","max","x0","getTByXY","getYByXP","getXByYT","getPByXY","getTByXP","getXByPT","getXByPPotentialTemperatur","getYByXPotentialTemperature","getYByPT","thetaEY","getYByXT","reference","_normalizeTemperatureRange","tan","test","yReference","xTmin","deltaT","oldWidth","oldHeight","k","StueveDiagram","Emagram","SkewTlogPDiagram","PlotArea","_getNormalizedStyle","_svgNodeBackground","_coordinateSystem","_coordinateSystemListenerKey","onCoordinateSystemChange","_initEvents","drawBackground","_drawBackground","overflow","dblclick","mousedown","mouseup","mouseover","mouseout","touchstart","touchmove","touchleave","touchend","touchcancel","eventKey","customEvent","getExtendedEvent","point","pageX","pageXOffset","pageY","pageYOffset","elementX","elementY","PlotDataArea","getSoundingVisibility","dataGroupIds","getCoordinatesByLevelData","insertDataGroupInto","_getSoundingVisibility","_dataGroupIds","_getCoordinatesByLevelData","_insertDataGroupInto","_svgNodeData","_soundings","changeOptions","drawSounding","onChangeSoundingVisibility","listenerKeyVisible","listenerKeyOptions","soundingGroup","getLevels","getData","dataGroupId","level","PlotAltitudeDataArea","hoverLabels","_isHoverLabelsRemote","_initHoverLabels","diagramPres","remote","insertLabelsFunc","hoverLabelsSounding","getNearestLevel","TDDiagram","unit","isobars","isotherms","dryadiabats","pseudoadiabats","mixingratio","getNormalizedDiagramLineOptions","highlightedLines","dasharray","minPressure","svgGroups","border","_parcelsOptions","_parcels","parcelsGroup","listenerKey","parcelCollection","drawParcels","init","plotIsobars","plotIsotherms","plotDryadiabats","plotPseudoadiabats","plotMixingratio","parcelsObj","drawParcel","pottmpk","lcltmpk","lclthetaek","getParcelOptions","tempGroup","dewpGroup","y0","getXByYPotentialTemperature","y1","getYByPPotentialTemperatur","x1","tempPolyline","isDryAdiabatStraightLine","y2","x2","getXByYEquiPotTemp","x0dwp","getXByYHMR","x1dwp","dewpPolyline","redraw","_plotLines","interval","isIsothermsVertical","TKelvin","points","lines","thetaeKelvin","maxPressure","getYByPEquiPotTemp","getYByPHMR","valuesOptions","pointsFunc","ceil","end","floor","highlightLineWidth","vHighlight","diagramTmpk","snapToData","align","radius","radiusPlus","_makeInsertLabelsFunc","hghtStr","drawPressureHoverLabelInto","labelOptions","lineWidth","fillOptions","cx","cy","WindbarbsProfile","windbarbLength","windbarbData","_windbarbLength","WindspeedProfile","windspeedMax","Hodograph","grid","origin","_gridOptions","getNormalizedGridOptions","minLength","pixelPerSpeed","move","axes","axesLength","circles","labels","xText","angle","yText","textAnchor","plain","before","getNormalizedTextOptions","yAxis","title","_labelsOptions","_titleOptions","getNormalizedTitleOptions","svgLabelsGroup","minLevel","maxLevel","fontSize","xAxis","minT","maxT","ThermodynamicDiagram","windbarbsProfile","windspeedProfile","normalizePlotAreaOptions","defaultPadding","appendPlotArea","yAxisClass","xAxisClass","exchangeCoordinateSystem","makeTimeTextCallbackFunction","moment","utc","local","tz","insertFrequencyButtonGroup","btnGroupClass","btnClass","freq","insertRestartPauseRange","pauses","insertRestartPauseButtonGroup","pause","visualisation","synview","thermodynamicDiagram","functions"],"mappings":"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","file":"meteoJS.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","module.exports = jQuery;","module.exports = ol.layer.Group;","module.exports = ol.proj;","module.exports = SVG;","module.exports = ol.layer.Vector;","module.exports = ol.format.GeoJSON;","module.exports = ol.Observable;","module.exports = ol.source.Vector;","module.exports = ol.source.VectorTile;","module.exports = ol.layer.VectorTile;","module.exports = ol.source.ImageStatic;","module.exports = ol.layer.Image;","module.exports = ol.source.OSM;","module.exports = ol.layer.Tile;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = bootstrap;","/**\n * @module meteoJS/calc\n */\n\n/**\n * Umrechnung eines Luftdrucks zur entsprechenden Hhe in der\n * Internationalen Standard-Atmosphre (ISA).\n * \n * Formel ist gltig bis 11 km Hhe\n * (https://de.wikipedia.org/wiki/Barometrische_H%C3%B6henformel#Internationale_H.C3.B6henformel)\n * \n * @static\n * @public\n * @param {number|undefined} p Luftdruck [hPa]\n * @return {number|undefined} Hhe in der Standard-Atmosphre [m .M.]\n */\nexport function altitudeISAByPres(p) {\n  if (p === undefined ||\n      isNaN(p))\n    return undefined;\n  return 44330.769*(1 - Math.pow(p/1013.25, 0.19029496));\n}\n\n/**\n * Umrechnung einer Hhe in einen Luftdruck in der\n * Internationalen Standard-Atmosphre (ISA).\n * \n * Formel ist gltig bis 11 km Hhe\n * (https://de.wikipedia.org/wiki/Barometrische_H%C3%B6henformel#Internationale_H.C3.B6henformel)\n * \n * @static\n * @public\n * @param {number|undefined} a Hhe [m .M.]\n * @return {number|undefined} Luftdruck in der Standard-Atmosphre [hPa]\n */\nexport function pressureISAByAltitude(a) {\n  if (a === undefined ||\n      isNaN(a))\n    return undefined;\n  return 1013.25*Math.pow(1-a/44330.769, 5.255);\n}\n\n/**\n * Berechnung der potentielle Temperatur  aus der Temperatur und des Drucks\n * eines Luftpakets.\n * \n * Berechnung zum Normaldruck von 1000 hPa\n * (https://de.wikipedia.org/wiki/Potentielle_Temperatur#Trockenpotentielle_Temperatur)\n * \n * @param {number|undefined} temp Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Potentielle Temperatur [K]\n */\nexport function potentialTempByTempAndPres(temp, pres) {\n  if (temp === undefined || isNaN(temp) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  return temp * Math.pow(1000/pres, 0.286);\n}\n\n/**\n * Berechnung der Lufttemperatur bei einem Luftdruck fr ein Luftpaket mit\n * entsprechender potentiellen Temperatur.\n * \n * Berechnung zum Normaldurck von 1000 hPa\n * \n * @param {number|undefined} potentialTemp Potentielle Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Temperatur [K]\n */\nexport function tempByPotentialTempAndPres(potentialTemp, pres) {\n  if (potentialTemp === undefined || isNaN(potentialTemp) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  return potentialTemp*Math.pow(pres/1000, 0.286);\n}\n\n/**\n * Temperatur eines Luftpaktes mit Druck 'pres' und der quivalent potentiellen Temperatur 'thetae'.\n * \n * @param {number|undefined} thetae quivalent potentielle Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Temperatur [K]\n */\nexport function tempByEquiPotTempAndPres(thetae, pres) {\n  if (pres === undefined || isNaN(pres))\n    return undefined;\n  var s = undefined;\n  var th = undefined;\n  var pcon = Math.pow(1000/pres, .286);\n  var t = 273.0;\n  var delta = 20;\n  var i = 0;\n  while (Math.abs(delta) > 0.1 && i < 100) {\n    i++;\n    s = saturationHMRByTempAndPres(t, pres);\n    th = t * pcon * Math.exp(2.5*s/t);\n    if ((th-thetae)*delta > 0.0)\n      delta = -.5 * delta;\n    t = t + delta;\n  }\n  return t;\n}\n\n/**\n * Taupunkt eines Luftpaktes ber Mischungsverhltnis und Druck.\n * \n * @param {number|undefined} hmr Mischungsverhtlnis [g/kg]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Taupunkttemperatur [K]\n */\nexport function dewpointByHMRAndPres(hmr, pres) {\n  if (hmr === undefined || isNaN(hmr) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  var x = 0.4343 * Math.log(hmr * pres /(622. + hmr));\n  return Math.pow(10,.0498646455 * x + 2.4082965 ) -\n         7.07475 +\n         38.9114 * Math.pow((Math.pow(10, .0915 * x) - 1.2035),2);\n}\n\n/**\n * Wetbulb-Temperature, Psychro-Temperature aus Temperatur, Taupunkt und Luftdruck\n * \n * @param {number|undefined} temp Temperatur [K]\n * @param {number|undefined} dewpoint Taupunkttemperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Wetbulb-Temperatur [K]\n */\nexport function wetbulbTempByTempAndDewpointAndPres(temp, dewpoint, pres) {\n  if (temp === undefined || isNaN(temp) ||\n      dewpoint === undefined || isNaN(dewpoint) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  var result = dewpoint-273.15;\n  var Ediff = 1;\n  var incr = 10;\n  var previoussign = 1;\n  var E = 6.112 * Math.exp((17.67 * result) / (result + 243.5));\n  while (Math.abs(Ediff) > 0.05) {\n    var Eguess = 6.112 * Math.exp((17.67 * result) / (result + 243.5)) -\n                 pres * (temp-273.15 - result) * 0.00066 * (1 + (0.00115 * result));\n    Ediff = E - Eguess;\n    if (Ediff == 0)\n      break;\n    else {\n      if (Ediff < 0) {\n        if (-1 != previoussign) {\n          previoussign = -1;\n          incr = incr/10;\n        }\n      }\n      else {\n        if (1 != previoussign) {\n          previoussign = 1;\n          incr = incr/10;\n        }\n      }\n    }\n    if (Math.abs(Ediff) <= 0.05)\n      break;\n    else\n      result = result + incr*previoussign;\n  }\n  return result+273.15;\n}\n\n/**\n * quivalent Potentielle Temperatur eines Luftpaktes.\n * \n * Gemss Formel von Holten (https://en.wikipedia.org/wiki/Equivalent_potential_temperature#Formula)\n * \n * @param {number|undefined} temp Temperatur [K]\n * @param {number|undefined} dewpoint Taupunkts-Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} quivalent potentielle Temperatur [K]\n */\nexport function equiPotentialTempByTempAndDewpointAndPres(temp, dewpoint, pres) {\n  var potTemp = potentialTempByTempAndPres(temp, pres);\n  if (potTemp === undefined ||\n      dewpoint === undefined || isNaN(dewpoint) ||\n      temp === undefined || isNaN(temp) ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  return potTemp *\n    Math.exp(2481.9e-3 *\n             saturationHMRByTempAndPres(dewpoint, pres) /\n             lclTemperatureByTempAndDewpoint(temp, dewpoint));\n}\n\n/**\n * Berechnung des Sttigung-Dampfdrucks zu einer Temperatur\n * \n * @param {number|undefined} temp Temperatur [K]\n * @return {number|undefined} Sttigungs-Dampfdruck [hPa]\n */\nexport function saturationPressureByTemp(temp) {\n  if (temp === undefined || isNaN(temp))\n    return undefined;\n  var coef= new Array(6.1104546, 0.4442351, 1.4302099e-2, 2.6454708e-4, 3.0357098e-6, 2.0972268e-8, 6.0487594e-11,-1.469687e-13);\n  var inx=0;\n  // sat vap pressures every 5C from -50 to -200\n  var escold= new Array(\n    0.648554685769663908E-01, 0.378319512256073479E-01,\n    0.222444934288790197E-01, 0.131828928424683120E-01,\n    0.787402077141244848E-02, 0.473973049488473318E-02,\n    0.287512035504357928E-02, 0.175743037675810294E-02,\n    0.108241739518850975E-02, 0.671708939185605941E-03,\n    0.419964702632039404E-03, 0.264524363863469876E-03,\n    0.167847963736813220E-03, 0.107285397631620379E-03,\n    0.690742634496135612E-04, 0.447940489768084267E-04,\n    0.292570419563937303E-04, 0.192452912634994161E-04,\n    0.127491372410747951E-04, 0.850507010275505138E-05,\n    0.571340025334971129E-05, 0.386465029673876238E-05,\n    0.263210971965005286E-05, 0.180491072930570428E-05,\n    0.124607850555816049E-05, 0.866070571346870824E-06,\n    0.605982217668895538E-06, 0.426821197943242768E-06,\n    0.302616508514379476E-06, 0.215963854234913987E-06,\n    0.155128954578336869E-06);\n\n  temp = temp - 273.15;\n  var retval = 0;\n  //try {\n  if (temp > -50.) {\n    retval = ( coef[0] + temp*(coef[1] + temp*(coef[2] + temp*(coef[3] +\n    temp*(coef[4] + temp*(coef[5] + temp*(coef[6] + temp*coef[7])))))));\n\n  } else {\n    var tt = (-temp - 50.)/5.;\n    //var = (int) tt;\n    if (inx < escold.length-1) {\n      retval = escold[inx] + (tt % 1.)*(escold[inx+1]-escold[inx]);\n    } else {\n      retval = 1e-7;\n    }\n  }\n  // } catch (Exception e) {\n  //   GWT.log(\"caught exception: \"+e);\n  //  retval = 1e-7;\n  //}\n  return retval;\n}\n\n/**\n * Berechnung des Sttigungs-Mischungsverhltnisses aus Temperatur und Druck\n * \n * HMR = humidity mixing ratio\n * \n * @param {number|undefined} temp Temperatur [K]\n * @param {number|undefined} pres Luftdruck [hPa]\n * @return {number|undefined} Sttigungs-Mischungsverhltnis [g/kg]\n */\nexport function saturationHMRByTempAndPres(temp, pres) {\n  var e = saturationPressureByTemp(temp);\n  if (e === undefined ||\n      pres === undefined || isNaN(pres))\n    return undefined;\n  return 621.97*e/(pres - e);\n}\n\n/**\n * Lifting Condensation Level (LCL) eines Luftpakets mit entsprechender\n * potentieller Temperatur und Mischungsverhltnis.\n * \n * @param {number|undefined} potentialTemp Potentielle Temperatur [K]\n * @param {number|undefined} hmr Mischungsverhltnis [g/kg]\n * @return {undefined|number} LCL [hPa]\n */\nexport function lclByPotentialTempAndHMR(potentialTemp, hmr) {\n  if (hmr === undefined || isNaN(hmr))\n    return undefined;\n  // Binre Suche\n  var a = 1013;\n  var b = 100;\n  while (a-b > 10) {\n    var p = b+(a-b)/2;\n    var hmrp = saturationHMRByTempAndPres(\n      tempByPotentialTempAndPres(potentialTemp, p),\n      p);\n    if (hmrp === undefined)\n      return undefined;\n    if (hmrp < hmr)\n      b = p;\n    else\n      a = p;\n  }\n  return b+(a-b)/2;\n}\n\n/**\n * Potentielle Temperatur zu einem Lifting Condensation Level (LCL) bei\n * gegebenem Mischungsverhltnis.\n * \n * @param {number|undefined} lcl LCL [hPa]\n * @param {number|undefined} hmr Mischungsverhltnis [g/kg]\n * @return {number|undefined} Potentielle Temperatur [K]\n */\nexport function potentialTempByLCLAndHMR(lcl, hmr) {\n  if (lcl === undefined || isNaN(lcl))\n    return undefined;\n  // Binre Suche\n  var a = 323;\n  var b = 223;\n  while (a-b > 0.1) {\n    var Th = b+(a-b)/2;\n    var lclTh = lclByPotentialTempAndHMR(Th, hmr);\n    if (lclTh === undefined)\n      return undefined;\n    if (lclTh > lcl)\n      b = Th;\n    else\n      a = Th;\n  }\n  return b+(a-b)/2;\n}\n\n/**\n * Temperatur eines Luftpaktes, welches zum LCL angehoben wird.\n * \n * @param {number|undefined} temp Lufttemperatur [K]\n * @param {number|undefined} dewpoint Taupunktstemperatur [K]\n * @return {undefined|number} Temperatur [K]\n */\nexport function lclTemperatureByTempAndDewpoint(temp, dewpoint) {\n  if (temp === undefined || isNaN(temp) ||\n      dewpoint === undefined || isNaN(dewpoint))\n    return undefined;\n  return (dewpoint - (.001296*dewpoint - .15772)*(temp-dewpoint) );\n}\n\n/**\n * Umwandlung Temperatur von Celsius in Kelvin\n * \n * @param {number|undefined} temp [C]\n * @return {undefined|number} [K]\n */\nexport function tempCelsiusToKelvin(temp) {\n  return (temp === undefined || isNaN(temp)) ? undefined : temp+273.15;\n}\n\n/**\n * Umwandlung Temperatur von Kelvin zu Celsius\n * \n * @param {number|undefined} temp [K]\n * @return {undefined|number} [C]\n */\nexport function tempKelvinToCelsius(temp) {\n  return (temp === undefined || isNaN(temp)) ? undefined : temp-273.15;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von m/s in km/h\n * \n * @param {number|undefined} wind [m/s]\n * @return {undefined|number} [km/h]\n */\nexport function windspeedMSToKMH(wind) {\n  return (wind === undefined || isNaN(wind)) ? undefined : wind*3.6;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von km/h in m/s\n * \n * @param {number|undefined} wind [km/h]\n * @return {undefined|number} [m/s]\n */\nexport function windspeedKMHToMS(wind) {\n  return (wind === undefined || isNaN(wind)) ? undefined : wind/3.6;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von m/s in Knoten\n * \n * @param {number|undefined} wind [m/s]\n * @return {undefined|number} [kn]\n */\nexport function windspeedMSToKN(wind) {\n  return (wind === undefined || isNaN(wind)) ? undefined : wind*900/463;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von Knoten in m/s\n * \n * @param {number|undefined} wind [kn]\n * @return {undefined|number} [m/s]\n */\nexport function windspeedKNToMS(wind) {\n  return (wind === undefined || isNaN(wind)) ? undefined : wind*463/900;\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von m/s in Beaufort\n * \n * @param {number|undefined} wind [m/s]\n * @return {undefined|number} [bf]\n */\nexport function windspeedMSToBF(wind) {\n  return (wind === undefined || isNaN(wind)) ?\n    undefined :\n    Math.min(12, Math.pow(wind/0.8360, 2/3));\n}\n\n/**\n * Umwandlung Windgeschwindigkeit von Beaufort in m/s\n * \n * @param {number|undefined} wind [bf]\n * @return {undefined|number} [m/s\n */\nexport function windspeedBFToMS(wind) {\n  return (wind === undefined || isNaN(wind)) ?\n    undefined :\n    0.8360 * Math.pow(wind, 3/2);\n}\n\n/**\n * Abschtzung der Schneefallgrenze aus Temperatur und Hhe des 850hPa-Levels\n * \n * Formel aus Weathercalc herauskopiert.\n * \n * @static\n * @public\n * @param {number|undefined} temp Temperatur auf 850 hPa [K]\n * @param {number|undefined} a Hhe des 850 hPa Levels [m .M.]\n * @return {number|undefined} Abgeschtzte Schneefallgrenze [m .M.]\n */\nexport function snowlineByTemp850hPaAndAltidude(temp, a) {\n  if (temp === undefined || isNaN(temp) ||\n      a === undefined || isNaN(a))\n    return undefined;\n  return 153.0 * tempKelvinToCelsius(temp) + 0.9985 * a - 304.26;\n}\n\n/**\n * Barometrische Hhenformel. Berechnung von Luftdruck in anderer Hhe.\n * \n * Formel aus Wiki-Artikel https://de.wikipedia.org/wiki/Barometrische_H%C3%B6henformel\n * \n * @static\n * @public\n * @param {number|undefined} p0 Druck auf dem Startlevel [hPa]\n * @param {number|undefined} h Hhe bis zum Ziellevel (positiv fr hher ber Meereslevel) [m]\n * @param {number|undefined} T0 Temperatur auf dem Startlevel [K]\n * @param {number|undefined} T1 Temperatur auf dem Ziellevel, wenn undefined\n *                              wird Isothermie angenommen [K]\n * @return {number|undefined} Luftdruck auf dem Ziellevel [hPa]\n */\nexport function pressureByBarometricFormula(p0, h, T0, T1) {\n  if (p0 === undefined || isNaN(p0) ||\n      h === undefined || isNaN(h) ||\n      T0 === undefined || isNaN(T0))\n    return undefined;\n  if (h == 0)\n    return p0;\n  var M = 0.02896;\n  var g = 9.807;\n  var R = 8.314;\n  if (T1 === undefined)\n    T1 = T0;\n  // Isotherme Atmosphre\n  if (T0 == T1)\n    return p0 * Math.exp(-M*g/R/T0*h);\n  var a = (T0 - T1)/h;\n  return p0 * Math.exp(M*g/R/a*Math.log(1-a*h/T0));\n}\n\n/**\n * Dichte von feuchter Luft.\n * \n * Formel aus Wiki-Artikel https://en.wikipedia.org/wiki/Density_of_air\n * \n * @param {number|undefined} p Luftdruck [hPa]\n * @param {number|undefined} T Lufttemperatur [K]\n * @param {number|undefined} rh Luftfeuchtigkeit []\n * @return {number|undefined} Dichte [kg/m^3]\n */\nexport function densityHumidAirByPressureAndTempAndRelHumidity(p, T, rh) {\n  if (p === undefined || isNaN(p) ||\n      T === undefined || isNaN(T) ||\n      rh === undefined || isNaN(rh))\n    return undefined;\n  var Rd = 287.058; // J/(kgK)\n  var Rv = 461.495; // J/(kgK)\n  var pv = saturationPressureByTemp(T)*rh;\n  return (p - pv)*100/Rd/T + pv*100/Rv/T;\n}","/**\n * @module meteoJS/events\n */\n\n/**\n * Listen for a certain type of event\n * \n * @abstract\n * @param {string} listener - Event type.\n * @param {callback} callback - Listener function.\n * @param {mixed} [thisArg] - Objekt fr this beim Ausfhren von callback.\n * @returns {number} Listener function key.\n */\nfunction on(listener, callback, thisArg) {\n  if (!('listeners' in this) ||\n      this.listeners === undefined)\n    this.listeners = {};\n  if (!(listener in this.listeners))\n    this.listeners[listener] = {};\n  // Adapted from https://gist.github.com/gordonbrander/2230317\n  var result_key = Math.random().toString(36).substr(2, 9);\n  this.listeners[listener][result_key] = {\n    callback: callback,\n    thisArg:  thisArg\n  };\n  return result_key;\n}\n\n/**\n * Unlisten for a certain type of event\n * \n * @abstract\n * @param {string} listener - Event type.\n * @param {number} key - Listener function key.\n */\nfunction un(listener, key) {\n  if ('listeners' in this &&\n      this.listeners !== undefined &&\n      listener in this.listeners &&\n      key in this.listeners[listener])\n    delete this.listeners[listener][key];\n}\n\n/**\n * Listen once for a certain type of event\n * \n * @abstract\n * @param {string} listener - Event type.\n * @param {callback} callback - Listener function.\n * @param {mixed} [thisArg] - Objekt fr this beim Ausfhren von callback.\n */\nfunction once(listener, callback, thisArg) {\n  if (!('once_listeners' in this) ||\n      this.once_listeners === undefined)\n    this.once_listeners = {};\n  if (!(listener in this.once_listeners) ||\n      !('push' in this.once_listeners[listener]))\n    this.once_listeners[listener] = [];\n  this.once_listeners[listener].push({\n    callback: callback,\n    thisArg:  thisArg\n  });\n}\n\n/**\n * Gibt es Listener Funktionen fr einen Event Type\n * \n * @abstract\n * @param {string} listener - Event type.\n * @returns {boolean}\n */\nfunction hasListener(listener) {\n  return ('listeners' in this &&\n          this.listeners !== undefined &&\n          listener in this.listeners &&\n          Object.keys(this.listeners[listener]).length) ||\n         ('once_listeners' in this &&\n          listener in this.once_listeners &&\n          Object.keys(this.once_listeners[listener]).length);\n}\n\n/**\n * Execute all listener functions fr einen Event Type\n * \n * @abstract\n * @param {string} listener - Event type.\n */\nfunction trigger(listener) {\n  let args = Array.prototype.slice.call(arguments);\n  args.shift();\n  if ('listeners' in this &&\n      this.listeners !== undefined &&\n      listener in this.listeners &&\n      typeof this.listeners[listener] == 'object') {\n    Object.keys(this.listeners[listener]).forEach(key => {\n      this.listeners[listener][key].callback.apply(\n        this.listeners[listener][key].thisArg === undefined ?\n          this :\n          this.listeners[listener][key].thisArg,\n        args);\n    });\n  }\n  if ('once_listeners' in this &&\n      this.once_listeners !== undefined &&\n      listener in this.once_listeners &&\n      'forEach' in this.once_listeners[listener]) {\n    let once_listeners = this.once_listeners[listener];\n    this.once_listeners[listener] = [];\n    once_listeners.forEach(obj => {\n      obj.callback.apply(obj.thisArg === undefined ? this : obj.thisArg, args);\n    });\n  }\n}\n\n/**\n * Fgt einem Objekt alle Event-Funktionen hinzu.\n * \n * @param {object} obj\n */\nexport function addEventFunctions(obj) {\n  obj.on = on;\n  obj.un = un;\n  obj.once = once;\n  obj.hasListener = hasListener;\n  obj.trigger = trigger;\n}\nexport default addEventFunctions;","/**\n * @module meteoJS/repetitiveRequests\n */\nimport addEventFunctions from './Events.js';\n\n/**\n * Event fired on a successful request.\n * \n * @event module:meteoJS/repetitiveRequests#success:request\n * @property {external:XMLHttpRequest} request - XMLHttpRequest of the successful request.\n */\n\n/**\n * Event fired if a request failed.\n * \n * @event module:meteoJS/repetitiveRequests#error:request\n * @property {external:XMLHttpRequest} request - XMLHttpRequest of the failed request.\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/repetitiveRequests~options\n * @property {undefined|string} [url=undefined] - URL to make repetitive\n *   requests to. If undefined, no request will be done.\n * @property {string} [user=''] - User to send with request.\n * @property {string} [password=''] - Password to send with request.\n * @property {boolean} [start=true] - Start repetetive requests on construction.\n * @property {undefined|string} [defaultTimeout=undefined]\n *   Default timeout until next request, if response has no Cache-Control\n *   HTTP-Header. In milliseconds. If undefined, a further request will only be\n *   done, if the reponse returned a valid Cache-Control header.\n * @property {undefined|string} [timeoutOnError=undefined]\n *   Timeout until next request after a error response. In milliseconds. If\n *   undefined, no further request will be done after an error.\n * @property {boolean} [pauseOnHiddenDocument=false] - Pause making repetitive\n *   requests when document is hidden.\n * @property {''|'arraybuffer'|'blob'|'document'|'json'|'text'} [responseType='']\n *   Specifies the content type of the response.\n *   See {@link https://developer.mozilla.org/de/docs/Web/API/XMLHttpRequest/responseType}.\n */\n\n/**\n * Makes requests again and again. Useful to stay up to date with\n *   the data available on the server. If the response returns a Cache-Control\n *   HTTP-Header, then the next request will be done per default after this\n *   time.\n * \n * @fires module:meteoJS/repetitiveRequests#success:request\n * @fires module:meteoJS/repetitiveRequests#error:request\n */\nexport class RepetitiveRequests {\n  \n  /**\n   * @param {module:meteoJS/repetitiveRequests~options} [options] - Options.\n   */\n  constructor({\n    url = undefined,\n    user = '',\n    password = '',\n    start = true,\n    defaultTimeout = undefined,\n    timeoutOnError = undefined,\n    pauseOnHiddenDocument = false,\n    responseType = ''\n  } = {}) {\n    \n    /**\n     * @type undefined|string\n     * @private\n     */\n    this._url = url;\n    \n    /**\n     * @type string\n     * @private\n     */\n    this._user = user;\n    \n    /**\n     * @type string\n     * @private\n     */\n    this._password = password;\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._isStarted = start;\n    \n    /**\n     * @type undefined|integer\n     * @private\n     */\n    this._defaultTimeout = defaultTimeout;\n    \n    /**\n     * @type undefined|integer\n     * @private\n     */\n    this._timeoutOnError = timeoutOnError;\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._pauseOnHiddenDocument = pauseOnHiddenDocument;\n    this._initPauseOnHiddenDocument();\n    \n    /**\n     * @type string\n     * @private\n     */\n    this._responseType = responseType;\n    \n    /**\n     * @type mixed\n     * @private\n     */\n    this._timeoutID = undefined;\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._loading = false;\n    \n    if (this._isStarted)\n      this.start();\n  }\n  \n  /**\n   * Current URL to make requests to.\n   * \n   * @type undefined|string\n   */\n  get url() {\n    return this._url;\n  }\n  set url(url) {\n    this._url = url;\n  }\n  \n  /**\n   * User to send with request.\n   * \n   * @type string\n   */\n  get user() {\n    return this._user;\n  }\n  set user(user) {\n    this._user = user;\n  }\n  \n  /**\n   * Password to send with request.\n   * \n   * @type string\n   */\n  get password() {\n    return this._password;\n  }\n  set password(password) {\n    this._password = password;\n  }\n  \n  /**\n   * Content type of the response.\n   * \n   * @type string\n   */\n  get responseType() {\n    return this._password;\n  }\n  set responseType(responseType) {\n    this._responseType = responseType;\n  }\n  \n  /**\n   * Start repetitive requests. Makes immediatly the first request.\n   */\n  start() {\n    this.isStarted = true;\n    this._startRequest();\n  }\n  \n  /**\n   * Stops repetitive requests. Events aren't triggered anymore. Even if a\n   * former request creates a response.\n   */\n  stop() {\n    this.isStarted = false;\n    if (this.timeoutID !== undefined)\n      clearTimeout(this.timeoutID);\n  }\n  \n  /**\n   * Executes next request after the passed delay. If already another request\n   * is planned, nothing is done.\n   * \n   * @private\n   * @param {integer} delay - Delay in milliseconds.\n   */\n  _planRequest({\n    delay\n  }) {\n    if (this._timeoutID !== undefined)\n      return;\n    \n    this._timeoutID = setTimeout(() => {\n      this._startRequest();\n    }, delay);\n  }\n  \n  /**\n   * Makes a new request and triggeres events.\n   * \n   * @private\n   */\n  _startRequest() {\n    if (this._timeoutID !== undefined)\n      clearTimeout(this._timeoutID);\n    \n    this._makeRequest()\n      .then(({ request }) => {\n        if (!this.isStarted)\n          return;\n      \n        let delay = this._defaultTimeout;\n      \n        // Read ResponseHeader\n        let cacheControl = request.getResponseHeader('Cache-Control');\n        if (cacheControl !== null) {\n          let maxAges = /(^|,)max-age=([0-9]+)($|,)/.exec(cacheControl);\n          if (maxAges !== null &&\n            maxAges[2] > 0)\n            delay = Math.round(maxAges[2]*1000);\n        }\n      \n        this.trigger('success:request', { request });\n      \n        if (delay !== undefined)\n          this._planRequest({ delay });\n      }, ({ request } = {}) => {\n        if (!this.isStarted)\n          return;\n      \n        if (request === undefined)\n          return;\n      \n        this.trigger('error:request', { request });\n      \n        if (this._timeoutOnError !== undefined)\n          this._planRequest({ delay: this._timeoutOnError });\n      });\n  }\n  \n  /**\n   * Makes a new request immediatly, except another request is already loading.\n   * \n   * @private\n   * @returns {Promise}\n   */\n  async _makeRequest() {\n    return new Promise((resolve, reject) => {\n      if (this._url === undefined) {\n        reject();\n        return;\n      }\n      \n      if (this._loading) {\n        reject();\n        return;\n      }\n      this._loading = true;\n      \n      let request = new XMLHttpRequest();\n      if (this.responseType !== undefined)\n        request.responseType = this.responseType;\n      request.addEventListener('load', () => {\n        this._loading = false;\n        \n        if (request.status == 200)\n          resolve({ request });\n        else\n          reject({ request });\n      });\n      request.addEventListener('error', () => {\n        this._loading = false;\n        reject({ request });\n      });\n      \n      request.open('GET', this._url, true, this._user, this._password);\n      request.send();\n    });\n  }\n  \n  /**\n   * @private\n   */\n  _initPauseOnHiddenDocument() {\n    if (!this._pauseOnHiddenDocument)\n      return;\n    \n    document.addEventListener('visibilitychange', () => {\n      if ('hidden' in document)\n        if (document.hidden)\n          this.stop();\n        else\n          this.start();\n    });\n  }\n}\naddEventFunctions(RepetitiveRequests.prototype);\nexport default RepetitiveRequests;\n","/**\n * @module meteoJS/timeline\n */\nimport addEventFunctions from './Events.js';\n\n/**\n * Special key identifier.\n * \n * @typedef {\"ctrl\"|\"alt\"|\"shift\"|\"meta\"|Number}\n *   module:meteoJS/timeline~specialKeyIdentifier\n */\n\n/**\n * Definition of pressed keys with optional special keys.\n * \n * @typedef {module:meteoJS/timeline~specialKeyIdentifier|\n             module:meteoJS/timeline~specialKeyIdentifier[]}\n *   module:meteoJS/timeline~optionPressedKeys\n */\n\n/**\n * Keyboard navigation options.\n * \n * @typedef {Object} module:meteoJS/timeline~optionKeyboardNavigation\n * @param {boolean} [enabled] - Enable Keyboard Navigation.\n * @param {module:meteoJS/timeline~optionPressedKeys} [first]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#first|first()}.\n * @param {module:meteoJS/timeline~optionPressedKeys} [last]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#last|last()}.\n * @param {module:meteoJS/timeline~optionPressedKeys} [prev]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#prev|prev()}.\n * @param {module:meteoJS/timeline~optionPressedKeys} [next]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#next|next()}.\n * @param {module:meteoJS/timeline~optionPressedKeys} [prevAllEnabledTime]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#prevAllEnabledTime|prevAllEnabledTime()}.\n * @param {module:meteoJS/timeline~optionPressedKeys} [nextAllEnabledTime]\n *   Keyboard event to execute\n *   {@link module:meteoJS/timeline.Timeline#nextAllEnabledTime|nextAllEnabledTime()}.\n */\n\n/**\n * Options for timeline constructor.\n * \n * @typedef {Object} module:meteoJS/timeline~options\n * @param {number|undefined} [maxTimeGap]\n *   Maximum of time period (in seconds) between two timestamps. If this option\n *   is specified, than e.g. the method getTimes() could return more timestamps\n *   than defined by setTimesBySetID.\n * @param {module:meteoJS/timeline~optionKeyboardNavigation}\n *   [keyboardNavigation] - Keyboard navigation options.\n */\n\n/**\n * @event module:meteoJS/timeline#change:time\n * @property {Date} oldDate - Time before change.\n */\n\n/**\n * @event module:meteoJS/timeline#change:times\n */\n\n/**\n * @event module:meteoJS/timeline#change:enabledTimes\n */\n\n/**\n * @classdesc\n * Class represents a timeline.\n * On this timeline, you could define different set of times. This is useful for\n * the usecase 1: You have different data types for different times (like radar\n * and satellite pictures). Then, the timeline provides a list of all available\n * times. Each time in each set of times could be enabled or disabled. This\n * yields to the usecase 2: In a viewer of model charts, you probably want to\n * show all the times with charts. (Global models normally have a time interval\n * of 3 hours between charts) But for different parameters, you only provide\n * charts at a greater interval. E.g. you calculate 24h-precipiation sums only\n * for 00 UTC. So you can set the times of the 3-hour-interval and only set\n * the 00 UTC timestamps as enabled. To visualise the timeline use some\n * child class of the\n * {@link module:meteoJS/timeline/visualisation.Visualisation} class. To animate\n * through time steps use the {@link module:meteoJS/timeline/animation.Animation}\n * class.\n */\nexport class Timeline {\n  \n  /**\n   * @param {module:meteoJS/timeline~options} [options] - Options.\n   */\n  constructor({ maxTimeGap = undefined,\n    keyboardNavigation = {} } = {}) {\n    /**\n     * @type undefined|number\n     * @private\n     */\n    this.maxTimeGap = maxTimeGap;\n  \n    /**\n     * Date object with current selected time. Maybe invalid.\n     * @member {Date}\n     * @private\n     */\n    this.selectedTime = new Date('invalid');\n  \n    /**\n     * Times of this timeline. Sorted upwardly.\n     * @member {Date[]}\n     * @private\n     */\n    this.times = [];\n  \n    /**\n     * Times of this timeline, that are enabled at least in one set of times.\n     * Sorted upwardly.\n     * @member {Date[]}\n     * @private\n     */\n    this.enabledTimes = [];\n  \n    /**\n     * Times of this timeline, that are enabled through all set of times.\n     * Sorted upwardly.\n     * @member {Date[]}\n     * @private\n     */\n    this.allEnabledTimes = [];\n  \n    /**\n     * Objekt mit keys und Date-Arrays (zeitlich sortiert)\n     * @type Object.<mixed,Object>\n     * @private\n     */\n    this.timesByKey = {};\n    \n    /**\n     * @type {module:meteoJS/timeline~keyboardNavigationOptions}\n     * @private\n     */\n    this._keyboardNavigation = {};\n    this._initKeyboardNavigation(keyboardNavigation);\n  }\n  \n  /**\n   * Current selected time.\n   * \n   * @returns {Date} Selected time, could be invalid.\n   */\n  getSelectedTime() {\n    return this.selectedTime;\n  }\n  \n  /**\n   * Sets current selected time. You can select a time returned by getTimes only.\n   * If this is not the case, an invalid timestamp will be set.\n   * \n   * @param {Date} time - Time to select.\n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   * @fires module:meteoJS/timeline#change:time\n   */\n  setSelectedTime(time) {\n    this._setSelectedTime(\n      (_indexOfTimeInTimesArray(time, this.times) > -1) ?\n        time : new Date('invalid'));\n    return this;\n  }\n  \n  /**\n   * Returns a list of all timestamps represented by this timeline.\n   * This includes on the one hand all timestamps defined by setTimesBySetID, on\n   * the other hand there could exists additional timestamps (e.g. through the\n   * maxTimeGap option).\n   * \n   * @returns {Date[]} All defined times, sorted upwardly.\n   */\n  getTimes() {\n    return this.times;\n  }\n  \n  /**\n   * Returns a list of all enabled timestamps of this timeline.\n   * \n   * @returns {Date[]} All enabled times, sorted upwardly.\n   */\n  getEnabledTimes() {\n    return this.enabledTimes;\n  }\n  \n  /**\n   * Returns a list of times. These times are enabled throug every set of times.\n   * \n   * @returns {Date[]} Enabled times, sorted upwardly.\n   */\n  getAllEnabledTimes() {\n    return this.allEnabledTimes;\n  }\n  \n  /**\n   * Defines a set of times. Set is identified by an ID.\n   * If the set was already defined, the set of times will be overwritten.\n   * \n   * @param {mixed} id - ID of the set of times.\n   * @param {Date[]} times - Times (must be sorted upwardly).\n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   * @fires module:meteoJS/timeline#change:times\n   * @fires module:meteoJS/timeline#change:enabledTimes\n   */\n  setTimesBySetID(id, times) {\n    this.timesByKey[id] = {\n      times: times,\n      enabled: times\n    };\n    this._updateTimes();\n    this._updateEnabledTimes();\n    return this;\n  }\n  \n  /**\n   * Defines the enbaled times of a set of times. The passed times must be\n   * contained in the times of the set (defined earlier by setTimesBySetID).\n   * \n   * @param {mixed} id - ID of the set of times.\n   * @param {Date[]} times - Times to set enabled (must be sorted upwardly).\n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   * @fires module:meteoJS/timeline#change:enabledTimes\n   */\n  setEnabledTimesBySetID(id, times) {\n    if (id in this.timesByKey) {\n      this.timesByKey[id].enabled = times;\n      this._updateEnabledTimes();\n    }\n    return this;\n  }\n  \n  /**\n   * Returns IDs of all defined sets.\n   * \n   * @return {mixed[]} IDs.\n   */\n  getSetIDs() {\n    return Object.keys(this.timesByKey);\n  }\n  \n  /**\n   * Deletes a set of times.\n   * \n   * @param {mixed} id - ID of the set of times.\n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   * @fires module:meteoJS/timeline#change:times\n   * @fires module:meteoJS/timeline#change:enabledTimes\n   */\n  deleteSetID(id) {\n    if (id in this.timesByKey) {\n      delete this.timesByKey[id];\n      this._updateTimes();\n      this._updateEnabledTimes();\n    }\n    return this;\n  }\n  \n  /**\n   * Set selected time to the first time, which is enabled.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  first() {\n    this._setSelectedTime(this.getFirstEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Set selected time to the last time, which is enabled.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  last() {\n    this._setSelectedTime(this.getLastEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes selected time to the next enabled time.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  next() {\n    this._setSelectedTime(this.getNextEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes selected time to the previous enabled time.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  prev() {\n    this._setSelectedTime(this.getPrevEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes selected time to the next time, which is enabled by all sets.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  nextAllEnabledTime() {\n    this._setSelectedTime(this.getNextAllEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes selected time to the previous time, which is enabled by all sets.\n   * \n   * @returns {module:meteoJS/timeline.Timeline} Returns this.\n   */\n  prevAllEnabledTime() {\n    this._setSelectedTime(this.getPrevAllEnabledTime());\n    return this;\n  }\n  \n  /**\n   * Changes the selected time width adding an amount of \"time\".\n   * If the \"new\" timestamp is not available, the selected time is not changed.\n   * \n   * @param {number} amount - \"Time\"-Amount.\n   * @param {'years'|'y'|'months'|'M'|'days'|'d'|'hours'|'h'|'minutes'|'m'|'seconds'|'s'|'milliseconds'|'ms'}\n   *   timeKey - Period, nomenclature analogue to momentjs.\n   * @returns {module:meteoJS/timeline.Timeline} - Returns this.\n   */\n  add(amount, timeKey) {\n    let d = this.getSelectedTime();\n    let delta = 0;\n    switch (timeKey) {\n      case 'hours':\n      case 'h':\n        delta = amount * 3600 * 1000;\n        break;\n      case 'minutes':\n      case 'm':\n        delta = amount * 60 * 1000;\n        break;\n      case 'seconds':\n      case 's':\n        delta = amount * 1000;\n        break;\n      case 'milliseconds':\n      case 'ms':\n        delta = amount;\n        break;\n    }\n    if (delta != 0)\n      d = new Date(d.valueOf() + delta)\n    \n    switch (timeKey) {\n      case 'years':\n      case 'y':\n        d.setUTCFullYear(d.getUTCFullYear() + amount);\n        break;\n      case 'months':\n      case 'M':\n        d.setUTCMonth(d.getUTCMonth() + amount);\n        break;\n      case 'days':\n      case 'd':\n        d.setUTCDate(d.getUTCDate() + amount);\n        break;\n    }\n    \n    if (_indexOfTimeInTimesArray(d, this.times) > -1)\n      this._setSelectedTime(d);\n    return this;\n  }\n  \n  /**\n   * Changes the selected time width subracting an amount of \"time\".\n   * If the \"new\" timestamp is not available, the selected time is not changed.\n   * \n   * @param {number} amount - \"Time\"-Amount.\n   * @param {'years'|'y'|'months'|'M'|'days'|'d'|'hours'|'h'|'minutes'|'m'|'seconds'|'s'|'milliseconds'|'ms'}\n   *   timeKey - Period, nomenclature analogue to momentjs.\n   * @returns {module:meteoJS/timeline.Timeline} - Returns this.\n   */\n  sub(amount, timeKey) {\n    let d = this.getSelectedTime();\n    let delta = 0;\n    switch (timeKey) {\n      case 'hours':\n      case 'h':\n        delta = amount * 3600 * 1000;\n        break;\n      case 'minutes':\n      case 'm':\n        delta = amount * 60 * 1000;\n        break;\n      case 'seconds':\n      case 's':\n        delta = amount * 1000;\n        break;\n      case 'milliseconds':\n      case 'ms':\n        delta = amount;\n        break;\n    }\n    if (delta != 0)\n      d = new Date(d.valueOf() - delta)\n    \n    switch (timeKey) {\n      case 'years':\n      case 'y':\n        d.setUTCFullYear(d.getUTCFullYear() - amount);\n        break;\n      case 'months':\n      case 'M':\n        d.setUTCMonth(d.getUTCMonth() - amount);\n        break;\n      case 'days':\n      case 'd':\n        d.setUTCDate(d.getUTCDate() - amount);\n        break;\n    }\n    \n    if (_indexOfTimeInTimesArray(d, this.times) > -1)\n      this._setSelectedTime(d);\n    return this;\n  }\n  \n  /**\n   * Returns first time in this timeline, which is enabled by at least one set.\n   * \n   * @returns {Date} First enabled time, could be invalid.\n   */\n  getFirstEnabledTime() {\n    return (this.enabledTimes.length > 0) ?\n      this.enabledTimes[0] : new Date('invalid');\n  }\n  \n  /**\n   * Returns last time in this timeline, which is enabled by at least one set.\n   * \n   * @returns {Date} Last enabled time, could be invalid.\n   */\n  getLastEnabledTime() {\n    return (this.enabledTimes.length > 0) ?\n      this.enabledTimes[this.enabledTimes.length-1] : new Date('invalid');\n  }\n  \n  /**\n   * Returns next time after the selected time, which is enabled by at least\n   * one set. If selected time is invalid, the first enabled time is returned.\n   * \n   * @returns {Date} Next enabled time.\n   */\n  getNextEnabledTime() {\n    if (this.enabledTimes.length < 1)\n      return new Date('invalid');\n    var index = _indexOfTimeInTimesArray(this.getSelectedTime(), this.enabledTimes);\n    if (index > -1) {\n      index++;\n      return (index < this.enabledTimes.length) ?\n        this.enabledTimes[index] :\n        this.enabledTimes[this.enabledTimes.length-1];\n    }\n    else if (isNaN(this.getSelectedTime()))\n      return this.enabledTimes[0];\n    else {\n      // Es war kein Zeitpunkt aus enabledTimes\n      var result = new Date('invalid');\n      for (var i=0; i<this.enabledTimes.length; i++)\n        if (this.getSelectedTime().valueOf() < this.enabledTimes[i].valueOf()) {\n          result = this.enabledTimes[i];\n          break;\n        }\n      return result;\n    }\n  }\n  \n  /**\n   * Returns previous time before the selected time, which is enabled by at least\n   * one set. If selected time is invalid, the last enabled time is returned.\n   * \n   * @returns {Date} Previous enabled time.\n   */\n  getPrevEnabledTime() {\n    if (this.enabledTimes.length < 1)\n      return new Date('invalid');\n    var index = _indexOfTimeInTimesArray(this.getSelectedTime(), this.enabledTimes);\n    if (index > -1) {\n      index--;\n      return (-1 < index) ? this.enabledTimes[index] : this.enabledTimes[0];\n    }\n    else if (isNaN(this.getSelectedTime()))\n      return this.enabledTimes[0];\n    else {\n      // Es war kein Zeitpunkt aus enabledTimes\n      var result = new Date('invalid');\n      for (var i=this.enabledTimes.length-1; i>=0; i--)\n        if (this.getSelectedTime().valueOf() > this.enabledTimes[i].valueOf()) {\n          result = this.enabledTimes[i];\n          break;\n        }\n      return result;\n    }\n  }\n  \n  /**\n   * Returns first time in this timeline, which is enabled by at all sets.\n   * \n   * @returns {Date} First time, which is enabled by all sets.\n   */\n  getFirstAllEnabledTime() {\n    return (this.allEnabledTimes.length > 0) ?\n      this.allEnabledTimes[0] : new Date('invalid');\n  }\n  \n  /**\n   * Returns last time in this timeline, which is enabled by at all sets.\n   * \n   * @returns {Date} Last time, which is enabled by all sets.\n   */\n  getLastAllEnabledTime() {\n    return (this.allEnabledTimes.length > 0) ?\n      this.allEnabledTimes[this.allEnabledTimes.length-1] : new Date('invalid');\n  }\n  \n  /**\n   * Returns next time after the selected time, which is enabled by\n   * all sets. If selected time is invalid, the last all enabled time is returned.\n   * \n   * @returns {Date} Next time, which is enabled by all sets.\n   */\n  getNextAllEnabledTime() {\n    if (this.allEnabledTimes.length < 1)\n      return new Date('invalid');\n    var index = _indexOfTimeInTimesArray(this.getSelectedTime(), this.allEnabledTimes);\n    if (index > -1) {\n      index++;\n      return (index < this.allEnabledTimes.length) ?\n        this.allEnabledTimes[index] :\n        this.allEnabledTimes[this.allEnabledTimes.length-1];\n    }\n    else if (isNaN(this.getSelectedTime()))\n      return this.allEnabledTimes[0];\n    else {\n      // Es war kein Zeitpunkt aus allEnabledTimes\n      var result = new Date('invalid');\n      for (var i=0; i<this.allEnabledTimes.length; i++)\n        if (this.getSelectedTime().valueOf() < this.allEnabledTimes[i].valueOf()) {\n          result = this.allEnabledTimes[i];\n          break;\n        }\n      return result;\n    }\n  }\n  \n  /**\n   * Returns previous time before the selected time, which is enabled by\n   * all sets. If selected time is invalid, the first all enabled time is returned.\n   * \n   * @returns {Date} Previous time, which is enabled by all sets.\n   */\n  getPrevAllEnabledTime() {\n    if (this.allEnabledTimes.length < 1)\n      return new Date('invalid');\n    var index = _indexOfTimeInTimesArray(this.getSelectedTime(), this.allEnabledTimes);\n    if (index > -1) {\n      index--;\n      return (-1 < index) ? this.allEnabledTimes[index] : this.allEnabledTimes[0];\n    }\n    else if (isNaN(this.getSelectedTime()))\n      return this.allEnabledTimes[0];\n    else {\n      // Es war kein Zeitpunkt aus allEnabledTimes\n      var result = new Date('invalid');\n      for (var i=this.allEnabledTimes.length-1; i>=0; i--)\n        if (this.getSelectedTime().valueOf() > this.allEnabledTimes[i].valueOf()) {\n          result = this.allEnabledTimes[i];\n          break;\n        }\n      return result;\n    }\n  }\n  \n  /**\n   * Returns if the passed time is an enabled time.\n   * \n   * @returns {boolean}\n   */\n  isTimeEnabled(time) {\n    return this.enabledTimes.reduce(function (acc, t) {\n      return (t.valueOf() == time.valueOf()) ? true : acc;\n    }, false);\n  }\n  \n  /**\n   * Returns if the passed time is an enabled time.\n   * \n   * @returns {boolean}\n   */\n  isTimeAllEnabled(time) {\n    return this.allEnabledTimes.reduce(function (acc, t) {\n      return (t.valueOf() == time.valueOf()) ? true : acc;\n    }, false);\n  }\n  \n  /**\n   * Is the selected time the first enabled time.\n   * \n   * @returns {boolean}\n   */\n  isFirstEnabledTime() {\n    return this.getFirstEnabledTime().valueOf() == this.getSelectedTime().valueOf();\n  }\n  \n  /**\n   * Is the selected time the last enabled time.\n   * \n   * @returns {boolean}\n   */\n  isLastEnabledTime() {\n    return this.getLastEnabledTime().valueOf() == this.getSelectedTime().valueOf();\n  }\n  \n  /**\n   * Internal setter of the selected time. Caller must guarantee, that either\n   * the passed timestamp exists in this.times or is invalid.\n   * @param {Date} selectedTime - Selected time.\n   * @fires module:meteoJS/timeline#change:time\n   * @private\n   */\n  _setSelectedTime(selectedTime) {\n    var oldTime = this.selectedTime;\n    this.selectedTime = selectedTime;\n    this.trigger('change:time', oldTime);\n    return this.selectedTime;\n  }\n  \n  /**\n   * Bringt den Inhalt des Arrays this.times in\n   * bereinstimmung mit dem Inhalt von this.timesByKey\n   * @private\n   * @fires module:meteoJS/timeline#change:times\n   */\n  _updateTimes() {\n    this.times = [];\n    var timesArr = [];\n    var times = {};\n    for (var key in this.timesByKey)\n      this.timesByKey[key].times.forEach(function (t) {\n        if (!(t.valueOf() in times)) {\n          timesArr.push(t);\n          times[t.valueOf()] = t;\n        }\n      });\n    _sortTimesArray(timesArr);\n    timesArr.forEach(function (time) {\n      if (this.times.length < 1) {\n        this.times.push(time);\n        return;\n      }\n      var lastTime = this.times[this.times.length-1];\n      if (this.maxTimeGap !== undefined &&\n          (time.valueOf()-lastTime.valueOf()) > 1000*this.maxTimeGap) {\n        var t = lastTime;\n        do {\n          t = new Date(t.getTime() + this.maxTimeGap*1000);\n          this.times.push(t);\n        } while ((time.valueOf()-t.valueOf()) > 1000*this.maxTimeGap);\n      }\n      this.times.push(time);\n    }, this);\n    _sortTimesArray(this.times);\n    this.trigger('change:times');\n  }\n  \n  /**\n   * Bringt den Inhalt der Arrays this.enabledTimes und this.allEnabledTimes in\n   * bereinstimmung mit dem Inhalt von this.timesByKey\n   * @private\n   * @fires module:meteoJS/timeline#change:enabledTimes\n   */\n  _updateEnabledTimes() {\n    this.enabledTimes = [];\n    this.allEnabledTimes = [];\n    var enabledTimes = {};\n    var allEnabledTimes = {};\n    for (var key in this.timesByKey) {\n      this.timesByKey[key].enabled.forEach(function (t) {\n        if (!(t.valueOf() in enabledTimes)) {\n          this.enabledTimes.push(t);\n          enabledTimes[t.valueOf()] = t;\n        }\n        if (!(t.valueOf() in allEnabledTimes))\n          allEnabledTimes[t.valueOf()] = 1;\n        else\n          allEnabledTimes[t.valueOf()]++;\n      }, this);\n    }\n    _sortTimesArray(this.enabledTimes);\n    for (var value in allEnabledTimes)\n      if (allEnabledTimes[value] == Object.keys(this.timesByKey).length)\n        this.allEnabledTimes.push(enabledTimes[value]);\n    _sortTimesArray(this.allEnabledTimes);\n    this.trigger('change:enabledTimes');\n  }\n  \n  /**\n   * Intialize property \"_keyboardNavigation\".\n   * \n   * @param {module:meteoJS/timeline~optionKeyboardNavigation}\n   *   [keyboardNavigation] - Keyboard navigation options.\n   * @private\n   */\n  _initKeyboardNavigation({ enabled = false,\n    first = 36,\n    last = 35,\n    prev = 37,\n    next = 39,\n    prevAllEnabledTime = [37, 'ctrl'],\n    nextAllEnabledTime = [38, 'ctrl']} = {}) {\n    this._keyboardNavigation = {\n      enabled,\n      first,\n      last,\n      prev,\n      next,\n      prevAllEnabledTime,\n      nextAllEnabledTime\n    };\n    if (document && this._keyboardNavigation.enabled)\n      document.addEventListener('keydown', event => {\n        Object.keys(this._keyboardNavigation).forEach(method => {\n          if (method == 'enabled')\n            return;\n          if (method in this &&\n              _isEventMatchPressedKeys(event, this._keyboardNavigation[method]))\n            this[method]();\n        });\n      });\n  }\n}\naddEventFunctions(Timeline.prototype);\nexport default Timeline;\n\n/**\n * Gibt den Index eines Zeitpunktes in einem Array aus Zeitpunkten zurck.\n * @param {Date} time Zeitpunkt\n * @param {Date[]} times Array aus Zeitpunkten\n * @returns {number} -1 fr \"nicht gefunden\n * @static\n * @private\n */\nexport let _indexOfTimeInTimesArray = (time, times) => {\n  return times.findIndex(function (t) {\n    return t.valueOf() == time.valueOf();\n  });\n};\n\n/**\n * Sortiert einen Array aus Zeitpunkten zeitlich aufwrts\n * @param {Date[]} times Array aus Zeitpunkten\n * @static\n * @private\n */\nfunction _sortTimesArray(times) {\n  times.sort(function (a,b) { return a.valueOf()-b.valueOf(); });\n}\n\n/**\n * Returns if an event represents a certain key pressed with (optional)\n * additional special keys.\n * \n * @param {KeyboardEvent} keyboardEvent - Keyboard event.\n * @param {module:meteoJS/timeline~optionPressedKeys} pressedKeys\n *   Checks if this keys are pressed.\n * @private\n */\nexport function _isEventMatchPressedKeys(keyboardEvent, pressedKeys) {\n  if (typeof pressedKeys != 'object' ||\n      !('forEach' in pressedKeys))\n    pressedKeys = [pressedKeys];\n  if (pressedKeys.length == 0)\n    return false;\n  let result =\n    [['ctrl', 'ctrlKey'],\n      ['alt', 'altKey'],\n      ['shift', 'shiftKey'],\n      ['meta', 'metaKey']]\n      .reduce((acc, cur) => acc && (((pressedKeys.indexOf(cur[0]) > -1))\n        ? keyboardEvent[cur[1]]\n        : !keyboardEvent[cur[1]]),\n      true);\n  pressedKeys.forEach(o => {\n    switch (o) {\n    case 'ctrl':\n    case 'alt':\n    case 'shift':\n    case 'meta':  break;\n    default:      if (o != keyboardEvent.keyCode) result = false;\n    }\n  });\n  return result;\n}","/**\n * @module meteoJS/timeline/animation\n */\nimport $ from 'jquery';\nimport addEventFunctions from '../Events.js';\nimport Timeline from '../Timeline.js';\n\n/**\n * Options for animation constructor.\n * \n * @typedef {Object} module:meteoJS/timeline/animation~options\n * @param {module:meteoJS/timeline.Timeline} timeline - Timeline to animate.\n * @param {number} [restartPause]\n *   Time in seconds to pause before the animation restart.\n * @param {number} [imagePeriod]\n *   Time in seconds between animation of two images.\n *   Ignored, if imageFrequency is specified.\n * @param {number|undefined} [imageFrequency]\n *   Time of images during one second.\n * @param {boolean} [enabledStepsOnly] - Use only enabled times.\n * @param {boolean} [allEnabledStepsOnly]\n *   Use only times that are enabled by all sets of time.\n */\n\n/**\n * Event on animation start.\n * \n * @event module:meteoJS/timeline/animation#start:animation\n */\n\n/**\n * Event on animation stop.\n * \n * @event module:meteoJS/timeline/animation#stop:animation\n */\n\n/**\n * Event on reaching last timestamp.\n * \n * @event module:meteoJS/timeline/animation#end:animation\n */\n\n/**\n * Event triggered immediatly before restart of animation.\n * \n * @event module:meteoJS/timeline/animation#restart:animation\n */\n\n/**\n * Event triggered when imageFrequency/imagePeriod is changed.\n * \n * @event module:meteoJS/timeline/animation#change:imageFrequency\n */\n\n/**\n * Event triggered when restartPause is changed.\n * \n * @event module:meteoJS/timeline/animation#change:restartPause\n */\n\n/**\n * Object to animate {@link module:meteoJS/timeline.Timeline}.\n */\nexport class Animation {\n  \n  /**\n   * @param {module:meteoJS/timeline/animation~options} options - Options.\n   */\n  constructor({ timeline,\n    restartPause = 1.8,\n    imagePeriod = 0.2,\n    imageFrequency,\n    enabledStepsOnly = true,\n    allEnabledStepsOnly = false } = {}) {\n    /**\n     * @type module:meteoJS/timeline/animation~options\n     * @private\n     */\n    this.options = {\n      timeline,\n      restartPause,\n      imagePeriod,\n      imageFrequency,\n      enabledStepsOnly,\n      allEnabledStepsOnly\n    };\n    // Normalize options\n    if (this.options.timeline === undefined)\n      this.options.timeline = new Timeline();\n    if (this.options.imageFrequency !== undefined &&\n        this.options.imageFrequency != 0)\n      this.options.imagePeriod = 1/this.options.imageFrequency;\n    /**\n     * ID to window.setInterval() of the animation.\n     * If undefined, there is no started animation.\n     * @type undefined|number\n     * @private\n     */\n    this.animationIntervalID = undefined;\n    \n    /**\n     * ID to window.setTimeout() ot the animation (used for restart-pause).\n     * If undefined, there is no started setTimeout (i.e. no restart-pause).\n     * @type undefined|number\n     * @private\n     */\n    this.animationTimeoutID = undefined;\n    \n    /**\n     * Current position in this.times in the animation.\n     * @type integer\n     * @private\n     */\n    this.animationStep = 0;\n    \n    /**\n     * Hash with timestamps-valueOf's as keys and index in this.times as values.\n     * @type Object\n     * @private\n     */\n    this.timesHash = {};\n    \n    /**\n     * List of timestamps. Current list of times of the timeline to animate over.\n     * @type Date[]\n     * @private\n     */\n    this.times = [];\n    \n    // Timeline initialisieren\n    let onChangeTimes = () => {\n      this.times = this.options.timeline[this._getTimelineTimesMethod()]();\n      this.timesHash = {};\n      this.times.forEach((time, i) => this.timesHash[time.valueOf()] = i);\n    };\n    this.options.timeline.on(this._getTimelineChangeTimesEvent(), onChangeTimes);\n    onChangeTimes();\n  }\n  \n  /**\n   * Returns time period between two animation steps (in s).\n   * \n   * @returns {number} Time period.\n   */\n  getImagePeriod() {\n    return this.options.imagePeriod;\n  }\n  \n  /**\n   * Sets time period between to animation steps (in s)\n   * \n   * @param {number} imagePeriod - Time period.\n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   */\n  setImagePeriod(imagePeriod) {\n    this.options.imagePeriod = imagePeriod;\n    if (this.isStarted())\n      this._updateAnimation();\n    this.trigger('change:imageFrequency');\n    return this;\n  }\n  \n  /**\n   * Returns time frequency of animation steps (in 1/s).\n   * \n   * @returns {number} Time frequency.\n   */\n  getImageFrequency() {\n    return 1/this.options.imagePeriod;\n  }\n  \n  /**\n   * Sets time frequency of animation steps (in 1/s).\n   * \n   * @param {number} imageFrequency - Time frequency.\n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   */\n  setImageFrequency(imageFrequency) {\n    if (imageFrequency != 0)\n      this.setImagePeriod(1/imageFrequency);\n    return this;\n  }\n  \n  /**\n   * Returns time duration before a restart (jump from end to beginning, in s).\n   * \n   * @returns {number} Time duration.\n   */\n  getRestartPause() {\n    return this.options.restartPause;\n  }\n  \n  /**\n   * Sets time duration before a restart (in s).\n   * \n   * @param {number} restartPause - Time duration.\n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   */\n  setRestartPause(restartPause) {\n    this.options.restartPause = Number(restartPause); // Convert string to number\n    this.trigger('change:restartPause');\n    return this;\n  }\n  \n  /**\n   * Is animation started.\n   * \n   * @returns {boolean}\n   */\n  isStarted() {\n    return this.animationIntervalID !== undefined ||\n           this.animationTimeoutID !== undefined;\n  }\n  \n  /**\n   * Starts the animation.\n   * \n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   * @fires module:meteoJS/timeline/animation#start:animation\n   */\n  start() {\n    if (this.options.timeline.getSelectedTime().valueOf() in this.timesHash)\n      this._setStep(this.timesHash[this.options.timeline.getSelectedTime().valueOf()]);\n    if (!this.isStarted())\n      this._updateAnimation();\n    this.trigger('start:animation');\n  }\n  \n  /**\n   * Stops the animation.\n   * \n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   * @fires module:meteoJS/timeline/animation#stop:animation\n   */\n  stop() {\n    this._clearAnimation();\n    this.trigger('stop:animation');\n  }\n  \n  /**\n   * Toggles the animation.\n   * \n   * @returns {module:meteoJS/timeline/animation.Animation} This.\n   */\n  toggle() {\n    if (this.isStarted())\n      this.stop();\n    else\n      this.start();\n  }\n  \n  /**\n   * Setzt Schritt der Animation\n   * @private\n   * @param {number} step\n   */\n  _setStep(step) {\n    if (0 <= step && step < this._getCount())\n      this.animationStep = step;\n  }\n  \n  /**\n   * Gibt timeline-Event Name zum abhren von nderungen der Zeitschritte zurck.\n   * @private\n   * @returns {string}\n   */\n  _getTimelineChangeTimesEvent() {\n    return (this.options.enabledStepsOnly || this.options.allEnabledStepsOnly)\n      ? 'change:enabledTimes' : 'change:times';\n  }\n  \n  /**\n   * Gibt timeline-Methode aller Zeitschritte zurck.\n   * @private\n   * @returns {string}\n   */\n  _getTimelineTimesMethod() {\n    return this.options.allEnabledStepsOnly ? 'getAllEnabledTimes' :\n      this.options.enabledStepsOnly ? 'getEnabledTimes' : 'getTimes';\n  }\n  \n  /**\n   * Gibt Anzahl Animationsschritte zurck\n   * @private\n   * @returns {number}\n   */\n  _getCount() {\n    return this.options.timeline[this._getTimelineTimesMethod()]().length;\n  }\n  \n  /**\n   * Handelt die Animation\n   * @private\n   * @fires module:meteoJS/timeline/animation#end:animation\n   * @fires module:meteoJS/timeline/animation#restart:animation\n   */\n  _updateAnimation() {\n    this._clearAnimation();\n    if (this.animationStep < this._getCount()-1)\n      this._initAnimation();\n    else\n      this._initRestartPause();\n  }\n  \n  /**\n   * Startet Animation\n   * @private\n   */\n  _initAnimation() {\n    if (this.animationIntervalID === undefined)\n      this.animationIntervalID = window.setInterval(() => {\n        this.animationStep++;\n        if (this.animationStep < this.times.length)\n          this.options.timeline.setSelectedTime(this.times[this.animationStep]);\n        if (this.animationStep >= this._getCount()-1) {\n          this.trigger('end:animation');\n          this._clearAnimation();\n          this._initRestartPause();\n        }\n      }, this.options.imagePeriod * 1000);\n  }\n  \n  /**\n   * Startet den Timer fr die Restart-Pause\n   * Verwende als Zeitspanne imagePeriod+restartPause. Sonst wird bei restartPause\n   * 0s der letzte Zeitschritt gar nie angezeigt.\n   * @private\n   */\n  _initRestartPause() {\n    if (this.animationTimeoutID === undefined)\n      this.animationTimeoutID = window.setTimeout(() => {\n        this.animationStep = 0;\n        this.trigger('restart:animation');\n        if (this.animationStep < this.times.length)\n          this.options.timeline.setSelectedTime(this.times[this.animationStep]);\n        this._clearAnimation();\n        this._initAnimation();\n      }, (this.options.imagePeriod + this.options.restartPause) * 1000);\n  }\n  \n  /**\n   * Lscht window.interval, falls vorhanden\n   * @private\n   */\n  _clearAnimation() {\n    if (this.animationIntervalID !== undefined) {\n      window.clearInterval(this.animationIntervalID);\n      this.animationIntervalID = undefined;\n    }\n    if (this.animationTimeoutID !== undefined) {\n      window.clearTimeout(this.animationTimeoutID);\n      this.animationTimeoutID = undefined;\n    }\n  }\n  \n}\naddEventFunctions(Animation.prototype);\nexport default Animation;\n\n/**\n * Insert an input-group to change frequency.\n * \n * @param {external:jQuery} node - Node to insert input-group.\n * @param {Object} options - Options for input-group.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {string} options.suffix - Suffix text for input-group.\n * @returns {external:jQuery} Input-group node.\n */\nexport function insertFrequencyInput(node, { animation, suffix = 'fps' }) {\n  let number = $('<input>')\n    .addClass('form-control')\n    .attr('type', 'number')\n    .attr('min', 1)\n    .attr('step', 1);\n  let inputGroupNumber = $('<div>')\n    .addClass('input-group')\n    .append(number)\n    .append($('<div>')\n      .addClass('input-group-append')\n      .append($('<span>').addClass('input-group-text').text(suffix)));\n  number.on('change', () => animation.setImageFrequency(number.val()));\n  let onChangeImageFrequency = () => number.val(animation.getImageFrequency());\n  animation.on('change:imageFrequency', onChangeImageFrequency);\n  onChangeImageFrequency();\n  node.append(inputGroupNumber);\n  return inputGroupNumber;\n}\n\n/**\n * Insert an input-range to change frequency.\n * \n * @param {external:jQuery} node - Node to insert input-range.\n * @param {Object} options - Options for input-range.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {number[]} options.frequencies - Frequencies to select.\n * @returns {external:jQuery} Input-range node.\n */\nexport function insertFrequencyRange(node, { animation, frequencies }) {\n  frequencies = frequencies ? frequencies : [1];\n  let range = $('<input>')\n    .addClass('custom-range')\n    .attr('type', 'range')\n    .attr('min', 0)\n    .attr('max', frequencies.length-1);\n  range.on('change input', () => {\n    let i = range.val();\n    if (i < frequencies.length)\n      animation.setImageFrequency(frequencies[i]);\n  });\n  let onChangeImageFrequency = () => {\n    let i = frequencies.indexOf(animation.getImageFrequency());\n    if (i > -1)\n      range.val(i);\n  };\n  animation.on('change:imageFrequency', onChangeImageFrequency);\n  onChangeImageFrequency();\n  node.append(range);\n  return range;\n}\n\n/**\n * Insert an button-group to change frequency.\n * \n * @param {external:jQuery} node - Node to insert the button-group.\n * @param {Object} options - Options for the button-group.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {number[]} options.frequencies - Frequencies to select.\n * @param {string|undefined} btnGroupClass - Class added to the button-group node.\n * @param {string|undefined} btnClass - Class added to each button.\n * @param {string} options.suffix - Suffix text for each button after frequency.\n * @returns {external:jQuery} Button-group node.\n */\nexport function insertFrequencyButtonGroup(node, { animation,\n  frequencies,\n  btnGroupClass = 'btn-group',\n  btnClass = 'btn btn-primary',\n  suffix = 'fps' }) {\n  let btnGroup = $('<div>').addClass(btnGroupClass);\n  frequencies = frequencies ? frequencies : [];\n  frequencies.forEach(freq => {\n    btnGroup.append($('<button>')\n      .addClass(btnClass)\n      .data('frequency', freq)\n      .text(freq + ' ' + suffix)\n      .click(() => animation.setImageFrequency(freq)));\n  });\n  let onChange = () => {\n    btnGroup.children('button').removeClass('active').each(function () {\n      if ($(this).data('frequency') == animation.getImageFrequency())\n        $(this).addClass('active');\n    });\n  };\n  animation.on('change:imageFrequency', onChange);\n  onChange();\n  node.append(btnGroup);\n  return btnGroup;\n}\n\n/**\n * Insert an input-group to change restart pause.\n * \n * @param {external:jQuery} node - Node to insert input-group.\n * @param {Object} options - Options for input-group.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {string} options.suffix - Suffix text for input-group.\n * @returns {external:jQuery} Input-group node.\n */\nexport function insertRestartPauseInput(node, { animation, suffix = 's' }) {\n  let input = $('<input>')\n    .addClass('form-control')\n    .attr('type', 'number')\n    .attr('min', 0)\n    .attr('step', 0.1);\n  let inputGroupNumber = $('<div>')\n    .addClass('input-group')\n    .append(input)\n    .append($('<div>')\n      .addClass('input-group-append')\n      .append($('<span>').addClass('input-group-text').text(suffix)));\n  input.on('change', () => animation.setRestartPause(input.val()));\n  let onChange = () => input.val(animation.getRestartPause());\n  animation.on('change:restartPause', onChange);\n  onChange();\n  node.append(inputGroupNumber);\n  return inputGroupNumber;\n}\n\n/**\n * Insert an input-range to change restart pause.\n * \n * @param {external:jQuery} node - Node to insert input-range.\n * @param {Object} options - Options for input-range.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {number[]} options.pauses - Restart pauses to select.\n * @returns {external:jQuery} Input-range node.\n */\nexport function insertRestartPauseRange(node, { animation, pauses }) {\n  pauses = pauses ? pauses : [1];\n  pauses = pauses.map(p => Math.round(p * 1000));\n  let range = $('<input>')\n    .addClass('custom-range')\n    .attr('type', 'range')\n    .attr('min', 0)\n    .attr('max', pauses.length-1);\n  range.on('change input', () => {\n    let i = range.val();\n    if (i < pauses.length)\n      animation.setRestartPause(pauses[i] / 1000);\n  });\n  let onChangeImageFrequency = () => {\n    let i =\n      pauses.indexOf(Math.round(animation.getRestartPause() * 1000));\n    if (i > -1)\n      range.val(i);\n  };\n  animation.on('change:imageFrequency', onChangeImageFrequency);\n  onChangeImageFrequency();\n  node.append(range);\n  return range;\n}\n\n/**\n * Insert an button-group to change restart pause.\n * \n * @param {external:jQuery} node - Node to insert the button-group.\n * @param {Object} options - Options for the button-group.\n * @param {module:meteoJS/timeline/animation.Animation} options.animation\n *   Animation object.\n * @param {number[]} options.pauses - Restart pauses to select.\n * @param {string|undefined} btnGroupClass - Class added to the button-group node.\n * @param {string|undefined} btnClass - Class added to each button.\n * @param {string} options.suffix - Suffix in each button after duration text.\n * @returns {external:jQuery} Button-group node.\n */\nexport function insertRestartPauseButtonGroup(node, { animation,\n  pauses,\n  btnGroupClass = 'btn-group',\n  btnClass = 'btn btn-primary',\n  suffix = 's' }) {\n  let btnGroup = $('<div>').addClass(btnGroupClass);\n  pauses = pauses ? pauses : [];\n  pauses.forEach(pause => {\n    btnGroup.append($('<button>')\n      .addClass(btnClass)\n      .data('pause', pause)\n      .text(pause + ' ' + suffix)\n      .click(() => animation.setRestartPause(pause)));\n  });\n  let onChange = () => {\n    btnGroup.children('button').removeClass('active').each(function () {\n      if ($(this).data('pause') == animation.getRestartPause())\n        $(this).addClass('active');\n    });\n  };\n  animation.on('change:restartPause', onChange);\n  onChange();\n  node.append(btnGroup);\n  return btnGroup;\n}","/**\n * @module meteoJS/timeline/animation/togglebutton\n */\nimport $ from 'jquery';\nimport { insertFrequencyInput,\n  insertFrequencyRange,\n  insertRestartPauseInput } from '../Animation.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} meteoJS/timeline/animation/togglebutton~options\n * @param {meteoJS.timeline.animation} animation Animation object.\n * @param {HTMLElement} node\n *   Node to append the button and the dropdown menu (if menu set to true).\n *   If this is a 'button' element, this will be the animation button and\n *   no menu is added.\n * @param {string|HTMLElement|undefined} startedContent\n *   Content or text of button node if animation is running.\n * @param {string|undefined} startedClass\n *   Classed added to button node if animation is running.\n * @param {string|HTMLElement|undefined} stoppedContent\n *   Content of button node if animation is stopped.\n * @param {string|undefined} stoppedClass\n *   Classed added to button node if animation is running.\n * @param {string|undefined} classButton\n *   Classed added to button node.\n * @param {boolean} menu\n *   Add dropdown menu for animation setup to the button. Ignored, if node is a\n *   button element.\n * @param {boolean} menuImageFrequency\n *   Show frequency configuration in the dropdown menu.\n * @param {string} imageFrequencyCaption\n *   Label text for the frequency configuration in the dropdown menu.\n * @param {undefined|integer[]} menuFrequencies\n *   Array of frequencies for the range slider. If undefined the slider will be\n *   hidden.\n * @param {boolean} menuRestartPause\n *   Show restart pause configuration in the dropdown menu.\n * @param {string} restartPauseCaption\n *   Label text for the restart pause configuration in the dropdown menu.\n */\n\n/**\n * @classdesc\n * Object to style a button accordingly to the status of an animation object.\n */\nexport class ToggleButton {\n  \n  /**\n   * @param {meteoJS/timeline/animation/togglebutton~options} options Options.\n   */\n  constructor(options = {}) {\n    let { animation = undefined,\n      node = undefined,\n      startedContent = undefined,\n      startedClass = undefined,\n      stoppedContent = undefined,\n      stoppedClass = undefined,\n      classButton = undefined,\n      classDropdownToggle = undefined,\n      menu = true,\n      menuImageFrequency = true,\n      imageFrequencyCaption = 'Frequency',\n      menuFrequencies = undefined,\n      menuRestartPause = true,\n      restartPauseCaption = 'Restart pause' } = options;\n    if (!('startedContent' in options))\n      startedContent = '';\n    if (!('stoppedContent' in options))\n      stoppedContent = '';\n    /**\n     * @type meteoJS/timeline/animation/togglebutton~options\n     * @private\n     */\n    this.options = {\n      animation,\n      node,\n      startedContent,\n      startedClass,\n      stoppedContent,\n      stoppedClass,\n      classButton,\n      classDropdownToggle,\n      menu,\n      menuImageFrequency,\n      imageFrequencyCaption,\n      menuFrequencies,\n      menuRestartPause,\n      restartPauseCaption\n    };\n    \n    this.options.node = $(this.options.node);\n    let animationButton = this.options.node;\n    if (!this.options.node.is('button')) {\n      animationButton = $('<button>').addClass('btn');\n      this.options.node.append(animationButton);\n    }\n    animationButton.addClass(this.options.classButton);\n    \n    let onStart = () => {\n      animationButton.removeClass(this.options.stoppedClass);\n      animationButton.addClass(this.options.startedClass);\n      animationButton.empty();\n      if (typeof this.options.startedContent === 'string' ||\n          this.options.startedContent instanceof String)\n        animationButton.text(this.options.startedContent);\n      else\n        animationButton.append(this.options.startedContent);\n    };\n    let onStop = () => {\n      animationButton.removeClass(this.options.startedClass);\n      animationButton.addClass(this.options.stoppedClass);\n      animationButton.empty();\n      if (typeof this.options.stoppedContent === 'string' ||\n          this.options.stoppedContent instanceof String)\n        animationButton.text(this.options.stoppedContent);\n      else\n        animationButton.append(this.options.stoppedContent);\n    };\n    this.options.animation.on('start:animation', onStart);\n    this.options.animation.on('stop:animation', onStop);\n    animationButton.click(() => this.options.animation.toggle());\n    this.options.animation.isStarted() ? onStart() : onStop();\n    \n    if (!this.options.node.is('button') &&\n        this.options.menu) {\n      // Add dropdown menu\n      this.options.node.addClass('btn-group');\n      let btnDropdown = $('<button>')\n        .attr('type', 'button')\n        .addClass('btn dropdown-toggle dropdown-toggle-split')\n        .addClass(this.options.classDropdownToggle)\n        .attr('data-toggle', 'dropdown')\n        .attr('aria-haspopup', true)\n        .attr('aria-expanded', false);\n      btnDropdown.append($('<span>').addClass('sr-only').text('Toggle Dropdown'));\n      this.options.node.append(btnDropdown);\n      let menuDropdown = $('<div>').addClass('dropdown-menu pl-4 pr-4 pt-2 pb-2 text-muted');\n      this.options.node.append(menuDropdown);\n      \n      if (this.options.menuImageFrequency) {\n        let label = $('<label>').text(this.options.imageFrequencyCaption);\n        let div = $('<div>').addClass('form-group').append(label);\n        menuDropdown.append(div);\n        insertFrequencyInput(label, {\n          animation: this.options.animation\n        });\n        if (this.options.menuFrequencies !== undefined)\n          insertFrequencyRange(div, {\n            animation: this.options.animation,\n            frequencies: this.options.menuFrequencies\n          });\n      }\n      \n      if (this.options.menuRestartPause) {\n        let label = $('<label>').text(this.options.restartPauseCaption);\n        let div = $('<div>').addClass('form-group').append(label);\n        insertRestartPauseInput(label, {\n          animation: this.options.animation\n        });\n        menuDropdown.append(div);\n      }\n    }\n  }\n  \n}\nexport default ToggleButton;","/**\n * @module meteoJS/timeline/visualisation\n */\nimport addEventFunctions from '../Events.js';\nimport Timeline from '../Timeline.js';\n\n/**\n * Returns a textual representation of a time according to a passed format.\n * \n * This function could be used to convert Date-objects to a readable time with\n * external libraries. One such implementation is given by\n * {@link module:meteoJS/timeline/visualisation.makeTimeTextCallbackFunction}.\n * \n * @typedef {Function}\n *   module:meteoJS/timeline/visualisation~timeTextCallbackFunction\n * @param {Date} time - A valid datetime.\n * @param {string} format - Format string.\n * @returns {string} Textual representation.\n */\n\n/**\n * Options for Visualisation.\n * \n * @typedef {Object} module:meteoJS/timeline/visualisation~options\n * @param {module:meteoJS/timeline.Timeline} [timeline]\n *   Timeline object.\n * @param {external:jQuery} [node] - Node.\n * @param {module:meteoJS/timeline/animation.Animation} [animation]\n *   Animation object. If specified, the animation will be stopped on user\n *   interaction with the visualisation object.\n * @param {boolean} [enabledStepsOnly=true] - Use only enabled times.\n * @param {boolean} [allEnabledStepsOnly=false]\n *   Use only times that are enabled by all sets of time.\n * @param {string} [textInvalid='-']\n *   Output string, if time of timeline is invalid.\n * @param {module:meteoJS/timeline/visualisation~timeTextCallbackFunction}\n *   [getTimeText]\n *   Returns a textual representation of a time according to a passed format.\n * @param {string} [outputTimezone]\n *   'local' for browser local timezone.\n */\n\n/**\n * Object to visualise {@link module:meteoJS/timeline.Timeline}.\n * \n * How to create your own visualisation object:\n * * Inherit this object\n * * Inherit method onChangeTime()\n * * Inherit method onChangeTimes()\n * * Inherit method emptyNode()\n * * Inherit method onInitNode()\n * * To get all times to display use getTimelineTimes()\n * * Use method timeToText() to convert a Date to String.\n * * Use method attachEventListener() to attach event listeners on a object.\n *   The event listener will be deleted automatically if the output is muted.\n * * At the end of the constructor call \"this.setNode(this.options.node);\".\n * \n * @abstract\n * @listens module:meteoJS/timeline#change:time\n * @listens module:meteoJS/timeline#change:times\n * @listens module:meteoJS/timeline#change:enabledTimes\n */\nexport class Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation~options} options - Options.\n   */\n  constructor({\n    timeline = undefined,\n    node = undefined,\n    animation = undefined,\n    enabledStepsOnly = true,\n    allEnabledStepsOnly = false,\n    textInvalid = '-',\n    getTimeText = undefined,\n    outputTimezone = undefined\n  } = {}) {\n    /**\n     * @type Object\n     * @private\n     */\n    this.options = {\n      timeline,\n      node,\n      animation,\n      enabledStepsOnly,\n      allEnabledStepsOnly,\n      textInvalid,\n      getTimeText,\n      outputTimezone\n    };\n    \n    // Normalize options\n    if (this.options.timeline === undefined)\n      this.options.timeline = new Timeline();\n    \n    /**\n     * @member {Array[]}\n     * @private\n     */\n    this.listeners = [];\n    \n    /**\n     * @member {undefined|mixed}\n     * @private\n     */\n    this.inputListener = undefined;\n  }\n  \n  /**\n   * Sets jQuery-Node for output.\n   * \n   * @public\n   * @param {external:jQuery|undefined} node Node, undefined to mute the output.\n   * @returns {module:meteoJS/timeline/visualisation.Visualisation} This.\n   */\n  setNode(node) {\n    if (this.options.node !== undefined)\n      this.emptyNode();\n  \n    if (node === undefined) {\n      this.detachEventListeners();\n      this.options.node = node;\n    }\n    else {\n      this.options.node = node;\n      var isListenersDefined = this.listeners.length > 0;\n      if (!isListenersDefined) {\n        this.attachEventListener(this.options.timeline, 'change:time', function () {\n          this.onChangeTime();\n        }, this);\n        this.attachEventListener(this.options.timeline, 'change:times', function () {\n          this.onChangeTimes();\n        }, this);\n        this.attachEventListener(this.options.timeline, 'change:enabledTimes', function () {\n          this.onChangeTimes();\n        }, this);\n      }\n      this.onInitNode(isListenersDefined);\n      this.onChangeTimes();\n      this.onChangeTime();\n    }\n  \n    if (this.inputListener === undefined)\n      this.inputListener = this.on('input', function () {\n        if (this.options.animation !== undefined)\n          this.options.animation.stop();\n      }, this);\n  \n    return this;\n  }\n  \n  /**\n   * Gets current value of output timezone.\n   * \n   * @public\n   * @returns {string|undefined} Output timezone.\n   */\n  getOutputTimezone() {\n    return this.options.outputTimezone;\n  }\n  \n  /**\n   * Sets output timezone, undefined for UTC.\n   * \n   * @public\n   * @param {string|undefined} outputTimezone Timezone for datetime output.\n   * @returns {module:meteoJS/timeline/visualisation.Visualisation} This.\n   */\n  setOutputTimezone(outputTimezone) {\n    var updateOutput = (this.options.outputTimezone != outputTimezone);\n    this.options.outputTimezone = outputTimezone;\n    if (updateOutput &&\n        this.options.node !== undefined) {\n      this.onChangeTimes();\n      this.onChangeTime();\n    }\n    return this;\n  }\n  \n  /**\n   * Called if the timeline triggers the\n   * {@link module:meteoJS/timeline#change:time} event.\n   * Prerequisite: this.options.node must be defined.\n   * \n   * @abstract\n   * @protected\n   */\n  onChangeTime() {}\n  \n  /**\n   * Called if the timeline triggers the {@link module:meteoJS/timeline#change:times}\n   * or {@link module:meteoJS/timeline#change:enabledTimes} event.\n   * Prerequisite: this.options.node must be defined.\n   * \n   * @abstract\n   * @protected\n   */\n  onChangeTimes() {}\n  \n  /**\n   * Called to empty the output node. Mainly if the output is muted.\n   * Prerequisite: this.options.node must be defined.\n   * \n   * @abstract\n   * @protected\n   */\n  emptyNode() {}\n  \n  /**\n   * Called once an output node is set.\n   * Prerequisite: this.options.node must be defined.\n   * \n   * @abstract\n   * @protected\n   * @param {boolean} isListenersDefined\n   *   True if the event listeners are already set.\n   */\n  onInitNode() {}\n  \n  /**\n   * Returns the times to display. This could be either all times in the timeline\n   * or only the enabled times or the all enabled times. The user of the\n   * visualisation object select this by the options.\n   * \n   * @protected\n   * @returns {Date[]} Times.\n   */\n  getTimelineTimes() {\n    var methodName = this.options.allEnabledStepsOnly ?\n      'getAllEnabledTimes' :\n      this.options.enabledStepsOnly ? 'getEnabledTimes' : 'getTimes';\n    return this.options.timeline[methodName]();\n  }\n  \n  /**\n   * Converts a Date-object to a string.\n   * \n   * @protected\n   * @param {Date} time - Time.\n   * @param {string} format - Format string, passed to the .\n   * @returns {string} String.\n   */\n  timeToText(time, format) {\n    if (isNaN(time))\n      return this.options.textInvalid;\n    if (this.options.getTimeText !== undefined)\n      return this.options.getTimeText.call(this, time, format);\n    return time.toISOString();\n  }\n  \n  /**\n   * Attach an event listener on an object. Object could be a jQuery-object or\n   * an object using {@link module:meteoJS/events}.\n   * \n   * @protected\n   * @param {object} obj - Object to put the event listener on.\n   * @param {mixed} listener - Event listener key.\n   * @param {function} func - Function to be executed when event is triggered.\n   * @param {object} [thisArg] - This in the function func when event triggered.\n   */\n  attachEventListener(obj, listener, func, thisArg) {\n    this.listeners.push([obj, listener]);\n    obj.on(listener, func, thisArg);\n  }\n  \n  /**\n   * Detaches all event listeners.\n   * \n   * @private\n   */\n  detachEventListeners() {\n    this.listeners.forEach(function (listenerArr) {\n      if ('un' in listenerArr[0])\n        listenerArr[0].un(listenerArr[1]);\n      else if ('off' in listenerArr[0])\n        listenerArr[0].off(listenerArr[1]);\n    });\n    this.listeners = [];\n  }\n  \n}\naddEventFunctions(Visualisation.prototype);\nexport default Visualisation;\n\n/**\n * Format a Date-object via the {@link https://momentjs.com|Moment.js} library.\n * \n * @param {Object}moment - Moment.js object.\n * @returns {module:meteoJS/timeline/visualisation~timeTextCallbackFunction}\n *   Callback.\n */\nexport function makeTimeTextCallbackFunction(moment) {\n  return function (time, format) {\n    const m = moment.utc(time);\n    if (this.options.outputTimezone !== undefined)\n      (this.options.outputTimezone == 'local')\n        ? m.local()\n        : m.tz(this.options.outputTimezone);\n    return m.format(format);\n  };\n}","/**\n * @module meteoJS/timeline/visualisation/text\n */\nimport Visualisation from '../Visualisation.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/timeline/visualisation/slider~options}\n *  module:meteoJS/timeline/visualisation/text~options\n * @param {string|undefined} format\n *   Format string, used for 'getTimeText'.\n */\n\n/**\n * Show current selected time of a timeline as text.\n * \n * @extends module:meteoJS/timeline/visualisation.Visualisation\n */\nexport class Text extends Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation/text~options} options - Options.\n   */\n  constructor({\n    format = undefined,\n    ...rest\n  } = {}) {\n    super(rest);\n    \n    this.options.format = format;\n    this.setNode(this.options.node);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTime() {\n    this.options.node.text(\n      this.timeToText(this.options.timeline.getSelectedTime(),\n        this.options.format));\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  emptyNode() {\n    this.options.node.text('');\n  }\n  \n}\nexport default Text;","/**\n * @module meteoJS/timeline/visualisation/slider\n */\nimport $ from 'jquery';\nimport Visualisation from '../Visualisation.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/timeline/visualisation~options}\n     module:meteoJS/timeline/visualisation/slider~options\n */\n\n/**\n * Show timeline as a slider.\n * \n * @extends module:meteoJS/timeline/visualisation.Visualisation\n */\nexport class Slider extends Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation/slider~options} options\n   *   Options.\n   */\n  constructor(options) {\n    super(options);\n    \n    /**\n     * @member {Date[]}\n     * @private\n     */\n    this.times = [];\n    /**\n     * @member {Object}\n     * @private\n     */\n    this.timesIndexes = {};\n    \n    this.setNode(this.options.node);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTime() {\n    var t = this.options.timeline.getSelectedTime();\n    if (t.valueOf() in this.timesIndexes)\n      this.options.node.val(this.timesIndexes[t.valueOf()]+1);\n    else\n      this.options.node.val(1);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTimes() {\n    this.times = this.getTimelineTimes();\n    this.timesIndexes = {};\n    this.times.forEach(function (time, i) {\n      this.timesIndexes[time.valueOf()] = i;\n    }, this);\n    this.options.node.prop('max', this.times.length);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onInitNode(isListenersDefined) {\n    this.options.node.prop('min', 1);\n    this.options.node.prop('step', 1);\n    if (!isListenersDefined) {\n      var that = this;\n      this.attachEventListener(this.options.node, 'change input', function () {\n        var i = +$(this).val();\n        if (0 < i &&\n            i <= that.times.length)\n          that.options.timeline.setSelectedTime(that.times[i-1]);\n        that.trigger('input');\n      });\n    }\n  }\n  \n}\nexport default Slider;","/**\n * @module meteoJS/timeline/visualisation/bsButtons\n */\nimport $ from 'jquery';\nimport Visualisation from '../Visualisation.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/timeline/visualisation~options}\n     module:meteoJS/timeline/visualisation/bsButtons~options\n */\n\n/**\n * Show timeline as a group of buttons.\n * \n * @extends module:meteoJS/timeline/visualisation.Visualisation\n */\nexport class bsButtons extends Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation/bsButtons~options} options - Options.\n   */\n  constructor({\n    format = 'HH',\n    grouping = 'daily',\n    groupingFormat = 'ddd, DD. MMM',\n    classMain = 'btn-toolbar',\n    classButtonGroup = 'btn-group',\n    classButtonGroupMargin = 'mr-2',\n    classLabel = undefined,\n    classLabelSpan = 'd-block w-100',\n    classButton = 'btn',\n    classButtonActive = 'active',\n    classButtonNotEnabled = 'btn-light',\n    classButtonEnabled = 'btn-secondary',\n    classButtonAllEnabled = 'btn-primary',\n    /*prependNodes = undefined,\n      appendNodes = undefined*/\n    ...rest\n  } = {}) {\n    super(rest);\n    \n    this.options.format = format;\n    this.options.grouping = grouping;\n    this.options.groupingFormat = groupingFormat;\n    this.options.classMain = classMain;\n    this.options.classButtonGroup = classButtonGroup;\n    this.options.classButtonGroupMargin = classButtonGroupMargin;\n    this.options.classLabel = classLabel;\n    this.options.classLabelSpan = classLabelSpan;\n    this.options.classButton = classButton;\n    this.options.classButtonActive = classButtonActive;\n    this.options.classButtonNotEnabled = classButtonNotEnabled;\n    this.options.classButtonEnabled = classButtonEnabled;\n    this.options.classButtonAllEnabled = classButtonAllEnabled;\n    \n    /**\n     * @member {external:jQuery|undefined}\n     * @private\n     */\n    this.toolbarNode = undefined;\n    \n    this.setNode(this.options.node);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTime() {\n    if (this.toolbarNode === undefined)\n      return;\n    \n    var time = this.options.timeline.getSelectedTime();\n    var that = this;\n    this.toolbarNode.find('button').each(function () {\n      var t = new Date(+$(this).data('time'));\n      $(this)\n        .removeClass(that.options.classButtonActive);\n      /*.removeClass(that.options.classButtonAllEnabled)\n        .removeClass(that.options.classButtonEnabled)\n        .removeClass(that.options.classButtonNotEnabled);*/\n      if (time.valueOf() == t.valueOf())\n        $(this).addClass(that.options.classButtonActive);\n      /*else if (that.options.timeline.isTimeAllEnabled(t))\n        $(this).addClass(that.options.classButtonAllEnabled);\n      else if (that.options.timeline.isTimeEnabled(t))\n        $(this).addClass(that.options.classButtonEnabled);\n      else\n        $(this).addClass(that.options.classButtonNotEnabled);*/\n    });\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTimes() {\n    if (this.toolbarNode === undefined)\n      this.toolbarNode = $('<div>');\n    this.toolbarNode.empty();\n    \n    var groupingFormat =\n      (this.options.grouping == 'daily') ? 'YYYY-MM-DD' :\n        (this.options.grouping == 'hourly') ? 'YYYY-MM-DD HH' :\n          this.options.grouping;\n    var lastNode = undefined;\n    this.getTimelineTimes().forEach(function (time) {\n      if (lastNode === undefined ||\n          lastNode.data('date') != this.timeToText(time, groupingFormat)) {\n        var btnGroup = $('<div>')\n          .addClass(this.options.classButtonGroup)\n          .addClass(this.options.classButtonGroupMargin)\n          .attr('role', 'group')\n          .attr('aria-label', this.timeToText(time, groupingFormat));\n        if (this.options.groupingFormat === undefined) {\n          lastNode = btnGroup;\n        }\n        else {\n          var span = $('<span>')\n            .addClass(this.options.classLabelSpan)\n            .text(this.timeToText(time, this.options.groupingFormat));\n          lastNode = $('<label>')\n            .addClass(this.options.classLabel)\n            .append(span);\n          btnGroup.attr('aria-label', span.text());\n          lastNode.append(btnGroup);\n        }\n        lastNode.data('date', this.timeToText(time, groupingFormat));\n        this.toolbarNode.append(lastNode);\n      }\n      \n      var btn = $('<button>')\n        .addClass(this.options.classButton)\n        .attr('type', 'button')\n        .text(this.timeToText(time, this.options.format))\n        .data('time', time.valueOf());\n      if (this.options.timeline.isTimeAllEnabled(time))\n        btn.addClass(this.options.classButtonAllEnabled);\n      else if (this.options.timeline.isTimeEnabled(time))\n        btn.addClass(this.options.classButtonEnabled);\n      else\n        btn.addClass(this.options.classButtonNotEnabled);\n      var that = this;\n      btn.click(function () {\n        that.options.timeline.setSelectedTime(new Date(+$(this).data('time')));\n        that.trigger('input');\n      });\n      if (lastNode.hasClass(this.options.classButtonGroup))\n        lastNode.append(btn);\n      else\n        lastNode.children('div').append(btn);\n    }, this);\n    this.toolbarNode.find('div.'+this.options.classButtonGroup).last().removeClass(this.options.classButtonGroupMargin);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  emptyNode() {\n    this.toolbarNode = undefined;\n    this.options.node.empty();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onInitNode() {\n    this.toolbarNode = $('<div>')\n      .addClass(this.options.classMain)\n      .attr('role', 'toolbar')\n      .attr('aria-label', 'Timeline toolbar');\n    this.options.node.append(this.toolbarNode);\n  }\n  \n}\nexport default bsButtons;","/**\n * @module meteoJS/timeline/visualisation/bsDropdown\n */\nimport $ from 'jquery';\nimport Visualisation from '../Visualisation.js';\nimport Text from './Text.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {module:meteoJS/timeline/visualisation~options}\n *   module:meteoJS/timeline/visualisation/bsDropdown~options\n * @param {string|undefined} format\n *   Format string for dropdown items, used for 'getTimeText'.\n * @param {string|undefined} buttonFormat\n *   Format string for dropdown button, used for 'getTimeText'.\n * @param {string} grouping\n *   'daily', 'hourly' or a format string. Defines if items will be grouped and\n *   be title depending on groupingDivider and groupingFormat.\n * @param {boolean} groupingDivider Show dropdown divider above an item group.\n * @param {undefined|string} groupingFormat\n *   Format string for a dropdown header above an item group.\n * @param {undefined|string} classMain Class for the main node.\n * @param {undefined|string} classDropdownMenu Class for the dropdown node.\n * @param {undefined|string} classDropdownItem Class for a dropdown item.\n * @param {undefined|string} classItemActive Class for an active item.\n * @param {undefined|string} classItemNotEnabled Class for a not enabled item.\n * @param {undefined|string} classItemEnabled Class for an enabled item.\n * @param {undefined|string} classItemAllEnabled Class for an all enabled item.\n * @param {undefined|string} classDropdownHeader Class for dropdown header.\n * @param {undefined|string} classDropdownDivider Class for dropdown divider.\n * @param {undefined|string} classDropdownButton Class for the dropdown button.\n * @param {undefined|string} classButtonNotEnabled\n *   Class for the dropdown button if the selected time is not enabled.\n * @param {undefined|string} classButtonEnabled\n *   Class for the dropdown button if the selected time is enabled.\n * @param {undefined|string} classButtonAllEnabled\n *   Class for the dropdown button if the selected time is all enabled.\n */\n\n/**\n * Show timeline in a dropdown menu. The menu will be build according to\n * bootstrap.\n * \n * @extends module:meteoJS/timeline/visualisation.Visualisation\n */\nexport class bsDropdown extends Visualisation {\n  \n  /**\n   * @param {module:meteoJS/timeline/visualisation/bsDropdown~options} options - Options.\n   */\n  constructor({\n    format = 'HH:mm',\n    buttonFormat = 'DD. MMMM YYYY HH:mm',\n    grouping = 'daily',\n    groupingDivider = true,\n    groupingFormat = 'ddd, DD. MMMM YYYY',\n    classMain = 'dropdown',\n    classDropdownMenu = 'dropdown-menu',\n    classDropdownItem = 'dropdown-item',\n    classItemActive = 'active',\n    classItemNotEnabled = 'disabled',\n    classItemEnabled = undefined,\n    classItemAllEnabled = undefined,\n    classDropdownHeader = 'dropdown-header',\n    classDropdownDivider = 'dropdown-divider',\n    classDropdownButton = 'btn dropdown-toggle',\n    classButtonNotEnabled = undefined,\n    classButtonEnabled = undefined,\n    classButtonAllEnabled = undefined,\n    ...rest\n  } = {}) {\n    super(rest);\n    \n    this.options.format = format;\n    this.options.buttonFormat = buttonFormat;\n    this.options.grouping = grouping;\n    this.options.groupingDivider = groupingDivider;\n    this.options.groupingFormat = groupingFormat;\n    this.options.classMain = classMain;\n    this.options.classDropdownMenu = classDropdownMenu;\n    this.options.classDropdownItem = classDropdownItem;\n    this.options.classItemActive = classItemActive;\n    this.options.classItemNotEnabled = classItemNotEnabled;\n    this.options.classItemEnabled = classItemEnabled;\n    this.options.classItemAllEnabled = classItemAllEnabled;\n    this.options.classDropdownHeader = classDropdownHeader;\n    this.options.classDropdownDivider = classDropdownDivider;\n    this.options.classDropdownButton = classDropdownButton;\n    this.options.classButtonNotEnabled = classButtonNotEnabled;\n    this.options.classButtonEnabled = classButtonEnabled;\n    this.options.classButtonAllEnabled = classButtonAllEnabled;\n    \n    /**\n     * @member {module:meteoJS/timeline/visualisation/text.Text}\n     * @private\n     */\n    this.visualisationButtonText = new Text({\n      timeline: this.options.timeline,\n      format: this.options.buttonFormat,\n      textInvalid: this.options.textInvalid,\n      outputTimezone: this.options.outputTimezone,\n      getTimeText: this.options.getTimeText\n    });\n    /**\n     * @member {external:jQuery|undefined}\n     * @private\n     */\n    this.dropdownNode = undefined;\n    \n    this.setNode(this.options.node);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  setOutputTimezone(outputTimezone) {\n    super.setOutputTimezone(outputTimezone);\n    this.visualisationButtonText.setOutputTimezone(outputTimezone);\n    return this;\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTime() {\n    if (this.dropdownNode === undefined)\n      return;\n    \n    var time = this.options.timeline.getSelectedTime();\n    this.options.node.children('button')\n      .removeClass(this.options.classButtonActive)\n      .removeClass(this.options.classButtonNotEnabled)\n      .removeClass(this.options.classButtonEnabled)\n      .removeClass(this.options.classButtonAllEnabled);\n    if (this.options.timeline.isTimeAllEnabled(time))\n      this.options.node.children('button')\n        .addClass(this.options.classButtonAllEnabled);\n    else if (this.options.timeline.isTimeEnabled(time))\n      this.options.node.children('button')\n        .addClass(this.options.classButtonEnabled);\n    else\n      this.options.node.children('button')\n        .addClass(this.options.classButtonNotEnabled);\n    var that = this;\n    this.dropdownNode\n      .children('button.'+this.options.classDropdownItem)\n      .each(function () {\n        var t = new Date(+$(this).data('time'));\n        $(this)\n          .removeClass(that.options.classItemActive)\n          .removeClass(that.options.classItemNotEnabled)\n          .removeClass(that.options.classItemEnabled)\n          .removeClass(that.options.classItemAllEnabled);\n        if (time.valueOf() == t.valueOf())\n          $(this).addClass(that.options.classItemActive);\n        else if (that.options.timeline.isTimeAllEnabled(t))\n          $(this).addClass(that.options.classItemAllEnabled);\n        else if (that.options.timeline.isTimeEnabled(t))\n          $(this).addClass(that.options.classItemEnabled);\n        else\n          $(this).addClass(that.options.classItemNotEnabled);\n      });\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onChangeTimes() {\n    if (this.dropdownNode === undefined)\n      this.dropdownNode = $('<div>');\n    this.dropdownNode.empty();\n    \n    var groupingFormat =\n            (this.options.grouping == 'daily') ? 'YYYY-MM-DD' :\n              (this.options.grouping == 'hourly') ? 'YYYY-MM-DD HH' :\n                this.options.grouping;\n    var lastGroupTimeStr = undefined;\n    this.getTimelineTimes().forEach(function (time) {\n      if (lastGroupTimeStr === undefined ||\n                    lastGroupTimeStr != this.timeToText(time, groupingFormat)) {\n        if (lastGroupTimeStr !== undefined && // No divider at the beginning\n                        this.options.groupingDivider)\n          this.dropdownNode\n            .append($('<div>')\n              .addClass(this.options.classDropdownDivider));\n        if (this.options.groupingFormat !== undefined)\n          this.dropdownNode\n            .append($('<h6>')\n              .addClass(this.options.classDropdownHeader)\n              .text(this.timeToText(time, this.options.groupingFormat)));\n        lastGroupTimeStr = this.timeToText(time, groupingFormat);\n      }\n      var btn = $('<button>')\n        .addClass(this.options.classDropdownItem)\n        .attr('type', 'button')\n        .text(this.timeToText(time, this.options.format))\n        .data('time', time.valueOf());\n      var that = this;\n      btn.click(function () {\n        that.options.timeline.setSelectedTime(new Date(+$(this).data('time')));\n        that.trigger('input');\n      });\n      this.dropdownNode.append(btn);\n    }, this);\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  emptyNode() {\n    if (this.visualisationButtonText !== undefined)\n      this.visualisationButtonText.setNode(undefined);\n    this.dropdownNode = undefined;\n    this.options.node.empty();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onInitNode() {\n    var id = 'dropdownMenuButton';\n    var i=0;\n    while (document.getElementById(id) != null) {\n      id = 'dropdownMenuButton'+(++i);\n    }\n    \n    var button = $('<button>')\n      .addClass(this.options.classDropdownButton)\n      .attr('type', 'button')\n      .attr('id', id)\n      .attr('data-toggle', 'dropdown')\n      .attr('aria-haspopup', true)\n      .attr('aria-expanded', false);\n    this.visualisationButtonText.setNode(button);\n    this.dropdownNode = $('<div>')\n      .addClass(this.options.classDropdownMenu)\n      .attr('aria-labelledby', id);\n    this.options.node\n      .addClass(this.options.classMain)\n      .append(button)\n      .append(this.dropdownNode);\n  }\n  \n}\nexport default bsDropdown;","/**\n * @module meteoJS/synview/map\n */\nimport $ from 'jquery';\nimport addEventFunctions from '../Events.js';\n\n/** \n * Event object.\n * \n * @typedef {Object} module:meteoJS/synview/map~extendedEvent\n * @param {module:meteoJS/synview/type.Type} type Type belonging to the event.\n * @param {Object} layer Layer belonging to the event.\n * @param {Object} feature Vector feature, if present.\n * @param {Mixed[]} color Color of pixel (rgba), if present.\n */\n\n/**\n * Options for meteoJS/synview/map.\n * \n * @typedef {Object} module:meteoJS/synview/map~options\n * @param {mixed} map Map object.\n * @param {mixed} layerGroup Layer group within synview will operate.\n */\n\n/**\n * Triggered on view changes.\n * \n * @event module:meteoJS/synview/map#change:view\n */\n\n/**\n * Triggered on pointer moves over map.\n * \n * @event module:meteoJS/synview/map#move:pointer\n */\n\n/**\n * Triggered on pointer clicks into the map, with no dragging. A double click\n * will fire two events.\n * \n * @event module:meteoJS/synview/map#click:pointer\n */\n\n/**\n * Triggered on pointer clicks into the map, with no dragging and no double\n * click.\n * \n * @event module:meteoJS/synview/map#singleclick:pointer\n */\n\n/**\n * Triggered on pointer double clicks into the map, with no dragging.\n * \n * @event module:meteoJS/synview/map#dblclick:pointer\n */\n\n/**\n * Triggered on pointer dragging.\n * \n * @event module:meteoJS/synview/map#drag:pointer\n */\n\n/**\n * Abstract class to defined interface to the mapping library.\n * \n * @abstract\n * @fires module:meteoJS/synview/map#change:view\n */\nexport class SynviewMap {\n  \n  /**\n   * @param {module:meteoJS/synview/map~options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @member {meteoJS/synview/map~options}\n     * @private\n     */\n    this.options = $.extend(true, {\n      map: undefined,\n      layerGroup: undefined\n    }, options);\n  }\n  \n  /**\n   * Returns map object.\n   * \n   * @return {mixed} Map object.\n   */\n  getMap() {\n    return this.options.map;\n  }\n  \n  /**\n   * Helper function. Returns the view center in WGS84 coordinates, lat/lon.\n   * \n   * @abstract\n   * @return {number[]|undefined} Center.\n   */\n  getViewCenter() {}\n  \n  /**\n   * Helper function. Sets the view center in WGS84 coordinates, lat/lon.\n   * \n   * @abstract\n   * @param {number[]|undefined} center Center.\n   * @return {module:meteoJS/synview/map.SynviewMap} This.\n   */\n  setViewCenter() {\n    return this;\n  }\n  \n  /**\n   * Helper function. Returns the view zoom level.\n   * \n   * @abstract\n   * @return {number|undefined} Zoom level.\n   */\n  getViewZoom() {}\n  \n  /**\n   * Helper function. Sets the view zoom level.\n   * \n   * @abstract\n   * @param {number|undefined} zoom Zoom level.\n   * @return {module:meteoJS/synview/map.SynviewMap} This.\n   */\n  setViewZoom() {\n    return this;\n  }\n  \n  /**\n   * Returns a new layer group, already added to the map.\n   * \n   * @abstract\n   * @return {mixed} New layer group.\n   */\n  makeLayerGroup() {}\n  \n  /**\n   * Returns an event object, that is extended by several keys.\n   * Synview internal method.\n   * \n   * @abstract\n   * @param {object} event Map event object.\n   * @param {module:meteoJS/synview/typeCollection.TypeCollection} collection Type collection.\n   * @return {module:meteoJS/synview/map~extendedEvent} Event object.\n   */\n  getExtendedEventByTypeCollection(event) {\n    event.synviewType = undefined;\n    event.layer = undefined;\n    event.feature = undefined;\n    event.color = undefined;\n    return event;\n  }\n  \n  /**\n   * Returns index of the passed layer inside the layer group of the passed type.\n   * Synview internal method.\n   * \n   * @abstract\n   * @param {object} layer Layer object.\n   * @param {module:meteoJS/synview/type.Type} type Type.\n   * @return {integer} Index.\n   */\n  findLayerInType() {\n    return -1;\n  }\n  \n}\naddEventFunctions(SynviewMap.prototype);\nexport default SynviewMap;","/**\n * @module meteoJS/synview/collection\n */\nimport addEventFunctions from '../Events.js';\n\n/**\n * Triggered on adding item to collection.\n * \n * @event module:meteoJS/synview/collection#add:item\n * @param {object} Added item.\n */\n\n/**\n * Triggered on replacing item with already existing ID.\n * \n * @event module:meteoJS/synview/collection#replace:item\n * @param {object} Added item.\n * @param {object} Replaced and removed item.\n */\n\n/**\n * Triggered on removing item from collection.\n * \n * @event module:meteoJS/synview/collection#remove:item\n * @param {object} Removed item.\n */\n\n/**\n * Collection of items.\n * Items have at least a getId() method, which returns a unique ID.\n */\nexport class Collection {\n  \n  constructor() {\n    /**\n     * List of IDs of the items.\n     * @member {mixed}\n     * @private\n     */\n    this.itemIds = [];\n    \n    /**\n     * List of items, ID as key of the object.\n     * @member {Object}\n     * @private\n     */\n    this.items = {};\n  }\n  \n  /**\n   * Returns count of items in this collection.\n   * \n   * @return {integer} Count.\n   */\n  getCount() {\n    return this.itemIds.length;\n  }\n  \n  /**\n   * Returns items (in order as appended).\n   * \n   * @return {Object[]} Items.\n   */\n  getItems() {\n    return this.itemIds.map(function (id) { return this.items[id]; }, this);\n  }\n  \n  /**\n   * Returns a list of IDs (in order as appended).\n   * \n   * @return {mixed[]} List of IDs.\n   */\n  getItemIds() {\n    return this.itemIds;\n  }\n  \n  /**\n   * Returns item by ID, undefined if ID doesn't exist.\n   * \n   * @param {mixed} id ID.\n   * @return {Object|undefined} Item.\n   */\n  getItemById(id) {\n    return (id in this.items) ? this.items[id] : undefined;\n  }\n  \n  /**\n   * Returns if an ID exists in this collection.\n   * \n   * @param {mixed} id ID.\n   * @return {boolean} If exists.\n   */\n  containsId(id) {\n    return this.getIndexById(id) !== -1;\n  }\n  \n  /**\n   * Returns index of the item in this collecition, -1 if not existant.\n   * \n   * @param {mixed} id ID.\n   * @return {integer} Index.\n   */\n  getIndexById(id) {\n    var result = -1;\n    this.itemIds.forEach(function (itemId, i) {\n      if (itemId == id)\n        result = i;\n    });\n    return result;\n  }\n  \n  /**\n   * Append an item to the collection.\n   * \n   * @param {object} item New item.\n   * @return {module:meteoJS/synview/collection.Collection} This.\n   * @fires module:meteoJS/synview/collection#add:item\n   * @fires module:meteoJS/synview/collection#replace:item\n   */\n  append(item) {\n    var id = item.getId();\n    if (this.containsId(id)) {\n      this.trigger('replace:item', item, this.getItemById(id));\n      this.items[id] = item;\n    }\n    else {\n      this.itemIds.push(id);\n      this.items[id] = item;\n      this.trigger('add:item', item);\n    }\n    return this;\n  }\n  \n  /**\n   * Removes an item from the collection.\n   * \n   * @param {mixed} id ID of the item to delete.\n   * @return {module:meteoJS/synview/collection.Collection} This.\n   * @fires module:meteoJS/synview/collection#remove:item\n   */\n  remove(id) {\n    var item = this.getItemById(id);\n    if (item !== undefined) {\n      var index = this.getIndexById(id);\n      delete this.items[id];\n      this.itemIds.splice(index, 1);\n      this.trigger('remove:item', item);\n    }\n    return this;\n  }\n  \n}\naddEventFunctions(Collection.prototype);\nexport default Collection;","/**\n * @module meteoJS/synview/resource\n */\nimport VectorLayer from 'ol/layer/Vector';\nimport { unByKey } from 'ol/Observable';\nimport addEventFunctions from '../Events.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/synview/resource~options\n * @param {undefined|String} url - URL to resource.\n * @param {undefined|Date} datetime\n *   Datetime for this resource, undefined if resource have no datetime.\n * @param {undefined|String} mimetype - MIME-Type of the resource.\n * @param {undefined|Integer} reloadTime\n *   After this time period the resource will be reloaded. Undefined for no\n *   reload. (in seconds)\n * @param {undefined|String} className - Type's classname.\n * @param {undefined|boolean} [imageSmoothingEnabled=undefined]\n *   Disable image smoothing to draw sharp edges in image layers.\n *   Undefined uses the default (true).\n * @param {Object} ol - Options for openlayers.\n * @param {Object|external:ol/source/Source~Source|undefined} ol.source\n *   Options for openlayers source object or OL source object already.\n * @param {Object.<string,Function>|undefined} ol.events \n *   Function to listen to module:ol/render/Event~RenderEvent.\n * @param {undefined|external:ol/style/Style~Style|external:ol/style/Style~Style|external:ol/style/Style~StyleFunction} [ol.style]\n *   Style for features. If this is a module:ol/style/Style~StyleFunction,\n *   then \"this\" will be bound to this module:meteoJS/synview/resource~Resource.\n */\n\n/**\n * Object representing a resource.\n */\nexport class Resource {\n  \n  /**\n   * @param {module:meteoJS/synview/resource~options} options - Options.\n   */\n  constructor({\n    url = undefined,\n    datetime = undefined,\n    mimetype = undefined,\n    reloadTime = undefined,\n    className = undefined,\n    imageSmoothingEnabled = undefined,\n    ol = {}\n  } = {}) {\n    /**\n     * @type {Object}\n     * @private\n     */\n    this.options = {\n      url,\n      datetime,\n      mimetype,\n      reloadTime,\n      className,\n      ol\n    };\n    this._normalizeOLOptions(this.options.ol);\n    \n    /**\n     * @type {external:ol.layer.Layer|undefined}\n     * @private\n     */\n    this.layer = undefined;\n    \n    /**\n     * @type {ol.layer.Group|L.layerGroup|undefined}\n     * @private\n     */\n    this.layerGroup = undefined;\n    \n    /**\n     * @type {number|undefined}\n     * @private\n     */\n    this.reloadTimerId = undefined;\n    \n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.visible = false;\n    \n    /**\n     * @type {number|undefined}\n     * @private\n     */\n    this.zIndex = undefined;\n    \n    /**\n     * @type {number}\n     * @private\n     */\n    this.opacity = 1.0;\n    \n    /**\n     * @type {boolean}\n     * @private\n     */\n    this._imageSmoothing = imageSmoothingEnabled;\n  }\n  \n  /**\n   * Returns an ID for this resource. Should change, if content of resource\n   * changes.\n   * \n   * @return {mixed} Id.\n   */\n  getId() {\n    return this.getUrl();\n  }\n  \n  /**\n   * Returns URL to the resource. Undefined if unknown.\n   * \n   * @return {string|undefined} URL.\n   */\n  getUrl() {\n    return this.options.url;\n  }\n  \n  /**\n   * Returns the datetime of the resource.\n   * \n   * @return {Date|undefined} Date.\n   */\n  getDatetime() {\n    return this.options.datetime;\n  }\n  \n  /**\n   * Returns MIME-Type of the resource.\n   * \n   * @return {string} MIME-Type.\n   */\n  getMIMEType() {\n    return (this.options.mimetype === undefined) ?\n      'application/octet-stream' : this.options.mimetype;\n  }\n  \n  /**\n   * Returns the current reload time.\n   * \n   * @return {undefined|integer} Reload time period.\n   */\n  getReloadTime() {\n    return this.options.reloadTime;\n  }\n  \n  /**\n   * Sets the reload time.\n   * \n   * @param {undefined|integer} reloadTime Reload time period.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setReloadTime(reloadTime) {\n    this.options.reloadTime = reloadTime;\n    this._reload(); // starts or stops frequent reload\n    return this;\n  }\n  \n  /**\n   * Returns the visibility of the resource layer.\n   * \n   * @return {boolean} Visible.\n   */\n  getVisible() {\n    return this.visible;\n  }\n  \n  /**\n   * Sets the visibility of the resource layer.\n   * \n   * @param {boolean} visible Visible.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setVisible(visible) {\n    this.visible = visible;\n    if (this.layer !== undefined) {\n      // OpenLayers\n      if ('setVisible' in this.layer)\n        this.layer.setVisible(visible);\n      // Leaflet\n      else {\n        if (this.visible)\n          this.layer.addTo(this.layerGroup);\n        else\n          this.layerGroup.removeLayer(this.layer);\n      }\n    }\n    return this;\n  }\n  \n  /**\n   * Returns the z-Index of the resource layer.\n   * \n   * @return {number|undefined} z-Index.\n   */\n  getZIndex() {\n    return this.zIndex;\n  }\n  \n  /**\n   * Sets the z-Index of the resource layer.\n   * \n   * @param {number|undefined} zIndex z-Index.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setZIndex(zIndex) {\n    this.zIndex = zIndex;\n    if (this.layer !== undefined)\n      this.layer.setZIndex(zIndex);\n    return this;\n  }\n  \n  /**\n   * Returns opacity of the resource layer.\n   * \n   * @return {number} Opacity.\n   */\n  getOpacity() {\n    return this.opacity;\n  }\n  \n  /**\n   * Sets opacity of the resource layer.\n   * \n   * @param {number} opacity Opacity.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setOpacity(opacity) {\n    this.opacity = opacity;\n    if (this.layer !== undefined)\n      this.layer.setOpacity(opacity);\n    return this;\n  }\n  \n  /**\n   * Classname.\n   * \n   * @type undefined|String\n   */\n  get className() {\n    return this.options.className;\n  }\n  set className(className) {\n    this.options.className = className;\n  }\n  \n  /**\n   * imageSmoothingEnabled.\n   * \n   * @type undefined|boolean\n   */\n  get imageSmoothingEnabled() {\n    return this._imageSmoothing;\n  }\n  set imageSmoothingEnabled(imageSmoothing) {\n    this._imageSmoothing = imageSmoothing;\n  }\n  \n  /**\n   * Returns the layer group of the resource layer.\n   * \n   * @return {external:ol.layer.group|external:L.layerGroup|undefined} Layer group.\n   */\n  getLayerGroup() {\n    return this.layerGroup;\n  }\n  \n  /**\n   * Sets the layer group and adds the resource layer to this group.\n   * If undefined is passed, the resource layer will be deleted and removed for\n   * any layer group.\n   * \n   * @param {external:ol.layer.group|external:L.layerGroup|undefined} layerGroup Layer group.\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  setLayerGroup(layerGroup) {\n    if (this.layerGroup !== undefined &&\n        this.layer !== undefined) {\n      // OpenLayers\n      if ('remove' in this.layerGroup.getLayers())\n        this.layerGroup.getLayers().remove(this.layer);\n      // Leaflet\n      else\n        this.layerGroup.removeLayer(this.layer);\n    }\n    if (layerGroup === undefined)\n      this.layer = undefined;\n    this.layerGroup = layerGroup;\n    if (this.layerGroup !== undefined) {\n      // Leaflet\n      if ('addLayer' in this.layerGroup) {\n        var layer = this.getLLLayer();\n        if (this.getVisible())\n          this.layerGroup.addLayer(layer);\n      }\n      // OpenLayers\n      else\n        this.layerGroup.getLayers().push(this.getOLLayer());\n    }\n    this.setReloadTime(this.getReloadTime()); // Trigger reload interval\n    return this;\n  }\n  \n  /**\n   * Returns layer for openlayers of this resource.\n   * \n   * @return {external:ol.layer.Layer} openlayers layer.\n   */\n  getOLLayer() {\n    if (this.layer !== undefined)\n      return this.layer;\n    this.layer = this._makeOLLayer();\n    return this.layer;\n  }\n  \n  /**\n   * Returns openlayers layer of this resource. Must be overwritten by child\n   * classes.\n   * \n   * @protected\n   * @return {external:ol.layer.Layer} openlayers layer.\n   */\n  makeOLLayer() {\n    // Dies on instantiation of ol.layer.Layer, so use ol.layer.Vector\n    return new VectorLayer({\n      className: this.className\n    });\n  }\n  \n  /**\n   * Returns a ready to use OpenLayers layer.\n   * \n   * @private\n   * @return {external:ol.layer.Layer} openlayers layer.\n   */\n  _makeOLLayer() {\n    let layer = this.makeOLLayer();\n    layer.setVisible(this.visible);\n    layer.setZIndex(this.zIndex);\n    layer.setOpacity(this.opacity);\n    if ('events' in this.options.ol &&\n        this.options.ol.events !== undefined)\n      ['prerender', 'postrender'].forEach(eventName => {\n        if (eventName in this.options.ol.events &&\n            this.options.ol.events[eventName] !== undefined)\n          layer.on(eventName, event => {\n            this.options.ol.events[eventName].call(this, event, layer);\n          });\n      });\n    \n    if (!this._imageSmoothing) {\n      const source = layer.getSource();\n      if (source !== null &&\n          'contextOptions_' in source)\n        source.contextOptions_ = {\n          imageSmoothingEnabled: false,\n          msImageSmoothingEnabled: false\n        };\n    }\n    \n    return layer;\n  }\n  \n  /**\n   * Returns layer for Leaflet of this resource.\n   * \n   * @return {external:L.layer} Leaflet layer.\n   */\n  getLLLayer() {\n    if (this.layer !== undefined)\n      return this.layer;\n    this.layer = this._makeLLLayer();\n    return this.layer;\n  }\n  \n  /**\n   * Returns Leaflet layer of this resource. Must be overwritten by child\n   * classes.\n   * \n   * @protected\n   * @return {external:L.Layer} Leaflet layer.\n   */\n  makeLLLayer() {\n    // Dies on instantiation of ol.layer.Layer, so use ol.layer.Vector\n    return L.Layer();\n  }\n  \n  /**\n   * Preload resource. By default, openlayers loads the resource as soon as\n   * the resource gets visible.\n   */\n  preload() {}\n  \n  /**\n   * Returns a ready to use Leaflet layer.\n   * \n   * @private\n   * @return {external:L.Layer} Leaflet layer.\n   */\n  _makeLLLayer() {\n    return this.makeLLLayer();\n  }\n  \n  /**\n   * Reload source.\n   * \n   * @private\n   * @return {module:meteoJS/synview/resource.Resource} This.\n   */\n  _reload() {\n    // Stop possible earlier reload\n    if (this.reloadTimerId !== undefined) {\n      clearTimeout(this.reloadTimerId);\n      this.reloadTimerId = undefined;\n    }\n    // No frequent reload\n    if (this.options.reloadTime === undefined)\n      return;\n    // Reload could only be handled, if layerGroup is defined\n    if (this.layerGroup === undefined)\n      return;\n    var reloadFunction = (function () {\n      this.reloadTimerId = undefined;\n      if (this.layerGroup === undefined)\n        return;\n      var layer = this._makeOLLayer();\n      // Hackish reload of sources, it is not handled properly by OpenLayers.\n      // 1. Non-tile sources, they have a 'getUrl' method.\n      if ('getUrl' in layer.getSource()) {\n        var layerGroup = this.layerGroup;\n        // event triggered, even if source is cached.\n        var key = layer.getSource().on('change', (function () {\n          if (layer.getSource().getState() == 'ready' ||\n              layer.getSource().getState() == 'error') {\n            // Execute code once, once the data is loaded.\n            unByKey(key);\n            if (layer.getSource().getState() == 'ready' &&\n                this.layerGroup !== undefined) {\n              layer.setVisible(this.layer.getVisible());\n              layer.setOpacity(this.layer.getOpacity());\n              layer.setZIndex(this.layer.getZIndex());\n              this.layerGroup.getLayers().remove(this.layer);\n              this.layer = layer;\n            }\n            else if (this.layerGroup !== undefined)\n              this.layerGroup.getLayers().remove(layer);\n            else\n              layerGroup.getLayers().remove(layer);\n            if (this.reloadTimerId === undefined &&\n                this.options.reloadTime !== undefined &&\n                this.layerGroup !== undefined)\n              this.reloadTimerId =\n                setTimeout(reloadFunction, this.options.reloadTime * 1000);\n          }\n        }).bind(this));\n        this.layerGroup.getLayers().push(layer);\n        layer.setVisible(true); // Force load of data by make the layer visible.\n      }\n      else {\n        /* Tile sources in OpenLayers doesn't support a request to check, if all\n         * tiles are loaded, because cached tiles doesn't generate any event.\n         * Uncached tiles fire tileloadstart/end/error events.\n         * So we wait a second and exchange then the old with the new layer. If\n         * the reload of the data is smaller of one second, this suppresses that\n         * neither the old layer nor the new data is visible. */\n        this.layerGroup.getLayers().push(layer);\n        layer.setVisible(true);\n        setTimeout((function () {\n          this.layer = layer;\n          if (this.reloadTimerId === undefined &&\n              this.options.reloadTime !== undefined)\n            this.reloadTimerId =\n              setTimeout(reloadFunction, this.options.reloadTime * 1000);\n        }).bind(this), 1000);\n      }\n    }).bind(this);\n    this.reloadTimerId =\n      setTimeout(reloadFunction, this.options.reloadTime * 1000);\n    return this;\n  }\n  \n  /**\n   * Normalizes this.options.ol.\n   * \n   * @private\n   * @param {Object|external:ol/source/Source~Source|undefined} source\n   * @param {Object.<string,Function>|undefined} events\n   * @param {external:ol/style/Style~Style|external:ol/style/Style~StyleLike|external:ol/style/Style~StyleFunction|undefined} [style]\n   */\n  _normalizeOLOptions({\n    source = {},\n    events = undefined,\n    style = undefined\n  }) {\n    this.options.ol = {\n      source,\n      events,\n      style\n    };\n  }\n  \n}\naddEventFunctions(Resource.prototype);\nexport default Resource;","/**\n * @module meteoJS/synview/resourceCollection\n */\nimport Collection from './Collection.js';\nimport Resource from './Resource.js';\n\n/**\n * Collection of resource objects.\n * Extends meteoJS.synview.collection with storage of time objects.\n * This collection contains either a list of resources assigned with time or\n * one resource with no time (or both). With the methods from\n * meteoJS.synview.collection all resources (with or without time) will be\n * retrieved. Id of the resource without time is '' (empty string).\n * \n * @extends module:meteoJS/synview/collection.Collection\n */\nexport class ResourceCollection extends Collection {\n  \n  constructor() {\n    super();\n    \n    /**\n     * List of the datetime objects of the resources (sorted upwardly).\n     * @member {Date[]}\n     * @private\n     */\n    this.times = [];\n  }\n  \n  /**\n   * Returns all resources assigned with time (ordered temporal upwardly).\n   * \n   * @return {module:meteoJS/synview/resource.Resource[]} Resources.\n   */\n  getResources() {\n    return this.times.map(function (time) {\n      return this.items[time.valueOf()];\n    }, this);\n  }\n  \n  /**\n   * Returns times (ordered temporal upwardly).\n   * \n   * @return {Date[]} Times (no invalid times).\n   */\n  getTimes() {\n    return this.times;\n  }\n  \n  /**\n   * @override\n   * @param {mixed} id ID.\n   * @return {module:meteoJS/synview/resource.Resource} Resource.\n   */\n  getItemById(id) {\n    var res = super.getItemById(id);\n    return (res === undefined) ? new Resource() : res;\n  }\n  \n  /**\n   * Returns resource valid at passed datetime (could be an invalid datetime).\n   * If resource doesn't exist, an empty object is returned.\n   * \n   * @param {Date} time Datetime.\n   * @return {module:meteoJS/synview/resource.Resource} Resource.\n   */\n  getResourceByTime(time) {\n    return this.getItemById(isNaN(time) ? '' : time.valueOf());\n  }\n  \n  /**\n   * Returns if a resource with passed time exists. Time could be invalid.\n   * \n   * @param {Date} Time.\n   * @return {boolean} If exists.\n   */\n  containsTime(time) {\n    return this.getIndexById(isNaN(time) ? '' : time.valueOf()) > -1;\n  }\n  \n  /**\n   * Returns index of the time inside the times array. Time could be invalid.\n   * -1 if not existant.\n   * \n   * @param {Date} time Time.\n   * @return {integer} Index.\n   */\n  getIndexByTime(time) {\n    var result = -1;\n    if (!isNaN(time))\n      this.times.forEach(function (t, i) {\n        if (t.valueOf() == time.valueOf())\n          result = i;\n      });\n    return result;\n  }\n  \n  /**\n   * Returns if a resource with ID exists in this collection.\n   * \n   * @return {module:meteoJS/synview/resource.Resource}\n   */\n  getNewestResource() {\n    if (this.times.length < 1)\n      return new Resource();\n    return this.getResourceByTime(this.times[this.times.length-1]);\n  }\n  \n  /**\n   * Append a resource to the collection.\n   * \n   * @override\n   * @param {module:meteoJS/synview/resource.Resource} resource Resource.\n   * @return {module:meteoJS/synview/resourceCollection.ResourceCollection} This.\n   */\n  append(resource) {\n    this._append(resource);\n    this._sortTimes();\n    return this;\n  }\n  \n  /**\n   * Removes a resource from the collection.\n   * \n   * @override\n   * @param {Date} time Resource's time.\n   * @return {module:meteoJS/synview/resourceCollection.ResourceCollection} This.\n   */\n  remove(time) {\n    this._remove(isNaN(time) ? '' : time.valueOf());\n    this._sortTimes();\n    return this;\n  }\n  \n  /**\n   * Exchanges the collection content with a list of resource.\n   * \n   * @param {module:meteoJS/synview/resource.Resource[]} resources Resources.\n   * @fires module:meteoJS/synview/collection#add:item\n   * @fires module:meteoJS/synview/collection#replace:item\n   * @fires module:meteoJS/synview/collection#remove:item\n   * @return {module:meteoJS/synview/resourceCollection.ResourceCollection} This.\n   */\n  setResources(resources) {\n    resources.forEach(function (resource) {\n      this._append(resource);\n    }, this);\n    this._filterTimesByResources(resources);\n    this._sortTimes();\n    return this;\n  }\n  \n  /**\n   * Append a resource to the collection without reordering times-array.\n   * \n   * @private\n   * @param {module:meteoJS/synview/resource.Resource} resource Resource.\n   */\n  _append(resource) {\n    var time = resource.getDatetime();\n    var id = (time === undefined) ? '' : time.valueOf();\n    if (this.containsId(id)) {\n      this.trigger('replace:item', resource, this.getItemById(id));\n      this.items[id] = resource;\n    }\n    else {\n      this.itemIds.push(id);\n      this.items[id] = resource;\n      if (time !== undefined && !isNaN(time))\n        this.times.push(time);\n      this.trigger('add:item', resource);\n    }\n  }\n  \n  /**\n   * Removes a resource fromt the collection without reordering times-array.\n   * \n   * @private\n   * @param {mixed} id Resource ID.\n   */\n  _remove(id) {\n    var index = this.getIndexById(id);\n    if (index > -1) {\n      var resource = this.items[id];\n      delete this.items[id];\n      this.itemIds.splice(index, 1);\n      if (id !== undefined && id !== '' && !isNaN(id)) {\n        var tIndex = this.times.findIndex(function (t) {\n          return t.valueOf() == id;\n        });\n        if (tIndex > -1)\n          this.times.splice(tIndex, 1);\n      }\n      this.trigger('remove:item', resource);\n    }\n  }\n  \n  /**\n   * Removes all resources whose times doesn't exist in the collection.\n   * \n   * @private\n   * @param {module:meteoJS/synview/resource.Resource[]}\n   */\n  _filterTimesByResources(resources) {\n    var containsStaticResource = false;\n    this.times = this.times.filter(function (t) {\n      var filter = false;\n      var i = resources.findIndex(function (resource) {\n        var match = false;\n        var time = resource.getDatetime();\n        if (time !== undefined &&\n            t.valueOf() == time.valueOf()) {\n          match = true;\n        }\n        else if (time === undefined)\n          containsStaticResource = true;\n        return match;\n      }, this);\n      if (i < 0) {\n        this.remove(t.valueOf());\n        filter = true;\n      }\n      return !filter;\n    }, this);\n    if (containsStaticResource)\n      this.remove('');\n  }\n  \n  /**\n   * Sortiert den Zeit-Array this.times der Reihe nach.\n   * @private\n   */\n  _sortTimes() {\n    this.times.sort(function (a, b) {\n      return a.valueOf()-b.valueOf();\n    });\n  }\n  \n}\nexport default ResourceCollection;","/**\n * @module meteoJS/synview/type\n */\nimport LayerGroup from 'ol/layer/Group';\nimport addEventFunctions from '../Events.js';\nimport ResourceCollection from './ResourceCollection.js';\nimport Resource from './Resource.js';\n\n/**\n * Preload options.\n * \n * @typedef {Object} module:meteoJS/synview/type~preloadOptions\n * @property {boolean} [enabled=false] - Enable preload of the resources.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/synview/type~options\n * @param {string|undefined} id ID.\n * @param {boolean} [visible] Visibility.\n * @param {undefined|number} [zIndex] zIndex on map.\n * @param {'nearest'|'floor'} [displayMethod]\n *   Method to determine the displayed resource.\n * @param {number} [displayMaxResourceAge]\n *   Maximum time space between display and resource time (in seconds).\n * @param {number} [displayFadeStart]\n *   Fade resource from this age to the display time (in seconds).\n * @param {number} [displayFadeStartOpacity]\n *   Opacity (between 0 and 1) at displayFadingTime.\n * @param {undefined|String} className - Classname.\n * @param {undefined|boolean} [imageSmoothingEnabled=undefined]\n *   Value of\n *   {@link https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/imageSmoothingEnabled|imageSmoothingEnabled}\n *   when drawing the layers of this type to canvas.\n *   Undefined uses the default (true). When a\n *   {@link module:meteoJS/synview/resource.Resource}\n *   has explicitly set an own value \n *   ({@link module:meteoJS/synview/resource.Resource#imageSmoothingEnabled}),\n *   this will be ignored.\n * @param {module:meteoJS/synview/tooltip~contentFunction|undefined} [tooltip]\n *   Tooltip function. If color detection will be used with this type, you must\n *   set an unique className.\n * @param {module:meteoJS/synview/type~preloadOptions} [preload]\n *   Preload options.\n */\n\n/**\n * Triggered on change of visibilty.\n * \n * @event module:meteoJS/synview/type#change:visible\n */\n\n/**\n * Triggered, if the set of timestamps changes (due to resource changes).\n * \n * @event module:meteoJS/synview/type#change:resources\n */\n\n/**\n * @classdesc Type to display by synview, like a serie of radar images.\n * \n * @fires module:meteoJS/synview/type#change:visible\n */\nexport class Type {\n  \n  /**\n   * @param {module:meteoJS/synview/type~options} options Options.\n   */\n  constructor({\n    id = undefined,\n    visible = true,\n    zIndex = undefined,\n    displayMethod = 'floor',\n    displayMaxResourceAge = 3*3600,\n    displayFadeStart = 15*60,\n    displayFadeStartOpacity = 0.95,\n    resources = undefined,\n    className = undefined,\n    imageSmoothingEnabled = undefined,\n    tooltip = undefined,\n    preload = {}\n  } = {}) {\n    /**\n     * @type Object\n     * @private\n     */\n    this.options = {\n      id,\n      visible,\n      zIndex,\n      displayMethod,\n      displayMaxResourceAge,\n      displayFadeStart,\n      displayFadeStartOpacity,\n      resources,\n      className,\n      imageSmoothingEnabled,\n      tooltip\n    };\n    \n    /**\n     * The mapping group to display all the resources. (openlayers specific)\n     * @member {undefined|external:ol/layer/Group~LayerGroup}\n     * @default\n     * @private\n     */\n    this.layerGroup = undefined;\n    \n    /**\n     * Collection of resources.\n     * @member {module:meteoJS/synview/resourceCollection.ResourceCollection}\n     * @private\n     */\n    this.collection = new ResourceCollection();\n    \n    /**\n     * Time of displayed resource.\n     * @member {Date}\n     * @private\n     */\n    this.displayedResourceTime = new Date('invalid');\n    \n    // Collection initialisieren\n    this.collection.on('add:item', function (resource) {\n      resource.className = this.className;\n      this._addOLLayer(resource);\n      if (this._preload.enabled)\n        resource.preload();\n    }, this);\n    this.collection.on('remove:item', function (resource) {\n      this._removeOLLayer(resource);\n    }, this);\n    this.collection.on('replace:item', function (newResource, oldResource) {\n      if (newResource !== oldResource) {\n        newResource.className = this.className;\n        this._replaceOLLayer(newResource, oldResource);\n        if (this._preload.enabled)\n          newResource.preload();\n      }\n    }, this);\n    \n    /**\n     * Preload options.\n     * @type module:meteoJS/synview/type~preloadOptions\n     * @private\n     */\n    this._preload = preload;\n    \n    if (this.options.resources !== undefined)\n      this.collection.setResources(this.options.resources);\n    delete this.options.resources;\n  }\n  \n  /**\n   * Returns ID of type.\n   * \n   * @return {string|undefined}\n   */\n  getId() {\n    return this.options.id;\n  }\n  \n  /**\n   * Sets ID of type.\n   * \n   * @param {string|undefined} id ID.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setId(id) {\n    this.options.id = id;\n    return this;\n  }\n  \n  /**\n   * Returns visibility.\n   * \n   * @return {boolean} Visibility.\n   */\n  getVisible() {\n    return this.options.visible;\n  }\n  \n  /**\n   * Sets visibility.\n   * \n   * @param {boolean} visible Visibility.\n   * @return {module:meteoJS/synview/type.Type} This.\n   * @fires module:meteoJS/synview/type#change:visible\n   */\n  setVisible(visible) {\n    // Nur etwas unternehmen, falls Visible ndert\n    if (this.options.visible ? !visible : visible) {\n      this.options.visible = visible ? true : false;\n      if (this.layerGroup !== undefined)\n        this.layerGroup.setVisible(this.options.visible);\n      this.getResourceCollection().getItems().forEach(function (resource) {\n        if (isNaN(resource.getDatetime()))\n          resource.setVisible(this.options.visible);\n        resource.setLayerGroup(this.options.visible ? this.layerGroup : undefined);\n      }, this);\n      this.trigger('change:visible');\n    }\n    return this;\n  }\n  \n  /**\n   * Returns the z Index.\n   * \n   * @return {undefined|number}\n   */\n  getZIndex() {\n    return this.options.zIndex;\n  }\n  \n  /**\n   * Sets the z Index.\n   * \n   * @param {undefined|number} zIndex z-Index.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setZIndex(zIndex) {\n    this.options.zIndex = zIndex;\n    if (this.layerGroup !== undefined)\n      this.layerGroup.setZIndex(zIndex);\n    this.getResourceCollection().getItems().forEach(function (resource) {\n      resource.setZIndex(zIndex);\n    });\n    return this;\n  }\n  \n  /**\n   * Classname.\n   * \n   * @type undefined|String\n   */\n  get className() {\n    return this.options.className;\n  }\n  set className(className) {\n    this.options.className = className;\n  }\n  \n  /**\n   * Returns layer-group of this type on the map.\n   * \n   * return {external:ol/layer/Group~LayerGroup} Layer-group.\n   */\n  getLayerGroup() {\n    return (this.layerGroup === undefined) ? new LayerGroup() : this.layerGroup;\n  }\n  \n  /**\n   * Sets map layer-group for this type.\n   * \n   * @param {external:ol/layer/Group~LayerGroup} group layer-group.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setLayerGroup(group) {\n    this.layerGroup = group;\n    if (this.layerGroup !== undefined) {\n      if ('setVisible' in this.layerGroup) // Leaflet doesn't know visibility\n        this.layerGroup.setVisible(this.options.visible);\n      this.layerGroup.setZIndex(this.options.zIndex);\n    }\n    this.getResourceCollection().getItems().forEach(function (resource) {\n      resource.setLayerGroup(this.options.visible ? group : undefined);\n    }, this);\n    return this;\n  }\n  \n  /**\n   * Returns collection of the resources.\n   * Note: If you directly append resources to the collection, no\n   * {@link module:meteoJS/synview/type#change:resources} event will be fired.\n   * \n   * @return {module:meteoJS/synview/resourceCollection.ResourceCollection} resourceCollection.\n   */\n  getResourceCollection() {\n    return this.collection;\n  }\n  \n  /**\n   * Append a resource to the collection.\n   * If type is visible, this might also change the resources on the map.\n   * \n   * @param {module:meteoJS/synview/resource.Resource} resource Resource object.\n   * @return {module:meteoJS/synview/type.Type} This.\n   * @fires module:meteoJS/synview/type#change:resources\n   */\n  appendResource(resource) {\n    this.collection.append(resource);\n    \n    // show current layer again\n    this.setDisplayTime(this.displayedResourceTime);\n    \n    /* Trigger event after setDisplayTime, therewith the synview object can\n     * set the desired time in the timeline object. */\n    this.trigger('change:resources');\n    return this;\n  }\n  \n  /**\n   * Removes a resource from the collection.\n   * If type is visible, this might also change the resources on the map.\n   * \n   * @param {module:meteoJS/synview/resource.Resource} resource Resource object.\n   * @return {module:meteoJS/synview/type.Type} This.\n   * @fires module:meteoJS/synview/type#change:resources\n   */\n  removeResource(resource) {\n    // hide current layer\n    this._hideVisibleResource();\n    \n    this.collection.remove(resource.getDatetime());\n    \n    // show current layer again\n    this.setDisplayTime(this.displayedResourceTime);\n    \n    /* Trigger event after setDisplayTime, therewith the synview object can\n     * set the desired time in the timeline object. */\n    this.trigger('change:resources');\n    return this;\n  }\n  \n  /**\n   * Sets resources in the collection (and replaces previous ones).\n   * If type is visible, this might also change the resources on the map.\n   * \n   * @param {module:meteoJS/synview/resource.Resource[]} resources List of resource objects.\n   * @return {module:meteoJS/synview/type.Type} This.\n   * @fires module:meteoJS/synview/type#change:resources\n   */\n  setResources(resources) {\n    // hide current layer\n    this._hideVisibleResource();\n    \n    this.collection.setResources(resources);\n    \n    // show current layer again\n    this.setDisplayTime(this.displayedResourceTime);\n    \n    /* Trigger event after setDisplayTime, therewith the synview object can\n     * set the desired time in the timeline object. */\n    this.trigger('change:resources');\n    return this;\n  }\n  \n  /**\n   * Returns resource of the displayed resource. If type contains resources\n   * with timestamps as well as a static resource, only a resource with timestamp\n   * will be returned. If type is invisible or no layer group is set, no resource\n   * is display, therefore an empty resource will be returned.\n   * \n   * @return {module:meteoJS/synview/resource.Resource} Resource.\n   */\n  getDisplayedResource() {\n    if (this.getVisible() &&\n        this.layerGroup !== undefined) {\n      if (isNaN(this.displayedResourceTime))\n        return (this.collection.getTimes().length > 0) ?\n          new Resource() :\n          this.collection.getResourceByTime(this.displayedResourceTime);\n      else\n        return this.collection.getResourceByTime(this.displayedResourceTime);\n    }\n    else\n      return new Resource();\n  }\n  \n  /**\n   * Sets time to display. Corresponding to the options an adequate resource will\n   * be searched and displayed. (accessible via getDisplayedResource())\n   * \n   * @param {Date} time Display time.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setDisplayTime(time) {\n    if (!this.getVisible())\n      return this;\n    var time_to_show = this._getResourceTimeByDisplayTime(time);\n    if (time_to_show === undefined ||\n        time_to_show !== undefined &&\n        !isNaN(this.displayedResourceTime) &&\n        this.displayedResourceTime.valueOf() != time_to_show.valueOf())\n      this._hideVisibleResource();\n    if (time_to_show !== undefined) {\n      this.displayedResourceTime = time_to_show;\n      var resource = this.getResourceCollection().getItemById(time_to_show.valueOf());\n      if (resource.getId()) {\n        resource.setVisible(true);\n        var opacity = 1.0;\n        if (Math.abs(time.valueOf() - time_to_show.valueOf()) > this.options.displayMaxResourceAge*1000) // 3h\n          opacity = 0.0;\n        else if (Math.abs(time.valueOf() - time_to_show.valueOf()) > this.options.displayFadeStart*1000) // 15min\n          opacity = this.options.displayFadeStartOpacity *\n            (Math.abs(time.valueOf() - time_to_show.valueOf()) -\n             this.options.displayMaxResourceAge * 1000) /\n            (1000 *\n             (this.options.displayFadeStart - this.options.displayMaxResourceAge));\n        resource.setOpacity(opacity);\n      }\n    }\n    else\n      this.displayedResourceTime = new Date('invalid');\n    return this;\n  }\n  \n  /**\n   * Returns the current tooltip function, undefined for no tooltip.\n   * \n   * @return {module:meteoJS/synview/tooltip~contentFunction|undefined} Tooltip function.\n   */\n  getTooltip() {\n    return this.options.tooltip;\n  }\n  \n  /**\n   * Sets the tooltip function. Undefined for no tooltip.\n   * \n   * @param {module:meteoJS/synview/tooltip~contentFunction|undefined} tooltip Tooltip function.\n   * @return {module:meteoJS/synview/type.Type} This.\n   */\n  setTooltip(tooltip) {\n    this.options.tooltip = tooltip;\n    return this;\n  }\n  \n  /**\n   * Sets style of all resources (if resource has 'setOLStyle' method).\n   * If argument 'style' isn't declared, the style will be updated.\n   * Convenience method, you could also loop over all resources.\n   * \n   * @param {externalol/style/Style~Style} [style] OpenLayers style.\n   * @returns {module:meteoJS/synview/type.Type} This.\n   */\n  setResourcesOLStyle() {\n    var styleArguments = arguments;\n    this.getResourceCollection().getItems().forEach(function (resource) {\n      if ('setOLStyle' in resource)\n        resource.setOLStyle.apply(resource, styleArguments);\n    });\n    return this;\n  }\n  \n  /**\n   * Blendet aktuell dargestellten OL-Layer aus.\n   * @private\n   */\n  _hideVisibleResource() {\n    if (!isNaN(this.displayedResourceTime))\n      this.getResourceCollection()\n        .getItemById(this.displayedResourceTime.valueOf())\n        .setVisible(false);\n  }\n  \n  /**\n   * Fge dem layers-Objekt einen neuen OL-Layer hinzu\n   * @private\n   * @param {module:meteoJS/synview/resource.Resource} resource Entsprechende Resource zum Hinzufgen\n   */\n  _addOLLayer(resource) {\n    // Show static resources if visible\n    if (isNaN(resource.getDatetime()))\n      resource.setVisible(this.getVisible());\n    if (this.options.imageSmoothingEnabled !== undefined &&\n        resource.imageSmoothingEnabled === undefined)\n      resource.imageSmoothingEnabled = this.options.imageSmoothingEnabled;\n    resource.setLayerGroup(this.getLayerGroup());\n    resource.setZIndex(this.options.zIndex);\n  }\n  \n  /**\n   * Lscht aus layers-Objekt einen OL-Layer\n   * @private\n   * @param {module:meteoJS/synview/resource.Resource} resource Entsprechende Resource zum Hinzufgen\n   */\n  _removeOLLayer(resource) {\n    resource.setLayerGroup(undefined);\n  }\n  \n  /**\n   * Ersetzt im layers-Objekt einen OL-Layer\n   * @private\n   * @param {module:meteoJS/synview/resource.Resource} newResource Resource zum Hinzufgen\n   * @param {module:meteoJS/synview/resource.Resource} oldResource Resource zum Ersetzen\n   */\n  _replaceOLLayer(newResource, oldResource) {\n    this._removeOLLayer(oldResource);\n    this._addOLLayer(newResource);\n  }\n  \n  /**\n   * Gibt eine Zeit mit vorhandener Resource zu einer darzustellenden Zeit zurck.\n   * Es gibt dazu verschiedene Optionen (this.options.displayMethod):\n   * 'nearest': Whle die zeitlich nchstgelegene Resource aus\n   * 'floor':   Whle die Resource direkt zum Zeitpunkt oder zeitlich direkt vor\n   *            dem Termin.\n   * @private\n   * @return {undefined|Date} Resource time or undefined if not existing.\n   */\n  _getResourceTimeByDisplayTime(time) {\n    if (isNaN(time))\n      return undefined;\n    var resultTime = undefined;\n    this.collection.getTimes().forEach(function (resourceTime) {\n      /*if (resultTime === undefined)\n        resultTime = resourceTime;\n      else {*/\n      switch (this.options.displayMethod) {\n      case 'exact':\n        if (time.valueOf() == resourceTime.valueOf())\n          resultTime = resourceTime;\n        break;\n      case 'nearest':\n        if (resultTime === undefined ||\n                Math.abs(time.valueOf() - resourceTime.valueOf()) <\n                  Math.abs(time.valueOf() - resultTime.valueOf()))\n          resultTime = resourceTime;\n        break;\n      case 'floor':\n      default:\n        if (resultTime === undefined ||\n                resourceTime.valueOf() <= time.valueOf() &&\n                (time.valueOf() - resourceTime.valueOf() <\n                 time.valueOf() - resultTime.valueOf()))\n          resultTime = resourceTime;\n      }\n      //}\n    }, this);\n    return resultTime;\n  }\n  \n}\naddEventFunctions(Type.prototype);\nexport default Type;","/**\n * @module meteoJS/synview/typeCollection\n */\nimport $ from 'jquery';\nimport Collection from './Collection.js';\nimport Type from './Type.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/synview/typeCollection~options\n * @param {boolean} [exclusiveVisibility]\n *   At the same time, only one single type is visible.\n * @param {boolean} [syncVisibility]\n *   If the visibility of a type changes, all other types are also adjusted.\n *   If exclusiveVisibility is set to true, this will be ignored.\n */\n\n/**\n * Collection of type-objects.\n * Could ensure, that only a single type of this collection is visible.\n * \n * @extends module:meteoJS/synview/collection.Collection\n * @fires module:meteoJS/synview/typeCollection#change:typeVisible\n */\nexport class TypeCollection extends Collection {\n  \n  /**\n   * @param {module:meteoJS/synview/typeCollection~options} options - Options.\n   */\n  constructor(options) {\n    super();\n    \n    /**\n     * Options.\n     * @member {module:meteoJS/synview/typeCollection~options}\n     * @private\n     */\n    this.options = $.extend(true, {\n      exclusiveVisibility: false,\n      syncVisibility: false\n    }, options);\n  }\n  \n  /**\n   * Returns type with the passed ID or empty type if not existant.\n   * \n   * @override\n   * @param {mixed} id ID.\n   * @return {module:meteoJS/synview/type.Type} Type.\n   */\n  getItemById(id) {\n    var item = super.getItemById(id);\n    return (item === undefined) ? new Type() : this.items[id];\n  }\n  \n  /**\n   * Append type to this collection. If type with same ID is present, the type\n   * will be exchanged.\n   * \n   * @override\n   * @param {module:meteoJS/synview/type.Type} type Type.\n   * @return {module:meteoJS/synview/typeCollection.TypeCollection} This.\n   */\n  append(type) {\n    var that = this;\n    if (this.options.exclusiveVisibility &&\n        type.getVisible() &&\n        this.isVisible()) {\n      type.setVisible(false);\n    }\n    else if (that.options.syncVisibility) {\n      if (type.getVisible()) {\n        if (!this.isVisible())\n          this.getItems().forEach(function (t) {\n            t.setVisible(true);\n          }, this);\n      }\n      else {\n        if (this.isVisible())\n          type.setVisible(true);\n      }\n    }\n    type.on('change:visible', function () {\n      if (that.options.exclusiveVisibility) {\n        if (this.getVisible())\n          that.getItems().forEach(function (t) {\n            if (t.getId() != this.getId())\n              t.setVisible(false);\n          }, this);\n      }\n      else if (that.options.syncVisibility) {\n        that.getItems().forEach(function (t) {\n          if (t.getId() != this.getId())\n            t.setVisible(this.getVisible());\n        }, this);\n      }\n    });\n    return super.append(type);\n  }\n  \n  /**\n   * Returns the types of this collection with getVisible() == true.\n   * \n   * @return {module:meteoJS/synview/type.Type[]} Types.\n   */\n  getVisibleTypes() {\n    return this.getItems().filter(function (type) { return type.getVisible(); });\n  }\n  \n  /**\n   * Returns, if at least one type is visible.\n   * \n   * @return {boolean}\n   */\n  isVisible() {\n    return this.getVisibleTypes().length > 0;\n  }\n  \n  /**\n   * Sets the option exclusiveVisibility.\n   * If several types are visible and this will be set to true, then the first\n   * type in the getItems() iterator will stay visible.\n   * \n   * @return {module:meteoJS/synview/typeCollection.TypeCollection} This.\n   */\n  setExclusiveVisibility(exclusiveVisibility) {\n    if (this.options.exclusiveVisibility != exclusiveVisibility &&\n        exclusiveVisibility) {\n      var isVisibleType = false;\n      this.getItems().forEach(function (t) {\n        if (!isVisibleType)\n          isVisibleType = t.getVisible();\n        else\n          t.setVisible(false);\n      }, this);\n    }\n    this.options.exclusiveVisibility = exclusiveVisibility;\n    return this;\n  }\n  \n  /**\n   * Sets the option syncVisibility.\n   * If any type is visible and this will be set to true, then every type will\n   * be set visible.\n   * \n   * @return {module:meteoJS/synview/typeCollection.TypeCollection} This.\n   */\n  setSyncVisibility(syncVisibility) {\n    if (this.options.syncVisibility != syncVisibility &&\n        syncVisibility &&\n        this.isVisible()) {\n      this.getItems().forEach(function (t) {\n        t.setVisible(true);\n      }, this);\n    }\n    this.options.syncVisibility = syncVisibility;\n    return this;\n  }\n  \n}\nexport default TypeCollection;","/**\n * @module meteoJS/synview/tooltip\n */\nimport $ from 'jquery';\n\n/**\n * Function called that should return content for the tooltip. Undefined for\n * no tooltip.\n * \n * @typedef {Object} module:meteoJS/synview/tooltip~contentFunction\n * @param\n * @return {string|external:jQuery|undefined} Tooltip content.\n\n  sollte auch irgendwie die Resource-Objekt bernehmen...\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/synview/tooltip~options\n * @param {module:meteoJS/synview/map.SynviewMap} map - Map object.\n * @param {module:meteoJS/synview/typeCollection.TypeCollection} typeCollection\n *   Collection with all types.\n * @param {module:meteoJS/tooltip.Tooltip} tooltip - Tooltip object.\n */\n\n/**\n * Object to show a tooltip. Is instantiated by the main synview\n *   object.\n */\nexport class Tooltip {\n  \n  /**\n   * @param {module:meteoJS/synview/tooltip~options} [options] - Options.\n   */\n  constructor({\n    map,\n    typeCollection,\n    tooltip\n  }) {\n    \n    /**\n     * @type Object|undefined\n     * @private\n     */\n    this.tooltipFeature = undefined;\n    \n    /**\n     * @type mixed[]|undefined\n     * @private\n     */\n    this.tooltipPixelColor = undefined;\n    \n    /**\n     * @type module:meteoJS/synview/map.SynviewMap\n     * @private\n     */\n    this.map = map;\n    \n    /**\n     * @type module:meteoJS/synview/typeCollection.TypeCollection\n     * @private\n     */\n    this.typeCollection = typeCollection;\n    \n    /**\n     * @type module:meteoJS/tooltip.Tooltip\n     * @private\n     */\n    this.tooltip = tooltip;\n    \n    // Initialize tooltipNode\n    if (Object.getOwnPropertyDescriptor(\n      Object.getPrototypeOf(this.tooltip),\n      'tooltipNode'\n    ) &&\n        this.tooltip.tooltipNode === undefined)\n      this.tooltip.tooltipNode =\n        $('<div>')\n          .css('position', 'absolute')\n          .prependTo(this.map.getMap().getTargetElement());\n    \n    // On hide tooltip\n    this.tooltip.on('hide:tooltip', () => {\n      this.tooltipFeature = undefined;\n      this.tooltipPixelColor = undefined;\n    });\n    \n    // Mouse moves on map\n    this.map.on('move:pointer', e => {\n      if (e.dragging)\n        return;\n      e = this.map.getExtendedEventByTypeCollection(e, this.typeCollection);\n      if (e.feature ||\n          e.color) {\n        if (e.feature === this.tooltipFeature &&\n            (e.color === undefined &&\n             this.tooltipPixelColor === undefined ||\n             e.color !== undefined &&\n             this.tooltipPixelColor !== undefined &&\n             e.color.join(',') === this.tooltipPixelColor.join(','))) {\n          this.tooltip.show({\n            posX: e.pixel[0],\n            posY: e.pixel[1]\n          });\n          return;\n        }\n        \n        this.tooltipFeature = undefined;\n        this.tooltipPixelColor = undefined;\n        let tooltipContent = e.synviewType.getTooltip().call(undefined, e);\n        // Show tooltip only if there is content\n        if (tooltipContent !== undefined) {\n          this.tooltipFeature = e.feature;\n          this.tooltipPixelColor = e.color;\n          this.tooltip.content = tooltipContent;\n          this.tooltip\n            .hide()\n            .show({\n              posX: e.pixel[0],\n              posY: e.pixel[1]\n            });\n        }\n        else\n          this.tooltip.hide();\n      }\n      else\n        this.tooltip.hide();\n    });\n  }\n  \n}\nexport default Tooltip;","/**\n * @module meteoJS/synview\n */\n\nimport $ from 'jquery';\nimport SynviewMap from './synview/SynviewMap.js';\nimport Timeline from './Timeline.js';\nimport TypeCollection from './synview/TypeCollection.js';\nimport Tooltip from './synview/Tooltip.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/synview~options\n * @param {module:meteoJS/synview/map.SynviewMap|undefined} [map]\n *   Synview map object.\n * @param {module:meteoJS/timeline.Timeline|undefined} [timeline]\n *   Timeline object.\n * @param {module:meteoJS/tooltip.Tooltip} [tooltip] - Tooltip object.\n */\n\n/**\n * Mapping object to show map data for different timestamps. Create one object\n * per map.\n */\nexport default class Synview {\n  \n  /**\n   * @param {module:meteoJS/synview~options} options - Options.\n   */\n  constructor(options) {\n    /**\n     * @type {module:meteoJS/synview~options}\n     * @private\n     */\n    this.options = $.extend(true, {\n      map: undefined,\n      timeline: undefined,\n      tooltip: undefined\n    }, options);\n    // Normalize options\n    if (this.options.map === undefined)\n      this.options.map = new SynviewMap();\n    if (this.options.timeline === undefined)\n      this.options.timeline = new Timeline();\n    \n    /**\n     * Collection of synview types.\n     * @member {module:meteoJS/synview/typecollection.TypeCollection}\n     */\n    this.typeCollection = new TypeCollection();\n    /** @type meteoJS/synview/tooltip~Tooltip|undefined */\n    this.tooltip = undefined;\n    \n    // Timeline initialisieren\n    this.options.timeline.on('change:time', function () {\n      this.getTypeCollection().getItems().map(function (type) {\n        type.setDisplayTime(this.options.timeline.getSelectedTime());\n      }, this);\n    }, this);\n    \n    // typeCollection initialisieren\n    var timeline = this.options.timeline;\n    var updateTimes = function () {\n      var isLastTime = timeline.isLastEnabledTime();\n      // Zeitpunkte einlesen\n      if (this.getVisible())\n        timeline.setTimesBySetID(this.getId(), this.getResourceCollection().getTimes());\n      else\n        timeline.setTimesBySetID(this.getId(), []);\n      // Switch to last timestamp, if it was the last one already before.\n      if (isLastTime)\n        timeline.last();\n      else if (isNaN(timeline.getSelectedTime()))\n        timeline.first();\n    };\n    var appendType = function (type) {\n      type.setLayerGroup(this.options.map.makeLayerGroup());\n      updateTimes.call(type);\n      type.setDisplayTime(this.getTimeline().getSelectedTime());\n      type.on('change:resources', updateTimes);\n      // Zeitpunkte bei visible-nderungen lschen oder hinzufgen\n      type.on('change:visible', updateTimes);\n      if (type.getTooltip() !== undefined &&\n          this.tooltip === undefined) {\n        this.tooltip = new Tooltip({\n          map: this.options.map,\n          typeCollection: this.typeCollection,\n          tooltip: this.options.tooltip\n        });\n      }\n    };\n    var removeType = function (type) {\n      this.getTimeline().deleteSetID(type.getId());\n      // Layer-Group lschen (bzw. aus OL entfernen)\n      // Events aus dem Type lschen\n    };\n    this.typeCollection.on('add:item', appendType, this);\n    this.typeCollection.on('remove:item', removeType, this);\n    this.typeCollection.on('replace:item', function (type, removedType) {\n      appendType.call(this, type);\n      removeType.call(this, removedType);\n    }, this);\n  }\n  \n  /**\n   * Returns timeline object.\n   * \n   * @return {meteoJS.timeline} Timeline.\n   */\n  getTimeline() {\n    return this.options.timeline;\n  }\n  \n  /**\n   * Returns map object.\n   * \n   * @return {meteoJS.synview.map} Map object.\n   */\n  getMap() {\n    return this.options.map;\n  }\n  \n  /**\n   * Returns collection object of appended types.\n   * \n   * @return {meteoJS.synview.typeCollection} Type collection.\n   */\n  getTypeCollection() {\n    return this.typeCollection;\n  }\n  \n  /**\n   * Append a type to this synview. Wrapper for getTypeCollection().append(type),\n   * but ensures, that the new type has an id different than undefined.\n   * \n   * @param {meteoJS.synview.type} type Type to append.\n   * @return {meteoJS.synview} This.\n   */\n  appendType(type) {\n    if (type.getId() === undefined) {\n      var prefixId = 'synview-type-';\n      var i = 0;\n      var newId;\n      do {\n        newId = prefixId + (i++);\n      } while (this.getTypeCollection().containsId(newId));\n      type.setId(newId);\n    }\n    this.getTypeCollection().append(type);\n    return this;\n  }\n  \n  /**\n   * Returns the tooltip object.\n   * \n   * @returns {module:meteoJS/tooltip~Tooltip} - Tooltip object.\n   */\n  getTooltip() {\n    return this.options.tooltip;\n  }\n  \n}","/**\n * @module meteoJS/synview/map/ol\n */\nimport SynviewMap from '../SynviewMap.js';\nimport LayerGroup from 'ol/layer/Group';\nimport { transform, fromLonLat } from 'ol/proj';\n\n/**\n * Name of mercator projection in openlayers\n * \n * @constant {string}\n */\nexport const projmerc = 'EPSG:3857';\n\n/**\n * Name of wgs84 projection in openlayers (lat/lon in degrees)\n * \n * @constant {string}\n */\nexport const projwgs84 = 'EPSG:4326';\n\n/**\n * Object to \"communicate\" with openlayers.\n * \n * @extends module:meteoJS/synview/map.SynviewMap\n */\nexport class MapOL extends SynviewMap {\n  \n  constructor(options) {\n    super(options);\n    \n    // Normalize options\n    if (this.options.layerGroup === undefined) {\n      this.options.layerGroup = new LayerGroup();\n      this.options.map.addLayer(this.options.layerGroup);\n    }\n    \n    // Listen to view changes.\n    this.options.map.getView().on('change:center', (function () {\n      this.trigger('change:view', this);\n    }).bind(this));\n    this.options.map.getView().on('change:resolution', (function () {\n      this.trigger('change:view', this);\n    }).bind(this));\n    this.options.map.on('pointermove', (function (e) {\n      this.trigger('move:pointer', e);\n    }).bind(this));\n    this.options.map.on('click', (function (e) {\n      this.trigger('click:pointer', e);\n    }).bind(this));\n    this.options.map.on('singleclick', (function (e) {\n      this.trigger('singleclick:pointer', e);\n    }).bind(this));\n    this.options.map.on('dblclick', (function (e) {\n      this.trigger('dblclick:pointer', e);\n    }).bind(this));\n    this.options.map.on('pointerdrag', (function (e) {\n      this.trigger('drag:pointer', e);\n    }).bind(this));\n  }\n  \n  /**\n   * Helper function. Returns the view center in WGS84 coordinates, lat/lon.\n   * \n   * @return {number[]} Center.\n   */\n  getViewCenter() {\n    return transform(\n      this.options.map.getView().getCenter(),\n      this.options.map.getView().getProjection(),\n      projwgs84\n    );\n  }\n  \n  /**\n   * Helper function. Sets the view center in WGS84 coordinates, lat/lon.\n   * \n   * @param {number[]} center Center.\n   * @return {module:meteoJS/synview/map/ol~MapOL} This.\n   */\n  setViewCenter(center) {\n    var valid = true;\n    center = center.map(function (a) {\n      if (isNaN(a)) {\n        valid = false;\n        return undefined;\n      }\n      else\n        return a*1;\n    });\n    if (valid)\n      this.options.map.getView().setCenter(fromLonLat(center));\n    return this;\n  }\n  \n  /**\n   * Helper function. Returns the view zoom level.\n   * \n   * @return {number|undefined} Zoom level.\n   */\n  getViewZoom() {\n    return this.options.map.getView().getZoom();\n  }\n  \n  /**\n   * Helper function. Sets the view zoom level.\n   * \n   * @param {number|undefined} zoom Zoom level.\n   * @returns {module:meteoJS/synview/map/ol~MapOL} This.\n   */\n  setViewZoom(zoom) {\n    if (!isNaN(zoom))\n      this.options.map.getView().setZoom(zoom*1);\n    return this;\n  }\n  \n  /**\n   * Returns a new layer group, already added to the map.\n   * \n   * @returns {external:ol/layer/Group~LayerGroup} New layer group.\n   */\n  makeLayerGroup() {\n    var group = new LayerGroup();\n    this.options.layerGroup.getLayers().push(group);\n    return group;\n  }\n  \n  /**\n   * Returns an event object, that is extended by several keys.\n   * Synview internal method.\n   * \n   * @param {external:ol/MapBrowserPointerEvent} event Map event object.\n   * @param {module:meteoJS/synview/typeCollection.TypeCollection} collection Type collection.\n   * @returns {module:meteoJS/synview/map~extendedEvent} Event object.\n   */\n  getExtendedEventByTypeCollection(event, collection) {\n    event = super.getExtendedEventByTypeCollection(event, collection);\n    let visibleTypes = new Map();\n    collection.getVisibleTypes()\n      .filter(type => { return type.getTooltip() !== undefined; })\n      .map(type => visibleTypes.set(type, []));\n    let visibleLayers = new Set();\n    let visibleLayerClassnames = new Set();\n    for (let type of visibleTypes.keys()) {\n      type.getLayerGroup().getLayers().getArray()\n        .filter(layer => layer.getVisible())\n        .forEach(layer => {\n          visibleTypes.get(type).push(layer);\n          visibleLayers.add(layer);\n          visibleLayerClassnames.add(layer.getClassName());\n        });\n    }\n    \n    this.options.map.forEachFeatureAtPixel(event.pixel, (feature, layer) => {\n      for (let type of visibleTypes.keys()) {\n        visibleTypes.get(type).forEach(l => {\n          if (event.synviewType !== undefined)\n            return;\n          if (l === layer) {\n            event.feature = feature;\n            event.layer = layer;\n            event.synviewType = type;\n          }\n        });\n        if (event.synviewType !== undefined)\n          break;\n      }\n      return event.synviewType !== undefined;\n    }, {\n      hitTolerance: 5,\n      layerFilter: layer => visibleLayers.has(layer)\n    });\n    \n    if (event.feature === undefined) {\n      this.options.map.forEachLayerAtPixel(event.pixel, (layer, color) => {\n        if (color == null || color.length < 1)\n          return false;\n        for (let type of visibleTypes.keys()) {\n          visibleTypes.get(type).forEach(l => {\n            if (event.synviewType !== undefined)\n              return;\n            if (l.getClassName() == layer.getClassName()) {\n              event.color = color;\n              event.layer = layer;\n              event.synviewType = type;\n            }\n          });\n          if (event.synviewType !== undefined)\n            break;\n        }\n        return event.synviewType !== undefined;\n      }, {\n        hitTolerance: 5,\n        layerFilter: layer => visibleLayerClassnames.has(layer.getClassName())\n      });\n    }\n    return event;\n  }\n  \n  /**\n   * Returns index of the passed layer inside the layer group of the passed type.\n   * Synview internal method.\n   * \n   * @param {external:ol/layer/Layer~Layer} layer Layer object.\n   * @param {module:meteoJS/synview/type.Type} type Type.\n   * @return {integer} Index.\n   */\n  findLayerInType(layer, type) {\n    return type.getLayerGroup().getLayers().getArray().findIndex(function (l) {\n      return l == layer;\n    }) > -1;\n  }\n  \n}\nexport default MapOL;","/**\n * @module meteoJS/synview/map/ll\n */\nimport SynviewMap from '../SynviewMap.js';\n\n/**\n * Object to \"communicate\" with Leaflet.\n * \n * @extends module:meteoJS/synview/map.SynviewMap\n */\nexport class MapLL extends SynviewMap {\n  \n  constructor(options) {\n    super (options);\n    \n    // Normalize options\n    if (this.options.layerGroup === undefined)\n      this.options.layerGroup = L.layerGroup().addTo(this.options.map);\n  }\n  \n  /**\n   * Returns a new layer group, already added to the map.\n   * \n   * @inheritdoc\n   * @return {L.layerGroup} New layer group.\n   */\n  makeLayerGroup() {\n    return L.layerGroup().addTo(this.options.layerGroup);\n  }\n  \n}\nexport default MapLL;","/**\n * @module meteoJS/synview/resource/Vector\n */\nimport VectorSource from 'ol/source/Vector';\nimport VectorLayer from 'ol/layer/Vector';\nimport Resource from '../Resource.js';\nimport { projwgs84 } from '../map/MapOL.js';\n\n/**\n * Object representing a Vector-resource.\n * \n * @extends  module:meteoJS/synview/resource.Resource\n */\nexport class Vector extends Resource {\n  \n  /**\n   * @inheritdoc\n   */\n  getId() {\n    var d = this.getDatetime();\n    return isNaN(d) ? '' : d.toISOString();\n  }\n  \n  /**\n   * Returns openlayers layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:ol/layer/Vector~VectorLayer} Openlayers layer.\n   */\n  makeOLLayer() {\n    let opt = {\n      source: this.options.ol.source,\n      events: this.options.ol.events,\n      style: this.options.ol.style\n    };\n    this.options.ol;\n    // source not an ol/source/Source~Source object (via duck typing)\n    if (!('refresh' in opt.source)) {\n      let sourceOptions = opt.source;\n      if (this.options.url !== undefined &&\n          'format' in sourceOptions &&\n          sourceOptions.format !== undefined)\n        sourceOptions.url = this.options.url;\n      if (!('projection' in sourceOptions) ||\n          sourceOptions.projection === undefined)\n        sourceOptions.projection = projwgs84;\n      opt.source = new VectorSource(sourceOptions);\n    }\n    if (typeof opt.style === 'function')\n      opt.style = opt.style.bind(this);\n    if (this.className)\n      opt.className = this.className;\n    return new VectorLayer(opt);\n  }\n  \n  /**\n   * Sets style of the OpenLayers vector layer.\n   * If argument 'style' is omitted, the style will be updated.\n   * \n   * @param {external:ol/style/Style~Style} [style] OpenLayers style.\n   * @returns {module:meteoJS/synview/resource/Vector.Vector} This.\n   */\n  setOLStyle(style) {\n    if (this.layer === undefined)\n      this.getOLLayer();\n    if (this.layer === undefined ||\n        !('setStyle' in this.layer))\n      return this;\n    if (arguments.length == 0)\n      this.layer.setStyle(this.layer.getStyle());\n    else\n      this.layer.setStyle(style);\n    return this;\n  }\n  \n}\nexport default Vector;","/**\n * @module meteoJS/synview/resource/GeoJSON\n */\nimport GeoJSONFormat from 'ol/format/GeoJSON';\nimport Vector from './Vector.js';\n\n/**\n * Object representing a GeoJSON-resource.\n * \n * @extends module:meteoJS/synview/resource/Vector.Vector\n */\nexport class GeoJSON extends Vector {\n  \n  constructor(options) {\n    super(options);\n    \n    this.options.ol.source.url = this.options.url;\n    this.options.ol.source.format = new GeoJSONFormat();\n  }\n  \n}\nexport default GeoJSON;","/**\n * @module meteoJS/synview/resource/VectorTile\n */\nimport VectorTileSource from 'ol/source/VectorTile';\nimport VectorTileLayer from 'ol/layer/VectorTile';\nimport Vector from './Vector.js';\nimport { projwgs84 } from '../map/MapOL.js';\n\n/**\n * Object representing a VectorTile-resource.\n * \n * @extends  module:meteoJS/synview/resource/Vector~Vector\n */\nexport class VectorTile extends Vector {\n  \n  /**\n   * Returns openlayers layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:ol/layer/VectorTile~VectorTileLayer} Openlayers layer.\n   */\n  makeOLLayer() {\n    let opt = {\n      source: this.options.ol.source,\n      events: this.options.ol.events,\n      style: this.options.ol.style\n    };\n    // source not an ol/source/Source~Source object (via duck typing)\n    if (!('refresh' in opt.source)) {\n      let sourceOptions = opt.source;\n      if (!('tileUrlFunction' in sourceOptions) &&\n          this.options.url !== undefined &&\n          'format' in sourceOptions &&\n          sourceOptions.format !== undefined)\n        sourceOptions.url = this.options.url;\n      if (!('projection' in sourceOptions) ||\n          sourceOptions.projection === undefined)\n        sourceOptions.projection = projwgs84;\n      opt.source = new VectorTileSource(sourceOptions);\n    }\n    if (typeof opt.style === 'function')\n      opt.style = opt.style.bind(this);\n    if (this.className)\n      opt.className = this.className;\n    return new VectorTileLayer(opt);\n  }\n  \n}\nexport default VectorTile;","/**\n * @module meteoJS/synview/resource/GeoJSONTile\n */\nimport GeoJSON from 'ol/format/GeoJSON';\nimport VectorTile from './VectorTile.js';\n\n/**\n * Object representing a GeoJSON-Tile-resource.\n * \n * @extends module:meteoJS/synview/resource/VectorTile.VectorTile\n */\nexport class GeoJSONTile extends VectorTile {\n  \n  constructor(options) {\n    super(options);\n    \n    this.options.ol.source.format = new GeoJSON();\n  }\n  \n}\nexport default GeoJSONTile;","/**\n * @module meteoJS/synview/resource/Image\n */\nimport Static from 'ol/source/ImageStatic';\nimport ImageLayer from 'ol/layer/Image';\nimport { transformExtent } from 'ol/proj';\nimport Resource from '../Resource.js';\nimport { projmerc, projwgs84 } from '../map/MapOL.js';\n\n/**\n * Options for module:meteoJS/synview/resource/Image~Image.\n * \n * @typedef {module:meteoJS/synview/resource~options}\n *   module:meteoJS/synview/resource/Image~options\n * @param {number[]} extent - Extent.\n */\n\n/**\n * Object representing an image.\n * \n * <pre><code>import Image from 'meteoJS/synview/resource/Image';\nimport { Image } from 'meteoJS/synview/resource/Image';\nimport { ImageStatic } from 'meteoJS/synview/resource/Image';</code></pre>\n * \n * @extends  module:meteoJS/synview/resource.Resource\n */\nexport class ImageStatic extends Resource {\n  \n  /**\n   * @param {module:meteoJS/synview/resource/Image~options} options - Options.\n   */\n  constructor({\n    url = undefined,\n    datetime = undefined,\n    mimetype = undefined,\n    reloadTime = undefined,\n    className = undefined,\n    extent,\n    ol = {}\n  } = {}) {\n    super({\n      url,\n      datetime,\n      mimetype,\n      reloadTime,\n      className,\n      ol\n    });\n    \n    this.options.extent = extent;\n  }\n  \n  /**\n   * Returns openlayers layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:ol/layer/Image~ImageLayer} Openlayers layer.\n   */\n  makeOLLayer() {\n    let sourceOptions = this.options.ol.source;\n    sourceOptions.url = this.options.url;\n    sourceOptions.imageExtent =\n      transformExtent(this.options.extent,\n        projwgs84,\n        projmerc);\n    return new ImageLayer({\n      source: new Static(sourceOptions),\n      className: this.className\n    });\n  }\n  \n  /**\n   * Returns Leaflet layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:L.imageOverlay} Leaflet layer.\n   */\n  makeLLLayer() {\n    return L.imageOverlay(this.options.url, [\n      [this.options.extent[1], this.options.extent[0]],\n      [this.options.extent[3], this.options.extent[2]]\n    ]);\n  }\n  \n  \n  /**\n   * @inheritdoc\n   */\n  preload() {\n    this.getOLLayer().getSource().image_.load();\n  }\n}\nexport { ImageStatic as Image };\nexport default ImageStatic;","/**\n * @module meteoJS/synview/resource/OSM\n */\nimport OSMSource from 'ol/source/OSM';\nimport TileLayer from 'ol/layer/Tile';\nimport Resource from '../Resource.js';\n\n/**\n * Object representing a OSM-resource.\n * \n * @extends  module:meteoJS/synview/resource.Resource\n */\nexport class OSM extends Resource {\n  \n  /**\n   * Returns openlayers layer of this resource.\n   * \n   * @inheritdoc\n   * @return {external:ol/layer/Tile~TileLayer} Openlayers layer.\n   */\n  makeOLLayer() {\n    let sourceOptions = this.options.ol.source;\n    sourceOptions.url = this.options.url;\n    return new TileLayer({\n      source: new OSMSource(sourceOptions)\n    });\n  }\n  \n}\nexport default OSM;","/**\n * @module meteoJS/tooltip\n */\nimport addEventFunctions from './Events.js';\n\n/**\n * Triggered, when tooltip starts to be shown.\n * \n * @event module:meteoJS/tooltip#show:tooltip\n */\n\n/**\n * Triggered, when tooltip starts to be hidden.\n * \n * @event module:meteoJS/tooltip#hide:tooltip\n */\n\n/**\n * @classdesc Abstract class to create a tooltip.\n * \n * @abstract\n * @fires module:meteoJS/tooltip#show:tooltip\n * @fires module:meteoJS/tooltip#hide:tooltip\n */\nexport class Tooltip {\n  \n  constructor() {\n    /**\n     * @type Boolean\n     * @private\n     */\n    this._isShown = false;\n    \n    /**\n     * @type undefined|mixed\n     * @private\n     */\n    this._content = undefined;\n  }\n  \n  /**\n   * Is tooltip shown.\n   * \n   * @type Boolean\n   * @readonly\n   */\n  get isShown() {\n    return this._isShown;\n  }\n  \n  /**\n   * Content of tooltip. Could be a String or a HTMLElement or a jQuery object.\n   * \n   * @type undefined|mixed\n   */\n  get content() {\n    return this._content;\n  }\n  set content(content) {\n    let oldContent = this._content;\n    this._content = content;\n    if (oldContent !== this._content)\n      this.onContentChange();\n  }\n  \n  /**\n   * Show tooltip.\n   * \n   * @abstract\n   * @param {Object} [options] - Options.\n   * @param {Number} options.posX - Position in x direction.\n   * @param {Number} options.posY - Position in y direction.\n   * @returns {module:meteoJS/tooltip.Tooltip} This.\n   */\n  show() {\n    let fireShowEvent = !this.isShown;\n    this._isShown = true;\n    if (fireShowEvent)\n      this.trigger('show:tooltip');\n    return this;\n  }\n  \n  /**\n   * Hide tooltip.\n   * \n   * @abstract\n   * @returns {module:meteoJS/tooltip.Tooltip} This.\n   */\n  hide() {\n    let fireHideEvent = this.isShown;\n    this._isShown = false;\n    if (fireHideEvent)\n      this.trigger('hide:tooltip');\n    return this;\n  }\n  \n  /**\n   * Update tooltip. E.g. due to content change, which moved the tooltip.\n   * \n   * @abstract\n   * @returns {module:meteoJS/tooltip.Tooltip} This.\n   */\n  update() {\n    return this;\n  }\n  \n  /**\n   * Called when property 'content' changes.\n   * \n   * @abstract\n   * @protected\n   */\n  onContentChange() {}\n  \n}\naddEventFunctions(Tooltip.prototype);\nexport default Tooltip;","/**\n * @module meteoJS/tooltip/bootstrapTooltip\n */\nimport $ from 'jquery';\nimport 'bootstrap/js/dist/tooltip';\nimport Tooltip from '../Tooltip.js';\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/tooltip/bootstrapTooltip~options\n * @property {undefined|external:jQuery|external:HTMLElement} [tooltipNode=undefined]\n *   Create Bootstrap's tooltip on this element.\n * @property {Object} [bootstrapOptions] - Options passed to the '.tooltip' method.\n * @property {boolean} [closeOnMouseMove=true]\n *   Close tooltip, when mouse is moved over the tooltip.\n * @property {boolean} [closeOnMouseEnter=false]\n *   Close tooltip, when mouse is entered in the tooltip.\n */\n\n/**\n * Tooltip which uses the Bootstrap's tooltip.\n * \n * @extends module:meteoJS/tooltip.Tooltip\n * @inheritdoc\n */\nexport class BootstrapTooltip extends Tooltip {\n  \n  /**\n   * @param {module:meteoJS/tooltip/bootstrapTooltip~options} [options] - Options.\n   */\n  constructor({\n    tooltipNode = undefined,\n    bootstrapOptions = undefined,\n    closeOnMouseMove = true,\n    closeOnMouseEnter = false\n  } = {}) {\n    super();\n    \n    /**\n     * @type undefined|Object\n     * @private\n     */\n    this.bootstrapOptions = bootstrapOptions ? bootstrapOptions : {};\n    this._initBootstrapOptions(bootstrapOptions);\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this.closeOnMouseMove = closeOnMouseMove;\n    \n    /**\n     * @type Bboolean\n     * @private\n     */\n    this.closeOnMouseEnter = closeOnMouseEnter;\n    \n    /**\n     * @type external:jQuery\n     * @private\n     */\n    this._tooltipNode = undefined;\n    this.tooltipNode = tooltipNode;\n  }\n  \n  /**\n   * Bootstap's tooltip is assigned to this node.\n   * \n   * @type undefined|external:jQuery\n   */\n  get tooltipNode() {\n    return this._tooltipNode;\n  }\n  set tooltipNode(tooltipNode) {\n    if (tooltipNode === undefined) {\n      this._tooltipNode = tooltipNode;\n      return;\n    }\n    \n    this._tooltipNode = $(tooltipNode);\n    this._initTooltipNode();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  show({\n    posX,\n    posY\n  }) {\n    this.tooltipNode\n      .css({\n        left: `${posX}px`,\n        top: `${posY}px`\n      })\n      .tooltip(this.isShown ? 'update' : 'show');\n    return super.show();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  hide() {\n    if (this.isShown)\n      this.tooltipNode\n        .tooltip('hide')\n        .attr('data-original-title', undefined);\n    return super.hide();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  update() {\n    this.tooltipNode.tooltip('update');\n    return super.update();\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  onContentChange() {\n    /* If no content is passed, the tooltip will not open with a\n     * content-callback until the tooltip is initialized otherwise. */\n    this.tooltipNode.attr('data-original-title',\n      isStringContent(this.content) ? this.content : '-');\n    \n    this._updateNonStringContent();\n    this.update();\n  }\n  \n  /**\n   * Default options to Bootstrap's tooltip.\n   * \n   * @private\n   */\n  _initBootstrapOptions({\n    trigger = 'manual'\n  } = {}) {\n    this.bootstrapOptions.trigger = trigger;\n  }\n  \n  /**\n   * Initialize Bootstrap's tooltip.\n   * \n   * @private\n   */\n  _initTooltipNode() {\n    this.tooltipNode\n      .tooltip(this.bootstrapOptions)\n      .on('inserted.bs.tooltip', () => {\n        let tooltipNode = this._updateNonStringContent();\n        if (!tooltipNode.length)\n          return;\n        if (this.closeOnMouseMove)\n          tooltipNode.children('.tooltip-inner').mousemove(() => this.hide());\n        if (this.closeOnMouseEnter)\n          tooltipNode.children('.tooltip-inner').mouseenter(() => this.hide());\n      });\n  }\n  \n  /**\n   * Updates tooltips content, if not simply a string.\n   * \n   * @private\n   * @returns {external:jQuery} - Tooltip node.\n   */\n  _updateNonStringContent() {\n    let tooltipNode =\n      $(document.getElementById(this.tooltipNode.attr('aria-describedby')));\n    if (!tooltipNode.length)\n      return;\n    if (this.content !== undefined &&\n        !isStringContent(this.content))\n      tooltipNode\n        .children('.tooltip-inner')\n        .empty()\n        .append(this.content);\n    return tooltipNode;\n  }\n  \n}\nexport default BootstrapTooltip;\n\nconst isStringContent = function(content) {\n  return Object.prototype.toString.call(content) == '[object String]';\n};","/**\n * @module meteoJS/base/unique\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} module:meteoJS/base/unique~options\n * @param {mixed} [id] - Id.\n */\n\n/**\n * @classdesc Class that describe an object with an unique id.\n */\nexport class Unique {\n  \n  /**\n   * @param {module:meteoJS/base/unique~options} [options] - Options.\n   */\n  constructor({ id } = {}) {\n    this._id = id;\n  }\n  \n  /**\n   * Id.\n   * @type {mixed}\n   */\n  get id() {\n    return this._id;\n  }\n  set id(id) {\n    this._id = id;\n    this.setId(id);\n  }\n  \n  /**\n   * Fired, wenn id-setter is called.\n   * @protected\n   * @param {mixed} id - Id.\n   */\n  setId() {}\n}\nexport default Unique;","/**\n * @module meteoJS/base/collection\n */\nimport addEventFunctions from '../Events.js';\nimport Unique from './Unique.js';\n\n/**\n * Triggered on adding item to collection.\n * \n * @event meteoJS/base/collection#add:item\n * @param {module:meteoJS/base/unique.Unique} item - Added item.\n */\n\n/**\n * Triggered on replacing item with already existing ID.\n * \n * @event meteoJS/base/collection#replace:item\n * @param {module:meteoJS/base/unique.Unique} item - Added item.\n * @param {module:meteoJS/base/unique.Unique} removedItem - Replaced and removed item.\n */\n\n/**\n * Triggered on removing item from collection.\n * \n * @event meteoJS/base/collection#remove:item\n * @param {module:meteoJS/base/unique.Unique} item - Removed item.\n */\n\n/**\n * Options for constructor.\n * \n * @typedef {Object} meteoJS/base/collection~options\n * @param {boolean} [fireReplace] - Fire replace:item.\n * @param {boolean} [fireAddRemoveOnReplace] -\n *   Fire add:item and remove:item on replacing an item.\n * @param {boolean} [appendOnReplace] -\n *   Append item to the end, if item is replaced.\n * @param {undefined|Function} [sortFunction] -\n *   Sort function to sort the collection list.\n * @param {undefined|Function} [emptyObjectMaker] -\n *   Function that returns an empty Unique-Object or an instance of a child\n *   class.\n */\n\n/**\n * @classdesc Collection-class for Unique-Objects or objects of child classes.\n * \n * @implements {@@iterator}\n * @fires meteoJS/base/collection#add:item\n * @fires meteoJS/base/collection#remove:item\n * @fires meteoJS/base/collection#replace:item\n */\nexport class Collection {\n  \n  /**\n   * @param {meteoJS/base/collection~options} options - Options.\n   */\n  constructor({ fireReplace=true,\n    fireAddRemoveOnReplace=false,\n    appendOnReplace=true,\n    sortFunction,\n    emptyObjectMaker } = {}) {\n    /** @type Object */\n    this.options = {\n      fireReplace,\n      fireAddRemoveOnReplace,\n      appendOnReplace,\n      sortFunction,\n      emptyObjectMaker\n    };\n    \n    /**\n     * List of the IDs of the items.\n     * @type mixed[]\n     * @private\n     */\n    this._itemIds = [];\n    \n    /**\n     * Items, ID as key of the object.\n     * @type Object.<mixed,module:meteoJS/base/unique.Unique>\n     * @private\n     */\n    this._items = {};\n  }\n  \n  /**\n   * Count of the items in this collection.\n   * @type integer\n   */\n  get count() {\n    return this._itemIds.length;\n  }\n  \n  [Symbol.iterator]() {\n    let i = 0;\n    return {\n      next: () => {\n        return (i < this._itemIds.length)\n          ? { value: this._items[this._itemIds[i++]] }\n          : { done: true };\n      }\n    };\n  }\n  \n  /**\n   * Items (ordered list).\n   * @type module:meteoJS/base/unique.Unique[]\n   */\n  get items() {\n    return this._itemIds.map(id => this._items[id]);\n  }\n  \n  /**\n   * List of IDs (ordered list).\n   * @type mixed[]\n   */\n  get itemIds() {\n    return this._itemIds;\n  }\n  \n  /**\n   * Sort function for the items.\n   * @type undefined|Function\n   */\n  get sortFunction() {\n    return this.options.sortFunction;\n  }\n  set sortFunction(sortFunction) {\n    this.options.sortFunction = sortFunction;\n    this._sort();\n  }\n  \n  /**\n   * Returns item by ID, Unique-Object with undefined id, if ID doesn't exist.\n   * \n   * @param {mixed} id ID.\n   * @returns {module:meteoJS/base/unique.Unique} Item.\n   */\n  getItemById(id) {\n    return (id in this._items) ? this._items[id] :\n      (this.options.emptyObjectMaker === undefined)\n        ? new Unique()\n        : this.options.emptyObjectMaker.call(this);\n  }\n  \n  /**\n   * Is item appended to the collection.\n   * \n   * @param {module:meteoJS/base/unique.Unique} item - Item.\n   * @returns {boolean} If appended.\n   */\n  contains(item) {\n    let result = this.containsId(item.id);\n    if (result)\n      result = item === this.getItemById(item.id);\n    return result;\n  }\n  \n  /**\n   * Exists an ID in this collection.\n   * \n   * @param {mixed} id - ID.\n   * @returns {boolean} If exists.\n   */\n  containsId(id) {\n    return (id in this._items);\n  }\n  \n  /**\n   * Append an item to the collection.\n   * \n   * @param {...module:meteoJS/base/unique.Unique} items - New items.\n   * @returns {module:meteoJS/base/collection.Collection} This.\n   * @fires meteoJS/base/collection#add:item\n   * @fires meteoJS/base/collection#remove:item\n   * @fires meteoJS/base/collection#replace:item\n   */\n  append(...items) {\n    items.forEach(item => {\n      let id = item.id;\n      if (this.containsId(id)) {\n        let itemInCollection = this.getItemById(id);\n        if (this.options.appendOnReplace) {\n          this._itemIds.splice(this._itemIds.indexOf(id), 1);\n          this._itemIds.push(id);\n        }\n        if (itemInCollection !== item) {\n          this._items[id] = item;\n          if (this.options.fireReplace)\n            this.trigger('replace:item', item, itemInCollection);\n          if (this.options.fireAddRemoveOnReplace) {\n            this.trigger('remove:item', itemInCollection);\n            this.trigger('add:item', item);\n          }\n        }\n      }\n      else {\n        this._itemIds.push(id);\n        this._items[id] = item;\n        this.trigger('add:item', item);\n      }\n    });\n    this._sort();\n    return this;\n  }\n  \n  /**\n   * Removes an item from the collection.\n   * \n   * @param {...module:meteoJS/base/unique.Unique} items - Items to remove.\n   * @returns {module:meteoJS/base/collection.Collection} This.\n   * @fires meteoJS/base/collection#remove:item\n   */\n  remove(...items) {\n    items.forEach(item => {\n      let i = this._itemIds.indexOf(item.id);\n      if (i > -1) {\n        let realItem = this._items[item.id];\n        delete this._items[item.id];\n        this._itemIds.splice(i, 1);\n        this.trigger('remove:item', realItem);\n      }\n    });\n    return this;\n  }\n  \n  /**\n   * Removes an item by ID from the collection.\n   * \n   * @param {mixed} id - ID of the item to delete.\n   * @returns {module:meteoJS/base/collection.Collection} This.\n   * @fires meteoJS/base/collection#remove:item\n   */\n  removeById(...ids) {\n    ids.forEach(id => {\n      let i = this._itemIds.indexOf(id);\n      if (i > -1) {\n        let item = this._items[id];\n        delete this._items[id];\n        this._itemIds.splice(i, 1);\n        this.trigger('remove:item', item);\n      }\n    });\n    return this;\n  }\n  \n  /**\n   * Sorts Collection-List.\n   * \n   * @private\n   */\n  _sort() {\n    if (this.options.sortFunction === undefined)\n      return;\n    this._itemIds.sort((a,b) => {\n      return this.options.sortFunction(this._items[a], this._items[b]);\n    });\n  }\n}\naddEventFunctions(Collection.prototype);\nexport default Collection;","/**\n * @module meteoJS/sounding/parcel\n */\nimport Unique from '../base/Unique.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/sounding/parcel~options\n * @param {undefined|number} [pres=undefined]\n *   Parcel beginning pressure (mb).\n * @param {undefined|number} [tmpc=undefined]\n *   Parcel beginning temperature (C).\n * @param {undefined|number} [dwpc=undefined]\n *   Parcel beginning dewpoint (C).\n * @param {undefined|number} [ptrace=undefined]\n *   Parcel trace pressure (mb).\n * @param {undefined|number} [ttrace=undefined]\n *   Parcel trace temperature (C).\n * @param {undefined|number} [blayer=undefined]\n *   Pressure of the bottom of the layer the parcel is lifted (mb).\n * @param {undefined|number} [tlayer=undefined]\n *   Pressure of the top of the layer the parcel is lifted (mb).\n * @param {undefined|number} [lclpres=undefined]\n *   Parcel LCL (lifted condensation level) pressure (mb).\n * @param {undefined|number} [lclhght=undefined]\n *   Parcel LCL height (m AGL).\n * @param {undefined|number} [lfcpres=undefined]\n *   Parcel LFC (level of free convection) pressure (mb).\n * @param {undefined|number} [lfchght=undefined]\n *   Parcel LFC height (m AGL).\n * @param {undefined|number} [elpres=undefined]\n *   Parcel EL (equilibrium level) pressure (mb).\n * @param {undefined|number} [elhght=undefined]\n *   Parcel EL height (m AGL).\n * @param {undefined|number} [mplpres=undefined]\n *   Maximum Parcel Level (mb).\n * @param {undefined|number} [mplhght=undefined]\n *   Maximum Parcel Level (m AGL).\n * @param {undefined|number} [bplus=undefined]\n *   Parcel CAPE (J/kg).\n * @param {undefined|number} [bminus=undefined]\n *   Parcel CIN (J/kg).\n * @param {undefined|number} [bfzl=undefined]\n *   Parcel CAPE up to freezing level (J/kg).\n * @param {undefined|number} [b3km=undefined]\n *   Parcel CAPE up to 3 km (J/kg).\n * @param {undefined|number} [b6km=undefined]\n *   Parcel CAPE up to 6 km (J/kg).\n * @param {undefined|number} [p0c=undefined]\n *   Pressure value at 0 C  (mb).\n * @param {undefined|number} [pm10c=undefined]\n *   Pressure value at -10 C (mb).\n * @param {undefined|number} [pm20c=undefined]\n *   Pressure value at -20 C (mb).\n * @param {undefined|number} [pm30c=undefined]\n *   Pressure value at -30 C (mb).\n * @param {undefined|number} [hght0c=undefined]\n *   Height value at 0 C (m AGL).\n * @param {undefined|number} [hghtm10c=undefined]\n *   Height value at -10 C (m AGL).\n * @param {undefined|number} [hghtm20c=undefined]\n *   Height value at -20 C (m AGL).\n * @param {undefined|number} [hghtm30c=undefined]\n *   Height value at -30 C (m AGL).\n * @param {undefined|number} [wm10c=undefined]\n *   Wet bulb velocity at -10 C.\n * @param {undefined|number} [wm20c=undefined]\n *   Wet bulb velocity at -20 C.\n * @param {undefined|number} [wm30c=undefined]\n *   Wet bulb at -30 C.\n * @param {undefined|number} [li5=undefined]\n *   Lifted Index at 500 mb (C).\n * @param {undefined|number} [li3=undefined]\n *   Lifted Index at 300 mb (C).\n * @param {undefined|number} [brnshear=undefined]\n *   Bulk Richardson Number Shear.\n * @param {undefined|number} [brnu=undefined]\n *   Bulk Richardson Number U (kts).\n * @param {undefined|number} [brnv=undefined]\n *   Bulk Richardson Number V (kts).\n * @param {undefined|number} [brn=undefined]\n *   Bulk Richardson Number (unitless).\n * @param {undefined|number} [limax=undefined]\n *   Maximum Lifted Index (C).\n * @param {undefined|number} [limaxpres=undefined]\n *   Pressure at Maximum Lifted Index (mb).\n * @param {undefined|number} [cap=undefined]\n *   Cap Strength (C).\n * @param {undefined|number} [cappres=undefined]\n *   Cap strength pressure (mb).\n * @param {undefined|number} [bmin=undefined]\n *   Buoyancy minimum in profile (C).\n * @param {undefined|number} [bminpres=undefined]\n *   Buoyancy minimum pressure (mb).\n */\n\n/**\n * Class representing a parcel lifting.\n * \n * @extends module:meteoJS/base/unique.Unique\n */\nexport class Parcel extends Unique {\n  \n  /**\n   * @param {module:meteoJS/sounding/parcel~options} [options] - Options.\n   */\n  constructor({\n    id = undefined,\n    pres = undefined,\n    tmpc = undefined,\n    dwpc = undefined,\n    ptrace = undefined,\n    ttrace = undefined,\n    blayer = undefined,\n    tlayer = undefined,\n    lclpres = undefined,\n    lclhght = undefined,\n    lfcpres = undefined,\n    lfchght = undefined,\n    elpres = undefined,\n    elhght = undefined,\n    mplpres = undefined,\n    mplhght = undefined,\n    bplus = undefined,\n    bminus = undefined,\n    bfzl = undefined,\n    b3km = undefined,\n    b6km = undefined,\n    p0c = undefined,\n    pm10c = undefined,\n    pm20c = undefined,\n    pm30c = undefined,\n    hght0c = undefined,\n    hghtm10c = undefined,\n    hghtm20c = undefined,\n    hghtm30c = undefined,\n    wm10c = undefined,\n    wm20c = undefined,\n    wm30c = undefined,\n    li5 = undefined,\n    li3 = undefined,\n    brnshear = undefined,\n    brnu = undefined,\n    brnv = undefined,\n    limax = undefined,\n    limaxpres = undefined,\n    cap = undefined,\n    cappres = undefined,\n    bmin = undefined,\n    bminpres = undefined\n  } = {}) {\n    super({ id });\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.pres = pres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.tmpc = tmpc;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.dwpc = dwpc;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.ptrace = ptrace;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.ttrace = ttrace;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.blayer = blayer;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.tlayer = tlayer;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.lclpres = lclpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.lclhght = lclhght;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.lfcpres = lfcpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.lfchght = lfchght;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.elpres = elpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.elhght = elhght;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.mplpres = mplpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.mplhght = mplhght;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bplus = bplus;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bminus = bminus;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bfzl = bfzl;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.b3km = b3km;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.b6km = b6km;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.p0c = p0c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.pm10c = pm10c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.pm20c = pm20c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.pm30c = pm30c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.hght0c = hght0c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.hghtm10c = hghtm10c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.hghtm20c = hghtm20c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.hghtm30c = hghtm30c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.wm10c = wm10c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.wm20c = wm20c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.wm30c = wm30c;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.li5 = li5;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.li3 = li3;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.brnshear = brnshear;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.brnu = brnu;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.brnv = brnv;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.limax = limax;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.limaxpres = limaxpres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.cap = cap;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.cappres = cappres;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bmin = bmin;\n    \n    /**\n     * @type undefined|number\n     * @public\n     */\n    this.bminpres = bminpres;\n  }\n}\nexport default Parcel;","/**\n * @module meteoJS/sounding\n */\nimport { altitudeISAByPres,\n  potentialTempByTempAndPres,\n  equiPotentialTempByTempAndDewpointAndPres,\n  dewpointByHMRAndPres } from './calc.js';\nimport Collection from './base/Collection.js';\nimport Parcel from './sounding/Parcel.js';\n\n/**\n * Data for a sounding level.\n * Nomenclature is analogue to the SHARPpy project (sharppy/sharptab/profile.py)\n * Exception for some units:\n * * Windspeed always in m/s\n * * Temperature in Kelvin\n * * Relative humidity unitless\n * \n * @typedef {Object} module:meteoJS/sounding~levelData\n * @param {float} pres Pressure level [hPa].\n * @param {float|undefined} [hght] Altitude above sealevel [m].\n * @param {float|undefined} [tmpk] Temperature [K].\n * @param {float|undefined} [dwpk] Dewpoint-temperature [K].\n * @param {float|undefined} [wdir] Wind direction [].\n * @param {float|undefined} [wspd] Absolute windspeed [m/s].\n * @param {float|undefined} [u] Windspeed in U-direction [m/s].\n * @param {float|undefined} [v] Windspeed in V-direction [m/s].\n * @param {float|undefined} [relh] Relative humidity [].\n * @param {float|undefined} [mixr] Mixing ration [g/kg].\n * @param {float|undefined} [theta] Isentropic temperature [K].\n * @param {float|undefined} [thetae] Equivalent isentropic temperature [K].\n * @param {float|undefined} [wetbulb] Wetbulb isentropic temperature [K].\n * @param {float|undefined} [vtmp] Virtual temperature [K].\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/sounding~options\n * @param {boolean} [calcMissing] - Calculate missing data in each level.\n */\n\n/**\n * Class represents an atmospheric (radio-)sounding.\n */\nexport class Sounding {\n  \n  /**\n   * @param {module:meteoJS/sounding~options} [options] - Options.\n   */\n  constructor({\n    calcMissing = false,\n    parcels = []\n  } = {}) {\n    this.options = {\n      calcMissing\n    };\n    this.levels = {};\n    \n    /**\n     * @type module:meteoJS/base/collection.Collection\n     * @private\n     */\n    this._parcelCollection = new Collection({\n      fireAddRemoveOnReplace: true,\n      fireReplace: false,\n      emptyObjectMaker: () => new Parcel()\n    });\n    this._parcelCollection.append(...parcels);\n  }\n  \n  /**\n   * @type module:meteoJS/base/collection.Collection\n   * @public\n   * @readonly\n   */\n  get parcelCollection() {\n    return this._parcelCollection;\n  }\n  \n  /**\n   * Adds/replaces sounding data.\n   * \n   * @param {module:meteoJS/sounding~levelData[]} levelsData\n   *   Array with data at different levels.\n   * @param {module:meteoJS/sounding~options} [options] - Options.\n   * @returns {module:meteoJS/sounding.Sounding} This.\n   */\n  addLevels(levelsData, options) {\n    levelsData.forEach(function (levelData) {\n      this.addLevel(levelData, options);\n    }, this);\n    return this;\n  }\n\n  /**\n   * Adds/replaces Data for a certain level.\n   * \n   * @param {module:meteoJS/sounding~levelData} levelData - Data to add.\n   * @param {module:meteoJS/sounding~options} [options] - Options.\n   * @returns {module:meteoJS/sounding.Sounding} This.\n   */\n  addLevel(levelData, { calcMissing } = {}) {\n    calcMissing = calcMissing ? calcMissing : this.options.calcMissing;\n    if ('pres' in levelData &&\n      levelData.pres !== undefined) {\n      if (calcMissing)\n        levelData = this.calculateMissingData(levelData);\n      this.levels[levelData.pres] = levelData;\n    }\n    return this;\n  }\n\n  /**\n   * Calculates different parameters, if missing.\n   * \n   * @param {module:meteoJS/sounding~levelData} d - Data.\n   * @returns {module:meteoJS/sounding~levelData} Adjusted data.\n   */\n  calculateMissingData({ pres, hght,\n    u, v, wdir, wspd,\n    tmpk, dwpk,\n    relh, mixr, theta, thetae, wetbulb, vtmp }) {\n    let d = { pres, hght,\n      u, v, wdir, wspd,\n      tmpk, dwpk,\n      relh, mixr, theta, thetae, wetbulb, vtmp };\n  \n    // Height\n    if (d.hght === undefined)\n      d.hght = altitudeISAByPres(d.pres);\n  \n    // Wind\n    if (d.u === undefined &&\n      d.v === undefined &&\n      d.wdir !== undefined &&\n      d.wspd !== undefined) {\n      d.u = d.wspd * Math.sin(d.wdir / 180 * Math.PI);\n      d.v = d.wspd * Math.cos(d.wdir / 180 * Math.PI);\n    }\n    else if (d.u !== undefined &&\n           d.v !== undefined &&\n           d.wdir === undefined &&\n           d.wspd === undefined) {\n      d.wspd = Math.sqrt(Math.pow(d.u, 2) + Math.pow(d.v, 2));\n      d.wdir = Math.arctan(d.u/d.v) / Math.PI * 180;\n    }\n  \n    // Humidity\n    if (d.tmpk !== undefined &&\n      d.dwpk !== undefined) {\n    //if (d.relh === undefined)\n    //  meteoJS.calc.;\n    //if (d.mixr === undefined)\n    //  d.mixr = meteoJS.calc;\n      if (d.theta === undefined)\n        d.theta = potentialTempByTempAndPres(d.tmpk, d.pres);\n      if (d.thetae === undefined)\n        d.thetae =\n        equiPotentialTempByTempAndDewpointAndPres(d.tmpk, d.dwpk, d.pres);\n    }\n    else if (d.mixr !== undefined) {\n      if (d.dwpk === undefined)\n        d.dwpk = dewpointByHMRAndPres(d.mixr, d.pres);\n    }\n  \n    return d;\n  }\n\n  /**\n   * Removes the Data for a certain level (if existing).\n   * \n   * @param {float} pres - Remove the data at this Level [hPa].\n   * @returns {module:meteoJS/sounding.Sounding} this.\n   */\n  removeLevel(pres) {\n    if (pres in this.levels)\n      delete this.levels[pres];\n    return this;\n  }\n\n  /**\n   * Get the data for a specific level. Returns the levelData as passed to the\n   * constructor or addLevel.\n   * \n   * @param {float} pres - Level [hPa].\n   * @returns {module:meteoJS/sounding~levelData|undefined}\n   *   Data at a level, undefined if no data available.\n   */\n  getData(pres) {\n    return (pres in this.levels) ? \n      this.levels[pres] :\n      {\n        pres: undefined,\n        hght: undefined,\n        tmpk: undefined,\n        dwpk: undefined,\n        wdir: undefined,\n        wspd: undefined,\n        u: undefined,\n        v: undefined,\n        relh: undefined,\n        mixr: undefined,\n        theta: undefined,\n        thetae: undefined,\n        wetbulb: undefined,\n        vtmp: undefined\n      };\n  }\n\n  /**\n   * Get data for all defined levels. Upward sorted.\n   * \n   * @returns {module:meteoJS/sounding~levelData[]} Array of all the data.\n   */\n  getLevels() {\n    return Object\n      .keys(this.levels)\n      .map(function (pres) { return +pres; })\n      .sort(function (a,b) { return a-b; });\n  }\n\n  /**\n   * Get nearest level [hPa] with data.\n   * \n   * @param {float} pres Pressure [hPa].\n   * @returns {float|undefined} Level with data or undefined. [hPa]\n   */\n  getNearestLevel(pres) {\n    if (Object.keys(this.levels).length < 1)\n      return undefined;\n    return Object\n      .keys(this.levels)\n      .sort(function (levelA, levelB) {\n        return Math.abs(levelA-pres) - Math.abs(levelB-pres);\n      }).shift();\n  }\n}\nexport default Sounding;","/**\n * @module meteoJS/thermodynamicDiagram/functions\n */\nimport { windspeedMSToKN } from '../calc.js';\n\n/**\n * Definition of a line style. Some properties misses.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram~lineStyleOptions\n * @property {string} [color='black'] - Color.\n * @property {number} [width=1] - Width.\n * @property {undefined|number} [opacity=undefined] - Opacity.\n * @property {'butt'|'round'|'square'} [linecap=undefined] - Linecap.\n * @property {'arcs'|'bevel'|'miter'|'miter-clip'|'round'} [linejoin=undefined]\n *   Linejoin.\n * @property {string} [dasharray=undefined] - Dasharray.\n * @property {number|string} [dashoffset=undefined] - Dashoffset.\n */\n\n/**\n * Returns normalized lineStyle-Options.\n * \n * @param {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   Normalized options.\n * @private\n */\nexport function getNormalizedLineStyleOptions({\n  color = undefined,\n  width = undefined,\n  ...result\n} = {}, defaults = {}) {\n  result.color = getFirstDefinedValue(color, defaults.color, 'black');\n  result.width = getFirstDefinedValue(width, defaults.width, 1);\n  Object.keys(defaults).forEach(key => {\n    if (key != 'color' && key != 'width' && result[key] === undefined)\n      result[key] = defaults[key];\n  });\n  return result;\n}\n\n/**\n * Definition of font options. Some properties misses.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram~fontOptions\n * @param {mixed} [size=12] - Size.\n * @param {mixed} [color='black'] - Color.\n * @param {'start'|'middle'|'end'} [anchor=undefined] - Anchor.\n */\n\n/**\n * Returns normalized font-Options.\n * \n * @param {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   Normalized options.\n * @private\n */\nexport function getNormalizedFontOptions({\n  size = undefined,\n  color = undefined,\n  anchor = undefined,\n  ...result\n} = {}, defaults = {}) {\n  result.size = getFirstDefinedValue(size, defaults.size, 12);\n  result.color = getFirstDefinedValue(color, defaults.color, 'black');\n  anchor = getFirstDefinedValue(anchor, defaults.anchor);\n  if (anchor !== undefined)\n    result.anchor = anchor;\n  Object.keys(defaults).forEach(key => {\n    if (key != 'color' && key != 'size' && key != 'anchor'\n      && result[key] === undefined)\n      result[key] = defaults[key];\n  });\n  return result;\n}\n\n/**\n * A line with its visibility and style.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram~lineOptions\n * @param {boolean} [visible=true] - Visibility of the line.\n * @param {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   [style] - Line style.\n */\n\n/**\n * Returns normalized line options with visibility and line style.\n * \n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   Normalized options.\n * @internal\n */\nexport function getNormalizedLineOptions({\n  visible = undefined,\n  style = {}\n} = {}, defaults = {}) {\n  return {\n    visible: getFirstDefinedValue(visible, defaults.visible, true),\n    style: getNormalizedLineStyleOptions(style, defaults.style)\n  };\n}\n\n/**\n * A text with its visibility, style and font style.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram~textOptions\n * @param {boolean} [visible=true] - Visibility of the line.\n * @param {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   [font] - Font defintions.\n */\n\n/**\n * Returns normalized text options with visibility and line style.\n * \n * @param {module:meteoJS/thermodynamicDiagram~textOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~textOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~textOptions}\n *   Normalized options.\n * @internal\n */\nexport function getNormalizedTextOptions({\n  visible = true,\n  font = {}\n} = {}, defaults = {}) {\n  return {\n    visible: getFirstDefinedValue(visible, defaults.visible, true),\n    font: getNormalizedFontOptions(font, defaults.font)\n  };\n}\n\n/**\n * An object with its visibility, style and font style.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   module:meteoJS/thermodynamicDiagram~lineTextOptions\n * @property {module:meteoJS/thermodynamicDiagram~fontOptions}\n *   [font] - Font defintions.\n */\n\n/**\n * Returns normalized text options with visibility, line and font style.\n * \n * @param {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   [options] - Options.\n * @param {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   [defaults] - Optional defaults.\n * @returns {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   Normalized options.\n * @internal\n */\nexport function getNormalizedLineTextOptions({\n  visible = true,\n  style = {},\n  font = {}\n} = {}, defaults = {}) {\n  return {\n    visible: getFirstDefinedValue(visible, defaults.visible, true),\n    style: getNormalizedLineStyleOptions(style, defaults.style),\n    font: getNormalizedFontOptions(font, defaults.font)\n  };\n}\n\n/**\n * Returns the first defined argument.\n * \n * @param {mixed|undefined} [...params] - Some values.\n * @returns {mixed|undefined} - First defined value, if available.\n */\nexport function getFirstDefinedValue(...params) {\n  return params\n    .reduce((acc, cur) => { return (acc !== undefined) ? acc : cur; });\n}\n\n/**\n * Draws text in a SVG node.\n * \n * @param {Object} options - Options.\n * @param {external:SVG} options.node - SVG node.\n * @param {string} options.text - Text.\n * @param {number} options.x - X coordinate.\n * @param {number} options.y - Base Y coordinate.\n * @param {number} [options.horizontalMargin=0] - Padding in x direction.\n * @param {number} [options.verticalMargin=0] - Padding in y direction.\n * @param {module:meteoJS/thermodynamicDiagram~fontOptions} [options.font] - Font style.\n * @prarm {string|Object} [options.fill] - Fill for background.\n * @returns {external:SVG} - SVG group containing the inserted elements.\n */\nexport function drawTextInto({\n  node,\n  text,\n  x,\n  y,\n  horizontalMargin = 0,\n  verticalMargin = 0,\n  font = {},\n  fill = {}\n}) {\n  const group = node.group();\n  if (!('color' in fill))\n    fill.color = 'white';\n  const background = group.rect().fill(fill);\n  const textNode = group\n    .text(text)\n    .attr({ x, y })\n    .font(font);\n  if (font['alignment-baseline'] == 'bottom')\n    textNode.dy(-textNode.bbox().height - 5);\n  textNode\n    .dx(horizontalMargin * ((textNode.attr('text-anchor') == 'end') ? -1 : 1))\n    .dy(verticalMargin * ((font['alignment-baseline'] == 'bottom') ? -1 : 1));\n  background.attr({\n    x: textNode.bbox().x,\n    y: textNode.bbox().y,\n    width: textNode.bbox().width,\n    height: textNode.bbox().height\n  });\n  return group;\n}\n\n/**\n * Draws a windbarb into an SVG node.\n * \n * @param {Object} options - Options.\n * @param {external:SVG} options.node - SVG node.\n * @param {number} [options.x=0] - X coordinate for windbarb tip.\n * @param {number} [options.y=0] - Y coordinate for windbarb tip.\n * @param {number} [options.wspd=0] - Wind speed [m/s].\n * @param {number} [options.wdir=0] - Wind direction [].\n * @param {number} [options.length=50] - Windbarb length.\n * @param {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   [options.strokeStyle] - Line style.\n * @param {boolean} [options.fillTriangle=true] - Fill the 50 knots triangles.\n * @param {boolean} [options.triangleRatio=0.2]\n *   Width of the 50 knots triangles according to length.\n * @param {boolean} [options.barbDistanceRatio=0.1]\n *   Distance between triangles and/or 10 knot lines according to length.\n * @param {boolean} [options.barbHeightRatio=0.375]\n *   Height of the triangles and lines according to length.\n */\nexport function drawWindbarbInto({\n  node,\n  x = 0,\n  y = 0,\n  wspd = 0,\n  wdir = 270,\n  length = 50,\n  strokeStyle = undefined,\n  fillTriangle = true,\n  triangleRatio = 1 / 5,\n  barbDistanceRatio = 1 / 10,\n  barbHeightRatio = 3 / 8,\n  circleOnLowWindspeed = true,\n  circleRadiusRatio = 1 / 10\n} = {}) {\n  strokeStyle = getNormalizedLineStyleOptions(strokeStyle);\n  \n  const windspeed = windspeedMSToKN(wspd);\n  const windbarbGroup = node.group();\n  const barbGroup = (windspeed >= 5) ? windbarbGroup.group() : undefined;\n  const triangleWidth = length * triangleRatio;\n  const barbDistance = length * barbDistanceRatio;\n  const windbarbHeight = length * barbHeightRatio;\n  let yPosition = y - length;\n  let windspeedResidual = windspeed;\n  \n  if (windspeed < 5 && circleOnLowWindspeed) {\n    windbarbGroup\n      .circle(length * circleRadiusRatio)\n      .x(x)\n      .y(y)\n      .stroke(strokeStyle)\n      .fill('none');\n    return;\n  }\n  \n  // base line\n  windbarbGroup\n    .line(x, yPosition, x, y)\n    .stroke(strokeStyle);\n  \n  // 50 knots triangles\n  while (windspeedResidual >= 50) {\n    barbGroup\n      .polyline([\n        [x, yPosition],\n        [x + windbarbHeight, yPosition + triangleWidth/2],\n        [x, yPosition + triangleWidth]\n      ])\n      .fill(fillTriangle ? strokeStyle : 'none')\n      .stroke(strokeStyle);\n    windspeedResidual -= 50;\n    yPosition += triangleWidth + ((windspeedResidual >= 50) ? barbDistance/2 : barbDistance);\n  }\n  \n  // 10 knots lines\n  while (windspeedResidual >= 10) {\n    barbGroup\n      .line(\n        x, yPosition,\n        x + windbarbHeight, yPosition - triangleWidth/2\n      )\n      .stroke(strokeStyle);\n    yPosition += barbDistance;\n    windspeedResidual -= 10;\n  }\n  \n  if (windspeed < 10)\n    yPosition += barbDistance;\n  \n  // 5 knot line\n  if (windspeedResidual >= 5)\n    barbGroup\n      .line(\n        x, yPosition,\n        x + windbarbHeight/2, yPosition - triangleWidth/4\n      )\n      .stroke(strokeStyle);\n  \n  // compress barbs on high windspeed\n  const barbsWidth = yPosition - (y - length);\n  if (barbsWidth > length * 0.9)\n    barbGroup.scale(1, (length * 0.9) / barbsWidth, x, y - length);\n  \n  if (wdir != 0)\n    windbarbGroup.rotate(wdir, x, y);\n}","/**\n * @module meteoJS/thermodynamicDiagram/diagramSounding\n */\nimport addEventFunctions from '../Events.js';\nimport Unique from '../base/Unique.js';\nimport { getNormalizedLineOptions } from '../thermodynamicDiagram/Functions.js';\n\n/**\n * Change visibility event. Only triggered, if the visibility of the sounding\n * changes, not if only a part's visibility (like hodograph) changes.\n * \n * @event module:meteoJS/thermodynamicDiagram/diagramSounding#change:visible\n */\n\n/**\n * Change options event.\n * \n * @event module:meteoJS/thermodynamicDiagram/diagramSounding#change:options\n */\n\n/**\n * Definition of the options for the constructor.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/diagramSounding~options\n * @param {boolean} [visible=true] - Visibility of the sounding.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   [diagram] - Options for the thermodynamic diagram part.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   [windprofile] - Options for the windprofile part.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [hodograph] - Options for this sounding for the hodograph.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   [parcels] - Options for this sounding for the parcels.\n */\n\n/**\n * Representation of a plotted sounding (data and display options)\n * \n * <pre><code>import DiagramSounding from 'meteoJS/thermodynamicDiagram/DiagramSounding';</code></pre>\n * \n * @extends module:meteoJS/base/unique.Unique\n * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:visible\n * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:options\n */\nexport class DiagramSounding extends Unique {\n  \n  /**\n   * @param {module:meteoJS/sounding.Sounding} sounding - Sounding data.\n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~options} [options] - Options.\n   */\n  constructor(sounding, {\n    visible = true,\n    diagram = {},\n    windprofile = {},\n    hodograph = {},\n    parcels = {}\n  } = {}) {\n    super();\n    \n    /**\n     * @type module:meteoJS/sounding.Sounding\n     * @private\n     */\n    this._sounding = sounding;\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._visible = visible;\n    \n    /**\n     * @type Object\n     * @private\n     */\n    this._options = {\n      diagram: getNormalizedDiagramOptions(diagram),\n      windprofile:  getNormalizedWindprofileOptions(windprofile),\n      hodograph: getNormalizedLineOptions(hodograph),\n      parcels: getNormalizedParcelsOptions(parcels)\n    };\n  }\n\n  /**\n   * Sounding data.\n   * \n   * @type module:meteoJS/sounding.Sounding\n   * @readonly\n   */\n  get sounding() {\n    return this._sounding;\n  }\n  \n  /**\n   * Visibility of the sounding.\n   * \n   * @type {boolean}\n   * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:visible\n   */\n  get visible() {\n    return this._visible;\n  }\n  set visible(visible) {\n    let oldVisible = this._visible;\n    this._visible = visible ? true : false;\n    if (oldVisible != this._visible)\n      this.trigger('change:visible');\n  }\n  \n  get options() {\n    return this._options;\n  }\n  \n  /**\n   * Updated the style options for this sounding.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~options}\n   *   [options] - Options.\n   * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:visible\n   * @fires module:meteoJS/thermodynamicDiagram/diagramSounding#change:options\n   */\n  update({\n    visible = undefined,\n    diagram = undefined,\n    windprofile = undefined,\n    hodograph = undefined,\n    parcels = undefined\n  } = {}) {\n    let willTrigger = false;\n    if (diagram === undefined)\n      diagram = {};\n    else\n      willTrigger = true;\n    if (windprofile === undefined)\n      windprofile = {};\n    else\n      willTrigger = true;\n    if (hodograph === undefined)\n      hodograph = {};\n    else\n      willTrigger = true;\n    if (parcels === undefined)\n      parcels = {};\n    else\n      willTrigger = true;\n    \n    this._options.diagram =\n      updateDiagramOptions(this._options.diagram, diagram);\n    this._options.windprofile =\n      updateWindprofileOptions(this._options.windprofile, windprofile);\n    this._options.hodograph =\n      updateLineOptions(this._options.hodograph, hodograph);\n    this._options.parcels =\n      updateParcelsOptions(this._options.parcels, parcels);\n    if (willTrigger)\n      this.trigger('change:options');\n    \n    if (visible !== undefined)\n      this.visible = visible;\n  }\n  \n  /**\n   * Returns normalized visibility and style options for a parcel. This is a\n   * combination of the specific options for the passed parcel and the defaults.\n   * \n   * @param {module:meteoJS/sounding/parcel.Parcel} [parcel] - Parcel.\n   * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n   *   Parcel options.\n   * @public\n   */\n  getParcelOptions(parcel = undefined) {\n    let result = {\n      visible: this.options.parcels.default.visible,\n      temp: {\n        visible: this.options.parcels.default.temp.visible,\n        style: this.options.parcels.default.temp.style\n      },\n      dewp: {\n        visible: this.options.parcels.default.dewp.visible,\n        style: this.options.parcels.default.dewp.style\n      }\n    };\n    if (parcel !== undefined &&\n        parcel.id in this.options.parcels)\n      result = updateOptionsPart(result, this.options.parcels[parcel.id],\n        ['temp', 'dewp']);\n    return result;\n  }\n}\naddEventFunctions(DiagramSounding.prototype);\nexport default DiagramSounding;\n\n/**\n * Style/visibility options for a sounding in the thermodynamic diagram.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions\n * @param {boolean} [visible=true]\n *   Visibility in the thermodynamic diagram.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [temp] - Options for the temperature curve.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [dewp] - Options for the dewpoint curve.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [wetbulb] - Options for the wetbulb temperature curve.\n */\n\n/**\n * Returns normalized diagram options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   [options] - Options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   Normalized options.\n * @private\n */\nfunction getNormalizedDiagramOptions({\n  visible = true,\n  temp = {},\n  dewp = {},\n  wetbulb = {}\n} = {}) {\n  return {\n    visible,\n    temp: getNormalizedLineOptions(temp, {\n      style: {\n        color: 'red',\n        width: 3,\n        linecap: 'round'\n      }\n    }),\n    dewp: getNormalizedLineOptions(dewp, {\n      style: {\n        color: 'blue',\n        width: 3,\n        linecap: 'round'\n      }\n    }),\n    wetbulb: getNormalizedLineOptions(wetbulb, {\n      style: {\n        color: 'green',\n        width: 2,\n        linecap: 'round'\n      }\n    })\n  };\n}\n\n/**\n * Updates diagram options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   updateOptions - Some new options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   New options object.\n * @private\n */\nfunction updateDiagramOptions(options, updateOptions) {\n  return updateOptionsPart(options, updateOptions, ['temp', 'dewp', 'wetbulb']);\n}\n\n/**\n * Style/visibility options for a sounding in the windprofile.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions\n * @param {boolean} [visible=true] - Visibility in the windprofile part.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [windbarbs] - Options for the windbarbs.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   [windspeed] - Options for the windspeed line.\n */\n\n/**\n * Returns normalized windprofile options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   [options] - Options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   Normalized options.\n * @private\n */\nfunction getNormalizedWindprofileOptions({\n  visible = true,\n  windbarbs = {},\n  windspeed = {}\n} = {}) {\n  return {\n    visible,\n    windbarbs: getNormalizedLineOptions(windbarbs),\n    windspeed: getNormalizedLineOptions(windspeed)\n  };\n}\n\n/**\n * Updates windprofile options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   updateOptions - Some new options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   New options object.\n * @private\n */\nfunction updateWindprofileOptions(options, updateOptions) {\n  return updateOptionsPart(options, updateOptions, ['windbarbs', 'windspeed']);\n}\n\n/**\n * Visibility/style of the parcels. This object can contain further keys with\n * values as {@link module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n * which applies to the parcel with the equivalent id.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions\n * @param {boolean} [visible=true] - Visibility of the parcels.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions}\n *   [default] - Default options for a parcel.\n */\n\n/**\n * Returns normalized parcels options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   [options] - Options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   Normalized options.\n * @private\n */\nfunction getNormalizedParcelsOptions(options = {}) {\n  if (options.visible === undefined)\n    options.visible = true;\n  if (options.default === undefined)\n    options.default = {};\n  if (options.default.visible === undefined)\n    options.default.visible = false;\n  if (options.default.temp === undefined)\n    options.default.temp = {};\n  if (options.default.temp.visible === undefined)\n    options.default.temp.visible = true;\n  if (options.default.temp.style === undefined)\n    options.default.temp.style = {};\n  if (options.default.temp.style.color === undefined)\n    options.default.temp.style.color = 'rgb(255, 153, 0)';\n  if (options.default.temp.style.width === undefined)\n    options.default.temp.style.width = 3;\n  if (options.default.temp.style.linecap === undefined)\n    options.default.temp.style.linecap = 'round';\n  if (options.default.dewp === undefined)\n    options.default.dewp = {};\n  if (options.default.dewp.visible === undefined)\n    options.default.dewp.visible = true;\n  if (options.default.dewp.style === undefined)\n    options.default.dewp.style = {};\n  if (options.default.dewp.style.color === undefined)\n    options.default.dewp.style.color = 'rgb(255, 194, 102)';\n  if (options.default.dewp.style.width === undefined)\n    options.default.dewp.style.width = 3;\n  if (options.default.dewp.style.linecap === undefined)\n    options.default.dewp.style.linecap = 'round';\n  return options;\n}\n\n/**\n * Updates Parcels options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   updateOptions - Some new options.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~parcelsOptions}\n *   New options object.\n * @private\n */\nfunction updateParcelsOptions(options, updateOptions) {\n  if ('visible' in updateOptions)\n    options.visible = updateOptions.visible;\n  if ('default' in updateOptions)\n    options.default =\n      updateOptionsPart(options.default, updateOptions.default,\n        ['temp', 'dewp']);\n  Object.keys(updateOptions)\n    .filter(key => key != 'visible' && key != 'default')\n    .forEach(key =>\n      options[key] =\n        updateDiagramOptions(\n          (key in options) ? options[key] : {},\n          updateOptions[key]));\n  return options;\n}\n\n/**\n * Updates diagram/windprofile options.\n * \n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions|module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions|module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   updateOptions - Some new options.\n * @param {Array.<string>} [lineKeys] - Keys to update.\n * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding~diagramOptions|module:meteoJS/thermodynamicDiagram/diagramSounding~windprofileOptions}\n *   New options object.\n * @private\n */\nfunction updateOptionsPart(options, updateOptions, lineKeys = []) {\n  if ('visible' in updateOptions)\n    options.visible = updateOptions.visible;\n  lineKeys.forEach(key => {\n    if (key in updateOptions)\n      options[key] = updateLineOptions(options[key] ? options[key] : { style: {} }, updateOptions[key]);\n  });\n  return options;\n}\n\n/**\n * Updates DiagramSounding-Options with visibility and style.\n * \n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   options - Current options.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   updateOptions - Some new options.\n * @returns {module:meteoJS/thermodynamicDiagram~lineOptions}\n *   New options object.\n * @private\n */\nfunction updateLineOptions(options, updateOptions) {\n  if ('visible' in updateOptions)\n    options.visible = updateOptions.visible;\n  if ('style' in updateOptions) {\n    ['color', 'width', 'opacity',  'linecap',  'linejoin',  'dasharray']\n      .forEach(styleKey => {\n        if (styleKey in updateOptions.style)\n          options.style[styleKey] = updateOptions.style[styleKey];\n      });\n  }\n  return options;\n}","/**\n * @module meteoJS/thermodynamicDiagramPluggable\n */\nimport { SVG } from '@svgdotjs/svg.js';\nimport Collection from './base/Collection.js';\nimport DiagramSounding from './thermodynamicDiagram/DiagramSounding.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagramPluggable~options\n * @param {external:HTMLElement} [renderTo] - Element to render diagram into.\n * @param {integer} [width=undefined] - Width of the whole container.\n * @param {integer} [height=undefined] - Height of the whole container.\n */\n\n/**\n * Class to draw a SVG thermodynamic diagram.\n * \n * <pre><code>import ThermodynamicDiagramPluggable from 'meteoJS/thermodynamicDiagramPluggable';</code></pre>\n * \n * @extends module:meteoJS/base/collection.Collection\n */\nexport class ThermodynamicDiagramPluggable extends Collection {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram~options} options - Options.\n   */\n  constructor({\n    renderTo = undefined,\n    width = undefined,\n    height = undefined\n  } = {}) {\n    super({\n      fireReplace: false,\n      fireAddRemoveOnReplace: true,\n      emptyObjectMaker: () => new DiagramSounding()\n    });\n    \n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._svgNode =\n      (renderTo === undefined || 'node' in renderTo || 'instance' in renderTo)\n        ? SVG(renderTo) : SVG().addTo(renderTo);\n    if (width !== undefined ||\n        height !== undefined)\n      this._svgNode.size(width, height);\n    else if (width === undefined &&\n             height === undefined &&\n             renderTo !== undefined &&\n             'getBoundingClientRect' in renderTo) {\n      let boundingRect = renderTo.getBoundingClientRect(); // size incl. padding\n      let computedStyle = window.getComputedStyle(renderTo);\n      this._svgNode.size(\n        boundingRect.width -\n        parseFloat(computedStyle.getPropertyValue('padding-left')) -\n        parseFloat(computedStyle.getPropertyValue('padding-right')),\n        boundingRect.height - \n        parseFloat(computedStyle.getPropertyValue('padding-top')) -\n        parseFloat(computedStyle.getPropertyValue('padding-bottom'))\n      );\n    }\n    \n    /**\n     * @type Set.<module:meteoJS/thermodynamicDiagram/plotArea.PlotArea>\n     * @private\n     */\n    this._plotAreas = new Set();\n    \n    // PlotAltitudeDataArea objects\n    this._svgNode.on('mousemove', e => {\n      for (let plotArea of this._plotAreas)\n        if ('isHoverLabelsRemote' in plotArea)\n          plotArea.svgNode.dispatchEvent(e);\n    });\n    this._svgNode.on('mouseout', e => {\n      if (this._svgNode.node === e.target)\n        for (let plotArea of this._plotAreas)\n          if ('_hoverLabelsGroup' in plotArea)\n            plotArea._hoverLabelsGroup.clear();\n    });\n    \n    // PlotDataArea objects\n    this.on('add:item', sounding => {\n      for (let plotArea of this._plotAreas)\n        if ('addSounding' in plotArea)\n          plotArea.addSounding(sounding);\n    });\n    this.on('remove:item', sounding => {\n      for (let plotArea of this._plotAreas)\n        if ('removeSounding' in plotArea)\n          plotArea.removeSounding(sounding);\n    });\n  }\n\n  /**\n   * SVG object of the complete diagram.\n   * \n   * @type external:SVG\n   * @readonly\n   */\n  get svgNode() {\n    return this._svgNode;\n  }\n  \n  /**\n   * Appends a PlotArea object to this thermodynamic diagram.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/plotArea.PlotArea} plotArea\n   *   PlotArea object.\n   * @returns {module:meteoJS/thermodynamicDiagramPluggable.ThermodynamicDiagramPluggable}\n   *   This.\n   */\n  appendPlotArea(plotArea) {\n    if (this._plotAreas.has(plotArea))\n      return;\n    \n    this._plotAreas.add(plotArea);\n    \n    plotArea.addTo(this.svgNode);\n    for (let sounding of this)\n      if ('addSounding' in plotArea)\n        plotArea.addSounding(sounding);\n    \n    return this;\n  }\n  \n  /**\n   * Removes a PlotArea object from this thermodynamic diagram.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/plotArea.PlotArea} plotArea\n   *   PlotArea object.\n   * @returns {module:meteoJS/thermodynamicDiagramPluggable.ThermodynamicDiagramPluggable}\n   *   This.\n   */\n  removePlotArea(plotArea) {\n    if (!this._plotAreas.has(plotArea))\n      return;\n    \n    for (let sounding of this)\n      plotArea.removeSounding(sounding);\n    this._plotAreas.delete(plotArea);\n    \n    return this;\n  }\n  \n  /**\n   * Exchanges the coordinate system in the PlotArea objects. The optional,\n   * second argument defines an already used coordinate system. If this\n   * argument is passed, only the coordinate system of the PlotArea's with\n   * this coordinate system will exchanged.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem}\n   *   coordinateSystem - Coordinate system.\n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem}\n   *   [formerCoordinateSystem=undefined] - Coordinate system.\n   */\n  exchangeCoordinateSystem(\n    coordinateSystem,\n    formerCoordinateSystem = undefined\n  ) {\n    for (let plotArea of this._plotAreas)\n      if (formerCoordinateSystem === undefined ||\n          plotArea.coordinateSystem === formerCoordinateSystem)\n        plotArea.coordinateSystem = coordinateSystem;\n  }\n  \n  /**\n   * Add a sounding to the diagram.\n   * \n   * @param {module:meteoJS/sounding.Sounding} sounding - Sounding object.\n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding~options}\n   *   [options] - Display options.\n   * @returns {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   Sounding object for the diagram with display options.\n   */\n  addSounding(sounding, options = {}) {\n    let diagramSounding = new DiagramSounding(sounding, options);\n    let i = 1;\n    let id = `sounding-${i}`;\n    while (this.containsId(id)) {\n      i++;\n      id = `sounding-${i}`;\n    }\n    diagramSounding.id = id;\n    this.append(diagramSounding);\n    return diagramSounding;\n  }\n  \n}\nexport default ThermodynamicDiagramPluggable;","/**\n * @module meteoJS/thermodynamicDiagram/coordinateSystem\n */\nimport { tempCelsiusToKelvin,\n  tempByPotentialTempAndPres,\n  tempByEquiPotTempAndPres,\n  potentialTempByTempAndPres,\n  dewpointByHMRAndPres,\n  saturationHMRByTempAndPres } from '../calc.js';\nimport addEventFunctions from '../Events.js';\n\n/**\n * Options change event.\n * \n * @event module:meteoJS/thermodynamicDiagram/coordinateSystem#change:options\n */\n\n/**\n * Pressure options.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/coordinateSystem~pressureOptions\n * @property {number} [min=100] - Minimum pressure on the diagram.\n * @property {number} [max=1050] - Maximum pressure on the diagram.\n */\n\n/**\n * Temperature options.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/coordinateSystem~temperatureOptions\n * @property {number} [min=-40C]\n *   Temperature either on bottom-left on the diagram (if reference equals\n *   'base') or on the left of an isobar (if reference is a number).\n * @property {number} [max=45C]\n *   Temperature either on bottom-right on the diagram (if reference equals\n *   'base') or on the right of an isobar (if reference is a number).\n * @property {'base'|integer} [reference='base']\n *   Reference for 'min' and 'max' values. Allowed values: 'base' or number.\n * @property {integer} [inclinationAngle=45]\n *   Angle of inclination to the right of the isotherms. Allowed values between\n *   0 and 90 (exclusive), in degrees.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/coordinateSystem~options\n * @param {integer} [width=100] - Width of the diagram.\n * @param {integer} [height=100] - Height of the diagram.\n * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~pressureOptions}\n *   [pressure] - Pressure options.\n * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~temperatureOptions}\n *   [temperature] - Temperature options.\n */\n\n/**\n * Abstract class to specify the coordinate system of the thermodynamicDiagram.\n * \n * Child classes define the explicit coordinate system.\n * This class defines already: (can be overridden by child classes)\n * * log-P y-axes with horizontal isobars\n * * straight isotherms, inclinated to the right\n * \n * <pre><code>import CoordinateSystem from 'meteoJS/thermodynamicDiagram/CoordinateSystem';</code></pre>\n * \n * @abstract\n * @fires module:meteoJS/thermodynamicDiagram/coordinateSystem#change:options\n */\nexport class CoordinateSystem {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~options} options\n   */\n  constructor({\n    width = 100,\n    height = 100,\n    pressure = {},\n    temperature = {}\n  } = {}) {\n    /**\n     * @type integer\n     * @private\n     */\n    this._width = width;\n    \n    /**\n     * @type integer\n     * @private\n     */\n    this._height = height;\n    \n    /**\n     * @type number\n     * @private\n     */\n    this.temperatureBottomLeft;\n    \n    /**\n     * @type number\n     * @private\n     */\n    this.temperatureBottomRight;\n    \n    /**\n     * @type number\n     * @private\n     */\n    this.inclinationTan;\n    \n    /**\n     * @type Object\n     * @private\n     */\n    this.options = {\n      pressure: {},\n      temperature: {}\n    };\n    \n    this._initPressureOptions(pressure);\n    this._initTemperatureOptions(temperature);\n  }\n  \n  /**\n   * Visible width, in pixels.\n   * \n   * @type integer\n   * @public\n   */\n  get width() {\n    return this._width;\n  }\n  set width(width) {\n    const oldWidth = this._width;\n    this._width = width;\n    if (oldWidth != this._width)\n      this.trigger('change:options');\n  }\n  \n  /**\n   * Visible height, in pixels.\n   * \n   * @type integer\n   * @public\n   */\n  get height() {\n    return this._height;\n  }\n  set height(height) {\n    const oldHeight = this._height;\n    this._height = height;\n    if (oldHeight != this._height)\n      this.trigger('change:options');\n  }\n  \n  /**\n   * Returns if isobars are straight lines in the defined coordinate system.\n   * \n   * @returns {boolean}\n   */\n  isIsobarsStraightLine() {\n    return true;\n  }\n\n  /**\n   * Returns if the dry adiabats are straight lines\n   * in the defined coordinate system.\n   * \n   * @returns {boolean}\n   */\n  isDryAdiabatStraightLine() {\n    return false;\n  }\n  \n  /**\n   * @returns {boolean}\n   */\n  isIsothermsVertical() {\n    return (this.options.temperature.inclinationAngle !== undefined) &&\n         (this.options.temperature.inclinationAngle == 0);\n  }\n\n  /**\n   * Pressure for a x-y coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} y - Pixels from bottom.\n   * @returns {number} Pressure in hPa.\n   */\n  getPByXY(x, y) {\n    return Math.pow(this.options.pressure.min, y / this.height) *\n         Math.pow(this.options.pressure.max,\n           (this.height - y)/this.height);\n  }\n\n  /**\n   * Temperature for x-y coordinate.\n   * Implementation valid for straight isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} y - Pixels from bottom.\n   * @returns {number} Temperature in Kelvin.\n   */\n  getTByXY(x, y) {\n  // bottom x coordinate of isotherm\n    let x0 = x - y * this.inclinationTan;\n    return this.temperatureBottomLeft +\n    x0 *\n    (this.temperatureBottomRight-this.temperatureBottomLeft) / this.width;\n  }\n\n  /**\n   * y coordinate for pressure and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} p - Pressure in hPa.\n   * @returns {number} Pixels from bottom.\n   */\n  getYByXP(x, p) {\n    return this.height *\n    Math.log(this.options.pressure.max / p) /\n    Math.log(this.options.pressure.max / this.options.pressure.min);\n  }\n\n  /**\n   * Temperature for pressure and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} p - Pressure in hPa.\n   * @returns {number} Temperature in Kelvin.\n   */\n  getTByXP(x, p) {\n    return this.getTByXY(x, this.getYByXP(x, p));\n  }\n\n  /**\n   * x coordinate for temperature and y coordinate.\n   * Implementation valid for straight isotherms.\n   * \n   * @param {number} y - Pixels from bottom.\n   * @param {number} T - Temperature in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByYT(y, T) {\n  // bottom x coordinate \n    let x0 =\n    (T-this.temperatureBottomLeft) *\n    this.width / (this.temperatureBottomRight-this.temperatureBottomLeft);\n    return x0 + y * this.inclinationTan;\n  }\n\n  /**\n   * y coordinate for temperature and x coordinate.\n   * Implementation valid for straight isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} T - Temperature in Kelvin.\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByXT(x, T) {\n    return (this.inclinationTan != 0) ?\n      (x - this.getXByYT(0, T)) / this.inclinationTan :\n      undefined;\n  }\n\n  /**\n   * x coordinate for pressure and temperature.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} T - Temperature in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByPT(p, T) {\n    return this.getXByYT(this.getYByXP(0, p), T);\n  }\n\n  /**\n   * y coordinate for pressure and temperature.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} T - Temperature in Kelvin.\n   * @returns {number} Pixels from bottom.\n   */\n  getYByPT(p) {\n    return this.getYByXP(0, p);\n  }\n\n  /**\n   * x coordinate for potential temperature and y coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} y - Pixels from bottom.\n   * @param {number} T - Potential temperature in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByYPotentialTemperature(y, T) {\n    T = tempByPotentialTempAndPres(T, this.getPByXY(0, y));\n    return this.getXByYT(y, T);\n  }\n\n  /**\n   * y coordinate for potential temperature and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} T - Potential temperature in Kelvin.\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByXPotentialTemperature(x, T) {\n    let a = this.getPByXY(x, 0);\n    let b = this.getPByXY(x, this.height);\n    if (potentialTempByTempAndPres(this.getTByXP(x, b), b) < T ||\n      T < potentialTempByTempAndPres(this.getTByXP(x, a), a))\n      return undefined;\n    while (a-b > 10) {\n      let p = b+(a-b)/2;\n      let tBin = this.getTByXP(x, p);\n      let potTemp = potentialTempByTempAndPres(tBin, p);\n      if (potTemp === undefined)\n        return undefined;\n      if (potTemp < T)\n        a = p;\n      else\n        b = p;\n    }\n    let y = this.getYByXP(x, b+(a-b)/2);\n    return y;\n  }\n\n  /**\n   * x coordinate for pressure and potential temperature.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} T - Potential temperature in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByPPotentialTemperatur(p, T) {\n    T = tempByPotentialTempAndPres(T, p);\n    return this.getXByPT(p, T);\n  }\n\n  /**\n   * y coordinate for pressure and potential temperature.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} T - Potential temperature in Kelvin.\n   * @returns {number} Pixels from bottom.\n   */\n  getYByPPotentialTemperatur(p, T) {\n    let x = this.getXByPPotentialTemperatur(p, T);\n    return this.getYByXPotentialTemperature(x, T);\n  }\n\n  /**\n   * x coordinate for humid mixing ratio and y coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} y - Pixels from bottom.\n   * @param {number} hmr - Humid mixing ratio. []\n   * @returns {number} Pixels from the left.\n   */\n  getXByYHMR(y, hmr) {\n    let p = this.getPByXY(0, y); // horizontal isobars\n    return this.getXByYT(y, dewpointByHMRAndPres(hmr, p));\n  }\n\n  /**\n   * y coordinate for humid mixing ratio and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} hmr - Humid mixing ratio. []\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByXHMR(x, hmr) {\n    let a = this.getPByXY(x, 0);\n    let b = this.getPByXY(x, this.height);\n    while (a-b > 10) {\n      let p = b+(a-b)/2;\n      let hmrp = saturationHMRByTempAndPres(this.getTByXP(x, p), p);\n      if (hmrp === undefined)\n        return undefined;\n      if (hmrp < hmr)\n        b = p;\n      else\n        a = p;\n    }\n    let y = this.getYByXP(x, b+(a-b)/2);\n    return y;\n  }\n\n  /**\n   * x coordinate for pressure and humid mixing ratio.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} hmr - Humid mixing ratio. []\n   * @returns {number} Pixels from the left.\n   */\n  getXByPHMR(p, hmr) {\n    let dewpoint = dewpointByHMRAndPres(hmr, p);\n    return this.getXByPT(p, dewpoint);\n  }\n\n  /**\n   * y coordinate for pressure and humid mixing ratio.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} hmr - Humid mixing ratio. []\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByPHMR(p, hmr) {\n    let dewpoint = dewpointByHMRAndPres(hmr, p);\n    return this.getYByPT(p, dewpoint);\n  }\n\n  /**\n   * x coordinate for equipotential temperature and y coordainte.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} y - Pixels from bottom.\n   * @param {number} thetae - Equipotential temperaturen in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByYEquiPotTemp(y, thetae) {\n    let T = tempByEquiPotTempAndPres(thetae, this.getPByXY(0, y));\n    return this.getXByYT(y, T);\n  }\n\n  /**\n   * y coordinate for equipotential temperature and x coordinate.\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} x - Pixels from the left.\n   * @param {number} thetae - Equipotential temperaturen in Kelvin.\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByXEquiPotTemp(x, thetae) {\n    let a = 0;\n    let b = this.height;\n    let y = undefined;\n    while (b-a > 10) {\n      y = a+(b-a)/2;\n      let thetaEY =\n      this.getYByXT(x,\n        tempByEquiPotTempAndPres(thetae, this.getPByXY(x, y)));\n      if (thetaEY === undefined)\n        return undefined;\n      if (thetaEY < thetae)\n        b = y;\n      else\n        a = y;\n    }\n    return y;\n  }\n\n  /**\n   * x coordinate for pressure and equipotential temperature .\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} thetae - Equipotential temperaturen in Kelvin.\n   * @returns {number} Pixels from the left.\n   */\n  getXByPEquiPotTemp(p, thetae) {\n    let T = tempByEquiPotTempAndPres(thetae, p);\n    return this.getXByPT(p, T);\n  }\n\n  /**\n   * y coordinate for pressure and equipotential temperature .\n   * Implementation valid for horizontal isobars, log-P y-axes and straight\n   * isotherms.\n   * \n   * @param {number} p - Pressure in hPa.\n   * @param {number} thetae - Equipotential temperaturen in Kelvin.\n   * @returns {number|undefined} Pixels from bottom.\n   */\n  getYByPEquiPotTemp(p, thetae) {\n    let T = tempByEquiPotTempAndPres(thetae, p);\n    return this.getYByPT(p, T);\n  }\n  \n  /**\n   * Updates options. To restore a default value, pass undefined.\n   * \n   * @param {Object} [options] - Options.\n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~pressureOptions}\n   *   [options.pressure] - Pressure options.\n   * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem~temperatureOptions}\n   *   [options.temperature] - Temperature options.\n   */\n  update({\n    pressure = {},\n    temperature = {}\n  } = {}) {\n    if ('min' in pressure)\n      this.options.pressure.min =\n        (pressure.min === undefined) ? 100 : pressure.min;\n    if ('max' in pressure)\n      this.options.pressure.max =\n        (pressure.max === undefined) ? 1000 : pressure.max;\n    \n    if ('min' in temperature)\n      this.options.temperature.min =\n        (temperature.min === undefined)\n          ? tempCelsiusToKelvin(-40) : temperature.min;\n    if ('max' in temperature)\n      this.options.temperature.max =\n        (temperature.max === undefined)\n          ? tempCelsiusToKelvin(-45) : temperature.max;\n    if ('reference' in temperature)\n      this.options.temperature.reference =\n        (temperature.reference === undefined) ? 'base' : temperature.reference;\n    if ('inclinationAngle' in temperature)\n      this.options.temperature.inclinationAngle =\n        (temperature.inclinationAngle === undefined)\n          ? 45 : temperature.inclinationAngle;\n    \n    this._normalizeTemperatureRange();\n    \n    this.trigger('change:options');\n  }\n  \n  /**\n   * @private\n   */\n  _initPressureOptions({\n    min = 100,\n    max = 1050\n  }) {\n    this.options.pressure = {\n      min,\n      max\n    };\n  }\n  \n  /**\n   * @private\n   */\n  _initTemperatureOptions({\n    min = tempCelsiusToKelvin(-40),\n    max = tempCelsiusToKelvin(45),\n    reference = 'base',\n    inclinationAngle = 45\n  }) {\n    this.options.temperature = {\n      min,\n      max,\n      reference,\n      inclinationAngle\n    };\n    \n    this._normalizeTemperatureRange();\n  }\n  \n  /**\n   * @internal\n   */\n  _normalizeTemperatureRange() {\n    this.temperatureBottomLeft = this.options.temperature.min;\n    this.temperatureBottomRight = this.options.temperature.max;\n    this.inclinationTan =\n    (this.options.temperature.inclinationAngle == 45) ?\n      1 :\n      (this.options.temperature.inclinationAngle == 0) ?\n        0 :\n        Math.tan(this.options.temperature.inclinationAngle * Math.PI/180);\n    \n    // specific pressure level for temperature range\n    if (/^[0-9]+$/.test(this.options.temperature.reference)) {\n      let yReference = this.getYByXP(0, this.options.temperature.reference);\n      let xTmin = this.inclinationTan * yReference;\n      let deltaT =\n      (this.temperatureBottomRight - this.temperatureBottomLeft) /\n      this.width;\n      this.temperatureBottomLeft += deltaT * xTmin;\n      this.temperatureBottomRight += deltaT * xTmin;\n    }\n  }\n}\naddEventFunctions(CoordinateSystem.prototype);\nexport default CoordinateSystem;","/**\n * @module meteoJS/thermodynamicDiagram/coordinateSystem/stueveDiagram\n */\n\nimport CoordinateSystem from '../CoordinateSystem.js';\n\nconst k = 0.2857;\n\n/**\n * Coordinate system for a Stve-Diagram. Straight lines:\n * * pressure/isobars (horizontal)\n * * temperature/isotherms (vertical)\n * * potential temperature/dry adiabats\n * \n * y-Axes in exponential Scale: p^k (k = 0.2857), thus dry adiabats are\n * straight lines (M. K. Yau and R. R. Rogers, Short Course in Cloud Physics,\n * Third Edition, published by Butterworth-Heinemann, pp. 8).\n * \n * @see {@link https://en.wikipedia.org/wiki/St%C3%BCve_diagram}\n * @extends module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n */\nexport class StueveDiagram extends CoordinateSystem {\n\n  /**\n   * @inheritdoc\n   */\n  constructor({\n    width = 100,\n    height = 100,\n    pressure = {},\n    temperature = {}\n  } = {}) {\n    // vertical isotherms\n    temperature.inclinationAngle = 0;\n    \n    super({\n      width,\n      height,\n      pressure,\n      temperature\n    });\n  }\n  \n  /**\n   * @inheritdoc\n   */\n  isDryAdiabatStraightLine() {\n    return true;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  getPByXY(x, y) {\n    return Math.pow(\n      Math.pow(this.options.pressure.max, k) -\n      y *\n      (Math.pow(this.options.pressure.max, k) -\n       Math.pow(this.options.pressure.min, k)) /\n      this.height,\n      1/k);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  getYByXP(x, p) {\n    return this.height *\n    (Math.pow(this.options.pressure.max, k) - Math.pow(p, k)) /\n    (Math.pow(this.options.pressure.max, k) -\n     Math.pow(this.options.pressure.min, k));\n  }\n\n  /**\n   * @inheritdoc\n   */\n  getYByXT() {\n    return undefined;\n  }\n\n}\nexport default StueveDiagram;","/**\n * @module meteoJS/thermodynamicDiagram/coordinateSystem/emagram\n */\nimport CoordinateSystem from '../CoordinateSystem.js';\n\n/**\n * Coordinate system for an emagram. This diagram has straight lines:\n * Straight lines:\n * * pressure/isobars (horizontal)\n * * temperature/isotherms (vertical)\n * \n * @see {@link https://en.wikipedia.org/wiki/Emagram}\n * @extends module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n */\nexport class Emagram extends CoordinateSystem {\n  \n  /**\n   * @inheritdoc\n   */\n  constructor({\n    width = 100,\n    height = 100,\n    pressure = {},\n    temperature = {}\n  } = {}) {\n    // vertical isotherms\n    temperature.inclinationAngle = 0;\n    \n    super({\n      width,\n      height,\n      pressure,\n      temperature\n    });\n  }\n\n}\nexport default Emagram;","/**\n * @module meteoJS/thermodynamicDiagram/coordinateSystem/skewTlogPDiagram\n */\nimport CoordinateSystem from '../CoordinateSystem.js';\n\n/**\n * Coordinate system for a skew-T-log-P diagram. This diagram has straight lines:\n * * pressure/isobars (horizontal)\n * * temperature/isotherms (normally 45 degree inclination to the right)\n * \n * @extends module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n */\nexport class SkewTlogPDiagram extends CoordinateSystem {\n}\nexport default SkewTlogPDiagram;","/**\n * @module meteoJS/thermodynamicDiagram/plotArea\n */\nimport addEventFunctions from '../Events.js';\nimport { SVG } from '@svgdotjs/svg.js';\n\n/**\n * Event with a sounding object.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/plotArea~backgroundEvent\n * @property {external:SVG} node\n *   SVG node which contains the background nodes.\n */\n\n/**\n * Fired before creating the background.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotArea#prebuild:background\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~backgroundEvent}\n */\n\n/**\n * Fired after creating the background.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotArea#postbuild:background\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~backgroundEvent}\n */\n\n/**\n * Object passed on events.\n * \n * @typedef {external:Event} module:meteoJS/thermodynamicDiagram/plotArea~event\n * @property {number} elementX - X coordinate.\n * @property {number} elementY - Y coordinate.\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#click\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#dblclick\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mousedown\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mouseup\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mouseover\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mouseout\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#mousemove\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchstart\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchmove\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchleave\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchend\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/plotArea#touchcancel\n * @type {module:meteoJS/thermodynamicDiagram/plotArea~event}\n */\n\n/**\n * Events options. On event a\n * {@link module:meteoJS/thermodynamicDiagram/plotArea~event}\n * is passed to the listener.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/plotArea~eventsOptions\n * @property {Function} [click] - Click listener.\n * @property {Function} [dblclick] - Dblclick listener.\n * @property {Function} [mousedown] - Mousedown listener.\n * @property {Function} [mouseup] - Mouseup listener.\n * @property {Function} [mouseover] - Mouseover listener.\n * @property {Function} [mouseout] - Mouseout listener.\n * @property {Function} [mousemove] - Mousemove listener.\n * @property {Function} [touchstart] - Touchstart listener.\n * @property {Function} [touchmove] - Touchmove listener.\n * @property {Function} [touchleave] - Touchleave listener.\n * @property {Function} [touchend] - Touchend listener.\n * @property {Function} [touchcancel] - Touchcancel listener.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/plotArea~options\n * @param {external:SVG} [svgNode] - SVG Node.\n * @param {integer} [x=0] - X.\n * @param {integer} [y=0] - Y.\n * @param {integer} [width=100] - Width.\n * @param {integer} [height=100] - Height.\n * @param {Object} [style] - SVG-Style for this Area. Default: overflow=hidden.\n * @param {boolean} [visible=true] - Visibility.\n * @param {module:meteoJS/thermodynamicDiagram/plotArea~eventsOptions}\n *   [events] - Events.\n */\n\n/**\n * Abstract class to define an area on the SVG.\n * \n * <pre><code>import PlotArea from 'meteoJS/thermodynamicDiagram/PlotArea';</code></pre>\n * \n * @fires module:meteoJS/thermodynamicDiagram/plotArea#change:visible\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#change:position\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#change:extent\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#prebuild:background\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#postbuild:background\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#click\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#dblclick\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mousedown\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mouseup\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mouseover\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mouseout\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#mousemove\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchstart\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchmove\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchleave\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchend\n * @fires module:meteoJS/thermodynamicDiagram/plotArea#touchcancel\n */\nexport class PlotArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/plotArea~options}\n   *   options - Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n    style = {},\n    visible = true,\n    events = {}\n  } = {}) {\n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._svgNode = SVG()\n      .attr({\n        x,\n        y,\n        width,\n        height\n      })\n      .css(this._getNormalizedStyle(style))\n      .css('display', visible ? 'inline' : 'none');\n    if (svgNode !== undefined)\n      this.addTo(svgNode);\n    \n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._svgNodeBackground = this._svgNode.group();\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._visible = visible;\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n     * @private\n     */\n    this._coordinateSystem = coordinateSystem;\n    \n    /**\n     * @type mixed\n     * @private\n     */\n    this._coordinateSystemListenerKey = (this._coordinateSystem !== undefined)\n      ? this._coordinateSystem\n        .on('change:options', () => this.onCoordinateSystemChange())\n      : undefined;\n    \n    this.on('change:extent', () => this.onCoordinateSystemChange());\n    \n    this._initEvents(events);\n  }\n  \n  /**\n   * SVG container node.\n   * \n   * @type external:SVG\n   * @public\n   * @readonly\n   */\n  get svgNode() {\n    return this._svgNode;\n  }\n  \n  /**\n   * Visibility of the area.\n   * \n   * @type boolean\n   * @public\n   */\n  get visible() {\n    return this._visible;\n  }\n  set visible(visible) {\n    let oldVisible = this._visible;\n    this._visible = visible;\n    if (oldVisible != this._visible) {\n      this._svgNode.style('display', this._visible ? 'inline' : 'none');\n      this.trigger('change:visible');\n    }\n  }\n  \n  /**\n   * X of the top-left edge.\n   * \n   * @type integer\n   * @public\n   */\n  get x() {\n    return this._svgNode.attr('x');\n  }\n  set x(x) {\n    this._svgNode.attr({ x });\n    this.trigger('change:position');\n  }\n  \n  /**\n   * Y of the top-left edge.\n   * \n   * @type integer\n   * @public\n   */\n  get y() {\n    return this._svgNode.attr('y');\n  }\n  set y(y) {\n    this._svgNode.attr({ y });\n    this.trigger('change:position');\n  }\n  \n  /**\n   * Width of the area.\n   * \n   * @type integer\n   * @public\n   */\n  get width() {\n    return this._svgNode.attr('width');\n  }\n  set width(width) {\n    this._svgNode.attr({ width });\n    this.trigger('change:extent');\n  }\n  \n  /**\n   * Height of the area.\n   * \n   * @type integer\n   * @public\n   */\n  get height() {\n    return this._svgNode.attr('height');\n  }\n  set height(height) {\n    this._svgNode.attr({ height });\n    this.trigger('change:extent');\n  }\n  \n  /**\n   * Overflow-style of the area.\n   * \n   * @type string\n   * @public\n   */\n  get style() {\n    return this._svgNode.css();\n  }\n  set style(style) {\n    this._svgNode.css(style);\n  }\n  \n  /**\n   * Coordinate system.\n   * \n   * @type module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n   * @public\n   */\n  get coordinateSystem() {\n    return this._coordinateSystem;\n  }\n  set coordinateSystem(coordinateSystem) {\n    if (this._coordinateSystemListenerKey !== undefined)\n      this._coordinateSystem\n        .un('change:options', this._coordinateSystemListenerKey);\n    this._coordinateSystem = coordinateSystem;\n    this._coordinateSystemListenerKey =\n      this._coordinateSystem\n        .on('change:options', () => this.onCoordinateSystemChange());\n    this.onCoordinateSystemChange();\n  }\n  \n  /**\n   * Minimal extent length (either width or height).\n   * \n   * @type integer\n   * @readonly\n   */\n  get minExtentLength() {\n    return Math.min(this.width, this.height);\n  }\n  \n  /**\n   * Maximal extent length (either width or height).\n   * \n   * @type integer\n   * @readonly\n   */\n  get maxExtentLength() {\n    return Math.max(this.width, this.height);\n  }\n  \n  /**\n   * Sets the plot area as a child of the argument.\n   * \n   * @param {external:SVG} svgNode - SVG node.\n   */\n  addTo(svgNode) {\n    this._svgNode.addTo(svgNode);\n  }\n  \n  /**\n   * Init the area.\n   * \n   * @protected\n   */\n  init() {\n    this.onCoordinateSystemChange();\n  }\n  \n  /**\n   * Called, when the coordinateSystem object changes.\n   * \n   * @protected\n   */\n  onCoordinateSystemChange() {\n    if (this._coordinateSystem !== undefined)\n      this.drawBackground(this._svgNodeBackground);\n  }\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * This method is only called, when this.coordinateSystem isn't undefined.\n   * \n   * @param {external:SVG} svgNode - SVG group, SVG.G.\n   * @protected\n   */\n  drawBackground(svgNode) {\n    svgNode.clear();\n    this.trigger('prebuild:background', { node: svgNode });\n    this._drawBackground(svgNode);\n    this.trigger('postbuild:background', { node: svgNode });\n  }\n  \n  /**\n   * Method to inherit from child classes to draw the background of the plot\n   * area.\n   * \n   * This method is only called, when this.coordinateSystem isn't undefined.\n   * \n   * @param {external:SVG} svgNode - SVG group, SVG.G.\n   * @protected\n   */\n  _drawBackground() {}\n  \n  /**\n   * Returns normalized SVG style.\n   * \n   * @private\n   * @param {Object} style - Input SVG style.\n   * @param {string} [style.overflow='hidden'] - Overflow style.\n   * @returns {Object} - SVG style.\n   */\n  _getNormalizedStyle({\n    overflow = 'hidden'\n  }) {\n    return {\n      overflow\n    };\n  }\n  \n  /**\n   * Initialize events.\n   * \n   * @param {Object} options - Options.\n   * @private\n   */\n  _initEvents({\n    click = undefined,\n    dblclick = undefined,\n    mousedown = undefined,\n    mouseup = undefined,\n    mouseover = undefined,\n    mouseout = undefined,\n    mousemove = undefined,\n    touchstart = undefined,\n    touchmove = undefined,\n    touchleave = undefined,\n    touchend = undefined,\n    touchcancel = undefined\n  }) {\n    const events = {\n      click,\n      dblclick,\n      mousedown,\n      mouseup,\n      mouseover,\n      mouseout,\n      mousemove,\n      touchstart,\n      touchmove,\n      touchleave,\n      touchend,\n      touchcancel\n    };\n    Object.keys(events).forEach(eventKey => {\n      this._svgNode.on(eventKey, e => {\n        const customEvent =\n          this.getExtendedEvent(e,\n            this._svgNode.point(\n              e.pageX - window.pageXOffset,\n              e.pageY - window.pageYOffset));\n        if (events[eventKey] !== undefined)\n          events[eventKey].call(this, customEvent);\n        this.trigger(eventKey, customEvent);\n      });\n    });\n  }\n  \n  /**\n   * Extend an event with some properties.\n   * \n   * @param {external:Event} e - Event.\n   * @param {external:SVG} p - Point.\n   * @protected\n   */\n  getExtendedEvent(e, p) {\n    e.elementX = p.x;\n    e.elementY = p.y;\n    return e;\n  }\n}\naddEventFunctions(PlotArea.prototype);\nexport default PlotArea;","/**\n * @module meteoJS/thermodynamicDiagram/plotDataArea\n */\nimport PlotArea from './PlotArea.js';\n\n/**\n * Event with a sounding object.\n * \n * @typedef {Object} module:meteoJS/thermodynamicDiagram/plotDataArea~soundingEvent\n * @property {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Sounding.\n */\n\n/**\n * Fired on adding a sounding.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotDataArea#add:sounding\n * @type {module:meteoJS/thermodynamicDiagram/plotDataArea~soundingEvent}\n */\n\n/**\n * Fired on removing a sounding.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotDataArea#remove:sounding\n * @type {module:meteoJS/thermodynamicDiagram/plotDataArea~soundingEvent}\n */\n\n/**\n * Event with a sounding object and its SVG node.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotDataArea~soundingEvent}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~insertSoundingEvent\n * @property {external:SVG} node - SVG node, SVG.G.\n */\n\n/**\n * Fired before inserting the sounding data into the svg.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotDataArea#preinsert:sounding\n * @type {module:meteoJS/thermodynamicDiagram/plotDataArea~insertSoundingEvent}\n */\n\n/**\n * Fired after inserting the sounding data into the svg.\n * \n * @event module:meteoJS/thermodynamicDiagram/plotDataArea#postinsert:sounding\n * @type {module:meteoJS/thermodynamicDiagram/plotDataArea~insertSoundingEvent}\n */\n\n/**\n * Visibility of the sounding in an area.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~getSoundingVisibility\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Sounding to determine its visibility.\n * @returns {boolean} Visibility.\n */\n\n/**\n * Returns x and y coordinates in the Plot-Area for the passed levelData.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~getCoordinatesByLevelData\n * @param {string} dataGroupId - Data group id.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Corresponding sounding.\n * @param {module:meteoJS/sounding~levelData}\n *   levelData - Level data of the sounding.\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea.PlotDataArea}\n *   plotArea - Plot-Area.\n * @returns {Object} - Containing x and y.\n */\n\n/**\n * Draws data into a SVG node.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~insertDataGroupInto\n * @param {external:SVG} svgNode - Insert sounding data into this SVG node.\n * @param {string} dataGroupId - Data group id.\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Corresponding sounding.\n * @param {Object[]}\n *   data - Data of the sounding, containing x and y coordinates and levelData.\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea.PlotDataArea}\n *   plotArea - Plot-Area.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotArea~options}\n *   module:meteoJS/thermodynamicDiagram/plotDataArea~options\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea~getSoundingVisibility} [getSoundingVisibility]\n *   Takes a sounding object and returns the visibility for the area.\n * @param {string[]} [dataGroupIds=[]] - IDs of several grouped datas.\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea~getCoordinatesByLevelData}\n *   [getCoordinatesByLevelData] - Coordinate function.\n * @param {module:meteoJS/thermodynamicDiagram/plotDataArea~insertDataGroupInto}\n *   [insertDataGroupInto] - SVG drawing function.\n */\n\n/**\n * Abstract class to define an area on the SVG with sounding data.\n * \n * <pre><code>import PlotDataArea from 'meteoJS/thermodynamicDiagram/PlotDataArea';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotArea.PlotArea\n * \n * @fires module:meteoJS/thermodynamicDiagram/plotDataArea#add:sounding\n * @fires module:meteoJS/thermodynamicDiagram/plotDataArea#remove:sounding\n * @fires module:meteoJS/thermodynamicDiagram/plotDataArea#prebuild:sounding\n * @fires module:meteoJS/thermodynamicDiagram/plotDataArea#postbuild:sounding\n */\nexport class PlotDataArea extends PlotArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/plotDataArea~options}\n   *   options - Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n    style = {},\n    visible = true,\n    events = {},\n    getSoundingVisibility = sounding => sounding.visible,\n    dataGroupIds = [],\n    getCoordinatesByLevelData = () => { return { x: undefined, y: undefined }; },\n    insertDataGroupInto = () => {}\n  } = {}) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events\n    });\n    \n    /**\n     * @type Function\n     * @private\n     */\n    this._getSoundingVisibility = getSoundingVisibility;\n    \n    /**\n     * @type string[]\n     * @private\n     */\n    this._dataGroupIds = dataGroupIds;\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/plotDataArea~getCoordinatesByLevelData\n     * @private\n     */\n    this._getCoordinatesByLevelData = getCoordinatesByLevelData;\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/plotDataArea~insertDataGroupInto\n     * @private\n     */\n    this._insertDataGroupInto = insertDataGroupInto;\n    \n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._svgNodeData = this.svgNode.group();\n    \n    /**\n     * Contains all soundings to draw as key. The value-object contains 3 items:\n     * group (SVG), listenerKeyVisible, listenerKeyOptions.\n     * \n     * @type Map.<module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding,Object>\n     * @private\n     */\n    this._soundings = new Map();\n  }\n  \n  /**\n   * Groups of different data to plot onto the plot area.\n   * \n   * @type string[]\n   * @readonly\n   */\n  get dataGroupIds() {\n    return this._dataGroupIds;\n  }\n  \n  /**\n   * Returns x and y coordinated of some sounding data.\n   * \n   * @type module:meteoJS/thermodynamicDiagram/plotDataArea~getCoordinatesByLevelData\n   * @readonly\n   */\n  get getCoordinatesByLevelData() {\n    return this._getCoordinatesByLevelData;\n  }\n  \n  /**\n   * Adds a sounding to draw into the area.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   */\n  addSounding(sounding) {\n    let group = this._svgNodeData.group();\n    const changeOptions = () => {\n      if (this.coordinateSystem !== undefined)\n        this.drawSounding(sounding, group);\n      this.onChangeSoundingVisibility(sounding, group);\n    };\n    let listenerKeyVisible = sounding.on('change:visible',\n      () => this.onChangeSoundingVisibility(sounding, group));\n    let listenerKeyOptions = sounding.on('change:options', changeOptions);\n    this._soundings.set(sounding, {\n      group,\n      listenerKeyVisible,\n      listenerKeyOptions\n    });\n    this.trigger('add:sounding', sounding);\n    changeOptions();\n  }\n  \n  /**\n   * Removes a sounding from the area.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   */\n  removeSounding(sounding) {\n    if (this._soundings.has(sounding)) {\n      this._soundings.get(sounding).group.remove();\n      sounding.un(this._soundings.get(sounding).listenerKeyVisible);\n      sounding.un(this._soundings.get(sounding).listenerKeyOptions);\n      this._soundings.delete(sounding);\n    }\n    this.trigger('remove:sounding', sounding);\n  }\n  \n  /**\n   * Called, when the coordinateSystem object changes.\n   * \n   * @override\n   */\n  onCoordinateSystemChange() {\n    super.onCoordinateSystemChange();\n    \n    if (this.coordinateSystem === undefined)\n      return;\n    \n    for (let sounding of this._soundings.keys())\n      this.drawSounding(sounding, this._soundings.get(sounding).group);\n  }\n  \n  /**\n   * Called, when a sounding changes its visibilty.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   * @param {external:SVG} group - SVG group, SVG.G.\n   * @protected\n   */\n  onChangeSoundingVisibility(sounding, group) {\n    group.css('display',\n      this._getSoundingVisibility(sounding) ? 'inline' : 'none');\n  }\n  \n  /**\n   * Draw the sounding into the SVG group.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding object.\n   * @param {external:SVG} group - SVG group, SVG.G.\n   * @protected\n   */\n  drawSounding(sounding, group) {\n    group.clear();\n    \n    this.trigger('preinsert:sounding', { sounding, node: group });\n    \n    const soundingGroup = group.group();\n    \n    let data = {};\n    sounding.sounding.getLevels().forEach(pres => {\n      const levelData = sounding.sounding.getData(pres);\n      \n      this._dataGroupIds.forEach(dataGroupId => {\n        if (!(dataGroupId in data))\n          data[dataGroupId] = [];\n        \n        const level = {\n          levelData,\n          x: undefined,\n          y: undefined\n        };\n        const {x, y} =\n          this._getCoordinatesByLevelData(dataGroupId,\n            sounding, level.levelData, this);\n        if (x === undefined &&\n            y === undefined)\n          return;\n        \n        level.x = x;\n        level.y = y;\n        data[dataGroupId].push(level);\n      });\n    });\n    \n    Object.keys(data).forEach(dataGroupId => {\n      if (data[dataGroupId].length > 0)\n        this._insertDataGroupInto(soundingGroup, dataGroupId,\n          sounding, data[dataGroupId], this);\n    });\n    \n    this.trigger('postinsert:sounding', { sounding, node: group });\n  }\n}\nexport default PlotDataArea;","/**\n * @module meteoJS/thermodynamicDiagram/plotAltitudeDataArea\n */\nimport PlotDataArea from './PlotDataArea.js';\n\n/**\n * Function to insert labels.\n * \n * @typedef {Function}\n *   module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~insertLabelsFunc\n * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n *   sounding - Diagram sounding to label.\n * @param {Object} levelData - Data to label.\n * @param {external:SVG} group - SVG group to insert labels.\n */\n\n/**\n * Options for labels on hovering the diagram.\n * \n * @typedef {Object}\n *   module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions\n * @property {boolean} [visible=true] - Visibility.\n * @property {string} [type='mousemove'] - Event type.\n * @property {boolean} [snapToData=true]\n *   Snap labels to data points.\n * @property {boolean} [remote=true]\n *   Show labels relative to the mouse position on the diagram, even when the\n *   pointer isn't directly on the plot area.\n * @property {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~insertLabelsFunc}\n *   [insertLabelsFunc] - Called to insert labels into a SVG group.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options\n * @param {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions}\n *   [hoverLabels] - Hover labels options.\n */\n\n/**\n * Abstract class to define an area on the SVG with sounding data, plotted with\n * pressure on the y-axis.\n * \n * <pre><code>import PlotAltitudeArea from 'meteoJS/thermodynamicDiagram/PlotAltitudeArea';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotDataArea.PlotDataArea\n */\nexport class PlotAltitudeDataArea extends PlotDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options}\n   *   options - Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n    style = {},\n    visible = true,\n    events = {},\n    hoverLabels = {},\n    getSoundingVisibility = sounding => sounding.visible,\n    dataGroupIds = undefined,\n    getCoordinatesByLevelData = undefined,\n    insertDataGroupInto = undefined\n  } = {}) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      getSoundingVisibility,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto\n    });\n    \n    /**\n     * @type external:SVG\n     * @private\n     */\n    this._hoverLabelsGroup = this.svgNode.group();\n    \n    /**\n     * @type boolean\n     * @private\n     */\n    this._isHoverLabelsRemote = true;\n    \n    this._initHoverLabels(hoverLabels);\n  }\n  \n  /**\n   * Called, when a sounding changes its visibilty.\n   * \n   * @override\n   */\n  onChangeSoundingVisibility(sounding, group) {\n    super.onChangeSoundingVisibility(sounding, group);\n    this._hoverLabelsGroup.clear();\n  }\n  \n  /**\n   * Draw the sounding into the SVG group.\n   * \n   * @override\n   */\n  drawSounding(sounding, group) {\n    super.drawSounding(sounding, group);\n    this._hoverLabelsGroup.clear();\n  }\n  \n  /**\n   * Extend an event with pressure.\n   * \n   * @override\n   */\n  getExtendedEvent(e, p) {\n    e = super.getExtendedEvent(e, p);\n    \n    e.diagramPres = undefined;\n    if (this.coordinateSystem !== undefined)\n      e.diagramPres =\n        this.coordinateSystem.getPByXY(0,\n          this.coordinateSystem.height - e.elementY);\n    \n    return e;\n  }\n  \n  /**\n   * Show also hover labels when mouse isn't over the area.\n   * \n   * @type boolean\n   * @readonly\n   */\n  get isHoverLabelsRemote() {\n    return this._isHoverLabelsRemote;\n  }\n  \n  get hoverLabelsSounding() {\n    // Wie \"manuell\" setzen?\n    for (let sounding of this._soundings.keys()) {\n      if (this._getSoundingVisibility(sounding))\n        return sounding;\n    }\n    return undefined;\n  }\n  \n  /**\n   * Initialize hover labels options.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions}\n   *   options - Hover labels options.\n   */\n  _initHoverLabels({\n    visible = true,\n    type = 'mousemove',\n    //snapToData = true,\n    remote = true,\n    insertLabelsFunc = undefined\n  }) {\n    this._isHoverLabelsRemote = remote;\n    \n    if (!visible ||\n        insertLabelsFunc === undefined)\n      return;\n    \n    this.on('change:extent', () => this._hoverLabelsGroup.clear());\n    this.on(type, e => {\n      if (!e.diagramPres)\n        return;\n      const hoverLabelsSounding = this.hoverLabelsSounding;\n      if (hoverLabelsSounding === undefined)\n        return;\n      \n      const sounding = hoverLabelsSounding.sounding;\n      insertLabelsFunc(hoverLabelsSounding,\n        sounding.getData(sounding.getNearestLevel(e.diagramPres)),\n        this._hoverLabelsGroup);\n    });\n  }\n}\nexport default PlotAltitudeDataArea;","/**\n * @module meteoJS/thermodynamicDiagram/tdDiagram\n */\nimport {\n  tempCelsiusToKelvin,\n  tempKelvinToCelsius,\n  potentialTempByTempAndPres,\n  saturationHMRByTempAndPres,\n  lclByPotentialTempAndHMR,\n  lclTemperatureByTempAndDewpoint,\n  equiPotentialTempByTempAndDewpointAndPres,\n  wetbulbTempByTempAndDewpointAndPres,\n  altitudeISAByPres\n} from '../calc.js';\nimport {\n  getNormalizedLineStyleOptions,\n  getNormalizedFontOptions,\n  getFirstDefinedValue,\n  drawTextInto\n} from './Functions.js';\nimport PlotAltitudeDataArea from './PlotAltitudeDataArea.js';\n\n/**\n * Object passed on events.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotArea~event}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~event\n * @property {number} p - Pressure coordinate [hPa].\n * @property {number} T - Temperature coordinate [K].\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#click\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#dblclick\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mousedown\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mouseup\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mouseover\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mouseout\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#mousemove\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchstart\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchmove\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchleave\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchend\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * @event module:meteoJS/thermodynamicDiagram/tdDiagram#touchcancel\n * @type {module:meteoJS/thermodynamicDiagram/tdDiagram~event}\n */\n\n/**\n * Options for pressure label.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~presLabelOptions\n * @property {string|Object} [fill]\n *   Fill option for background rect. Default is 'white' with opacity 0.7.\n * @property {number} [horizontalMargin=5] - Margin in x direction.\n * @property {number} [verticalMargin=0] - Margin in y direction.\n * @property {number|'100%'} [length=60]\n *   Length of the horizontal line. A number is in pixel unit. A string\n *   with a appended '%' indicates a length relative to the diagram width.\n * @property {'left'|'right'} [align='left']\n *   Align pressure label left/right in the diagram.\n */\n\n/**\n * Options for labels.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineTextOptions}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions\n * @property {string|Object} [fill]\n *   Fill option for background rect. Default is 'white' with opacity 0.7.\n * @property {number} [horizontalMargin=10] - Margin in x direction.\n * @property {number} [verticalMargin=0] - Margin in y direction.\n * @property {number} [radius=undefined] - Radius for hover circle.\n * @property {number} [radiusPlus=2]\n *   Radius relative to line width for hover circle.\n */\n\n/**\n * Options for labels on hovering the thermodynamic diagram.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~hoverLabelsOptions\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~presLabelOptions}\n *   [pres] - Options for pressure label.\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions}\n *   [temp] - Options for temperature label.\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions}\n *   [dewp] - Options for dew point label.\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions}\n *   [wetbulb] - Options for wetbulb temperature label.\n */\n\n/**\n * Options for parcels in the diagram.\n * \n * @typedef {Object}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~parcelsOptions\n * @property {boolean} [visible=true] - Visibility of parcels.\n */\n\n/**\n * Definition of lines in a thermodynamic diagram.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions\n * @property {undefined|Array<number>} [highlightedLines=undefined]\n *   Highlight lines at this values.\n * @property {undefined|Array<number>} [lines=undefined]\n *   Draw values for this values.\n * @property {number} [max=undefined]\n *   Maximum value for a line. Ignored if lines is set.\n * @property {number} [min=undefined]\n *   Minimum value for a line. Ignored if lines is set.\n * @property {number} [interval=undefined]\n *   Interval between different lines. Ignored if lines is set.\n * @property {number} [maxPressure=undefined]\n *   Start line from this maximum pressure.\n * @property {number} [minPressure=undefined]\n *   End line at this minimum pressure.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/tdDiagram~options\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [isobars] - Isobars configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [isotherms] - Isotherms configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [dryadiabats] - Dry adiabats configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [pseudoadiabats] - Pseudo adiabats configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions}\n *   [mixingratio] - Mixing ratio configuration.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~hoverLabelsOptions}\n *   [hoverLabels] - Hover labels options.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~parcelsOptions}\n *   [parcels] - Parcels options.\n */\n\n/**\n * Class to draw the real thermodynamic diagram.\n * \n * <pre><code>import TDDiagram from 'meteoJS/thermodynamicDiagram/TDDiagram';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea.PlotAltitudeDataArea\n * \n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#click\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#dblclick\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mousedown\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mouseup\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mouseover\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mouseout\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#mousemove\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchstart\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchmove\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchleave\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchend\n * @fires module:meteoJS/thermodynamicDiagram/tdDiagram#touchcancel\n */\nexport class TDDiagram extends PlotAltitudeDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~linesOptions} [options]\n   *   Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = 0,\n    y = 0,\n    width = 100,\n    height = 100,\n    style = {},\n    visible = true,\n    events = {},\n    dataGroupIds = ['temp', 'dewp', 'wetbulb'],\n    getCoordinatesByLevelData = (dataGroupId, sounding, levelData, plotArea) => {\n      if (levelData.pres === undefined)\n        return {};\n      \n      let value = undefined;\n      switch (dataGroupId) {\n      case 'temp':\n        value = levelData.tmpk;\n        break;\n      case 'dewp':\n        value = levelData.dwpk;\n        break;\n      case 'wetbulb':\n        value = wetbulbTempByTempAndDewpointAndPres(\n          levelData.tmpk,\n          levelData.dwpk,\n          levelData.pres\n        );\n        break;\n      }\n      if (value === undefined)\n        return {};\n      \n      return {\n        x: plotArea.coordinateSystem.getXByPT(levelData.pres, value),\n        y: plotArea.coordinateSystem.height -\n          plotArea.coordinateSystem.getYByPT(levelData.pres, value),\n        value: Math.round(tempKelvinToCelsius(value)*10)/10,\n        unit: ''\n      };\n    },\n    insertDataGroupInto = (svgNode, dataGroupId, sounding, data) => {\n      const options =\n        (dataGroupId in sounding.options.diagram)\n          ? sounding.options.diagram[dataGroupId].style : {};\n      svgNode.group()\n        .polyline(data.map(level => [ level.x, level.y ]))\n        .fill('none').stroke(options);\n    },\n    isobars = {},\n    isotherms = {},\n    dryadiabats = {},\n    pseudoadiabats = {},\n    mixingratio = {},\n    hoverLabels = {},\n    parcels = {}\n  } = {}) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      hoverLabels,\n      getSoundingVisibility:\n        sounding => sounding.visible && sounding.options.diagram.visible,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto\n    });\n    \n    this.options = {\n      isobars: getNormalizedDiagramLineOptions(isobars),\n      isotherms:\n        getNormalizedDiagramLineOptions(isotherms, {\n          highlightedLines: [tempCelsiusToKelvin(0)]\n        }),\n      dryadiabats:\n        getNormalizedDiagramLineOptions(dryadiabats),\n      pseudoadiabats:\n        getNormalizedDiagramLineOptions(pseudoadiabats, {\n          style: {\n            color: 'rgb(102, 51, 0)',\n            dasharray: 6\n          }\n        }),\n      mixingratio:\n        getNormalizedDiagramLineOptions(mixingratio, {\n          minPressure: 500,\n          style: {\n            color: 'rgb(102, 51, 0)',\n            dasharray: 2\n          }\n        })\n    };\n    \n    this.svgGroups = {\n      border: this._svgNodeBackground.group(),\n      isobars: this._svgNodeBackground.group(),\n      isotherms: this._svgNodeBackground.group(),\n      dryadiabats: this._svgNodeBackground.group(),\n      mixingratio: this._svgNodeBackground.group(),\n      pseudoadiabats: this._svgNodeBackground.group()\n    };\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/tdDiagram~parcelsOptions\n     * @private\n     */\n    this._parcelsOptions = parcels;\n    if (!('visible' in this._parcelsOptions))\n      this._parcelsOptions.visible = true;\n    \n    /**\n     * @type Map.<module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding, Object>\n     * @private\n     */\n    this._parcels = new Map();\n    this.on('add:sounding', sounding => {\n      this._parcels.set(sounding, {\n        parcelsGroup: undefined,\n        listenerKey: sounding.sounding.parcelCollection\n          .on('add:item', () => this.drawParcels(sounding))\n      });\n    });\n    this.on('remove:sounding', sounding => {\n      if (this._parcels.has(sounding))\n        sounding.sounding.parcelCollection\n          .un('add:item', this._parcels.get(sounding).listenerKey);\n      this._parcels.delete(sounding);\n    });\n    \n    this.init();\n  }\n  \n  /**\n   * Return the visibility of the isobars.\n   * @returns {boolean} Visibility of the isobars.\n   * @deprecated\n   */\n  getIsobarsVisible() {\n    return this.options.isobars.visible;\n  }\n  \n  /**\n   * Sets the visibility of the isobars.\n   * @param {boolean} visible Visibility of the isobars.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setIsobarsVisible(visible) {\n    this.options.isobars.visible = visible ? true : false;\n    this.plotIsobars();\n    return this;\n  }\n  \n  /**\n   * Return the visibility of the isotherms.\n   * @returns {boolean} Visibility of the isotherms.\n   * @deprecated\n   */\n  getIsothermsVisible() {\n    return this.options.isotherms.visible;\n  }\n  \n  /**\n   * Sets the visibility of the isotherms.\n   * @param {boolean} visible Visibility of the isotherms.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setIsothermsVisible(visible) {\n    this.options.isotherms.visible = visible ? true : false;\n    this.plotIsotherms();\n    return this;\n  }\n  \n  /**\n   * Return the visibility of the dry adiabats.\n   * @returns {boolean} Visibility of the dry adiabats.\n   * @deprecated\n   */\n  getDryadiabatsVisible() {\n    return this.options.dryadiabats.visible;\n  }\n  \n  /**\n   * Sets the visibility of the dry adiabats.\n   * @param {boolean} visible Visibility of the dry adiabats.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setDryadiabatsVisible(visible) {\n    this.options.dryadiabats.visible = visible ? true : false;\n    this.plotDryadiabats();\n    return this;\n  }\n  \n  /**\n   * Return the visibility of the pseudo adiabats.\n   * @returns {boolean} Visibility of the pseudo adiabats.\n   * @deprecated\n   */\n  getPseudoadiabatsVisible() {\n    return this.options.pseudoadiabats.visible;\n  }\n  \n  /**\n   * Sets the visibility of the pseudo adiabats.\n   * @param {boolean} visible Visibility of the pseudo adiabats.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setPseudoadiabatsVisible(visible) {\n    this.options.pseudoadiabats.visible = visible ? true : false;\n    this.plotPseudoadiabats();\n    return this;\n  }\n  \n  /**\n   * Return the visibility of the mixing ratio.\n   * @returns {boolean} Visibility of the mixing ratio.\n   * @deprecated\n   */\n  getMixingratioVisible() {\n    return this.options.mixingratio.visible;\n  }\n  \n  /**\n   * Sets the visibility of the mixing ratio.\n   * @param {boolean} visible Visibility of the mixing ratio.\n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} this.\n   * @deprecated\n   */\n  setMixingratioVisible(visible) {\n    this.options.mixingratio.visible = visible ? true : false;\n    this.plotMixingratio();\n    return this;\n  }\n  \n  /**\n   * Draw the sounding into the SVG group.\n   * \n   * @override\n   */\n  drawSounding(sounding, group) {\n    super.drawSounding(sounding, group);\n    \n    // Draw parcels\n    if (this._parcels.has(sounding)) {\n      let parcelsObj = this._parcels.get(sounding);\n      parcelsObj.parcelsGroup = group.group();\n      if (!sounding.options.parcels.visible)\n        parcelsObj.parcelsGroup.hide();\n      this._parcels.set(sounding, parcelsObj);\n    }\n    this.drawParcels(sounding);\n  }\n  \n  /**\n   * Draws parcels of a sounding.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Sounding.\n   */\n  drawParcels(sounding) {\n    if (!this._parcelsOptions.visible)\n      return;\n    if (!this._parcels.has(sounding))\n      return;\n    \n    const parcelsGroup = this._parcels.get(sounding).parcelsGroup;\n    parcelsGroup.clear();\n    for (let parcel of sounding.sounding.parcelCollection)\n      this.drawParcel(sounding, parcel, parcelsGroup.group());\n  }\n  \n  /**\n   * Draws a parcel lift.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/diagramSounding.DiagramSounding}\n   *   sounding - Corresponding sounding.\n   * @param {module:meteoJS/sounding/parcel.Parcel}\n   *   parcel - Parcel lift to draw.\n   * @param {external:SVG} group - SVG group to draw parcel into.\n   * @private\n   */\n  drawParcel(sounding, parcel, group) {\n    if (parcel.pres === undefined ||\n        parcel.tmpc === undefined ||\n        parcel.dwpc === undefined)\n      return;\n    \n    const pottmpk =\n      potentialTempByTempAndPres(tempCelsiusToKelvin(parcel.tmpc), parcel.pres);\n    const hmr =\n      saturationHMRByTempAndPres(tempCelsiusToKelvin(parcel.dwpc), parcel.pres);\n    const lclpres = lclByPotentialTempAndHMR(pottmpk, hmr);\n    const lcltmpk = lclTemperatureByTempAndDewpoint(\n      tempCelsiusToKelvin(parcel.tmpc),\n      tempCelsiusToKelvin(parcel.dwpc));\n    const lclthetaek = equiPotentialTempByTempAndDewpointAndPres(\n      lcltmpk, lcltmpk, lclpres);\n    \n    const options = sounding.getParcelOptions(parcel);\n    \n    // SVG groups\n    if (!options.visible)\n      group.hide();\n    const tempGroup = group.group();\n    if (!options.temp.visible)\n      tempGroup.hide();\n    let dewpGroup = group.group();\n    if (!options.dewp.visible)\n      dewpGroup.hide();\n    \n    // Draw temp curve\n    const yInterval = 10;\n    const y0 = this.coordinateSystem\n      .getYByPT(parcel.pres, tempCelsiusToKelvin(parcel.tmpc));\n    const x0 = this.coordinateSystem.getXByYPotentialTemperature(y0, pottmpk);\n    const y1 = this.coordinateSystem.getYByPPotentialTemperatur(lclpres, pottmpk);\n    const x1 = this.coordinateSystem.getXByYPotentialTemperature(y1, pottmpk);\n    let tempPolyline = [[x0, y0]];\n    if (!this.coordinateSystem.isDryAdiabatStraightLine())\n      for (let y=y0+yInterval; y<y1; y+=yInterval) {\n        tempPolyline.push([\n          this.coordinateSystem.getXByYPotentialTemperature(y, pottmpk),\n          y\n        ]);\n      }\n    tempPolyline.push([x1, y1]);\n    const y2 = this.coordinateSystem.height;\n    const x2 = this.coordinateSystem.getXByYEquiPotTemp(y2, lclthetaek);\n    for (let y=y1+yInterval; y<y2; y+=yInterval) {\n      tempPolyline.push([\n        this.coordinateSystem.getXByYEquiPotTemp(y, lclthetaek),\n        y\n      ]);\n    }\n    tempPolyline.push([x2, y2]);\n    tempGroup\n      .polyline(tempPolyline.map(point => {\n        point[1] = this.coordinateSystem.height - point[1];\n        return point;\n      }))\n      .fill('none')\n      .stroke(options.temp.style);\n    \n    // Draw mixing ratio curve\n    const x0dwp = this.coordinateSystem.getXByYHMR(y0, hmr);\n    const x1dwp = this.coordinateSystem.getXByYHMR(y1, hmr);\n    let dewpPolyline = [[x0dwp, y0]];\n    for (let y=y0+yInterval; y<y1; y+=yInterval) {\n      dewpPolyline.push([\n        this.coordinateSystem.getXByYHMR(y, hmr),\n        y\n      ]);\n    }\n    dewpPolyline.push([x1dwp, y1]);\n    dewpGroup\n      .polyline(dewpPolyline.map(point => {\n        point[1] = this.coordinateSystem.height - point[1];\n        return point;\n      }))\n      .fill('none')\n      .stroke(options.dewp.style);\n  }\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    super._drawBackground(svgNode);\n    \n    this.svgGroups = {\n      border: svgNode.group(),\n      isobars: svgNode.group(),\n      isotherms: svgNode.group(),\n      dryadiabats: svgNode.group(),\n      mixingratio: svgNode.group(),\n      pseudoadiabats: svgNode.group()\n    };\n    \n    // Rand des Diagramms\n    this.svgGroups.border.clear();\n    this.svgGroups.border\n      .rect(this.coordinateSystem.width, this.coordinateSystem.height)\n      .attr({stroke: 'black', 'stroke-width': 1, 'fill-opacity': 0});\n    \n    // Hilfelinien zeichnen\n    this.plotIsobars(true);\n    this.plotIsotherms(true);\n    this.plotDryadiabats(true);\n    this.plotPseudoadiabats(true);\n    this.plotMixingratio(true);\n  }\n   \n  /**\n   * @private\n   */\n  plotIsobars(redraw) {\n    let min = this.coordinateSystem.getPByXY(0, this.coordinateSystem.height);\n    let max = this.coordinateSystem.getPByXY(0, 0);\n    let delta = max - min;\n    this._plotLines(\n      this.svgGroups.isobars,\n      this.options.isobars,\n      {\n        min: min,\n        max: max,\n        interval: (delta > 500) ? 100 : (delta > 50) ? 10 : 1\n      },\n      p => {\n        let y = this.coordinateSystem.getYByXP(0, p);\n        return [[0, y], [this.coordinateSystem.width, y]];\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  plotIsotherms(redraw) {\n    let min = tempKelvinToCelsius(\n      this.coordinateSystem.getTByXY(0, this.coordinateSystem.height));\n    let max = tempKelvinToCelsius(\n      this.coordinateSystem.getTByXY(this.coordinateSystem.width, 0));\n    let delta = max - min;\n    this._plotLines(\n      this.svgGroups.isotherms,\n      this.options.isotherms,\n      {\n        min: min,\n        max: max,\n        interval: (delta > 50) ? 10 : 5\n      },\n      T => {\n        T = tempCelsiusToKelvin(T);\n        let result = [[undefined, undefined], [undefined, undefined]];\n        if (this.coordinateSystem.isIsothermsVertical()) {\n          result[0][1] = 0;\n          result[1][1] = this.coordinateSystem.height;\n          result[0][0] = result[1][0] = this.coordinateSystem.getXByYT(result[0][1], T);\n        }\n        else {\n          result[0][1] = 0;\n          result[0][0] = this.coordinateSystem.getXByYT(result[0][1], T);\n          if (result[0][0] < 0)\n            result[0][1] = this.coordinateSystem.getYByXT(result[0][0] = 0, T);\n          result[1][0] = this.coordinateSystem.width;\n          result[1][1] = this.coordinateSystem.getYByXT(result[1][0], T);\n          if (result[1][1] === undefined) {\n            result[1][0] = result[0][0];\n            result[1][1] = this.coordinateSystem.height;\n          }\n          else if (result[1][1] > this.coordinateSystem.height) {\n            result[1][1] = this.coordinateSystem.height;\n            result[1][0] = this.coordinateSystem.getXByYT(result[1][1], T);\n          }\n        }\n        return result;\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  plotDryadiabats(redraw) {\n    this._plotLines(\n      this.svgGroups.dryadiabats,\n      this.options.dryadiabats,\n      {\n        min: tempKelvinToCelsius(\n          potentialTempByTempAndPres(\n            this.coordinateSystem.getTByXY(0, 0),\n            this.coordinateSystem.getPByXY(0, 0))),\n        max: tempKelvinToCelsius(\n          potentialTempByTempAndPres(\n            this.coordinateSystem.getTByXY(this.coordinateSystem.width, this.coordinateSystem.height),\n            this.coordinateSystem.getPByXY(this.coordinateSystem.width, this.coordinateSystem.height))),\n        interval: 10\n      },\n      T => {\n        let TKelvin = tempCelsiusToKelvin(T);\n        let y0 = 0;\n        let x0 = this.coordinateSystem.getXByYPotentialTemperature(y0, TKelvin);\n        if (x0 === undefined ||\n          x0 > this.coordinateSystem.width) {\n          x0 = this.coordinateSystem.width;\n          y0 = this.coordinateSystem.getYByXPotentialTemperature(x0, TKelvin);\n        }\n        let x1 = 0;\n        let y1 = this.coordinateSystem.getYByXPotentialTemperature(x1, TKelvin);\n        if (y1 === undefined ||\n          y1 > this.coordinateSystem.height) {\n          y1 = this.coordinateSystem.height;\n          x1 = this.coordinateSystem.getXByYPotentialTemperature(y1, TKelvin);\n        }\n        if (x0 === undefined ||\n          y0 === undefined ||\n          x1 === undefined ||\n          y1 === undefined)\n          return undefined;\n        if (this.coordinateSystem.isDryAdiabatStraightLine()) {\n          return [[x0, y0], [x1, y1]];\n        }\n        else {\n          let points = [[x0, y0]];\n          let yInterval = 10;\n          for (let y=y0+yInterval; y<y1; y+=yInterval) {\n            points.push([\n              this.coordinateSystem.getXByYPotentialTemperature(y, TKelvin),\n              y\n            ]);\n          }\n          points.push([x1, y1]);\n          return points;\n        }\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  plotPseudoadiabats(redraw) {\n    this._plotLines(\n      this.svgGroups.pseudoadiabats,\n      this.options.pseudoadiabats,\n      {\n        lines: [-18, -5, 10, 30, 60, 110, 180]\n      },\n      thetae => {\n        let thetaeKelvin = tempCelsiusToKelvin(thetae);\n        const y0 =\n          Math.max(\n            0,\n            (this.options.pseudoadiabats.maxPressure === undefined)\n              ? 0\n              : this.coordinateSystem.getYByPEquiPotTemp(\n                this.options.pseudoadiabats.maxPressure, thetaeKelvin)\n          );\n        const x0 = this.coordinateSystem.getXByYEquiPotTemp(y0, thetaeKelvin);\n        const y1 =\n          Math.min(\n            this.coordinateSystem.height,\n            (this.options.pseudoadiabats.minPressure === undefined)\n              ? this.coordinateSystem.height\n              : this.coordinateSystem.getYByPEquiPotTemp(\n                this.options.pseudoadiabats.minPressure, thetaeKelvin)\n          );\n        const x1 = this.coordinateSystem.getXByYEquiPotTemp(y1, thetaeKelvin);\n        let points = [[x0, y0]];\n        let yInterval = 10;\n        for (let y=y0+yInterval; y<y1; y+=yInterval) {\n          points.push([\n            this.coordinateSystem.getXByYEquiPotTemp(y, thetaeKelvin),\n            y\n          ]);\n        }\n        points.push([x1, y1]);\n        return points;\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  plotMixingratio(redraw) {\n    this._plotLines(\n      this.svgGroups.mixingratio,\n      this.options.mixingratio,\n      {\n        lines: [0.01, 0.1, 1, 2, 4, 7, 10, 16, 21, 32, 40]\n      },\n      hmr => {\n        const y0 =\n          Math.max(\n            0,\n            (this.options.mixingratio.maxPressure === undefined)\n              ? 0\n              : this.coordinateSystem.getYByPHMR(\n                this.options.mixingratio.maxPressure, hmr)\n          );\n        const x0 = this.coordinateSystem.getXByYHMR(y0, hmr);\n        const y1 =\n          Math.min(\n            this.coordinateSystem.height,\n            (this.options.mixingratio.minPressure === undefined)\n              ? this.coordinateSystem.height\n              : this.coordinateSystem.getYByPHMR(\n                this.options.mixingratio.minPressure, hmr)\n          );\n        const x1 = this.coordinateSystem.getXByYHMR(y1, hmr);\n        let points = [[x0, y0]];\n        const yInterval = 10;\n        for (let y=y0+yInterval; y<y1; y+=yInterval) {\n          points.push([\n            this.coordinateSystem.getXByYHMR(y, hmr),\n            y\n          ]);\n        }\n        points.push([x1, y1]);\n        return points;\n      },\n      redraw\n    );\n  }\n  \n  /**\n   * @private\n   */\n  _plotLines(node, options, valuesOptions, pointsFunc, redraw) {\n    options.visible\n      ? node.show()\n      : node.hide();\n    if (!redraw)\n      return;\n    node.clear();\n    let lines = [];\n    if (options.lines !== undefined)\n      lines = options.lines;\n    else if (options.min === undefined &&\n           options.max === undefined &&\n           options.interval === undefined &&\n           valuesOptions.lines !== undefined)\n      lines = valuesOptions.lines;\n    else {\n      if (options.min !== undefined)\n        valuesOptions.min = options.min;\n      if (options.max !== undefined)\n        valuesOptions.max = options.max;\n      let interval = options.interval;\n      if (interval === undefined)\n        interval = valuesOptions.interval;\n      let start = Math.ceil(valuesOptions.min/interval)*interval;\n      let end = Math.floor(valuesOptions.max/interval)*interval;\n      for (let v=start; v<=end; v+=interval) {\n        lines.push(v);\n      }\n    }\n    let highlightLineWidth = 3;\n    if (options.style.width !== undefined)\n      highlightLineWidth = options.style.width+2;\n    lines.forEach(function (v) {\n      let points = pointsFunc.call(this, v);\n      let line = (points.length == 2) ?\n        node.line(points[0][0], this.coordinateSystem.height-points[0][1],\n          points[1][0], this.coordinateSystem.height-points[1][1])\n          .stroke(options.style) :\n        node.polyline(points.map(function (point) {\n          point[1] = this.coordinateSystem.height - point[1];\n          return point;\n        }, this))\n          .fill('none').stroke(options.style);\n      if (options.highlightedLines !== undefined)\n        options.highlightedLines.forEach(function (vHighlight) {\n          if (v == vHighlight)\n            line.stroke({width: highlightLineWidth});\n        }, this);\n    }, this);\n  }\n  \n  /**\n   * Extend an event with temperature and pressure.\n   * \n   * @override\n   */\n  getExtendedEvent(e, p) {\n    e = super.getExtendedEvent(e, p);\n    e.diagramTmpk =\n      this.coordinateSystem.getTByXY(e.elementX,\n        this.coordinateSystem.height - e.elementY);\n    return e;\n  }\n  \n  /**\n   * Initialize hover labels options.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~hoverLabelsOptions}\n   *   options - Hover labels options.\n   * @override\n   */\n  _initHoverLabels({\n    visible = true,\n    type = 'mousemove',\n    snapToData = true,\n    remote = true,\n    insertLabelsFunc = undefined,\n    pres = {},\n    temp = {},\n    dewp = {},\n    wetbulb = {}\n  }) {\n    pres.length = ('length' in pres) ? pres.length : 60;\n    pres.align = ('align' in pres) ? pres.align : 'left';\n    if (!('visible' in pres))\n      pres.visible = true;\n    if (!('style' in pres))\n      pres.style = {};\n    pres.font = getNormalizedFontOptions(pres.font, {\n      anchor: (pres.align == 'right') ? 'end' : 'start'\n    });\n    if (!('fill' in pres))\n      pres.fill = {};\n    if (pres.fill.opacity === undefined)\n      pres.fill.opacity = 0.7;\n    if (pres.horizontalMargin === undefined)\n      pres.horizontalMargin = 5;\n    \n    if (!('visible' in temp))\n      temp.visible = true;\n    if (!('style' in temp))\n      temp.style = {};\n    temp.font = getNormalizedFontOptions(temp.font, {\n      anchor: 'start',\n      'alignment-baseline': 'bottom'\n    });\n    if (!('fill' in temp))\n      temp.fill = {};\n    if (temp.fill.opacity === undefined)\n      temp.fill.opacity = 0.7;\n    temp.radius = ('radius' in temp) ? temp.radius : undefined;\n    temp.radiusPlus = ('radiusPlus' in temp) ? temp.radiusPlus : 2;\n    if (temp.horizontalMargin === undefined)\n      temp.horizontalMargin = 10;\n    \n    if (!('visible' in dewp))\n      dewp.visible = true;\n    if (!('style' in dewp))\n      dewp.style = {};\n    dewp.font = getNormalizedFontOptions(dewp.font, {\n      anchor: 'end',\n      'alignment-baseline': 'bottom'\n    });\n    if (!('fill' in dewp))\n      dewp.fill = {};\n    if (dewp.fill.opacity === undefined)\n      dewp.fill.opacity = 0.7;\n    dewp.radius = ('radius' in dewp) ? dewp.radius : undefined;\n    dewp.radiusPlus = ('radiusPlus' in dewp) ? dewp.radiusPlus : 2;\n    if (dewp.horizontalMargin === undefined)\n      dewp.horizontalMargin = 10;\n    \n    if (!('visible' in wetbulb))\n      wetbulb.visible = true;\n    if (!('style' in wetbulb))\n      wetbulb.style = {};\n    wetbulb.font = getNormalizedFontOptions(wetbulb.font, {\n      anchor: 'middle'\n    });\n    if (!('fill' in wetbulb))\n      wetbulb.fill = {};\n    if (wetbulb.fill.opacity === undefined)\n      wetbulb.fill.opacity = 0.7;\n    wetbulb.radius = ('radius' in wetbulb) ? wetbulb.radius : undefined;\n    wetbulb.radiusPlus = ('radiusPlus' in wetbulb) ? wetbulb.radiusPlus : 2;\n    if (wetbulb.verticalMargin === undefined)\n      wetbulb.verticalMargin = 10;\n    \n    if (insertLabelsFunc === undefined)\n      insertLabelsFunc =\n        this._makeInsertLabelsFunc(pres, temp, dewp, wetbulb);\n    \n    super._initHoverLabels({\n      visible,\n      type,\n      snapToData,\n      remote,\n      insertLabelsFunc\n    });\n  }\n  \n  /**\n   * Makes a default insertLabelsFunc.\n   * \n   * @param {Object} pres\n   * @param {Object} temp\n   * @param {Object} dewp\n   * @param {Object} wetbulb\n   * @private\n   */\n  _makeInsertLabelsFunc(pres, temp, dewp, wetbulb) {\n    return (sounding, levelData, group) => {\n      group.clear();\n      \n      if (levelData.pres === undefined)\n        return;\n      \n      if (pres.visible)\n        drawPressureHoverLabelInto(group, levelData, this.coordinateSystem, pres);\n      \n      this.dataGroupIds.reverse().forEach(dataGroupId => {\n        let labelOptions = {\n          visible: false\n        };\n        switch (dataGroupId) {\n        case 'temp': labelOptions = temp; break;\n        case 'dewp': labelOptions = dewp; break;\n        case 'wetbulb': labelOptions = wetbulb; break;\n        }\n        if (!labelOptions.visible)\n          return;\n        \n        const { x, y, value, unit } =\n          this._getCoordinatesByLevelData(dataGroupId,\n            sounding, levelData, this);\n        if (x === undefined ||\n            y === undefined)\n          return;\n        \n        const lineWidth =\n          (dataGroupId in this.hoverLabelsSounding.options.diagram)\n            ? this.hoverLabelsSounding.options.diagram[dataGroupId].style.width\n            : 3;\n        const radius = (labelOptions.radius === undefined)\n          ? lineWidth + labelOptions.radiusPlus\n          : labelOptions.radius;\n        const fillOptions = labelOptions.style;\n        if (!('color' in fillOptions) &&\n            (dataGroupId in this.hoverLabelsSounding.options.diagram))\n          fillOptions.color = sounding.options.diagram[dataGroupId].style.color;\n        group\n          .circle(2 * radius)\n          .attr({ cx: x, cy: y })\n          .fill(fillOptions);\n        drawTextInto({\n          node: group,\n          text: `${value} ${unit}`,\n          x,\n          y,\n          horizontalMargin: labelOptions.horizontalMargin,\n          verticalMargin: labelOptions.verticalMargin,\n          font: labelOptions.font,\n          fill: labelOptions.fill\n        });\n      });\n    };\n  }\n}\nexport default TDDiagram;\n\n/**\n * Draws pressure hover label.\n * \n * @param {external:SVG} svgNode - SVG node to draw into.\n * @param {number} pres - Pressure.\n * @param {module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem}\n *   coordinateSystem - Coordinate system.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~presLabelOptions}\n *   [options] - Options.\n */\nexport function drawPressureHoverLabelInto(svgNode, levelData, coordinateSystem, {\n  length = 60,\n  align = 'left',\n  horizontalMargin = undefined,\n  verticalMargin = undefined,\n  style = {},\n  font = {},\n  fill = {}\n} = {}) {\n  let x0 = 0;\n  let x1 = length;\n  const match = /^([0-9]+)%$/.exec(x1);\n  if (match)\n    x1 = match[1] / 100 * coordinateSystem.width;\n  if (align == 'right') {\n    x0 = coordinateSystem.width;\n    x1 = coordinateSystem.width - x1;\n  }\n  const y = coordinateSystem.height -\n    coordinateSystem.getYByXP(0, levelData.pres);\n  style = getNormalizedLineStyleOptions(style);\n  svgNode\n    .line([\n      [Math.min(x0, x1), y],\n      [Math.max(x0, x1), y]\n    ])\n    .stroke(style);\n  font = getNormalizedFontOptions(font);\n  font['alignment-baseline'] = 'bottom';\n  drawTextInto({\n    node: svgNode,\n    text: `${Math.round(levelData.pres)} hPa`,\n    x: x0,\n    y,\n    horizontalMargin,\n    verticalMargin,\n    font,\n    fill\n  });\n  \n  font['alignment-baseline'] = 'top';\n  let hghtStr = (levelData.hght === undefined)\n    ? `~${Math.round(altitudeISAByPres(levelData.pres))} m`\n    : `${Math.round(levelData.hght)} m`;\n  drawTextInto({\n    node: svgNode,\n    text: hghtStr,\n    x: x0,\n    y: y,\n    horizontalMargin,\n    verticalMargin,\n    font,\n    fill\n  });\n}\n\nfunction getNormalizedDiagramLineOptions({\n  highlightedLines = undefined,\n  interval = undefined,\n  lines = undefined,\n  max = undefined,\n  min = undefined,\n  maxPressure = undefined,\n  minPressure = undefined,\n  style = undefined,\n  visible = undefined\n}, defaults = {}) {\n  return {\n    highlightedLines: getFirstDefinedValue(highlightedLines, defaults.highlightedLines),\n    interval: getFirstDefinedValue(interval, defaults.interval),\n    lines: getFirstDefinedValue(lines, defaults.lines),\n    max: getFirstDefinedValue(max, defaults.max),\n    min: getFirstDefinedValue(min, defaults.min),\n    maxPressure: getFirstDefinedValue(maxPressure, defaults.maxPressure),\n    minPressure: getFirstDefinedValue(minPressure, defaults.minPressure),\n    style: getNormalizedLineStyleOptions(style, defaults.style),\n    visible: getFirstDefinedValue(visible, defaults.visible, true)\n  };\n}","/**\n * @module meteoJS/thermodynamicDiagram/windbarbsProfile\n */\nimport { drawWindbarbInto } from './Functions.js';\nimport PlotAltitudeDataArea from './PlotAltitudeDataArea.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/windbarbsProfile~options\n * @param {number} [windbarbLength]\n *   Length of windbarbs. Default is 40% of the Plot-Area width.\n */\n\n/**\n * Class to draw the profile with windbarbs.\n * \n * <pre><code>import WindbarbsProfile from 'meteoJS/thermodynamicDiagram/WindbarbsProfile';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea.PlotAltitudeDataArea\n */\nexport class WindbarbsProfile extends PlotAltitudeDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/windbarbsProfile~options}\n   *   options - Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = undefined,\n    y = undefined,\n    width = undefined,\n    height = undefined,\n    style = {},\n    visible = true,\n    events = {},\n    hoverLabels = {},\n    windbarbLength = undefined,\n    dataGroupIds = ['windbarbs'],\n    getCoordinatesByLevelData = (dataGroupId, sounding, levelData, plotArea) => {\n      if (levelData.pres === undefined ||\n          levelData.wspd === undefined ||\n          levelData.wdir === undefined)\n        return {};\n      \n      return {\n        x: plotArea.width / 2,\n        y: plotArea.coordinateSystem.height -\n          plotArea.coordinateSystem.getYByXP(0, levelData.pres)\n      };\n    },\n    insertDataGroupInto = (svgNode, dataGroupId, sounding, data, plotArea) => {\n      data.forEach(windbarbData => {\n        drawWindbarbInto({\n          node: svgNode,\n          x: plotArea.width/2,\n          y: windbarbData.y,\n          wspd: windbarbData.levelData.wspd,\n          wdir: windbarbData.levelData.wdir,\n          length: plotArea._windbarbLength,\n          strokeStyle: sounding.options.windprofile.windbarbs.style\n        });\n      });\n    }\n  }) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      hoverLabels,\n      getSoundingVisibility:\n        sounding => sounding.visible && sounding.options.windprofile.windbarbs.visible,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto\n    });\n    \n    /**\n     * @type number\n     * @private\n     */\n    this._windbarbLength = windbarbLength;\n    if (this._windbarbLength === undefined)\n      this._windbarbLength = this.width * 2/5;\n    \n    this.init();\n  }\n}\nexport default WindbarbsProfile;","/**\n * @module meteoJS/thermodynamicDiagram/windspeedProfile\n */\nimport {\n  windspeedMSToKN,\n  windspeedKNToMS\n} from '../calc.js';\nimport {\n  getNormalizedFontOptions,\n  drawTextInto\n} from './Functions.js';\nimport PlotAltitudeDataArea from './PlotAltitudeDataArea.js';\n\n/**\n * Options for labels on hovering the windspeed profile.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~hoverLabelsOptions}\n *   module:meteoJS/thermodynamicDiagram/windspeedProfile~hoverLabelsOptions\n * @property {module:meteoJS/thermodynamicDiagram/tdDiagram~labelsOptions}\n *   [windspeed] - Options for windspeed label.\n * @param {number} [windspeedMax=41.67]\n *   The maximum visible windspeed [m/s].\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/windspeedProfile~options\n */\n\n/**\n * Class to draw windspeed profiles.\n * \n * <pre><code>import WindspeedProfile from 'meteoJS/thermodynamicDiagram/WindspeedProfile';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotAltitudeDataArea.PlotAltitudeDataArea\n */\nexport class WindspeedProfile extends PlotAltitudeDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/windspeedProfile~options} options\n   *   Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem = undefined,\n    x = undefined,\n    y = undefined,\n    width = undefined,\n    height = undefined,\n    style = {},\n    visible = true,\n    events = {},\n    hoverLabels = {},\n    windspeedMax = windspeedKNToMS(150),\n    dataGroupIds = ['windspeed'],\n    getCoordinatesByLevelData = (dataGroupId, sounding, levelData, plotArea) => {\n      if (levelData.pres === undefined ||\n          levelData.wspd === undefined)\n        return {};\n      \n      return {\n        x: plotArea.width * levelData.wspd / windspeedMax,\n        y: plotArea.coordinateSystem.height -\n          plotArea.coordinateSystem.getYByXP(0, levelData.pres)\n      };\n    },\n    insertDataGroupInto = (svgNode, dataGroupId, sounding, data) => {\n      svgNode\n        .polyline(data.map(level => [ level.x, level.y ]))\n        .fill('none')\n        .stroke(sounding.options.windprofile.windspeed.style);\n    }\n  }) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      hoverLabels,\n      getSoundingVisibility:\n        sounding => sounding.visible && sounding.options.windprofile.windspeed.visible,\n      dataGroupIds,\n      getCoordinatesByLevelData,\n      insertDataGroupInto\n    });\n    \n    this.init();\n  }\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    super._drawBackground(svgNode);\n    \n    svgNode\n      .line(0, 0, 0, this.height)\n      .stroke({color: 'black', width: 1});\n    svgNode\n      .line(this.width, 0, this.width, this.height)\n      .stroke({color: 'black', width: 1});\n  }\n  \n  /**\n   * Initialize hover labels options.\n   * \n   * @param {module:meteoJS/thermodynamicDiagram/windspeedProfile~hoverLabelsOptions}\n   *   options - Hover labels options.\n   * @override\n   */\n  _initHoverLabels({\n    visible = true,\n    type = 'mousemove',\n    snapToData = true,\n    remote = true,\n    insertLabelsFunc = undefined,\n    windspeed = {}\n  }) {\n    if (!('visible' in windspeed))\n      windspeed.visible = true;\n    if (!('style' in windspeed))\n      windspeed.style = {};\n    windspeed.font = getNormalizedFontOptions(windspeed.font, {\n      anchor: 'end',\n      'alignment-baseline': 'bottom'\n    });\n    if (!('fill' in windspeed))\n      windspeed.fill = {};\n    if (windspeed.fill.opacity === undefined)\n      windspeed.fill.opacity = 0.7;\n    windspeed.radius = ('radius' in windspeed) ? windspeed.radius : undefined;\n    windspeed.radiusPlus =\n      ('radiusPlus' in windspeed) ? windspeed.radiusPlus : 2;\n    if (windspeed.horizontalMargin === undefined)\n      windspeed.horizontalMargin = 10;\n    \n    if (insertLabelsFunc === undefined)\n      insertLabelsFunc = this._makeInsertLabelsFunc(windspeed);\n    \n    super._initHoverLabels({\n      visible,\n      type,\n      snapToData,\n      remote,\n      insertLabelsFunc\n    });\n  }\n  \n  /**\n   * Makes a default insertLabelsFunc.\n   * \n   * @param {Object} windspeed\n   * @private\n   */\n  _makeInsertLabelsFunc(windspeed) {\n    return (sounding, levelData, group) => {\n      group.clear();\n      \n      if (levelData.pres === undefined)\n        return;\n      \n      if (!windspeed.visible ||\n          levelData.wspd === undefined)\n        return;\n      \n      const { x, y } =\n        this._getCoordinatesByLevelData('windspeed',\n          sounding, levelData, this);\n      if (x === undefined ||\n          y === undefined)\n        return;\n      \n      const radius = (windspeed.radius === undefined)\n        ? this.hoverLabelsSounding.options.windprofile.windspeed.style.width / 2 +\n          windspeed.radiusPlus\n        : windspeed.radius;\n      const fillOptions = windspeed.style;\n      if (!('color' in fillOptions))\n        fillOptions.color = sounding.options.windprofile.windspeed.style.color;\n      group\n        .circle(2 * radius)\n        .attr({ cx: x, cy: y })\n        .fill(fillOptions);\n      drawTextInto({\n        node: group,\n        text: `${Math.round(windspeedMSToKN(levelData.wspd)*10)/10} kn`,\n        x,\n        y,\n        horizontalMargin: windspeed.horizontalMargin,\n        verticalMargin: windspeed.verticalMargin,\n        font: windspeed.font,\n        fill: windspeed.fill\n      });\n    };\n  }\n}\nexport default WindspeedProfile;","/**\n * @module meteoJS/thermodynamicDiagram/hodograph\n */\nimport { windspeedKMHToMS,\n  windspeedKNToMS,\n  windspeedMSToKMH } from '../calc.js';\nimport {\n  getNormalizedLineOptions,\n  getNormalizedTextOptions\n} from './Functions.js';\nimport PlotDataArea from './PlotDataArea.js';\n\n/**\n * Options for the circle grid.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~lineStyleOptions}\n *   module:meteoJS/thermodynamicDiagram/hodograph~gridCirclesOptions\n * @param {number} [interval=13.89]\n *   Interval between grid circles (and value for the first grid circle).\n *   In m/s.\n */\n\n/**\n * Options for the grid labels.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram~textOptions}\n *   module:meteoJS/thermodynamicDiagram/hodograph~gridLabelsOptions\n * @param {number} [angle=45]\n *   Angle of the labels startin from the origin\n *   (in degrees, 0 relates to North).\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotDataArea~options}\n *   module:meteoJS/thermodynamicDiagram/hodograph~options\n * @param {Object} [grid] - Options for the hodograph grid.\n * @param {module:meteoJS/thermodynamicDiagram~lineOptions} [grid.axes]\n *   Options for the hodograph's x- and y-axes.\n * @param {module:meteoJS/thermodynamicDiagram/hodograph~gridCirclesOptions}\n *   [grid.circles] - Options for the hodograph circle grid.\n * @param {module:meteoJS/thermodynamicDiagram/hodograph~gridLabelsOptions}\n *   [grid.labels] - Options for the hodograph grid labels.\n * @param {number|undefined} [grid.max=undefined]\n *   Maximum value for the grid axes and circles. If undefined, determined from\n *   'minWindspeedRange'.\n * @param {number} [windspeedMax=41.67]\n *   The maximum windspeed [m/s], that should be visible on the plot. This\n *   refers to the x- or y-direction with the origin in the middle of the plot,\n *   because in these directions, a polar plot has the least extent concerning\n *   distance.\n * @param {number[]|undefined} [origin=undefined]\n *   Move origin of polar plot. If 'undefined' the origin is in the center. To\n *   move, use an array with 2 elements. The first element moves the origin in\n *   x direction, the second in y direction. The values are interpreted as\n *   relative length (relating to the half width resp. height). Positive values\n *   to move in South-West direction. E.g. to move the origin the half way to\n *   South-West, use [0.5, 0.5].\n */\n\n/**\n * Class to draw the hodograph.\n * \n * <pre><code>import Hodograph from 'meteoJS/thermodynamicDiagram/Hodograph';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotDataArea.PlotDataArea\n */\nexport class Hodograph extends PlotDataArea {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/hodograph~options} options\n   *   Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem,\n    x,\n    y,\n    width,\n    height,\n    style = {},\n    visible = true,\n    events = {},\n    grid = {},\n    windspeedMax = windspeedKNToMS(150),\n    origin = undefined\n  }) {\n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events,\n      getSoundingVisibility:\n        sounding => sounding.visible && sounding.options.hodograph.visible\n    });\n    \n    this._gridOptions = this.getNormalizedGridOptions(grid);\n    \n    this.center = [this.width/2, this.height/2];\n    if (origin !== undefined) {\n      this.center[0] -= origin[0] * this.minLength/2;\n      this.center[1] += origin[1] * this.minLength/2;\n    }\n    this.pixelPerSpeed = Math.min(\n      Math.max(this.width - this.center[0], this.center[0]),\n      Math.max(this.height - this.center[1], this.center[1])\n    ) / windspeedMax;\n    if (this._gridOptions.max === undefined)\n      this._gridOptions.max = windspeedMax;\n    \n    this.init();\n  }\n  \n  /**\n   * Draw the sounding into the SVG group.\n   * \n   * @override\n   */\n  drawSounding(sounding, group) {\n    super.drawSounding(sounding, group);\n    \n    let polyline = [];\n    sounding.sounding.getLevels().forEach(level => {\n      if (level === undefined)\n        return;\n      let levelData = sounding.sounding.getData(level);\n      if (levelData.wdir === undefined ||\n        levelData.wspd === undefined)\n        return;\n      let x = levelData.wspd * -Math.sin(levelData.wdir / 180 * Math.PI);\n      let y = levelData.wspd * Math.cos(levelData.wdir / 180 * Math.PI);\n      polyline.push([\n        this.center[0] + x * this.pixelPerSpeed,\n        this.center[1] + y * this.pixelPerSpeed\n      ]);\n    });\n    group\n      .polyline(polyline)\n      .fill('none')\n      .stroke(sounding.options.hodograph.style);\n  }\n  \n  /**\n   * Plots hodograph background.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    super._drawBackground(svgNode);\n    \n    // border, background\n    svgNode\n      .rect(this.width-2, this.height-2)\n      .move(1,1)\n      .fill({color: 'white'})\n      .stroke({color: 'black', width: 1});\n    //.attr({rx: 10, ry: 10});\n    \n    // x-/y-axes\n    if (this._gridOptions.axes.visible) {\n      let axesLength =\n        this._gridOptions.max + this._gridOptions.circles.interval / 2;\n      svgNode\n        .line(\n          Math.max(0, this.center[0] - axesLength * this.pixelPerSpeed),\n          this.center[1],\n          Math.min(this.width,\n            this.center[0] + axesLength * this.pixelPerSpeed),\n          this.center[1]\n        )\n        .stroke(this._gridOptions.axes.style);\n      svgNode\n        .line(\n          this.center[0],\n          Math.max(0, this.center[1] - axesLength * this.pixelPerSpeed),\n          this.center[0],\n          Math.min(this.height,\n            this.center[1] + axesLength * this.pixelPerSpeed)\n        )\n        .stroke(this._gridOptions.axes.style);\n    }\n    \n    // circles and labels\n    for (let v = this._gridOptions.circles.interval;\n      v <= this._gridOptions.max;\n      v += this._gridOptions.circles.interval) {\n      let radius = v * this.pixelPerSpeed;\n      svgNode\n        .circle(2*radius)\n        .attr({\n          cx: this.center[0],\n          cy: this.center[1]\n        })\n        .fill('none')\n        .stroke(this._gridOptions.circles.style);\n      if (this._gridOptions.labels.visible) {\n        let xText =\n          radius *\n          Math.cos((this._gridOptions.labels.angle - 90) / 180 * Math.PI);\n        let yText =\n          radius *\n          Math.sin((this._gridOptions.labels.angle - 90) / 180 * Math.PI);\n        let textAnchor = 'middle';\n        let dx = 0;\n        let dy = -this._gridOptions.labels.font.size;\n        if (this._gridOptions.labels.angle == 0 ||\n          this._gridOptions.labels.angle == 180) {\n          dx = -3;\n          textAnchor = 'end';\n        }\n        else if (this._gridOptions.labels.angle == 90 ||\n               this._gridOptions.labels.angle == 270)\n          dy = -3;\n        let text = svgNode\n          .plain('' + Math.round(windspeedMSToKMH(v)))\n          .move(this.center[0] + xText, this.center[1] + yText)\n          .attr({\n            'text-anchor': textAnchor,\n            //'alignment-baseline': 'middle'\n            dx: dx,\n            dy: dy // XXX: Hack fr Firefox\n          })\n          .font(this._gridOptions.labels.font);\n        let bbox = text.bbox();\n        text.before(\n          svgNode\n            .rect(bbox.width, bbox.height)\n            .move(bbox.x, bbox.y)\n            .fill('white')\n        );\n      }\n    }\n  }\n  \n  /**\n   * Normalizes options for grid.\n   * \n   * @private\n   */\n  getNormalizedGridOptions({\n    axes = {},\n    circles = {},\n    labels = {},\n    max = undefined\n  }) {\n    axes = getNormalizedLineOptions(axes);\n    circles = getNormalizedLineOptions(circles);\n    if (!('interval' in circles) ||\n        circles.interval === undefined)\n      circles.interval = windspeedKMHToMS(50);\n    labels = getNormalizedTextOptions(labels);\n    if (!('angle' in labels) ||\n        labels.angle === undefined)\n      labels.angle = 225;\n    if (labels.font.size === undefined)\n      labels.font.size = 10;\n    \n    return {\n      axes,\n      circles,\n      labels,\n      max\n    };\n  }\n}\nexport default Hodograph;","/**\n * @module meteoJS/thermodynamicDiagram/axes/yAxis\n */\nimport { getNormalizedLineStyleOptions } from '../Functions.js';\nimport PlotArea from '../PlotArea.js';\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagram/plotArea~options}\n *   module:meteoJS/thermodynamicDiagram/axes/yAxis~options\n * @property {module:meteoJS/thermodynamicDiagram/axes/axisLabels~options} labels\n *   Options for the yAxis Labels.\n * @property {module:meteoJS/thermodynamicDiagram/axes/axisTitle~options} title\n *   Options for the title of the x-Axis.\n */\n\n/**\n * Class to draw the yAxis labelling.\n * \n * @extends module:meteoJS/thermodynamicDiagram/plotArea.PlotArea\n */\nexport class yAxis extends PlotArea {\n\n  /**\n   * @param {module:meteoJS/thermodynamicDiagram/yAxis~options} options\n   *   Options.\n   */\n  constructor({\n    svgNode = undefined,\n    coordinateSystem,\n    x,\n    y,\n    width,\n    height,\n    style = {},\n    visible = true,\n    events = {},\n    labels = {},\n    title = {}\n  }) {\n    if (style.overflow === undefined)\n      style.overflow = 'visible';\n    \n    super({\n      svgNode,\n      coordinateSystem,\n      x,\n      y,\n      width,\n      height,\n      style,\n      visible,\n      events\n    });\n    \n    /**\n     * @type Object\n     * @private\n     */\n    this._labelsOptions = getNormalizedLabelsOptions(labels);\n    \n    /**\n     * @type Object\n     * @private\n     */\n    this._titleOptions = getNormalizedTitleOptions(title);\n    \n    this.init();\n  }\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    super._drawBackground(svgNode);\n    \n    if (this._labelsOptions.enabled) {\n      let svgLabelsGroup = svgNode.group();\n      let isobarsAzimut = 50;\n      let minLevel = Math.ceil(this.coordinateSystem.getPByXY(0, this.height)/isobarsAzimut)*isobarsAzimut;\n      let maxLevel = Math.floor(this.coordinateSystem.getPByXY(0, 0)/isobarsAzimut)*isobarsAzimut;\n      let fontSize = 11;\n      for (let level=minLevel; level<=maxLevel; level+=isobarsAzimut) {\n        let y = this.height - this.coordinateSystem.getYByXP(0, level);\n        let text = svgLabelsGroup.plain(level).attr({\n          y: y+fontSize*0.3,\n          x: this.width\n        });\n        text\n          .font({\n            size: fontSize+'px',\n            anchor: 'end'\n          })\n          .attr({\n            fill: this._labelsOptions.style.color\n          });\n      }\n    }\n    \n    if (this._titleOptions.text !== undefined) {\n      let svgTitleGroup = svgNode.group();\n      let fontSize = 12;\n      svgTitleGroup.plain(this._titleOptions.text)\n        .attr({\n          x: fontSize*0.4,\n          y: this.height/2,\n          fill: this._titleOptions.style.color\n        })\n        .font({\n          size: fontSize,\n          anchor: 'middle'\n        })\n        .rotate(-90);\n    }\n  }\n  \n}\nexport default yAxis;\n\nfunction getNormalizedLabelsOptions({\n  enabled = true,\n  style = {}\n}) {\n  let options = {\n    enabled,\n    style\n  };\n  options.style = getNormalizedLineStyleOptions(options.style);\n  return options;\n}\n\nfunction getNormalizedTitleOptions({\n  align = 'middle',\n  style = {},\n  text = undefined\n}) {\n  let options = {\n    align,\n    style,\n    text\n  };\n  options.style = getNormalizedLineStyleOptions(options.style);\n  return options;\n}","/**\n * @module meteoJS/thermodynamicDiagram/axes/xAxis\n */\nimport { tempKelvinToCelsius, tempCelsiusToKelvin } from '../../calc.js';\nimport yAxis from './yAxis.js';\n\n/**\n * Class to draw the xAxis labelling.\n * \n * @extends module:meteoJS/thermodynamicDiagram/axes/yAxis.yAxis\n */\nexport class xAxis extends yAxis {\n  \n  /**\n   * Draw background into SVG group.\n   * \n   * @override\n   */\n  _drawBackground(svgNode) {\n    svgNode.clear();\n    //super.drawBackground(svgNode);\n    \n    if (this._labelsOptions.enabled) {\n      let svgLabelsGroup = svgNode.group();\n      let isothermsAzimut = 10;\n      let minT = Math.ceil(tempKelvinToCelsius(this.coordinateSystem.getTByXY(0, 0))/isothermsAzimut)*isothermsAzimut;\n      let maxT = Math.floor(tempKelvinToCelsius(this.coordinateSystem.getTByXY(this.width, 0))/isothermsAzimut)*isothermsAzimut;\n      let fontSize = 10;\n      for (let T=minT; T<=maxT; T+=isothermsAzimut) {\n        let TKelvin = tempCelsiusToKelvin(T);\n        svgLabelsGroup\n          .plain(Math.round(tempKelvinToCelsius(TKelvin)))\n          .attr({\n            x: this.coordinateSystem.getXByYT(0, TKelvin),\n            y: fontSize,\n            fill: this._labelsOptions.style.color\n          })\n          .font({\n            size: fontSize+'px',\n            anchor: 'middle'\n          });\n      }\n    }\n    \n    if (this._titleOptions.text !== undefined) {\n      let svgTitleGroup = svgNode.group();\n      let fontSize = 12;\n      svgTitleGroup.plain(this._titleOptions.text)\n        .attr({\n          x: this.width/2,\n          y: this.height - fontSize*0.3,\n          fill: this._titleOptions.style.color\n        })\n        .font({\n          size: fontSize,\n          anchor: 'middle'\n        });\n    }\n  }\n  \n}\nexport default xAxis;","/**\n * @module meteoJS/thermodynamicDiagram\n */\nimport ThermodynamicDiagramPluggable from './ThermodynamicDiagramPluggable.js';\nimport StueveDiagram from './thermodynamicDiagram/coordinateSystem/StueveDiagram.js';\nimport Emagram from './thermodynamicDiagram/coordinateSystem/Emagram.js';\nimport SkewTlogPDiagram from './thermodynamicDiagram/coordinateSystem/SkewTlogPDiagram.js';\nimport TDDiagram from './thermodynamicDiagram/TDDiagram.js';\nimport WindbarbsProfile from './thermodynamicDiagram/WindbarbsProfile.js';\nimport WindspeedProfile from './thermodynamicDiagram/WindspeedProfile.js';\nimport Hodograph from './thermodynamicDiagram/Hodograph.js';\nimport { xAxis as xAxisClass } from './thermodynamicDiagram/axes/xAxis.js';\nimport { yAxis as yAxisClass } from './thermodynamicDiagram/axes/yAxis.js';\n\n/**\n * Options for the coordinate system.\n * \n * @typedef {module:meteoJS/thermodynamicDiagramPluggable~options}\n *   module:meteoJS/thermodynamicDiagram~coordinateSystemOptions\n * @property {'skewTlogP'|'stueve'|'emagram'} [type='skewTlogP']\n *   Thermodynamic diagarm type.\n * @property {module:meteoJS/thermodynamicDiagram/coordinateSystem~pressureOptions}\n *   [pressure] - Pressure options.\n * @property {module:meteoJS/thermodynamicDiagram/coordinateSystem~temperatureOptions}\n *   [temperature] - Temperature options.\n */\n\n/**\n * Options for the constructor.\n * \n * @typedef {module:meteoJS/thermodynamicDiagramPluggable~options}\n *   module:meteoJS/thermodynamicDiagram~options\n * @param {module:meteoJS/thermodynamicDiagram~coordinateSystemOptions}\n *   [coordinateSystem] - Coordinate system options.\n * @param {module:meteoJS/thermodynamicDiagram/tdDiagram~options} [diagram]\n *   Options for the real thermodynamic diagram.\n * @param {module:meteoJS/thermodynamicDiagram/windbarbsProfile~options}\n *   [windbarbs] - Options for the windbarbs profile.\n * @param {module:meteoJS/thermodynamicDiagram/windspeedProfile~options}\n *   [windprofile] - Options for the windspeed profile.\n * @param {module:meteoJS/thermodynamicDiagram/hodograph~options} [hodograph]\n *   Options for the hodograph container.\n * @param {module:meteoJS/thermodynamicDiagram/axes/xAxis~options} [xAxis]\n *   Options for the xAxis container.\n * @param {module:meteoJS/thermodynamicDiagram/axes/yAxis~options} [yAxis]\n *   Options for the yAxis container.\n */\n\n/**\n * Class to draw a SVG thermodynamic diagram.\n * \n * <pre><code>import ThermodynamicDiagram from 'meteoJS/ThermodynamicDiagram';</code></pre>\n * \n * @extends module:meteoJS/thermodynamicDiagramPluggable.ThermodynamicDiagramPluggable\n */\nexport class ThermodynamicDiagram extends ThermodynamicDiagramPluggable {\n  \n  /**\n   * @param {module:meteoJS/thermodynamicDiagram~options} options - Options.\n   */\n  constructor({\n    renderTo = undefined,\n    width = undefined,\n    height = undefined,\n    coordinateSystem = {},\n    diagram = {},\n    windbarbsProfile = {},\n    windspeedProfile = {},\n    hodograph = {},\n    xAxis = {},\n    yAxis = {}\n  }) {\n    super({\n      renderTo,\n      width,\n      height\n    });\n    \n    diagram = normalizePlotAreaOptions(diagram);\n    windbarbsProfile = normalizePlotAreaOptions(windbarbsProfile);\n    windspeedProfile = normalizePlotAreaOptions(windspeedProfile);\n    hodograph = normalizePlotAreaOptions(hodograph);\n    xAxis = normalizePlotAreaOptions(xAxis);\n    yAxis = normalizePlotAreaOptions(yAxis);\n    \n    let defaultPadding = this.svgNode.width() * 0.05;\n    if (xAxis.width === undefined &&\n      diagram.width === undefined &&\n      windbarbsProfile.width === undefined &&\n      windspeedProfile.width === undefined) {\n      yAxis.width =\n        (this.svgNode.width() - 2 * defaultPadding) * 0.1;\n      diagram.width =\n        (this.svgNode.width() - 2 * defaultPadding) * 0.7;\n      windbarbsProfile.width =\n        (this.svgNode.width() - 2 * defaultPadding) * 0.2 * 1/3;\n      windspeedProfile.width =\n        (this.svgNode.width() - 2 * defaultPadding) * 0.2 * 2/3;\n    }\n    else if (diagram.width === undefined)\n      diagram.width =\n        this.svgNode.width() - 2 * defaultPadding\n        - windbarbsProfile.width- windspeedProfile.width;\n    else if (windbarbsProfile.width === undefined &&\n             windspeedProfile.width === undefined) {\n      windbarbsProfile.width =\n        (this.svgNode.width() - 2 * defaultPadding - diagram.width) * 1/3;\n      windspeedProfile.width =\n        (this.svgNode.width() - 2 * defaultPadding - diagram.width) * 2/3;\n    }\n    if (yAxis.x === undefined &&\n      diagram.x === undefined &&\n      windbarbsProfile.x === undefined &&\n      windspeedProfile.x === undefined) {\n      yAxis.x = defaultPadding;\n      diagram.x =\n        yAxis.x + yAxis.width;\n      windbarbsProfile.x =\n        diagram.x + diagram.width;\n      windspeedProfile.x =\n        windbarbsProfile.x + windbarbsProfile.width;\n    }\n    else if (diagram.x === undefined)\n      diagram.x =\n        windbarbsProfile.x - windbarbsProfile.width;\n    else if (windbarbsProfile.x === undefined &&\n             windspeedProfile.x === undefined) {\n      windbarbsProfile.x =\n        diagram.x + diagram.width;\n      windspeedProfile.x =\n        windbarbsProfile.x + windbarbsProfile.width;\n    }\n    if (xAxis.height === undefined)\n      xAxis.height = this.svgNode.height() * 0.06;\n    if (diagram.height === undefined)\n      diagram.height =\n        this.svgNode.height() - xAxis.height - 2 * defaultPadding;\n    if (yAxis.height === undefined)\n      yAxis.height = diagram.height;\n    if (windbarbsProfile.height === undefined)\n      windbarbsProfile.height = diagram.height;\n    if (windspeedProfile.height === undefined)\n      windspeedProfile.height = diagram.height;\n    if (diagram.y === undefined)\n      diagram.y = defaultPadding;\n    if (yAxis.y === undefined)\n      yAxis.y = diagram.y;\n    if (windbarbsProfile.y === undefined)\n      windbarbsProfile.y = diagram.y;\n    if (windspeedProfile.y === undefined)\n      windspeedProfile.y = diagram.y;\n    if (xAxis.width === undefined)\n      xAxis.width = diagram.width;\n    if (xAxis.x === undefined)\n      xAxis.x = diagram.x;\n    if (xAxis.y === undefined)\n      xAxis.y = diagram.y + diagram.height;\n    if (xAxis.height === undefined)\n      xAxis.height = defaultPadding;\n    \n    // Defintionen zum Hodograph\n    if (hodograph.x === undefined)\n      hodograph.x = diagram.x;\n    if (hodograph.y === undefined)\n      hodograph.y = diagram.y;\n    if (hodograph.width === undefined)\n      hodograph.width = Math.min(diagram.width, diagram.height) * 0.4;\n    if (hodograph.height === undefined)\n      hodograph.height = hodograph.width;\n    \n    this.diagram = new TDDiagram(diagram);\n    this.appendPlotArea(this.diagram);\n    \n    this.yAxis = new yAxisClass(yAxis);\n    this.appendPlotArea(this.yAxis);\n    \n    this.xAxis = new xAxisClass(xAxis);\n    this.appendPlotArea(this.xAxis);\n    \n    this.windbarbsProfile = new WindbarbsProfile(windbarbsProfile);\n    this.appendPlotArea(this.windbarbsProfile);\n    \n    this.windspeedProfile = new WindspeedProfile(windspeedProfile);\n    this.appendPlotArea(this.windspeedProfile);\n    \n    this.hodograph = new Hodograph(hodograph);\n    this.appendPlotArea(this.hodograph);\n    \n    if (coordinateSystem.type === undefined)\n      coordinateSystem.type = 'skewTlogP';\n    coordinateSystem.width = diagram.width;\n    coordinateSystem.height = diagram.height;\n    \n    /**\n     * @type module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n     * @private\n     */\n    this._coordinateSystem;\n    this.coordinateSystem =\n      (coordinateSystem.type == 'stueve') ?\n        new StueveDiagram(coordinateSystem) :\n        (coordinateSystem.type == 'emagram') ?\n          new Emagram(coordinateSystem) :\n          new SkewTlogPDiagram(coordinateSystem);\n  }\n  \n  /**\n   * Coordinate system for the different plot areas.\n   * \n   * @type module:meteoJS/thermodynamicDiagram/coordinateSystem.CoordinateSystem\n   * @public\n   */\n  get coordinateSystem() {\n    return this._coordinateSystem;\n  }\n  set coordinateSystem(coordinateSystem) {\n    this._coordinateSystem = coordinateSystem;\n    this.exchangeCoordinateSystem(this._coordinateSystem);\n  }\n  \n  /**\n   * Returns the object of the thermodynamic diagram plot area.\n   * \n   * @returns {module:meteoJS/thermodynamicDiagram/tdDiagram.TDDiagram} Diagram object.\n   * @deprecated\n   */\n  getDiagramPlotArea() {\n    return this.diagram;\n  }\n}\nexport default ThermodynamicDiagram;\n\n/**\n * Returns normalized PlotArea options.\n * \n * @private\n */\nfunction normalizePlotAreaOptions({\n  svgNode = undefined,\n  coordinateSystem = undefined,\n  x = undefined,\n  y = undefined,\n  width = undefined,\n  height = undefined,\n  style = {},\n  visible = true,\n  events = {},\n  hoverLabels = {},\n  ...result\n}) {\n  result.svgNode = svgNode;\n  result.coordinateSystem = coordinateSystem;\n  result.x = x;\n  result.y = y;\n  result.width = width;\n  result.height = height;\n  result.style = style;\n  result.visible = visible;\n  result.events = events;\n  result.hoverLabels = hoverLabels;\n  return result;\n}","/**\n * @module meteoJS\n */\n\n/**\n * jQuery object.\n * \n * @external jQuery\n * @see {@link https://api.jquery.com|API Doc}\n */\n\n/**\n * Any HTML element.\n * \n * @external HTMLElement\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement}\n */\n\n/**\n * Any event.\n * \n * @external Event\n * @see {@link https://developer.mozilla.org/de/docs/Web/API/Event}\n */\n\n/**\n * XMLHttpRequest object.\n * \n * @external XMLHttpRequest\n * @see {@link https://developer.mozilla.org/de/docs/Web/API/XMLHttpRequest}\n */\n\n/**\n * SVG object.\n * \n * @external SVG\n * @see {@link https://svgjs.com/docs/3.0/|API Doc}\n */\n\nimport 'regenerator-runtime/runtime.js';\n\nimport * as calc from './calc.js';\nexport { calc };\n\nimport { default as addEventFunctions } from './Events.js';\nexport const events = {\n  addEventFunctions\n};\n\nexport { default as RepetitiveRequests } from './RepetitiveRequests.js';\n\nexport { default as Timeline } from './Timeline.js';\nimport { default as Animation,\n  insertFrequencyInput,\n  insertFrequencyRange,\n  insertFrequencyButtonGroup,\n  insertRestartPauseInput,\n  insertRestartPauseRange,\n  insertRestartPauseButtonGroup } from './timeline/Animation.js';\nimport { default as ToggleButton } from './timeline/animation/ToggleButton.js';\nimport {\n  default as Visualisation,\n  makeTimeTextCallbackFunction\n} from './timeline/Visualisation.js';\nimport { default as Text } from './timeline/visualisation/Text.js';\nimport { default as Slider } from './timeline/visualisation/Slider.js';\nimport { default as bsButtons } from './timeline/visualisation/bsButtons.js';\nimport { default as bsDropdown } from './timeline/visualisation/bsDropdown.js';\nexport const timeline = {\n  Animation,\n  Visualisation,\n  makeTimeTextCallbackFunction,\n  animation: {\n    ToggleButton,\n    insertFrequencyInput,\n    insertFrequencyRange,\n    insertFrequencyButtonGroup,\n    insertRestartPauseInput,\n    insertRestartPauseRange,\n    insertRestartPauseButtonGroup\n  },\n  visualisation: {\n    Text,\n    Slider,\n    bsButtons,\n    bsDropdown\n  }\n};\n\nexport { default as Synview } from './Synview.js';\nimport { default as Collection } from './synview/Collection.js';\nimport { default as Map } from './synview/SynviewMap.js';\nimport { default as MapOL } from './synview/map/MapOL.js';\nimport { default as MapLL } from './synview/map/MapLL.js';\nimport { default as Resource } from './synview/Resource.js';\nimport { default as GeoJSON } from './synview/resource/GeoJSON.js';\nimport { default as GeoJSONTile } from './synview/resource/GeoJSONTile.js';\nimport { default as Image } from './synview/resource/Image.js';\nimport { default as OSM } from './synview/resource/OSM.js';\nimport { default as Vector } from './synview/resource/Vector.js';\nimport { default as VectorTile } from './synview/resource/VectorTile.js';\nimport { default as ResourceCollection } from './synview/ResourceCollection.js';\nimport { default as Tooltip } from './synview/Tooltip.js';\nimport { default as Type } from './synview/Type.js';\nimport { default as TypeCollection } from './synview/TypeCollection.js';\nexport const synview = {\n  Collection,\n  Map,\n  map: {\n    MapOL,\n    MapLL\n  },\n  Resource,\n  resource: {\n    GeoJSON,\n    GeoJSONTile,\n    Image,\n    OSM,\n    Vector,\n    VectorTile\n  },\n  ResourceCollection,\n  Tooltip,\n  Type,\n  TypeCollection\n};\n\nexport { Tooltip } from './Tooltip.js';\nimport BootstrapTooltip from './tooltip/BootstrapTooltip.js';\nexport const tooltip = {\n  BootstrapTooltip\n};\n\nexport { default as Sounding } from './Sounding.js';\nimport { default as Parcel } from './sounding/Parcel.js';\nexport const sounding = {\n  Parcel\n};\n\nexport { default as ThermodynamicDiagramPluggable } from './ThermodynamicDiagramPluggable.js';\nexport { default as ThermodynamicDiagram } from './ThermodynamicDiagram.js';\nimport CoordinateSystem from './thermodynamicDiagram/CoordinateSystem.js';\nimport StueveDiagram from './thermodynamicDiagram/coordinateSystem/StueveDiagram.js';\nimport Emagram from './thermodynamicDiagram/coordinateSystem/Emagram.js';\nimport SkewTlogPDiagram from './thermodynamicDiagram/coordinateSystem/SkewTlogPDiagram.js';\nimport DiagramSounding from './thermodynamicDiagram/DiagramSounding.js';\nimport Hodograph from './thermodynamicDiagram/Hodograph.js';\nimport TDDiagram from './thermodynamicDiagram/TDDiagram.js';\nimport { drawWindbarbInto } from './thermodynamicDiagram/Functions.js';\nimport WindbarbsProfile from './thermodynamicDiagram/WindbarbsProfile.js';\nimport WindspeedProfile from './thermodynamicDiagram/WindspeedProfile.js';\nimport xAxis from './thermodynamicDiagram/axes/xAxis.js';\nimport yAxis from './thermodynamicDiagram/axes/yAxis.js';\nexport const thermodynamicDiagram = {\n  CoordinateSystem,\n  coordinateSystem: {\n    StueveDiagram,\n    Emagram,\n    SkewTlogPDiagram\n  },\n  DiagramSounding,\n  Hodograph,\n  TDDiagram,\n  functions: {\n    drawWindbarbInto\n  },\n  WindbarbsProfile,\n  WindspeedProfile,\n  axes: {\n    xAxis,\n    yAxis\n  }\n};"],"sourceRoot":""}