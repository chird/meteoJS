/*! For license information please see meteoJS.min.js.LICENSE.txt */
var meteoJS,SVG=SVG||{},jQuery=jQuery||{},ol=ol||{layer:{},source:{},format:{},style:{}},Popper=Popper||{},bootstrap=bootstrap||{};meteoJS=(()=>{var t={588:(t,e,n)=>{function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){"use strict";var e,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var o=e&&e.prototype instanceof m?e:m,r=Object.create(o.prototype),a=new j(i||[]);return r._invoke=function(t,e,n){var i=d;return function(o,r){if(i===h)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw r;return N()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=P(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var u=f(t,e,n);if("normal"===u.type){if(i=n.done?v:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=v,n.method="throw",n.arg=u.arg)}}}(t,n,a),r}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function m(){}function b(){}function g(){}var w={};w[a]=function(){return this};var _=Object.getPrototypeOf,O=_&&_(_(E([])));O&&O!==n&&o.call(O,a)&&(w=O);var S=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(r,a,s,u){var l=f(t[r],t,a);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===i(d)&&o.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(d).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}))}u(l.arg)}var r;this._invoke=function(t,i){function o(){return new e((function(e,o){n(t,i,e,o)}))}return r=r?r.then(o,o):o()}}function P(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var r=o.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}return{next:N}}function N(){return{value:e,done:!0}}return b.prototype=S.constructor=g,g.constructor=b,b.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},k(T.prototype),T.prototype[s]=function(){return this},t.AsyncIterator=T,t.async=function(e,n,i,o,r){void 0===r&&(r=Promise);var a=new T(c(e,n,i,o),r);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),S[a]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=E,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(i,o){return s.type="throw",s.arg=t,n.next=i,o&&(n.method="next",n.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:E(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),y}},t}("object"===i(t=n.nmd(t))?t.exports:{});try{regeneratorRuntime=o}catch(t){Function("r","regeneratorRuntime = r")(o)}},857:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Modelviewer:()=>gi,RepetitiveRequests:()=>G,Sounding:()=>Bo,Synview:()=>_e,ThermodynamicDiagram:()=>lu,ThermodynamicDiagramPluggable:()=>va,Timeline:()=>q,Tooltip:()=>Fn,calc:()=>i,events:()=>Tu,modelviewer:()=>ju,sounding:()=>Eu,synview:()=>xu,thermodynamicDiagram:()=>Nu,timeline:()=>Pu,tooltip:()=>Ru});var i={};function o(t){if(void 0!==t&&!isNaN(t))return 44330.769*(1-Math.pow(t/1013.25,.19029496))}function r(t){if(void 0!==t&&!isNaN(t))return 1013.25*Math.pow(1-t/44330.769,5.255)}function a(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return t*Math.pow(1e3/e,.286)}function s(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return t*Math.pow(e/1e3,.286)}function u(t,e){if(void 0!==e&&!isNaN(e)){for(var n=void 0,i=Math.pow(1e3/e,.286),o=273,r=20,a=0;Math.abs(r)>.1&&a<100;)a++,n=p(o,e),(o*i*Math.exp(2.5*n/o)-t)*r>0&&(r*=-.5),o+=r;return o}}function l(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e)){var n=.4343*Math.log(t*e/(622+t));return Math.pow(10,.0498646455*n+2.4082965)-7.07475+38.9114*Math.pow(Math.pow(10,.0915*n)-1.2035,2)}}function c(t,e,n){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===n||isNaN(n))){for(var i=e-273.15,o=1,r=10,a=1,s=6.112*Math.exp(17.67*i/(i+243.5));Math.abs(o)>.05&&0!=(o=s-(6.112*Math.exp(17.67*i/(i+243.5))-n*(t-273.15-i)*66e-5*(1+.00115*i)))&&(o<0?-1!=a&&(a=-1,r/=10):1!=a&&(a=1,r/=10),!(Math.abs(o)<=.05));)i+=r*a;return i+273.15}}function f(t,e,n){var i=a(t,n);if(!(void 0===i||void 0===e||isNaN(e)||void 0===t||isNaN(t)||void 0===n||isNaN(n)))return i*Math.exp(2.4819*p(e,n)/y(t,e))}function d(t){if(void 0!==t&&!isNaN(t)){var e=new Array(6.1104546,.4442351,.014302099,.00026454708,30357098e-13,2.0972268e-8,60487594e-18,-1469687e-19),n=new Array(.06485546857696639,.03783195122560735,.02224449342887902,.013182892842468312,.007874020771412448,.004739730494884733,.0028751203550435793,.001757430376758103,.0010824173951885098,.0006717089391856059,.0004199647026320394,.0002645243638634699,.00016784796373681322,.00010728539763162038,6907426344961356e-20,4479404897680843e-20,2925704195639373e-20,19245291263499416e-21,12749137241074795e-21,8505070102755051e-21,5713400253349711e-21,3864650296738762e-21,2632109719650053e-21,18049107293057043e-22,12460785055581605e-22,8.660705713468708e-7,6.059822176688955e-7,4.2682119794324277e-7,3.026165085143795e-7,2.15963854234914e-7,1.5512895457833687e-7),i=0;if((t-=273.15)>-50)i=e[0]+t*(e[1]+t*(e[2]+t*(e[3]+t*(e[4]+t*(e[5]+t*(e[6]+t*e[7]))))));else{var o=(-t-50)/5;i=0<n.length-1?n[0]+o%1*(n[1]-n[0]):1e-7}return i}}function p(t,e){var n=d(t);if(void 0!==n&&void 0!==e&&!isNaN(e))return 621.97*n/(e-n)}function h(t,e){if(void 0!==e&&!isNaN(e)){for(var n=1013,i=100;n-i>10;){var o=i+(n-i)/2,r=p(s(t,o),o);if(void 0===r)return;r<e?i=o:n=o}return i+(n-i)/2}}function v(t,e){if(void 0!==t&&!isNaN(t)){for(var n=323,i=223;n-i>.1;){var o=i+(n-i)/2,r=h(o,e);if(void 0===r)return;r>t?i=o:n=o}return i+(n-i)/2}}function y(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return e-(.001296*e-.15772)*(t-e)}function m(t){return void 0===t||isNaN(t)?void 0:t+273.15}function b(t){return void 0===t||isNaN(t)?void 0:t-273.15}function g(t){return void 0===t||isNaN(t)?void 0:3.6*t}function w(t){return void 0===t||isNaN(t)?void 0:t/3.6}function _(t){return void 0===t||isNaN(t)?void 0:900*t/463}function O(t){return void 0===t||isNaN(t)?void 0:463*t/900}function S(t){return void 0===t||isNaN(t)?void 0:Math.min(12,Math.pow(t/.836,2/3))}function k(t){return void 0===t||isNaN(t)?void 0:.836*Math.pow(t,1.5)}function T(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return 153*b(t)+.9985*e-304.26}function P(t,e,n,i){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===n||isNaN(n))){if(0==e)return t;var o=.02896;if(void 0===i&&(i=n),n==i)return t*Math.exp(9.807*-o/8.314/n*e);var r=(n-i)/e;return t*Math.exp(9.807*o/8.314/r*Math.log(1-r*e/n))}}function x(t,e,n){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===n||isNaN(n))){var i=d(e)*n;return 100*(t-i)/287.058/e+100*i/461.495/e}}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e,n){"listeners"in this&&void 0!==this.listeners||(this.listeners={}),t in this.listeners||(this.listeners[t]={});var i=Math.random().toString(36).substr(2,9);return this.listeners[t][i]={callback:e,thisArg:n},i}function E(t,e){"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&e in this.listeners[t]&&delete this.listeners[t][e]}function N(t,e,n){"once_listeners"in this&&void 0!==this.once_listeners||(this.once_listeners={}),t in this.once_listeners&&"push"in this.once_listeners[t]||(this.once_listeners[t]=[]),this.once_listeners[t].push({callback:e,thisArg:n})}function C(t){return"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&Object.keys(this.listeners[t]).length||"once_listeners"in this&&t in this.once_listeners&&Object.keys(this.once_listeners[t]).length}function I(t){var e=this,n=Array.prototype.slice.call(arguments);if(n.shift(),"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&"object"==R(this.listeners[t])&&Object.keys(this.listeners[t]).forEach((function(i){e.listeners[t][i].callback.apply(void 0===e.listeners[t][i].thisArg?e:e.listeners[t][i].thisArg,n)})),"once_listeners"in this&&void 0!==this.once_listeners&&t in this.once_listeners&&"forEach"in this.once_listeners[t]){var i=this.once_listeners[t];this.once_listeners[t]=[],i.forEach((function(t){t.callback.apply(void 0===t.thisArg?e:t.thisArg,n)}))}}n.r(i),n.d(i,{altitudeISAByPres:()=>o,densityHumidAirByPressureAndTempAndRelHumidity:()=>x,dewpointByHMRAndPres:()=>l,equiPotentialTempByTempAndDewpointAndPres:()=>f,lclByPotentialTempAndHMR:()=>h,lclTemperatureByTempAndDewpoint:()=>y,potentialTempByLCLAndHMR:()=>v,potentialTempByTempAndPres:()=>a,pressureByBarometricFormula:()=>P,pressureISAByAltitude:()=>r,saturationHMRByTempAndPres:()=>p,saturationPressureByTemp:()=>d,snowlineByTemp850hPaAndAltidude:()=>T,tempByEquiPotTempAndPres:()=>u,tempByPotentialTempAndPres:()=>s,tempCelsiusToKelvin:()=>m,tempKelvinToCelsius:()=>b,wetbulbTempByTempAndDewpointAndPres:()=>c,windspeedBFToMS:()=>k,windspeedKMHToMS:()=>w,windspeedKNToMS:()=>O,windspeedMSToBF:()=>S,windspeedMSToKMH:()=>g,windspeedMSToKN:()=>_}),n(588);const D=function(t){t.on=j,t.un=E,t.once=N,t.hasListener=C,t.trigger=I};function B(t,e,n,i,o,r,a){try{var s=t[r](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,o)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var V=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,i=void 0===n?void 0:n,o=e.user,r=void 0===o?"":o,a=e.password,s=void 0===a?"":a,u=e.start,l=void 0===u||u,c=e.defaultTimeout,f=void 0===c?void 0:c,d=e.timeoutOnError,p=void 0===d?void 0:d,h=e.pauseOnHiddenDocument,v=void 0!==h&&h,y=e.responseType,m=void 0===y?"":y;A(this,t),this._url=i,this._user=r,this._password=s,this._isStarted=l,this._defaultTimeout=f,this._timeoutOnError=p,this._pauseOnHiddenDocument=v,this._initPauseOnHiddenDocument(),this._responseType=m,this._timeoutID=void 0,this._loading=!1,this._isStarted&&this.start()}var e,n,i,o;return e=t,(n=[{key:"start",value:function(){this._isStarted=!0,this._startRequest()}},{key:"stop",value:function(){this._isStarted=!1,void 0!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=void 0)}},{key:"_planRequest",value:function(t){var e=this,n=t.delay;void 0===this._timeoutID&&(this._timeoutID=setTimeout((function(){e._startRequest()}),n))}},{key:"_startRequest",value:function(){var t=this;void 0!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=void 0),this._makeRequest().then((function(e){var n=e.request;if(t._isStarted){var i=t._defaultTimeout,o=n.getResponseHeader("Cache-Control");if(null!==o){var r=/(^|,\s*)max-age=([0-9]+)($|\s*,)/.exec(o);null!==r&&r[2]>0&&(i=Math.round(1e3*r[2]))}t.trigger("success:request",{request:n}),void 0!==i&&t._planRequest({delay:i})}}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.request;t._isStarted&&void 0!==n&&(t.trigger("error:request",{request:n}),void 0!==t._timeoutOnError&&t._planRequest({delay:t._timeoutOnError}))}))}},{key:"_makeRequest",value:(i=regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.trigger("before:request"),t.abrupt("return",new Promise((function(t,n){if(void 0!==e._url)if(e._loading)n();else{e._loading=!0;var i=new XMLHttpRequest;void 0!==e.responseType&&(i.responseType=e.responseType),i.addEventListener("load",(function(){e._loading=!1,200==i.status?t({request:i}):n({request:i})})),i.addEventListener("error",(function(){e._loading=!1,n({request:i})})),i.open("GET",e._url,!0,e._user,e._password),i.send()}else n()})));case 2:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var r=i.apply(t,e);function a(t){B(r,n,o,a,s,"next",t)}function s(t){B(r,n,o,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"_initPauseOnHiddenDocument",value:function(){var t=this;this._pauseOnHiddenDocument&&document.addEventListener("visibilitychange",(function(){"hidden"in document&&(document.hidden?t.stop():t.start())}))}},{key:"url",get:function(){return this._url},set:function(t){this._url=t}},{key:"user",get:function(){return this._user},set:function(t){this._user=t}},{key:"password",get:function(){return this._password},set:function(t){this._password=t}},{key:"responseType",get:function(){return this._responseType},set:function(t){this._responseType=t}}])&&M(e.prototype,n),t}();D(V.prototype);const G=V;function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.maxTimeGap,i=void 0===n?void 0:n,o=e.keyboardNavigation,r=void 0===o?{}:o;F(this,t),this.maxTimeGap=i,this.selectedTime=new Date("invalid"),this.times=[],this.enabledTimes=[],this.allEnabledTimes=[],this.timesByKey={},this._keyboardNavigation={},this._initKeyboardNavigation(r)}var e,n;return e=t,(n=[{key:"getSelectedTime",value:function(){return this.selectedTime}},{key:"setSelectedTime",value:function(t){return this._setSelectedTime(H(t,this.times)>-1?t:new Date("invalid")),this}},{key:"getTimes",value:function(){return this.times}},{key:"getEnabledTimes",value:function(){return this.enabledTimes}},{key:"getAllEnabledTimes",value:function(){return this.allEnabledTimes}},{key:"setTimesBySetID",value:function(t,e){return this.timesByKey[t]={times:e,enabled:e},this._updateTimes(),this._updateEnabledTimes(),this}},{key:"setEnabledTimesBySetID",value:function(t,e){return t in this.timesByKey&&(this.timesByKey[t].enabled=e,this._updateEnabledTimes()),this}},{key:"getSetIDs",value:function(){return Object.keys(this.timesByKey)}},{key:"deleteSetID",value:function(t){return t in this.timesByKey&&(delete this.timesByKey[t],this._updateTimes(),this._updateEnabledTimes()),this}},{key:"first",value:function(){return this._setSelectedTime(this.getFirstEnabledTime()),this}},{key:"last",value:function(){return this._setSelectedTime(this.getLastEnabledTime()),this}},{key:"next",value:function(){return this._setSelectedTime(this.getNextEnabledTime()),this}},{key:"prev",value:function(){return this._setSelectedTime(this.getPrevEnabledTime()),this}},{key:"nextAllEnabledTime",value:function(){return this._setSelectedTime(this.getNextAllEnabledTime()),this}},{key:"prevAllEnabledTime",value:function(){return this._setSelectedTime(this.getPrevAllEnabledTime()),this}},{key:"add",value:function(t,e){var n=this.getSelectedTime(),i=0;switch(e){case"hours":case"h":i=3600*t*1e3;break;case"minutes":case"m":i=60*t*1e3;break;case"seconds":case"s":i=1e3*t;break;case"milliseconds":case"ms":i=t}switch(0!=i&&(n=new Date(n.valueOf()+i)),e){case"years":case"y":n.setUTCFullYear(n.getUTCFullYear()+t);break;case"months":case"M":n.setUTCMonth(n.getUTCMonth()+t);break;case"days":case"d":n.setUTCDate(n.getUTCDate()+t)}return H(n,this.times)>-1&&this._setSelectedTime(n),this}},{key:"sub",value:function(t,e){var n=this.getSelectedTime(),i=0;switch(e){case"hours":case"h":i=3600*t*1e3;break;case"minutes":case"m":i=60*t*1e3;break;case"seconds":case"s":i=1e3*t;break;case"milliseconds":case"ms":i=t}switch(0!=i&&(n=new Date(n.valueOf()-i)),e){case"years":case"y":n.setUTCFullYear(n.getUTCFullYear()-t);break;case"months":case"M":n.setUTCMonth(n.getUTCMonth()-t);break;case"days":case"d":n.setUTCDate(n.getUTCDate()-t)}return H(n,this.times)>-1&&this._setSelectedTime(n),this}},{key:"getFirstEnabledTime",value:function(){return this.enabledTimes.length>0?this.enabledTimes[0]:new Date("invalid")}},{key:"getLastEnabledTime",value:function(){return this.enabledTimes.length>0?this.enabledTimes[this.enabledTimes.length-1]:new Date("invalid")}},{key:"getNextEnabledTime",value:function(){if(this.enabledTimes.length<1)return new Date("invalid");var t=H(this.getSelectedTime(),this.enabledTimes);if(t>-1)return++t<this.enabledTimes.length?this.enabledTimes[t]:this.enabledTimes[this.enabledTimes.length-1];if(isNaN(this.getSelectedTime()))return this.enabledTimes[0];for(var e=new Date("invalid"),n=0;n<this.enabledTimes.length;n++)if(this.getSelectedTime().valueOf()<this.enabledTimes[n].valueOf()){e=this.enabledTimes[n];break}return e}},{key:"getPrevEnabledTime",value:function(){if(this.enabledTimes.length<1)return new Date("invalid");var t=H(this.getSelectedTime(),this.enabledTimes);if(t>-1)return-1<--t?this.enabledTimes[t]:this.enabledTimes[0];if(isNaN(this.getSelectedTime()))return this.enabledTimes[0];for(var e=new Date("invalid"),n=this.enabledTimes.length-1;n>=0;n--)if(this.getSelectedTime().valueOf()>this.enabledTimes[n].valueOf()){e=this.enabledTimes[n];break}return e}},{key:"getFirstAllEnabledTime",value:function(){return this.allEnabledTimes.length>0?this.allEnabledTimes[0]:new Date("invalid")}},{key:"getLastAllEnabledTime",value:function(){return this.allEnabledTimes.length>0?this.allEnabledTimes[this.allEnabledTimes.length-1]:new Date("invalid")}},{key:"getNextAllEnabledTime",value:function(){if(this.allEnabledTimes.length<1)return new Date("invalid");var t=H(this.getSelectedTime(),this.allEnabledTimes);if(t>-1)return++t<this.allEnabledTimes.length?this.allEnabledTimes[t]:this.allEnabledTimes[this.allEnabledTimes.length-1];if(isNaN(this.getSelectedTime()))return this.allEnabledTimes[0];for(var e=new Date("invalid"),n=0;n<this.allEnabledTimes.length;n++)if(this.getSelectedTime().valueOf()<this.allEnabledTimes[n].valueOf()){e=this.allEnabledTimes[n];break}return e}},{key:"getPrevAllEnabledTime",value:function(){if(this.allEnabledTimes.length<1)return new Date("invalid");var t=H(this.getSelectedTime(),this.allEnabledTimes);if(t>-1)return-1<--t?this.allEnabledTimes[t]:this.allEnabledTimes[0];if(isNaN(this.getSelectedTime()))return this.allEnabledTimes[0];for(var e=new Date("invalid"),n=this.allEnabledTimes.length-1;n>=0;n--)if(this.getSelectedTime().valueOf()>this.allEnabledTimes[n].valueOf()){e=this.allEnabledTimes[n];break}return e}},{key:"isTimeEnabled",value:function(t){return this.enabledTimes.reduce((function(e,n){return n.valueOf()==t.valueOf()||e}),!1)}},{key:"isTimeAllEnabled",value:function(t){return this.allEnabledTimes.reduce((function(e,n){return n.valueOf()==t.valueOf()||e}),!1)}},{key:"isFirstEnabledTime",value:function(){return this.getFirstEnabledTime().valueOf()==this.getSelectedTime().valueOf()}},{key:"isLastEnabledTime",value:function(){return this.getLastEnabledTime().valueOf()==this.getSelectedTime().valueOf()}},{key:"_setSelectedTime",value:function(t){var e=this.selectedTime;return this.selectedTime=t,this.trigger("change:time",e),this.selectedTime}},{key:"_updateTimes",value:function(){this.times=[];var t=[],e={};for(var n in this.timesByKey)this.timesByKey[n].times.forEach((function(n){n.valueOf()in e||(t.push(n),e[n.valueOf()]=n)}));K(t),t.forEach((function(t){if(this.times.length<1)this.times.push(t);else{var e=this.times[this.times.length-1];if(void 0!==this.maxTimeGap&&t.valueOf()-e.valueOf()>1e3*this.maxTimeGap){var n=e;do{n=new Date(n.getTime()+1e3*this.maxTimeGap),this.times.push(n)}while(t.valueOf()-n.valueOf()>1e3*this.maxTimeGap)}this.times.push(t)}}),this),K(this.times),this.trigger("change:times")}},{key:"_updateEnabledTimes",value:function(){this.enabledTimes=[],this.allEnabledTimes=[];var t={},e={};for(var n in this.timesByKey)this.timesByKey[n].enabled.forEach((function(n){n.valueOf()in t||(this.enabledTimes.push(n),t[n.valueOf()]=n),n.valueOf()in e?e[n.valueOf()]++:e[n.valueOf()]=1}),this);for(var i in K(this.enabledTimes),e)e[i]==Object.keys(this.timesByKey).length&&this.allEnabledTimes.push(t[i]);K(this.allEnabledTimes),this.trigger("change:enabledTimes")}},{key:"_initKeyboardNavigation",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.enabled,i=void 0!==n&&n,o=e.first,r=void 0===o?36:o,a=e.last,s=void 0===a?35:a,u=e.prev,l=void 0===u?37:u,c=e.next,f=void 0===c?39:c,d=e.prevAllEnabledTime,p=void 0===d?[37,"ctrl"]:d,h=e.nextAllEnabledTime,v=void 0===h?[39,"ctrl"]:h,y=e.add,m=void 0===y?void 0:y,b=e.sub,g=void 0===b?void 0:b;void 0===m&&(m={"3h":[39,"ctrl","shift"],"6h":[39,"shift"],"12h":[39,"alt","shift"],"24h":[39,"alt"]}),void 0===g&&(g={"3h":[37,"ctrl","shift"],"6h":[37,"shift"],"12h":[37,"alt","shift"],"24h":[37,"alt"]}),this._keyboardNavigation={enabled:i,first:r,last:s,prev:l,next:f,prevAllEnabledTime:p,nextAllEnabledTime:v,add:m,sub:g},document&&this._keyboardNavigation.enabled&&document.addEventListener("keydown",(function(e){Object.keys(t._keyboardNavigation).forEach((function(n){"enabled"!=n&&(/^(add|sub)$/.test(n)?Object.keys(t._keyboardNavigation[n]).forEach((function(i){var o=i.match(/^([0-9]+)\s*([a-zA-Z]+)$/);null!==o&&U(e,t._keyboardNavigation[n][i])&&t[n](+o[1],o[2])})):n in t&&U(e,t._keyboardNavigation[n])&&t[n]())}))}))}}])&&X(e.prototype,n),t}();D(z.prototype);const q=z;var H=function(t,e){return e.findIndex((function(e){return e.valueOf()==t.valueOf()}))};function K(t){t.sort((function(t,e){return t.valueOf()-e.valueOf()}))}function U(t,e){if("object"==Y(e)&&"forEach"in e||(e=[e]),0==e.length)return!1;var n=[["ctrl","ctrlKey"],["alt","altKey"],["shift","shiftKey"],["meta","metaKey"]].reduce((function(n,i){return n&&(e.indexOf(i[0])>-1?t[i[1]]:!t[i[1]])}),!0);return e.forEach((function(e){switch(e){case"ctrl":case"alt":case"shift":case"meta":break;default:e!=t.keyCode&&(n=!1)}})),n}const $=jQuery;var Z=n.n($);function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Q=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.timeline,o=n.restartPause,r=void 0===o?1.8:o,a=n.imagePeriod,s=void 0===a?.2:a,u=n.imageFrequency,l=n.enabledStepsOnly,c=void 0===l||l,f=n.allEnabledStepsOnly,d=void 0!==f&&f;W(this,t),this.options={timeline:i,restartPause:r,imagePeriod:s,imageFrequency:u,enabledStepsOnly:c,allEnabledStepsOnly:d},void 0===this.options.timeline&&(this.options.timeline=new q),void 0!==this.options.imageFrequency&&0!=this.options.imageFrequency&&(this.options.imagePeriod=1/this.options.imageFrequency),this.animationIntervalID=void 0,this.animationTimeoutID=void 0,this.animationStep=0,this.timesHash={},this.times=[];var p=function(){e.times=e.options.timeline[e._getTimelineTimesMethod()](),e.timesHash={},e.times.forEach((function(t,n){return e.timesHash[t.valueOf()]=n}))};this.options.timeline.on(this._getTimelineChangeTimesEvent(),p),p()}var e,n;return e=t,(n=[{key:"getImagePeriod",value:function(){return this.options.imagePeriod}},{key:"setImagePeriod",value:function(t){return this.options.imagePeriod=t,this.isStarted()&&this._updateAnimation(),this.trigger("change:imageFrequency"),this}},{key:"getImageFrequency",value:function(){return 1/this.options.imagePeriod}},{key:"setImageFrequency",value:function(t){return 0!=t&&this.setImagePeriod(1/t),this}},{key:"getRestartPause",value:function(){return this.options.restartPause}},{key:"setRestartPause",value:function(t){return this.options.restartPause=Number(t),this.trigger("change:restartPause"),this}},{key:"isStarted",value:function(){return void 0!==this.animationIntervalID||void 0!==this.animationTimeoutID}},{key:"start",value:function(){this.options.timeline.getSelectedTime().valueOf()in this.timesHash&&this._setStep(this.timesHash[this.options.timeline.getSelectedTime().valueOf()]),this.isStarted()||this._updateAnimation(),this.trigger("start:animation")}},{key:"stop",value:function(){this._clearAnimation(),this.trigger("stop:animation")}},{key:"toggle",value:function(){this.isStarted()?this.stop():this.start()}},{key:"_setStep",value:function(t){0<=t&&t<this._getCount()&&(this.animationStep=t)}},{key:"_getTimelineChangeTimesEvent",value:function(){return this.options.enabledStepsOnly||this.options.allEnabledStepsOnly?"change:enabledTimes":"change:times"}},{key:"_getTimelineTimesMethod",value:function(){return this.options.allEnabledStepsOnly?"getAllEnabledTimes":this.options.enabledStepsOnly?"getEnabledTimes":"getTimes"}},{key:"_getCount",value:function(){return this.options.timeline[this._getTimelineTimesMethod()]().length}},{key:"_updateAnimation",value:function(){this._clearAnimation(),this.animationStep<this._getCount()-1?this._initAnimation():this._initRestartPause()}},{key:"_initAnimation",value:function(){var t=this;void 0===this.animationIntervalID&&(this.animationIntervalID=window.setInterval((function(){t.animationStep++,t.animationStep<t.times.length&&t.options.timeline.setSelectedTime(t.times[t.animationStep]),t.animationStep>=t._getCount()-1&&(t.trigger("end:animation"),t._clearAnimation(),t._initRestartPause())}),1e3*this.options.imagePeriod))}},{key:"_initRestartPause",value:function(){var t=this;void 0===this.animationTimeoutID&&(this.animationTimeoutID=window.setTimeout((function(){t.animationStep=0,t.trigger("restart:animation"),t.animationStep<t.times.length&&t.options.timeline.setSelectedTime(t.times[t.animationStep]),t._clearAnimation(),t._initAnimation()}),1e3*(this.options.imagePeriod+this.options.restartPause)))}},{key:"_clearAnimation",value:function(){void 0!==this.animationIntervalID&&(window.clearInterval(this.animationIntervalID),this.animationIntervalID=void 0),void 0!==this.animationTimeoutID&&(window.clearTimeout(this.animationTimeoutID),this.animationTimeoutID=void 0)}}])&&J(e.prototype,n),t}();D(Q.prototype);const tt=Q;function et(t,e){var n=e.animation,i=e.suffix,o=void 0===i?"fps":i,r=Z()("<input>").addClass("form-control").attr("type","number").attr("min",1).attr("step",1),a=Z()("<div>").addClass("input-group").append(r).append(Z()("<div>").addClass("input-group-append").append(Z()("<span>").addClass("input-group-text").text(o)));r.on("change",(function(){return n.setImageFrequency(r.val())}));var s=function(){return r.val(n.getImageFrequency())};return n.on("change:imageFrequency",s),s(),t.append(a),a}function nt(t,e){var n=e.animation,i=e.frequencies;i=i||[1];var o=Z()("<input>").addClass("custom-range").attr("type","range").attr("min",0).attr("max",i.length-1);o.on("change input",(function(){var t=o.val();t<i.length&&n.setImageFrequency(i[t])}));var r=function(){var t=i.indexOf(n.getImageFrequency());t>-1&&o.val(t)};return n.on("change:imageFrequency",r),r(),t.append(o),o}function it(t,e){var n=e.animation,i=e.suffix,o=void 0===i?"s":i,r=Z()("<input>").addClass("form-control").attr("type","number").attr("min",0).attr("step",.1),a=Z()("<div>").addClass("input-group").append(r).append(Z()("<div>").addClass("input-group-append").append(Z()("<span>").addClass("input-group-text").text(o)));r.on("change",(function(){return n.setRestartPause(r.val())}));var s=function(){return r.val(n.getRestartPause())};return n.on("change:restartPause",s),s(),t.append(a),a}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var st=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.timeline,i=void 0===n?void 0:n,o=e.node,r=void 0===o?void 0:o,a=e.animation,s=void 0===a?void 0:a,u=e.enabledStepsOnly,l=void 0===u||u,c=e.allEnabledStepsOnly,f=void 0!==c&&c,d=e.textInvalid,p=void 0===d?"-":d,h=e.getTimeText,v=void 0===h?void 0:h,y=e.outputTimezone,m=void 0===y?void 0:y;rt(this,t),this.options={timeline:i,node:r,animation:s,enabledStepsOnly:l,allEnabledStepsOnly:f,textInvalid:p,getTimeText:v,outputTimezone:m},void 0===this.options.timeline&&(this.options.timeline=new q),this.listeners=[],this.inputListener=void 0}var e,n;return e=t,(n=[{key:"setNode",value:function(t){if(void 0!==this.options.node&&this.emptyNode(),void 0===t)this.detachEventListeners(),this.options.node=t;else{this.options.node=t;var e=this.listeners.length>0;e||(this.attachEventListener(this.options.timeline,"change:time",(function(){this.onChangeTime()}),this),this.attachEventListener(this.options.timeline,"change:times",(function(){this.onChangeTimes()}),this),this.attachEventListener(this.options.timeline,"change:enabledTimes",(function(){this.onChangeTimes()}),this)),this.onInitNode(e),this.onChangeTimes(),this.onChangeTime()}return void 0===this.inputListener&&(this.inputListener=this.on("input",(function(){void 0!==this.options.animation&&this.options.animation.stop()}),this)),this}},{key:"getOutputTimezone",value:function(){return this.options.outputTimezone}},{key:"setOutputTimezone",value:function(t){var e=this.options.outputTimezone!=t;return this.options.outputTimezone=t,e&&void 0!==this.options.node&&(this.onChangeTimes(),this.onChangeTime()),this}},{key:"onChangeTime",value:function(){}},{key:"onChangeTimes",value:function(){}},{key:"emptyNode",value:function(){}},{key:"onInitNode",value:function(){}},{key:"getTimelineTimes",value:function(){var t=this.options.allEnabledStepsOnly?"getAllEnabledTimes":this.options.enabledStepsOnly?"getEnabledTimes":"getTimes";return this.options.timeline[t]()}},{key:"timeToText",value:function(t,e){return isNaN(t)?this.options.textInvalid:void 0!==this.options.getTimeText?this.options.getTimeText.call(this,t,e):t.toISOString()}},{key:"attachEventListener",value:function(t,e,n,i){this.listeners.push([t,e]),t.on(e,n,i)}},{key:"detachEventListeners",value:function(){this.listeners.forEach((function(t){"un"in t[0]?t[0].un(t[1]):"off"in t[0]&&t[0].off(t[1])})),this.listeners=[]}}])&&at(e.prototype,n),t}();D(st.prototype);const ut=st;function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ht(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vt(i);if(o){var n=vt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ht(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.format,i=void 0===n?void 0:n,o=ct(e,["format"]);return ft(this,a),(t=r.call(this,o)).options.format=i,t.setNode(t.options.node),t}return e=a,(n=[{key:"onChangeTime",value:function(){this.options.node.text(this.timeToText(this.options.timeline.getSelectedTime(),this.options.format))}},{key:"emptyNode",value:function(){this.options.node.text("")}}])&&dt(e.prototype,n),a}(ut);function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wt(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_t(i);if(o){var n=_t(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this,t)).times=[],e.timesIndexes={},e.setNode(e.options.node),e}return e=a,(n=[{key:"onChangeTime",value:function(){var t=this.options.timeline.getSelectedTime();t.valueOf()in this.timesIndexes?this.options.node.val(this.timesIndexes[t.valueOf()]+1):this.options.node.val(1)}},{key:"onChangeTimes",value:function(){this.times=this.getTimelineTimes(),this.timesIndexes={},this.times.forEach((function(t,e){this.timesIndexes[t.valueOf()]=e}),this),this.options.node.prop("max",this.times.length)}},{key:"onInitNode",value:function(t){if(this.options.node.prop("min",1),this.options.node.prop("step",1),!t){var e=this;this.attachEventListener(this.options.node,"change input",(function(){var t=+Z()(this).val();0<t&&t<=e.times.length&&e.options.timeline.setSelectedTime(e.times[t-1]),e.trigger("input")}))}}}])&&bt(e.prototype,n),a}(ut);function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rt(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jt(i);if(o){var n=jt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Rt(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.format,i=void 0===n?"HH":n,o=e.grouping,s=void 0===o?"daily":o,u=e.groupingFormat,l=void 0===u?"ddd, DD. MMM":u,c=e.classMain,f=void 0===c?"btn-toolbar":c,d=e.classButtonGroup,p=void 0===d?"btn-group":d,h=e.classButtonGroupMargin,v=void 0===h?"mr-2":h,y=e.classLabel,m=void 0===y?void 0:y,b=e.classLabelSpan,g=void 0===b?"d-block w-100":b,w=e.classButton,_=void 0===w?"btn":w,O=e.classButtonActive,S=void 0===O?"active":O,k=e.classButtonNotEnabled,T=void 0===k?"btn-light":k,P=e.classButtonEnabled,x=void 0===P?"btn-secondary":P,R=e.classButtonAllEnabled,j=void 0===R?"btn-primary":R,E=kt(e,["format","grouping","groupingFormat","classMain","classButtonGroup","classButtonGroupMargin","classLabel","classLabelSpan","classButton","classButtonActive","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled"]);return Tt(this,a),(t=r.call(this,E)).options.format=i,t.options.grouping=s,t.options.groupingFormat=l,t.options.classMain=f,t.options.classButtonGroup=p,t.options.classButtonGroupMargin=v,t.options.classLabel=m,t.options.classLabelSpan=g,t.options.classButton=_,t.options.classButtonActive=S,t.options.classButtonNotEnabled=T,t.options.classButtonEnabled=x,t.options.classButtonAllEnabled=j,t.toolbarNode=void 0,t.setNode(t.options.node),t}return e=a,(n=[{key:"onChangeTime",value:function(){if(void 0!==this.toolbarNode){var t=this.options.timeline.getSelectedTime(),e=this;this.toolbarNode.find("button").each((function(){var n=new Date(+Z()(this).data("time"));Z()(this).removeClass(e.options.classButtonActive),t.valueOf()==n.valueOf()&&Z()(this).addClass(e.options.classButtonActive)}))}}},{key:"onChangeTimes",value:function(){void 0===this.toolbarNode&&(this.toolbarNode=Z()("<div>")),this.toolbarNode.empty();var t="daily"==this.options.grouping?"YYYY-MM-DD":"hourly"==this.options.grouping?"YYYY-MM-DD HH":this.options.grouping,e=void 0;this.getTimelineTimes().forEach((function(n){if(void 0===e||e.data("date")!=this.timeToText(n,t)){var i=Z()("<div>").addClass(this.options.classButtonGroup).addClass(this.options.classButtonGroupMargin).attr("role","group").attr("aria-label",this.timeToText(n,t));if(void 0===this.options.groupingFormat)e=i;else{var o=Z()("<span>").addClass(this.options.classLabelSpan).text(this.timeToText(n,this.options.groupingFormat));e=Z()("<label>").addClass(this.options.classLabel).append(o),i.attr("aria-label",o.text()),e.append(i)}e.data("date",this.timeToText(n,t)),this.toolbarNode.append(e)}var r=Z()("<button>").addClass(this.options.classButton).attr("type","button").text(this.timeToText(n,this.options.format)).data("time",n.valueOf());this.options.timeline.isTimeAllEnabled(n)?r.addClass(this.options.classButtonAllEnabled):this.options.timeline.isTimeEnabled(n)?r.addClass(this.options.classButtonEnabled):r.addClass(this.options.classButtonNotEnabled);var a=this;r.click((function(){a.options.timeline.setSelectedTime(new Date(+Z()(this).data("time"))),a.trigger("input")})),e.hasClass(this.options.classButtonGroup)?e.append(r):e.children("div").append(r)}),this),this.toolbarNode.find("div."+this.options.classButtonGroup).last().removeClass(this.options.classButtonGroupMargin)}},{key:"emptyNode",value:function(){this.toolbarNode=void 0,this.options.node.empty()}},{key:"onInitNode",value:function(){this.toolbarNode=Z()("<div>").addClass(this.options.classMain).attr("role","toolbar").attr("aria-label","Timeline toolbar"),this.options.node.append(this.toolbarNode)}}])&&Pt(e.prototype,n),a}(ut);function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function It(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Bt(t,e,n){return(Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mt(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function At(t,e){return(At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mt(i);if(o){var n=Mt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Lt(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.format,i=void 0===n?"HH:mm":n,o=e.buttonFormat,s=void 0===o?"DD. MMMM YYYY HH:mm":o,u=e.grouping,l=void 0===u?"daily":u,c=e.groupingDivider,f=void 0===c||c,d=e.groupingFormat,p=void 0===d?"ddd, DD. MMMM YYYY":d,h=e.classMain,v=void 0===h?"dropdown":h,y=e.classDropdownMenu,m=void 0===y?"dropdown-menu":y,b=e.classDropdownItem,g=void 0===b?"dropdown-item":b,w=e.classItemActive,_=void 0===w?"active":w,O=e.classItemNotEnabled,S=void 0===O?"disabled":O,k=e.classItemEnabled,T=void 0===k?void 0:k,P=e.classItemAllEnabled,x=void 0===P?void 0:P,R=e.classDropdownHeader,j=void 0===R?"dropdown-header":R,E=e.classDropdownDivider,N=void 0===E?"dropdown-divider":E,C=e.classDropdownButton,I=void 0===C?"btn dropdown-toggle":C,D=e.classButtonNotEnabled,B=void 0===D?void 0:D,A=e.classButtonEnabled,L=void 0===A?void 0:A,M=e.classButtonAllEnabled,V=void 0===M?void 0:M,G=Ct(e,["format","buttonFormat","grouping","groupingDivider","groupingFormat","classMain","classDropdownMenu","classDropdownItem","classItemActive","classItemNotEnabled","classItemEnabled","classItemAllEnabled","classDropdownHeader","classDropdownDivider","classDropdownButton","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled"]);return It(this,a),(t=r.call(this,G)).options.format=i,t.options.buttonFormat=s,t.options.grouping=l,t.options.groupingDivider=f,t.options.groupingFormat=p,t.options.classMain=v,t.options.classDropdownMenu=m,t.options.classDropdownItem=g,t.options.classItemActive=_,t.options.classItemNotEnabled=S,t.options.classItemEnabled=T,t.options.classItemAllEnabled=x,t.options.classDropdownHeader=j,t.options.classDropdownDivider=N,t.options.classDropdownButton=I,t.options.classButtonNotEnabled=B,t.options.classButtonEnabled=L,t.options.classButtonAllEnabled=V,t.visualisationButtonText=new yt({timeline:t.options.timeline,format:t.options.buttonFormat,textInvalid:t.options.textInvalid,outputTimezone:t.options.outputTimezone,getTimeText:t.options.getTimeText}),t.dropdownNode=void 0,t.setNode(t.options.node),t}return e=a,(n=[{key:"setOutputTimezone",value:function(t){return Bt(Mt(a.prototype),"setOutputTimezone",this).call(this,t),this.visualisationButtonText.setOutputTimezone(t),this}},{key:"onChangeTime",value:function(){if(void 0!==this.dropdownNode){var t=this.options.timeline.getSelectedTime();this.options.node.children("button").removeClass(this.options.classButtonActive).removeClass(this.options.classButtonNotEnabled).removeClass(this.options.classButtonEnabled).removeClass(this.options.classButtonAllEnabled),this.options.timeline.isTimeAllEnabled(t)?this.options.node.children("button").addClass(this.options.classButtonAllEnabled):this.options.timeline.isTimeEnabled(t)?this.options.node.children("button").addClass(this.options.classButtonEnabled):this.options.node.children("button").addClass(this.options.classButtonNotEnabled);var e=this;this.dropdownNode.children("button."+this.options.classDropdownItem).each((function(){var n=new Date(+Z()(this).data("time"));Z()(this).removeClass(e.options.classItemActive).removeClass(e.options.classItemNotEnabled).removeClass(e.options.classItemEnabled).removeClass(e.options.classItemAllEnabled),t.valueOf()==n.valueOf()?Z()(this).addClass(e.options.classItemActive):e.options.timeline.isTimeAllEnabled(n)?Z()(this).addClass(e.options.classItemAllEnabled):e.options.timeline.isTimeEnabled(n)?Z()(this).addClass(e.options.classItemEnabled):Z()(this).addClass(e.options.classItemNotEnabled)}))}}},{key:"onChangeTimes",value:function(){void 0===this.dropdownNode&&(this.dropdownNode=Z()("<div>")),this.dropdownNode.empty();var t="daily"==this.options.grouping?"YYYY-MM-DD":"hourly"==this.options.grouping?"YYYY-MM-DD HH":this.options.grouping,e=void 0;this.getTimelineTimes().forEach((function(n){void 0!==e&&e==this.timeToText(n,t)||(void 0!==e&&this.options.groupingDivider&&this.dropdownNode.append(Z()("<div>").addClass(this.options.classDropdownDivider)),void 0!==this.options.groupingFormat&&this.dropdownNode.append(Z()("<h6>").addClass(this.options.classDropdownHeader).text(this.timeToText(n,this.options.groupingFormat))),e=this.timeToText(n,t));var i=Z()("<button>").addClass(this.options.classDropdownItem).attr("type","button").text(this.timeToText(n,this.options.format)).data("time",n.valueOf()),o=this;i.click((function(){o.options.timeline.setSelectedTime(new Date(+Z()(this).data("time"))),o.trigger("input")})),this.dropdownNode.append(i)}),this)}},{key:"emptyNode",value:function(){void 0!==this.visualisationButtonText&&this.visualisationButtonText.setNode(void 0),this.dropdownNode=void 0,this.options.node.empty()}},{key:"onInitNode",value:function(){for(var t="dropdownMenuButton",e=0;null!=document.getElementById(t);)t="dropdownMenuButton"+ ++e;var n=Z()("<button>").addClass(this.options.classDropdownButton).attr("type","button").attr("id",t).attr("data-toggle","dropdown").attr("aria-haspopup",!0).attr("aria-expanded",!1);this.visualisationButtonText.setNode(n),this.dropdownNode=Z()("<div>").addClass(this.options.classDropdownMenu).attr("aria-labelledby",t),this.options.node.addClass(this.options.classMain).append(n).append(this.dropdownNode)}}])&&Dt(e.prototype,n),a}(ut);function Gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Yt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Z().extend(!0,{map:void 0,layerGroup:void 0},e)}var e,n;return e=t,(n=[{key:"getMap",value:function(){return this.options.map}},{key:"getViewCenter",value:function(){}},{key:"setViewCenter",value:function(){return this}},{key:"getViewZoom",value:function(){}},{key:"setViewZoom",value:function(){return this}},{key:"makeLayerGroup",value:function(){}},{key:"getExtendedEventByTypeCollection",value:function(t){return t.synviewType=void 0,t.layer=void 0,t.feature=void 0,t.color=void 0,t}},{key:"findLayerInType",value:function(){return-1}}])&&Gt(e.prototype,n),t}();D(Yt.prototype);const Ft=Yt;function Xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemIds=[],this.items={}}var e,n;return e=t,(n=[{key:"getCount",value:function(){return this.itemIds.length}},{key:"getItems",value:function(){return this.itemIds.map((function(t){return this.items[t]}),this)}},{key:"getItemIds",value:function(){return this.itemIds}},{key:"getItemById",value:function(t){return t in this.items?this.items[t]:void 0}},{key:"containsId",value:function(t){return-1!==this.getIndexById(t)}},{key:"getIndexById",value:function(t){var e=-1;return this.itemIds.forEach((function(n,i){n==t&&(e=i)})),e}},{key:"append",value:function(t){var e=t.getId();return this.containsId(e)?(this.trigger("replace:item",t,this.getItemById(e)),this.items[e]=t):(this.itemIds.push(e),this.items[e]=t,this.trigger("add:item",t)),this}},{key:"remove",value:function(t){var e=this.getItemById(t);if(void 0!==e){var n=this.getIndexById(t);delete this.items[t],this.itemIds.splice(n,1),this.trigger("remove:item",e)}return this}}])&&Xt(e.prototype,n),t}();D(zt.prototype);const qt=zt,Ht=ol.layer.Group;var Kt=n.n(Ht);const Ut=ol.layer.Vector;var $t=n.n(Ut);const Zt=ol.Observable;function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Qt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,i=void 0===n?void 0:n,o=e.datetime,r=void 0===o?void 0:o,a=e.mimetype,s=void 0===a?void 0:a,u=e.reloadTime,l=void 0===u?void 0:u,c=e.className,f=void 0===c?void 0:c,d=e.imageSmoothingEnabled,p=void 0===d?void 0:d,h=e.ol,v=void 0===h?{}:h;Wt(this,t),this.options={url:i,datetime:r,mimetype:s,reloadTime:l,className:f,ol:v},this._normalizeOLOptions(this.options.ol),this.layer=void 0,this.layerGroup=void 0,this.reloadTimerId=void 0,this.visible=!1,this.zIndex=void 0,this.opacity=1,this._imageSmoothing=p}var e,n;return e=t,(n=[{key:"getId",value:function(){return this.getUrl()}},{key:"getUrl",value:function(){return this.options.url}},{key:"getDatetime",value:function(){return this.options.datetime}},{key:"getMIMEType",value:function(){return void 0===this.options.mimetype?"application/octet-stream":this.options.mimetype}},{key:"getReloadTime",value:function(){return this.options.reloadTime}},{key:"setReloadTime",value:function(t){return this.options.reloadTime=t,this._reload(),this}},{key:"getVisible",value:function(){return this.visible}},{key:"setVisible",value:function(t){return this.visible=t,void 0!==this.layer&&("setVisible"in this.layer?this.layer.setVisible(t):this.visible?this.layer.addTo(this.layerGroup):this.layerGroup.removeLayer(this.layer)),this}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setZIndex",value:function(t){return this.zIndex=t,void 0!==this.layer&&this.layer.setZIndex(t),this}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setOpacity",value:function(t){return this.opacity=t,void 0!==this.layer&&this.layer.setOpacity(t),this}},{key:"getLayerGroup",value:function(){return this.layerGroup}},{key:"setLayerGroup",value:function(t){if(void 0!==this.layerGroup&&void 0!==this.layer&&("remove"in this.layerGroup.getLayers()?this.layerGroup.getLayers().remove(this.layer):this.layerGroup.removeLayer(this.layer)),void 0===t&&(this.layer=void 0),this.layerGroup=t,void 0!==this.layerGroup)if("addLayer"in this.layerGroup){var e=this.getLLLayer();this.getVisible()&&this.layerGroup.addLayer(e)}else this.layerGroup.getLayers().push(this.getOLLayer());return this.setReloadTime(this.getReloadTime()),this}},{key:"getOLLayer",value:function(){return void 0!==this.layer||(this.layer=this._makeOLLayer()),this.layer}},{key:"makeOLLayer",value:function(){return new($t())({className:this.className})}},{key:"_makeOLLayer",value:function(){var t=this,e=this.makeOLLayer();if(e.setVisible(this.visible),e.setZIndex(this.zIndex),e.setOpacity(this.opacity),"events"in this.options.ol&&void 0!==this.options.ol.events&&["prerender","postrender"].forEach((function(n){n in t.options.ol.events&&void 0!==t.options.ol.events[n]&&e.on(n,(function(i){t.options.ol.events[n].call(t,i,e)}))})),!this._imageSmoothing){var n=e.getSource();null!==n&&"contextOptions_"in n&&(n.contextOptions_={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1})}return e}},{key:"getLLLayer",value:function(){return void 0!==this.layer||(this.layer=this._makeLLLayer()),this.layer}},{key:"makeLLLayer",value:function(){return L.Layer()}},{key:"preload",value:function(){}},{key:"_makeLLLayer",value:function(){return this.makeLLLayer()}},{key:"_reload",value:function(){if(void 0!==this.reloadTimerId&&(clearTimeout(this.reloadTimerId),this.reloadTimerId=void 0),void 0!==this.options.reloadTime&&void 0!==this.layerGroup){var t=function(){if(this.reloadTimerId=void 0,void 0!==this.layerGroup){var e=this._makeOLLayer();if("getUrl"in e.getSource()){var n=this.layerGroup,i=e.getSource().on("change",function(){"ready"!=e.getSource().getState()&&"error"!=e.getSource().getState()||((0,Zt.unByKey)(i),"ready"==e.getSource().getState()&&void 0!==this.layerGroup?(e.setVisible(this.layer.getVisible()),e.setOpacity(this.layer.getOpacity()),e.setZIndex(this.layer.getZIndex()),this.layerGroup.getLayers().remove(this.layer),this.layer=e):void 0!==this.layerGroup?this.layerGroup.getLayers().remove(e):n.getLayers().remove(e),void 0===this.reloadTimerId&&void 0!==this.options.reloadTime&&void 0!==this.layerGroup&&(this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime)))}.bind(this));this.layerGroup.getLayers().push(e),e.setVisible(!0)}else this.layerGroup.getLayers().push(e),e.setVisible(!0),setTimeout(function(){this.layer=e,void 0===this.reloadTimerId&&void 0!==this.options.reloadTime&&(this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime))}.bind(this),1e3)}}.bind(this);return this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime),this}}},{key:"_normalizeOLOptions",value:function(t){var e=t.source,n=void 0===e?{}:e,i=t.events,o=void 0===i?void 0:i,r=t.style,a=void 0===r?void 0:r;this.options.ol={source:n,events:o,style:a}}},{key:"className",get:function(){return this.options.className},set:function(t){this.options.className=t}},{key:"imageSmoothingEnabled",get:function(){return this._imageSmoothing},set:function(t){this._imageSmoothing=t}}])&&Jt(e.prototype,n),t}();D(Qt.prototype);const te=Qt;function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ie(t,e,n){return(ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ae(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function oe(t,e){return(oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function re(t,e){return!e||"object"!==ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oe(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ae(i);if(o){var n=ae(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return re(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this)).times=[],t}return e=a,(n=[{key:"getResources",value:function(){return this.times.map((function(t){return this.items[t.valueOf()]}),this)}},{key:"getTimes",value:function(){return this.times}},{key:"getItemById",value:function(t){var e=ie(ae(a.prototype),"getItemById",this).call(this,t);return void 0===e?new te:e}},{key:"getResourceByTime",value:function(t){return this.getItemById(isNaN(t)?"":t.valueOf())}},{key:"containsTime",value:function(t){return this.getIndexById(isNaN(t)?"":t.valueOf())>-1}},{key:"getIndexByTime",value:function(t){var e=-1;return isNaN(t)||this.times.forEach((function(n,i){n.valueOf()==t.valueOf()&&(e=i)})),e}},{key:"getNewestResource",value:function(){return this.times.length<1?new te:this.getResourceByTime(this.times[this.times.length-1])}},{key:"append",value:function(t){return this._append(t),this._sortTimes(),this}},{key:"remove",value:function(t){return this._remove(isNaN(t)?"":t.valueOf()),this._sortTimes(),this}},{key:"setResources",value:function(t){return t.forEach((function(t){this._append(t)}),this),this._filterTimesByResources(t),this._sortTimes(),this}},{key:"_append",value:function(t){var e=t.getDatetime(),n=void 0===e?"":e.valueOf();this.containsId(n)?(this.trigger("replace:item",t,this.getItemById(n)),this.items[n]=t):(this.itemIds.push(n),this.items[n]=t,void 0===e||isNaN(e)||this.times.push(e),this.trigger("add:item",t))}},{key:"_remove",value:function(t){var e=this.getIndexById(t);if(e>-1){var n=this.items[t];if(delete this.items[t],this.itemIds.splice(e,1),void 0!==t&&""!==t&&!isNaN(t)){var i=this.times.findIndex((function(e){return e.valueOf()==t}));i>-1&&this.times.splice(i,1)}this.trigger("remove:item",n)}}},{key:"_filterTimesByResources",value:function(t){var e=!1;this.times=this.times.filter((function(n){var i=!1;return t.findIndex((function(t){var i=!1,o=t.getDatetime();return void 0!==o&&n.valueOf()==o.valueOf()?i=!0:void 0===o&&(e=!0),i}),this)<0&&(this.remove(n.valueOf()),i=!0),!i}),this),e&&this.remove("")}},{key:"_sortTimes",value:function(){this.times.sort((function(t,e){return t.valueOf()-e.valueOf()}))}}])&&ne(e.prototype,n),a}(qt);function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ce=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=void 0===n?void 0:n,o=e.visible,r=void 0===o||o,a=e.zIndex,s=void 0===a?void 0:a,u=e.displayMethod,l=void 0===u?"floor":u,c=e.displayMaxResourceAge,f=void 0===c?10800:c,d=e.displayFadeStart,p=void 0===d?900:d,h=e.displayFadeStartOpacity,v=void 0===h?.95:h,y=e.resources,m=void 0===y?void 0:y,b=e.className,g=void 0===b?void 0:b,w=e.imageSmoothingEnabled,_=void 0===w?void 0:w,O=e.tooltip,S=void 0===O?void 0:O,k=e.preload,T=void 0===k?{}:k;ue(this,t),this.options={id:i,visible:r,zIndex:s,displayMethod:l,displayMaxResourceAge:f,displayFadeStart:p,displayFadeStartOpacity:v,resources:m,className:g,imageSmoothingEnabled:_,tooltip:S},this.layerGroup=void 0,this.collection=new se,this.displayedResourceTime=new Date("invalid"),this.collection.on("add:item",(function(t){t.className=this.className,this._addOLLayer(t),this._preload.enabled&&t.preload()}),this),this.collection.on("remove:item",(function(t){this._removeOLLayer(t)}),this),this.collection.on("replace:item",(function(t,e){t!==e&&(t.className=this.className,this._replaceOLLayer(t,e),this._preload.enabled&&t.preload())}),this),this._preload=T,void 0!==this.options.resources&&this.collection.setResources(this.options.resources),delete this.options.resources}var e,n;return e=t,(n=[{key:"getId",value:function(){return this.options.id}},{key:"setId",value:function(t){return this.options.id=t,this}},{key:"getVisible",value:function(){return this.options.visible}},{key:"setVisible",value:function(t){return(this.options.visible?!t:t)&&(this.options.visible=!!t,void 0!==this.layerGroup&&this.layerGroup.setVisible(this.options.visible),this.getResourceCollection().getItems().forEach((function(t){isNaN(t.getDatetime())&&t.setVisible(this.options.visible),t.setLayerGroup(this.options.visible?this.layerGroup:void 0)}),this),this.trigger("change:visible")),this}},{key:"getZIndex",value:function(){return this.options.zIndex}},{key:"setZIndex",value:function(t){return this.options.zIndex=t,void 0!==this.layerGroup&&this.layerGroup.setZIndex(t),this.getResourceCollection().getItems().forEach((function(e){e.setZIndex(t)})),this}},{key:"getLayerGroup",value:function(){return void 0===this.layerGroup?new(Kt()):this.layerGroup}},{key:"setLayerGroup",value:function(t){return this.layerGroup=t,void 0!==this.layerGroup&&("setVisible"in this.layerGroup&&this.layerGroup.setVisible(this.options.visible),this.layerGroup.setZIndex(this.options.zIndex)),this.getResourceCollection().getItems().forEach((function(e){e.setLayerGroup(this.options.visible?t:void 0)}),this),this}},{key:"getResourceCollection",value:function(){return this.collection}},{key:"appendResource",value:function(t){return this.collection.append(t),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"removeResource",value:function(t){return this._hideVisibleResource(),this.collection.remove(t.getDatetime()),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"setResources",value:function(t){return this._hideVisibleResource(),this.collection.setResources(t),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"getDisplayedResource",value:function(){return this.getVisible()&&void 0!==this.layerGroup?isNaN(this.displayedResourceTime)&&this.collection.getTimes().length>0?new te:this.collection.getResourceByTime(this.displayedResourceTime):new te}},{key:"setDisplayTime",value:function(t){if(!this.getVisible())return this;var e=this._getResourceTimeByDisplayTime(t);if((void 0===e||void 0!==e&&!isNaN(this.displayedResourceTime)&&this.displayedResourceTime.valueOf()!=e.valueOf())&&this._hideVisibleResource(),void 0!==e){this.displayedResourceTime=e;var n=this.getResourceCollection().getItemById(e.valueOf());if(n.getId()){n.setVisible(!0);var i=1;Math.abs(t.valueOf()-e.valueOf())>1e3*this.options.displayMaxResourceAge?i=0:Math.abs(t.valueOf()-e.valueOf())>1e3*this.options.displayFadeStart&&(i=this.options.displayFadeStartOpacity*(Math.abs(t.valueOf()-e.valueOf())-1e3*this.options.displayMaxResourceAge)/(1e3*(this.options.displayFadeStart-this.options.displayMaxResourceAge))),n.setOpacity(i)}}else this.displayedResourceTime=new Date("invalid");return this}},{key:"getTooltip",value:function(){return this.options.tooltip}},{key:"setTooltip",value:function(t){return this.options.tooltip=t,this}},{key:"setResourcesOLStyle",value:function(){var t=arguments;return this.getResourceCollection().getItems().forEach((function(e){"setOLStyle"in e&&e.setOLStyle.apply(e,t)})),this}},{key:"_hideVisibleResource",value:function(){isNaN(this.displayedResourceTime)||this.getResourceCollection().getItemById(this.displayedResourceTime.valueOf()).setVisible(!1)}},{key:"_addOLLayer",value:function(t){isNaN(t.getDatetime())&&t.setVisible(this.getVisible()),void 0!==this.options.imageSmoothingEnabled&&void 0===t.imageSmoothingEnabled&&(t.imageSmoothingEnabled=this.options.imageSmoothingEnabled),t.setLayerGroup(this.getLayerGroup()),t.setZIndex(this.options.zIndex)}},{key:"_removeOLLayer",value:function(t){t.setLayerGroup(void 0)}},{key:"_replaceOLLayer",value:function(t,e){this._removeOLLayer(e),this._addOLLayer(t)}},{key:"_getResourceTimeByDisplayTime",value:function(t){if(!isNaN(t)){var e=void 0;return this.collection.getTimes().forEach((function(n){switch(this.options.displayMethod){case"exact":t.valueOf()==n.valueOf()&&(e=n);break;case"nearest":(void 0===e||Math.abs(t.valueOf()-n.valueOf())<Math.abs(t.valueOf()-e.valueOf()))&&(e=n);break;case"floor":default:(void 0===e||n.valueOf()<=t.valueOf()&&t.valueOf()-n.valueOf()<t.valueOf()-e.valueOf())&&(e=n)}}),this),e}}},{key:"className",get:function(){return this.options.className},set:function(t){this.options.className=t}}])&&le(e.prototype,n),t}();D(ce.prototype);const fe=ce;function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function he(t,e,n){return(he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=me(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ye(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function me(t){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=me(i);if(o){var n=me(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ye(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this)).options=Z().extend(!0,{exclusiveVisibility:!1,syncVisibility:!1},t),e}return e=a,(n=[{key:"getItemById",value:function(t){return void 0===he(me(a.prototype),"getItemById",this).call(this,t)?new fe:this.items[t]}},{key:"append",value:function(t){var e=this;return this.options.exclusiveVisibility&&t.getVisible()&&this.isVisible()?t.setVisible(!1):e.options.syncVisibility&&(t.getVisible()?this.isVisible()||this.getItems().forEach((function(t){t.setVisible(!0)}),this):this.isVisible()&&t.setVisible(!0)),t.on("change:visible",(function(){e.options.exclusiveVisibility?this.getVisible()&&e.getItems().forEach((function(t){t.getId()!=this.getId()&&t.setVisible(!1)}),this):e.options.syncVisibility&&e.getItems().forEach((function(t){t.getId()!=this.getId()&&t.setVisible(this.getVisible())}),this)})),he(me(a.prototype),"append",this).call(this,t)}},{key:"getVisibleTypes",value:function(){return this.getItems().filter((function(t){return t.getVisible()}))}},{key:"isVisible",value:function(){return this.getVisibleTypes().length>0}},{key:"setExclusiveVisibility",value:function(t){if(this.options.exclusiveVisibility!=t&&t){var e=!1;this.getItems().forEach((function(t){e?t.setVisible(!1):e=t.getVisible()}),this)}return this.options.exclusiveVisibility=t,this}},{key:"setSyncVisibility",value:function(t){return this.options.syncVisibility!=t&&t&&this.isVisible()&&this.getItems().forEach((function(t){t.setVisible(!0)}),this),this.options.syncVisibility=t,this}}])&&pe(e.prototype,n),a}(qt),ge=function t(e){var n=this,i=e.map,o=e.typeCollection,r=e.tooltip;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tooltipFeature=void 0,this.tooltipPixelColor=void 0,this.map=i,this.typeCollection=o,this.tooltip=r,Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.tooltip),"tooltipNode")&&void 0===this.tooltip.tooltipNode&&(this.tooltip.tooltipNode=Z()("<div>").css("position","absolute").prependTo(this.map.getMap().getTargetElement())),this.tooltip.on("hide:tooltip",(function(){n.tooltipFeature=void 0,n.tooltipPixelColor=void 0})),this.map.on("move:pointer",(function(t){if(!t.dragging)if((t=n.map.getExtendedEventByTypeCollection(t,n.typeCollection)).feature||t.color){if(t.feature===n.tooltipFeature&&(void 0===t.color&&void 0===n.tooltipPixelColor||void 0!==t.color&&void 0!==n.tooltipPixelColor&&t.color.join(",")===n.tooltipPixelColor.join(",")))return void n.tooltip.show({posX:t.pixel[0],posY:t.pixel[1]});n.tooltipFeature=void 0,n.tooltipPixelColor=void 0;var e=t.synviewType.getTooltip().call(void 0,t);void 0!==e?(n.tooltipFeature=t.feature,n.tooltipPixelColor=t.color,n.tooltip.content=e,n.tooltip.hide().show({posX:t.pixel[0],posY:t.pixel[1]})):n.tooltip.hide()}else n.tooltip.hide()}))};function we(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _e=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Z().extend(!0,{map:void 0,timeline:void 0,tooltip:void 0},e),void 0===this.options.map&&(this.options.map=new Ft),void 0===this.options.timeline&&(this.options.timeline=new q),this.typeCollection=new be,this.tooltip=void 0,this.options.timeline.on("change:time",(function(){this.getTypeCollection().getItems().map((function(t){t.setDisplayTime(this.options.timeline.getSelectedTime())}),this)}),this);var n=this.options.timeline,i=function(){var t=n.isLastEnabledTime();this.getVisible()?n.setTimesBySetID(this.getId(),this.getResourceCollection().getTimes()):n.setTimesBySetID(this.getId(),[]),t?n.last():isNaN(n.getSelectedTime())&&n.first()},o=function(t){t.setLayerGroup(this.options.map.makeLayerGroup()),i.call(t),t.setDisplayTime(this.getTimeline().getSelectedTime()),t.on("change:resources",i),t.on("change:visible",i),void 0!==t.getTooltip()&&void 0===this.tooltip&&(this.tooltip=new ge({map:this.options.map,typeCollection:this.typeCollection,tooltip:this.options.tooltip}))},r=function(t){this.getTimeline().deleteSetID(t.getId())};this.typeCollection.on("add:item",o,this),this.typeCollection.on("remove:item",r,this),this.typeCollection.on("replace:item",(function(t,e){o.call(this,t),r.call(this,e)}),this)}var e,n;return e=t,(n=[{key:"getTimeline",value:function(){return this.options.timeline}},{key:"getMap",value:function(){return this.options.map}},{key:"getTypeCollection",value:function(){return this.typeCollection}},{key:"appendType",value:function(t){if(void 0===t.getId()){var e,n=0;do{e="synview-type-"+n++}while(this.getTypeCollection().containsId(e));t.setId(e)}return this.getTypeCollection().append(t),this}},{key:"getTooltip",value:function(){return this.options.tooltip}}])&&we(e.prototype,n),t}();const Oe=ol.proj;function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ke(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Te(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Pe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xe(t,e,n){return(xe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ne(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t,e){return!e||"object"!==Se(e)&&"function"!=typeof e?Ee(t):e}function Ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ne(t){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ce="EPSG:4326";const Ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ne(i);if(o){var n=Ne(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return je(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),void 0===(e=r.call(this,t)).options.layerGroup&&(e.options.layerGroup=new(Kt()),e.options.map.addLayer(e.options.layerGroup)),e.options.map.getView().on("change:center",function(){this.trigger("change:view",this)}.bind(Ee(e))),e.options.map.getView().on("change:resolution",function(){this.trigger("change:view",this)}.bind(Ee(e))),e.options.map.on("pointermove",function(t){this.trigger("move:pointer",t)}.bind(Ee(e))),e.options.map.on("click",function(t){this.trigger("click:pointer",t)}.bind(Ee(e))),e.options.map.on("singleclick",function(t){this.trigger("singleclick:pointer",t)}.bind(Ee(e))),e.options.map.on("dblclick",function(t){this.trigger("dblclick:pointer",t)}.bind(Ee(e))),e.options.map.on("pointerdrag",function(t){this.trigger("drag:pointer",t)}.bind(Ee(e))),e}return e=a,(n=[{key:"getViewCenter",value:function(){return(0,Oe.transform)(this.options.map.getView().getCenter(),this.options.map.getView().getProjection(),Ce)}},{key:"setViewCenter",value:function(t){var e=!0;return t=t.map((function(t){return isNaN(t)?void(e=!1):1*t})),e&&this.options.map.getView().setCenter((0,Oe.fromLonLat)(t)),this}},{key:"getViewZoom",value:function(){return this.options.map.getView().getZoom()}},{key:"setViewZoom",value:function(t){return isNaN(t)||this.options.map.getView().setZoom(1*t),this}},{key:"makeLayerGroup",value:function(){var t=new(Kt());return this.options.layerGroup.getLayers().push(t),t}},{key:"getExtendedEventByTypeCollection",value:function(t,e){t=xe(Ne(a.prototype),"getExtendedEventByTypeCollection",this).call(this,t,e);var n=new Map;e.getVisibleTypes().filter((function(t){return void 0!==t.getTooltip()})).map((function(t){return n.set(t,[])}));var i,o=new Set,r=new Set,s=ke(n.keys());try{var u=function(){var t=i.value;t.getLayerGroup().getLayers().getArray().filter((function(t){return t.getVisible()})).forEach((function(e){n.get(t).push(e),o.add(e),r.add(e.getClassName())}))};for(s.s();!(i=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}return this.options.map.forEachFeatureAtPixel(t.pixel,(function(e,i){var o,r=ke(n.keys());try{var a=function(){var r=o.value;if(n.get(r).forEach((function(n){void 0===t.synviewType&&n===i&&(t.feature=e,t.layer=i,t.synviewType=r)})),void 0!==t.synviewType)return"break"};for(r.s();!(o=r.n()).done&&"break"!==a(););}catch(t){r.e(t)}finally{r.f()}return void 0!==t.synviewType}),{hitTolerance:5,layerFilter:function(t){return o.has(t)}}),void 0===t.feature&&this.options.map.forEachLayerAtPixel(t.pixel,(function(e,i){if(null==i||i.length<1)return!1;var o,r=ke(n.keys());try{var a=function(){var r=o.value;if(n.get(r).forEach((function(n){void 0===t.synviewType&&n.getClassName()==e.getClassName()&&(t.color=i,t.layer=e,t.synviewType=r)})),void 0!==t.synviewType)return"break"};for(r.s();!(o=r.n()).done&&"break"!==a(););}catch(t){r.e(t)}finally{r.f()}return void 0!==t.synviewType}),{hitTolerance:5,layerFilter:function(t){return r.has(t.getClassName())}}),t}},{key:"findLayerInType",value:function(t,e){return e.getLayerGroup().getLayers().getArray().findIndex((function(e){return e==t}))>-1}}])&&Pe(e.prototype,n),a}(Ft);function De(t){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ae(t,e){return(Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Le(t,e){return!e||"object"!==De(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ae(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Me(i);if(o){var n=Me(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Le(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),void 0===(e=r.call(this,t)).options.layerGroup&&(e.options.layerGroup=L.layerGroup().addTo(e.options.map)),e}return e=a,(n=[{key:"makeLayerGroup",value:function(){return L.layerGroup().addTo(this.options.layerGroup)}}])&&Be(e.prototype,n),a}(Ft),Ge=ol.format.GeoJSON;var Ye=n.n(Ge);const Fe=ol.source.Vector;var Xe=n.n(Fe);function ze(t){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function He(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ke(t,e){return(Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ue(t,e){return!e||"object"!==ze(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ze=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ke(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$e(i);if(o){var n=$e(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ue(this,t)});function a(){return qe(this,a),r.apply(this,arguments)}return e=a,(n=[{key:"getId",value:function(){var t=this.getDatetime();return isNaN(t)?"":t.toISOString()}},{key:"makeOLLayer",value:function(){var t={source:this.options.ol.source,events:this.options.ol.events,style:this.options.ol.style};if(this.options.ol,!("refresh"in t.source)){var e=t.source;void 0!==this.options.url&&"format"in e&&void 0!==e.format&&(e.url=this.options.url),"projection"in e&&void 0!==e.projection||(e.projection=Ce),t.source=new(Xe())(e)}return"function"==typeof t.style&&(t.style=t.style.bind(this)),this.className&&(t.className=this.className),new($t())(t)}},{key:"setOLStyle",value:function(t){return void 0===this.layer&&this.getOLLayer(),void 0!==this.layer&&"setStyle"in this.layer?(0==arguments.length?this.layer.setStyle(this.layer.getStyle()):this.layer.setStyle(t),this):this}}])&&He(e.prototype,n),a}(te);function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){return(Je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qe(t,e){return!e||"object"!==We(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const en=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Je(t,e)}(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=tn(e);if(n){var o=tn(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return Qe(this,t)});function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).options.ol.source.url=e.options.url,e.options.ol.source.format=new(Ye()),e}return o}(Ze),nn=ol.source.VectorTile;var on=n.n(nn);const rn=ol.layer.VectorTile;var an=n.n(rn);function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cn(t,e){return(cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fn(t,e){return!e||"object"!==sn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cn(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dn(i);if(o){var n=dn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return fn(this,t)});function a(){return un(this,a),r.apply(this,arguments)}return e=a,(n=[{key:"makeOLLayer",value:function(){var t={source:this.options.ol.source,events:this.options.ol.events,style:this.options.ol.style};if(!("refresh"in t.source)){var e=t.source;!("tileUrlFunction"in e)&&void 0!==this.options.url&&"format"in e&&void 0!==e.format&&(e.url=this.options.url),"projection"in e&&void 0!==e.projection||(e.projection=Ce),t.source=new(on())(e)}return"function"==typeof t.style&&(t.style=t.style.bind(this)),this.className&&(t.className=this.className),new(an())(t)}}])&&ln(e.prototype,n),a}(Ze);function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){return(vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yn(t,e){return!e||"object"!==hn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mn(t){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const bn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vn(t,e)}(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=mn(e);if(n){var o=mn(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return yn(this,t)});function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).options.ol.source.format=new(Ye()),e}return o}(pn),gn=ol.source.ImageStatic;var wn=n.n(gn);const _n=ol.layer.Image;var On=n.n(_n);function Sn(t){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pn(t,e){return(Pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xn(t,e){return!e||"object"!==Sn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const jn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pn(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rn(i);if(o){var n=Rn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return xn(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,i=void 0===n?void 0:n,o=e.datetime,s=void 0===o?void 0:o,u=e.mimetype,l=void 0===u?void 0:u,c=e.reloadTime,f=void 0===c?void 0:c,d=e.className,p=void 0===d?void 0:d,h=e.extent,v=e.ol,y=void 0===v?{}:v;return kn(this,a),(t=r.call(this,{url:i,datetime:s,mimetype:l,reloadTime:f,className:p,ol:y})).options.extent=h,t}return e=a,(n=[{key:"makeOLLayer",value:function(){var t=this.options.ol.source;return t.url=this.options.url,t.imageExtent=(0,Oe.transformExtent)(this.options.extent,Ce,"EPSG:3857"),new(On())({source:new(wn())(t),className:this.className})}},{key:"makeLLLayer",value:function(){return L.imageOverlay(this.options.url,[[this.options.extent[1],this.options.extent[0]],[this.options.extent[3],this.options.extent[2]]])}},{key:"preload",value:function(){this.getOLLayer().getSource().image_.load()}}])&&Tn(e.prototype,n),a}(te),En=ol.source.OSM;var Nn=n.n(En);const Cn=ol.layer.Tile;var In=n.n(Cn);function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function An(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mn(t,e){return!e||"object"!==Dn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vn(t){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vn(i);if(o){var n=Vn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Mn(this,t)});function a(){return Bn(this,a),r.apply(this,arguments)}return e=a,(n=[{key:"makeOLLayer",value:function(){var t=this.options.ol.source;return t.url=this.options.url,new(In())({source:new(Nn())(t)})}}])&&An(e.prototype,n),a}(te);function Yn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Fn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isShown=!1,this._content=void 0}var e,n;return e=t,(n=[{key:"show",value:function(){var t=!this.isShown;return this._isShown=!0,t&&this.trigger("show:tooltip"),this}},{key:"hide",value:function(){var t=this.isShown;return this._isShown=!1,t&&this.trigger("hide:tooltip"),this}},{key:"update",value:function(){return this}},{key:"onContentChange",value:function(){}},{key:"isShown",get:function(){return this._isShown}},{key:"content",get:function(){return this._content},set:function(t){var e=this._content;this._content=t,e!==this._content&&this.onContentChange()}}])&&Yn(e.prototype,n),t}();function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hn(t,e,n){return(Hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$n(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Un(t,e){return!e||"object"!==Xn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}D(Fn.prototype);const Zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$n(i);if(o){var n=$n(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Un(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.tooltipNode,i=void 0===n?void 0:n,o=e.bootstrapOptions,s=void 0===o?void 0:o,u=e.closeOnMouseMove,l=void 0===u||u,c=e.closeOnMouseEnter,f=void 0!==c&&c;return zn(this,a),(t=r.call(this)).bootstrapOptions=s||{},t._initBootstrapOptions(s),t.closeOnMouseMove=l,t.closeOnMouseEnter=f,t._tooltipNode=void 0,t.tooltipNode=i,t}return e=a,(n=[{key:"show",value:function(t){var e=t.posX,n=t.posY;return this.tooltipNode.css({left:"".concat(e,"px"),top:"".concat(n,"px")}).tooltip(this.isShown?"update":"show"),Hn($n(a.prototype),"show",this).call(this)}},{key:"hide",value:function(){return this.isShown&&this.tooltipNode.tooltip("hide").attr("data-original-title",void 0),Hn($n(a.prototype),"hide",this).call(this)}},{key:"update",value:function(){return this.tooltipNode.tooltip("update"),Hn($n(a.prototype),"update",this).call(this)}},{key:"onContentChange",value:function(){this.tooltipNode.attr("data-original-title",Wn(this.content)?this.content:"-"),this._updateNonStringContent(),this.update()}},{key:"_initBootstrapOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.trigger,n=void 0===e?"manual":e;this.bootstrapOptions.trigger=n}},{key:"_initTooltipNode",value:function(){var t=this;this.tooltipNode.tooltip(this.bootstrapOptions).on("inserted.bs.tooltip",(function(){var e=t._updateNonStringContent();e.length&&(t.closeOnMouseMove&&e.children(".tooltip-inner").mousemove((function(){return t.hide()})),t.closeOnMouseEnter&&e.children(".tooltip-inner").mouseenter((function(){return t.hide()})))}))}},{key:"_updateNonStringContent",value:function(){var t=Z()(document.getElementById(this.tooltipNode.attr("aria-describedby")));if(t.length)return void 0===this.content||Wn(this.content)||t.children(".tooltip-inner").empty().append(this.content),t}},{key:"tooltipNode",get:function(){return this._tooltipNode},set:function(t){void 0!==t?(this._tooltipNode=Z()(t),this._initTooltipNode()):this._tooltipNode=t}}])&&qn(e.prototype,n),a}(Fn);var Wn=function(t){return"[object String]"==Object.prototype.toString.call(t)};function Jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const ti=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id;Jn(this,t),this._id=n}var e,n;return e=t,(n=[{key:"setId",value:function(){}},{key:"id",get:function(){return this._id},set:function(t){this._id=t,this.setId(t)}}])&&Qn(e.prototype,n),t}();function ei(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ni(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ni(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ri=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fireReplace,i=void 0===n||n,o=e.fireAddRemoveOnReplace,r=void 0!==o&&o,a=e.appendOnReplace,s=void 0===a||a,u=e.sortFunction,l=e.emptyObjectMaker;ii(this,t),this.options={fireReplace:i,fireAddRemoveOnReplace:r,appendOnReplace:s,sortFunction:u,emptyObjectMaker:l},this._itemIds=[],this._items={}}var e,n;return e=t,(n=[{key:Symbol.iterator,value:function(){var t=this,e=0;return{next:function(){return e<t._itemIds.length?{value:t._items[t._itemIds[e++]]}:{done:!0}}}}},{key:"getItemById",value:function(t){return t in this._items?this._items[t]:void 0===this.options.emptyObjectMaker?new ti:this.options.emptyObjectMaker.call(this)}},{key:"contains",value:function(t){var e=this.containsId(t.id);return e&&(e=t===this.getItemById(t.id)),e}},{key:"containsId",value:function(t){return t in this._items}},{key:"append",value:function(){for(var t=this,e=[],n=[],i=[],o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return r.forEach((function(o){var r=o.id;if(t.containsId(r)){var a=t.getItemById(r);t.options.appendOnReplace&&(t._itemIds.splice(t._itemIds.indexOf(r),1),t._itemIds.push(r)),a!==o&&(t._items[r]=o,t.options.fireReplace&&i.push([o,a]),t.options.fireAddRemoveOnReplace&&(n.push(a),e.push(o)))}else t._itemIds.push(r),t._items[r]=o,e.push(o)})),this._sort(),e.forEach((function(e){return t.trigger("add:item",e)})),n.forEach((function(e){return t.trigger("remove:item",e)})),i.forEach((function(e){var n=ei(e,2),i=n[0],o=n[1];return t.trigger("replace:item",i,o)})),this}},{key:"remove",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){var n=t._itemIds.indexOf(e.id);if(n>-1){var i=t._items[e.id];delete t._items[e.id],t._itemIds.splice(n,1),t.trigger("remove:item",i)}})),this}},{key:"removeById",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){var n=t._itemIds.indexOf(e);if(n>-1){var i=t._items[e];delete t._items[e],t._itemIds.splice(n,1),t.trigger("remove:item",i)}})),this}},{key:"_sort",value:function(){var t=this;void 0!==this.options.sortFunction&&this._itemIds.sort((function(e,n){return t.options.sortFunction(t._items[e],t._items[n])}))}},{key:"count",get:function(){return this._itemIds.length}},{key:"items",get:function(){var t=this;return this._itemIds.map((function(e){return t._items[e]}))}},{key:"itemIds",get:function(){return this._itemIds}},{key:"sortFunction",get:function(){return this.options.sortFunction},set:function(t){this.options.sortFunction=t,this._sort()}}])&&oi(e.prototype,n),t}();D(ri.prototype);const ai=ri;function si(t){return function(t){if(Array.isArray(t))return ci(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||li(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ui(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=li(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function li(t,e){if(t){if("string"==typeof t)return ci(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ci(t,e):void 0}}function ci(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function hi(t,e,n){return(hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bi(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function vi(t,e){return(vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yi(t,e){return!e||"object"!==fi(e)&&"function"!=typeof e?mi(t):e}function mi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bi(t){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const gi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vi(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bi(i);if(o){var n=bi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return yi(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.resources,i=e.containersNode,o=e.timeline,s=void 0===o?void 0:o,u=e.makeContainerNode,l=void 0===u?void 0:u,c=e.firstTimeOnInit,f=void 0===c||c,d=e.lastTimeOnInit,p=void 0!==d&&d;di(this,a),(t=r.call(this,{fireReplace:!1,fireAddRemoveOnReplace:!0}))._resources=n,t._containersNode="object"==fi(i)&&i.jquery?i[0]:i,t._timeline=void 0===s?new q:s,t._makeContainerNode=l;var h=new Map;return t.on("add:item",(function(e){e.modelviewer=mi(t),e.containerNode=t._getContainerNode(e),isNaN(t.timeline.getSelectedTime().valueOf())&&(f||p)&&h.set(e,e.on("change:selectedVariables",(function(){if(isNaN(t._timeline.getSelectedTime().valueOf())&&(f?t._timeline.first():p&&t._timeline.last(),!isNaN(t._timeline.getSelectedTime().valueOf()))){var e,n=ui(h.keys());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.un("change:selectedVariables",h.get(i)),h.delete(i)}}catch(t){n.e(t)}finally{n.f()}}})))})),t.on("remove:item",(function(e){void 0!==e.containerNode&&null!=e.containerNode.parentNode&&e.containerNode.parentNode.removeChild(e.containerNode),e.modelviewer=void 0,e.containerNode=void 0,h.has(e)&&(e.un("change:selectedVariables",h.get(e)),h.delete(e)),t.timeline.deleteSetID(e.id)})),t}return e=a,(n=[{key:"append",value:function(){for(var t,e=si(this.itemIds),n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.filter((function(t){return void 0!==t.id})).forEach((function(t){return e.push(t.id)})),i.filter((function(t){return void 0===t.id})).forEach((function(t){for(var n=1,i="container".concat(n);e.indexOf(i)>-1;)n++,i="container".concat(n);t.id=i,e.push(i)})),(t=hi(bi(a.prototype),"append",this)).call.apply(t,[this].concat(i)),this}},{key:"_getContainerNode",value:function(t){if(void 0!==this._makeContainerNode){var e=this._makeContainerNode.call(this,this.containersNode,t);return"object"==fi(e)&&e.jquery?e[0]:e}var n=void 0!==t.containerNode?t.containerNode:document.createElement("div");return void 0!==this.containersNode&&this.containersNode.appendChild(n),n}},{key:"resources",get:function(){return this._resources}},{key:"containersNode",get:function(){return this._containersNode}},{key:"timeline",get:function(){return this._timeline}}])&&pi(e.prototype,n),a}(ai);function wi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const Oi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,i=void 0===n?void 0:n,o=e.names,r=void 0===o?{}:o,a=e.langSortation,s=void 0===a?[]:a;wi(this,t),this._name=i,this._names=r,this._langSortation=s}var e,n;return e=t,(n=[{key:"getNameByLangNoFallback",value:function(t){return t in this._names?this._names[t]:""}},{key:"setNameByLang",value:function(t,e){this._names[t]=e,void 0===e&&delete this._names[t]}},{key:"getDefaultName",value:function(){return void 0!==this._name?this._name:this.getNameByLang()}},{key:"getNameByLang",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.langSortation,i=void 0===n?void 0:n,o=void 0===i?this._langSortation:i,r=Object.keys(this._names);return r.length<1?void 0===this._name?"":this._name:this._names[r.sort((function(e,n){if(e==t)return-1;if(n==t)return 1;var i=o.indexOf(e),r=o.indexOf(n);return r<0?0:i<0?1:i<r?-1:i==r?0:1}))[0]]}},{key:"name",get:function(){return this.getDefaultName()},set:function(t){this._name=t}},{key:"langSortation",get:function(){return this._langSortation},set:function(t){this._langSortation=t}}])&&_i(e.prototype,n),t}();function Si(t){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ti(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pi(t,e){return(Pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xi(t,e){return!e||"object"!==Si(e)&&"function"!=typeof e?Ri(t):e}function Ri(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ji(t){return(ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ei=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pi(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ji(i);if(o){var n=ji(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return xi(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.name,o=void 0===i?void 0:i,s=e.names,u=void 0===s?{}:s,l=e.langSortation,c=void 0===l?[]:l;return ki(this,a),t=r.call(this,{name:o,names:u,langSortation:c}),Object.defineProperty(Ri(t),"id",Object.getOwnPropertyDescriptor(ti.prototype,"id")),t._id=n,t}return e=a,(n=[{key:"setId",value:function(t){ti.prototype.setId.call(this,t)}},{key:"getDefaultName",value:function(){return void 0!==this._name?this._name:Object.keys(this._names).length>0?this.getNameByLang():void 0===this._id?"":this._id}}])&&Ti(e.prototype,n),a}(Oi);function Ni(t){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ci(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ii(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bi(t,e){return!e||"object"!==Ni(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ai(t){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Li=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Di(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ai(i);if(o){var n=Ai(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Bi(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.name,o=void 0===i?void 0:i,s=e.names,u=void 0===s?{}:s,l=e.langSortation,c=void 0===l?[]:l,f=e.variableCollection;return Ci(this,a),(t=r.call(this,{id:n,name:o,names:u,langSortation:c}))._variableCollection=f,t}return e=a,(n=[{key:"variableCollection",get:function(){return this._variableCollection},set:function(t){this._variableCollection=t}}])&&Ii(e.prototype,n),a}(Ei);function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yi(t,e){return(Yi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fi(t,e){return!e||"object"!==Mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xi(t){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const zi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yi(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xi(i);if(o){var n=Xi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Fi(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.name,o=void 0===i?void 0:i,s=e.names,u=void 0===s?{}:s,l=e.langSortation,c=void 0===l?[]:l,f=e.datetime,d=void 0===f?void 0:f;return Vi(this,a),(t=r.call(this,{id:n,name:o,names:u,langSortation:c}))._datetime=void 0===t.id?void 0:new Date(t.id),void 0!==d&&(t.datetime=d),t}return e=a,(n=[{key:"setId",value:function(t){this._datetime=void 0===t?void 0:new Date(t)}},{key:"datetime",get:function(){return this._datetime},set:function(t){this._datetime=t,this._id=void 0!==t?t.valueOf():void 0}}])&&Gi(e.prototype,n),a}(Li);function qi(t){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ki(t,e){return(Ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ui(t,e){return!e||"object"!==qi(e)&&"function"!=typeof e?$i(t):e}function $i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wi(t){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ji(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function to(t,e){return(to=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function eo(t,e){return!e||"object"!==Wi(e)&&"function"!=typeof e?no(t):e}function no(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const oo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&to(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=io(i);if(o){var n=io(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return eo(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.fireReplace,o=void 0===i||i,s=e.fireAddRemoveOnReplace,u=void 0!==s&&s,l=e.appendOnReplace,c=void 0===l||l,f=e.sortFunction,d=e.names,p=e.langSortation;return Ji(this,a),t=r.call(this,{emptyObjectMaker:function(){return new Li},fireReplace:o,fireAddRemoveOnReplace:u,appendOnReplace:c,sortFunction:f,names:d,langSortation:p}),Object.defineProperty(no(t),"id",Object.getOwnPropertyDescriptor(ti.prototype,"id")),t._id=n,Object.defineProperty(no(t),"getDefaultName",Object.getOwnPropertyDescriptor(Ei.prototype,"getDefaultName")),t._node=void 0,t.on("add:item",(function(e){void 0!==e.variableCollection&&e.variableCollection.remove(e),e.variableCollection=no(t),t.trigger("add:variable",e)})),t.on("remove:item",(function(e){return t.trigger("remove:variable",e)})),t}return e=a,(n=[{key:"setId",value:function(t){ti.prototype.setId.call(this,t)}},{key:"getVariableById",value:function(t){return this.getItemById(t)}},{key:"variables",get:function(){return this.items}},{key:"node",get:function(){return this._node},set:function(t){this._node=t}}])&&Qi(e.prototype,n),a}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ki(t,e)}(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=Zi(e);if(n){var o=Zi(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return Ui(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fireReplace,r=void 0===n||n,a=e.fireAddRemoveOnReplace,s=void 0!==a&&a,u=e.appendOnReplace,l=void 0===u||u,c=e.sortFunction,f=e.emptyObjectMaker,d=e.name,p=void 0===d?void 0:d,h=e.names,v=void 0===h?{}:h,y=e.langSortation,m=void 0===y?[]:y;return Hi(this,o),t=i.call(this,{fireReplace:r,fireAddRemoveOnReplace:s,appendOnReplace:l,sortFunction:c,emptyObjectMaker:f}),Object.defineProperty($i(t),"name",Object.getOwnPropertyDescriptor(Oi.prototype,"name")),Object.getPrototypeOf($i(t)).getDefaultName=Oi.prototype.getDefaultName,Object.getPrototypeOf($i(t)).getNameByLang=Oi.prototype.getNameByLang,Object.getPrototypeOf($i(t)).setNameByLang=Oi.prototype.setNameByLang,Object.getPrototypeOf($i(t)).getNameByLangNoFallback=Oi.prototype.getNameByLangNoFallback,t._name=p,t._names=v,t._langSortation=m,t}return o}(ai));function ro(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=ao(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function ao(t,e){if(t){if("string"==typeof t)return so(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(t,e):void 0}}function so(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function uo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var lo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._variableCollection=e,e.node=this,this._parents=[],this._children=[],this._resources=new Map}var e,n;return e=t,(n=[{key:"appendChild",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){t._children.push(e),e._addParent(t),t.trigger("append:child",e)})),this}},{key:"_addParent",value:function(t){this._parents.push(t)}},{key:"append",value:function(){for(var t=this,e=0,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.forEach((function(n){void 0!==n.getVariableByVariableCollection(t.variableCollection).id&&n.variables.forEach((function(i){t._resources.has(i.variableCollection)||t._resources.set(i.variableCollection,new Set),t._resources.get(i.variableCollection).has(n)||e++,t._resources.get(i.variableCollection).add(n)}))})),e}},{key:"remove",value:function(){for(var t=this,e=0,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.forEach((function(n){n.variables.forEach((function(i){t._resources.has(i.variableCollection)&&t._resources.get(i.variableCollection).delete(n)&&e++}))})),e}},{key:"getResourcesByVariables",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=!1;return e.length&&"boolean"==typeof e[0]&&(i=e.shift()),i&&0==e.length?[]:this.resources.filter((function(t){return t.isDefinedBy.apply(t,[i].concat(e))}))}},{key:"variableCollection",get:function(){return this._variableCollection}},{key:"parents",get:function(){return this._parents}},{key:"children",get:function(){return this._children}},{key:"resources",get:function(){var t,e,n=new Set,i=ro(this._resources.values());try{for(i.s();!(t=i.n()).done;){var o,r=ro(t.value.values());try{for(r.s();!(o=r.n()).done;){var a=o.value;n.add(a)}}catch(t){r.e(t)}finally{r.f()}}}catch(t){i.e(t)}finally{i.f()}return function(t){if(Array.isArray(t))return so(t)}(e=n)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||ao(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}])&&uo(e.prototype,n),t}();D(lo.prototype);const co=lo;function fo(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=po(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function po(t,e){if(t){if("string"==typeof t)return ho(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ho(t,e):void 0}}function ho(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function vo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const mo=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.variables,o=void 0===i?[]:i,r=n.datetime,a=void 0===r?void 0:r,s=n.run,u=void 0===s?void 0:s,l=n.offset,c=void 0===l?void 0:l;vo(this,t),this._variables=new Set,o.forEach((function(t){return e._variables.add(t)})),this._datetime=a,this._run=u,this._offset=c,this._updateDatetime()}var e,n;return e=t,(n=[{key:"getVariableByVariableCollection",value:function(t){var e=void 0;return this.variables.forEach((function(n){n.variableCollection===t&&(e=n)})),void 0===e?new Li:e}},{key:"isDefinedBy",value:function(){for(var t=this,e=!1,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(i.length&&"boolean"==typeof i[0]&&(e=i.shift()),!e)return 0==i.filter((function(e){return!t._variables.has(e)})).length;var r,a=!0,s=new Set(i),u=fo(s);try{for(u.s();!(r=u.n()).done;){var l=r.value;this._variables.has(l)||(a=!1)}}catch(t){u.e(t)}finally{u.f()}var c,f=fo(this._variables);try{for(f.s();!(c=f.n()).done;){var d=c.value;s.has(d)||(a=!1)}}catch(t){f.e(t)}finally{f.f()}return a}},{key:"isDefinedByVariableOf",value:function(t){var e=this,n=!1;return t.variables.forEach((function(t){e.isDefinedBy(t)&&(n=!0)})),n}},{key:"_updateDatetime",value:function(){void 0!==this._run&&void 0!==this._offset&&(this.datetime=new Date(this._run.valueOf()+1e3*this._offset))}},{key:"variables",get:function(){return function(t){if(Array.isArray(t))return ho(t)}(t=this._variables)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||po(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t}},{key:"datetime",get:function(){return this._datetime},set:function(t){this._datetime=t}},{key:"run",get:function(){return this._run},set:function(t){this._run=t,this._updateDatetime()}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t,this._updateDatetime()}}])&&yo(e.prototype,n),t}();function bo(t){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function go(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _o(t,e){return(_o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oo(t,e){return!e||"object"!==bo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function So(t){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_o(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=So(i);if(o){var n=So(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Oo(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.variables,i=void 0===n?[]:n,o=e.datetime,s=void 0===o?void 0:o,u=e.run,l=void 0===u?void 0:u,c=e.offset,f=void 0===c?void 0:c,d=e.url,p=void 0===d?void 0:d;return go(this,a),(t=r.call(this,{variables:i,datetime:s,run:l,offset:f}))._url=p,t}return e=a,(n=[{key:"url",get:function(){return this._url}}])&&wo(e.prototype,n),a}(mo);function To(t){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xo(t,e){return(xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ro(t,e){return!e||"object"!==To(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jo(t){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Eo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xo(t,e)}(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=jo(e);if(n){var o=jo(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return Ro(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,r=void 0===n?void 0:n,a=e.pres,s=void 0===a?void 0:a,u=e.tmpc,l=void 0===u?void 0:u,c=e.dwpc,f=void 0===c?void 0:c,d=e.ptrace,p=void 0===d?void 0:d,h=e.ttrace,v=void 0===h?void 0:h,y=e.blayer,m=void 0===y?void 0:y,b=e.tlayer,g=void 0===b?void 0:b,w=e.lclpres,_=void 0===w?void 0:w,O=e.lclhght,S=void 0===O?void 0:O,k=e.lfcpres,T=void 0===k?void 0:k,P=e.lfchght,x=void 0===P?void 0:P,R=e.elpres,j=void 0===R?void 0:R,E=e.elhght,N=void 0===E?void 0:E,C=e.mplpres,I=void 0===C?void 0:C,D=e.mplhght,B=void 0===D?void 0:D,A=e.bplus,L=void 0===A?void 0:A,M=e.bminus,V=void 0===M?void 0:M,G=e.bfzl,Y=void 0===G?void 0:G,F=e.b3km,X=void 0===F?void 0:F,z=e.b6km,q=void 0===z?void 0:z,H=e.p0c,K=void 0===H?void 0:H,U=e.pm10c,$=void 0===U?void 0:U,Z=e.pm20c,W=void 0===Z?void 0:Z,J=e.pm30c,Q=void 0===J?void 0:J,tt=e.hght0c,et=void 0===tt?void 0:tt,nt=e.hghtm10c,it=void 0===nt?void 0:nt,ot=e.hghtm20c,rt=void 0===ot?void 0:ot,at=e.hghtm30c,st=void 0===at?void 0:at,ut=e.wm10c,lt=void 0===ut?void 0:ut,ct=e.wm20c,ft=void 0===ct?void 0:ct,dt=e.wm30c,pt=void 0===dt?void 0:dt,ht=e.li5,vt=void 0===ht?void 0:ht,yt=e.li3,mt=void 0===yt?void 0:yt,bt=e.brnshear,gt=void 0===bt?void 0:bt,wt=e.brnu,_t=void 0===wt?void 0:wt,Ot=e.brnv,St=void 0===Ot?void 0:Ot,kt=e.limax,Tt=void 0===kt?void 0:kt,Pt=e.limaxpres,xt=void 0===Pt?void 0:Pt,Rt=e.cap,jt=void 0===Rt?void 0:Rt,Et=e.cappres,Nt=void 0===Et?void 0:Et,Ct=e.bmin,It=void 0===Ct?void 0:Ct,Dt=e.bminpres,Bt=void 0===Dt?void 0:Dt;return Po(this,o),(t=i.call(this,{id:r})).pres=s,t.tmpc=l,t.dwpc=f,t.ptrace=p,t.ttrace=v,t.blayer=m,t.tlayer=g,t.lclpres=_,t.lclhght=S,t.lfcpres=T,t.lfchght=x,t.elpres=j,t.elhght=N,t.mplpres=I,t.mplhght=B,t.bplus=L,t.bminus=V,t.bfzl=Y,t.b3km=X,t.b6km=q,t.p0c=K,t.pm10c=$,t.pm20c=W,t.pm30c=Q,t.hght0c=et,t.hghtm10c=it,t.hghtm20c=rt,t.hghtm30c=st,t.wm10c=lt,t.wm20c=ft,t.wm30c=pt,t.li5=vt,t.li3=mt,t.brnshear=gt,t.brnu=_t,t.brnv=St,t.limax=Tt,t.limaxpres=xt,t.cap=jt,t.cappres=Nt,t.bmin=It,t.bminpres=Bt,t}return o}(ti);function No(t){return function(t){if(Array.isArray(t))return Co(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Co(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Io(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Do(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const Bo=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.calcMissing,o=void 0!==i&&i,r=n.parcels,a=void 0===r?[]:r;Io(this,t),this.options={calcMissing:o},this.levels={},this._parcelCollection=new ai({fireAddRemoveOnReplace:!0,fireReplace:!1,emptyObjectMaker:function(){return new Eo}}),(e=this._parcelCollection).append.apply(e,No(a))}var e,n;return e=t,(n=[{key:"addLevels",value:function(t,e){return t.forEach((function(t){this.addLevel(t,e)}),this),this}},{key:"addLevel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.calcMissing;return n=n||this.options.calcMissing,"pres"in t&&void 0!==t.pres&&(n&&(t=this.calculateMissingData(t)),this.levels[t.pres]=t),this}},{key:"calculateMissingData",value:function(t){var e={pres:t.pres,hght:t.hght,u:t.u,v:t.v,wdir:t.wdir,wspd:t.wspd,tmpk:t.tmpk,dwpk:t.dwpk,relh:t.relh,mixr:t.mixr,theta:t.theta,thetae:t.thetae,wetbulb:t.wetbulb,vtmp:t.vtmp};return void 0===e.hght&&(e.hght=o(e.pres)),void 0===e.u&&void 0===e.v&&void 0!==e.wdir&&void 0!==e.wspd?(e.u=e.wspd*Math.sin(e.wdir/180*Math.PI),e.v=e.wspd*Math.cos(e.wdir/180*Math.PI)):void 0!==e.u&&void 0!==e.v&&void 0===e.wdir&&void 0===e.wspd&&(e.wspd=Math.sqrt(Math.pow(e.u,2)+Math.pow(e.v,2)),e.wdir=Math.arctan(e.u/e.v)/Math.PI*180),void 0!==e.tmpk&&void 0!==e.dwpk?(void 0===e.theta&&(e.theta=a(e.tmpk,e.pres)),void 0===e.thetae&&(e.thetae=f(e.tmpk,e.dwpk,e.pres))):void 0!==e.mixr&&void 0===e.dwpk&&(e.dwpk=l(e.mixr,e.pres)),e}},{key:"removeLevel",value:function(t){return t in this.levels&&delete this.levels[t],this}},{key:"getData",value:function(t){return t in this.levels?this.levels[t]:{pres:void 0,hght:void 0,tmpk:void 0,dwpk:void 0,wdir:void 0,wspd:void 0,u:void 0,v:void 0,relh:void 0,mixr:void 0,theta:void 0,thetae:void 0,wetbulb:void 0,vtmp:void 0}}},{key:"getLevels",value:function(){return Object.keys(this.levels).map((function(t){return+t})).sort((function(t,e){return t-e}))}},{key:"getNearestLevel",value:function(t){if(!(Object.keys(this.levels).length<1))return Object.keys(this.levels).sort((function(e,n){return Math.abs(e-t)-Math.abs(n-t)})).shift()}},{key:"parcelCollection",get:function(){return this._parcelCollection}}])&&Do(e.prototype,n),t}();function Ao(t){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Vo(t,e){return(Vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Go(t,e){return!e||"object"!==Ao(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yo(t){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Fo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vo(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yo(i);if(o){var n=Yo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Go(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.variables,i=void 0===n?[]:n,o=e.datetime,s=void 0===o?void 0:o,u=e.run,l=void 0===u?void 0:u,c=e.offset,f=void 0===c?void 0:c,d=e.sounding,p=void 0===d?void 0:d;return Lo(this,a),(t=r.call(this,{variables:i,datetime:s,run:l,offset:f}))._sounding=p,t}return e=a,(n=[{key:"sounding",get:function(){return void 0===this._sounding?new Bo:this._sounding},set:function(t){this._sounding=t}}])&&Mo(e.prototype,n),a}(mo);function Xo(t){return function(t){if(Array.isArray(t))return Ho(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||qo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zo(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=qo(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function qo(t,e){if(t){if("string"==typeof t)return Ho(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(t,e):void 0}}function Ho(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ko(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var $o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.topNode,i=e.timesVariableCollections,o=void 0===i?[]:i;Ko(this,t),this._topNode=n,this._availableVariablesMap=new Map,this._timesVariableCollections=o}var e,n;return e=t,(n=[{key:"append",value:function(){for(var t,e=this,n=[],i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return o.forEach((function(t){var i=e._getTopNodeOfResourceDefinition(t,e.topNode);if(void 0!==i){var o=e._getTopMostChildWithAllVariables(new Set(t.variables),i,!0);void 0!==o&&o.append(t)>0&&(n.push(t),e._addAvailableVariablesMapByResource(t))}})),n.length>0&&(Wo.timeoutId&&clearTimeout(Wo.timeoutId),(t=Wo.addedResources).push.apply(t,n),Wo.timeoutId=setTimeout((function(){e.trigger("change:resources",{addedResources:Wo.addedResources}),Wo.addedResources=[]}),100)),this}},{key:"_addAvailableVariablesMapByResource",value:function(t){var e=this;t.variables.forEach((function(t){void 0!==t.variableCollection.node&&(e._availableVariablesMap.has(t.variableCollection.node)||e._availableVariablesMap.set(t.variableCollection.node,new Set),e._availableVariablesMap.get(t.variableCollection.node).add(t))}))}},{key:"remove",value:function(){for(var t=this,e=[],n=new Map,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return o.forEach((function(i){var o=t._getTopNodeOfResourceDefinition(i,t.topNode);if(void 0!==o){var r=t._getTopMostChildWithAllVariables(new Set(i.variables),o,!0);void 0!==r&&r.remove(i)>0&&(e.push(i),n.has(r)||n.set(r,new Set),n.get(r).add(i))}})),n.size>0&&this._removeAvailableVariablesMapByResources(n),e.length>0&&this.trigger("change:resources",{removedResources:e}),this}},{key:"_removeAvailableVariablesMapByResources",value:function(t){var e,n=new Set,i=zo(t.entries());try{var o=function(){var t,i,o,r=(i=e.value,o=2,function(t){if(Array.isArray(t))return t}(i)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}}(i,o)||qo(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],s=r[1],u=new Set,l=zo(s);try{for(l.s();!(t=l.n()).done;)t.value.variables.forEach((function(t){return u.add(t)}))}catch(t){l.e(t)}finally{l.f()}var c,f=zo(u);try{for(f.s();!(c=f.n()).done;){var d=c.value;0==a.getResourcesByVariables(d).length&&n.add(d)}}catch(t){f.e(t)}finally{f.f()}};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}var r,a=zo(n);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=this.getNodeByVariableCollection(s.variableCollection);0==this._collectResourcesOfNodeChildren(u,[s]).length&&this._availableVariablesMap.has(u)&&this._availableVariablesMap.get(u).delete(s)}}catch(t){a.e(t)}finally{a.f()}}},{key:"getTopMostNodeWithAllVariables",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=this._getTopMostChildWithAllVariables(new Set(e),this.topNode,!0);return void 0===i?new co(new oo):i}},{key:"_getTopNodeOfResourceDefinition",value:function(t,e){var n=this;if(t.isDefinedByVariableOf(e.variableCollection))return e;var i=void 0;return e.children.forEach((function(e){void 0!==i&&(i=n._getTopNodeOfResourceDefinition(t,e))})),i}},{key:"_getTopMostChildWithAllVariables",value:function(t,e,n){var i=this,o=!1;if(e.variableCollection.variables.forEach((function(e){t.has(e)&&(o=!0,t.delete(e))})),0==t.size)return e;if(0!=e.children.length&&(o||n)){var r=void 0;return e.children.forEach((function(e){void 0===r&&(r=i._getTopMostChildWithAllVariables(t,e,n))})),r}}},{key:"getNodeByVariableCollection",value:function(t){return void 0===t.node?new co(new oo):t.node}},{key:"getNodeByVariableCollectionId",value:function(t){var e=this._getNodeByVariableCollection((function(e){return t==e.id}));return void 0===e?new co(new oo):e}},{key:"_getNodeByVariableCollection",value:function(t){return t(this.topNode.variableCollection)?this.topNode:this._findChildNodeByVariableCollection(t,this.topNode)}},{key:"_findChildNodeByVariableCollection",value:function(t,e){var n,i=this;return e.children.forEach((function(e){void 0===n&&t(e.variableCollection)?n=e:void 0===n&&e.children.length>0&&(n=i._findChildNodeByVariableCollection(t,e))})),n}},{key:"appendImage",value:function(t){var e=t.variables,n=t.datetime,i=t.run,o=t.offset,r=t.url;return this.append(new ko({variables:e,datetime:n,run:i,offset:o,url:r})),this}},{key:"getAvailableVariables",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.variables,o=void 0===i?[]:i;o=new Set(o);var r=[];Array.from(t).forEach((function(n){var i;[].push.apply(r,(i=t.node).getResourcesByVariables.apply(i,[n].concat(Xo(o)))),[].push.apply(r,e._collectResourcesOfNodeChildren(t.node,[n].concat(Xo(o))))}));var a=new Set;return r.forEach((function(e){var n,i=zo(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.isDefinedBy(o)&&a.add(o)}}catch(t){i.e(t)}finally{i.f()}})),a}},{key:"_collectResourcesOfNodeChildren",value:function(t,e){var n=this,i=[];return t.children.forEach((function(t){[].push.apply(i,t.getResourcesByVariables.apply(t,Xo(e))),[].push.apply(i,n._collectResourcesOfNodeChildren(t,e))})),i}},{key:"getTimesByVariables",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.variables,n=void 0===e?[]:e,i=t.exact,o=void 0!==i&&i,r=this._getTopMostChildWithAllVariables(new Set(n),this.topNode,!0);if(void 0===r)return[];var a=new Set,s=function t(e){e.getResourcesByVariables.apply(e,[o].concat(Xo(n))).forEach((function(t){void 0!==t.datetime&&a.add(t.datetime.valueOf())})),e.children.forEach((function(e){return t(e)}))};return s(r),Xo(a).sort().map((function(t){return new Date(t)}))}},{key:"topNode",get:function(){return this._topNode}},{key:"variableCollections",get:function(){var t;t=function(n){n.children.forEach((function(n){e.push(n.variableCollection),t(n)}))};var e=[this.topNode.variableCollection];return t(this.topNode),e}},{key:"availableVariablesMap",get:function(){return this._availableVariablesMap}}])&&Uo(e.prototype,n),t}();D($o.prototype);const Zo=$o;var Wo={timeoutId:void 0,addedResources:[]};function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function tr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nr(t,e){return!e||"object"!==Jo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ir(i);if(o){var n=ir(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return nr(this,t)});function a(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var t=new Set;["models","runs","regions","fields","levels","accumulations","thresholds"].forEach((function(e){return t.add(new oo({id:e}))}));var e,n={},i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Qo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;n[o.id]=new co(o)}}catch(t){i.e(t)}finally{i.f()}return n.models.appendChild(n.runs),n.runs.appendChild(n.regions),n.regions.appendChild(n.fields),n.fields.appendChild(n.levels,n.accumulations),n.accumulations.appendChild(n.thresholds),r.call(this,{topNode:n.models,timesVariableCollections:new Set([n.models.variableCollection,n.runs.variableCollection])})}return e=a,(n=[{key:"addVariable",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,i=e.name,o=void 0===i?void 0:i,r=e.names,a=void 0===r?{}:r,s=e.langSortation,u=void 0===s?[]:s,l=e.datetime,c=void 0===l?void 0:l,f=void 0===c?new Li({id:n,name:o,names:a,langSortation:u}):new zi({id:n,name:o,names:a,langSortation:u,datetime:c});return t.append(f),this}},{key:"models",get:function(){return this.getNodeByVariableCollectionId("models").variableCollection}},{key:"runs",get:function(){return this.getNodeByVariableCollectionId("runs").variableCollection}},{key:"regions",get:function(){return this.getNodeByVariableCollectionId("regions").variableCollection}},{key:"fields",get:function(){return this.getNodeByVariableCollectionId("fields").variableCollection}},{key:"levels",get:function(){return this.getNodeByVariableCollectionId("levels").variableCollection}},{key:"accumulations",get:function(){return this.getNodeByVariableCollectionId("accumulations").variableCollection}},{key:"thresholds",get:function(){return this.getNodeByVariableCollectionId("thresholds").variableCollection}}])&&tr(e.prototype,n),a}(Zo);function rr(t){return function(t){if(Array.isArray(t))return sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ar(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(t,e){if(t){if("string"==typeof t)return sr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sr(t,e):void 0}}function sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var cr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.alwaysAvailableCollections,i=void 0===n?[]:n;ur(this,t),this._alwaysAvailableCollections=new Set(i),this._modelviewer=void 0,this._container=void 0,this._parentNode=void 0,this._resourceNode=void 0,this._resourceOutput={image:void 0,thermodynamicDiagram:void 0}}var e,n;return e=t,(n=[{key:"render",value:function(){this.onInit(),this.onChangeVisibleResource()}},{key:"onInit",value:function(){var t=this;void 0!==this.parentNode&&(Z()(this.parentNode).empty(),this.trigger("init:display"),void 0!==this._modelviewer&&(this._modelviewer.resources.variableCollections.forEach((function(e){t.trigger("add:variableCollection",{variableCollection:e});var n,i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=ar(t))){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.trigger("add:variable",{variable:o})}}catch(t){i.e(t)}finally{i.f()}})),this._onChangeSelectedVariables()))}},{key:"_onChangeSelectedVariables",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this._changeResources(),void 0!==this._modelviewer){var n=void 0===e?this._container.selectedVariables:e;this._modelviewer.resources.variableCollections.forEach((function(e){rr(n).forEach((function(n){e.contains(n)&&t.trigger("change:selectedVariable",{variable:n,variableCollection:e})}))}))}}},{key:"_changeResources",value:function(){var t=this;void 0!==this._modelviewer&&void 0!==this._container&&Array.from(this._modelviewer.resources.variableCollections).forEach((function(e){var n=t._getParentsVariables(e.node),i=t._modelviewer.resources.getAvailableVariables(e,{variables:n});t.trigger("change:availableVariables",{availableVariables:i,variableCollection:e})}))}},{key:"_getParentsVariables",value:function(t){var e=this,n=new Set;return t.parents.forEach((function(t){Array.from(t.variableCollection).forEach((function(t){e._container.selectedVariables.has(t)&&n.add(t)}));var i=e._getParentsVariables(t);i.size>0&&(n=new Set([].concat(rr(n),rr(i))))})),n}},{key:"_onChangeVisibleResource",value:function(){if(void 0!==this._resourceNode){if(void 0!==this._container){var t=this._container.visibleResource;if("url"in t)void 0!==this.thermodynamicDiagram&&(this.thermodynamicDiagram=void 0,Z()(this._resourceNode).empty()),void 0===this._resourceOutput.image&&(Z()(this._resourceNode).empty(),this._resourceOutput.image=Z()("<img>").css({"max-width":"100%"}),Z()(this._resourceNode).append(this._resourceOutput.image)),this._resourceOutput.image.attr("src",t.url);else if("sounding"in t){void 0!==this._resourceOutput.image&&(this._resourceOutput.image=void 0,Z()(this._resourceNode).empty());var e=!1;this._resourceOutput.thermodynamicDiagram.soundings.forEach((function(n){n.getSounding()===t.sounding?(e=!0,n.visible(!0)):n.visible(!1)})),e||this._resourceOutput.thermodynamicDiagram.addSounding(t.sounding)}else void 0!==this._resourceOutput.image&&(this._resourceOutput.image=void 0,Z()(this._resourceNode).empty()),void 0!==this._resourceOutput.thermodynamicDiagram&&this._resourceOutput.thermodynamicDiagram.soundings.forEach((function(t){return t.visible(!1)}))}}else this.trigger("change:visibleResource")}},{key:"modelviewer",get:function(){return this._modelviewer},set:function(t){var e=this;this._modelviewer=t,void 0!==this._modelviewer&&(this._modelviewer.resources.variableCollections.forEach((function(t){t.on("add:variable",(function(t){e.trigger("add:variable",{variable:t})}))})),this._modelviewer.resources.on("change:resources",(function(){return e._changeResources()})))}},{key:"container",get:function(){return this._container},set:function(t){var e=this;this._container=t,void 0!==this._container&&(this._container.on("change:selectedVariables",(function(t){var n=t.addedVariables;e._onChangeSelectedVariables(n)})),this._onChangeSelectedVariables(),this._container.on("change:visibleResource",(function(){e._onChangeVisibleResource()})))}},{key:"parentNode",get:function(){return this._parentNode},set:function(t){this._parentNode=t,this.onInit()}},{key:"resourceNode",get:function(){return this._resourceNode},set:function(t){this._resourceNode=t,this._onChangeVisibleResource()}}])&&lr(e.prototype,n),t}();D(cr.prototype);const fr=cr;function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t){return function(t){if(Array.isArray(t))return mr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||yr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}}(t,e)||yr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=yr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function yr(t,e){if(t){if("string"==typeof t)return mr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mr(t,e):void 0}}function mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wr(t,e){return(wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _r(t,e){return!e||"object"!==dr(e)&&"function"!=typeof e?Or(t):e}function Or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sr(t){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wr(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sr(i);if(o){var n=Sr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return _r(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.display,o=void 0===i?void 0:i,s=e.adaptSuitableResource,u=void 0===s?{}:s;return br(this,a),(t=r.call(this,{id:n}))._display=void 0===o?new fr:o,t._display.modelviewer=t.modelviewer,t._display.container=Or(t),t._display.parentNode=t._containerNode,t._adaptSuitableResource={},t._initAdaptSuitableResource(u),t._modelviewer=void 0,t._visibleResource,t._displayVariables=new Set,t._selectedVariables=new Set,t._selectedNode=void 0,t._enabledResources=new Map,t._containerNode=void 0,t._listeners={mirror:{container:void 0,listenerKey:void 0},timeline:{timeline:void 0,listenerKey:void 0},resources:{resources:void 0,listenerKey:void 0}},t}return e=a,(n=[{key:"exchangeDisplayVariable",value:function(t){var e,n=new Set(this.displayVariables),i=vr(t);try{for(i.s();!(e=i.n()).done;){var o,r=e.value,a=vr(this.displayVariables);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.variableCollection===r.variableCollection&&(n.delete(s),n.add(r))}}catch(t){a.e(t)}finally{a.f()}}}catch(t){i.e(t)}finally{i.f()}var u,l=vr(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;n.has(c)||n.add(c)}}catch(t){l.e(t)}finally{l.f()}return this.displayVariables=n,this}},{key:"mirrorsFrom",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==this._listeners.mirror.listenerKey&&this._listeners.mirror.container.un("change:displayVariables",this._listeners.mirror.listenerKey),void 0!==e){void 0===n&&(n=this.modelviewer.resources.variableCollections),this._listeners.mirror.container=e;var i=function(){var i,o=new Set,r=vr(e.displayVariables);try{var a=function(){var t=i.value;n.forEach((function(e){t.variableCollection===e&&o.add(t)}))};for(r.s();!(i=r.n()).done;)a()}catch(t){r.e(t)}finally{r.f()}t.exchangeDisplayVariable(o)};this._listeners.mirror.listenerKey=e.on("change:displayVariables",i),i()}}},{key:"_setTimes",value:function(){var t=this,e=hr(this._getSelectedVariablesWithResources([this.modelviewer.resources.topNode],new Set,void 0,(function(e){var n=!0;return t.modelviewer.resources._timesVariableCollections.forEach((function(t){var i,o=!1,r=vr(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;t.contains(a)&&(o=!0)}}catch(t){r.e(t)}finally{r.f()}o||(n=!1)})),n})),1)[0];void 0===e&&(e=new Set);var n=0==e.size?[]:this.modelviewer.resources.getTimesByVariables({variables:e});this.modelviewer.timeline.setTimesBySetID(this.id,n)}},{key:"_updateSelectedVariables",value:function(){var t,e=hr(this._getSelectedVariablesWithResources([this.modelviewer.resources.topNode],new Set,void 0),2),n=e[0],i=e[1];void 0===n?(n=new Set,t=new co({variableCollection:new oo})):t=i.variableCollection.node,this._setSelectedVariables(n,t)}},{key:"_getSelectedVariablesWithResources",value:function(t,e,n){var i,o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._adaptSuitableResource.isResourceSelected;if(r.call(this,e,n))return[e,n];var a,s=[],u=[],l=vr(t);try{for(l.s();!(a=l.n()).done;){var c=a.value;if(this.modelviewer.resources.availableVariablesMap.has(c)&&this.modelviewer.resources.availableVariablesMap.get(c).size){var f,d=vr(this.modelviewer.resources.availableVariablesMap.get(c));try{for(d.s();!(f=d.n()).done;){var p=f.value;this.displayVariables.has(p)?s.push(p):this._adaptSuitableResource.enabled&&u.push(p)}}catch(t){d.e(t)}finally{d.f()}}}}catch(t){l.e(t)}finally{l.f()}(i=[].push).call.apply(i,[s].concat(pr(this._adaptSuitableResource.getPossibleVariables.call(this,u,e))));var h=[void 0,void 0];return s.forEach((function(t){if(void 0===h[0]){var n=new Set(e);n.add(t);var i=hr(o._getSelectedVariablesWithResources(t.variableCollection.node.children,n,t,r),2),a=i[0],s=i[1];if(void 0!==a)return h[0]=a,void(h[1]=s);var u,l=!0,c=vr(n);try{var f=function(){var t=u.value,e=!1;o.modelviewer.resources._timesVariableCollections.forEach((function(n){n.contains(t)&&(e=!0)})),e||(l=!1)};for(c.s();!(u=c.n()).done;)f()}catch(t){c.e(t)}finally{c.f()}l&&n.size==o.modelviewer.resources._timesVariableCollections.size&&(h[0]=n,h[1]=t)}})),h}},{key:"_setSelectedVariables",value:function(t,e){var n,i=new Set,o=vr(t=new Set(t));try{for(o.s();!(n=o.n()).done;){var r=n.value;this.selectedVariables.has(r)||i.add(r)}}catch(t){o.e(t)}finally{o.f()}var a,s=new Set,u=vr(this.selectedVariables);try{for(u.s();!(a=u.n()).done;){var l=a.value;t.has(l)||s.add(l)}}catch(t){u.e(t)}finally{u.f()}(i.size>0||s.size>0)&&(this._selectedVariables=t,this._selectedNode=e,this._setTimes(),this._setEnabledResources(),this.trigger("change:selectedVariables",{addedVariables:i,removedVariables:s}))}},{key:"_setEnabledResources",value:function(){var t,e=this;this._enabledResources.clear(),void 0!==this._selectedNode&&(0!=this.selectedVariables.size&&(t=this._selectedNode).getResourcesByVariables.apply(t,[!0].concat(pr(this.selectedVariables))).filter((function(t){return t.datetime&&!isNaN(t.datetime.valueOf())})).forEach((function(t){return e._enabledResources.set(t.datetime.valueOf(),t)})),this.modelviewer.timeline.setEnabledTimesBySetID(this.id,this.enabledTimes),this.trigger("change:enabledResources",this._enabledResources),this._setVisibleResource())}},{key:"_setVisibleResource",value:function(){var t=this._visibleResource,e=this.modelviewer.timeline.getSelectedTime().valueOf();this._enabledResources.has(e)?this._visibleResource=this._enabledResources.get(e):this._visibleResource=void 0,this._visibleResource!==t&&this.trigger("change:visibleResource")}},{key:"_initAdaptSuitableResource",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.enabled,n=void 0===e||e,i=t.getPossibleVariables,o=void 0===i?void 0:i,r=t.isResourceSelected,a=void 0===r?void 0:r;this._adaptSuitableResource={enabled:n,getPossibleVariables:o,isResourceSelected:a},void 0===this._adaptSuitableResource.getPossibleVariables&&(this._adaptSuitableResource.getPossibleVariables=function(t){return t}),void 0===this._adaptSuitableResource.isResourceSelected&&(this._adaptSuitableResource.isResourceSelected=function(t,e){var n;return void 0!==e&&(n=e.variableCollection.node).getResourcesByVariables.apply(n,[!0].concat(pr(t))).length>0})}},{key:"display",get:function(){return this._display}},{key:"modelviewer",get:function(){return this._modelviewer},set:function(t){var e=this;if(this._modelviewer=t,void 0===this._modelviewer)return void 0!==this._listeners.timeline.listenerKey&&this._listeners.timeline.timeline.un("change:time",this._listeners.timeline.listenerKey),void(void 0!==this._listeners.resources.listenerKey&&this._listeners.resources.resources.un("change:resources",this._listeners.resources.listenerKey));this._display.modelviewer=t,this._listeners.timeline.timeline=this._modelviewer.timeline,this._listeners.timeline.listenerKey=this._modelviewer.timeline.on("change:time",(function(){return e._setVisibleResource()})),this._listeners.resources.resources=this._modelviewer.resources,this._listeners.resources.listenerKey=this._modelviewer.resources.on("change:resources",(function(){e._setTimes(),e._setEnabledResources(),e._updateSelectedVariables()})),this._setTimes()}},{key:"containerNode",get:function(){return this._containerNode},set:function(t){this._containerNode=t,void 0!==this._containerNode&&(this._display.parentNode=this._containerNode)}},{key:"visibleResource",get:function(){return void 0===this._visibleResource?new mo:this._visibleResource}},{key:"displayVariables",get:function(){return this._displayVariables},set:function(t){var e,n=new Set,i=vr(t=new Set(t));try{for(i.s();!(e=i.n()).done;){var o=e.value;this._displayVariables.has(o)||n.add(o)}}catch(t){i.e(t)}finally{i.f()}var r,a=new Set,s=vr(this.displayVariables);try{for(s.s();!(r=s.n()).done;){var u=r.value;t.has(u)||a.add(u)}}catch(t){s.e(t)}finally{s.f()}(n.size>0||a.size>0)&&(this._displayVariables=t,this._updateSelectedVariables(),this.trigger("change:displayVariables",{addedVariables:n,removedVariables:a}))}},{key:"selectedVariables",get:function(){return this._selectedVariables}},{key:"enabledTimes",get:function(){return pr(this._enabledResources.keys()).filter((function(t){return!isNaN(t)})).map((function(t){return new Date(t)}))}}])&&gr(e.prototype,n),a}(ti);D(kr.prototype);const Tr=kr,Pr=SVG;function xr(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Rr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=void 0===e?void 0:e,i=t.width,o=void 0===i?void 0:i,r=xr(t,["color","width"]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.color=Cr(n,a.color,"black"),r.width=Cr(o,a.width,1),Object.keys(a).forEach((function(t){"color"!=t&&"width"!=t&&void 0===r[t]&&(r[t]=a[t])})),r}function jr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.size,n=void 0===e?void 0:e,i=t.color,o=void 0===i?void 0:i,r=t.anchor,a=void 0===r?void 0:r,s=xr(t,["size","color","anchor"]),u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.size=Cr(n,u.size,12),s.color=Cr(o,u.color,"black"),void 0!==(a=Cr(a,u.anchor))&&(s.anchor=a),Object.keys(u).forEach((function(t){"color"!=t&&"size"!=t&&"anchor"!=t&&void 0===s[t]&&(s[t]=u[t])})),s}function Er(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e?void 0:e,i=t.style,o=void 0===i?{}:i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{visible:Cr(n,r.visible,!0),style:Rr(o,r.style)}}function Nr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"visible"in e&&(t.visible=e.visible),"style"in e&&["color","width","opacity","linecap","linejoin","dasharray"].forEach((function(n){n in e.style&&(t.style[n]=e.style[n])})),t}function Cr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return void 0!==t?t:e}))}function Ir(t){var e=t.node,n=t.text,i=t.x,o=t.y,r=t.horizontalMargin,a=void 0===r?0:r,s=t.verticalMargin,u=void 0===s?0:s,l=t.font,c=void 0===l?{}:l,f=t.fill,d=void 0===f?{}:f,p=e.group();"color"in d||(d.color="white");var h=p.rect().fill(d),v=p.text(n).attr({x:i,y:o}).font(c);return"bottom"==c["alignment-baseline"]&&v.dy(-v.bbox().height-5),v.dx(a*("end"==v.attr("text-anchor")?-1:1)).dy(u*("bottom"==c["alignment-baseline"]?-1:1)),h.attr({x:v.bbox().x,y:v.bbox().y,width:v.bbox().width,height:v.bbox().height}),p}function Dr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.node,n=t.x,i=void 0===n?0:n,o=t.y,r=void 0===o?0:o,a=t.wspd,s=void 0===a?0:a,u=t.wdir,l=void 0===u?270:u,c=t.length,f=void 0===c?50:c,d=t.strokeStyle,p=void 0===d?void 0:d,h=t.fillTriangle,v=void 0===h||h,y=t.triangleRatio,m=void 0===y?.2:y,b=t.barbDistanceRatio,g=void 0===b?.1:b,w=t.barbHeightRatio,O=void 0===w?3/8:w,S=t.circleOnLowWindspeed,k=void 0===S||S,T=t.circleRadiusRatio,P=void 0===T?.1:T;p=Rr(p);var x=_(s),R=e.group(),j=x>=5?R.group():void 0,E=f*m,N=f*g,C=f*O,I=r-f,D=x;if(x<5&&k)R.circle(f*P).cx(i).cy(r).stroke(p).fill("none");else{for(R.line(i,I,i,r).stroke(p);D>=50;)j.polyline([[i,I],[i+C,I+E/2],[i,I+E]]).fill(v?p:"none").stroke(p),I+=E+((D-=50)>=50?N/2:N);for(;D>=10;)j.line(i,I,i+C,I-E/2).stroke(p),I+=N,D-=10;x<10&&(I+=N),D>=5&&j.line(i,I,i+C/2,I-E/4).stroke(p);var B=I-(r-f);B>.9*f&&j.scale(1,.9*f/B,i,r-f),0!=l&&R.rotate(l,i,r)}}function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Lr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Vr(t,e){return(Vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gr(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yr(t){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vr(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yr(i);if(o){var n=Yr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Gr(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.parcel,i=void 0===n?void 0:n,o=e.visible,s=void 0===o||o,u=e.temp,l=void 0===u?{}:u,c=e.dewp,f=void 0===c?{}:c,d=Ar(e,["parcel","visible","temp","dewp"]);return Lr(this,a),(t=r.call(this,d))._parcel=i,void 0===t.id&&void 0!==i&&(t.id=i.id),t._options={visible:s,temp:Er(l,{style:{color:"rgb(255, 153, 0)",width:3,linecap:"round"}}),dewp:Er(f,{style:{color:"rgb(255, 153, 0)",width:3,linecap:"round"}})},t}return e=a,(n=[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e?void 0:e,i=t.temp,o=void 0===i?void 0:i,r=t.dewp,a=void 0===r?void 0:r,s=!1;void 0===o?o={}:s=!0,void 0===a?a={}:s=!0,this._options.temp=Nr(this._options.temp,o),this._options.dewp=Nr(this._options.dewp,a),s&&this.trigger("change:options"),void 0!==n&&(this.visible=n)}},{key:"parcel",get:function(){return this._parcel}},{key:"visible",get:function(){return this._options.visible},set:function(t){var e=this._options.visible;this._options.visible=!!t,e!=this._options.visible&&this.trigger("change:visible")}},{key:"options",get:function(){return this._options}}])&&Mr(e.prototype,n),a}(ti);D(Fr.prototype);const Xr=Fr;function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Hr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Hr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Kr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ur(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $r(t,e){return($r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zr(t,e){return!e||"object"!==zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wr(t){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$r(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wr(i);if(o){var n=Wr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Zr(this,t)});function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.visible,o=void 0===i||i,s=n.diagram,u=void 0===s?{}:s,l=n.windprofile,c=void 0===l?{}:l,f=n.hodograph,d=void 0===f?{}:f,p=n.parcels,h=void 0===p?{}:p;if(Kr(this,a),(e=r.call(this))._sounding=t,e._diagramParcelCollection=new ai({fireReplace:!1,fireAddRemoveOnReplace:!0,emptyObjectMaker:function(){return new Xr}}),e._visible=o,e._options={diagram:ta(u),windprofile:na(c),hodograph:Er(d),parcels:oa(h)},void 0!==e._sounding){e._sounding.parcelCollection.on("add:item",(function(t){return e.addParcel(t)})),e._sounding.parcelCollection.on("remove:item",(function(t){var n,i=qr(e._diagramParcelCollection);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.parcel===t&&e._diagramParcelCollection.remove(o)}}catch(t){i.e(t)}finally{i.f()}}));var v,y=qr(e._sounding.parcelCollection);try{for(y.s();!(v=y.n()).done;){var m=v.value;e.addParcel(m)}}catch(t){y.e(t)}finally{y.f()}}return e}return e=a,(n=[{key:"addParcel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(e=void 0===e?this.getParcelOptions(t):e).parcel=t;var n=new Xr(e);return this._diagramParcelCollection.append(n),n}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e?void 0:e,i=t.diagram,o=void 0===i?void 0:i,r=t.windprofile,a=void 0===r?void 0:r,s=t.hodograph,u=void 0===s?void 0:s,l=t.parcels,c=void 0===l?void 0:l,f=!1;void 0===o?o={}:f=!0,void 0===a?a={}:f=!0,void 0===u?u={}:f=!0,this._options.diagram=ea(this._options.diagram,o),this._options.windprofile=ia(this._options.windprofile,a),this._options.hodograph=Nr(this._options.hodograph,u),f&&this.trigger("change:options"),void 0===c&&(c={}),this._options.parcels=ra(this._options.parcels,c);var d,p=qr(this.diagramParcelCollection);try{for(p.s();!(d=p.n()).done;){var h=d.value;h.id in c&&h.update(c[h.id])}}catch(t){p.e(t)}finally{p.f()}void 0!==n&&(this.visible=n)}},{key:"getParcelOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n={visible:this.options.parcels.default.visible,temp:{visible:this.options.parcels.default.temp.visible,style:{}},dewp:{visible:this.options.parcels.default.dewp.visible,style:{}}};return["temp","dewp"].forEach((function(e){Object.keys(t.options.parcels.default[e].style).forEach((function(i){n[e].style[i]=t.options.parcels.default[e].style[i]}))})),void 0!==e&&e.id in this.options.parcels&&(n=aa(n,this.options.parcels[e.id],["temp","dewp"])),n}},{key:"sounding",get:function(){return this._sounding}},{key:"visible",get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=!!t,e!=this._visible&&this.trigger("change:visible")}},{key:"options",get:function(){return this._options}},{key:"diagramParcelCollection",get:function(){return this._diagramParcelCollection}}])&&Ur(e.prototype,n),a}(ti);D(Jr.prototype);const Qr=Jr;function ta(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e||e,i=t.temp,o=void 0===i?{}:i,r=t.dewp,a=void 0===r?{}:r,s=t.wetbulb,u=void 0===s?{}:s;return{visible:n,temp:Er(o,{style:{color:"red",width:3,linecap:"round"}}),dewp:Er(a,{style:{color:"blue",width:3,linecap:"round"}}),wetbulb:Er(u,{style:{color:"green",width:2,linecap:"round"}})}}function ea(t,e){return aa(t,e,["temp","dewp","wetbulb"])}function na(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e||e,i=t.windbarbs,o=void 0===i?{}:i,r=t.windspeed,a=void 0===r?{}:r;return{visible:n,windbarbs:Er(o),windspeed:Er(a)}}function ia(t,e){return aa(t,e,["windbarbs","windspeed"])}function oa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.visible&&(t.visible=!0),void 0===t.default&&(t.default={}),void 0===t.default.visible&&(t.default.visible=!1),void 0===t.default.temp&&(t.default.temp={}),void 0===t.default.temp.visible&&(t.default.temp.visible=!0),void 0===t.default.temp.style&&(t.default.temp.style={}),void 0===t.default.temp.style.color&&(t.default.temp.style.color="rgb(255, 153, 0)"),void 0===t.default.temp.style.width&&(t.default.temp.style.width=3),void 0===t.default.temp.style.linecap&&(t.default.temp.style.linecap="round"),void 0===t.default.dewp&&(t.default.dewp={}),void 0===t.default.dewp.visible&&(t.default.dewp.visible=!0),void 0===t.default.dewp.style&&(t.default.dewp.style={}),void 0===t.default.dewp.style.color&&(t.default.dewp.style.color="rgb(255, 194, 102)"),void 0===t.default.dewp.style.width&&(t.default.dewp.style.width=3),void 0===t.default.dewp.style.linecap&&(t.default.dewp.style.linecap="round"),t}function ra(t,e){return"visible"in e&&(t.visible=e.visible),"default"in e&&(t.default=aa(t.default,e.default,["temp","dewp"])),Object.keys(e).filter((function(t){return"visible"!=t&&"default"!=t})).forEach((function(n){return t[n]=ea(n in t?t[n]:{},e[n])})),t}function aa(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"visible"in e&&(t.visible=e.visible),n.forEach((function(n){n in e&&(t[n]=Nr(t[n]?t[n]:{style:{}},e[n]))})),t}function sa(t){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ua(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return la(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?la(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function la(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function da(t,e){return(da=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pa(t,e){return!e||"object"!==sa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ha(t){return(ha=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const va=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&da(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ha(i);if(o){var n=ha(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return pa(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.renderTo,i=void 0===n?void 0:n,o=e.width,s=void 0===o?void 0:o,u=e.height,l=void 0===u?void 0:u;if(ca(this,a),(t=r.call(this,{fireReplace:!1,fireAddRemoveOnReplace:!0,emptyObjectMaker:function(){return new Qr}}))._svgNode=void 0===i||"node"in i||"instance"in i?(0,Pr.SVG)(i):(0,Pr.SVG)().addTo(i),void 0!==s||void 0!==l)t._svgNode.size(s,l);else if(void 0===s&&void 0===l&&void 0!==i&&"getBoundingClientRect"in i){var c=i.getBoundingClientRect(),f=window.getComputedStyle(i);t._svgNode.size(c.width-parseFloat(f.getPropertyValue("padding-left"))-parseFloat(f.getPropertyValue("padding-right")),c.height-parseFloat(f.getPropertyValue("padding-top"))-parseFloat(f.getPropertyValue("padding-bottom")))}return t._plotAreas=new Set,t._svgNode.on("mousemove",(function(e){var n,i=ua(t._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"isHoverLabelsRemote"in o&&o.svgNode.dispatchEvent(e)}}catch(t){i.e(t)}finally{i.f()}})),t._svgNode.on("mouseout",(function(e){if(t._svgNode.node===e.target){var n,i=ua(t._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"_hoverLabelsGroup"in o&&o._hoverLabelsGroup.clear()}}catch(t){i.e(t)}finally{i.f()}}})),t.on("add:item",(function(e){var n,i=ua(t._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"addSounding"in o&&o.addSounding(e)}}catch(t){i.e(t)}finally{i.f()}})),t.on("remove:item",(function(e){var n,i=ua(t._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"removeSounding"in o&&o.removeSounding(e)}}catch(t){i.e(t)}finally{i.f()}})),t}return e=a,(n=[{key:"appendPlotArea",value:function(t){if(!this._plotAreas.has(t)){this._plotAreas.add(t),t.addTo(this.svgNode);var e,n=ua(this);try{for(n.s();!(e=n.n()).done;){var i=e.value;"addSounding"in t&&t.addSounding(i)}}catch(t){n.e(t)}finally{n.f()}return this}}},{key:"removePlotArea",value:function(t){if(this._plotAreas.has(t)){var e,n=ua(this);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.removeSounding(i)}}catch(t){n.e(t)}finally{n.f()}return this._plotAreas.delete(t),this}}},{key:"exchangeCoordinateSystem",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=ua(this._plotAreas);try{for(i.s();!(e=i.n()).done;){var o=e.value;void 0!==n&&o.coordinateSystem!==n||(o.coordinateSystem=t)}}catch(t){i.e(t)}finally{i.f()}}},{key:"addSounding",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Qr(t,e),i=1,o="sounding-".concat(i);this.containsId(o);)i++,o="sounding-".concat(i);return n.id=o,this.append(n),n}},{key:"svgNode",get:function(){return this._svgNode}}])&&fa(e.prototype,n),a}(ai);function ya(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ma(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ba=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,i=void 0===n?100:n,o=e.height,r=void 0===o?100:o,a=e.pressure,s=void 0===a?{}:a,u=e.temperature,l=void 0===u?{}:u;ya(this,t),this._width=i,this._height=r,this.temperatureBottomLeft,this.temperatureBottomRight,this.inclinationTan,this.options={pressure:{},temperature:{}},this._initPressureOptions(s),this._initTemperatureOptions(l)}var e,n;return e=t,(n=[{key:"isIsobarsStraightLine",value:function(){return!0}},{key:"isDryAdiabatStraightLine",value:function(){return!1}},{key:"isIsothermsVertical",value:function(){return void 0!==this.options.temperature.inclinationAngle&&0==this.options.temperature.inclinationAngle}},{key:"getPByXY",value:function(t,e){return Math.pow(this.options.pressure.min,e/this.height)*Math.pow(this.options.pressure.max,(this.height-e)/this.height)}},{key:"getTByXY",value:function(t,e){var n=t-e*this.inclinationTan;return this.temperatureBottomLeft+n*(this.temperatureBottomRight-this.temperatureBottomLeft)/this.width}},{key:"getYByXP",value:function(t,e){return this.height*Math.log(this.options.pressure.max/e)/Math.log(this.options.pressure.max/this.options.pressure.min)}},{key:"getTByXP",value:function(t,e){return this.getTByXY(t,this.getYByXP(t,e))}},{key:"getXByYT",value:function(t,e){return(e-this.temperatureBottomLeft)*this.width/(this.temperatureBottomRight-this.temperatureBottomLeft)+t*this.inclinationTan}},{key:"getYByXT",value:function(t,e){return 0!=this.inclinationTan?(t-this.getXByYT(0,e))/this.inclinationTan:void 0}},{key:"getXByPT",value:function(t,e){return this.getXByYT(this.getYByXP(0,t),e)}},{key:"getYByPT",value:function(t){return this.getYByXP(0,t)}},{key:"getXByYPotentialTemperature",value:function(t,e){return e=s(e,this.getPByXY(0,t)),this.getXByYT(t,e)}},{key:"getYByXPotentialTemperature",value:function(t,e){var n=this.getPByXY(t,0),i=this.getPByXY(t,this.height);if(!(a(this.getTByXP(t,i),i)<e||e<a(this.getTByXP(t,n),n))){for(;n-i>10;){var o=i+(n-i)/2,r=a(this.getTByXP(t,o),o);if(void 0===r)return;r<e?n=o:i=o}return this.getYByXP(t,i+(n-i)/2)}}},{key:"getXByPPotentialTemperatur",value:function(t,e){return e=s(e,t),this.getXByPT(t,e)}},{key:"getYByPPotentialTemperatur",value:function(t,e){var n=this.getXByPPotentialTemperatur(t,e);return this.getYByXPotentialTemperature(n,e)}},{key:"getXByYHMR",value:function(t,e){var n=this.getPByXY(0,t);return this.getXByYT(t,l(e,n))}},{key:"getYByXHMR",value:function(t,e){for(var n=this.getPByXY(t,0),i=this.getPByXY(t,this.height);n-i>10;){var o=i+(n-i)/2,r=p(this.getTByXP(t,o),o);if(void 0===r)return;r<e?i=o:n=o}return this.getYByXP(t,i+(n-i)/2)}},{key:"getXByPHMR",value:function(t,e){var n=l(e,t);return this.getXByPT(t,n)}},{key:"getYByPHMR",value:function(t,e){var n=l(e,t);return this.getYByPT(t,n)}},{key:"getXByYEquiPotTemp",value:function(t,e){var n=u(e,this.getPByXY(0,t));return this.getXByYT(t,n)}},{key:"getYByXEquiPotTemp",value:function(t,e){for(var n=0,i=this.height,o=void 0;i-n>10;){o=n+(i-n)/2;var r=this.getYByXT(t,u(e,this.getPByXY(t,o)));if(void 0===r)return;r<e?i=o:n=o}return o}},{key:"getXByPEquiPotTemp",value:function(t,e){var n=u(e,t);return this.getXByPT(t,n)}},{key:"getYByPEquiPotTemp",value:function(t,e){var n=u(e,t);return this.getYByPT(t,n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.pressure,n=void 0===e?{}:e,i=t.temperature,o=void 0===i?{}:i;"min"in n&&(this.options.pressure.min=void 0===n.min?100:n.min),"max"in n&&(this.options.pressure.max=void 0===n.max?1e3:n.max),"min"in o&&(this.options.temperature.min=void 0===o.min?m(-40):o.min),"max"in o&&(this.options.temperature.max=void 0===o.max?m(-45):o.max),"reference"in o&&(this.options.temperature.reference=void 0===o.reference?"base":o.reference),"inclinationAngle"in o&&(this.options.temperature.inclinationAngle=void 0===o.inclinationAngle?45:o.inclinationAngle),this._normalizeTemperatureRange(),this.trigger("change:options")}},{key:"_initPressureOptions",value:function(t){var e=t.min,n=void 0===e?100:e,i=t.max,o=void 0===i?1050:i;this.options.pressure={min:n,max:o}}},{key:"_initTemperatureOptions",value:function(t){var e=t.min,n=void 0===e?m(-40):e,i=t.max,o=void 0===i?m(45):i,r=t.reference,a=void 0===r?"base":r,s=t.inclinationAngle,u=void 0===s?45:s;this.options.temperature={min:n,max:o,reference:a,inclinationAngle:u},this._normalizeTemperatureRange()}},{key:"_normalizeTemperatureRange",value:function(){if(this.temperatureBottomLeft=this.options.temperature.min,this.temperatureBottomRight=this.options.temperature.max,this.inclinationTan=45==this.options.temperature.inclinationAngle?1:0==this.options.temperature.inclinationAngle?0:Math.tan(this.options.temperature.inclinationAngle*Math.PI/180),/^[0-9]+$/.test(this.options.temperature.reference)){var t=this.getYByXP(0,this.options.temperature.reference),e=this.inclinationTan*t,n=(this.temperatureBottomRight-this.temperatureBottomLeft)/this.width;this.temperatureBottomLeft+=n*e,this.temperatureBottomRight+=n*e}}},{key:"width",get:function(){return this._width},set:function(t){var e=this._width;this._width=t,e!=this._width&&this.trigger("change:options")}},{key:"height",get:function(){return this._height},set:function(t){var e=this._height;this._height=t,e!=this._height&&this.trigger("change:options")}}])&&ma(e.prototype,n),t}();D(ba.prototype);const ga=ba;function wa(t){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Sa(t,e){return(Sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ka(t,e){return!e||"object"!==wa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ta(t){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pa=.2857;const xa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sa(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ta(i);if(o){var n=Ta(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ka(this,t)});function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=void 0===e?100:e,i=t.height,o=void 0===i?100:i,s=t.pressure,u=void 0===s?{}:s,l=t.temperature,c=void 0===l?{}:l;return _a(this,a),c.inclinationAngle=0,r.call(this,{width:n,height:o,pressure:u,temperature:c})}return e=a,(n=[{key:"isDryAdiabatStraightLine",value:function(){return!0}},{key:"getPByXY",value:function(t,e){return Math.pow(Math.pow(this.options.pressure.max,Pa)-e*(Math.pow(this.options.pressure.max,Pa)-Math.pow(this.options.pressure.min,Pa))/this.height,1/Pa)}},{key:"getYByXP",value:function(t,e){return this.height*(Math.pow(this.options.pressure.max,Pa)-Math.pow(e,Pa))/(Math.pow(this.options.pressure.max,Pa)-Math.pow(this.options.pressure.min,Pa))}},{key:"getYByXT",value:function(){}}])&&Oa(e.prototype,n),a}(ga);function Ra(t){return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ja(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ea(t,e){return(Ea=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Na(t,e){return!e||"object"!==Ra(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ca(t){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ia=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ea(t,e)}(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=Ca(e);if(n){var o=Ca(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return Na(this,t)});function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=void 0===e?100:e,r=t.height,a=void 0===r?100:r,s=t.pressure,u=void 0===s?{}:s,l=t.temperature,c=void 0===l?{}:l;return ja(this,o),c.inclinationAngle=0,i.call(this,{width:n,height:a,pressure:u,temperature:c})}return o}(ga);function Da(t){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ba(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aa(t,e){return(Aa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function La(t,e){return!e||"object"!==Da(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ma(t){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Va=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Aa(t,e)}(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=Ma(e);if(n){var o=Ma(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return La(this,t)});function o(){return Ba(this,o),i.apply(this,arguments)}return o}(ga);function Ga(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ya(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Fa=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.svgNode,o=void 0===i?void 0:i,r=n.coordinateSystem,a=void 0===r?void 0:r,s=n.x,u=void 0===s?0:s,l=n.y,c=void 0===l?0:l,f=n.width,d=void 0===f?100:f,p=n.height,h=void 0===p?100:p,v=n.style,y=void 0===v?{}:v,m=n.visible,b=void 0===m||m,g=n.events,w=void 0===g?{}:g;Ga(this,t),this._svgNode=(0,Pr.SVG)().attr({x:u,y:c,width:d,height:h}).css(this._getNormalizedStyle(y)).css("display",b?"inline":"none"),void 0!==o&&this.addTo(o),this._svgNodeBackground=this._svgNode.group(),this._visible=b,this._coordinateSystem=a,this._coordinateSystemListenerKey=void 0!==this._coordinateSystem?this._coordinateSystem.on("change:options",(function(){return e.onCoordinateSystemChange()})):void 0,this.on("change:extent",(function(){return e.onCoordinateSystemChange()})),this._initEvents(w)}var e,n;return e=t,(n=[{key:"addTo",value:function(t){this._svgNode.addTo(t)}},{key:"init",value:function(){this.onCoordinateSystemChange()}},{key:"onCoordinateSystemChange",value:function(){void 0!==this._coordinateSystem&&this.drawBackground(this._svgNodeBackground)}},{key:"drawBackground",value:function(t){t.clear(),this.trigger("prebuild:background",{node:t}),this._drawBackground(t),this.trigger("postbuild:background",{node:t})}},{key:"_drawBackground",value:function(){}},{key:"_getNormalizedStyle",value:function(t){var e=t.overflow;return{overflow:void 0===e?"hidden":e}}},{key:"_initEvents",value:function(t){var e=this,n=t.click,i=void 0===n?void 0:n,o=t.dblclick,r=void 0===o?void 0:o,a=t.mousedown,s=void 0===a?void 0:a,u=t.mouseup,l=void 0===u?void 0:u,c=t.mouseover,f=void 0===c?void 0:c,d=t.mouseout,p=void 0===d?void 0:d,h=t.mousemove,v=void 0===h?void 0:h,y=t.touchstart,m=void 0===y?void 0:y,b=t.touchmove,g=void 0===b?void 0:b,w=t.touchleave,_=void 0===w?void 0:w,O=t.touchend,S=void 0===O?void 0:O,k=t.touchcancel,T={click:i,dblclick:r,mousedown:s,mouseup:l,mouseover:f,mouseout:p,mousemove:v,touchstart:m,touchmove:g,touchleave:_,touchend:S,touchcancel:void 0===k?void 0:k};Object.keys(T).forEach((function(t){e._svgNode.on(t,(function(n){var i=e.getExtendedEvent(n,e._svgNode.point(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset));void 0!==T[t]&&T[t].call(e,i),e.trigger(t,i)}))}))}},{key:"getExtendedEvent",value:function(t,e){return t.elementX=e.x,t.elementY=e.y,t}},{key:"svgNode",get:function(){return this._svgNode}},{key:"visible",get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=t,e!=this._visible&&(this._svgNode.style("display",this._visible?"inline":"none"),this.trigger("change:visible"))}},{key:"x",get:function(){return this._svgNode.attr("x")},set:function(t){this._svgNode.attr({x:t}),this.trigger("change:position")}},{key:"y",get:function(){return this._svgNode.attr("y")},set:function(t){this._svgNode.attr({y:t}),this.trigger("change:position")}},{key:"width",get:function(){return this._svgNode.attr("width")},set:function(t){this._svgNode.attr({width:t}),this.trigger("change:extent")}},{key:"height",get:function(){return this._svgNode.attr("height")},set:function(t){this._svgNode.attr({height:t}),this.trigger("change:extent")}},{key:"style",get:function(){return this._svgNode.css()},set:function(t){this._svgNode.css(t)}},{key:"coordinateSystem",get:function(){return this._coordinateSystem},set:function(t){var e=this;void 0!==this._coordinateSystemListenerKey&&this._coordinateSystem.un("change:options",this._coordinateSystemListenerKey),this._coordinateSystem=t,this._coordinateSystemListenerKey=this._coordinateSystem.on("change:options",(function(){return e.onCoordinateSystemChange()})),this.onCoordinateSystemChange()}},{key:"minExtentLength",get:function(){return Math.min(this.width,this.height)}},{key:"maxExtentLength",get:function(){return Math.max(this.width,this.height)}}])&&Ya(e.prototype,n),t}();D(Fa.prototype);const Xa=Fa;function za(t){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ha(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ka(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ua(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Za(t,e,n){return(Za="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qa(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Wa(t,e){return(Wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ja(t,e){return!e||"object"!==za(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qa(t){return(Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ts=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wa(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qa(i);if(o){var n=Qa(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ja(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.svgNode,i=void 0===n?void 0:n,o=e.coordinateSystem,s=void 0===o?void 0:o,u=e.x,l=void 0===u?0:u,c=e.y,f=void 0===c?0:c,d=e.width,p=void 0===d?100:d,h=e.height,v=void 0===h?100:h,y=e.style,m=void 0===y?{}:y,b=e.visible,g=void 0===b||b,w=e.events,_=void 0===w?{}:w,O=e.getSoundingVisibility,S=void 0===O?function(t){return t.visible}:O,k=e.dataGroupIds,T=void 0===k?[]:k,P=e.getCoordinatesByLevelData,x=void 0===P?function(){return{x:void 0,y:void 0}}:P,R=e.insertDataGroupInto,j=void 0===R?function(){}:R,E=e.filterDataPoint,N=void 0===E?void 0:E,C=e.minDataPointsDistance,I=void 0===C?0:C;return Ua(this,a),(t=r.call(this,{svgNode:i,coordinateSystem:s,x:l,y:f,width:p,height:v,style:m,visible:g,events:_}))._getSoundingVisibility=S,t._dataGroupIds=T,t._getCoordinatesByLevelData=x,t._insertDataGroupInto=j,t._filterDataPoint=N,t._minDataPointsDistance=I,t._svgNodeData=t.svgNode.group(),t._soundings=new Map,t}return e=a,(n=[{key:"addSounding",value:function(t){var e=this,n=this._svgNodeData.group(),i=t.on("change:visible",(function(){return e.onChangeSoundingVisibility(t,n)})),o=t.on("change:options",(function(){void 0!==e.coordinateSystem&&e.drawSounding(t,n),e.onChangeSoundingVisibility(t,n)}));this._soundings.set(t,{group:n,listenerKeyVisible:i,listenerKeyOptions:o}),this.trigger("add:sounding",t),void 0!==this.coordinateSystem&&this.drawSounding(t,n),this.setDisplayOfSounding(t,n)}},{key:"removeSounding",value:function(t){this._soundings.has(t)&&(this._soundings.get(t).group.remove(),t.un(this._soundings.get(t).listenerKeyVisible),t.un(this._soundings.get(t).listenerKeyOptions),this._soundings.delete(t)),this.trigger("remove:sounding",t)}},{key:"onCoordinateSystemChange",value:function(){Za(Qa(a.prototype),"onCoordinateSystemChange",this).call(this),this.drawSoundings()}},{key:"onChangeSoundingVisibility",value:function(t,e){this.setDisplayOfSounding(t,e)}},{key:"setDisplayOfSounding",value:function(t,e){e.css("display",this._getSoundingVisibility(t)?"inline":"none")}},{key:"drawSoundings",value:function(){if(void 0!==this.coordinateSystem){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ka(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ka(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(this._soundings.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.drawSounding(n,this._soundings.get(n).group)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"drawSounding",value:function(t,e){var n=this;e.clear(),this.trigger("preinsert:sounding",{sounding:t,node:e});var i=e.group(),o={},r=this._getFilterDataPointFunction(),a={};t.sounding.getLevels().reverse().forEach((function(e){var i=t.sounding.getData(e);n._dataGroupIds.forEach((function(e){e in o||(o[e]=[]);var s={levelData:i,x:void 0,y:void 0},u=n._getCoordinatesByLevelData(e,t,s.levelData,n),l=u.x,c=u.y;s.x=l,s.y=c,void 0===l||void 0===c||void 0!==r&&r(s,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qa(Object(n),!0).forEach((function(e){Ha(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},a))||(a=s,o[e].push(s))}))})),Object.keys(o).forEach((function(e){o[e].length>0&&n._insertDataGroupInto(i,e,t,o[e],n)})),this.trigger("postinsert:sounding",{sounding:t,node:e})}},{key:"_getFilterDataPointFunction",value:function(){return void 0===this._filterDataPoint?0===(t=this._minDataPointsDistance)?void 0:function(e,n){var i=e.x,o=e.y;if(void 0===n.x||void 0===n.y)return n.x=i,n.y=o,!1;var r=Math.sqrt(Math.pow(i-n.x,2)+Math.pow(o-n.y,2))<t;return r||(n.x=i,n.y=o),r}:this._filterDataPoint;var t}},{key:"dataGroupIds",get:function(){return this._dataGroupIds}},{key:"getCoordinatesByLevelData",get:function(){return this._getCoordinatesByLevelData}},{key:"minDataPointsDistance",get:function(){return this._minDataPointsDistance},set:function(t){var e=this._minDataPointsDistance;this._minDataPointsDistance=t,e!=this._minDataPointsDistance&&this.drawSoundings()}}])&&$a(e.prototype,n),a}(Xa);function es(t){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ns(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function is(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function os(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function rs(t,e,n){return(rs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=us(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function as(t,e){return(as=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ss(t,e){return!e||"object"!==es(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function us(t){return(us=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ls=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&as(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=us(i);if(o){var n=us(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ss(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.svgNode,i=void 0===n?void 0:n,o=e.coordinateSystem,s=void 0===o?void 0:o,u=e.x,l=void 0===u?0:u,c=e.y,f=void 0===c?0:c,d=e.width,p=void 0===d?100:d,h=e.height,v=void 0===h?100:h,y=e.style,m=void 0===y?{}:y,b=e.visible,g=void 0===b||b,w=e.events,_=void 0===w?{}:w,O=e.hoverLabels,S=void 0===O?{}:O,k=e.getSoundingVisibility,T=void 0===k?function(t){return t.visible}:k,P=e.dataGroupIds,x=void 0===P?void 0:P,R=e.getCoordinatesByLevelData,j=void 0===R?void 0:R,E=e.insertDataGroupInto,N=void 0===E?void 0:E,C=e.filterDataPoint,I=void 0===C?void 0:C,D=e.minDataPointsDistance,B=void 0===D?0:D;return is(this,a),(t=r.call(this,{svgNode:i,coordinateSystem:s,x:l,y:f,width:p,height:v,style:m,visible:g,events:_,getSoundingVisibility:T,dataGroupIds:x,getCoordinatesByLevelData:j,insertDataGroupInto:N,filterDataPoint:I,minDataPointsDistance:B}))._hoverLabelsGroup=t.svgNode.group(),t._isHoverLabelsRemote=!0,t._initHoverLabels(S),t}return e=a,(n=[{key:"onChangeSoundingVisibility",value:function(t,e){rs(us(a.prototype),"onChangeSoundingVisibility",this).call(this,t,e),this._hoverLabelsGroup.clear()}},{key:"drawSounding",value:function(t,e){rs(us(a.prototype),"drawSounding",this).call(this,t,e),this._getSoundingVisibility(t)&&this._hoverLabelsGroup.clear()}},{key:"getExtendedEvent",value:function(t,e){return(t=rs(us(a.prototype),"getExtendedEvent",this).call(this,t,e)).diagramPres=void 0,void 0!==this.coordinateSystem&&(t.diagramPres=this.coordinateSystem.getPByXY(0,this.coordinateSystem.height-t.elementY)),t}},{key:"_initHoverLabels",value:function(t){var e=this,n=t.visible,i=void 0===n||n,o=t.type,r=void 0===o?"mousemove":o,a=t.remote,s=void 0===a||a,u=t.insertLabelsFunc,l=void 0===u?void 0:u;this._isHoverLabelsRemote=s,i&&void 0!==l&&(this.on("change:extent",(function(){return e._hoverLabelsGroup.clear()})),this.on(r,(function(t){if(t.diagramPres){var n=e.hoverLabelsSounding;if(void 0!==n){var i=n.sounding;l(n,i.getData(i.getNearestLevel(t.diagramPres)),e._hoverLabelsGroup)}}})))}},{key:"isHoverLabelsRemote",get:function(){return this._isHoverLabelsRemote}},{key:"hoverLabelsSounding",get:function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ns(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ns(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(this._soundings.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this._getSoundingVisibility(n))return n}}catch(t){e.e(t)}finally{e.f()}}}])&&os(e.prototype,n),a}(ts);function cs(t){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ds(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ds(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function ds(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ps(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vs(t,e,n){return(vs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bs(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ys(t,e){return(ys=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ms(t,e){return!e||"object"!==cs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bs(t){return(bs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const gs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ys(t,e)}(u,t);var e,n,i,r,s=(i=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bs(i);if(r){var n=bs(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ms(this,t)});function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.svgNode,i=void 0===n?void 0:n,o=e.coordinateSystem,r=void 0===o?void 0:o,a=e.x,l=void 0===a?0:a,f=e.y,d=void 0===f?0:f,p=e.width,h=void 0===p?100:p,v=e.height,y=void 0===v?100:v,g=e.style,w=void 0===g?{}:g,_=e.visible,O=void 0===_||_,S=e.events,k=void 0===S?{}:S,T=e.dataGroupIds,P=void 0===T?["temp","dewp","wetbulb"]:T,x=e.getCoordinatesByLevelData,R=void 0===x?function(t,e,n,i){if(void 0===n.pres)return{};var o=void 0;switch(t){case"temp":o=n.tmpk;break;case"dewp":o=n.dwpk;break;case"wetbulb":o=c(n.tmpk,n.dwpk,n.pres)}return void 0===o?{}:{x:i.coordinateSystem.getXByPT(n.pres,o),y:i.coordinateSystem.height-i.coordinateSystem.getYByPT(n.pres,o),value:Math.round(10*b(o))/10,unit:""}}:x,j=e.insertDataGroupInto,E=void 0===j?function(t,e,n,i){var o=e in n.options.diagram?n.options.diagram[e].style:{};t.group().polyline(i.map((function(t){return[t.x,t.y]}))).fill("none").stroke(o)}:j,N=e.filterDataPoint,C=void 0===N?void 0:N,I=e.minDataPointsDistance,D=void 0===I?0:I,B=e.isobars,A=void 0===B?{}:B,L=e.isotherms,M=void 0===L?{}:L,V=e.dryadiabats,G=void 0===V?{}:V,Y=e.pseudoadiabats,F=void 0===Y?{}:Y,X=e.mixingratio,z=void 0===X?{}:X,q=e.hoverLabels,H=void 0===q?{}:q,K=e.parcels,U=void 0===K?{}:K;return ps(this,u),(t=s.call(this,{svgNode:i,coordinateSystem:r,x:l,y:d,width:h,height:y,style:w,visible:O,events:k,hoverLabels:H,getSoundingVisibility:function(t){return t.visible&&t.options.diagram.visible},dataGroupIds:P,getCoordinatesByLevelData:R,insertDataGroupInto:E,filterDataPoint:C,minDataPointsDistance:D})).options={isobars:ws(A),isotherms:ws(M,{highlightedLines:[m(0)]}),dryadiabats:ws(G),pseudoadiabats:ws(F,{style:{color:"rgb(102, 51, 0)",dasharray:6}}),mixingratio:ws(z,{minPressure:500,style:{color:"rgb(102, 51, 0)",dasharray:2}})},t.svgGroups={border:t._svgNodeBackground.group(),isobars:t._svgNodeBackground.group(),isotherms:t._svgNodeBackground.group(),dryadiabats:t._svgNodeBackground.group(),mixingratio:t._svgNodeBackground.group(),pseudoadiabats:t._svgNodeBackground.group()},t._parcelsOptions=U,"visible"in t._parcelsOptions||(t._parcelsOptions.visible=!0),t._parcels=new Map,t.on("add:sounding",(function(e){var n={parcelsGroup:void 0,parcelsGroups:new Map,addItemListenerKey:void 0,changeVisibleListeners:[],changeOptionsListeners:[]},i=function(i){n.changeVisibleListeners.push({diagramParcel:i,listenerKey:i.on("change:visible",(function(){if(n.parcelsGroups.has(i)){var t=n.parcelsGroups.get(i);i.visible?t.show():t.hide()}}))}),n.changeOptionsListeners.push({diagramParcel:i,listenerKey:i.on("change:options",(function(){var n=t._parcels.get(e);if(void 0!==n){var o=n.parcelsGroups.get(i);void 0!==o&&(n.parcelsGroups.delete(i),o.remove())}t.drawParcel(e,i)}))})};n.addItemListenerKey=e.diagramParcelCollection.on("add:item",(function(n){i(n),t.drawParcel(e,n)}));var o,r=fs(e.diagramParcelCollection);try{for(r.s();!(o=r.n()).done;){var a=o.value;i(a)}}catch(t){r.e(t)}finally{r.f()}t._parcels.set(e,n)})),t.on("remove:sounding",(function(e){if(t._parcels.has(e)){var n=t._parcels.get(e);e.diagramParcelCollection.un("add:item",n.addItemListenerKey),n.changeVisibleListeners.forEach((function(t){return t.diagramParcel.un("change:visible",t.listenerKey)})),n.changeOptionsListeners.forEach((function(t){return t.diagramParcel.un("change:options",t.listenerKey)}))}t._parcels.delete(e)})),t.init(),t}return e=u,(n=[{key:"getIsobarsVisible",value:function(){return this.options.isobars.visible}},{key:"setIsobarsVisible",value:function(t){return this.options.isobars.visible=!!t,this.plotIsobars(),this}},{key:"getIsothermsVisible",value:function(){return this.options.isotherms.visible}},{key:"setIsothermsVisible",value:function(t){return this.options.isotherms.visible=!!t,this.plotIsotherms(),this}},{key:"getDryadiabatsVisible",value:function(){return this.options.dryadiabats.visible}},{key:"setDryadiabatsVisible",value:function(t){return this.options.dryadiabats.visible=!!t,this.plotDryadiabats(),this}},{key:"getPseudoadiabatsVisible",value:function(){return this.options.pseudoadiabats.visible}},{key:"setPseudoadiabatsVisible",value:function(t){return this.options.pseudoadiabats.visible=!!t,this.plotPseudoadiabats(),this}},{key:"getMixingratioVisible",value:function(){return this.options.mixingratio.visible}},{key:"setMixingratioVisible",value:function(t){return this.options.mixingratio.visible=!!t,this.plotMixingratio(),this}},{key:"drawSounding",value:function(t,e){if(vs(bs(u.prototype),"drawSounding",this).call(this,t,e),this._parcels.has(t)){var n=this._parcels.get(t);n.parcelsGroup=e.group(),t.options.parcels.visible||n.parcelsGroup.hide(),this._parcels.set(t,n)}this.drawParcels(t)}},{key:"drawParcels",value:function(t){if(this._parcelsOptions.visible&&this._parcels.has(t)){var e=this._parcels.get(t);e.parcelsGroup.clear(),e.parcelsGroups.clear();var n,i=fs(t.diagramParcelCollection);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.drawParcel(t,o)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"drawParcel",value:function(t,e){var n=this,i=e.parcel;if(void 0!==i.pres&&void 0!==i.tmpc&&void 0!==i.dwpc&&this._parcels.has(t)){var o=this._parcels.get(t),r=o.parcelsGroup.group();o.parcelsGroups.set(e,r),this._parcels.set(t,o);var s=a(m(i.tmpc),i.pres),u=p(m(i.dwpc),i.pres),l=h(s,u),c=y(m(i.tmpc),m(i.dwpc)),d=f(c,c,l),v=e.options;v.visible||r.hide();var b=r.group();v.temp.visible||b.hide();var g=r.group();v.dewp.visible||g.hide();var w=10,_=this.coordinateSystem.getYByPT(i.pres,m(i.tmpc)),O=this.coordinateSystem.getXByYPotentialTemperature(_,s),S=this.coordinateSystem.getYByPPotentialTemperatur(l,s),k=this.coordinateSystem.getXByYPotentialTemperature(S,s),T=[[O,_]];if(!this.coordinateSystem.isDryAdiabatStraightLine())for(var P=_+w;P<S;P+=w)T.push([this.coordinateSystem.getXByYPotentialTemperature(P,s),P]);T.push([k,S]);for(var x=this.coordinateSystem.height,R=this.coordinateSystem.getXByYEquiPotTemp(x,d),j=S+w;j<x;j+=w)T.push([this.coordinateSystem.getXByYEquiPotTemp(j,d),j]);T.push([R,x]),b.polyline(T.map((function(t){return t[1]=n.coordinateSystem.height-t[1],t}))).fill("none").stroke(v.temp.style);for(var E=this.coordinateSystem.getXByYHMR(_,u),N=this.coordinateSystem.getXByYHMR(S,u),C=[[E,_]],I=_+w;I<S;I+=w)C.push([this.coordinateSystem.getXByYHMR(I,u),I]);C.push([N,S]),g.polyline(C.map((function(t){return t[1]=n.coordinateSystem.height-t[1],t}))).fill("none").stroke(v.dewp.style)}}},{key:"_drawBackground",value:function(t){vs(bs(u.prototype),"_drawBackground",this).call(this,t),this.svgGroups={border:t.group(),isobars:t.group(),isotherms:t.group(),dryadiabats:t.group(),mixingratio:t.group(),pseudoadiabats:t.group()},this.svgGroups.border.clear(),this.svgGroups.border.rect(this.coordinateSystem.width,this.coordinateSystem.height).attr({stroke:"black","stroke-width":1,"fill-opacity":0}),this.plotIsobars(!0),this.plotIsotherms(!0),this.plotDryadiabats(!0),this.plotPseudoadiabats(!0),this.plotMixingratio(!0)}},{key:"plotIsobars",value:function(t){var e=this,n=this.coordinateSystem.getPByXY(0,this.coordinateSystem.height),i=this.coordinateSystem.getPByXY(0,0),o=i-n;this._plotLines(this.svgGroups.isobars,this.options.isobars,{min:n,max:i,interval:o>500?100:o>50?10:1},(function(t){var n=e.coordinateSystem.getYByXP(0,t);return[[0,n],[e.coordinateSystem.width,n]]}),t)}},{key:"plotIsotherms",value:function(t){var e=this,n=b(this.coordinateSystem.getTByXY(0,this.coordinateSystem.height)),i=b(this.coordinateSystem.getTByXY(this.coordinateSystem.width,0)),o=i-n;this._plotLines(this.svgGroups.isotherms,this.options.isotherms,{min:n,max:i,interval:o>50?10:5},(function(t){t=m(t);var n=[[void 0,void 0],[void 0,void 0]];return e.coordinateSystem.isIsothermsVertical()?(n[0][1]=0,n[1][1]=e.coordinateSystem.height,n[0][0]=n[1][0]=e.coordinateSystem.getXByYT(n[0][1],t)):(n[0][1]=0,n[0][0]=e.coordinateSystem.getXByYT(n[0][1],t),n[0][0]<0&&(n[0][1]=e.coordinateSystem.getYByXT(n[0][0]=0,t)),n[1][0]=e.coordinateSystem.width,n[1][1]=e.coordinateSystem.getYByXT(n[1][0],t),void 0===n[1][1]?(n[1][0]=n[0][0],n[1][1]=e.coordinateSystem.height):n[1][1]>e.coordinateSystem.height&&(n[1][1]=e.coordinateSystem.height,n[1][0]=e.coordinateSystem.getXByYT(n[1][1],t))),n}),t)}},{key:"plotDryadiabats",value:function(t){var e=this;this._plotLines(this.svgGroups.dryadiabats,this.options.dryadiabats,{min:b(a(this.coordinateSystem.getTByXY(0,0),this.coordinateSystem.getPByXY(0,0))),max:b(a(this.coordinateSystem.getTByXY(this.coordinateSystem.width,this.coordinateSystem.height),this.coordinateSystem.getPByXY(this.coordinateSystem.width,this.coordinateSystem.height))),interval:10},(function(t){var n=m(t),i=0,o=e.coordinateSystem.getXByYPotentialTemperature(i,n);(void 0===o||o>e.coordinateSystem.width)&&(o=e.coordinateSystem.width,i=e.coordinateSystem.getYByXPotentialTemperature(o,n));var r=0,a=e.coordinateSystem.getYByXPotentialTemperature(r,n);if((void 0===a||a>e.coordinateSystem.height)&&(a=e.coordinateSystem.height,r=e.coordinateSystem.getXByYPotentialTemperature(a,n)),void 0!==o&&void 0!==i&&void 0!==r&&void 0!==a){if(e.coordinateSystem.isDryAdiabatStraightLine())return[[o,i],[r,a]];for(var s=[[o,i]],u=i+10;u<a;u+=10)s.push([e.coordinateSystem.getXByYPotentialTemperature(u,n),u]);return s.push([r,a]),s}}),t)}},{key:"plotPseudoadiabats",value:function(t){var e=this;this._plotLines(this.svgGroups.pseudoadiabats,this.options.pseudoadiabats,{lines:[-18,-5,10,30,60,110,180]},(function(t){for(var n=m(t),i=Math.max(0,void 0===e.options.pseudoadiabats.maxPressure?0:e.coordinateSystem.getYByPEquiPotTemp(e.options.pseudoadiabats.maxPressure,n)),o=e.coordinateSystem.getXByYEquiPotTemp(i,n),r=Math.min(e.coordinateSystem.height,void 0===e.options.pseudoadiabats.minPressure?e.coordinateSystem.height:e.coordinateSystem.getYByPEquiPotTemp(e.options.pseudoadiabats.minPressure,n)),a=e.coordinateSystem.getXByYEquiPotTemp(r,n),s=[[o,i]],u=i+10;u<r;u+=10)s.push([e.coordinateSystem.getXByYEquiPotTemp(u,n),u]);return s.push([a,r]),s}),t)}},{key:"plotMixingratio",value:function(t){var e=this;this._plotLines(this.svgGroups.mixingratio,this.options.mixingratio,{lines:[.01,.1,1,2,4,7,10,16,21,32,40]},(function(t){for(var n=Math.max(0,void 0===e.options.mixingratio.maxPressure?0:e.coordinateSystem.getYByPHMR(e.options.mixingratio.maxPressure,t)),i=e.coordinateSystem.getXByYHMR(n,t),o=Math.min(e.coordinateSystem.height,void 0===e.options.mixingratio.minPressure?e.coordinateSystem.height:e.coordinateSystem.getYByPHMR(e.options.mixingratio.minPressure,t)),r=e.coordinateSystem.getXByYHMR(o,t),a=[[i,n]],s=n+10;s<o;s+=10)a.push([e.coordinateSystem.getXByYHMR(s,t),s]);return a.push([r,o]),a}),t)}},{key:"_plotLines",value:function(t,e,n,i,o){if(e.visible?t.show():t.hide(),o){t.clear();var r=[];if(void 0!==e.lines)r=e.lines;else if(void 0===e.min&&void 0===e.max&&void 0===e.interval&&void 0!==n.lines)r=n.lines;else{void 0!==e.min&&(n.min=e.min),void 0!==e.max&&(n.max=e.max);var a=e.interval;void 0===a&&(a=n.interval);for(var s=Math.ceil(n.min/a)*a,u=Math.floor(n.max/a)*a,l=s;l<=u;l+=a)r.push(l)}var c=3;void 0!==e.style.width&&(c=e.style.width+2),r.forEach((function(n){var o=i.call(this,n),r=2==o.length?t.line(o[0][0],this.coordinateSystem.height-o[0][1],o[1][0],this.coordinateSystem.height-o[1][1]).stroke(e.style):t.polyline(o.map((function(t){return t[1]=this.coordinateSystem.height-t[1],t}),this)).fill("none").stroke(e.style);void 0!==e.highlightedLines&&e.highlightedLines.forEach((function(t){n==t&&r.stroke({width:c})}),this)}),this)}}},{key:"getExtendedEvent",value:function(t,e){return(t=vs(bs(u.prototype),"getExtendedEvent",this).call(this,t,e)).diagramTmpk=this.coordinateSystem.getTByXY(t.elementX,this.coordinateSystem.height-t.elementY),t}},{key:"_initHoverLabels",value:function(t){var e=t.visible,n=void 0===e||e,i=t.type,o=void 0===i?"mousemove":i,r=t.snapToData,a=void 0===r||r,s=t.remote,l=void 0===s||s,c=t.insertLabelsFunc,f=void 0===c?void 0:c,d=t.pres,p=void 0===d?{}:d,h=t.temp,v=void 0===h?{}:h,y=t.dewp,m=void 0===y?{}:y,b=t.wetbulb,g=void 0===b?{}:b;p.length="length"in p?p.length:60,p.align="align"in p?p.align:"left","visible"in p||(p.visible=!0),"style"in p||(p.style={}),p.font=jr(p.font,{anchor:"right"==p.align?"end":"start"}),"fill"in p||(p.fill={}),void 0===p.fill.opacity&&(p.fill.opacity=.7),void 0===p.horizontalMargin&&(p.horizontalMargin=5),"visible"in v||(v.visible=!0),"style"in v||(v.style={}),v.font=jr(v.font,{anchor:"start","alignment-baseline":"bottom"}),"fill"in v||(v.fill={}),void 0===v.fill.opacity&&(v.fill.opacity=.7),v.radius="radius"in v?v.radius:void 0,v.radiusPlus="radiusPlus"in v?v.radiusPlus:2,void 0===v.horizontalMargin&&(v.horizontalMargin=10),"visible"in m||(m.visible=!0),"style"in m||(m.style={}),m.font=jr(m.font,{anchor:"end","alignment-baseline":"bottom"}),"fill"in m||(m.fill={}),void 0===m.fill.opacity&&(m.fill.opacity=.7),m.radius="radius"in m?m.radius:void 0,m.radiusPlus="radiusPlus"in m?m.radiusPlus:2,void 0===m.horizontalMargin&&(m.horizontalMargin=10),"visible"in g||(g.visible=!0),"style"in g||(g.style={}),g.font=jr(g.font,{anchor:"middle"}),"fill"in g||(g.fill={}),void 0===g.fill.opacity&&(g.fill.opacity=.7),g.radius="radius"in g?g.radius:void 0,g.radiusPlus="radiusPlus"in g?g.radiusPlus:2,void 0===g.verticalMargin&&(g.verticalMargin=10),void 0===f&&(f=this._makeInsertLabelsFunc(p,v,m,g)),vs(bs(u.prototype),"_initHoverLabels",this).call(this,{visible:n,type:o,snapToData:a,remote:l,insertLabelsFunc:f})}},{key:"_makeInsertLabelsFunc",value:function(t,e,n,i){var r=this;return function(a,s,u){u.clear(),void 0!==s.pres&&(t.visible&&function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.length,a=void 0===r?60:r,s=i.align,u=void 0===s?"left":s,l=i.horizontalMargin,c=void 0===l?void 0:l,f=i.verticalMargin,d=void 0===f?void 0:f,p=i.style,h=void 0===p?{}:p,v=i.font,y=void 0===v?{}:v,m=i.fill,b=void 0===m?{}:m,g=0,w=a,_=/^([0-9]+)%$/.exec(w);_&&(w=_[1]/100*n.width),"right"==u&&(g=n.width,w=n.width-w);var O=n.height-n.getYByXP(0,e.pres);h=Rr(h),t.line([[Math.min(g,w),O],[Math.max(g,w),O]]).stroke(h),(y=jr(y))["alignment-baseline"]="bottom",Ir({node:t,text:"".concat(Math.round(e.pres)," hPa"),x:g,y:O,horizontalMargin:c,verticalMargin:d,font:y,fill:b}),y["alignment-baseline"]="top";var S=void 0===e.hght?"~".concat(Math.round(o(e.pres))," m"):"".concat(Math.round(e.hght)," m");Ir({node:t,text:S,x:g,y:O,horizontalMargin:c,verticalMargin:d,font:y,fill:b})}(u,s,r.coordinateSystem,t),r.dataGroupIds.reverse().forEach((function(t){var o={visible:!1};switch(t){case"temp":o=e;break;case"dewp":o=n;break;case"wetbulb":o=i}if(o.visible){var l=r._getCoordinatesByLevelData(t,a,s,r),c=l.x,f=l.y,d=l.value,p=l.unit;if(void 0!==c&&void 0!==f){var h=t in r.hoverLabelsSounding.options.diagram?r.hoverLabelsSounding.options.diagram[t].style.width:3,v=void 0===o.radius?h+o.radiusPlus:o.radius,y=o.style;!("color"in y)&&t in r.hoverLabelsSounding.options.diagram&&(y.color=a.options.diagram[t].style.color),u.circle(2*v).attr({cx:c,cy:f}).fill(y),Ir({node:u,text:"".concat(d," ").concat(p),x:c,y:f,horizontalMargin:o.horizontalMargin,verticalMargin:o.verticalMargin,font:o.font,fill:o.fill})}}})))}}}])&&hs(e.prototype,n),u}(ls);function ws(t){var e=t.highlightedLines,n=void 0===e?void 0:e,i=t.interval,o=void 0===i?void 0:i,r=t.lines,a=void 0===r?void 0:r,s=t.max,u=void 0===s?void 0:s,l=t.min,c=void 0===l?void 0:l,f=t.maxPressure,d=void 0===f?void 0:f,p=t.minPressure,h=void 0===p?void 0:p,v=t.style,y=void 0===v?void 0:v,m=t.visible,b=void 0===m?void 0:m,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{highlightedLines:Cr(n,g.highlightedLines),interval:Cr(o,g.interval),lines:Cr(a,g.lines),max:Cr(u,g.max),min:Cr(c,g.min),maxPressure:Cr(d,g.maxPressure),minPressure:Cr(h,g.minPressure),style:Rr(y,g.style),visible:Cr(b,g.visible,!0)}}function _s(t){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Os(t,e){return(Os=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ss(t,e){return!e||"object"!==_s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ks(t){return(ks=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ts=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Os(t,e)}(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=ks(e);if(n){var o=ks(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return Ss(this,t)});function o(t){var e,n=t.svgNode,r=void 0===n?void 0:n,a=t.coordinateSystem,s=void 0===a?void 0:a,u=t.x,l=void 0===u?void 0:u,c=t.y,f=void 0===c?void 0:c,d=t.width,p=void 0===d?void 0:d,h=t.height,v=void 0===h?void 0:h,y=t.style,m=void 0===y?{}:y,b=t.visible,g=void 0===b||b,w=t.events,_=void 0===w?{}:w,O=t.hoverLabels,S=void 0===O?{}:O,k=t.windbarbLength,T=void 0===k?void 0:k,P=t.dataGroupIds,x=void 0===P?["windbarbs"]:P,R=t.getCoordinatesByLevelData,j=void 0===R?function(t,e,n,i){return void 0===n.pres||void 0===n.wspd||void 0===n.wdir?{}:{x:i.width/2,y:i.coordinateSystem.height-i.coordinateSystem.getYByXP(0,n.pres)}}:R,E=t.insertDataGroupInto,N=void 0===E?function(t,e,n,i,o){i.forEach((function(e){Dr({node:t,x:o.width/2,y:e.y,wspd:e.levelData.wspd,wdir:e.levelData.wdir,length:o._windbarbLength,strokeStyle:n.options.windprofile.windbarbs.style})}))}:E,C=t.filterDataPoint,I=void 0===C?void 0:C,D=t.minDataPointsDistance,B=void 0===D?void 0:D;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,{svgNode:r,coordinateSystem:s,x:l,y:f,width:p,height:v,style:m,visible:g,events:_,hoverLabels:S,getSoundingVisibility:function(t){return t.visible&&t.options.windprofile.windbarbs.visible},dataGroupIds:x,getCoordinatesByLevelData:j,insertDataGroupInto:N,filterDataPoint:I,minDataPointsDistance:void 0===B?0:B}))._windbarbLength=T,void 0===e._windbarbLength&&(e._windbarbLength=2*e.width/5),void 0===B&&(e.minDataPointsDistance=e._windbarbLength/2),e.init(),e}return o}(ls);function Ps(t){return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Rs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function js(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Es(t,e,n){return(Es="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Is(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ns(t,e){return(Ns=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cs(t,e){return!e||"object"!==Ps(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Is(t){return(Is=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ds=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ns(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Is(i);if(o){var n=Is(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Cs(this,t)});function a(t){var e,n=t.svgNode,i=void 0===n?void 0:n,o=t.coordinateSystem,s=void 0===o?void 0:o,u=t.x,l=void 0===u?void 0:u,c=t.y,f=void 0===c?void 0:c,d=t.width,p=void 0===d?void 0:d,h=t.height,v=void 0===h?void 0:h,y=t.style,m=void 0===y?{}:y,b=t.visible,g=void 0===b||b,w=t.events,_=void 0===w?{}:w,S=t.hoverLabels,k=void 0===S?{}:S,T=t.windspeedMax,P=void 0===T?O(150):T,x=t.dataGroupIds,R=void 0===x?["windspeed"]:x,j=t.getCoordinatesByLevelData,E=void 0===j?function(t,e,n,i){return void 0===n.pres||void 0===n.wspd?{}:{x:i.width*n.wspd/P,y:i.coordinateSystem.height-i.coordinateSystem.getYByXP(0,n.pres)}}:j,N=t.insertDataGroupInto,C=void 0===N?function(t,e,n,i){t.polyline(i.map((function(t){return[t.x,t.y]}))).fill("none").stroke(n.options.windprofile.windspeed.style)}:N,I=t.filterDataPoint,D=void 0===I?void 0:I,B=t.minDataPointsDistance,A=void 0===B?0:B;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this,{svgNode:i,coordinateSystem:s,x:l,y:f,width:p,height:v,style:m,visible:g,events:_,hoverLabels:k,getSoundingVisibility:function(t){return t.visible&&t.options.windprofile.windspeed.visible},dataGroupIds:R,getCoordinatesByLevelData:E,insertDataGroupInto:C,filterDataPoint:D,minDataPointsDistance:A})).init(),e}return e=a,(n=[{key:"_drawBackground",value:function(t){Es(Is(a.prototype),"_drawBackground",this).call(this,t),t.line(0,0,0,this.height).stroke({color:"black",width:1}),t.line(this.width,0,this.width,this.height).stroke({color:"black",width:1})}},{key:"_initHoverLabels",value:function(t){var e=t.visible,n=void 0===e||e,i=t.type,o=void 0===i?"mousemove":i,r=t.snapToData,s=void 0===r||r,u=t.remote,l=void 0===u||u,c=t.insertLabelsFunc,f=void 0===c?void 0:c,d=t.windspeed,p=void 0===d?{}:d;"visible"in p||(p.visible=!0),"style"in p||(p.style={}),p.font=jr(p.font,{anchor:"end","alignment-baseline":"bottom"}),"fill"in p||(p.fill={}),void 0===p.fill.opacity&&(p.fill.opacity=.7),p.radius="radius"in p?p.radius:void 0,p.radiusPlus="radiusPlus"in p?p.radiusPlus:2,void 0===p.horizontalMargin&&(p.horizontalMargin=10),void 0===f&&(f=this._makeInsertLabelsFunc(p)),Es(Is(a.prototype),"_initHoverLabels",this).call(this,{visible:n,type:o,snapToData:s,remote:l,insertLabelsFunc:f})}},{key:"_makeInsertLabelsFunc",value:function(t){var e=this;return function(n,i,o){if(o.clear(),void 0!==i.pres&&t.visible&&void 0!==i.wspd){var r=e._getCoordinatesByLevelData("windspeed",n,i,e),a=r.x,s=r.y;if(void 0!==a&&void 0!==s){var u=void 0===t.radius?e.hoverLabelsSounding.options.windprofile.windspeed.style.width/2+t.radiusPlus:t.radius,l=t.style;"color"in l||(l.color=n.options.windprofile.windspeed.style.color);var c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xs(Object(n),!0).forEach((function(e){Rs(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t.font);"start"==c.anchor&&e.width-a<45&&(c.anchor="end"),"end"==c.anchor&&a<45&&(c.anchor="start"),"bottom"==c["alignment-baseline"]&&s<5*c.size/4&&(c["alignment-baseline"]="top"),"top"==c["alignment-baseline"]&&e.height-s<5*c.size/4&&(c["alignment-baseline"]="bottom"),o.circle(2*u).attr({cx:a,cy:s}).fill(l),Ir({node:o,text:"".concat(Math.round(10*_(i.wspd))/10," kn"),x:a,y:s,horizontalMargin:t.horizontalMargin,verticalMargin:t.verticalMargin,font:c,fill:t.fill})}}}}}])&&js(e.prototype,n),a}(ls);function Bs(t){return(Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function As(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ls(t,e,n){return(Ls="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gs(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ms(t,e){return(Ms=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vs(t,e){return!e||"object"!==Bs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gs(t){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ys=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ms(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gs(i);if(o){var n=Gs(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Vs(this,t)});function a(t){var e,n=t.svgNode,i=void 0===n?void 0:n,o=t.coordinateSystem,s=t.x,u=t.y,l=t.width,c=t.height,f=t.style,d=void 0===f?{}:f,p=t.visible,h=void 0===p||p,v=t.events,y=void 0===v?{}:v,m=t.dataGroupIds,b=void 0===m?["windbarbs"]:m,g=t.getCoordinatesByLevelData,w=void 0===g?function(t,e,n,i){if(void 0===n.wspd||void 0===n.wdir)return{};var o=n.wspd*-Math.sin(n.wdir/180*Math.PI),r=n.wspd*Math.cos(n.wdir/180*Math.PI);return{x:i.center[0]+o*i.pixelPerSpeed,y:i.center[1]+r*i.pixelPerSpeed}}:g,_=t.insertDataGroupInto,S=void 0===_?function(t,e,n,i){t.polyline(i.map((function(t){return[t.x,t.y]}))).fill("none").stroke(n.options.hodograph.style)}:_,k=t.grid,T=void 0===k?{}:k,P=t.windspeedMax,x=void 0===P?O(150):P,R=t.origin,j=void 0===R?void 0:R,E=t.filterDataPoint,N=void 0===E?void 0:E,C=t.minDataPointsDistance,I=void 0===C?0:C;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this,{svgNode:i,coordinateSystem:o,x:s,y:u,width:l,height:c,style:d,visible:h,events:y,dataGroupIds:b,getCoordinatesByLevelData:w,insertDataGroupInto:S,getSoundingVisibility:function(t){return t.visible&&t.options.hodograph.visible},filterDataPoint:N,minDataPointsDistance:I}))._gridOptions=e.getNormalizedGridOptions(T),e.center=[e.width/2,e.height/2],void 0!==j&&(e.center[0]-=j[0]*e.minLength/2,e.center[1]+=j[1]*e.minLength/2),e.pixelPerSpeed=Math.min(Math.max(e.width-e.center[0],e.center[0]),Math.max(e.height-e.center[1],e.center[1]))/x,void 0===e._gridOptions.max&&(e._gridOptions.max=x),e.init(),e}return e=a,(n=[{key:"_drawBackground",value:function(t){if(Ls(Gs(a.prototype),"_drawBackground",this).call(this,t),t.rect(this.width-2,this.height-2).move(1,1).fill({color:"white"}).stroke({color:"black",width:1}),this._gridOptions.axes.visible){var e=this._gridOptions.max+this._gridOptions.circles.interval/2;t.line(Math.max(0,this.center[0]-e*this.pixelPerSpeed),this.center[1],Math.min(this.width,this.center[0]+e*this.pixelPerSpeed),this.center[1]).stroke(this._gridOptions.axes.style),t.line(this.center[0],Math.max(0,this.center[1]-e*this.pixelPerSpeed),this.center[0],Math.min(this.height,this.center[1]+e*this.pixelPerSpeed)).stroke(this._gridOptions.axes.style)}for(var n=this._gridOptions.circles.interval;n<=this._gridOptions.max;n+=this._gridOptions.circles.interval){var i=n*this.pixelPerSpeed;if(t.circle(2*i).attr({cx:this.center[0],cy:this.center[1]}).fill("none").stroke(this._gridOptions.circles.style),this._gridOptions.labels.visible){var o=i*Math.cos((this._gridOptions.labels.angle-90)/180*Math.PI),r=i*Math.sin((this._gridOptions.labels.angle-90)/180*Math.PI),s="middle",u=0,l=-this._gridOptions.labels.font.size;0==this._gridOptions.labels.angle||180==this._gridOptions.labels.angle?(u=-3,s="end"):90!=this._gridOptions.labels.angle&&270!=this._gridOptions.labels.angle||(l=-3);var c=t.plain(""+Math.round(g(n))).move(this.center[0]+o,this.center[1]+r).attr({"text-anchor":s,dx:u,dy:l}).font(this._gridOptions.labels.font),f=c.bbox();c.before(t.rect(f.width,f.height).move(f.x,f.y).fill("white"))}}}},{key:"getNormalizedGridOptions",value:function(t){var e=t.axes,n=void 0===e?{}:e,i=t.circles,o=void 0===i?{}:i,r=t.labels,a=void 0===r?{}:r,s=t.max,u=void 0===s?void 0:s;return n=Er(n),"interval"in(o=Er(o))&&void 0!==o.interval||(o.interval=w(50)),"angle"in(a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e||e,i=t.font,o=void 0===i?{}:i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{visible:Cr(n,r.visible,!0),font:jr(o,r.font)}}(a))&&void 0!==a.angle||(a.angle=225),void 0===a.font.size&&(a.font.size=10),{axes:n,circles:o,labels:a,max:u}}}])&&As(e.prototype,n),a}(ts);function Fs(t){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function zs(t,e,n){return(zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ks(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function qs(t,e){return(qs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hs(t,e){return!e||"object"!==Fs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ks(t){return(Ks=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Us=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qs(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ks(i);if(o){var n=Ks(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Hs(this,t)});function a(t){var e,n,i,o,s,u=t.svgNode,l=void 0===u?void 0:u,c=t.coordinateSystem,f=t.x,d=t.y,p=t.width,h=t.height,v=t.style,y=void 0===v?{}:v,m=t.visible,b=void 0===m||m,g=t.events,w=void 0===g?{}:g,_=t.labels,O=void 0===_?{}:_,S=t.title,k=void 0===S?{}:S;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),void 0===y.overflow&&(y.overflow="visible"),(e=r.call(this,{svgNode:l,coordinateSystem:c,x:f,y:d,width:p,height:h,style:y,visible:b,events:w}))._labelsOptions=((s={enabled:void 0===(i=(n=O).enabled)||i,style:void 0===(o=n.style)?{}:o}).style=Rr(s.style),s),e._titleOptions=function(t){var e=t.align,n=void 0===e?"middle":e,i=t.style,o=void 0===i?{}:i,r=t.text,a={align:n,style:o,text:void 0===r?void 0:r};return a.style=Rr(a.style),a}(k),e.init(),e}return e=a,(n=[{key:"_drawBackground",value:function(t){if(zs(Ks(a.prototype),"_drawBackground",this).call(this,t),this._labelsOptions.enabled)for(var e=t.group(),n=50*Math.ceil(this.coordinateSystem.getPByXY(0,this.height)/50),i=50*Math.floor(this.coordinateSystem.getPByXY(0,0)/50),o=n;o<=i;o+=50){var r=this.height-this.coordinateSystem.getYByXP(0,o);e.plain(o).attr({y:r+3.3,x:this.width}).font({size:"11px",anchor:"end"}).attr({fill:this._labelsOptions.style.color})}void 0!==this._titleOptions.text&&t.group().plain(this._titleOptions.text).attr({x:12*.4,y:this.height/2,fill:this._titleOptions.style.color}).font({size:12,anchor:"middle"}).rotate(-90)}}])&&Xs(e.prototype,n),a}(Xa);const $s=Us;function Zs(t){return(Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ws(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Js(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qs(t,e){return(Qs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tu(t,e){return!e||"object"!==Zs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eu(t){return(eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qs(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=eu(i);if(o){var n=eu(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return tu(this,t)});function a(){return Ws(this,a),r.apply(this,arguments)}return e=a,(n=[{key:"_drawBackground",value:function(t){if(t.clear(),this._labelsOptions.enabled)for(var e=t.group(),n=10*Math.ceil(b(this.coordinateSystem.getTByXY(0,0))/10),i=10*Math.floor(b(this.coordinateSystem.getTByXY(this.width,0))/10),o=n;o<=i;o+=10){var r=m(o);e.plain(Math.round(b(r))).attr({x:this.coordinateSystem.getXByYT(0,r),y:10,fill:this._labelsOptions.style.color}).font({size:"10px",anchor:"middle"})}void 0!==this._titleOptions.text&&t.group().plain(this._titleOptions.text).attr({x:this.width/2,y:this.height-12*.3,fill:this._titleOptions.style.color}).font({size:12,anchor:"middle"})}}])&&Js(e.prototype,n),a}($s);const iu=nu;function ou(t){return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ru(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function au(t,e){return(au=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function su(t,e){return!e||"object"!==ou(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uu(t){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const lu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&au(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uu(i);if(o){var n=uu(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return su(this,t)});function a(t){var e,n=t.renderTo,i=void 0===n?void 0:n,o=t.width,s=void 0===o?void 0:o,u=t.height,l=void 0===u?void 0:u,c=t.coordinateSystem,f=void 0===c?{}:c,d=t.diagram,p=void 0===d?{}:d,h=t.windbarbsProfile,v=void 0===h?{}:h,y=t.windspeedProfile,m=void 0===y?{}:y,b=t.hodograph,g=void 0===b?{}:b,w=t.xAxis,_=void 0===w?{}:w,O=t.yAxis,S=void 0===O?{}:O;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=r.call(this,{renderTo:i,width:s,height:l}),p=cu(p),v=cu(v),m=cu(m),g=cu(g),_=cu(_),S=cu(S);var k=.05*e.svgNode.width();return void 0===_.width&&void 0===p.width&&void 0===v.width&&void 0===m.width?(S.width=.1*(e.svgNode.width()-2*k),p.width=.7*(e.svgNode.width()-2*k),v.width=.2*(e.svgNode.width()-2*k)*1/3,m.width=.2*(e.svgNode.width()-2*k)*2/3):void 0===p.width?p.width=e.svgNode.width()-2*k-v.width-m.width:void 0===v.width&&void 0===m.width&&(v.width=1*(e.svgNode.width()-2*k-p.width)/3,m.width=2*(e.svgNode.width()-2*k-p.width)/3),void 0===S.x&&void 0===p.x&&void 0===v.x&&void 0===m.x?(S.x=k,p.x=S.x+S.width,v.x=p.x+p.width,m.x=v.x+v.width):void 0===p.x?p.x=v.x-v.width:void 0===v.x&&void 0===m.x&&(v.x=p.x+p.width,m.x=v.x+v.width),void 0===_.height&&(_.height=.06*e.svgNode.height()),void 0===p.height&&(p.height=e.svgNode.height()-_.height-2*k),void 0===S.height&&(S.height=p.height),void 0===v.height&&(v.height=p.height),void 0===m.height&&(m.height=p.height),void 0===p.y&&(p.y=k),void 0===S.y&&(S.y=p.y),void 0===v.y&&(v.y=p.y),void 0===m.y&&(m.y=p.y),void 0===_.width&&(_.width=p.width),void 0===_.x&&(_.x=p.x),void 0===_.y&&(_.y=p.y+p.height),void 0===_.height&&(_.height=k),void 0===g.x&&(g.x=p.x),void 0===g.y&&(g.y=p.y),void 0===g.width&&(g.width=.4*Math.min(p.width,p.height)),void 0===g.height&&(g.height=g.width),e.diagram=new gs(p),e.appendPlotArea(e.diagram),e.yAxis=new Us(S),e.appendPlotArea(e.yAxis),e.xAxis=new nu(_),e.appendPlotArea(e.xAxis),e.windbarbsProfile=new Ts(v),e.appendPlotArea(e.windbarbsProfile),e.windspeedProfile=new Ds(m),e.appendPlotArea(e.windspeedProfile),e.hodograph=new Ys(g),e.appendPlotArea(e.hodograph),void 0===f.type&&(f.type="skewTlogP"),f.width=p.width,f.height=p.height,e._coordinateSystem,e.coordinateSystem="stueve"==f.type?new xa(f):"emagram"==f.type?new Ia(f):new Va(f),e}return e=a,(n=[{key:"getDiagramPlotArea",value:function(){return this.diagram}},{key:"coordinateSystem",get:function(){return this._coordinateSystem},set:function(t){this._coordinateSystem=t,this.exchangeCoordinateSystem(this._coordinateSystem)}}])&&ru(e.prototype,n),a}(va);function cu(t){var e=t.svgNode,n=void 0===e?void 0:e,i=t.coordinateSystem,o=void 0===i?void 0:i,r=t.x,a=void 0===r?void 0:r,s=t.y,u=void 0===s?void 0:s,l=t.width,c=void 0===l?void 0:l,f=t.height,d=void 0===f?void 0:f,p=t.style,h=void 0===p?{}:p,v=t.visible,y=void 0===v||v,m=t.events,b=void 0===m?{}:m,g=t.hoverLabels,w=void 0===g?{}:g,_=function(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["svgNode","coordinateSystem","x","y","width","height","style","visible","events","hoverLabels"]);return _.svgNode=n,_.coordinateSystem=o,_.x=a,_.y=u,_.width=c,_.height=d,_.style=h,_.visible=y,_.events=b,_.hoverLabels=w,_}function fu(t){return(fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function du(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pu(t,e){return(pu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hu(t,e){return!e||"object"!==fu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vu(t){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pu(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vu(i);if(o){var n=vu(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return hu(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this)).imgNode=void 0,t.thermodynamicDiagram=void 0,t.resourceNode=void 0,t}return e=a,(n=[{key:"onInit",value:function(){void 0!==this.parentNode&&(this.resourceNode=Z()(this.parentNode),this.resourceNode.empty())}},{key:"onChangeVisibleResource",value:function(){if(void 0!==this.resourceNode){var t=this.container.visibleResource;if("url"in t)void 0!==this.thermodynamicDiagram&&(this.thermodynamicDiagram=void 0,this.resourceNode.empty()),void 0===this.imgNode&&(this.resourceNode.empty(),this.imgNode=Z()("<img>"),this.resourceNode.append(this.imgNode)),this.imgNode.attr("src",t.url),this.imgNode.css({"max-width":"100%"});else if("sounding"in t){void 0!==this.imgNode&&(this.imgNode=void 0,this.resourceNode.empty()),void 0===this.thermodynamicDiagram&&(this.thermodynamicDiagram=new lu({renderTo:this.resourceNode}));var e=!1;this.thermodynamicDiagram.soundings.forEach((function(n){n.getSounding()===t.sounding?(e=!0,n.visible(!0)):n.visible(!1)})),e||this.thermodynamicDiagram.addSounding(t.sounding)}else this.imgNode=void 0,this.resourceNode.empty()}}}])&&du(e.prototype,n),a}(fr);function mu(t){return(mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function gu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _u(t,e,n){return(_u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ku(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ou(t,e){return(Ou=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Su(t,e){return!e||"object"!==mu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ku(t){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tu={addEventFunctions:D},Pu={Animation:tt,Visualisation:ut,makeTimeTextCallbackFunction:function(t){return function(e,n){var i=t.utc(e);return void 0!==this.options.outputTimezone&&("local"==this.options.outputTimezone?i.local():i.tz(this.options.outputTimezone)),i.format(n)}},animation:{ToggleButton:function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ot(this,t);var i=n.animation,o=void 0===i?void 0:i,r=n.node,a=void 0===r?void 0:r,s=n.startedContent,u=void 0===s?void 0:s,l=n.startedClass,c=void 0===l?void 0:l,f=n.stoppedContent,d=void 0===f?void 0:f,p=n.stoppedClass,h=void 0===p?void 0:p,v=n.classButton,y=void 0===v?void 0:v,m=n.classDropdownToggle,b=void 0===m?void 0:m,g=n.menu,w=void 0===g||g,_=n.menuImageFrequency,O=void 0===_||_,S=n.imageFrequencyCaption,k=void 0===S?"Frequency":S,T=n.menuFrequencies,P=void 0===T?void 0:T,x=n.menuRestartPause,R=void 0===x||x,j=n.restartPauseCaption,E=void 0===j?"Restart pause":j;"startedContent"in n||(u=""),"stoppedContent"in n||(d=""),this.options={animation:o,node:a,startedContent:u,startedClass:c,stoppedContent:d,stoppedClass:h,classButton:y,classDropdownToggle:b,menu:w,menuImageFrequency:O,imageFrequencyCaption:k,menuFrequencies:P,menuRestartPause:R,restartPauseCaption:E},this.options.node=Z()(this.options.node);var N=this.options.node;this.options.node.is("button")||(N=Z()("<button>").addClass("btn"),this.options.node.append(N)),N.addClass(this.options.classButton);var C=function(){N.removeClass(e.options.stoppedClass),N.addClass(e.options.startedClass),N.empty(),"string"==typeof e.options.startedContent||e.options.startedContent instanceof String?N.text(e.options.startedContent):N.append(e.options.startedContent)},I=function(){N.removeClass(e.options.startedClass),N.addClass(e.options.stoppedClass),N.empty(),"string"==typeof e.options.stoppedContent||e.options.stoppedContent instanceof String?N.text(e.options.stoppedContent):N.append(e.options.stoppedContent)};if(this.options.animation.on("start:animation",C),this.options.animation.on("stop:animation",I),N.click((function(){return e.options.animation.toggle()})),this.options.animation.isStarted()?C():I(),!this.options.node.is("button")&&this.options.menu){this.options.node.addClass("btn-group");var D=Z()("<button>").attr("type","button").addClass("btn dropdown-toggle dropdown-toggle-split").addClass(this.options.classDropdownToggle).attr("data-toggle","dropdown").attr("aria-haspopup",!0).attr("aria-expanded",!1);D.append(Z()("<span>").addClass("sr-only").text("Toggle Dropdown")),this.options.node.append(D);var B=Z()("<div>").addClass("dropdown-menu pl-4 pr-4 pt-2 pb-2 text-muted");if(this.options.node.append(B),this.options.menuImageFrequency){var A=Z()("<label>").text(this.options.imageFrequencyCaption),L=Z()("<div>").addClass("form-group").append(A);B.append(L),et(A,{animation:this.options.animation}),void 0!==this.options.menuFrequencies&&nt(L,{animation:this.options.animation,frequencies:this.options.menuFrequencies})}if(this.options.menuRestartPause){var M=Z()("<label>").text(this.options.restartPauseCaption),V=Z()("<div>").addClass("form-group").append(M);it(M,{animation:this.options.animation}),B.append(V)}}},insertFrequencyInput:et,insertFrequencyRange:nt,insertFrequencyButtonGroup:function(t,e){var n=e.animation,i=e.frequencies,o=e.btnGroupClass,r=void 0===o?"btn-group":o,a=e.btnClass,s=void 0===a?"btn btn-primary":a,u=e.suffix,l=void 0===u?"fps":u,c=Z()("<div>").addClass(r);(i=i||[]).forEach((function(t){c.append(Z()("<button>").addClass(s).data("frequency",t).text(t+" "+l).click((function(){return n.setImageFrequency(t)})))}));var f=function(){c.children("button").removeClass("active").each((function(){Z()(this).data("frequency")==n.getImageFrequency()&&Z()(this).addClass("active")}))};return n.on("change:imageFrequency",f),f(),t.append(c),c},insertRestartPauseInput:it,insertRestartPauseRange:function(t,e){var n=e.animation,i=e.pauses;i=(i=i||[1]).map((function(t){return Math.round(1e3*t)}));var o=Z()("<input>").addClass("custom-range").attr("type","range").attr("min",0).attr("max",i.length-1);o.on("change input",(function(){var t=o.val();t<i.length&&n.setRestartPause(i[t]/1e3)}));var r=function(){var t=i.indexOf(Math.round(1e3*n.getRestartPause()));t>-1&&o.val(t)};return n.on("change:imageFrequency",r),r(),t.append(o),o},insertRestartPauseButtonGroup:function(t,e){var n=e.animation,i=e.pauses,o=e.btnGroupClass,r=void 0===o?"btn-group":o,a=e.btnClass,s=void 0===a?"btn btn-primary":a,u=e.suffix,l=void 0===u?"s":u,c=Z()("<div>").addClass(r);(i=i||[]).forEach((function(t){c.append(Z()("<button>").addClass(s).data("pause",t).text(t+" "+l).click((function(){return n.setRestartPause(t)})))}));var f=function(){c.children("button").removeClass("active").each((function(){Z()(this).data("pause")==n.getRestartPause()&&Z()(this).addClass("active")}))};return n.on("change:restartPause",f),f(),t.append(c),c}},visualisation:{Text:yt,Slider:Ot,bsButtons:Et,bsDropdown:Vt}},xu={Collection:qt,Map:Ft,map:{MapOL:Ie,MapLL:Ve},Resource:te,resource:{GeoJSON:en,GeoJSONTile:bn,Image:jn,OSM:Gn,Vector:Ze,VectorTile:pn},ResourceCollection:se,Tooltip:ge,Type:fe,TypeCollection:be},Ru={BootstrapTooltip:Zn},ju={Variable:Li,TimeVariable:zi,VariableCollection:oo,Node:co,Resource:mo,resource:{Image:ko,Sounding:Fo},Resources:Zo,NWPResources:or,Container:Tr,Display:fr,display:{Simple:yu,SelectNavigation:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ou(t,e)}(a,t);var e,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ku(i);if(o){var n=ku(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Su(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.ignoreVariableCollections,i=void 0===n?[]:n,o=e.selectCaption,s=void 0!==o&&o,u=e.navigationClass,l=void 0===u?void 0:u,c=e.selectDivClass,f=void 0===c?void 0:c,d=e.selectClass,p=void 0===d?void 0:d;return gu(this,a),(t=r.call(this)).options={ignoreVariableCollections:new Set(i),selectCaption:s,navigationClass:l,selectDivClass:f,selectClass:p},t.navigationNode=void 0,t.selectNodes=new Map,t}return e=a,(n=[{key:"onInit",value:function(){var t=this;void 0!==this.parentNode&&(this.navigationNode=Z()("<div>").addClass(this.options.navigationClass),this.resourceNode=Z()("<div>"),Z()(this.parentNode).empty().append(this.navigationNode,this.resourceNode),void 0!==this.modelviewer&&this.modelviewer.resources.variableCollections.filter((function(e){return!t.options.ignoreVariableCollections.has(e)&&e.count>0})).forEach((function(e){return t._appendSelectNode(e)})),this._changeSelected())}},{key:"onChangeVisibleResource",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.variable;_u(ku(a.prototype),"onChangeVisibleResource",this).call(this,{variable:e}),this._changeSelected()}},{key:"onAppendVariable",value:function(t){this.selectNodes.has(t.variableCollection)?this._appendOptionNode(this.selectNodes.get(t.variableCollection),t):this._appendSelectNode(t.variableCollection),this._changeSelected()}},{key:"_appendSelectNode",value:function(t){var e=this,n=Z()("<select>").addClass(this.options.selectClass);if(n.on("change",(function(){var i=t.getItemById(n.val());e.container.exchangeDisplayVariable=[i]})),this.options.selectCaption){var i=Z()("<option>").text(t.name).attr("disabled","disabled").prop("selected","selected");n.append(i)}t.variables.forEach((function(t){e._appendOptionNode(n,t)})),this.navigationNode.append(Z()("<div>").addClass(this.options.selectDivClass).append(n)),this.selectNodes.set(t,n)}},{key:"_appendOptionNode",value:function(t,e){var n=Z()("<option>").attr("value",e.id).text(e.name).addClass(this.options.optionsClass);t.append(n)}},{key:"_changeSelected",value:function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return bu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bu(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(this.selectNodes.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this.selectNodes.has(n)){var i=this.container.visibleResource.getVariableByVariableCollection(n);this.selectNodes.get(n).val(i.id)}}}catch(t){e.e(t)}finally{e.f()}}}])&&wu(e.prototype,n),a}(yu)}},Eu={Parcel:Eo},Nu={CoordinateSystem:ga,coordinateSystem:{StueveDiagram:xa,Emagram:Ia,SkewTlogPDiagram:Va},DiagramSounding:Qr,Hodograph:Ys,TDDiagram:gs,functions:{drawWindbarbInto:Dr},WindbarbsProfile:Ts,WindspeedProfile:Ds,axes:{xAxis:iu,yAxis:$s}}}},e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i](o,o.exports,n),o.loaded=!0,o.exports}return n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n(857)})();
//# sourceMappingURL=meteoJS.min.js.map