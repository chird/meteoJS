var meteoJS=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=7)}([function(t,e){t.exports=$},function(t,e,i){"use strict";(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
* @svgdotjs/svg.js - A lightweight library for manipulating and animating SVG.
* @version 3.0.16
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Tue Nov 12 2019 21:57:16 GMT+0100 (GMT+01:00)
*/i.d(e,"a",(function(){return wu}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function o(t,e){return t(e={exports:{}},e.exports),e.exports}var s,a,u,l=function(t){return t&&t.Math==Math&&t},c=l("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||l("object"==("undefined"==typeof window?"undefined":n(window))&&window)||l("object"==("undefined"==typeof self?"undefined":n(self))&&self)||l("object"==n(r)&&r)||Function("return this")(),h=function(t){try{return!!t()}catch(t){return!0}},f=!h((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),p={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,v={f:d&&!p.call({1:2},1)?function(t){var e=d(this,t);return!!e&&e.enumerable}:p},y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g={}.toString,m=function(t){return g.call(t).slice(8,-1)},_="".split,b=h((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==m(t)?_.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},x=function(t){return b(w(t))},S=function(t){return"object"===n(t)?null!==t:"function"==typeof t},O=function(t,e){if(!S(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!S(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!S(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!S(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},T={}.hasOwnProperty,k=function(t,e){return T.call(t,e)},C=c.document,E=S(C)&&S(C.createElement),P=function(t){return E?C.createElement(t):{}},I=!f&&!h((function(){return 7!=Object.defineProperty(P("div"),"a",{get:function(){return 7}}).a})),R=Object.getOwnPropertyDescriptor,j={f:f?R:function(t,e){if(t=x(t),e=O(e,!0),I)try{return R(t,e)}catch(t){}if(k(t,e))return y(!v.f.call(t,e),t[e])}},M=function(t){if(!S(t))throw TypeError(String(t)+" is not an object");return t},L=Object.defineProperty,A={f:f?L:function(t,e,i){if(M(t),e=O(e,!0),M(i),I)try{return L(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},D=f?function(t,e,i){return A.f(t,e,y(1,i))}:function(t,e,i){return t[e]=i,t},F=function(t,e){try{D(c,t,e)}catch(i){c[t]=e}return e},N=c["__core-js_shared__"]||F("__core-js_shared__",{}),G=o((function(t){(t.exports=function(t,e){return N[t]||(N[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.3.6",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),B=G("native-function-to-string",Function.toString),Y=c.WeakMap,X="function"==typeof Y&&/native code/.test(B.call(Y)),z=0,W=Math.random(),q=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++z+W).toString(36)},V=G("keys"),H=function(t){return V[t]||(V[t]=q(t))},K={},U=c.WeakMap;if(X){var Z=new U,J=Z.get,Q=Z.has,$=Z.set;s=function(t,e){return $.call(Z,t,e),e},a=function(t){return J.call(Z,t)||{}},u=function(t){return Q.call(Z,t)}}else{var tt=H("state");K[tt]=!0,s=function(t,e){return D(t,tt,e),e},a=function(t){return k(t,tt)?t[tt]:{}},u=function(t){return k(t,tt)}}var et,it,nt={set:s,get:a,has:u,enforce:function(t){return u(t)?a(t):s(t,{})},getterFor:function(t){return function(e){var i;if(!S(e)||(i=a(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},rt=o((function(t){var e=nt.get,i=nt.enforce,n=String(B).split("toString");G("inspectSource",(function(t){return B.call(t)})),(t.exports=function(t,e,r,o){var s=!!o&&!!o.unsafe,a=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||k(r,"name")||D(r,"name",e),i(r).source=n.join("string"==typeof e?e:"")),t!==c?(s?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=r:D(t,e,r)):a?t[e]=r:F(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||B.call(this)}))})),ot=c,st=function(t){return"function"==typeof t?t:void 0},at=function(t,e){return arguments.length<2?st(ot[t])||st(c[t]):ot[t]&&ot[t][e]||c[t]&&c[t][e]},ut=Math.ceil,lt=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?lt:ut)(t)},ht=Math.min,ft=function(t){return t>0?ht(ct(t),9007199254740991):0},pt=Math.max,dt=Math.min,vt=function(t,e){var i=ct(t);return i<0?pt(i+e,0):dt(i,e)},yt=function(t){return function(e,i,n){var r,o=x(e),s=ft(o.length),a=vt(n,s);if(t&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===i)return t||a||0;return!t&&-1}},gt={includes:yt(!0),indexOf:yt(!1)},mt=gt.indexOf,_t=function(t,e){var i,n=x(t),r=0,o=[];for(i in n)!k(K,i)&&k(n,i)&&o.push(i);for(;e.length>r;)k(n,i=e[r++])&&(~mt(o,i)||o.push(i));return o},bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wt=bt.concat("length","prototype"),xt={f:Object.getOwnPropertyNames||function(t){return _t(t,wt)}},St={f:Object.getOwnPropertySymbols},Ot=at("Reflect","ownKeys")||function(t){var e=xt.f(M(t)),i=St.f;return i?e.concat(i(t)):e},Tt=function(t,e){for(var i=Ot(e),n=A.f,r=j.f,o=0;o<i.length;o++){var s=i[o];k(t,s)||n(t,s,r(e,s))}},kt=/#|\.prototype\./,Ct=function(t,e){var i=Pt[Et(t)];return i==Rt||i!=It&&("function"==typeof e?h(e):!!e)},Et=Ct.normalize=function(t){return String(t).replace(kt,".").toLowerCase()},Pt=Ct.data={},It=Ct.NATIVE="N",Rt=Ct.POLYFILL="P",jt=Ct,Mt=j.f,Lt=function(t,e){var i,r,o,s,a,u=t.target,l=t.global,h=t.stat;if(i=l?c:h?c[u]||F(u,{}):(c[u]||{}).prototype)for(r in e){if(s=e[r],o=t.noTargetGet?(a=Mt(i,r))&&a.value:i[r],!jt(l?r:u+(h?".":"#")+r,t.forced)&&void 0!==o){if(n(s)===n(o))continue;Tt(s,o)}(t.sham||o&&o.sham)&&D(s,"sham",!0),rt(i,r,s,t)}},At=Array.isArray||function(t){return"Array"==m(t)},Dt=function(t,e,i){var n=O(e);n in t?A.f(t,n,y(0,i)):t[n]=i},Ft=!!Object.getOwnPropertySymbols&&!h((function(){return!String(Symbol())})),Nt=c.Symbol,Gt=G("wks"),Bt=function(t){return Gt[t]||(Gt[t]=Ft&&Nt[t]||(Ft?Nt:q)("Symbol."+t))},Yt=at("navigator","userAgent")||"",Xt=c.process,zt=Xt&&Xt.versions,Wt=zt&&zt.v8;Wt?it=(et=Wt.split("."))[0]+et[1]:Yt&&(!(et=Yt.match(/Edge\/(\d+)/))||et[1]>=74)&&(et=Yt.match(/Chrome\/(\d+)/))&&(it=et[1]);var qt=it&&+it,Vt=Bt("species"),Ht=function(t){return qt>=51||!h((function(){var e=[];return(e.constructor={})[Vt]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Kt=Bt("species"),Ut=[].slice,Zt=Math.max;Lt({target:"Array",proto:!0,forced:!Ht("slice")},{slice:function(t,e){var i,n,r,o=x(this),s=ft(o.length),a=vt(t,s),u=vt(void 0===e?s:e,s);if(At(o)&&("function"!=typeof(i=o.constructor)||i!==Array&&!At(i.prototype)?S(i)&&null===(i=i[Kt])&&(i=void 0):i=void 0,i===Array||void 0===i))return Ut.call(o,a,u);for(n=new(void 0===i?Array:i)(Zt(u-a,0)),r=0;a<u;a++,r++)a in o&&Dt(n,r,o[a]);return n.length=r,n}});var Jt=A.f,Qt=Function.prototype,$t=Qt.toString,te=/^\s*function ([^ (]*)/;f&&!("name"in Qt)&&Jt(Qt,"name",{configurable:!0,get:function(){try{return $t.call(this).match(te)[1]}catch(t){return""}}});var ee=xt.f,ie={}.toString,ne="object"==("undefined"==typeof window?"undefined":n(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],re={f:function(t){return ne&&"[object Window]"==ie.call(t)?function(t){try{return ee(t)}catch(t){return ne.slice()}}(t):ee(x(t))}},oe=re.f,se=h((function(){return!Object.getOwnPropertyNames(1)}));function ae(t){return(ae="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}function ue(t){return(ue="function"==typeof Symbol&&"symbol"===ae(Symbol.iterator)?function(t){return ae(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":ae(t)})(t)}Lt({target:"Object",stat:!0,forced:se},{getOwnPropertyNames:oe});var le=function(t){return Object(w(t))},ce=Object.keys||function(t){return _t(t,bt)},he=f?Object.defineProperties:function(t,e){M(t);for(var i,n=ce(e),r=n.length,o=0;r>o;)A.f(t,i=n[o++],e[i]);return t},fe=at("document","documentElement"),pe=H("IE_PROTO"),de=function(){},ve=function(){var t,e=P("iframe"),i=bt.length;for(e.style.display="none",fe.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ve=t.F;i--;)delete ve.prototype[bt[i]];return ve()},ye=Object.create||function(t,e){var i;return null!==t?(de.prototype=M(t),i=new de,de.prototype=null,i[pe]=t):i=ve(),void 0===e?i:he(i,e)};K[pe]=!0;var ge={f:Bt},me=A.f,_e=function(t){var e=ot.Symbol||(ot.Symbol={});k(e,t)||me(e,t,{value:ge.f(t)})},be=A.f,we=Bt("toStringTag"),xe=function(t,e,i){t&&!k(t=i?t:t.prototype,we)&&be(t,we,{configurable:!0,value:e})},Se=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Oe=function(t,e,i){if(Se(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}},Te=Bt("species"),ke=function(t,e){var i;return At(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!At(i.prototype)?S(i)&&null===(i=i[Te])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)},Ce=[].push,Ee=function(t){var e=1==t,i=2==t,n=3==t,r=4==t,o=6==t,s=5==t||o;return function(a,u,l,c){for(var h,f,p=le(a),d=b(p),v=Oe(u,l,3),y=ft(d.length),g=0,m=c||ke,_=e?m(a,y):i?m(a,0):void 0;y>g;g++)if((s||g in d)&&(f=v(h=d[g],g,p),t))if(e)_[g]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:Ce.call(_,h)}else if(r)return!1;return o?-1:n||r?r:_}},Pe={forEach:Ee(0),map:Ee(1),filter:Ee(2),some:Ee(3),every:Ee(4),find:Ee(5),findIndex:Ee(6)},Ie=Pe.forEach,Re=H("hidden"),je=Bt("toPrimitive"),Me=nt.set,Le=nt.getterFor("Symbol"),Ae=Object.prototype,De=c.Symbol,Fe=c.JSON,Ne=Fe&&Fe.stringify,Ge=j.f,Be=A.f,Ye=re.f,Xe=v.f,ze=G("symbols"),We=G("op-symbols"),qe=G("string-to-symbol-registry"),Ve=G("symbol-to-string-registry"),He=G("wks"),Ke=c.QObject,Ue=!Ke||!Ke.prototype||!Ke.prototype.findChild,Ze=f&&h((function(){return 7!=ye(Be({},"a",{get:function(){return Be(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=Ge(Ae,e);n&&delete Ae[e],Be(t,e,i),n&&t!==Ae&&Be(Ae,e,n)}:Be,Je=function(t,e){var i=ze[t]=ye(De.prototype);return Me(i,{type:"Symbol",tag:t,description:e}),f||(i.description=e),i},Qe=Ft&&"symbol"==n(De.iterator)?function(t){return"symbol"==n(t)}:function(t){return Object(t)instanceof De},$e=function(t,e,i){t===Ae&&$e(We,e,i),M(t);var n=O(e,!0);return M(i),k(ze,n)?(i.enumerable?(k(t,Re)&&t[Re][n]&&(t[Re][n]=!1),i=ye(i,{enumerable:y(0,!1)})):(k(t,Re)||Be(t,Re,y(1,{})),t[Re][n]=!0),Ze(t,n,i)):Be(t,n,i)},ti=function(t,e){M(t);var i=x(e),n=ce(i).concat(ri(i));return Ie(n,(function(e){f&&!ei.call(i,e)||$e(t,e,i[e])})),t},ei=function(t){var e=O(t,!0),i=Xe.call(this,e);return!(this===Ae&&k(ze,e)&&!k(We,e))&&(!(i||!k(this,e)||!k(ze,e)||k(this,Re)&&this[Re][e])||i)},ii=function(t,e){var i=x(t),n=O(e,!0);if(i!==Ae||!k(ze,n)||k(We,n)){var r=Ge(i,n);return!r||!k(ze,n)||k(i,Re)&&i[Re][n]||(r.enumerable=!0),r}},ni=function(t){var e=Ye(x(t)),i=[];return Ie(e,(function(t){k(ze,t)||k(K,t)||i.push(t)})),i},ri=function(t){var e=t===Ae,i=Ye(e?We:x(t)),n=[];return Ie(i,(function(t){!k(ze,t)||e&&!k(Ae,t)||n.push(ze[t])})),n};Ft||(rt((De=function(){if(this instanceof De)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=q(t),i=function t(i){this===Ae&&t.call(We,i),k(this,Re)&&k(this[Re],e)&&(this[Re][e]=!1),Ze(this,e,y(1,i))};return f&&Ue&&Ze(Ae,e,{configurable:!0,set:i}),Je(e,t)}).prototype,"toString",(function(){return Le(this).tag})),v.f=ei,A.f=$e,j.f=ii,xt.f=re.f=ni,St.f=ri,f&&(Be(De.prototype,"description",{configurable:!0,get:function(){return Le(this).description}}),rt(Ae,"propertyIsEnumerable",ei,{unsafe:!0})),ge.f=function(t){return Je(Bt(t),t)}),Lt({global:!0,wrap:!0,forced:!Ft,sham:!Ft},{Symbol:De}),Ie(ce(He),(function(t){_e(t)})),Lt({target:"Symbol",stat:!0,forced:!Ft},{for:function(t){var e=String(t);if(k(qe,e))return qe[e];var i=De(e);return qe[e]=i,Ve[i]=e,i},keyFor:function(t){if(!Qe(t))throw TypeError(t+" is not a symbol");if(k(Ve,t))return Ve[t]},useSetter:function(){Ue=!0},useSimple:function(){Ue=!1}}),Lt({target:"Object",stat:!0,forced:!Ft,sham:!f},{create:function(t,e){return void 0===e?ye(t):ti(ye(t),e)},defineProperty:$e,defineProperties:ti,getOwnPropertyDescriptor:ii}),Lt({target:"Object",stat:!0,forced:!Ft},{getOwnPropertyNames:ni,getOwnPropertySymbols:ri}),Lt({target:"Object",stat:!0,forced:h((function(){St.f(1)}))},{getOwnPropertySymbols:function(t){return St.f(le(t))}}),Fe&&Lt({target:"JSON",stat:!0,forced:!Ft||h((function(){var t=De();return"[null]"!=Ne([t])||"{}"!=Ne({a:t})||"{}"!=Ne(Object(t))}))},{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(S(e)||void 0!==t)&&!Qe(t))return At(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!Qe(e))return e}),n[1]=e,Ne.apply(Fe,n)}}),De.prototype[je]||D(De.prototype,je,De.prototype.valueOf),xe(De,"Symbol"),K[Re]=!0;var oi=A.f,si=c.Symbol;if(f&&"function"==typeof si&&(!("description"in si.prototype)||void 0!==si().description)){var ai={},ui=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof ui?new si(t):void 0===t?si():si(t);return""===t&&(ai[e]=!0),e};Tt(ui,si);var li=ui.prototype=si.prototype;li.constructor=ui;var ci=li.toString,hi="Symbol(test)"==String(si("test")),fi=/^Symbol\((.*)\)[^)]+$/;oi(li,"description",{configurable:!0,get:function(){var t=S(this)?this.valueOf():this,e=ci.call(t);if(k(ai,t))return"";var i=hi?e.slice(7,-1):e.replace(fi,"$1");return""===i?void 0:i}}),Lt({global:!0,forced:!0},{Symbol:ui})}_e("iterator");var pi=Bt("unscopables"),di=Array.prototype;null==di[pi]&&D(di,pi,ye(null));var vi,yi,gi,mi=function(t){di[pi][t]=!0},_i={},bi=!h((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),wi=H("IE_PROTO"),xi=Object.prototype,Si=bi?Object.getPrototypeOf:function(t){return t=le(t),k(t,wi)?t[wi]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?xi:null},Oi=Bt("iterator"),Ti=!1;[].keys&&("next"in(gi=[].keys())?(yi=Si(Si(gi)))!==Object.prototype&&(vi=yi):Ti=!0),null==vi&&(vi={}),k(vi,Oi)||D(vi,Oi,(function(){return this}));var ki={IteratorPrototype:vi,BUGGY_SAFARI_ITERATORS:Ti},Ci=ki.IteratorPrototype,Ei=function(){return this},Pi=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(t){}return function(i,n){return M(i),function(t){if(!S(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(i,n):i.__proto__=n,i}}():void 0),Ii=ki.IteratorPrototype,Ri=ki.BUGGY_SAFARI_ITERATORS,ji=Bt("iterator"),Mi=function(){return this},Li=function(t,e,i,n,r,o,s){!function(t,e,i){var n=e+" Iterator";t.prototype=ye(Ci,{next:y(1,i)}),xe(t,n,!1),_i[n]=Ei}(i,e,n);var a,u,l,c=function(t){if(t===r&&v)return v;if(!Ri&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new i(this,t)}}return function(){return new i(this)}},h=e+" Iterator",f=!1,p=t.prototype,d=p[ji]||p["@@iterator"]||r&&p[r],v=!Ri&&d||c(r),g="Array"==e&&p.entries||d;if(g&&(a=Si(g.call(new t)),Ii!==Object.prototype&&a.next&&(Si(a)!==Ii&&(Pi?Pi(a,Ii):"function"!=typeof a[ji]&&D(a,ji,Mi)),xe(a,h,!0))),"values"==r&&d&&"values"!==d.name&&(f=!0,v=function(){return d.call(this)}),p[ji]!==v&&D(p,ji,v),_i[e]=v,r)if(u={values:c("values"),keys:o?v:c("keys"),entries:c("entries")},s)for(l in u)(Ri||f||!(l in p))&&rt(p,l,u[l]);else Lt({target:e,proto:!0,forced:Ri||f},u);return u},Ai=nt.set,Di=nt.getterFor("Array Iterator"),Fi=Li(Array,"Array",(function(t,e){Ai(this,{type:"Array Iterator",target:x(t),index:0,kind:e})}),(function(){var t=Di(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");_i.Arguments=_i.Array,mi("keys"),mi("values"),mi("entries");var Ni=Object.assign,Gi=!Ni||h((function(){var t={},e={},i=Symbol();return t[i]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=Ni({},t)[i]||"abcdefghijklmnopqrst"!=ce(Ni({},e)).join("")}))?function(t,e){for(var i=le(t),n=arguments.length,r=1,o=St.f,s=v.f;n>r;)for(var a,u=b(arguments[r++]),l=o?ce(u).concat(o(u)):ce(u),c=l.length,h=0;c>h;)a=l[h++],f&&!s.call(u,a)||(i[a]=u[a]);return i}:Ni;Lt({target:"Object",stat:!0,forced:Object.assign!==Gi},{assign:Gi});var Bi=Bt("toStringTag"),Yi="Arguments"==m(function(){return arguments}()),Xi=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Bi))?i:Yi?m(e):"Object"==(n=m(e))&&"function"==typeof e.callee?"Arguments":n},zi={};zi[Bt("toStringTag")]="z";var Wi="[object z]"!==String(zi)?function(){return"[object "+Xi(this)+"]"}:zi.toString,qi=Object.prototype;Wi!==qi.toString&&rt(qi,"toString",Wi,{unsafe:!0});var Vi=!h((function(){return Object.isExtensible(Object.preventExtensions({}))})),Hi=o((function(t){var e=A.f,i=q("meta"),r=0,o=Object.isExtensible||function(){return!0},s=function(t){e(t,i,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!S(t))return"symbol"==n(t)?t:("string"==typeof t?"S":"P")+t;if(!k(t,i)){if(!o(t))return"F";if(!e)return"E";s(t)}return t[i].objectID},getWeakData:function(t,e){if(!k(t,i)){if(!o(t))return!0;if(!e)return!1;s(t)}return t[i].weakData},onFreeze:function(t){return Vi&&a.REQUIRED&&o(t)&&!k(t,i)&&s(t),t}};K[i]=!0})),Ki=Bt("iterator"),Ui=Array.prototype,Zi=Bt("iterator"),Ji=function(t,e,i,n){try{return n?e(M(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&M(r.call(t)),e}},Qi=o((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,i,r,o,s){var a,u,l,c,h,f,p,d,v=Oe(i,r,o?2:1);if(s)a=t;else{if("function"!=typeof(u=function(t){if(null!=t)return t[Zi]||t["@@iterator"]||_i[Xi(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(d=u)&&(_i.Array===d||Ui[Ki]===d)){for(l=0,c=ft(t.length);c>l;l++)if((h=o?v(M(p=t[l])[0],p[1]):v(t[l]))&&h instanceof e)return h;return new e(!1)}a=u.call(t)}for(f=a.next;!(p=f.call(a)).done;)if("object"==n(h=Ji(a,v,p.value,o))&&h&&h instanceof e)return h;return new e(!1)}).stop=function(t){return new e(!0,t)}})),$i=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t},tn=Bt("iterator"),en=!1;try{var nn=0,rn={next:function(){return{done:!!nn++}},return:function(){en=!0}};rn[tn]=function(){return this},Array.from(rn,(function(){throw 2}))}catch(t){}var on=function(t,e,i){var n,r;return Pi&&"function"==typeof(n=e.constructor)&&n!==i&&S(r=n.prototype)&&r!==i.prototype&&Pi(t,r),t},sn=function(t,e,i){for(var n in e)rt(t,n,e[n],i);return t},an=Bt("species"),un=A.f,ln=Hi.fastKey,cn=nt.set,hn=nt.getterFor,fn=(function(t,e,i,n,r){var o=c[t],s=o&&o.prototype,a=o,u=n?"set":"add",l={},f=function(t){var e=s[t];rt(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(r&&!S(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!S(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!S(t))&&e.call(this,0===t?0:t)}:function(t,i){return e.call(this,0===t?0:t,i),this})};if(jt(t,"function"!=typeof o||!(r||s.forEach&&!h((function(){(new o).entries().next()})))))a=i.getConstructor(e,t,n,u),Hi.REQUIRED=!0;else if(jt(t,!0)){var p=new a,d=p[u](r?{}:-0,1)!=p,v=h((function(){p.has(1)})),y=function(t,e){if(!e&&!en)return!1;var i=!1;try{var n={};n[tn]=function(){return{next:function(){return{done:i=!0}}}},t(n)}catch(t){}return i}((function(t){new o(t)})),g=!r&&h((function(){for(var t=new o,e=5;e--;)t[u](e,e);return!t.has(-0)}));y||((a=e((function(e,i){$i(e,a,t);var r=on(new o,e,a);return null!=i&&Qi(i,r[u],r,n),r}))).prototype=s,s.constructor=a),(v||g)&&(f("delete"),f("has"),n&&f("get")),(g||d)&&f(u),r&&s.clear&&delete s.clear}l[t]=a,Lt({global:!0,forced:a!=o},l),xe(a,t),r||i.setStrong(a,t,n)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,i,n){var r=t((function(t,o){$i(t,r,e),cn(t,{type:e,index:ye(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=o&&Qi(o,t[n],t,i)})),o=hn(e),s=function(t,e,i){var n,r,s=o(t),u=a(t,e);return u?u.value=i:(s.last=u={index:r=ln(e,!0),key:e,value:i,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=u),n&&(n.next=u),f?s.size++:t.size++,"F"!==r&&(s.index[r]=u)),t},a=function(t,e){var i,n=o(t),r=ln(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return sn(r.prototype,{clear:function(){for(var t=o(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=o(this),i=a(this,t);if(i){var n=i.next,r=i.previous;delete e.index[i.index],i.removed=!0,r&&(r.next=n),n&&(n.previous=r),e.first==i&&(e.first=n),e.last==i&&(e.last=r),f?e.size--:this.size--}return!!i},forEach:function(t){for(var e,i=o(this),n=Oe(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),sn(r.prototype,i?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),f&&un(r.prototype,"size",{get:function(){return o(this).size}}),r},setStrong:function(t,e,i){var n=e+" Iterator",r=hn(e),o=hn(n);Li(t,e,(function(t,e){cn(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),function(t){var e=at(t),i=A.f;f&&e&&!e[an]&&i(e,an,{configurable:!0,get:function(){return this}})}(e)}}),function(t){return function(e,i){var n,r,o=String(w(e)),s=ct(i),a=o.length;return s<0||s>=a?t?"":void 0:(n=o.charCodeAt(s))<55296||n>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?t?o.charAt(s):n:t?o.slice(s,s+2):r-56320+(n-55296<<10)+65536}}),pn={codeAt:fn(!1),charAt:fn(!0)},dn=pn.charAt,vn=nt.set,yn=nt.getterFor("String Iterator");Li(String,"String",(function(t){vn(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=yn(this),i=e.string,n=e.index;return n>=i.length?{value:void 0,done:!0}:(t=dn(i,n),e.index+=t.length,{value:t,done:!1})}));var gn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},mn=Bt("iterator"),_n=Bt("toStringTag"),bn=Fi.values;for(var wn in gn){var xn=c[wn],Sn=xn&&xn.prototype;if(Sn){if(Sn[mn]!==bn)try{D(Sn,mn,bn)}catch(t){Sn[mn]=bn}if(Sn[_n]||D(Sn,_n,wn),gn[wn])for(var On in Fi)if(Sn[On]!==Fi[On])try{D(Sn,On,Fi[On])}catch(t){Sn[On]=Fi[On]}}}function Tn(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var kn={},Cn=[];function En(t,e){if(Array.isArray(t)){var i=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){En(o.value,e)}}catch(t){n=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw r}}}else if("object"!==ue(t))In(Object.getOwnPropertyNames(e)),kn[t]=Object.assign(kn[t]||{},e);else for(var a in t)En(a,t[a])}function Pn(t){return kn[t]||{}}function In(t){Cn.push.apply(Cn,Tn(t))}var Rn=gt.includes;Lt({target:"Array",proto:!0},{includes:function(t){return Rn(this,t,arguments.length>1?arguments[1]:void 0)}}),mi("includes");var jn,Mn,Ln=function(){var t=M(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},An=RegExp.prototype.exec,Dn=String.prototype.replace,Fn=An,Nn=(jn=/a/,Mn=/b*/g,An.call(jn,"a"),An.call(Mn,"a"),0!==jn.lastIndex||0!==Mn.lastIndex),Gn=void 0!==/()??/.exec("")[1];(Nn||Gn)&&(Fn=function(t){var e,i,n,r,o=this;return Gn&&(i=new RegExp("^"+o.source+"$(?!\\s)",Ln.call(o))),Nn&&(e=o.lastIndex),n=An.call(o,t),Nn&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),Gn&&n&&n.length>1&&Dn.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n});var Bn=Fn;Lt({target:"RegExp",proto:!0,forced:/./.exec!==Bn},{exec:Bn});var Yn=Bt("match"),Xn=function(t){var e;return S(t)&&(void 0!==(e=t[Yn])?!!e:"RegExp"==m(t))},zn=function(t){if(Xn(t))throw TypeError("The method doesn't accept regular expressions");return t},Wn=Bt("match");Lt({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[Wn]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(w(this)).indexOf(zn(t),arguments.length>1?arguments[1]:void 0)}});var qn=Bt("species"),Vn=!h((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Hn=!h((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]})),Kn=function(t,e,i,n){var r=Bt(t),o=!h((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),s=o&&!h((function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[qn]=function(){return i},i.flags="",i[r]=/./[r]),i.exec=function(){return e=!0,null},i[r](""),!e}));if(!o||!s||"replace"===t&&!Vn||"split"===t&&!Hn){var a=/./[r],u=i(r,""[t],(function(t,e,i,n,r){return e.exec===Bn?o&&!r?{done:!0,value:a.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),l=u[0],c=u[1];rt(String.prototype,t,l),rt(RegExp.prototype,r,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}),n&&D(RegExp.prototype[r],"sham",!0)}},Un=pn.charAt,Zn=function(t,e,i){return e+(i?Un(t,e).length:1)},Jn=function(t,e){var i=t.exec;if("function"==typeof i){var r=i.call(t,e);if("object"!==n(r))throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==m(t))throw TypeError("RegExp#exec called on incompatible receiver");return Bn.call(t,e)},Qn=Math.max,$n=Math.min,tr=Math.floor,er=/\$([$&'`]|\d\d?|<[^>]*>)/g,ir=/\$([$&'`]|\d\d?)/g;Kn("replace",2,(function(t,e,i){return[function(i,n){var r=w(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,r,n):e.call(String(r),i,n)},function(t,r){var o=i(e,t,this,r);if(o.done)return o.value;var s=M(t),a=String(this),u="function"==typeof r;u||(r=String(r));var l=s.global;if(l){var c=s.unicode;s.lastIndex=0}for(var h=[];;){var f=Jn(s,a);if(null===f)break;if(h.push(f),!l)break;""===String(f[0])&&(s.lastIndex=Zn(a,ft(s.lastIndex),c))}for(var p,d="",v=0,y=0;y<h.length;y++){f=h[y];for(var g=String(f[0]),m=Qn($n(ct(f.index),a.length),0),_=[],b=1;b<f.length;b++)_.push(void 0===(p=f[b])?p:String(p));var w=f.groups;if(u){var x=[g].concat(_,m,a);void 0!==w&&x.push(w);var S=String(r.apply(void 0,x))}else S=n(g,a,m,_,w,r);m>=v&&(d+=a.slice(v,m)+S,v=m+g.length)}return d+a.slice(v)}];function n(t,i,n,r,o,s){var a=n+t.length,u=r.length,l=ir;return void 0!==o&&(o=le(o),l=er),e.call(s,l,(function(e,s){var l;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,n);case"'":return i.slice(a);case"<":l=o[s.slice(1,-1)];break;default:var c=+s;if(0===c)return e;if(c>u){var h=tr(c/10);return 0===h?e:h<=u?void 0===r[h-1]?s.charAt(1):r[h-1]+s.charAt(1):e}l=r[c-1]}return void 0===l?"":l}))}}));var nr="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",rr="["+nr+"]",or=RegExp("^"+rr+rr+"*"),sr=RegExp(rr+rr+"*$"),ar=function(t){return function(e){var i=String(w(e));return 1&t&&(i=i.replace(or,"")),2&t&&(i=i.replace(sr,"")),i}},ur={start:ar(1),end:ar(2),trim:ar(3)},lr=ur.trim;function cr(t,e){var i,n=t.length,r=[];for(i=0;i<n;i++)r.push(e(t[i]));return r}function hr(t){return t%360*Math.PI/180}function fr(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function pr(t){return t.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))}function dr(t){return t.charAt(0).toUpperCase()+t.slice(1)}function vr(t,e,i,n){return null!=e&&null!=i||(n=n||t.bbox(),null==e?e=n.width/n.height*i:null==i&&(i=n.height/n.width*e)),{width:e,height:i}}function yr(t,e){var i,n,r=t.origin;if("string"==typeof r||null==r){var o=(r||"center").toLowerCase().trim(),s=e.bbox(),a=s.height,u=s.width,l=s.x,c=s.y,h=o.includes("left")?l:o.includes("right")?l+u:l+u/2,f=o.includes("top")?c:o.includes("bottom")?c+a:c+a/2;i=null!=t.ox?t.ox:h,n=null!=t.oy?t.oy:f}else i=r[0],n=r[1];return[i,n]}Lt({target:"String",proto:!0,forced:function(t){return h((function(){return!!nr[t]()||"âÂá "!="âÂá "[t]()||nr[t].name!==t}))}("trim")},{trim:function(){return lr(this)}});var gr="http://www.w3.org/2000/svg",mr="http://www.w3.org/2000/xmlns/",_r="http://www.w3.org/1999/xlink",br="http://svgjs.com/svgjs",wr={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};function xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Sr=function t(){xr(this,t)},Or={},Tr="___SYMBOL___ROOT___";function kr(t){return wr.document.createElementNS(gr,t)}function Cr(t){if(t instanceof Sr)return t;if("object"===ue(t))return Ir(t);if(null==t)return new Or[Tr];if("string"==typeof t&&"<"!==t.charAt(0))return Ir(wr.document.querySelector(t));var e=kr("svg");return e.innerHTML=t,t=Ir(e.firstChild)}function Er(t,e){return e instanceof wr.window.Node?e:kr(t)}function Pr(t){if(!t)return null;if(t.instance instanceof Sr)return t.instance;var e=dr(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":Or[e]||(e="Dom"),new Or[e](t)}var Ir=Pr;function Rr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.name,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Or[e]=t,i&&(Or[Tr]=t),In(Object.getOwnPropertyNames(t.prototype)),t}var jr=1e3;function Mr(t){return"Svgjs"+dr(t)+jr++}function Lr(t,e,i){var n,r;for(r=(t=Array.isArray(t)?t:[t]).length-1;r>=0;r--)for(n in e){var o=e[n];i&&(o=Ar(e[n])),t[r].prototype[n]=o}}function Ar(t){return function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=i[i.length-1];return!r||r.constructor!==Object||r instanceof Array?t.apply(this,i):t.apply(this,i.slice(0,-1)).attr(r)}}En("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),"function"==typeof e.isRoot&&e.isRoot()&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),"function"==typeof t.isRoot&&t.isRoot()&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){(t=Cr(t)).remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){(t=Cr(t)).remove();var e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=Cr(t)).before(this),this},insertAfter:function(t){return(t=Cr(t)).after(this),this}});var Dr=Pe.filter;Lt({target:"Array",proto:!0,forced:!Ht("filter")},{filter:function(t){return Dr(this,t,arguments.length>1?arguments[1]:void 0)}});var Fr=function(t,e){var i=[][t];return!i||!h((function(){i.call(null,e||function(){throw 1},1)}))},Nr=gt.indexOf,Gr=[].indexOf,Br=!!Gr&&1/[1].indexOf(1,-0)<0,Yr=Fr("indexOf");Lt({target:"Array",proto:!0,forced:Br||Yr},{indexOf:function(t){return Br?Gr.apply(this,arguments)||0:Nr(this,t,arguments.length>1?arguments[1]:void 0)}});var Xr=[].join,zr=b!=Object,Wr=Fr("join",",");Lt({target:"Array",proto:!0,forced:zr||Wr},{join:function(t){return Xr.call(x(this),void 0===t?",":t)}});var qr=Bt("species"),Vr=[].push,Hr=Math.min,Kr=!h((function(){return!RegExp(4294967295,"y")}));Kn("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(w(this)),r=void 0===i?4294967295:i>>>0;if(0===r)return[];if(void 0===t)return[n];if(!Xn(t))return e.call(n,t,r);for(var o,s,a,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,l+"g");(o=Bn.call(h,n))&&!((s=h.lastIndex)>c&&(u.push(n.slice(c,o.index)),o.length>1&&o.index<n.length&&Vr.apply(u,o.slice(1)),a=o[0].length,c=s,u.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return c===n.length?!a&&h.test("")||u.push(""):u.push(n.slice(c)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var r=w(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,r,i):n.call(String(r),e,i)},function(t,r){var o=i(n,t,this,r,n!==e);if(o.done)return o.value;var s=M(t),a=String(this),u=function(t,e){var i,n=M(t).constructor;return void 0===n||null==(i=M(n)[qr])?e:Se(i)}(s,RegExp),l=s.unicode,c=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Kr?"y":"g"),h=new u(Kr?s:"^(?:"+s.source+")",c),f=void 0===r?4294967295:r>>>0;if(0===f)return[];if(0===a.length)return null===Jn(h,a)?[a]:[];for(var p=0,d=0,v=[];d<a.length;){h.lastIndex=Kr?d:0;var y,g=Jn(h,Kr?a:a.slice(d));if(null===g||(y=Hr(ft(h.lastIndex+(Kr?0:d)),a.length))===p)d=Zn(a,d,l);else{if(v.push(a.slice(p,d)),v.length===f)return v;for(var m=1;m<=g.length-1;m++)if(v.push(g[m]),v.length===f)return v;d=p=y}}return v.push(a.slice(p)),v}]}),!Kr);var Ur=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Zr=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Jr=/rgb\((\d+),(\d+),(\d+)\)/,Qr=/(#[a-z0-9\-_]+)/i,$r=/\)\s*,?\s*/,to=/\s/g,eo=/^#[a-f0-9]{3,6}$/i,io=/^rgb\(/,no=/^(\s+)?$/,ro=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,oo=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,so=/[\s,]+/,ao=/([^e])-/gi,uo=/[MLHVCSQTAZ]/gi,lo=/[MLHVCSQTAZ]/i,co=/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,ho=/\./g;En("Dom",{classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(so)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}});var fo=Pe.forEach,po=Fr("forEach")?function(t){return fo(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;for(var vo in Lt({target:"Array",proto:!0,forced:[].forEach!=po},{forEach:po}),gn){var yo=c[vo],go=yo&&yo.prototype;if(go&&go.forEach!==po)try{D(go,"forEach",po)}catch(t){go.forEach=po}}En("Dom",{css:function(t,e){var i={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){var e=t.split(/\s*:\s*/);i[e[0]]=e[1]})),i;if(arguments.length<2){if(Array.isArray(t)){var n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value,l=fr(u);i[l]=this.node.style[l]}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}if("string"==typeof t)return this.node.style[fr(t)];if("object"===ue(t))for(var c in t)this.node.style[fr(c)]=null==t[c]||no.test(t[c])?"":t[c]}return 2===arguments.length&&(this.node.style[fr(t)]=null==e||no.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),En("Dom",{data:function(t,e,i){if("object"===ue(t))for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===i||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),En("Dom",{remember:function(t,e){if("object"===ue(arguments[0]))for(var i in t)this.remember(i,t[i]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});var mo=function(t){return function(e,i,n,r){Se(i);var o=le(e),s=b(o),a=ft(o.length),u=t?a-1:0,l=t?-1:1;if(n<2)for(;;){if(u in s){r=s[u],u+=l;break}if(u+=l,t?u<0:a<=u)throw TypeError("Reduce of empty array with no initial value")}for(;t?u>=0:a>u;u+=l)u in s&&(r=i(r,s[u],u,o));return r}},_o={left:mo(!1),right:mo(!0)}.left;Lt({target:"Array",proto:!0,forced:Fr("reduce")},{reduce:function(t){return _o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var bo=0,wo={};function xo(t){var e=t.getEventHolder();return e===wr.window&&(e=wo),e.events||(e.events={}),e.events}function So(t){return t.getEventTarget()}function Oo(t,e,i,n,r){var o=i.bind(n||t),s=Cr(t),a=xo(s),u=So(s);e=Array.isArray(e)?e:e.split(so),i._svgjsListenerId||(i._svgjsListenerId=++bo),e.forEach((function(t){var e=t.split(".")[0],n=t.split(".")[1]||"*";a[e]=a[e]||{},a[e][n]=a[e][n]||{},a[e][n][i._svgjsListenerId]=o,u.addEventListener(e,o,r||!1)}))}function To(t,e,i,n){var r=Cr(t),o=xo(r),s=So(r);("function"!=typeof i||(i=i._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(so)).forEach((function(t){var e,a,u=t&&t.split(".")[0],l=t&&t.split(".")[1];if(i)o[u]&&o[u][l||"*"]&&(s.removeEventListener(u,o[u][l||"*"][i],n||!1),delete o[u][l||"*"][i]);else if(u&&l){if(o[u]&&o[u][l]){for(a in o[u][l])To(s,[u,l].join("."),a);delete o[u][l]}}else if(l)for(t in o)for(e in o[t])l===e&&To(s,[t,l].join("."));else if(u){if(o[u]){for(e in o[u])To(s,[u,e].join("."));delete o[u]}}else{for(t in o)To(s,t);!function(t){var e=t.getEventHolder();e.events&&(e.events={})}(r)}}))}var ko=Bt("isConcatSpreadable"),Co=qt>=51||!h((function(){var t=[];return t[ko]=!1,t.concat()[0]!==t})),Eo=Ht("concat"),Po=function(t){if(!S(t))return!1;var e=t[ko];return void 0!==e?!!e:At(t)};Lt({target:"Array",proto:!0,forced:!Co||!Eo},{concat:function(t){var e,i,n,r,o,s=le(this),a=ke(s,0),u=0;for(e=-1,n=arguments.length;e<n;e++)if(Po(o=-1===e?s:arguments[e])){if(u+(r=ft(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<r;i++,u++)i in o&&Dt(a,u,o[i])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Dt(a,u++,o)}return a.length=u,a}});var Io=Pe.map;Lt({target:"Array",proto:!0,forced:!Ht("map")},{map:function(t){return Io(this,t,arguments.length>1?arguments[1]:void 0)}});var Ro=Date.prototype,jo=Ro.toString,Mo=Ro.getTime;new Date(NaN)+""!="Invalid Date"&&rt(Ro,"toString",(function(){var t=Mo.call(this);return t==t?jo.call(this):"Invalid Date"}));var Lo=ur.trim,Ao=c.parseInt,Do=/^[+-]?0[Xx]/,Fo=8!==Ao(nr+"08")||22!==Ao(nr+"0x16")?function(t,e){var i=Lo(String(t));return Ao(i,e>>>0||(Do.test(i)?16:10))}:Ao;Lt({global:!0,forced:parseInt!=Fo},{parseInt:Fo});var No=RegExp.prototype,Go=No.toString,Bo=h((function(){return"/a/b"!=Go.call({source:"a",flags:"b"})})),Yo="toString"!=Go.name;function Xo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function zo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wo(t,e,i){return e&&zo(t.prototype,e),i&&zo(t,i),t}function qo(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function Vo(t){var e=Math.round(t),i=Math.max(0,Math.min(255,e)).toString(16);return 1===i.length?"0"+i:i}function Ho(t,e){for(var i=e.length;i--;)if(null==t[e[i]])return!1;return!0}function Ko(t,e){var i=Ho(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,space:"rgb"}:Ho(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:Ho(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:Ho(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:Ho(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:Ho(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return i.space=e||i.space,i}function Uo(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}(Bo||Yo)&&rt(RegExp.prototype,"toString",(function(){var t=M(this),e=String(t.source),i=t.flags;return"/"+e+"/"+String(void 0===i&&t instanceof RegExp&&!("flags"in No)?Ln.call(t):i)}),{unsafe:!0});var Zo=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return Wo(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"rgb";if(t=t||0,this.space)for(var o in this.space)delete this[this.space[o]];if("number"==typeof t)r="string"==typeof n?n:r,n="string"==typeof n?0:n,Object.assign(this,{_a:t,_b:e,_c:i,_d:n,space:r});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){var s=Ko(t,e);Object.assign(this,s)}else if("string"==typeof t)if(io.test(t)){var a=t.replace(to,""),u=Jr.exec(a).slice(1,4).map((function(t){return parseInt(t)})),l=Xo(u,3),c=l[0],h=l[1],f=l[2];Object.assign(this,{_a:c,_b:h,_c:f,_d:0,space:"rgb"})}else{if(!eo.test(t))throw Error("Unsupported string format, can't construct Color");var p=function(t){return parseInt(t,16)},d=Zr.exec(qo(t)).map(p),v=Xo(d,4),y=v[1],g=v[2],m=v[3];Object.assign(this,{_a:y,_b:g,_c:m,_d:0,space:"rgb"})}var _=this._a,b=this._b,w=this._c,x=this._d,S="rgb"===this.space?{r:_,g:b,b:w}:"xyz"===this.space?{x:_,y:b,z:w}:"hsl"===this.space?{h:_,s:b,l:w}:"lab"===this.space?{l:_,a:b,b:w}:"lch"===this.space?{l:_,c:b,h:w}:"cmyk"===this.space?{c:_,m:b,y:w,k:x}:{};Object.assign(this,S)}},{key:"rgb",value:function(){if("rgb"===this.space)return this;if("lab"===(P=this.space)||"xyz"===P||"lch"===P){var e=this.x,i=this.y,n=this.z;if("lab"===this.space||"lch"===this.space){var r=this.l,o=this.a,s=this.b;if("lch"===this.space){var a=this.c,u=this.h,l=Math.PI/180;o=a*Math.cos(l*u),s=a*Math.sin(l*u)}var c=(r+16)/116,h=o/500+c,f=c-s/200,p=16/116,d=.008856;e=.95047*(Math.pow(h,3)>d?Math.pow(h,3):(h-p)/7.787),i=1*(Math.pow(c,3)>d?Math.pow(c,3):(c-p)/7.787),n=1.08883*(Math.pow(f,3)>d?Math.pow(f,3):(f-p)/7.787)}var v=3.2406*e+-1.5372*i+-.4986*n,y=-.9689*e+1.8758*i+.0415*n,g=.0557*e+-.204*i+1.057*n,m=Math.pow,_=.0031308;return new t(255*(v>_?1.055*m(v,1/2.4)-.055:12.92*v),255*(y>_?1.055*m(y,1/2.4)-.055:12.92*y),255*(g>_?1.055*m(g,1/2.4)-.055:12.92*g))}if("hsl"===this.space){var b=this.h,w=this.s,x=this.l;if(b/=360,x/=100,0===(w/=100))return new t(x*=255,x,x);var S=x<.5?x*(1+w):x+w-x*w,O=2*x-S;return new t(255*Uo(O,S,b+1/3),255*Uo(O,S,b),255*Uo(O,S,b-1/3))}if("cmyk"===this.space){var T=this.c,k=this.m,C=this.y,E=this.k;return new t(255*(1-Math.min(1,T*(1-E)+E)),255*(1-Math.min(1,k*(1-E)+E)),255*(1-Math.min(1,C*(1-E)+E)))}return this;var P}},{key:"lab",value:function(){var e=this.xyz(),i=e.x,n=e.y;return new t(116*n-16,500*(i-n),200*(n-e.z),"lab")}},{key:"xyz",value:function(){var e=this.rgb(),i=Xo([e._a,e._b,e._c].map((function(t){return t/255})),3),n=i[0],r=i[1],o=i[2],s=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,a=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,u=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,l=(.4124*s+.3576*a+.1805*u)/.95047,c=(.2126*s+.7152*a+.0722*u)/1,h=(.0193*s+.1192*a+.9505*u)/1.08883;return new t(l>.008856?Math.pow(l,1/3):7.787*l+16/116,c>.008856?Math.pow(c,1/3):7.787*c+16/116,h>.008856?Math.pow(h,1/3):7.787*h+16/116,"xyz")}},{key:"lch",value:function(){var e=this.lab(),i=e.l,n=e.a,r=e.b,o=Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),s=180*Math.atan2(r,n)/Math.PI;return s<0&&(s=360-(s*=-1)),new t(i,o,s,"lch")}},{key:"hsl",value:function(){var e=this.rgb(),i=Xo([e._a,e._b,e._c].map((function(t){return t/255})),3),n=i[0],r=i[1],o=i[2],s=Math.max(n,r,o),a=Math.min(n,r,o),u=(s+a)/2,l=s===a,c=s-a;return new t(360*(l?0:s===n?((r-o)/c+(r<o?6:0))/6:s===r?((o-n)/c+2)/6:s===o?((n-r)/c+4)/6:0),100*(l?0:u>.5?c/(2-s-a):c/(s+a)),100*u,"hsl")}},{key:"cmyk",value:function(){var e=this.rgb(),i=Xo([e._a,e._b,e._c].map((function(t){return t/255})),3),n=i[0],r=i[1],o=i[2],s=Math.min(1-n,1-r,1-o);return 1===s?new t(0,0,0,1,"cmyk"):new t((1-n-s)/(1-s),(1-r-s)/(1-s),(1-o-s)/(1-s),s,"cmyk")}},{key:"_clamped",value:function(){var t=this.rgb(),e=t._a,i=t._b,n=t._c,r=Math.max,o=Math.min,s=Math.round;return[e,i,n].map((function(t){return r(0,o(s(t),255))}))}},{key:"toHex",value:function(){var t=Xo(this._clamped().map(Vo),3),e=t[0],i=t[1],n=t[2];return"#".concat(e).concat(i).concat(n)}},{key:"toString",value:function(){return this.toHex()}},{key:"toRgb",value:function(){var t=Xo(this._clamped(),3),e=t[0],i=t[1],n=t[2];return"rgb(".concat(e,",").concat(i,",").concat(n,")")}},{key:"toArray",value:function(){return[this._a,this._b,this._c,this._d,this.space]}}],[{key:"random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vibrant",i=arguments.length>1?arguments[1]:void 0,n=Math.random,r=Math.round,o=Math.sin,s=Math.PI;if("vibrant"===e){var a=24*n()+57,u=38*n()+45,l=360*n(),c=new t(a,u,l,"lch");return c}if("sine"===e){var h=r(80*o(2*s*(i=null==i?n():i)/.5+.01)+150),f=r(50*o(2*s*i/.5+4.6)+200),p=r(100*o(2*s*i/.5+2.3)+150),d=new t(h,f,p);return d}if("pastel"===e){var v=8*n()+86,y=17*n()+9,g=360*n(),m=new t(v,y,g,"lch");return m}if("dark"===e){var _=10+10*n(),b=50*n()+86,w=360*n(),x=new t(_,b,w,"lch");return x}if("rgb"===e){var S=255*n(),O=255*n(),T=255*n(),k=new t(S,O,T);return k}if("lab"===e){var C=100*n(),E=256*n()-128,P=256*n()-128,I=new t(C,E,P,"lab");return I}if("grey"===e){var R=255*n(),j=new t(R,R,R);return j}}},{key:"test",value:function(t){return"string"==typeof t&&(eo.test(t)||io.test(t))}},{key:"isRgb",value:function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}},{key:"isColor",value:function(e){return e&&(e instanceof t||this.isRgb(e)||this.test(e))}}]),t}(),Jo=h((function(){ce(1)}));function Qo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $o(t,e){return!e||"object"!==ue(e)&&"function"!=typeof e?Qo(t):e}function ts(t){return(ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function es(t,e,i){return(es="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ts(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function is(t,e){return(is=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ns(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&is(t,e)}Lt({target:"Object",stat:!0,forced:Jo},{keys:function(t){return ce(le(t))}}),Kn("match",1,(function(t,e,i){return[function(e){var i=w(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var r=M(t),o=String(this);if(!r.global)return Jn(r,o);var s=r.unicode;r.lastIndex=0;for(var a,u=[],l=0;null!==(a=Jn(r,o));){var c=String(a[0]);u[l]=c,""===c&&(r.lastIndex=Zn(o,ft(r.lastIndex),s)),l++}return 0===l?null:u}]}));var rs=xt.f,os=j.f,ss=A.f,as=ur.trim,us=c.Number,ls=us.prototype,cs="Number"==m(ye(ls)),hs=function(t){var e,i,n,r,o,s,a,u,l=O(t,!1);if("string"==typeof l&&l.length>2)if(43===(e=(l=as(l)).charCodeAt(0))||45===e){if(88===(i=l.charCodeAt(2))||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(s=(o=l.slice(2)).length,a=0;a<s;a++)if((u=o.charCodeAt(a))<48||u>r)return NaN;return parseInt(o,n)}return+l};if(jt("Number",!us(" 0o1")||!us("0b1")||us("+0x1"))){for(var fs,ps=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof ps&&(cs?h((function(){ls.valueOf.call(i)})):"Number"!=m(i))?on(new us(hs(e)),i,ps):hs(e)},ds=f?rs(us):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),vs=0;ds.length>vs;vs++)k(us,fs=ds[vs])&&!k(ps,fs)&&ss(ps,fs,os(us,fs));ps.prototype=ls,ls.constructor=ps,rt(c,"Number",ps)}var ys=ur.trim,gs=c.parseFloat,ms=1/gs(nr+"-0")!=-1/0?function(t){var e=ys(String(t)),i=gs(e);return 0===i&&"-"==e.charAt(0)?-0:i}:gs;Lt({global:!0,forced:parseFloat!=ms},{parseFloat:ms});var _s=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return Wo(t,[{key:"init",value:function(t,e){var i=0,n=0,r=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===ue(t)?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==r.x?i:r.x,this.y=null==r.y?n:r.y,this}},{key:"clone",value:function(){return new t(this)}},{key:"transform",value:function(t){return this.clone().transformO(t)}},{key:"transformO",value:function(t){ws.isMatrixLike(t)||(t=new ws(t));var e=this.x,i=this.y;return this.x=t.a*e+t.c*i+t.e,this.y=t.b*e+t.d*i+t.f,this}},{key:"toArray",value:function(){return[this.x,this.y]}}]),t}();function bs(t,e,i){return Math.abs(e-t)<(i||1e-6)}var ws=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return Wo(t,[{key:"init",value:function(e){var i=t.fromArray([1,0,0,1,0,0]);return e=e instanceof Ns?e.matrixify():"string"==typeof e?t.fromArray(e.split(so).map(parseFloat)):Array.isArray(e)?t.fromArray(e):"object"===ue(e)&&t.isMatrixLike(e)?e:"object"===ue(e)?(new t).transform(e):6===arguments.length?t.fromArray([].slice.call(arguments)):i,this.a=null!=e.a?e.a:i.a,this.b=null!=e.b?e.b:i.b,this.c=null!=e.c?e.c:i.c,this.d=null!=e.d?e.d:i.d,this.e=null!=e.e?e.e:i.e,this.f=null!=e.f?e.f:i.f,this}},{key:"clone",value:function(){return new t(this)}},{key:"transform",value:function(e){if(t.isMatrixLike(e))return new t(e).multiplyO(this);var i=t.formatTransforms(e),n=new _s(i.ox,i.oy).transform(this),r=n.x,o=n.y,s=(new t).translateO(i.rx,i.ry).lmultiplyO(this).translateO(-r,-o).scaleO(i.scaleX,i.scaleY).skewO(i.skewX,i.skewY).shearO(i.shear).rotateO(i.theta).translateO(r,o);if(isFinite(i.px)||isFinite(i.py)){var a=new _s(r,o).transform(s),u=i.px?i.px-a.x:0,l=i.py?i.py-a.y:0;s.translateO(u,l)}return s.translateO(i.tx,i.ty),s}},{key:"compose",value:function(e){e.origin&&(e.originX=e.origin[0],e.originY=e.origin[1]);var i=e.originX||0,n=e.originY||0,r=e.scaleX||1,o=e.scaleY||1,s=e.shear||0,a=e.rotate||0,u=e.translateX||0,l=e.translateY||0;return(new t).translateO(-i,-n).scaleO(r,o).shearO(s).rotateO(a).translateO(u,l).lmultiplyO(this).translateO(i,n)}},{key:"decompose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.a,n=this.b,r=this.c,o=this.d,s=this.e,a=this.f,u=i*o-n*r,l=u>0?1:-1,c=l*Math.sqrt(i*i+n*n),h=Math.atan2(l*n,l*i),f=180/Math.PI*h,p=Math.cos(h),d=Math.sin(h),v=(i*r+n*o)/u,y=r*c/(v*i-n)||o*c/(v*n+i),g=s-t+t*p*c+e*(v*p*c-d*y),m=a-e+t*d*c+e*(v*d*c+p*y);return{scaleX:c,scaleY:y,shear:v,rotate:f,translateX:g,translateY:m,originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}},{key:"multiply",value:function(t){return this.clone().multiplyO(t)}},{key:"multiplyO",value:function(e){var i=e instanceof t?e:new t(e);return t.matrixMultiply(this,i,this)}},{key:"lmultiply",value:function(t){return this.clone().lmultiplyO(t)}},{key:"lmultiplyO",value:function(e){var i=e instanceof t?e:new t(e);return t.matrixMultiply(i,this,this)}},{key:"inverseO",value:function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.e,o=this.f,s=t*n-e*i;if(!s)throw new Error("Cannot invert "+this);var a=n/s,u=-e/s,l=-i/s,c=t/s,h=-(a*r+l*o),f=-(u*r+c*o);return this.a=a,this.b=u,this.c=l,this.d=c,this.e=h,this.f=f,this}},{key:"inverse",value:function(){return this.clone().inverseO()}},{key:"translate",value:function(t,e){return this.clone().translateO(t,e)}},{key:"translateO",value:function(t,e){return this.e+=t||0,this.f+=e||0,this}},{key:"scale",value:function(t,e,i,n){var r;return(r=this.clone()).scaleO.apply(r,arguments)}},{key:"scaleO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;3===arguments.length&&(n=i,i=e,e=t);var r=this.a,o=this.b,s=this.c,a=this.d,u=this.e,l=this.f;return this.a=r*t,this.b=o*e,this.c=s*t,this.d=a*e,this.e=u*t-i*t+i,this.f=l*e-n*e+n,this}},{key:"rotate",value:function(t,e,i){return this.clone().rotateO(t,e,i)}},{key:"rotateO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=hr(t);var n=Math.cos(t),r=Math.sin(t),o=this.a,s=this.b,a=this.c,u=this.d,l=this.e,c=this.f;return this.a=o*n-s*r,this.b=s*n+o*r,this.c=a*n-u*r,this.d=u*n+a*r,this.e=l*n-c*r+i*r-e*n+e,this.f=c*n+l*r-e*r-i*n+i,this}},{key:"flip",value:function(t,e){return this.clone().flipO(t,e)}},{key:"flipO",value:function(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}},{key:"shear",value:function(t,e,i){return this.clone().shearO(t,e,i)}},{key:"shearO",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.a,n=this.b,r=this.c,o=this.d,s=this.e,a=this.f;return this.a=i+n*t,this.c=r+o*t,this.e=s+a*t-e*t,this}},{key:"skew",value:function(t,e,i,n){var r;return(r=this.clone()).skewO.apply(r,arguments)}},{key:"skewO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;3===arguments.length&&(n=i,i=e,e=t),t=hr(t),e=hr(e);var r=Math.tan(t),o=Math.tan(e),s=this.a,a=this.b,u=this.c,l=this.d,c=this.e,h=this.f;return this.a=s+a*r,this.b=a+s*o,this.c=u+l*r,this.d=l+u*o,this.e=c+h*r-n*r,this.f=h+c*o-i*o,this}},{key:"skewX",value:function(t,e,i){return this.skew(t,0,e,i)}},{key:"skewXO",value:function(t,e,i){return this.skewO(t,0,e,i)}},{key:"skewY",value:function(t,e,i){return this.skew(0,t,e,i)}},{key:"skewYO",value:function(t,e,i){return this.skewO(0,t,e,i)}},{key:"aroundO",value:function(t,e,i){var n=t||0,r=e||0;return this.translateO(-n,-r).lmultiplyO(i).translateO(n,r)}},{key:"around",value:function(t,e,i){return this.clone().aroundO(t,e,i)}},{key:"equals",value:function(e){var i=new t(e);return bs(this.a,i.a)&&bs(this.b,i.b)&&bs(this.c,i.c)&&bs(this.d,i.d)&&bs(this.e,i.e)&&bs(this.f,i.f)}},{key:"toString",value:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},{key:"toArray",value:function(){return[this.a,this.b,this.c,this.d,this.e,this.f]}},{key:"valueOf",value:function(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}],[{key:"fromArray",value:function(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}},{key:"isMatrixLike",value:function(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}},{key:"formatTransforms",value:function(t){var e="both"===t.flip||!0===t.flip,i=t.flip&&(e||"x"===t.flip)?-1:1,n=t.flip&&(e||"y"===t.flip)?-1:1,r=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,s=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,a=t.scale&&t.scale.length?t.scale[1]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleY)?t.scaleY*n:n,u=t.shear||0,l=t.rotate||t.theta||0,c=new _s(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),h=c.x,f=c.y,p=new _s(t.position||t.px||t.positionX,t.py||t.positionY),d=p.x,v=p.y,y=new _s(t.translate||t.tx||t.translateX,t.ty||t.translateY),g=y.x,m=y.y,_=new _s(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:s,scaleY:a,skewX:r,skewY:o,shear:u,theta:l,rx:_.x,ry:_.y,tx:g,ty:m,ox:h,oy:f,px:d,py:v}}},{key:"matrixMultiply",value:function(t,e,i){var n=t.a*e.a+t.c*e.b,r=t.b*e.a+t.d*e.b,o=t.a*e.c+t.c*e.d,s=t.b*e.c+t.d*e.d,a=t.e+t.a*e.e+t.c*e.f,u=t.f+t.b*e.e+t.d*e.f;return i.a=n,i.b=r,i.c=o,i.d=s,i.e=a,i.f=u,i}}]),t}();function xs(){if(!xs.nodes){var t=Cr().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");var e=t.path().node;xs.nodes={svg:t,path:e}}if(!xs.nodes.svg.node.parentNode){var i=wr.document.body||wr.document.documentElement;xs.nodes.svg.addTo(i)}return xs.nodes}function Ss(t){return!(t.width||t.height||t.x||t.y)}Rr(ws,"Matrix");var Os=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return Wo(t,[{key:"init",value:function(t){var e=[0,0,0,0];return t="string"==typeof t?t.split(so).map(parseFloat):Array.isArray(t)?t:"object"===ue(t)?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):e,this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}},{key:"merge",value:function(e){var i=Math.min(this.x,e.x),n=Math.min(this.y,e.y);return new t(i,n,Math.max(this.x+this.width,e.x+e.width)-i,Math.max(this.y+this.height,e.y+e.height)-n)}},{key:"transform",value:function(e){e instanceof ws||(e=new ws(e));var i=1/0,n=-1/0,r=1/0,o=-1/0;return[new _s(this.x,this.y),new _s(this.x2,this.y),new _s(this.x,this.y2),new _s(this.x2,this.y2)].forEach((function(t){t=t.transform(e),i=Math.min(i,t.x),n=Math.max(n,t.x),r=Math.min(r,t.y),o=Math.max(o,t.y)})),new t(i,r,n-i,o-r)}},{key:"addOffset",value:function(){return this.x+=wr.window.pageXOffset,this.y+=wr.window.pageYOffset,this}},{key:"toString",value:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}},{key:"toArray",value:function(){return[this.x,this.y,this.width,this.height]}},{key:"isNulled",value:function(){return Ss(this)}}]),t}();function Ts(t,e){var i,n;try{if(Ss(i=t(this.node))&&((n=this.node)!==wr.document&&!(wr.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===wr.document}).call(wr.document.documentElement,n)))throw new Error("Element not in the dom")}catch(t){i=e(this)}return i}En({viewbox:{viewbox:function(t,e,i,n){return null==t?new Os(this.attr("viewBox")):this.attr("viewBox",new Os(t,e,i,n))},zoom:function(t,e){var i=this.node.clientWidth,n=this.node.clientHeight,r=this.viewbox();if(!i&&!n){var o=window.getComputedStyle(this.node);i=parseFloat(o.getPropertyValue("width")),n=parseFloat(o.getPropertyValue("height"))}var s=i/r.width,a=n/r.height,u=Math.min(s,a);if(null==t)return u;var l=u/t;l===1/0&&(l=Number.MIN_VALUE),e=e||new _s(i/2/s+r.x,n/2/a+r.y);var c=new Os(r).transform(new ws({scale:l,origin:e}));return this.viewbox(c)}}}),Rr(Os,"Box");var ks=function(){try{return Function("name","baseClass","_constructor",["baseClass = baseClass || Array","return {","  [name]: class extends baseClass {","    constructor (...args) {","      super(...args)","      _constructor && _constructor.apply(this, args)","    }","  }","}[name]"].join("\n"))}catch(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Array,i=arguments.length>2?arguments[2]:void 0,n=function(){e.apply(this,arguments),i&&i.apply(this,arguments)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.map=function(t){var e=new n;return e.push.apply(e,Array.prototype.map.call(this,t)),e},n}}}(),Cs=ks("List",Array,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("number"==typeof t)return this;this.length=0,this.push.apply(this,Tn(t))}));Lr(Cs,{each:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return"function"==typeof t?this.map((function(e){return t.call(e,e)})):this.map((function(e){return e[t].apply(e,i)}))},toArray:function(){return Array.prototype.concat.apply([],this)}});var Es=["toArray","constructor","each"];function Ps(t,e){return new Cs(cr((e||wr.document).querySelectorAll(t),(function(t){return Pr(t)})))}Cs.extend=function(t){t=t.reduce((function(t,e){return Es.includes(e)||"_"===e[0]||(t[e]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this.each.apply(this,[e].concat(i))}),t}),{}),Lr(Cs,t)};var Is=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.events,r=void 0===n?{}:n;return xr(this,e),(t=$o(this,ts(e).call(this))).events=r,t}return ns(e,t),Wo(e,[{key:"addEventListener",value:function(){}},{key:"dispatch",value:function(t,e){return function(t,e,i){var n=So(t);return e instanceof wr.window.Event||(e=new wr.window.CustomEvent(e,{detail:i,cancelable:!0})),n.dispatchEvent(e),e}(this,t,e)}},{key:"dispatchEvent",value:function(t){var e=this.getEventHolder().events;if(!e)return!0;var i=e[t.type];for(var n in i)for(var r in i[n])i[n][r](t);return!t.defaultPrevented}},{key:"fire",value:function(t,e){return this.dispatch(t,e),this}},{key:"getEventHolder",value:function(){return this}},{key:"getEventTarget",value:function(){return this}},{key:"off",value:function(t,e){return To(this,t,e),this}},{key:"on",value:function(t,e,i,n){return Oo(this,t,e,i,n),this}},{key:"removeEventListener",value:function(){}}]),e}(Sr);function Rs(){}Rr(Is,"EventTarget");var js={duration:400,ease:">",delay:0},Ms={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"},Ls=ks("SVGArray",Array,(function(t){this.init(t)}));Lr(Ls,{init:function(t){return"number"==typeof t||(this.length=0,this.push.apply(this,Tn(this.parse(t)))),this},toArray:function(){return Array.prototype.concat.apply([],this)},toString:function(){return this.join(" ")},valueOf:function(){var t=[];return t.push.apply(t,Tn(this)),t},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t instanceof Array?t:t.trim().split(so).map(parseFloat)},clone:function(){return new this.constructor(this)},toSet:function(){return new Set(this)}});var As=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return Wo(t,[{key:"init",value:function(e,i){return i=Array.isArray(e)?e[1]:i,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=i||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(i=e.match(Ur))&&(this.value=parseFloat(i[1]),"%"===i[5]?this.value/=100:"s"===i[5]&&(this.value*=1e3),this.unit=i[5]):e instanceof t&&(this.value=e.valueOf(),this.unit=e.unit),this}},{key:"toString",value:function(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}},{key:"toJSON",value:function(){return this.toString()}},{key:"toArray",value:function(){return[this.value,this.unit]}},{key:"valueOf",value:function(){return this.value}},{key:"plus",value:function(e){return e=new t(e),new t(this+e,this.unit||e.unit)}},{key:"minus",value:function(e){return e=new t(e),new t(this-e,this.unit||e.unit)}},{key:"times",value:function(e){return e=new t(e),new t(this*e,this.unit||e.unit)}},{key:"divide",value:function(e){return e=new t(e),new t(this/e,this.unit||e.unit)}},{key:"convert",value:function(e){return new t(this.value,e)}}]),t}(),Ds=[];var Fs=function(t){function e(t,i){var n;return xr(this,e),(n=$o(this,ts(e).call(this,t))).node=t,n.type=t.nodeName,i&&t!==i&&n.attr(i),n}return ns(e,t),Wo(e,[{key:"add",value:function(t,e){return t=Cr(t),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}},{key:"addTo",value:function(t){return Cr(t).put(this)}},{key:"children",value:function(){return new Cs(cr(this.node.children,(function(t){return Pr(t)})))}},{key:"clear",value:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}},{key:"clone",value:function(){return this.writeDataToDom(),function t(e){for(var i=e.children.length-1;i>=0;i--)t(e.children[i]);return e.id?Pr(e).id(Mr(e.nodeName)):Pr(e)}(this.node.cloneNode(!0))}},{key:"each",value:function(t,e){var i,n,r=this.children();for(i=0,n=r.length;i<n;i++)t.apply(r[i],[i,r]),e&&r[i].each(t,e);return this}},{key:"element",value:function(t){return this.put(new e(kr(t)))}},{key:"first",value:function(){return Pr(this.node.firstChild)}},{key:"get",value:function(t){return Pr(this.node.childNodes[t])}},{key:"getEventHolder",value:function(){return this.node}},{key:"getEventTarget",value:function(){return this.node}},{key:"has",value:function(t){return this.index(t)>=0}},{key:"id",value:function(t){return void 0!==t||this.node.id||(this.node.id=Mr(this.type)),this.attr("id",t)}},{key:"index",value:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}},{key:"last",value:function(){return Pr(this.node.lastChild)}},{key:"matches",value:function(t){var e=this.node;return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}},{key:"parent",value:function(t){var e=this;if(!e.node.parentNode)return null;if(e=Pr(e.node.parentNode),!t)return e;for(;e;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"===e.node.parentNode.nodeName||"#document-fragment"===e.node.parentNode.nodeName)return null;e=Pr(e.node.parentNode)}}},{key:"put",value:function(t,e){return this.add(t,e),t}},{key:"putIn",value:function(t){return Cr(t).add(this)}},{key:"remove",value:function(){return this.parent()&&this.parent().removeElement(this),this}},{key:"removeElement",value:function(t){return this.node.removeChild(t.node),this}},{key:"replace",value:function(t){return t=Cr(t),this.node.parentNode.replaceChild(t.node,this.node),t}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1?arguments[1]:void 0,i=Math.pow(10,t),n=this.attr();e||(e=Object.keys(n));var r={};return e.forEach((function(t){r[t]=Math.round(n[t]*i)/i})),this.attr(r),this}},{key:"toString",value:function(){return this.id()}},{key:"svg",value:function(t,e){var i,n,r;if(!1===t&&(e=!1,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();var o=this;if(null!=t){if(o=Pr(o.node.cloneNode(!0)),e){var s=t(o);if(o=s||o,!1===s)return""}o.each((function(){var e=t(this),i=e||this;!1===e?this.remove():e&&this!==i&&this.replace(i)}),!0)}return e?o.node.outerHTML:o.node.innerHTML}for(e=null!=e&&e,i=wr.document.createElementNS(gr,"svg"),r=wr.document.createDocumentFragment(),i.innerHTML=t,n=i.children.length;n--;)r.appendChild(i.firstElementChild);var a=this.parent();return e?this.replace(r)&&a:this.add(r)}},{key:"words",value:function(t){return this.node.textContent=t,this}},{key:"writeDataToDom",value:function(){return this.each((function(){this.writeDataToDom()})),this}}]),e}(Is);Lr(Fs,{attr:function(t,e,i){var n=this;if(null==t){t={},e=this.node.attributes;var r=!0,o=!1,s=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;t[l.nodeName]=ro.test(l.nodeValue)?parseFloat(l.nodeValue):l.nodeValue}}catch(t){o=!0,s=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw s}}return t}if(t instanceof Array)return t.reduce((function(t,e){return t[e]=n.attr(e),t}),{});if("object"===ue(t)&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?Ms[t]:ro.test(e)?parseFloat(e):e;"number"==typeof(e=Ds.reduce((function(e,i){return i(t,e,n)}),e))?e=new As(e):Zo.isColor(e)?e=new Zo(e):e.constructor===Array&&(e=new Ls(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return Ps(t,this.node)},findOne:function(t){return Pr(this.node.querySelector(t))}}),Rr(Fs,"Dom");var Ns=function(t){function e(t,i){var n;return xr(this,e),(n=$o(this,ts(e).call(this,t,i))).dom={},n.node.instance=Qo(n),t.hasAttribute("svgjs:data")&&n.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),n}return ns(e,t),Wo(e,[{key:"center",value:function(t,e){return this.cx(t).cy(e)}},{key:"cx",value:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}},{key:"cy",value:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}},{key:"defs",value:function(){return this.root().defs()}},{key:"dmove",value:function(t,e){return this.dx(t).dy(e)}},{key:"dx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x(new As(t).plus(this.x()))}},{key:"dy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.y(new As(t).plus(this.y()))}},{key:"root",value:function(){var t=this.parent(Or[Tr]);return t&&t.root()}},{key:"getEventHolder",value:function(){return this}},{key:"height",value:function(t){return this.attr("height",t)}},{key:"inside",value:function(t,e){var i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height}},{key:"move",value:function(t,e){return this.x(t).y(e)}},{key:"parents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr.document;t=Cr(t);for(var e=new Cs,i=this;(i=i.parent())&&i.node!==t.node&&i.node!==wr.document;)e.push(i);return e}},{key:"reference",value:function(t){if(!(t=this.attr(t)))return null;var e=t.match(Qr);return e?Cr(e[1]):null}},{key:"setData",value:function(t){return this.dom=t,this}},{key:"size",value:function(t,e){var i=vr(this,t,e);return this.width(new As(i.width)).height(new As(i.height))}},{key:"width",value:function(t){return this.attr("width",t)}},{key:"writeDataToDom",value:function(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),es(ts(e.prototype),"writeDataToDom",this).call(this)}},{key:"x",value:function(t){return this.attr("x",t)}},{key:"y",value:function(t){return this.attr("y",t)}}]),e}(Fs);Lr(Ns,{bbox:function(){return new Os(Ts.call(this,(function(t){return t.getBBox()}),(function(t){try{var e=t.clone().addTo(xs().svg).show(),i=e.node.getBBox();return e.remove(),i}catch(e){throw new Error('Getting bbox of element "'+t.node.nodeName+'" is not possible. '+e.toString())}})))},rbox:function(t){var e=new Os(Ts.call(this,(function(t){return t.getBoundingClientRect()}),(function(t){throw new Error('Getting rbox of element "'+t.node.nodeName+'" is not possible')})));return t?e.transform(t.screenCTM().inverse()):e.addOffset()},point:function(t,e){return new _s(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new ws(this.node.getCTM())},screenCTM:function(){if("function"==typeof this.isRoot&&!this.isRoot()){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new ws(e)}return new ws(this.node.getScreenCTM())}}),Rr(Ns,"Element");var Gs={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach((function(t){var e,i={};i[t]=function(i){if(void 0===i)return this.attr(t);if("string"==typeof i||i instanceof Zo||Zo.isRgb(i)||i instanceof Ns)this.attr(t,i);else for(e=Gs[t].length-1;e>=0;e--)null!=i[Gs[t][e]]&&this.attr(Gs.prefix(t,Gs[t][e]),i[Gs[t][e]]);return this},En(["Element","Runner"],i)})),En(["Element","Runner"],{matrix:function(t,e,i,n,r,o){return null==t?new ws(this):this.attr("transform",new ws(t,e,i,n,r,o))},rotate:function(t,e,i){return this.transform({rotate:t,ox:e,oy:i},!0)},skew:function(t,e,i,n){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:i},!0):this.transform({skew:[t,e],ox:i,oy:n},!0)},shear:function(t,e,i){return this.transform({shear:t,ox:e,oy:i},!0)},scale:function(t,e,i,n){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:i},!0):this.transform({scale:[t,e],ox:i,oy:n},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t,e){var i="string"==typeof t?t:(isFinite(t),"both"),n="both"===t&&isFinite(e)?[e,e]:"x"===t?[e,0]:"y"===t?[0,e]:isFinite(t)?[t,t]:[0,0];return this.transform({flip:i,origin:n},!0)},opacity:function(t){return this.attr("opacity",t)}}),En("radius",{radius:function(t,e){var i=(this._element||this).type;return"radialGradient"===i||"radialGradient"===i?this.attr("r",new As(t)):this.rx(t).ry(null==e?t:e)}}),En("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new _s(this.node.getPointAtLength(t))}}),En(["Element","Runner"],{font:function(t,e){if("object"===ue(t)){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}}),En("Text",{ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)}}),En("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce((function(t,e){return t[e]=function(t){return null===t?To(this,e):Oo(this,e,t),this},t}),{}));var Bs=[].reverse,Ys=[1,2];Lt({target:"Array",proto:!0,forced:String(Ys)===String(Ys.reverse())},{reverse:function(){return At(this)&&(this.length=this.length),Bs.call(this)}}),Lt({target:"Object",stat:!0,forced:!f,sham:!f},{defineProperties:he}),Lt({target:"Object",stat:!0,forced:!f,sham:!f},{defineProperty:A.f});var Xs=j.f,zs=h((function(){Xs(1)}));function Ws(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function qs(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Vs(t){return this.attr("rx",t)}function Hs(t){return this.attr("ry",t)}function Ks(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function Us(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function Zs(t){return null==t?this.attr("cx"):this.attr("cx",t)}function Js(t){return null==t?this.attr("cy"):this.attr("cy",t)}function Qs(t){return null==t?2*this.rx():this.rx(new As(t).divide(2))}function $s(t){return null==t?2*this.ry():this.ry(new As(t).divide(2))}Lt({target:"Object",stat:!0,forced:!f||zs,sham:!f},{getOwnPropertyDescriptor:function(t,e){return Xs(x(t),e)}}),Lt({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(t){for(var e,i,n=x(t),r=j.f,o=Ot(n),s={},a=0;o.length>a;)void 0!==(i=r(n,e=o[a++]))&&Dt(s,e,i);return s}}),En("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split($r).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(so).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(ws.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new ws)},toParent:function(t){if(this===t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toRoot:function(){return this.toParent(this.root())},transform:function(t,e){if(null==t||"string"==typeof t){var i=new ws(this).decompose();return null==t?i:i[t]}ws.isMatrixLike(t)||(t=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qs(i,!0).forEach((function(e){Ws(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qs(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t,{origin:yr(t,this)}));var n=new ws(!0===e?this:e||!1).transform(t);return this.attr("transform",n)}});var ta={__proto__:null,rx:Vs,ry:Hs,x:Ks,y:Us,cx:Zs,cy:Js,width:Qs,height:$s},ea=function(t){function e(){return xr(this,e),$o(this,ts(e).apply(this,arguments))}return ns(e,t),e}(Ns);Rr(ea,"Shape");var ia=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("circle",t),t))}return ns(e,t),Wo(e,[{key:"radius",value:function(t){return this.attr("r",t)}},{key:"rx",value:function(t){return this.attr("r",t)}},{key:"ry",value:function(t){return this.rx(t)}},{key:"size",value:function(t){return this.radius(new As(t).divide(2))}}]),e}(ea);Lr(ia,{x:Ks,y:Us,cx:Zs,cy:Js,width:Qs,height:$s}),En({Container:{circle:Ar((function(t){return this.put(new ia).size(t).move(0,0)}))}}),Rr(ia,"Circle");var na=function(t){function e(){return xr(this,e),$o(this,ts(e).apply(this,arguments))}return ns(e,t),Wo(e,[{key:"flatten",value:function(t){return this.each((function(){return this instanceof e?this.flatten(t).ungroup(t):this.toParent(t)})),this.node.firstElementChild||this.remove(),this}},{key:"ungroup",value:function(t){return t=t||this.parent(),this.each((function(){return this.toParent(t)})),this.remove(),this}}]),e}(Ns);Rr(na,"Container");var ra=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("defs",t),t))}return ns(e,t),Wo(e,[{key:"flatten",value:function(){return this}},{key:"ungroup",value:function(){return this}}]),e}(na);Rr(ra,"Defs");var oa=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("ellipse",t),t))}return ns(e,t),Wo(e,[{key:"size",value:function(t,e){var i=vr(this,t,e);return this.rx(new As(i.width).divide(2)).ry(new As(i.height).divide(2))}}]),e}(ea);Lr(oa,ta),En("Container",{ellipse:Ar((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.put(new oa).size(t,e).move(0,0)}))}),Rr(oa,"Ellipse");var sa=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("stop",t),t))}return ns(e,t),Wo(e,[{key:"update",value:function(t){return("number"==typeof t||t instanceof As)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new As(t.offset)),this}}]),e}(Ns);function aa(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new As(t),fy:new As(e)}):this.attr({x1:new As(t),y1:new As(e)})}function ua(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new As(t),cy:new As(e)}):this.attr({x2:new As(t),y2:new As(e)})}Rr(sa,"Stop");var la={__proto__:null,from:aa,to:ua},ca=function(t){function e(t,i){return xr(this,e),$o(this,ts(e).call(this,Er(t+"Gradient","string"==typeof t?null:t),i))}return ns(e,t),Wo(e,[{key:"stop",value:function(t,e,i){return this.put(new sa).update(t,e,i)}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"url",value:function(){return"url(#"+this.id()+")"}},{key:"toString",value:function(){return this.url()}},{key:"attr",value:function(t,i,n){return"transform"===t&&(t="gradientTransform"),es(ts(e.prototype),"attr",this).call(this,t,i,n)}},{key:"targets",value:function(){return Ps('svg [fill*="'+this.id()+'"]')}},{key:"bbox",value:function(){return new Os}}]),e}(na);Lr(ca,la),En({Container:{gradient:Ar((function(t,e){return this.defs().gradient(t,e)}))},Defs:{gradient:Ar((function(t,e){return this.put(new ca(t)).update(e)}))}}),Rr(ca,"Gradient");var ha=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("pattern",t),t))}return ns(e,t),Wo(e,[{key:"url",value:function(){return"url(#"+this.id()+")"}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"toString",value:function(){return this.url()}},{key:"attr",value:function(t,i,n){return"transform"===t&&(t="patternTransform"),es(ts(e.prototype),"attr",this).call(this,t,i,n)}},{key:"targets",value:function(){return Ps('svg [fill*="'+this.id()+'"]')}},{key:"bbox",value:function(){return new Os}}]),e}(na);En({Container:{pattern:function(){var t;return(t=this.defs()).pattern.apply(t,arguments)}},Defs:{pattern:Ar((function(t,e,i){return this.put(new ha).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),Rr(ha,"Pattern");var fa,pa=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("image",t),t))}return ns(e,t),Wo(e,[{key:"load",value:function(t,e){if(!t)return this;var i=new wr.window.Image;return Oo(i,"load",(function(t){var n=this.parent(ha);0===this.width()&&0===this.height()&&this.size(i.width,i.height),n instanceof ha&&0===n.width()&&0===n.height()&&n.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),Oo(i,"load error",(function(){To(i)})),this.attr("href",i.src=t,_r)}}]),e}(ea);fa=function(t,e,i){return"fill"!==t&&"stroke"!==t||oo.test(e)&&(e=i.root().defs().image(e)),e instanceof pa&&(e=i.root().defs().pattern(0,0,(function(t){t.add(e)}))),e},Ds.push(fa),En({Container:{image:Ar((function(t,e){return this.put(new pa).size(0,0).load(t,e)}))}}),Rr(pa,"Image");var da=ks("PointArray",Ls);Lr(da,{toString:function(){for(var t=0,e=this.length,i=[];t<e;t++)i.push(this[t].join(","));return i.join(" ")},toLine:function(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,i=this.length,n=[];e<i;e++)n.push([this[e][0]+(this.destination[e][0]-this[e][0])*t,this[e][1]+(this.destination[e][1]-this[e][1])*t]);return new da(n)},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0]],e=[];if(t instanceof Array){if(t[0]instanceof Array)return t}else t=t.trim().split(so).map(parseFloat);t.length%2!=0&&t.pop();for(var i=0,n=t.length;i<n;i+=2)e.push([t[i],t[i+1]]);return e},transform:function(t){for(var e=[],i=0;i<this.length;i++){var n=this[i];e.push([t.a*n[0]+t.c*n[1]+t.e,t.b*n[0]+t.d*n[1]+t.f])}return new da(e)},move:function(t,e){var i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(var n=this.length-1;n>=0;n--)this[n]=[this[n][0]+t,this[n][1]+e];return this},size:function(t,e){var i,n=this.bbox();for(i=this.length-1;i>=0;i--)n.width&&(this[i][0]=(this[i][0]-n.x)*t/n.width+n.x),n.height&&(this[i][1]=(this[i][1]-n.y)*e/n.height+n.y);return this},bbox:function(){var t=-1/0,e=-1/0,i=1/0,n=1/0;return this.forEach((function(r){t=Math.max(r[0],t),e=Math.max(r[1],e),i=Math.min(r[0],i),n=Math.min(r[1],n)})),{x:i,y:n,width:t-i,height:e-n}}});var va={__proto__:null,MorphArray:da,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}},ya=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("line",t),t))}return ns(e,t),Wo(e,[{key:"array",value:function(){return new da([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}},{key:"plot",value:function(t,e,i,n){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:n}:new da(t).toLine(),this.attr(t))}},{key:"move",value:function(t,e){return this.attr(this.array().move(t,e).toLine())}},{key:"size",value:function(t,e){var i=vr(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}}]),e}(ea);Lr(ya,va),En({Container:{line:Ar((function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return ya.prototype.plot.apply(this.put(new ya),null!=e[0]?e:[0,0,0,0])}))}}),Rr(ya,"Line");var ga=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("marker",t),t))}return ns(e,t),Wo(e,[{key:"width",value:function(t){return this.attr("markerWidth",t)}},{key:"height",value:function(t){return this.attr("markerHeight",t)}},{key:"ref",value:function(t,e){return this.attr("refX",t).attr("refY",e)}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"toString",value:function(){return"url(#"+this.id()+")"}}]),e}(na);En({Container:{marker:function(){var t;return(t=this.defs()).marker.apply(t,arguments)}},Defs:{marker:Ar((function(t,e,i){return this.put(new ga).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}))},marker:{marker:function(t,e,i,n){var r=["marker"];return"all"!==t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof ga?arguments[1]:this.defs().marker(e,i,n),this.attr(r,t)}}}),Rr(ga,"Marker");var ma=[].sort,_a=[1,2,3],ba=h((function(){_a.sort(void 0)})),wa=h((function(){_a.sort(null)})),xa=Fr("sort");function Sa(t,e){return function(i){return null==i?this[i]:(this[t]=i,e&&e.call(this),this)}}Lt({target:"Array",proto:!0,forced:ba||!wa||xa},{sort:function(t){return void 0===t?ma.call(le(this)):ma.call(le(this),Se(t))}});var Oa={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,i,n){return function(r){return r<0?t>0?e/t*r:i>0?n/i*r:0:r>1?i<1?(1-n)/(1-i)*r+(n-i)/(1-i):t<1?(1-e)/(1-t)*r+(e-t)/(1-t):1:3*r*Math.pow(1-r,2)*e+3*Math.pow(r,2)*(1-r)*n+Math.pow(r,3)}},steps:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";e=e.split("-").reverse()[0];var i=t;return"none"===e?--i:"both"===e&&++i,function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Math.floor(n*t),s=n*o%1==0;return"start"!==e&&"both"!==e||++o,r&&s&&--o,n>=0&&o<0&&(o=0),n<=1&&o>i&&(o=i),o/i}}},Ta=function(){function t(){xr(this,t)}return Wo(t,[{key:"done",value:function(){return!1}}]),t}(),ka=function(t){function e(t){var i;return xr(this,e),(i=$o(this,ts(e).call(this))).ease=Oa[t||js.ease]||t,i}return ns(e,t),Wo(e,[{key:"step",value:function(t,e,i){return"number"!=typeof t?i<1?t:e:t+(e-t)*this.ease(i)}}]),e}(Ta),Ca=function(t){function e(t){var i;return xr(this,e),(i=$o(this,ts(e).call(this))).stepper=t,i}return ns(e,t),Wo(e,[{key:"step",value:function(t,e,i,n){return this.stepper(t,e,i,n)}},{key:"done",value:function(t){return t.done}}]),e}(Ta);function Ea(){var t=(this._duration||500)/1e3,e=this._overshoot||0,i=Math.PI,n=Math.log(e/100+1e-10),r=-n/Math.sqrt(i*i+n*n),o=3.9/(r*t);this.d=2*r*o,this.k=o*o}Lr(function(t){function e(t,i){var n;return xr(this,e),(n=$o(this,ts(e).call(this))).duration(t||500).overshoot(i||0),n}return ns(e,t),Wo(e,[{key:"step",value:function(t,e,i,n){if("string"==typeof t)return t;if(n.done=i===1/0,i===1/0)return e;if(0===i)return t;i>100&&(i=16),i/=1e3;var r=n.velocity||0,o=-this.d*r-this.k*(t-e),s=t+r*i+o*i*i/2;return n.velocity=r+o*i,n.done=Math.abs(e-s)+Math.abs(r)<.002,n.done?e:s}}]),e}(Ca),{duration:Sa("_duration",Ea),overshoot:Sa("_overshoot",Ea)}),Lr(function(t){function e(t,i,n,r){var o;return xr(this,e),t=null==t?.1:t,i=null==i?.01:i,n=null==n?0:n,r=null==r?1e3:r,(o=$o(this,ts(e).call(this))).p(t).i(i).d(n).windup(r),o}return ns(e,t),Wo(e,[{key:"step",value:function(t,e,i,n){if("string"==typeof t)return t;if(n.done=i===1/0,i===1/0)return e;if(0===i)return t;var r=e-t,o=(n.integral||0)+r*i,s=(r-(n.error||0))/i,a=this.windup;return!1!==a&&(o=Math.max(-a,Math.min(o,a))),n.error=r,n.integral=o,n.done=Math.abs(r)<.001,n.done?e:t+(this.P*r+this.I*o+this.D*s)}}]),e}(Ca),{windup:Sa("windup"),p:Sa("P"),i:Sa("I"),d:Sa("D")});var Pa=ks("PathArray",Ls);function Ia(t,e,i,n){return i+n.replace(ho," .")}for(var Ra={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},ja="mlhvqtcsaz".split(""),Ma=0,La=ja.length;Ma<La;++Ma)Ra[ja[Ma]]=function(t){return function(e,i,n){if("H"===t)e[0]=e[0]+i.x;else if("V"===t)e[0]=e[0]+i.y;else if("A"===t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(var r=0,o=e.length;r<o;++r)e[r]=e[r]+(r%2?i.y:i.x);return Ra[t](e,i,n)}}(ja[Ma].toUpperCase());Lr(Pa,{toString:function(){return function(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e][0],null!=t[e][1]&&(n+=t[e][1],null!=t[e][2]&&(n+=" ",n+=t[e][2],null!=t[e][3]&&(n+=" ",n+=t[e][3],n+=" ",n+=t[e][4],null!=t[e][5]&&(n+=" ",n+=t[e][5],n+=" ",n+=t[e][6],null!=t[e][7]&&(n+=" ",n+=t[e][7])))));return n+" "}(this)},move:function(t,e){var i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(var n,r=this.length-1;r>=0;r--)"M"===(n=this[r][0])||"L"===n||"T"===n?(this[r][1]+=t,this[r][2]+=e):"H"===n?this[r][1]+=t:"V"===n?this[r][1]+=e:"C"===n||"S"===n||"Q"===n?(this[r][1]+=t,this[r][2]+=e,this[r][3]+=t,this[r][4]+=e,"C"===n&&(this[r][5]+=t,this[r][6]+=e)):"A"===n&&(this[r][6]+=t,this[r][7]+=e);return this},size:function(t,e){var i,n,r=this.bbox();for(r.width=0===r.width?1:r.width,r.height=0===r.height?1:r.height,i=this.length-1;i>=0;i--)"M"===(n=this[i][0])||"L"===n||"T"===n?(this[i][1]=(this[i][1]-r.x)*t/r.width+r.x,this[i][2]=(this[i][2]-r.y)*e/r.height+r.y):"H"===n?this[i][1]=(this[i][1]-r.x)*t/r.width+r.x:"V"===n?this[i][1]=(this[i][1]-r.y)*e/r.height+r.y:"C"===n||"S"===n||"Q"===n?(this[i][1]=(this[i][1]-r.x)*t/r.width+r.x,this[i][2]=(this[i][2]-r.y)*e/r.height+r.y,this[i][3]=(this[i][3]-r.x)*t/r.width+r.x,this[i][4]=(this[i][4]-r.y)*e/r.height+r.y,"C"===n&&(this[i][5]=(this[i][5]-r.x)*t/r.width+r.x,this[i][6]=(this[i][6]-r.y)*e/r.height+r.y)):"A"===n&&(this[i][1]=this[i][1]*t/r.width,this[i][2]=this[i][2]*e/r.height,this[i][6]=(this[i][6]-r.x)*t/r.width+r.x,this[i][7]=(this[i][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,i,n;for(t=new Pa(t),n=this.length===t.length,e=0,i=this.length;n&&e<i;e++)n=this[e][0]===t[e][0];return n},morph:function(t){return t=new Pa(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,i,n,r,o=this.destination.value,s=[],a=new Pa;for(e=0,i=this.length;e<i;e++){for(s[e]=[this[e][0]],n=1,r=this[e].length;n<r;n++)s[e][n]=this[e][n]+(o[e][n]-this[e][n])*t;"A"===s[e][0]&&(s[e][4]=+(0!==s[e][4]),s[e][5]=+(0!==s[e][5]))}return a.value=s,a},parse:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[["M",0,0]];if(e instanceof Pa)return e;var i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(co,Ia).replace(uo," $& ").replace(ao,"$1 -").trim().split(so):e.reduce((function(t,e){return[].concat.call(t,e)}),[]);var n=[],r=new _s,o=new _s,s=0,a=e.length;do{lo.test(e[s])?(t=e[s],++s):"M"===t?t="L":"m"===t&&(t="l"),n.push(Ra[t].call(null,e.slice(s,s+=i[t.toUpperCase()]).map(parseFloat),r,o))}while(a>s);return n},bbox:function(){return xs().path.setAttribute("d",this.toString()),xs.nodes.path.getBBox()}});var Aa=function(){function t(e){xr(this,t),this._stepper=e||new ka("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}return Wo(t,[{key:"from",value:function(t){return null==t?this._from:(this._from=this._set(t),this)}},{key:"to",value:function(t){return null==t?this._to:(this._to=this._set(t),this)}},{key:"type",value:function(t){return null==t?this._type:(this._type=t,this)}},{key:"_set",value:function(t){if(!this._type){var e=ue(t);"number"===e?this.type(As):"string"===e?Zo.isColor(t)?this.type(Zo):so.test(t)?this.type(uo.test(t)?Pa:Ls):Ur.test(t)?this.type(As):this.type(Da):Ga.indexOf(t.constructor)>-1?this.type(t.constructor):Array.isArray(t)?this.type(Ls):"object"===e?this.type(Na):this.type(Da)}var i=new this._type(t);return this._type===Zo&&(i=this._to?i[this._to[4]]():this._from?i[this._from[4]]():i),i=i.toArray(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(i.length)).map(Object).map((function(t){return t.done=!0,t})),i}},{key:"stepper",value:function(t){return null==t?this._stepper:(this._stepper=t,this)}},{key:"done",value:function(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}},{key:"at",value:function(t){var e=this;return this._morphObj.fromArray(this._from.map((function(i,n){return e._stepper.step(i,e._to[n],t,e._context[n],e._context)})))}}]),t}(),Da=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return Wo(t,[{key:"init",value:function(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}},{key:"valueOf",value:function(){return this.value}},{key:"toArray",value:function(){return[this.value]}}]),t}(),Fa=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return Wo(t,[{key:"init",value:function(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,t.defaults,e),this}},{key:"toArray",value:function(){var t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}]),t}();Fa.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};var Na=function(){function t(){xr(this,t),this.init.apply(this,arguments)}return Wo(t,[{key:"init",value:function(t){if(this.values=[],!Array.isArray(t)){t=t||{};var e=[];for(var i in t)e.push([i,t[i]]);return e.sort((function(t,e){return t[0]-e[0]})),this.values=e.reduce((function(t,e){return t.concat(e)}),[]),this}this.values=t}},{key:"valueOf",value:function(){for(var t={},e=this.values,i=0,n=e.length;i<n;i+=2)t[e[i]]=e[i+1];return t}},{key:"toArray",value:function(){return this.values}}]),t}(),Ga=[Da,Fa,Na];var Ba=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("path",t),t))}return ns(e,t),Wo(e,[{key:"array",value:function(){return this._array||(this._array=new Pa(this.attr("d")))}},{key:"plot",value:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new Pa(t))}},{key:"clear",value:function(){return delete this._array,this}},{key:"move",value:function(t,e){return this.attr("d",this.array().move(t,e))}},{key:"x",value:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}},{key:"y",value:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}},{key:"size",value:function(t,e){var i=vr(this,t,e);return this.attr("d",this.array().size(i.width,i.height))}},{key:"width",value:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}},{key:"height",value:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},{key:"targets",value:function(){return Ps('svg textpath [href*="'+this.id()+'"]')}}]),e}(ea);Ba.prototype.MorphArray=Pa,En({Container:{path:Ar((function(t){return this.put(new Ba).plot(t||new Pa)}))}}),Rr(Ba,"Path");var Ya={__proto__:null,array:function(){return this._array||(this._array=new da(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new da(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=vr(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}},Xa=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("polygon",t),t))}return ns(e,t),e}(ea);En({Container:{polygon:Ar((function(t){return this.put(new Xa).plot(t||new da)}))}}),Lr(Xa,va),Lr(Xa,Ya),Rr(Xa,"Polygon");var za=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("polyline",t),t))}return ns(e,t),e}(ea);En({Container:{polyline:Ar((function(t){return this.put(new za).plot(t||new da)}))}}),Lr(za,va),Lr(za,Ya),Rr(za,"Polyline");var Wa=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("rect",t),t))}return ns(e,t),e}(ea);Lr(Wa,{rx:Vs,ry:Hs}),En({Container:{rect:Ar((function(t,e){return this.put(new Wa).size(t,e)}))}}),Rr(Wa,"Rect");var qa=Math.max,Va=Math.min;Lt({target:"Array",proto:!0,forced:!Ht("splice")},{splice:function(t,e){var i,n,r,o,s,a,u=le(this),l=ft(u.length),c=vt(t,l),h=arguments.length;if(0===h?i=n=0:1===h?(i=0,n=l-c):(i=h-2,n=Va(qa(ct(e),0),l-c)),l+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(r=ke(u,n),o=0;o<n;o++)(s=c+o)in u&&Dt(r,o,u[s]);if(r.length=n,i<n){for(o=c;o<l-n;o++)a=o+i,(s=o+n)in u?u[a]=u[s]:delete u[a];for(o=l;o>l-n+i;o--)delete u[o-1]}else if(i>n)for(o=l-n;o>c;o--)a=o+i-1,(s=o+n-1)in u?u[a]=u[s]:delete u[a];for(o=0;o<i;o++)u[o+c]=arguments[o+2];return u.length=l-n+i,r}});var Ha=function(){function t(){xr(this,t),this._first=null,this._last=null}return Wo(t,[{key:"push",value:function(t){var e=t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}},{key:"shift",value:function(){var t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}},{key:"first",value:function(){return this._first&&this._first.value}},{key:"last",value:function(){return this._last&&this._last.value}},{key:"remove",value:function(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}}]),t}(),Ka={nextDraw:null,frames:new Ha,timeouts:new Ha,immediates:new Ha,timer:function(){return wr.window.performance||wr.window.Date},transforms:[],frame:function(t){var e=Ka.frames.push({run:t});return null===Ka.nextDraw&&(Ka.nextDraw=wr.window.requestAnimationFrame(Ka._draw)),e},timeout:function(t,e){e=e||0;var i=Ka.timer().now()+e,n=Ka.timeouts.push({run:t,time:i});return null===Ka.nextDraw&&(Ka.nextDraw=wr.window.requestAnimationFrame(Ka._draw)),n},immediate:function(t){var e=Ka.immediates.push(t);return null===Ka.nextDraw&&(Ka.nextDraw=wr.window.requestAnimationFrame(Ka._draw)),e},cancelFrame:function(t){null!=t&&Ka.frames.remove(t)},clearTimeout:function(t){null!=t&&Ka.timeouts.remove(t)},cancelImmediate:function(t){null!=t&&Ka.immediates.remove(t)},_draw:function(t){for(var e=null,i=Ka.timeouts.last();(e=Ka.timeouts.shift())&&(t>=e.time?e.run():Ka.timeouts.push(e),e!==i););for(var n=null,r=Ka.frames.last();n!==r&&(n=Ka.frames.shift());)n.run(t);for(var o=null;o=Ka.immediates.shift();)o();Ka.nextDraw=Ka.timeouts.first()||Ka.frames.first()?wr.window.requestAnimationFrame(Ka._draw):null}},Ua=function(t){var e=t.start,i=t.runner.duration();return{start:e,duration:i,end:e+i,runner:t.runner}},Za=function(){var t=wr.window;return(t.performance||t.Date).now()},Ja=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Za;return xr(this,e),(t=$o(this,ts(e).call(this)))._timeSource=i,t._startTime=0,t._speed=1,t._persist=0,t._nextFrame=null,t._paused=!0,t._runners=[],t._runnerIds=[],t._lastRunnerId=-1,t._time=0,t._lastSourceTime=0,t._lastStepTime=0,t._step=t._stepFn.bind(Qo(t),!1),t._stepImmediate=t._stepFn.bind(Qo(t),!0),t}return ns(e,t),Wo(e,[{key:"schedule",value:function(t,e,i){if(null==t)return this._runners.map(Ua);var n=0,r=this.getEndTime();if(e=e||0,null==i||"last"===i||"after"===i)n=r;else if("absolute"===i||"start"===i)n=e,e=0;else if("now"===i)n=this._time;else{if("relative"!==i)throw new Error('Invalid value for the "when" parameter');var o=this._runners[t.id];o&&(n=o.start+e,e=0)}t.unschedule(),t.timeline(this);var s=t.persist(),a={persist:null===s?this._persist:s,start:n+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(a),this._runners.sort((function(t,e){return t.start-e.start})),this._runnerIds=this._runners.map((function(t){return t.runner.id})),this.updateTime()._continue(),this}},{key:"unschedule",value:function(t){var e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}},{key:"getEndTime",value:function(){var t=this._runners[this._runnerIds.indexOf(this._lastRunnerId)],e=t?t.runner.duration():0;return(t?t.start:0)+e}},{key:"getEndTimeOfTimeline",value:function(){for(var t=0,e=0;e<this._runners.length;e++){var i=this._runners[e],n=i?i.runner.duration():0,r=(i?i.start:0)+n;r>t&&(t=r)}return t}},{key:"updateTime",value:function(){return this.active()||(this._lastSourceTime=this._timeSource()),this}},{key:"play",value:function(){return this._paused=!1,this.updateTime()._continue()}},{key:"pause",value:function(){return this._paused=!0,this._continue()}},{key:"stop",value:function(){return this.time(0),this.pause()}},{key:"finish",value:function(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}},{key:"speed",value:function(t){return null==t?this._speed:(this._speed=t,this)}},{key:"reverse",value:function(t){var e=this.speed();if(null==t)return this.speed(-e);var i=Math.abs(e);return this.speed(t?i:-i)}},{key:"seek",value:function(t){return this.time(this._time+t)}},{key:"time",value:function(t){return null==t?this._time:(this._time=t,this._continue(!0))}},{key:"persist",value:function(t){return null==t?this._persist:(this._persist=t,this)}},{key:"source",value:function(t){return null==t?this._timeSource:(this._timeSource=t,this)}},{key:"_stepFn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._timeSource(),i=e-this._lastSourceTime;t&&(i=0);var n=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=n,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(var r=this._runners.length;r--;){var o=this._runners[r],s=o.runner,a=this._time-o.start;a<=0&&s.reset()}for(var u=!1,l=0,c=this._runners.length;l<c;l++){var h=this._runners[l],f=h.runner,p=n,d=this._time-h.start;if(d<=0)u=!0;else if(d<p&&(p=d),f.active()){var v=f.step(p).done;if(v){if(!0!==h.persist){var y=f.duration()-f.time()+this._time;y+h.persist<this._time&&(f.unschedule(),--l,--c)}}else u=!0}}return u&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}},{key:"_continue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ka.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=Ka.frame(this._step)),this)}},{key:"active",value:function(){return!!this._nextFrame}}]),e}(Is);function Qa(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function $a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Qa(i,!0).forEach((function(e){Ws(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Qa(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}En({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new Ja,this._timeline):(this._timeline=t,this)}}});var tu=function(t){function e(t){var i;return xr(this,e),(i=$o(this,ts(e).call(this))).id=e.id++,t="function"==typeof(t=null==t?js.duration:t)?new Ca(t):t,i._element=null,i._timeline=null,i.done=!1,i._queue=[],i._duration="number"==typeof t&&t,i._isDeclarative=t instanceof Ca,i._stepper=i._isDeclarative?t:new ka,i._history={},i.enabled=!0,i._time=0,i._lastTime=0,i._reseted=!0,i.transforms=new ws,i.transformId=1,i._haveReversed=!1,i._reverse=!1,i._loopsDone=0,i._swing=!1,i._wait=0,i._times=1,i._frameId=null,i._persist=!!i._isDeclarative||null,i}return ns(e,t),Wo(e,[{key:"element",value:function(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}},{key:"timeline",value:function(t){return void 0===t?this._timeline:(this._timeline=t,this)}},{key:"animate",value:function(t,i,n){var r=e.sanitise(t,i,n),o=new e(r.duration);return this._timeline&&o.timeline(this._timeline),this._element&&o.element(this._element),o.loop(r).schedule(r.delay,r.when)}},{key:"schedule",value:function(t,e,i){if(t instanceof Ja||(i=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,i),this}},{key:"unschedule",value:function(){var t=this.timeline();return t&&t.unschedule(this),this}},{key:"loop",value:function(t,e,i){return"object"===ue(t)&&(e=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=i||0,!0===this._times&&(this._times=1/0),this}},{key:"delay",value:function(t){return this.animate(0,t)}},{key:"queue",value:function(t,e,i,n){return this._queue.push({initialiser:t||Rs,runner:e||Rs,retarget:i,isTransform:n,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}},{key:"during",value:function(t){return this.queue(null,t)}},{key:"after",value:function(t){return this.on("finished",t)}},{key:"time",value:function(t){if(null==t)return this._time;var e=t-this._time;return this.step(e),this}},{key:"duration",value:function(){return this._times*(this._wait+this._duration)-this._wait}},{key:"loops",value:function(t){var e=this._duration+this._wait;if(null==t){var i=Math.floor(this._time/e),n=(this._time-i*e)/this._duration;return Math.min(i+n,this._times)}var r=t%1,o=e*Math.floor(t)+this._duration*r;return this.time(o)}},{key:"persist",value:function(t){return null==t?this._persist:(this._persist=t,this)}},{key:"position",value:function(t){var e,i=this._time,n=this._duration,r=this._wait,o=this._times,s=this._swing,a=this._reverse;if(null==t){var u=function(t){var e=s*Math.floor(t%(2*(r+n))/(r+n)),i=e&&!a||!e&&a,o=Math.pow(-1,i)*(t%(r+n))/n+i;return Math.max(Math.min(o,1),0)},l=o*(r+n)-r;return e=i<=0?Math.round(u(1e-5)):i<l?u(i):Math.round(u(l-1e-5)),e}var c=Math.floor(this.loops()),h=s&&c%2==0;return e=c+(h&&!a||a&&h?t:1-t),this.loops(e)}},{key:"progress",value:function(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}},{key:"step",value:function(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;var e=this.position(),i=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;var n=this.duration(),r=this._lastTime<=0&&this._time>0,o=this._lastTime<n&&this._time>=n;this._lastTime=this._time,r&&this.fire("start",this);var s=this._isDeclarative;if(this.done=!s&&!o&&this._time>=n,this._reseted=!1,i||s){this._initialise(i),this.transforms=new ws;var a=this._run(s?t:e);this.fire("step",this)}return this.done=this.done||a&&s,o&&this.fire("finished",this),this}},{key:"reset",value:function(){return this._reseted||(this.time(0),this._reseted=!0),this}},{key:"finish",value:function(){return this.step(1/0)}},{key:"reverse",value:function(t){return this._reverse=null==t?!this._reverse:t,this}},{key:"ease",value:function(t){return this._stepper=new ka(t),this}},{key:"active",value:function(t){return null==t?this.enabled:(this.enabled=t,this)}},{key:"_rememberMorpher",value:function(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){var i=this.timeline();i&&i.play()}}},{key:"_tryRetarget",value:function(t,e,i){if(this._history[t]){if(!this._history[t].caller.initialised){var n=this._queue.indexOf(this._history[t].caller);return this._queue.splice(n,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget(e,i):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;var r=this.timeline();return r&&r.play(),!0}return!1}},{key:"_initialise",value:function(t){if(t||this._isDeclarative)for(var e=0,i=this._queue.length;e<i;++e){var n=this._queue[e],r=this._isDeclarative||!n.initialised&&t;t=!n.finished,r&&t&&(n.initialiser.call(this),n.initialised=!0)}}},{key:"_run",value:function(t){for(var e=!0,i=0,n=this._queue.length;i<n;++i){var r=this._queue[i],o=r.runner.call(this,t);r.finished=r.finished||!0===o,e=e&&r.finished}return e}},{key:"addTransform",value:function(t,e){return this.transforms.lmultiplyO(t),this}},{key:"clearTransform",value:function(){return this.transforms=new ws,this}},{key:"clearTransformsFromQueue",value:function(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((function(t){return!t.isTransform})))}}],[{key:"sanitise",value:function(t,e,i){var n=1,r=!1,o=0;return e=e||js.delay,i=i||"last","object"!==ue(t=t||js.duration)||t instanceof Ta||(e=t.delay||e,i=t.when||i,r=t.swing||r,n=t.times||n,o=t.wait||o,t=t.duration||js.duration),{duration:t,delay:e,swing:r,times:n,wait:o,when:i}}}]),e}(Is);tu.id=0;var eu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ws,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];xr(this,t),this.transforms=e,this.id=i,this.done=n}return Wo(t,[{key:"clearTransformsFromQueue",value:function(){}}]),t}();Lr([tu,eu],{mergeWith:function(t){return new eu(t.transforms.lmultiply(this.transforms),t.id)}});var iu=function(t,e){return t.lmultiplyO(e)},nu=function(t){return t.transforms};function ru(){var t=this._transformationRunners.runners.map(nu).reduce(iu,new ws);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}var ou=function(){function t(){xr(this,t),this.runners=[],this.ids=[]}return Wo(t,[{key:"add",value:function(t){if(!this.runners.includes(t)){var e=t.id+1;return this.runners.push(t),this.ids.push(e),this}}},{key:"getByID",value:function(t){return this.runners[this.ids.indexOf(t+1)]}},{key:"remove",value:function(t){var e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}},{key:"merge",value:function(){var t=this,e=null;return this.runners.forEach((function(i,n){e&&i.done&&e.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))&&(t.remove(i.id),t.edit(e.id,i.mergeWith(e))),e=i})),this}},{key:"edit",value:function(t,e){var i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,e),this}},{key:"length",value:function(){return this.ids.length}},{key:"clearBefore",value:function(t){var e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new eu).forEach((function(t){return t.clearTransformsFromQueue()})),this}}]),t}();En({Element:{animate:function(t,e,i){var n=tu.sanitise(t,e,i),r=this.timeline();return new tu(n.duration).loop(n).element(this).timeline(r.play()).schedule(n.delay,n.when)},delay:function(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore:function(t){this._transformationRunners.clearBefore(t.id)},_currentTransform:function(t){return this._transformationRunners.runners.filter((function(e){return e.id<=t.id})).map(nu).reduce(iu,new ws)},_addRunner:function(t){this._transformationRunners.add(t),Ka.cancelImmediate(this._frameId),this._frameId=Ka.immediate(ru.bind(this))},_prepareRunner:function(){null==this._frameId&&(this._transformationRunners=(new ou).add(new eu(new ws(this))))}}}),Lr(tu,{attr:function(t,e){return this.styleAttr("attr",t,e)},css:function(t,e){return this.styleAttr("css",t,e)},styleAttr:function(t,e,i){if("object"===ue(e)){for(var n in e)this.styleAttr(t,n,e[n]);return this}var r=new Aa(this._stepper).to(i);return this.queue((function(){r=r.from(this.element()[t](e))}),(function(i){return this.element()[t](e,r.at(i)),r.done()})),this},zoom:function(t,e){if(this._tryRetarget("zoom",ua,e))return this;var i=new Aa(this._stepper).to(new As(t));return this.queue((function(){i=i.from(this.element().zoom())}),(function(t){return this.element().zoom(i.at(t),e),i.done()}),(function(t,n){e=n,i.to(t)})),this._rememberMorpher("zoom",i),this},transform:function(t,e,i){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;var n=ws.isMatrixLike(t);i=null!=t.affine?t.affine:null!=i?i:!n;var r,o,s,a,u,l=new Aa(this._stepper).type(i?Fa:ws);return this.queue((function(){o=o||this.element(),r=r||yr(t,o),u=new ws(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(c){e||this.clearTransform();var h=new _s(r).transform(o._currentTransform(this)),f=h.x,p=h.y,d=new ws($a({},t,{origin:[f,p]})),v=this._isDeclarative&&s?s:u;if(i){d=d.decompose(f,p),v=v.decompose(f,p);var y=d.rotate,g=v.rotate,m=[y-360,y,y+360],_=m.map((function(t){return Math.abs(t-g)})),b=Math.min.apply(Math,Tn(_)),w=_.indexOf(b);d.rotate=m[w]}e&&(n||(d.rotate=t.rotate||0),this._isDeclarative&&a&&(v.rotate=a)),l.from(v),l.to(d);var x=l.at(c);return a=x.rotate,s=new ws(x),this.addTransform(s),o._addRunner(this),l.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(r=yr(t,o)),t=$a({},e,{origin:r})}),!0),this._isDeclarative&&this._rememberMorpher("transform",l),this},x:function(t,e){return this._queueNumber("x",t)},y:function(t){return this._queueNumber("y",t)},dx:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._queueNumberDelta("x",t)},dy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._queueNumberDelta("y",t)},dmove:function(t,e){return this.dx(t).dy(e)},_queueNumberDelta:function(t,e){if(e=new As(e),this._tryRetarget(t,e))return this;var i=new Aa(this._stepper).to(e),n=null;return this.queue((function(){n=this.element()[t](),i.from(n),i.to(n+e)}),(function(e){return this.element()[t](i.at(e)),i.done()}),(function(t){i.to(n+new As(t))})),this._rememberMorpher(t,i),this},_queueObject:function(t,e){if(this._tryRetarget(t,e))return this;var i=new Aa(this._stepper).to(e);return this.queue((function(){i.from(this.element()[t]())}),(function(e){return this.element()[t](i.at(e)),i.done()})),this._rememberMorpher(t,i),this},_queueNumber:function(t,e){return this._queueObject(t,new As(e))},cx:function(t){return this._queueNumber("cx",t)},cy:function(t){return this._queueNumber("cy",t)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var i;return t&&e||(i=this._element.bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.width(t).height(e)},width:function(t){return this._queueNumber("width",t)},height:function(t){return this._queueNumber("height",t)},plot:function(t,e,i,n){if(4===arguments.length)return this.plot([t,e,i,n]);if(this._tryRetarget("plot",t))return this;var r=new Aa(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){r.from(this._element.array())}),(function(t){return this._element.plot(r.at(t)),r.done()})),this._rememberMorpher("plot",r),this},leading:function(t){return this._queueNumber("leading",t)},viewbox:function(t,e,i,n){return this._queueObject("viewbox",new Os(t,e,i,n))},update:function(t){return"object"!==ue(t)?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),Lr(tu,{rx:Vs,ry:Hs,from:aa,to:ua}),Rr(tu,"Runner");var su=function(t){function e(t){var i;return xr(this,e),(i=$o(this,ts(e).call(this,Er("svg",t),t))).namespace(),i}return ns(e,t),Wo(e,[{key:"isRoot",value:function(){return!(this.node.parentNode&&this.node.parentNode instanceof wr.window.SVGElement&&"#document"!==this.node.parentNode.nodeName)}},{key:"root",value:function(){return this.isRoot()?this:es(ts(e.prototype),"root",this).call(this)}},{key:"namespace",value:function(){return this.isRoot()?this.attr({xmlns:gr,version:"1.1"}).attr("xmlns:xlink",_r,mr).attr("xmlns:svgjs",br,mr):this.root().namespace()}},{key:"defs",value:function(){return this.isRoot()?Pr(this.node.querySelector("defs"))||this.put(new ra):this.root().defs()}},{key:"parent",value:function(t){return this.isRoot()?"#document"===this.node.parentNode.nodeName?null:Pr(this.node.parentNode):es(ts(e.prototype),"parent",this).call(this,t)}},{key:"clear",value:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this}}]),e}(na);En({Container:{nested:Ar((function(){return this.put(new su)}))}}),Rr(su,"Svg",!0);var au=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("symbol",t),t))}return ns(e,t),e}(na);En({Container:{symbol:Ar((function(){return this.put(new au)}))}}),Rr(au,"Symbol");var uu={__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(wr.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()}},lu=function(t){function e(t){var i;return xr(this,e),(i=$o(this,ts(e).call(this,Er("text",t),t))).dom.leading=new As(1.3),i._rebuild=!0,i._build=!1,i}return ns(e,t),Wo(e,[{key:"x",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)}},{key:"y",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)}},{key:"move",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox();return this.x(t,i).y(e,i)}},{key:"cx",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)}},{key:"cy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)}},{key:"center",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox();return this.cx(t,i).cy(e,i)}},{key:"text",value:function(t){if(void 0===t){var e=this.node.childNodes,i=0;t="";for(var n=0,r=e.length;n<r;++n)"textPath"!==e[n].nodeName?(n!==i&&3!==e[n].nodeType&&!0===Pr(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent):0===n&&(i=1);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(var o=0,s=(t=t.split("\n")).length;o<s;o++)this.tspan(t[o]).newLine();return this.build(!1).rebuild()}},{key:"leading",value:function(t){return null==t?this.dom.leading:(this.dom.leading=new As(t),this.rebuild())}},{key:"rebuild",value:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,n=this.dom.leading;this.each((function(){var t=wr.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=n*new As(t);this.dom.newLined&&(this.attr("x",e.attr("x")),"\n"===this.text()?i+=r:(this.attr("dy",r+i),i=0))})),this.fire("rebuild")}return this}},{key:"build",value:function(t){return this._build=!!t,this}},{key:"setData",value:function(t){return this.dom=t,this.dom.leading=new As(t.leading||1.3),this}}]),e}(ea);Lr(lu,uu),En({Container:{text:Ar((function(t){return this.put(new lu).text(t)})),plain:Ar((function(t){return this.put(new lu).plain(t)}))}}),Rr(lu,"Text");var cu=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("tspan",t),t))}return ns(e,t),Wo(e,[{key:"text",value:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)}},{key:"dx",value:function(t){return this.attr("dx",t)}},{key:"dy",value:function(t){return this.attr("dy",t)}},{key:"x",value:function(t){return this.attr("x",t)}},{key:"y",value:function(t){return this.attr("x",t)}},{key:"move",value:function(t,e){return this.x(t).y(e)}},{key:"newLine",value:function(){var t=this.parent(lu);this.dom.newLined=!0;var e=wr.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=t.dom.leading*new As(e);return this.dy(i).attr("x",t.x())}}]),e}(lu);Lr(cu,uu),En({Tspan:{tspan:Ar((function(t){var e=new cu;return this._build||this.clear(),this.node.appendChild(e.node),e.text(t)}))}}),Rr(cu,"Tspan");var hu=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("clipPath",t),t))}return ns(e,t),Wo(e,[{key:"remove",value:function(){return this.targets().forEach((function(t){t.unclip()})),es(ts(e.prototype),"remove",this).call(this)}},{key:"targets",value:function(){return Ps('svg [clip-path*="'+this.id()+'"]')}}]),e}(na);En({Container:{clip:Ar((function(){return this.defs().put(new hu)}))},Element:{clipWith:function(t){var e=t instanceof hu?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip:function(){return this.attr("clip-path",null)},clipper:function(){return this.reference("clip-path")}}}),Rr(hu,"ClipPath");var fu=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("foreignObject",t),t))}return ns(e,t),e}(Ns);En({Container:{foreignObject:Ar((function(t,e){return this.put(new fu).size(t,e)}))}}),Rr(fu,"ForeignObject");var pu=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("g",t),t))}return ns(e,t),Wo(e,[{key:"x",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.x:this.move(t,e.y,e)}},{key:"y",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.y:this.move(e.x,t,e)}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox(),n=t-i.x,r=e-i.y;return this.dmove(n,r)}},{key:"dx",value:function(t){return this.dmove(t,0)}},{key:"dy",value:function(t){return this.dmove(0,t)}},{key:"dmove",value:function(t,e){return this.children().forEach((function(i,n){var r=i.bbox(),o=new ws(i),s=o.translate(t,e).transform(o.inverse()),a=new _s(r.x,r.y).transform(s);i.move(a.x,a.y)})),this}},{key:"width",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.width:this.size(t,e.height,e)}},{key:"height",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.height:this.size(e.width,t,e)}},{key:"size",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox(),n=vr(this,t,e,i),r=n.width/i.width,o=n.height/i.height;return this.children().forEach((function(t,e){var n=new _s(i).transform(new ws(t).inverse());t.scale(r,o,n.x,n.y)})),this}}]),e}(na);En({Container:{group:Ar((function(){return this.put(new pu)}))}}),Rr(pu,"G");var du=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("a",t),t))}return ns(e,t),Wo(e,[{key:"to",value:function(t){return this.attr("href",t,_r)}},{key:"target",value:function(t){return this.attr("target",t)}}]),e}(na);En({Container:{link:Ar((function(t){return this.put(new du).to(t)}))},Element:{linkTo:function(t){var e=new du;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}}),Rr(du,"A");var vu=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("mask",t),t))}return ns(e,t),Wo(e,[{key:"remove",value:function(){return this.targets().forEach((function(t){t.unmask()})),es(ts(e.prototype),"remove",this).call(this)}},{key:"targets",value:function(){return Ps('svg [mask*="'+this.id()+'"]')}}]),e}(na);function yu(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function gu(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?yu(i,!0).forEach((function(e){Ws(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):yu(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}En({Container:{mask:Ar((function(){return this.defs().put(new vu)}))},Element:{maskWith:function(t){var e=t instanceof vu?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+e.id()+'")')},unmask:function(){return this.attr("mask",null)},masker:function(){return this.reference("mask")}}}),Rr(vu,"Mask");var mu=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("style",t),t))}return ns(e,t),Wo(e,[{key:"addText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.node.textContent+=t,this}},{key:"font",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rule("@font-face",gu({fontFamily:t,src:e},i))}},{key:"rule",value:function(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;var i=t+"{";for(var n in e)i+=pr(n)+":"+e[n]+";";return i+="}"}(t,e))}}]),e}(Ns);En("Dom",{style:Ar((function(t,e){return this.put(new mu).rule(t,e)})),fontface:Ar((function(t,e,i){return this.put(new mu).font(t,e,i)}))}),Rr(mu,"Style");var _u=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("textPath",t),t))}return ns(e,t),Wo(e,[{key:"array",value:function(){var t=this.track();return t?t.array():null}},{key:"plot",value:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this}},{key:"track",value:function(){return this.reference("href")}}]),e}(lu);En({Container:{textPath:Ar((function(t,e){return t instanceof lu||(t=this.text(t)),t.path(e)}))},Text:{path:Ar((function(t){var e,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new _u;if(t instanceof Ba||(t=this.defs().path(t)),n.attr("href","#"+t,_r),i)for(;e=this.node.firstChild;)n.node.appendChild(e);return this.put(n)})),textPath:function(){return this.findOne("textPath")}},Path:{text:Ar((function(t){return t instanceof lu||(t=(new lu).addTo(this.parent()).text(t)),t.path(this)})),targets:function(){return Ps('svg [href*="'+this.id()+'"]')}}}),_u.prototype.MorphArray=Pa,Rr(_u,"TextPath");var bu=function(t){function e(t){return xr(this,e),$o(this,ts(e).call(this,Er("use",t),t))}return ns(e,t),Wo(e,[{key:"element",value:function(t,e){return this.attr("href",(e||"")+"#"+t,_r)}}]),e}(ea);En({Container:{use:Ar((function(t,e){return this.put(new bu).element(t,e)}))}}),Rr(bu,"Use");var wu=Cr;Lr([su,au,pa,ha,ga],Pn("viewbox")),Lr([ya,za,Xa,Ba],Pn("marker")),Lr(lu,Pn("Text")),Lr(Ba,Pn("Path")),Lr(ra,Pn("Defs")),Lr([lu,cu],Pn("Tspan")),Lr([Wa,oa,ia,ca],Pn("radius")),Lr(Is,Pn("EventTarget")),Lr(Fs,Pn("Dom")),Lr(Ns,Pn("Element")),Lr(ea,Pn("Shape")),Lr(na,Pn("Container")),Lr(tu,Pn("Runner")),Cs.extend(Tn(new Set(Cn))),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ga.push.apply(Ga,Tn([].concat(t)))}([As,Zo,Os,ws,Ls,da,Pa]),Lr(Ga,{to:function(t){return(new Aa).type(this.constructor).from(this.valueOf()).to(t)},fromArray:function(t){return this.init(t),this}})}).call(this,i(4))},function(t,e,i){var n,r,o;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){"use strict";function t(t,n,r,o,s){!function t(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,u=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(a-c)/a)*(u-a/2<0?-1:1),f=Math.max(r,Math.floor(n-u*c/a+h)),p=Math.min(o,Math.floor(n+(a-u)*c/a+h));t(i,n,f,p,s)}var d=i[n],v=r,y=o;for(e(i,r,n),s(i[o],d)>0&&e(i,r,o);v<y;){for(e(i,v,y),v++,y--;s(i[v],d)<0;)v++;for(;s(i[y],d)>0;)y--}0===s(i[r],d)?e(i,r,y):(y++,e(i,y,o)),y<=n&&(r=y+1),n<=y&&(o=y-1)}}(t,n,r||0,o||t.length-1,s||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,r){r||(r=d(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<i;o++){var s=t.children[o];a(r,t.leaf?n(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,i,n,r,o){for(var s=[i,n];s.length;)if(!((n=s.pop())-(i=s.pop())<=r)){var a=i+Math.ceil((n-i)/r/2)*r;t(e,a,i,n,o),s.push(i,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!p(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?n(s):s;p(t,a)&&(e.leaf?i.push(s):f(t,a)?this._all(s,i):r.push(s))}e=r.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(p(t,o)){if(e.leaf||f(t,o))return!0;i.push(r)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],i=l.pop(),o=!0),s.leaf){var c=r(t,s.children,e);if(-1!==c)return s.children.splice(c,1),u.push(s),this._condense(u),this}o||s.leaf||!f(s,a)?n?(i++,s=n.children[i],o=!1):s=null:(u.push(s),l.push(i),i=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var r,s=i-e+1,a=this._maxEntries;if(s<=a)return o(r=d(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(r=d([])).leaf=!1,r.height=n;var u=Math.ceil(s/a),l=u*Math.ceil(Math.sqrt(a));v(t,e,i,l,this.compareMinX);for(var c=e;c<=i;c+=l){var h=Math.min(c+l-1,i);v(t,c,h,u,this.compareMinY);for(var f=c;f<=h;f+=u){var p=Math.min(f+u-1,h);r.children.push(this._build(t,f,p,n-1))}}return o(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],l=c(u),h=(f=t,p=u,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);h<o?(o=h,r=l<r?l:r,s=u):h===o&&l<r&&(r=l,s=u)}e=s||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,e,r);for(o.children.push(t),a(o,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var s=this._chooseSplitIndex(i,r,n),a=d(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,r,o,a,u,l,h,f=1/0,p=1/0,d=e;d<=i-e;d++){var v=s(t,0,d,this.toBBox),y=s(t,d,i,this.toBBox),g=(r=v,o=y,a=void 0,u=void 0,l=void 0,h=void 0,a=Math.max(r.minX,o.minX),u=Math.max(r.minY,o.minY),l=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,h-u)),m=c(v)+c(y);g<f?(f=g,n=d,p=m<p?m:p):g===f&&m<p&&(p=m,n=d)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,o=s(t,0,e,r),u=s(t,i-e,i,r),l=h(o)+h(u),c=e;c<i-e;c++){var f=t.children[c];a(o,t.leaf?r(f):f),l+=h(o)}for(var p=i-e-1;p>=e;p--){var d=t.children[p];a(u,t.leaf?r(d):d),l+=h(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n},"object"===s(e)&&void 0!==t?t.exports=o():void 0===(r="function"==typeof(n=o)?n.call(e,i,e,t):n)||(t.exports=r)},function(t,e,i){"use strict";i.r(e),function(t){
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var i="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,n=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(i&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();var r=i&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),n))}};function o(t){return t&&"[object Function]"==={}.toString.call(t)}function s(t,e){if(1!==t.nodeType)return[];var i=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?i[e]:i}function a(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function u(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=s(t),i=e.overflow,n=e.overflowX,r=e.overflowY;return/(auto|scroll|overlay)/.test(i+r+n)?t:u(a(t))}function l(t){return t&&t.referenceNode?t.referenceNode:t}var c=i&&!(!window.MSInputMethodContext||!document.documentMode),h=i&&/MSIE 10/.test(navigator.userAgent);function f(t){return 11===t?c:10===t?h:c||h}function p(t){if(!t)return document.documentElement;for(var e=f(10)?document.body:null,i=t.offsetParent||null;i===e&&t.nextElementSibling;)i=(t=t.nextElementSibling).offsetParent;var n=i&&i.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===s(i,"position")?p(i):i:t?t.ownerDocument.documentElement:document.documentElement}function d(t){return null!==t.parentNode?d(t.parentNode):t}function v(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=i?t:e,r=i?e:t,o=document.createRange();o.setStart(n,0),o.setEnd(r,0);var s,a,u=o.commonAncestorContainer;if(t!==u&&e!==u||n.contains(r))return"BODY"===(a=(s=u).nodeName)||"HTML"!==a&&p(s.firstElementChild)!==s?p(u):u;var l=d(t);return l.host?v(l.host,e):v(t,d(e).host)}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",i="top"===e?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var r=t.ownerDocument.documentElement,o=t.ownerDocument.scrollingElement||r;return o[i]}return t[i]}function g(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=y(e,"top"),r=y(e,"left"),o=i?-1:1;return t.top+=n*o,t.bottom+=n*o,t.left+=r*o,t.right+=r*o,t}function m(t,e){var i="x"===e?"Left":"Top",n="Left"===i?"Right":"Bottom";return parseFloat(t["border"+i+"Width"])+parseFloat(t["border"+n+"Width"])}function _(t,e,i,n){return Math.max(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],f(10)?parseInt(i["offset"+t])+parseInt(n["margin"+("Height"===t?"Top":"Left")])+parseInt(n["margin"+("Height"===t?"Bottom":"Right")]):0)}function b(t){var e=t.body,i=t.documentElement,n=f(10)&&getComputedStyle(i);return{height:_("Height",e,i,n),width:_("Width",e,i,n)}}var w=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},x=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),S=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};function T(t){return O({},t,{right:t.left+t.width,bottom:t.top+t.height})}function k(t){var e={};try{if(f(10)){e=t.getBoundingClientRect();var i=y(t,"top"),n=y(t,"left");e.top+=i,e.left+=n,e.bottom+=i,e.right+=n}else e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?b(t.ownerDocument):{},a=o.width||t.clientWidth||r.width,u=o.height||t.clientHeight||r.height,l=t.offsetWidth-a,c=t.offsetHeight-u;if(l||c){var h=s(t);l-=m(h,"x"),c-=m(h,"y"),r.width-=l,r.height-=c}return T(r)}function C(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=f(10),r="HTML"===e.nodeName,o=k(t),a=k(e),l=u(t),c=s(e),h=parseFloat(c.borderTopWidth),p=parseFloat(c.borderLeftWidth);i&&r&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var d=T({top:o.top-a.top-h,left:o.left-a.left-p,width:o.width,height:o.height});if(d.marginTop=0,d.marginLeft=0,!n&&r){var v=parseFloat(c.marginTop),y=parseFloat(c.marginLeft);d.top-=h-v,d.bottom-=h-v,d.left-=p-y,d.right-=p-y,d.marginTop=v,d.marginLeft=y}return(n&&!i?e.contains(l):e===l&&"BODY"!==l.nodeName)&&(d=g(d,e)),d}function E(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.ownerDocument.documentElement,n=C(t,i),r=Math.max(i.clientWidth,window.innerWidth||0),o=Math.max(i.clientHeight,window.innerHeight||0),s=e?0:y(i),a=e?0:y(i,"left"),u={top:s-n.top+n.marginTop,left:a-n.left+n.marginLeft,width:r,height:o};return T(u)}function P(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===s(t,"position"))return!0;var i=a(t);return!!i&&P(i)}function I(t){if(!t||!t.parentElement||f())return document.documentElement;for(var e=t.parentElement;e&&"none"===s(e,"transform");)e=e.parentElement;return e||document.documentElement}function R(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},s=r?I(t):v(t,l(e));if("viewport"===n)o=E(s,r);else{var c=void 0;"scrollParent"===n?"BODY"===(c=u(a(e))).nodeName&&(c=t.ownerDocument.documentElement):c="window"===n?t.ownerDocument.documentElement:n;var h=C(c,s,r);if("HTML"!==c.nodeName||P(s))o=h;else{var f=b(t.ownerDocument),p=f.height,d=f.width;o.top+=h.top-h.marginTop,o.bottom=p+h.top,o.left+=h.left-h.marginLeft,o.right=d+h.left}}var y="number"==typeof(i=i||0);return o.left+=y?i:i.left||0,o.top+=y?i:i.top||0,o.right-=y?i:i.right||0,o.bottom-=y?i:i.bottom||0,o}function j(t){return t.width*t.height}function M(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=R(i,n,o,r),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},u=Object.keys(a).map((function(t){return O({key:t},a[t],{area:j(a[t])})})).sort((function(t,e){return e.area-t.area})),l=u.filter((function(t){var e=t.width,n=t.height;return e>=i.clientWidth&&n>=i.clientHeight})),c=l.length>0?l[0].key:u[0].key,h=t.split("-")[1];return c+(h?"-"+h:"")}function L(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=n?I(e):v(e,l(i));return C(i,r,n)}function A(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),i=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),n=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+n,height:t.offsetHeight+i}}function D(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function F(t,e,i){i=i.split("-")[0];var n=A(t),r={width:n.width,height:n.height},o=-1!==["right","left"].indexOf(i),s=o?"top":"left",a=o?"left":"top",u=o?"height":"width",l=o?"width":"height";return r[s]=e[s]+e[u]/2-n[u]/2,r[a]=i===a?e[a]-n[l]:e[D(a)],r}function N(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function G(t,e,i){return(void 0===i?t:t.slice(0,function(t,e,i){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===i}));var n=N(t,(function(t){return t[e]===i}));return t.indexOf(n)}(t,"name",i))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=t.function||t.fn;t.enabled&&o(i)&&(e.offsets.popper=T(e.offsets.popper),e.offsets.reference=T(e.offsets.reference),e=i(e,t))})),e}function B(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=M(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=F(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=G(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function Y(t,e){return t.some((function(t){var i=t.name;return t.enabled&&i===e}))}function X(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var r=e[n],o=r?""+r+i:t;if(void 0!==document.body.style[o])return o}return null}function z(){return this.state.isDestroyed=!0,Y(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[X("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function W(t){var e=t.ownerDocument;return e?e.defaultView:window}function q(t,e,i,n){i.updateBound=n,W(t).addEventListener("resize",i.updateBound,{passive:!0});var r=u(t);return function t(e,i,n,r){var o="BODY"===e.nodeName,s=o?e.ownerDocument.defaultView:e;s.addEventListener(i,n,{passive:!0}),o||t(u(s.parentNode),i,n,r),r.push(s)}(r,"scroll",i.updateBound,i.scrollParents),i.scrollElement=r,i.eventsEnabled=!0,i}function V(){this.state.eventsEnabled||(this.state=q(this.reference,this.options,this.state,this.scheduleUpdate))}function H(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,W(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function K(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function U(t,e){Object.keys(e).forEach((function(i){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&K(e[i])&&(n="px"),t.style[i]=e[i]+n}))}var Z=i&&/Firefox/i.test(navigator.userAgent);function J(t,e,i){var n=N(t,(function(t){return t.name===e})),r=!!n&&t.some((function(t){return t.name===i&&t.enabled&&t.order<n.order}));if(!r){var o="`"+e+"`",s="`"+i+"`";console.warn(s+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return r}var Q=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],$=Q.slice(3);function tt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=$.indexOf(t),n=$.slice(i+1).concat($.slice(0,i));return e?n.reverse():n}var et="flip",it="clockwise",nt="counterclockwise";function rt(t,e,i,n){var r=[0,0],o=-1!==["right","left"].indexOf(n),s=t.split(/(\+|\-)/).map((function(t){return t.trim()})),a=s.indexOf(N(s,(function(t){return-1!==t.search(/,|\s/)})));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,l=-1!==a?[s.slice(0,a).concat([s[a].split(u)[0]]),[s[a].split(u)[1]].concat(s.slice(a+1))]:[s];return(l=l.map((function(t,n){var r=(1===n?!o:o)?"height":"width",s=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,i,n){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],s=r[2];if(!o)return t;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=i;break;case"%":case"%r":default:a=n}return T(a)[e]/100*o}if("vh"===s||"vw"===s){return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}(t,r,e,i)}))}))).forEach((function(t,e){t.forEach((function(i,n){K(i)&&(r[e]+=i*("-"===t[n-1]?-1:1))}))})),r}var ot={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,i=e.split("-")[0],n=e.split("-")[1];if(n){var r=t.offsets,o=r.reference,s=r.popper,a=-1!==["bottom","top"].indexOf(i),u=a?"left":"top",l=a?"width":"height",c={start:S({},u,o[u]),end:S({},u,o[u]+o[l]-s[l])};t.offsets.popper=O({},s,c[n])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var i=e.offset,n=t.placement,r=t.offsets,o=r.popper,s=r.reference,a=n.split("-")[0],u=void 0;return u=K(+i)?[+i,0]:rt(i,o,s,a),"left"===a?(o.top+=u[0],o.left-=u[1]):"right"===a?(o.top+=u[0],o.left+=u[1]):"top"===a?(o.left+=u[0],o.top-=u[1]):"bottom"===a&&(o.left+=u[0],o.top+=u[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var i=e.boundariesElement||p(t.instance.popper);t.instance.reference===i&&(i=p(i));var n=X("transform"),r=t.instance.popper.style,o=r.top,s=r.left,a=r[n];r.top="",r.left="",r[n]="";var u=R(t.instance.popper,t.instance.reference,e.padding,i,t.positionFixed);r.top=o,r.left=s,r[n]=a,e.boundaries=u;var l=e.priority,c=t.offsets.popper,h={primary:function(t){var i=c[t];return c[t]<u[t]&&!e.escapeWithReference&&(i=Math.max(c[t],u[t])),S({},t,i)},secondary:function(t){var i="right"===t?"left":"top",n=c[i];return c[t]>u[t]&&!e.escapeWithReference&&(n=Math.min(c[i],u[t]-("right"===t?c.width:c.height))),S({},i,n)}};return l.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";c=O({},c,h[e](t))})),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,i=e.popper,n=e.reference,r=t.placement.split("-")[0],o=Math.floor,s=-1!==["top","bottom"].indexOf(r),a=s?"right":"bottom",u=s?"left":"top",l=s?"width":"height";return i[a]<o(n[u])&&(t.offsets.popper[u]=o(n[u])-i[l]),i[u]>o(n[a])&&(t.offsets.popper[u]=o(n[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var i;if(!J(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if("string"==typeof n){if(!(n=t.instance.popper.querySelector(n)))return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],o=t.offsets,a=o.popper,u=o.reference,l=-1!==["left","right"].indexOf(r),c=l?"height":"width",h=l?"Top":"Left",f=h.toLowerCase(),p=l?"left":"top",d=l?"bottom":"right",v=A(n)[c];u[d]-v<a[f]&&(t.offsets.popper[f]-=a[f]-(u[d]-v)),u[f]+v>a[d]&&(t.offsets.popper[f]+=u[f]+v-a[d]),t.offsets.popper=T(t.offsets.popper);var y=u[f]+u[c]/2-v/2,g=s(t.instance.popper),m=parseFloat(g["margin"+h]),_=parseFloat(g["border"+h+"Width"]),b=y-t.offsets.popper[f]-m-_;return b=Math.max(Math.min(a[c]-v,b),0),t.arrowElement=n,t.offsets.arrow=(S(i={},f,Math.round(b)),S(i,p,""),i),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(Y(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var i=R(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),n=t.placement.split("-")[0],r=D(n),o=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case et:s=[n,r];break;case it:s=tt(n);break;case nt:s=tt(n,!0);break;default:s=e.behavior}return s.forEach((function(a,u){if(n!==a||s.length===u+1)return t;n=t.placement.split("-")[0],r=D(n);var l=t.offsets.popper,c=t.offsets.reference,h=Math.floor,f="left"===n&&h(l.right)>h(c.left)||"right"===n&&h(l.left)<h(c.right)||"top"===n&&h(l.bottom)>h(c.top)||"bottom"===n&&h(l.top)<h(c.bottom),p=h(l.left)<h(i.left),d=h(l.right)>h(i.right),v=h(l.top)<h(i.top),y=h(l.bottom)>h(i.bottom),g="left"===n&&p||"right"===n&&d||"top"===n&&v||"bottom"===n&&y,m=-1!==["top","bottom"].indexOf(n),_=!!e.flipVariations&&(m&&"start"===o&&p||m&&"end"===o&&d||!m&&"start"===o&&v||!m&&"end"===o&&y),b=!!e.flipVariationsByContent&&(m&&"start"===o&&d||m&&"end"===o&&p||!m&&"start"===o&&y||!m&&"end"===o&&v),w=_||b;(f||g||w)&&(t.flipped=!0,(f||g)&&(n=s[u+1]),w&&(o=function(t){return"end"===t?"start":"start"===t?"end":t}(o)),t.placement=n+(o?"-"+o:""),t.offsets.popper=O({},t.offsets.popper,F(t.instance.popper,t.offsets.reference,t.placement)),t=G(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,i=e.split("-")[0],n=t.offsets,r=n.popper,o=n.reference,s=-1!==["left","right"].indexOf(i),a=-1===["top","left"].indexOf(i);return r[s?"left":"top"]=o[i]-(a?r[s?"width":"height"]:0),t.placement=D(e),t.offsets.popper=T(r),t}},hide:{order:800,enabled:!0,fn:function(t){if(!J(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=N(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var i=e.x,n=e.y,r=t.offsets.popper,o=N(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==o?o:e.gpuAcceleration,a=p(t.instance.popper),u=k(a),l={position:r.position},c=function(t,e){var i=t.offsets,n=i.popper,r=i.reference,o=Math.round,s=Math.floor,a=function(t){return t},u=o(r.width),l=o(n.width),c=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),f=e?c||h||u%2==l%2?o:s:a,p=e?o:a;return{left:f(u%2==1&&l%2==1&&!h&&e?n.left-1:n.left),top:p(n.top),bottom:p(n.bottom),right:f(n.right)}}(t,window.devicePixelRatio<2||!Z),h="bottom"===i?"top":"bottom",f="right"===n?"left":"right",d=X("transform"),v=void 0,y=void 0;if(y="bottom"===h?"HTML"===a.nodeName?-a.clientHeight+c.bottom:-u.height+c.bottom:c.top,v="right"===f?"HTML"===a.nodeName?-a.clientWidth+c.right:-u.width+c.right:c.left,s&&d)l[d]="translate3d("+v+"px, "+y+"px, 0)",l[h]=0,l[f]=0,l.willChange="transform";else{var g="bottom"===h?-1:1,m="right"===f?-1:1;l[h]=y*g,l[f]=v*m,l.willChange=h+", "+f}var _={"x-placement":t.placement};return t.attributes=O({},_,t.attributes),t.styles=O({},l,t.styles),t.arrowStyles=O({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,i;return U(t.instance.popper,t.styles),e=t.instance.popper,i=t.attributes,Object.keys(i).forEach((function(t){!1!==i[t]?e.setAttribute(t,i[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&U(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,i,n,r){var o=L(r,e,t,i.positionFixed),s=M(i.placement,o,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",s),U(e,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}}},st=function(){function t(e,i){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=r(this.update.bind(this)),this.options=O({},t.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(O({},t.Defaults.modifiers,s.modifiers)).forEach((function(e){n.options.modifiers[e]=O({},t.Defaults.modifiers[e]||{},s.modifiers?s.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return O({name:t},n.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&o(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)})),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return x(t,[{key:"update",value:function(){return B.call(this)}},{key:"destroy",value:function(){return z.call(this)}},{key:"enableEventListeners",value:function(){return V.call(this)}},{key:"disableEventListeners",value:function(){return H.call(this)}}]),t}();st.Utils=("undefined"!=typeof window?window:t).PopperUtils,st.placements=Q,st.Defaults=ot,e.default=st}.call(this,i(4))},function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}t.exports=n},function(t,e,i){var n,r,o,s;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
  * Bootstrap util.js v4.5.0 (https://getbootstrap.com/)
  * Copyright 2011-2020 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */s=function(t){"use strict";function e(e){var n=this,r=!1;return t(this).one(i.TRANSITION_END,(function(){r=!0})),setTimeout((function(){r||i.triggerTransitionEnd(n)}),e),this}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var i={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var i=t.getAttribute("href");e=i&&"#"!==i?i.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(e){if(!e)return 0;var i=t(e).css("transition-duration"),n=t(e).css("transition-delay"),r=parseFloat(i),o=parseFloat(n);return r||o?(i=i.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(i)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger("transitionend")},supportsTransitionEnd:function(){return Boolean("transitionend")},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r],s=e[r],a=s&&i.isElement(s)?"element":null==(u=s)?""+u:{}.toString.call(u).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(a))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+a+'" but expected type "'+o+'".')}var u},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){var e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?i.findShadowRoot(t.parentNode):null},jQueryDetection:function(){if(void 0===t)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1===e[0]&&9===e[1]&&e[2]<1||e[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};return i.jQueryDetection(),t.fn.emulateTransitionEnd=e,t.event.special[i.TRANSITION_END]={bindType:"transitionend",delegateType:"transitionend",handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}},i},"object"===a(e)&&void 0!==t?t.exports=s(i(0)):(r=[i(0)],void 0===(o="function"==typeof(n=s)?n.apply(e,r):n)||(t.exports=o))},function(t,e,i){var n,r,o,s;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
  * Bootstrap tooltip.js v4.5.0 (https://getbootstrap.com/)
  * Copyright 2011-2020 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */s=function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var u=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],l={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},c=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi,h=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function f(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),r=Object.keys(e),o=[].slice.call(n.body.querySelectorAll("*")),s=function(t,i){var n=o[t],s=n.nodeName.toLowerCase();if(-1===r.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var a=[].slice.call(n.attributes),l=[].concat(e["*"]||[],e[s]||[]);a.forEach((function(t){(function(t,e){var i=t.nodeName.toLowerCase();if(-1!==e.indexOf(i))return-1===u.indexOf(i)||Boolean(t.nodeValue.match(c)||t.nodeValue.match(h));for(var n=e.filter((function(t){return t instanceof RegExp})),r=0,o=n.length;r<o;r++)if(i.match(n[r]))return!0;return!1})(t,l)||n.removeAttribute(t.nodeName)}))},a=0,l=o.length;a<l;a++)s(a);return n.body.innerHTML}var p="tooltip",d=".bs.tooltip",v=t.fn[p],y=new RegExp("(^|\\s)bs-tooltip\\S+","g"),g=["sanitize","whiteList","sanitizeFn"],m={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},_={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},b={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:l,popperConfig:null},w={HIDE:"hide"+d,HIDDEN:"hidden"+d,SHOW:"show"+d,SHOWN:"shown"+d,INSERTED:"inserted"+d,CLICK:"click"+d,FOCUSIN:"focusin"+d,FOCUSOUT:"focusout"+d,MOUSEENTER:"mouseenter"+d,MOUSELEAVE:"mouseleave"+d},x=function(){function r(t,i){if(void 0===e)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(i),this.tip=null,this._setListeners()}var o,u,l,c=r.prototype;return c.enable=function(){this._isEnabled=!0},c.disable=function(){this._isEnabled=!1},c.toggleEnabled=function(){this._isEnabled=!this._isEnabled},c.toggle=function(e){if(this._isEnabled)if(e){var i=this.constructor.DATA_KEY,n=t(e.currentTarget).data(i);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(t(this.getTipElement()).hasClass("show"))return void this._leave(null,this);this._enter(null,this)}},c.dispose=function(){clearTimeout(this._timeout),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},c.show=function(){var n=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var r=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(r);var o=i.findShadowRoot(this.element),s=t.contains(null!==o?o:this.element.ownerDocument.documentElement,this.element);if(r.isDefaultPrevented()||!s)return;var a=this.getTipElement(),u=i.getUID(this.constructor.NAME);a.setAttribute("id",u),this.element.setAttribute("aria-describedby",u),this.setContent(),this.config.animation&&t(a).addClass("fade");var l="function"==typeof this.config.placement?this.config.placement.call(this,a,this.element):this.config.placement,c=this._getAttachment(l);this.addAttachmentClass(c);var h=this._getContainer();t(a).data(this.constructor.DATA_KEY,this),t.contains(this.element.ownerDocument.documentElement,this.tip)||t(a).appendTo(h),t(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new e(this.element,a,this._getPopperConfig(c)),t(a).addClass("show"),"ontouchstart"in document.documentElement&&t(document.body).children().on("mouseover",null,t.noop);var f=function(){n.config.animation&&n._fixTransition();var e=n._hoverState;n._hoverState=null,t(n.element).trigger(n.constructor.Event.SHOWN),"out"===e&&n._leave(null,n)};if(t(this.tip).hasClass("fade")){var p=i.getTransitionDurationFromElement(this.tip);t(this.tip).one(i.TRANSITION_END,f).emulateTransitionEnd(p)}else f()}},c.hide=function(e){var n=this,r=this.getTipElement(),o=t.Event(this.constructor.Event.HIDE),s=function(){"show"!==n._hoverState&&r.parentNode&&r.parentNode.removeChild(r),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),e&&e()};if(t(this.element).trigger(o),!o.isDefaultPrevented()){if(t(r).removeClass("show"),"ontouchstart"in document.documentElement&&t(document.body).children().off("mouseover",null,t.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,t(this.tip).hasClass("fade")){var a=i.getTransitionDurationFromElement(r);t(r).one(i.TRANSITION_END,s).emulateTransitionEnd(a)}else s();this._hoverState=""}},c.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},c.isWithContent=function(){return Boolean(this.getTitle())},c.addAttachmentClass=function(e){t(this.getTipElement()).addClass("bs-tooltip-"+e)},c.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},c.setContent=function(){var e=this.getTipElement();this.setElementContent(t(e.querySelectorAll(".tooltip-inner")),this.getTitle()),t(e).removeClass("fade show")},c.setElementContent=function(e,i){"object"!==a(i)||!i.nodeType&&!i.jquery?this.config.html?(this.config.sanitize&&(i=f(i,this.config.whiteList,this.config.sanitizeFn)),e.html(i)):e.text(i):this.config.html?t(i).parent().is(e)||e.empty().append(i):e.text(t(i).text())},c.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},c._getPopperConfig=function(t){var e=this;return s(s({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}}),this.config.popperConfig)},c._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=s(s({},e.offsets),t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},c._getContainer=function(){return!1===this.config.container?document.body:i.isElement(this.config.container)?t(this.config.container):t(document).find(this.config.container)},c._getAttachment=function(t){return _[t.toUpperCase()]},c._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach((function(i){if("click"===i)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,(function(t){return e.toggle(t)}));else if("manual"!==i){var n="hover"===i?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,r="hover"===i?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(n,e.config.selector,(function(t){return e._enter(t)})).on(r,e.config.selector,(function(t){return e._leave(t)}))}})),this._hideModalHandler=function(){e.element&&e.hide()},t(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=s(s({},this.config),{},{trigger:"manual",selector:""}):this._fixTitle()},c._fixTitle=function(){var t=a(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},c._enter=function(e,i){var n=this.constructor.DATA_KEY;(i=i||t(e.currentTarget).data(n))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),e&&(i._activeTrigger["focusin"===e.type?"focus":"hover"]=!0),t(i.getTipElement()).hasClass("show")||"show"===i._hoverState?i._hoverState="show":(clearTimeout(i._timeout),i._hoverState="show",i.config.delay&&i.config.delay.show?i._timeout=setTimeout((function(){"show"===i._hoverState&&i.show()}),i.config.delay.show):i.show())},c._leave=function(e,i){var n=this.constructor.DATA_KEY;(i=i||t(e.currentTarget).data(n))||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),e&&(i._activeTrigger["focusout"===e.type?"focus":"hover"]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState="out",i.config.delay&&i.config.delay.hide?i._timeout=setTimeout((function(){"out"===i._hoverState&&i.hide()}),i.config.delay.hide):i.hide())},c._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},c._getConfig=function(e){var n=t(this.element).data();return Object.keys(n).forEach((function(t){-1!==g.indexOf(t)&&delete n[t]})),"number"==typeof(e=s(s(s({},this.constructor.Default),n),"object"===a(e)&&e?e:{})).delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),i.typeCheckConfig(p,e,this.constructor.DefaultType),e.sanitize&&(e.template=f(e.template,e.whiteList,e.sanitizeFn)),e},c._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},c._cleanTipClass=function(){var e=t(this.getTipElement()),i=e.attr("class").match(y);null!==i&&i.length&&e.removeClass(i.join(""))},c._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},c._fixTransition=function(){var e=this.getTipElement(),i=this.config.animation;null===e.getAttribute("x-placement")&&(t(e).removeClass("fade"),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)},r._jQueryInterface=function(e){return this.each((function(){var i=t(this).data("bs.tooltip"),n="object"===a(e)&&e;if((i||!/dispose|hide/.test(e))&&(i||(i=new r(this,n),t(this).data("bs.tooltip",i)),"string"==typeof e)){if(void 0===i[e])throw new TypeError('No method named "'+e+'"');i[e]()}}))},o=r,l=[{key:"VERSION",get:function(){return"4.5.0"}},{key:"Default",get:function(){return b}},{key:"NAME",get:function(){return p}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return w}},{key:"EVENT_KEY",get:function(){return d}},{key:"DefaultType",get:function(){return m}}],(u=null)&&n(o.prototype,u),l&&n(o,l),r}();return t.fn[p]=x._jQueryInterface,t.fn[p].Constructor=x,t.fn[p].noConflict=function(){return t.fn[p]=v,x._jQueryInterface},x},"object"===a(e)&&void 0!==t?t.exports=s(i(0),i(3),i(5)):(r=[i(0),i(3),i(5)],void 0===(o="function"==typeof(n=s)?n.apply(e,r):n)||(t.exports=o))},function(t,e,i){"use strict";i.r(e),i.d(e,"calc",(function(){return n})),i.d(e,"events",(function(){return iv})),i.d(e,"RepetitiveRequests",(function(){return B})),i.d(e,"Timeline",(function(){return q})),i.d(e,"timeline",(function(){return nv})),i.d(e,"Synview",(function(){return Oa})),i.d(e,"synview",(function(){return rv})),i.d(e,"Tooltip",(function(){return Gh})),i.d(e,"tooltip",(function(){return ov})),i.d(e,"Sounding",(function(){return yf})),i.d(e,"sounding",(function(){return sv})),i.d(e,"ThermodynamicDiagramPluggable",(function(){return Zf})),i.d(e,"ThermodynamicDiagram",(function(){return tv})),i.d(e,"thermodynamicDiagram",(function(){return av}));var n={};function r(t){if(void 0!==t&&!isNaN(t))return 44330.769*(1-Math.pow(t/1013.25,.19029496))}function o(t){if(void 0!==t&&!isNaN(t))return 1013.25*Math.pow(1-t/44330.769,5.255)}function s(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return t*Math.pow(1e3/e,.286)}function a(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return t*Math.pow(e/1e3,.286)}function u(t,e){if(void 0!==e&&!isNaN(e)){for(var i=void 0,n=Math.pow(1e3/e,.286),r=273,o=20,s=0;Math.abs(o)>.1&&s<100;)s++,i=p(r,e),(r*n*Math.exp(2.5*i/r)-t)*o>0&&(o*=-.5),r+=o;return r}}function l(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e)){var i=.4343*Math.log(t*e/(622+t));return Math.pow(10,.0498646455*i+2.4082965)-7.07475+38.9114*Math.pow(Math.pow(10,.0915*i)-1.2035,2)}}function c(t,e,i){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===i||isNaN(i))){for(var n=e-273.15,r=1,o=10,s=1,a=6.112*Math.exp(17.67*n/(n+243.5));Math.abs(r)>.05;){if(0==(r=a-(6.112*Math.exp(17.67*n/(n+243.5))-i*(t-273.15-n)*66e-5*(1+.00115*n))))break;if(r<0?-1!=s&&(s=-1,o/=10):1!=s&&(s=1,o/=10),Math.abs(r)<=.05)break;n+=o*s}return n+273.15}}function h(t,e,i){var n=s(t,i);if(!(void 0===n||void 0===e||isNaN(e)||void 0===t||isNaN(t)||void 0===i||isNaN(i)))return n*Math.exp(2.4819*p(e,i)/y(t,e))}function f(t){if(void 0!==t&&!isNaN(t)){var e=new Array(6.1104546,.4442351,.014302099,.00026454708,30357098e-13,2.0972268e-8,60487594e-18,-1469687e-19),i=new Array(.06485546857696639,.03783195122560735,.02224449342887902,.013182892842468312,.007874020771412448,.004739730494884733,.0028751203550435793,.001757430376758103,.0010824173951885098,.0006717089391856059,.0004199647026320394,.0002645243638634699,.00016784796373681322,.00010728539763162038,6907426344961356e-20,4479404897680843e-20,2925704195639373e-20,19245291263499416e-21,12749137241074795e-21,8505070102755051e-21,5713400253349711e-21,3864650296738762e-21,2632109719650053e-21,18049107293057043e-22,12460785055581605e-22,8.660705713468708e-7,6.059822176688955e-7,4.2682119794324277e-7,3.026165085143795e-7,2.15963854234914e-7,1.5512895457833687e-7),n=0;if((t-=273.15)>-50)n=e[0]+t*(e[1]+t*(e[2]+t*(e[3]+t*(e[4]+t*(e[5]+t*(e[6]+t*e[7]))))));else{var r=(-t-50)/5;n=0<i.length-1?i[0]+r%1*(i[1]-i[0]):1e-7}return n}}function p(t,e){var i=f(t);if(void 0!==i&&void 0!==e&&!isNaN(e))return 621.97*i/(e-i)}function d(t,e){if(void 0!==e&&!isNaN(e)){for(var i=1013,n=100;i-n>10;){var r=n+(i-n)/2,o=p(a(t,r),r);if(void 0===o)return;o<e?n=r:i=r}return n+(i-n)/2}}function v(t,e){if(void 0!==t&&!isNaN(t)){for(var i=323,n=223;i-n>.1;){var r=n+(i-n)/2,o=d(r,e);if(void 0===o)return;o>t?n=r:i=r}return n+(i-n)/2}}function y(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return e-(.001296*e-.15772)*(t-e)}function g(t){return void 0===t||isNaN(t)?void 0:t+273.15}function m(t){return void 0===t||isNaN(t)?void 0:t-273.15}function _(t){return void 0===t||isNaN(t)?void 0:3.6*t}function b(t){return void 0===t||isNaN(t)?void 0:t/3.6}function w(t){return void 0===t||isNaN(t)?void 0:900*t/463}function x(t){return void 0===t||isNaN(t)?void 0:463*t/900}function S(t){return void 0===t||isNaN(t)?void 0:Math.min(12,Math.pow(t/.836,2/3))}function O(t){return void 0===t||isNaN(t)?void 0:.836*Math.pow(t,1.5)}function T(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return 153*m(t)+.9985*e-304.26}function k(t,e,i,n){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===i||isNaN(i))){if(0==e)return t;var r=.02896;if(void 0===n&&(n=i),i==n)return t*Math.exp(9.807*-r/8.314/i*e);var o=(i-n)/e;return t*Math.exp(9.807*r/8.314/o*Math.log(1-o*e/i))}}function C(t,e,i){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===i||isNaN(i))){var n=f(e)*i;return 100*(t-n)/287.058/e+100*n/461.495/e}}function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e,i){"listeners"in this&&void 0!==this.listeners||(this.listeners={}),t in this.listeners||(this.listeners[t]={});var n=Math.random().toString(36).substr(2,9);return this.listeners[t][n]={callback:e,thisArg:i},n}function I(t,e){"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&e in this.listeners[t]&&delete this.listeners[t][e]}function R(t,e,i){"once_listeners"in this&&void 0!==this.once_listeners||(this.once_listeners={}),t in this.once_listeners&&"push"in this.once_listeners[t]||(this.once_listeners[t]=[]),this.once_listeners[t].push({callback:e,thisArg:i})}function j(t){return"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&Object.keys(this.listeners[t]).length||"once_listeners"in this&&t in this.once_listeners&&Object.keys(this.once_listeners[t]).length}function M(t){var e=this,i=Array.prototype.slice.call(arguments);if(i.shift(),"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&"object"==E(this.listeners[t])&&Object.keys(this.listeners[t]).forEach((function(n){e.listeners[t][n].callback.apply(void 0===e.listeners[t][n].thisArg?e:e.listeners[t][n].thisArg,i)})),"once_listeners"in this&&void 0!==this.once_listeners&&t in this.once_listeners&&"forEach"in this.once_listeners[t]){var n=this.once_listeners[t];this.once_listeners[t]=[],n.forEach((function(t){t.callback.apply(void 0===t.thisArg?e:t.thisArg,i)}))}}i.r(n),i.d(n,"altitudeISAByPres",(function(){return r})),i.d(n,"pressureISAByAltitude",(function(){return o})),i.d(n,"potentialTempByTempAndPres",(function(){return s})),i.d(n,"tempByPotentialTempAndPres",(function(){return a})),i.d(n,"tempByEquiPotTempAndPres",(function(){return u})),i.d(n,"dewpointByHMRAndPres",(function(){return l})),i.d(n,"wetbulbTempByTempAndDewpointAndPres",(function(){return c})),i.d(n,"equiPotentialTempByTempAndDewpointAndPres",(function(){return h})),i.d(n,"saturationPressureByTemp",(function(){return f})),i.d(n,"saturationHMRByTempAndPres",(function(){return p})),i.d(n,"lclByPotentialTempAndHMR",(function(){return d})),i.d(n,"potentialTempByLCLAndHMR",(function(){return v})),i.d(n,"lclTemperatureByTempAndDewpoint",(function(){return y})),i.d(n,"tempCelsiusToKelvin",(function(){return g})),i.d(n,"tempKelvinToCelsius",(function(){return m})),i.d(n,"windspeedMSToKMH",(function(){return _})),i.d(n,"windspeedKMHToMS",(function(){return b})),i.d(n,"windspeedMSToKN",(function(){return w})),i.d(n,"windspeedKNToMS",(function(){return x})),i.d(n,"windspeedMSToBF",(function(){return S})),i.d(n,"windspeedBFToMS",(function(){return O})),i.d(n,"snowlineByTemp850hPaAndAltidude",(function(){return T})),i.d(n,"pressureByBarometricFormula",(function(){return k})),i.d(n,"densityHumidAirByPressureAndTempAndRelHumidity",(function(){return C}));var A=function(t){t.on=P,t.un=I,t.once=R,t.hasListener=j,t.trigger=M};function D(t,e,i,n,r,o,s){try{var a=t[o](s),u=a.value}catch(t){return void i(t)}a.done?e(u):Promise.resolve(u).then(n,r)}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.url,n=void 0===i?void 0:i,r=e.user,o=void 0===r?"":r,s=e.password,a=void 0===s?"":s,u=e.start,l=void 0===u||u,c=e.defaultTimeout,h=void 0===c?void 0:c,f=e.timeoutOnError,p=void 0===f?void 0:f,d=e.pauseOnHiddenDocument,v=void 0!==d&&d,y=e.responseType,g=void 0===y?"":y;F(this,t),this._url=n,this._user=o,this._password=a,this._isStarted=l,this._defaultTimeout=h,this._timeoutOnError=p,this._pauseOnHiddenDocument=v,this._initPauseOnHiddenDocument(),this._responseType=g,this._timeoutID=void 0,this._loading=!1,this._isStarted&&this.start()}var e,i,n,r,o;return e=t,(i=[{key:"start",value:function(){this.isStarted=!0,this._startRequest()}},{key:"stop",value:function(){this.isStarted=!1,void 0!==this.timeoutID&&clearTimeout(this.timeoutID)}},{key:"_planRequest",value:function(t){var e=this,i=t.delay;void 0===this._timeoutID&&(this._timeoutID=setTimeout((function(){e._startRequest()}),i))}},{key:"_startRequest",value:function(){var t=this;void 0!==this._timeoutID&&clearTimeout(this._timeoutID),this._makeRequest().then((function(e){var i=e.request;if(t.isStarted){var n=t._defaultTimeout,r=i.getResponseHeader("Cache-Control");if(null!==r){var o=/(^|,)max-age=([0-9]+)($|,)/.exec(r);null!==o&&o[2]>0&&(n=Math.round(1e3*o[2]))}t.trigger("success:request",{request:i}),void 0!==n&&t._planRequest({delay:n})}}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.request;t.isStarted&&void 0!==i&&(t.trigger("error:request",{request:i}),void 0!==t._timeoutOnError&&t._planRequest({delay:t._timeoutOnError}))}))}},{key:"_makeRequest",value:(r=regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){if(void 0!==e._url)if(e._loading)i();else{e._loading=!0;var n=new XMLHttpRequest;void 0!==e.responseType&&(n.responseType=e.responseType),n.addEventListener("load",(function(){e._loading=!1,200==n.status?t({request:n}):i({request:n})})),n.addEventListener("error",(function(){e._loading=!1,i({request:n})})),n.open("GET",e._url,!0,e._user,e._password),n.send()}else i()})));case 1:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(i,n){var o=r.apply(t,e);function s(t){D(o,i,n,s,a,"next",t)}function a(t){D(o,i,n,s,a,"throw",t)}s(void 0)}))},function(){return o.apply(this,arguments)})},{key:"_initPauseOnHiddenDocument",value:function(){var t=this;this._pauseOnHiddenDocument&&document.addEventListener("visibilitychange",(function(){"hidden"in document&&(document.hidden?t.stop():t.start())}))}},{key:"url",get:function(){return this._url},set:function(t){this._url=t}},{key:"user",get:function(){return this._user},set:function(t){this._user=t}},{key:"password",get:function(){return this._password},set:function(t){this._password=t}},{key:"responseType",get:function(){return this._password},set:function(t){this._responseType=t}}])&&N(e.prototype,i),n&&N(e,n),t}();A(G.prototype);var B=G;function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var W=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.maxTimeGap,n=void 0===i?void 0:i,r=e.keyboardNavigation,o=void 0===r?{}:r;X(this,t),this.maxTimeGap=n,this.selectedTime=new Date("invalid"),this.times=[],this.enabledTimes=[],this.allEnabledTimes=[],this.timesByKey={},this._keyboardNavigation={},this._initKeyboardNavigation(o)}var e,i,n;return e=t,(i=[{key:"getSelectedTime",value:function(){return this.selectedTime}},{key:"setSelectedTime",value:function(t){return this._setSelectedTime(V(t,this.times)>-1?t:new Date("invalid")),this}},{key:"getTimes",value:function(){return this.times}},{key:"getEnabledTimes",value:function(){return this.enabledTimes}},{key:"getAllEnabledTimes",value:function(){return this.allEnabledTimes}},{key:"setTimesBySetID",value:function(t,e){return this.timesByKey[t]={times:e,enabled:e},this._updateTimes(),this._updateEnabledTimes(),this}},{key:"setEnabledTimesBySetID",value:function(t,e){return t in this.timesByKey&&(this.timesByKey[t].enabled=e,this._updateEnabledTimes()),this}},{key:"getSetIDs",value:function(){return Object.keys(this.timesByKey)}},{key:"deleteSetID",value:function(t){return t in this.timesByKey&&(delete this.timesByKey[t],this._updateTimes(),this._updateEnabledTimes()),this}},{key:"first",value:function(){return this._setSelectedTime(this.getFirstEnabledTime()),this}},{key:"last",value:function(){return this._setSelectedTime(this.getLastEnabledTime()),this}},{key:"next",value:function(){return this._setSelectedTime(this.getNextEnabledTime()),this}},{key:"prev",value:function(){return this._setSelectedTime(this.getPrevEnabledTime()),this}},{key:"nextAllEnabledTime",value:function(){return this._setSelectedTime(this.getNextAllEnabledTime()),this}},{key:"prevAllEnabledTime",value:function(){return this._setSelectedTime(this.getPrevAllEnabledTime()),this}},{key:"add",value:function(t,e){var i=this.getSelectedTime(),n=0;switch(e){case"hours":case"h":n=3600*t*1e3;break;case"minutes":case"m":n=60*t*1e3;break;case"seconds":case"s":n=1e3*t;break;case"milliseconds":case"ms":n=t}switch(0!=n&&(i=new Date(i.valueOf()+n)),e){case"years":case"y":i.setUTCFullYear(i.getUTCFullYear()+t);break;case"months":case"M":i.setUTCMonth(i.getUTCMonth()+t);break;case"days":case"d":i.setUTCDate(i.getUTCDate()+t)}return V(i,this.times)>-1&&this._setSelectedTime(i),this}},{key:"sub",value:function(t,e){var i=this.getSelectedTime(),n=0;switch(e){case"hours":case"h":n=3600*t*1e3;break;case"minutes":case"m":n=60*t*1e3;break;case"seconds":case"s":n=1e3*t;break;case"milliseconds":case"ms":n=t}switch(0!=n&&(i=new Date(i.valueOf()-n)),e){case"years":case"y":i.setUTCFullYear(i.getUTCFullYear()-t);break;case"months":case"M":i.setUTCMonth(i.getUTCMonth()-t);break;case"days":case"d":i.setUTCDate(i.getUTCDate()-t)}return V(i,this.times)>-1&&this._setSelectedTime(i),this}},{key:"getFirstEnabledTime",value:function(){return this.enabledTimes.length>0?this.enabledTimes[0]:new Date("invalid")}},{key:"getLastEnabledTime",value:function(){return this.enabledTimes.length>0?this.enabledTimes[this.enabledTimes.length-1]:new Date("invalid")}},{key:"getNextEnabledTime",value:function(){if(this.enabledTimes.length<1)return new Date("invalid");var t=V(this.getSelectedTime(),this.enabledTimes);if(t>-1)return++t<this.enabledTimes.length?this.enabledTimes[t]:this.enabledTimes[this.enabledTimes.length-1];if(isNaN(this.getSelectedTime()))return this.enabledTimes[0];for(var e=new Date("invalid"),i=0;i<this.enabledTimes.length;i++)if(this.getSelectedTime().valueOf()<this.enabledTimes[i].valueOf()){e=this.enabledTimes[i];break}return e}},{key:"getPrevEnabledTime",value:function(){if(this.enabledTimes.length<1)return new Date("invalid");var t=V(this.getSelectedTime(),this.enabledTimes);if(t>-1)return-1<--t?this.enabledTimes[t]:this.enabledTimes[0];if(isNaN(this.getSelectedTime()))return this.enabledTimes[0];for(var e=new Date("invalid"),i=this.enabledTimes.length-1;i>=0;i--)if(this.getSelectedTime().valueOf()>this.enabledTimes[i].valueOf()){e=this.enabledTimes[i];break}return e}},{key:"getFirstAllEnabledTime",value:function(){return this.allEnabledTimes.length>0?this.allEnabledTimes[0]:new Date("invalid")}},{key:"getLastAllEnabledTime",value:function(){return this.allEnabledTimes.length>0?this.allEnabledTimes[this.allEnabledTimes.length-1]:new Date("invalid")}},{key:"getNextAllEnabledTime",value:function(){if(this.allEnabledTimes.length<1)return new Date("invalid");var t=V(this.getSelectedTime(),this.allEnabledTimes);if(t>-1)return++t<this.allEnabledTimes.length?this.allEnabledTimes[t]:this.allEnabledTimes[this.allEnabledTimes.length-1];if(isNaN(this.getSelectedTime()))return this.allEnabledTimes[0];for(var e=new Date("invalid"),i=0;i<this.allEnabledTimes.length;i++)if(this.getSelectedTime().valueOf()<this.allEnabledTimes[i].valueOf()){e=this.allEnabledTimes[i];break}return e}},{key:"getPrevAllEnabledTime",value:function(){if(this.allEnabledTimes.length<1)return new Date("invalid");var t=V(this.getSelectedTime(),this.allEnabledTimes);if(t>-1)return-1<--t?this.allEnabledTimes[t]:this.allEnabledTimes[0];if(isNaN(this.getSelectedTime()))return this.allEnabledTimes[0];for(var e=new Date("invalid"),i=this.allEnabledTimes.length-1;i>=0;i--)if(this.getSelectedTime().valueOf()>this.allEnabledTimes[i].valueOf()){e=this.allEnabledTimes[i];break}return e}},{key:"isTimeEnabled",value:function(t){return this.enabledTimes.reduce((function(e,i){return i.valueOf()==t.valueOf()||e}),!1)}},{key:"isTimeAllEnabled",value:function(t){return this.allEnabledTimes.reduce((function(e,i){return i.valueOf()==t.valueOf()||e}),!1)}},{key:"isFirstEnabledTime",value:function(){return this.getFirstEnabledTime().valueOf()==this.getSelectedTime().valueOf()}},{key:"isLastEnabledTime",value:function(){return this.getLastEnabledTime().valueOf()==this.getSelectedTime().valueOf()}},{key:"_setSelectedTime",value:function(t){var e=this.selectedTime;return this.selectedTime=t,this.trigger("change:time",e),this.selectedTime}},{key:"_updateTimes",value:function(){this.times=[];var t=[],e={};for(var i in this.timesByKey)this.timesByKey[i].times.forEach((function(i){i.valueOf()in e||(t.push(i),e[i.valueOf()]=i)}));H(t),t.forEach((function(t){if(this.times.length<1)this.times.push(t);else{var e=this.times[this.times.length-1];if(void 0!==this.maxTimeGap&&t.valueOf()-e.valueOf()>1e3*this.maxTimeGap){var i=e;do{i=new Date(i.getTime()+1e3*this.maxTimeGap),this.times.push(i)}while(t.valueOf()-i.valueOf()>1e3*this.maxTimeGap)}this.times.push(t)}}),this),H(this.times),this.trigger("change:times")}},{key:"_updateEnabledTimes",value:function(){this.enabledTimes=[],this.allEnabledTimes=[];var t={},e={};for(var i in this.timesByKey)this.timesByKey[i].enabled.forEach((function(i){i.valueOf()in t||(this.enabledTimes.push(i),t[i.valueOf()]=i),i.valueOf()in e?e[i.valueOf()]++:e[i.valueOf()]=1}),this);for(var n in H(this.enabledTimes),e)e[n]==Object.keys(this.timesByKey).length&&this.allEnabledTimes.push(t[n]);H(this.allEnabledTimes),this.trigger("change:enabledTimes")}},{key:"_initKeyboardNavigation",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.enabled,n=void 0!==i&&i,r=e.first,o=void 0===r?36:r,s=e.last,a=void 0===s?35:s,u=e.prev,l=void 0===u?37:u,c=e.next,h=void 0===c?39:c,f=e.prevAllEnabledTime,p=void 0===f?[37,"ctrl"]:f,d=e.nextAllEnabledTime,v=void 0===d?[38,"ctrl"]:d;this._keyboardNavigation={enabled:n,first:o,last:a,prev:l,next:h,prevAllEnabledTime:p,nextAllEnabledTime:v},document&&this._keyboardNavigation.enabled&&document.addEventListener("keydown",(function(e){Object.keys(t._keyboardNavigation).forEach((function(i){"enabled"!=i&&i in t&&K(e,t._keyboardNavigation[i])&&t[i]()}))}))}}])&&z(e.prototype,i),n&&z(e,n),t}();A(W.prototype);var q=W,V=function(t,e){return e.findIndex((function(e){return e.valueOf()==t.valueOf()}))};function H(t){t.sort((function(t,e){return t.valueOf()-e.valueOf()}))}function K(t,e){if("object"==Y(e)&&"forEach"in e||(e=[e]),0==e.length)return!1;var i=[["ctrl","ctrlKey"],["alt","altKey"],["shift","shiftKey"],["meta","metaKey"]].reduce((function(i,n){return i&&(e.indexOf(n[0])>-1?t[n[1]]:!t[n[1]])}),!0);return e.forEach((function(e){switch(e){case"ctrl":case"alt":case"shift":case"meta":break;default:e!=t.keyCode&&(i=!1)}})),i}var U=i(0),Z=i.n(U);function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.timeline,r=i.restartPause,o=void 0===r?1.8:r,s=i.imagePeriod,a=void 0===s?.2:s,u=i.imageFrequency,l=i.enabledStepsOnly,c=void 0===l||l,h=i.allEnabledStepsOnly,f=void 0!==h&&h;J(this,t),this.options={timeline:n,restartPause:o,imagePeriod:a,imageFrequency:u,enabledStepsOnly:c,allEnabledStepsOnly:f},void 0===this.options.timeline&&(this.options.timeline=new q),void 0!==this.options.imageFrequency&&0!=this.options.imageFrequency&&(this.options.imagePeriod=1/this.options.imageFrequency),this.animationIntervalID=void 0,this.animationTimeoutID=void 0,this.animationStep=0,this.timesHash={},this.times=[];var p=function(){e.times=e.options.timeline[e._getTimelineTimesMethod()](),e.timesHash={},e.times.forEach((function(t,i){return e.timesHash[t.valueOf()]=i}))};this.options.timeline.on(this._getTimelineChangeTimesEvent(),p),p()}var e,i,n;return e=t,(i=[{key:"getImagePeriod",value:function(){return this.options.imagePeriod}},{key:"setImagePeriod",value:function(t){return this.options.imagePeriod=t,this.isStarted()&&this._updateAnimation(),this.trigger("change:imageFrequency"),this}},{key:"getImageFrequency",value:function(){return 1/this.options.imagePeriod}},{key:"setImageFrequency",value:function(t){return 0!=t&&this.setImagePeriod(1/t),this}},{key:"getRestartPause",value:function(){return this.options.restartPause}},{key:"setRestartPause",value:function(t){return this.options.restartPause=Number(t),this.trigger("change:restartPause"),this}},{key:"isStarted",value:function(){return void 0!==this.animationIntervalID||void 0!==this.animationTimeoutID}},{key:"start",value:function(){this.options.timeline.getSelectedTime().valueOf()in this.timesHash&&this._setStep(this.timesHash[this.options.timeline.getSelectedTime().valueOf()]),this.isStarted()||this._updateAnimation(),this.trigger("start:animation")}},{key:"stop",value:function(){this._clearAnimation(),this.trigger("stop:animation")}},{key:"toggle",value:function(){this.isStarted()?this.stop():this.start()}},{key:"_setStep",value:function(t){0<=t&&t<this._getCount()&&(this.animationStep=t)}},{key:"_getTimelineChangeTimesEvent",value:function(){return this.options.enabledStepsOnly||this.options.allEnabledStepsOnly?"change:enabledTimes":"change:times"}},{key:"_getTimelineTimesMethod",value:function(){return this.options.allEnabledStepsOnly?"getAllEnabledTimes":this.options.enabledStepsOnly?"getEnabledTimes":"getTimes"}},{key:"_getCount",value:function(){return this.options.timeline[this._getTimelineTimesMethod()]().length}},{key:"_updateAnimation",value:function(){this._clearAnimation(),this.animationStep<this._getCount()-1?this._initAnimation():this._initRestartPause()}},{key:"_initAnimation",value:function(){var t=this;void 0===this.animationIntervalID&&(this.animationIntervalID=window.setInterval((function(){t.animationStep++,t.animationStep<t.times.length&&t.options.timeline.setSelectedTime(t.times[t.animationStep]),t.animationStep>=t._getCount()-1&&(t.trigger("end:animation"),t._clearAnimation(),t._initRestartPause())}),1e3*this.options.imagePeriod))}},{key:"_initRestartPause",value:function(){var t=this;void 0===this.animationTimeoutID&&(this.animationTimeoutID=window.setTimeout((function(){t.animationStep=0,t.trigger("restart:animation"),t.animationStep<t.times.length&&t.options.timeline.setSelectedTime(t.times[t.animationStep]),t._clearAnimation(),t._initAnimation()}),1e3*(this.options.imagePeriod+this.options.restartPause)))}},{key:"_clearAnimation",value:function(){void 0!==this.animationIntervalID&&(window.clearInterval(this.animationIntervalID),this.animationIntervalID=void 0),void 0!==this.animationTimeoutID&&(window.clearTimeout(this.animationTimeoutID),this.animationTimeoutID=void 0)}}])&&Q(e.prototype,i),n&&Q(e,n),t}();A($.prototype);var tt=$;function et(t,e){var i=e.animation,n=e.suffix,r=void 0===n?"fps":n,o=Z()("<input>").addClass("form-control").attr("type","number").attr("min",1).attr("step",1),s=Z()("<div>").addClass("input-group").append(o).append(Z()("<div>").addClass("input-group-append").append(Z()("<span>").addClass("input-group-text").text(r)));o.on("change",(function(){return i.setImageFrequency(o.val())}));var a=function(){return o.val(i.getImageFrequency())};return i.on("change:imageFrequency",a),a(),t.append(s),s}function it(t,e){var i=e.animation,n=e.frequencies;n=n||[1];var r=Z()("<input>").addClass("custom-range").attr("type","range").attr("min",0).attr("max",n.length-1);r.on("change input",(function(){var t=r.val();t<n.length&&i.setImageFrequency(n[t])}));var o=function(){var t=n.indexOf(i.getImageFrequency());t>-1&&r.val(t)};return i.on("change:imageFrequency",o),o(),t.append(r),r}function nt(t,e){var i=e.animation,n=e.suffix,r=void 0===n?"s":n,o=Z()("<input>").addClass("form-control").attr("type","number").attr("min",0).attr("step",.1),s=Z()("<div>").addClass("input-group").append(o).append(Z()("<div>").addClass("input-group-append").append(Z()("<span>").addClass("input-group-text").text(r)));o.on("change",(function(){return i.setRestartPause(o.val())}));var a=function(){return o.val(i.getRestartPause())};return i.on("change:restartPause",a),a(),t.append(s),s}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ot=function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rt(this,t);var n=i.animation,r=void 0===n?void 0:n,o=i.node,s=void 0===o?void 0:o,a=i.startedContent,u=void 0===a?void 0:a,l=i.startedClass,c=void 0===l?void 0:l,h=i.stoppedContent,f=void 0===h?void 0:h,p=i.stoppedClass,d=void 0===p?void 0:p,v=i.classButton,y=void 0===v?void 0:v,g=i.classDropdownToggle,m=void 0===g?void 0:g,_=i.menu,b=void 0===_||_,w=i.menuImageFrequency,x=void 0===w||w,S=i.imageFrequencyCaption,O=void 0===S?"Frequency":S,T=i.menuFrequencies,k=void 0===T?void 0:T,C=i.menuRestartPause,E=void 0===C||C,P=i.restartPauseCaption,I=void 0===P?"Restart pause":P;"startedContent"in i||(u="â¸"),"stoppedContent"in i||(f="â¶"),this.options={animation:r,node:s,startedContent:u,startedClass:c,stoppedContent:f,stoppedClass:d,classButton:y,classDropdownToggle:m,menu:b,menuImageFrequency:x,imageFrequencyCaption:O,menuFrequencies:k,menuRestartPause:E,restartPauseCaption:I},this.options.node=Z()(this.options.node);var R=this.options.node;this.options.node.is("button")||(R=Z()("<button>").addClass("btn"),this.options.node.append(R)),R.addClass(this.options.classButton);var j=function(){R.removeClass(e.options.stoppedClass),R.addClass(e.options.startedClass),R.empty(),"string"==typeof e.options.startedContent||e.options.startedContent instanceof String?R.text(e.options.startedContent):R.append(e.options.startedContent)},M=function(){R.removeClass(e.options.startedClass),R.addClass(e.options.stoppedClass),R.empty(),"string"==typeof e.options.stoppedContent||e.options.stoppedContent instanceof String?R.text(e.options.stoppedContent):R.append(e.options.stoppedContent)};if(this.options.animation.on("start:animation",j),this.options.animation.on("stop:animation",M),R.click((function(){return e.options.animation.toggle()})),this.options.animation.isStarted()?j():M(),!this.options.node.is("button")&&this.options.menu){this.options.node.addClass("btn-group");var L=Z()("<button>").attr("type","button").addClass("btn dropdown-toggle dropdown-toggle-split").addClass(this.options.classDropdownToggle).attr("data-toggle","dropdown").attr("aria-haspopup",!0).attr("aria-expanded",!1);L.append(Z()("<span>").addClass("sr-only").text("Toggle Dropdown")),this.options.node.append(L);var A=Z()("<div>").addClass("dropdown-menu pl-4 pr-4 pt-2 pb-2 text-muted");if(this.options.node.append(A),this.options.menuImageFrequency){var D=Z()("<label>").text(this.options.imageFrequencyCaption),F=Z()("<div>").addClass("form-group").append(D);A.append(F),et(D,{animation:this.options.animation}),void 0!==this.options.menuFrequencies&&it(F,{animation:this.options.animation,frequencies:this.options.menuFrequencies})}if(this.options.menuRestartPause){var N=Z()("<label>").text(this.options.restartPauseCaption),G=Z()("<div>").addClass("form-group").append(N);nt(N,{animation:this.options.animation}),A.append(G)}}};function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ut=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.timeline,n=void 0===i?void 0:i,r=e.node,o=void 0===r?void 0:r,s=e.animation,a=void 0===s?void 0:s,u=e.enabledStepsOnly,l=void 0===u||u,c=e.allEnabledStepsOnly,h=void 0!==c&&c,f=e.textInvalid,p=void 0===f?"-":f,d=e.getTimeText,v=void 0===d?void 0:d,y=e.outputTimezone,g=void 0===y?void 0:y;st(this,t),this.options={timeline:n,node:o,animation:a,enabledStepsOnly:l,allEnabledStepsOnly:h,textInvalid:p,getTimeText:v,outputTimezone:g},void 0===this.options.timeline&&(this.options.timeline=new q),this.listeners=[],this.inputListener=void 0}var e,i,n;return e=t,(i=[{key:"setNode",value:function(t){if(void 0!==this.options.node&&this.emptyNode(),void 0===t)this.detachEventListeners(),this.options.node=t;else{this.options.node=t;var e=this.listeners.length>0;e||(this.attachEventListener(this.options.timeline,"change:time",(function(){this.onChangeTime()}),this),this.attachEventListener(this.options.timeline,"change:times",(function(){this.onChangeTimes()}),this),this.attachEventListener(this.options.timeline,"change:enabledTimes",(function(){this.onChangeTimes()}),this)),this.onInitNode(e),this.onChangeTimes(),this.onChangeTime()}return void 0===this.inputListener&&(this.inputListener=this.on("input",(function(){void 0!==this.options.animation&&this.options.animation.stop()}),this)),this}},{key:"getOutputTimezone",value:function(){return this.options.outputTimezone}},{key:"setOutputTimezone",value:function(t){var e=this.options.outputTimezone!=t;return this.options.outputTimezone=t,e&&void 0!==this.options.node&&(this.onChangeTimes(),this.onChangeTime()),this}},{key:"onChangeTime",value:function(){}},{key:"onChangeTimes",value:function(){}},{key:"emptyNode",value:function(){}},{key:"onInitNode",value:function(){}},{key:"getTimelineTimes",value:function(){var t=this.options.allEnabledStepsOnly?"getAllEnabledTimes":this.options.enabledStepsOnly?"getEnabledTimes":"getTimes";return this.options.timeline[t]()}},{key:"timeToText",value:function(t,e){return isNaN(t)?this.options.textInvalid:void 0!==this.options.getTimeText?this.options.getTimeText.call(this,t,e):t.toISOString()}},{key:"attachEventListener",value:function(t,e,i,n){this.listeners.push([t,e]),t.on(e,i,n)}},{key:"detachEventListeners",value:function(){this.listeners.forEach((function(t){"un"in t[0]?t[0].un(t[1]):"off"in t[0]&&t[0].off(t[1])})),this.listeners=[]}}])&&at(e.prototype,i),n&&at(e,n),t}();A(ut.prototype);var lt=ut;function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=gt(t);if(e){var r=gt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return yt(this,i)}}function yt(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}(o,t);var e,i,n,r=vt(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.format,n=void 0===i?void 0:i,s=ht(e,["format"]);return ft(this,o),(t=r.call(this,s)).options.format=n,t.setNode(t.options.node),t}return e=o,(i=[{key:"onChangeTime",value:function(){this.options.node.text(this.timeToText(this.options.timeline.getSelectedTime(),this.options.format))}},{key:"emptyNode",value:function(){this.options.node.text("")}}])&&pt(e.prototype,i),n&&pt(e,n),o}(lt);function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ot(t);if(e){var r=Ot(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return St(this,i)}}function St(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(o,t);var e,i,n,r=xt(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,t)).times=[],e.timesIndexes={},e.setNode(e.options.node),e}return e=o,(i=[{key:"onChangeTime",value:function(){var t=this.options.timeline.getSelectedTime();t.valueOf()in this.timesIndexes?this.options.node.val(this.timesIndexes[t.valueOf()]+1):this.options.node.val(1)}},{key:"onChangeTimes",value:function(){this.times=this.getTimelineTimes(),this.timesIndexes={},this.times.forEach((function(t,e){this.timesIndexes[t.valueOf()]=e}),this),this.options.node.prop("max",this.times.length)}},{key:"onInitNode",value:function(t){if(this.options.node.prop("min",1),this.options.node.prop("step",1),!t){var e=this;this.attachEventListener(this.options.node,"change input",(function(){var t=+Z()(this).val();0<t&&t<=e.times.length&&e.options.timeline.setSelectedTime(e.times[t-1]),e.trigger("input")}))}}}])&&bt(e.prototype,i),n&&bt(e,n),o}(lt);function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Mt(t);if(e){var r=Mt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return jt(this,i)}}function jt(t,e){return!e||"object"!==kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(o,t);var e,i,n,r=Rt(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.format,n=void 0===i?"HH":i,s=e.grouping,a=void 0===s?"daily":s,u=e.groupingFormat,l=void 0===u?"ddd, DD. MMM":u,c=e.classMain,h=void 0===c?"btn-toolbar":c,f=e.classButtonGroup,p=void 0===f?"btn-group":f,d=e.classButtonGroupMargin,v=void 0===d?"mr-2":d,y=e.classLabel,g=void 0===y?void 0:y,m=e.classLabelSpan,_=void 0===m?"d-block w-100":m,b=e.classButton,w=void 0===b?"btn":b,x=e.classButtonActive,S=void 0===x?"active":x,O=e.classButtonNotEnabled,T=void 0===O?"btn-light":O,k=e.classButtonEnabled,C=void 0===k?"btn-secondary":k,E=e.classButtonAllEnabled,P=void 0===E?"btn-primary":E,I=Ct(e,["format","grouping","groupingFormat","classMain","classButtonGroup","classButtonGroupMargin","classLabel","classLabelSpan","classButton","classButtonActive","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled"]);return Et(this,o),(t=r.call(this,I)).options.format=n,t.options.grouping=a,t.options.groupingFormat=l,t.options.classMain=h,t.options.classButtonGroup=p,t.options.classButtonGroupMargin=v,t.options.classLabel=g,t.options.classLabelSpan=_,t.options.classButton=w,t.options.classButtonActive=S,t.options.classButtonNotEnabled=T,t.options.classButtonEnabled=C,t.options.classButtonAllEnabled=P,t.toolbarNode=void 0,t.setNode(t.options.node),t}return e=o,(i=[{key:"onChangeTime",value:function(){if(void 0!==this.toolbarNode){var t=this.options.timeline.getSelectedTime(),e=this;this.toolbarNode.find("button").each((function(){var i=new Date(+Z()(this).data("time"));Z()(this).removeClass(e.options.classButtonActive),t.valueOf()==i.valueOf()&&Z()(this).addClass(e.options.classButtonActive)}))}}},{key:"onChangeTimes",value:function(){void 0===this.toolbarNode&&(this.toolbarNode=Z()("<div>")),this.toolbarNode.empty();var t="daily"==this.options.grouping?"YYYY-MM-DD":"hourly"==this.options.grouping?"YYYY-MM-DD HH":this.options.grouping,e=void 0;this.getTimelineTimes().forEach((function(i){if(void 0===e||e.data("date")!=this.timeToText(i,t)){var n=Z()("<div>").addClass(this.options.classButtonGroup).addClass(this.options.classButtonGroupMargin).attr("role","group").attr("aria-label",this.timeToText(i,t));if(void 0===this.options.groupingFormat)e=n;else{var r=Z()("<span>").addClass(this.options.classLabelSpan).text(this.timeToText(i,this.options.groupingFormat));e=Z()("<label>").addClass(this.options.classLabel).append(r),n.attr("aria-label",r.text()),e.append(n)}e.data("date",this.timeToText(i,t)),this.toolbarNode.append(e)}var o=Z()("<button>").addClass(this.options.classButton).attr("type","button").text(this.timeToText(i,this.options.format)).data("time",i.valueOf());this.options.timeline.isTimeAllEnabled(i)?o.addClass(this.options.classButtonAllEnabled):this.options.timeline.isTimeEnabled(i)?o.addClass(this.options.classButtonEnabled):o.addClass(this.options.classButtonNotEnabled);var s=this;o.click((function(){s.options.timeline.setSelectedTime(new Date(+Z()(this).data("time"))),s.trigger("input")})),e.hasClass(this.options.classButtonGroup)?e.append(o):e.children("div").append(o)}),this),this.toolbarNode.find("div."+this.options.classButtonGroup).last().removeClass(this.options.classButtonGroupMargin)}},{key:"emptyNode",value:function(){this.toolbarNode=void 0,this.options.node.empty()}},{key:"onInitNode",value:function(){this.toolbarNode=Z()("<div>").addClass(this.options.classMain).attr("role","toolbar").attr("aria-label","Timeline toolbar"),this.options.node.append(this.toolbarNode)}}])&&Pt(e.prototype,i),n&&Pt(e,n),o}(lt);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function Ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gt(t,e,i){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zt(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=zt(t);if(e){var r=zt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Xt(this,i)}}function Xt(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zt(t){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}(o,t);var e,i,n,r=Yt(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.format,n=void 0===i?"HH:mm":i,s=e.buttonFormat,a=void 0===s?"DD. MMMM YYYY HH:mm":s,u=e.grouping,l=void 0===u?"daily":u,c=e.groupingDivider,h=void 0===c||c,f=e.groupingFormat,p=void 0===f?"ddd, DD. MMMM YYYY":f,d=e.classMain,v=void 0===d?"dropdown":d,y=e.classDropdownMenu,g=void 0===y?"dropdown-menu":y,m=e.classDropdownItem,_=void 0===m?"dropdown-item":m,b=e.classItemActive,w=void 0===b?"active":b,x=e.classItemNotEnabled,S=void 0===x?"disabled":x,O=e.classItemEnabled,T=void 0===O?void 0:O,k=e.classItemAllEnabled,C=void 0===k?void 0:k,E=e.classDropdownHeader,P=void 0===E?"dropdown-header":E,I=e.classDropdownDivider,R=void 0===I?"dropdown-divider":I,j=e.classDropdownButton,M=void 0===j?"btn dropdown-toggle":j,L=e.classButtonNotEnabled,A=void 0===L?void 0:L,D=e.classButtonEnabled,F=void 0===D?void 0:D,N=e.classButtonAllEnabled,G=void 0===N?void 0:N,B=Dt(e,["format","buttonFormat","grouping","groupingDivider","groupingFormat","classMain","classDropdownMenu","classDropdownItem","classItemActive","classItemNotEnabled","classItemEnabled","classItemAllEnabled","classDropdownHeader","classDropdownDivider","classDropdownButton","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled"]);return Ft(this,o),(t=r.call(this,B)).options.format=n,t.options.buttonFormat=a,t.options.grouping=l,t.options.groupingDivider=h,t.options.groupingFormat=p,t.options.classMain=v,t.options.classDropdownMenu=g,t.options.classDropdownItem=_,t.options.classItemActive=w,t.options.classItemNotEnabled=S,t.options.classItemEnabled=T,t.options.classItemAllEnabled=C,t.options.classDropdownHeader=P,t.options.classDropdownDivider=R,t.options.classDropdownButton=M,t.options.classButtonNotEnabled=A,t.options.classButtonEnabled=F,t.options.classButtonAllEnabled=G,t.visualisationButtonText=new mt({timeline:t.options.timeline,format:t.options.buttonFormat,textInvalid:t.options.textInvalid,outputTimezone:t.options.outputTimezone,getTimeText:t.options.getTimeText}),t.dropdownNode=void 0,t.setNode(t.options.node),t}return e=o,(i=[{key:"setOutputTimezone",value:function(t){return Gt(zt(o.prototype),"setOutputTimezone",this).call(this,t),this.visualisationButtonText.setOutputTimezone(t),this}},{key:"onChangeTime",value:function(){if(void 0!==this.dropdownNode){var t=this.options.timeline.getSelectedTime();this.options.node.children("button").removeClass(this.options.classButtonActive).removeClass(this.options.classButtonNotEnabled).removeClass(this.options.classButtonEnabled).removeClass(this.options.classButtonAllEnabled),this.options.timeline.isTimeAllEnabled(t)?this.options.node.children("button").addClass(this.options.classButtonAllEnabled):this.options.timeline.isTimeEnabled(t)?this.options.node.children("button").addClass(this.options.classButtonEnabled):this.options.node.children("button").addClass(this.options.classButtonNotEnabled);var e=this;this.dropdownNode.children("button."+this.options.classDropdownItem).each((function(){var i=new Date(+Z()(this).data("time"));Z()(this).removeClass(e.options.classItemActive).removeClass(e.options.classItemNotEnabled).removeClass(e.options.classItemEnabled).removeClass(e.options.classItemAllEnabled),t.valueOf()==i.valueOf()?Z()(this).addClass(e.options.classItemActive):e.options.timeline.isTimeAllEnabled(i)?Z()(this).addClass(e.options.classItemAllEnabled):e.options.timeline.isTimeEnabled(i)?Z()(this).addClass(e.options.classItemEnabled):Z()(this).addClass(e.options.classItemNotEnabled)}))}}},{key:"onChangeTimes",value:function(){void 0===this.dropdownNode&&(this.dropdownNode=Z()("<div>")),this.dropdownNode.empty();var t="daily"==this.options.grouping?"YYYY-MM-DD":"hourly"==this.options.grouping?"YYYY-MM-DD HH":this.options.grouping,e=void 0;this.getTimelineTimes().forEach((function(i){void 0!==e&&e==this.timeToText(i,t)||(void 0!==e&&this.options.groupingDivider&&this.dropdownNode.append(Z()("<div>").addClass(this.options.classDropdownDivider)),void 0!==this.options.groupingFormat&&this.dropdownNode.append(Z()("<h6>").addClass(this.options.classDropdownHeader).text(this.timeToText(i,this.options.groupingFormat))),e=this.timeToText(i,t));var n=Z()("<button>").addClass(this.options.classDropdownItem).attr("type","button").text(this.timeToText(i,this.options.format)).data("time",i.valueOf()),r=this;n.click((function(){r.options.timeline.setSelectedTime(new Date(+Z()(this).data("time"))),r.trigger("input")})),this.dropdownNode.append(n)}),this)}},{key:"emptyNode",value:function(){void 0!==this.visualisationButtonText&&this.visualisationButtonText.setNode(void 0),this.dropdownNode=void 0,this.options.node.empty()}},{key:"onInitNode",value:function(){for(var t="dropdownMenuButton",e=0;null!=document.getElementById(t);)t="dropdownMenuButton"+ ++e;var i=Z()("<button>").addClass(this.options.classDropdownButton).attr("type","button").attr("id",t).attr("data-toggle","dropdown").attr("aria-haspopup",!0).attr("aria-expanded",!1);this.visualisationButtonText.setNode(i),this.dropdownNode=Z()("<div>").addClass(this.options.classDropdownMenu).attr("aria-labelledby",t),this.options.node.addClass(this.options.classMain).append(i).append(this.dropdownNode)}}])&&Nt(e.prototype,i),n&&Nt(e,n),o}(lt);function qt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Vt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Z.a.extend(!0,{map:void 0,layerGroup:void 0},e)}var e,i,n;return e=t,(i=[{key:"getMap",value:function(){return this.options.map}},{key:"getViewCenter",value:function(){}},{key:"setViewCenter",value:function(){return this}},{key:"getViewZoom",value:function(){}},{key:"setViewZoom",value:function(){return this}},{key:"makeLayerGroup",value:function(){}},{key:"getExtendedEventByTypeCollection",value:function(t){return t.synviewType=void 0,t.layer=void 0,t.feature=void 0,t.color=void 0,t}},{key:"findLayerInType",value:function(){return-1}}])&&qt(e.prototype,i),n&&qt(e,n),t}();A(Vt.prototype);var Ht=Vt;function Kt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ut=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemIds=[],this.items={}}var e,i,n;return e=t,(i=[{key:"getCount",value:function(){return this.itemIds.length}},{key:"getItems",value:function(){return this.itemIds.map((function(t){return this.items[t]}),this)}},{key:"getItemIds",value:function(){return this.itemIds}},{key:"getItemById",value:function(t){return t in this.items?this.items[t]:void 0}},{key:"containsId",value:function(t){return-1!==this.getIndexById(t)}},{key:"getIndexById",value:function(t){var e=-1;return this.itemIds.forEach((function(i,n){i==t&&(e=n)})),e}},{key:"append",value:function(t){var e=t.getId();return this.containsId(e)?(this.trigger("replace:item",t,this.getItemById(e)),this.items[e]=t):(this.itemIds.push(e),this.items[e]=t,this.trigger("add:item",t)),this}},{key:"remove",value:function(t){var e=this.getItemById(t);if(void 0!==e){var i=this.getIndexById(t);delete this.items[t],this.itemIds.splice(i,1),this.trigger("remove:item",e)}return this}}])&&Kt(e.prototype,i),n&&Kt(e,n),t}();A(Ut.prototype);var Zt=Ut;function Jt(){return function(){throw new Error("Unimplemented abstract method.")}()}var Qt=0;function $t(t){return t.ol_uid||(t.ol_uid=String(++Qt))}var te,ee=(te=function(t,e){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}te(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ie=function(t){function e(e){var i=this,n="Assertion failed. See https://openlayers.org/en/"+("v"+"6.3.1".split("-")[0])+"/doc/errors/#"+e+" for details.";return(i=t.call(this,n)||this).code=e,i.name="AssertionError",i.message=n,i}return ee(e,t),e}(Error),ne="add",re="remove",oe="propertychange",se="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,r=arguments.length;n<r;++n){var o=arguments[n];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(i[s]=o[s])}return i};function ae(t){for(var e in t)delete t[e]}var ue="function"==typeof Object.values?Object.values:function(t){var e=[];for(var i in t)e.push(t[i]);return e};function le(t){var e;for(e in t)return!1;return!e}function ce(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){var o=i;i=function(){t.removeEventListener(e,i),o.apply(this,arguments)}}var s={target:t,type:e,listener:i};return t.addEventListener(e,i),s}function he(t,e,i,n){return ce(t,e,i,n,!0)}function fe(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),ae(t))}var pe=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function de(t,e){return t>e?1:t<e?-1:0}function ve(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var r=void 0;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function ye(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function ge(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]}function me(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function _e(){return!0}function be(){}var we=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),xe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Se=function(t){function e(e){var i=t.call(this)||this;return i.eventTarget_=e,i.pendingRemovals_={},i.dispatching_={},i.listeners_={},i}return xe(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var i=this.listeners_[t];i||(i=[],this.listeners_[t]=i),-1===i.indexOf(e)&&i.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new we(t):t,i=e.type;e.target||(e.target=this.eventTarget_||this);var n,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var o=0,s=r.length;o<s;++o)if(!1===(n="handleEvent"in r[o]?r[o].handleEvent(e):r[o].call(this,e))||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var a=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];a--;)this.removeEventListener(i,be);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){ae(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(i[n]=be,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}},e}(pe),Oe="change",Te="error",ke="load",Ce=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var Ee=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return Ce(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Oe)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=ce(this,t[r],e);return n}return ce(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=he(this,t[r],e);return n}return he(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)},e}(Se),Pe=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ie=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.key=i,r.oldValue=n,r}return Pe(e,t),e}(we),Re=function(t){function e(e){var i=t.call(this)||this;return $t(i),i.values_={},void 0!==e&&i.setProperties(e),i}return Pe(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return se({},this.values_)},e.prototype.notify=function(t,e){var i;i=Me(t),this.dispatchEvent(new Ie(i,t,e)),i=oe,this.dispatchEvent(new Ie(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(Ee),je={};function Me(t){return je.hasOwnProperty(t)?je[t]:je[t]="change:"+t}var Le=Re,Ae=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),De="length",Fe=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.element=i,r.index=n,r}return Ae(e,t),e}(we),Ne=function(t){function e(e,i){var n=t.call(this)||this,r=i||{};if(n.unique_=!!r.unique,n.array_=e||[],n.unique_)for(var o=0,s=n.array_.length;o<s;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return Ae(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(De)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Fe(ne,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Fe(re,e,t)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Fe(re,n,t)),this.dispatchEvent(new Fe(ne,e,t))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(De,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new ie(58)},e}(Le);function Ge(t,e){if(!t)throw new ie(e)}var Be="bottom-left",Ye="bottom-right",Xe="top-left",ze="top-right",We=0,qe=1,Ve=2,He=4,Ke=8,Ue=16;function Ze(t){for(var e=ni(),i=0,n=t.length;i<n;++i)li(e,t[i]);return e}function Je(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Qe(t,e,i){var n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function $e(t,e){return ei(t,e[0],e[1])}function ti(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function ei(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function ii(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],s=e[0],a=e[1],u=We;return s<i?u|=Ue:s>r&&(u|=He),a<n?u|=Ke:a>o&&(u|=Ve),u===We&&(u=qe),u}function ni(){return[1/0,1/0,-1/0,-1/0]}function ri(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function oi(t){return ri(1/0,1/0,-1/0,-1/0,t)}function si(t,e,i,n,r){return ci(oi(r),t,e,i,n)}function ai(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function ui(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function li(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ci(t,e,i,n,r){for(;i<n;i+=r)hi(t,e[i],e[i+1]);return t}function hi(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function fi(t){var e=0;return Si(t)||(e=wi(t)*gi(t)),e}function pi(t){return[t[0],t[1]]}function di(t){return[t[2],t[1]]}function vi(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function yi(t,e){var i;return e===Be?i=pi(t):e===Ye?i=di(t):e===Xe?i=_i(t):e===ze?i=bi(t):Ge(!1,13),i}function gi(t){return t[3]-t[1]}function mi(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return xi(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):oi(n),n}function _i(t){return[t[0],t[3]]}function bi(t){return[t[2],t[3]]}function wi(t){return t[2]-t[0]}function xi(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Si(t){return t[2]<t[0]||t[3]<t[1]}function Oi(t,e,i,n){var r=[];if(n>1)for(var o=t[2]-t[0],s=t[3]-t[1],a=0;a<n;++a)r.push(t[0]+o*a/n,t[1],t[2],t[1]+s*a/n,t[2]-o*a/n,t[3],t[0],t[3]-s*a/n);else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);for(var u=[],l=[],c=(a=0,r.length);a<c;a+=2)u.push(r[a]),l.push(r[a+1]);return function(t,e,i){return ri(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(u,l,i)}var Ti="opacity",ki="visible",Ci="extent",Ei="zIndex",Pi="maxResolution",Ii="minResolution",Ri="maxZoom",ji="minZoom",Mi="source";function Li(t,e,i){return Math.min(Math.max(t,e),i)}var Ai="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function Di(t,e,i,n,r,o){var s=r-i,a=o-n;if(0!==s||0!==a){var u=((t-i)*s+(e-n)*a)/(s*s+a*a);u>1?(i=r,n=o):u>0&&(i+=s*u,n+=a*u)}return Fi(t,e,i,n)}function Fi(t,e,i,n){var r=i-t,o=n-e;return r*r+o*o}function Ni(t){return t*Math.PI/180}function Gi(t,e){var i=t%e;return i*e<0?i+e:i}function Bi(t,e,i){return t+i*(e-t)}var Yi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xi=function(t){function e(e){var i=t.call(this)||this,n=se({},e);return n[Ti]=void 0!==e.opacity?e.opacity:1,Ge("number"==typeof n[Ti],64),n[ki]=void 0===e.visible||e.visible,n[Ei]=e.zIndex,n[Pi]=void 0!==e.maxResolution?e.maxResolution:1/0,n[Ii]=void 0!==e.minResolution?e.minResolution:0,n[ji]=void 0!==e.minZoom?e.minZoom:-1/0,n[Ri]=void 0!==e.maxZoom?e.maxZoom:1/0,i.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return Yi(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=Li(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i?i:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return Jt()},e.prototype.getLayerStatesArray=function(t){return Jt()},e.prototype.getExtent=function(){return this.get(Ci)},e.prototype.getMaxResolution=function(){return this.get(Pi)},e.prototype.getMinResolution=function(){return this.get(Ii)},e.prototype.getMinZoom=function(){return this.get(ji)},e.prototype.getMaxZoom=function(){return this.get(Ri)},e.prototype.getOpacity=function(){return this.get(Ti)},e.prototype.getSourceState=function(){return Jt()},e.prototype.getVisible=function(){return this.get(ki)},e.prototype.getZIndex=function(){return this.get(Ei)},e.prototype.setExtent=function(t){this.set(Ci,t)},e.prototype.setMaxResolution=function(t){this.set(Pi,t)},e.prototype.setMinResolution=function(t){this.set(Ii,t)},e.prototype.setMaxZoom=function(t){this.set(Ri,t)},e.prototype.setMinZoom=function(t){this.set(ji,t)},e.prototype.setOpacity=function(t){Ge("number"==typeof t,64),this.set(Ti,t)},e.prototype.setVisible=function(t){this.set(ki,t)},e.prototype.setZIndex=function(t){this.set(Ei,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Le),zi="undefined",Wi="ready",qi=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vi="layers",Hi=function(t){function e(e){var i=this,n=e||{},r=se({},n);delete r.layers;var o=n.layers;return(i=t.call(this,r)||this).layersListenerKeys_=[],i.listenerKeys_={},i.addEventListener(Me(Vi),i.handleLayersChanged_),o?Array.isArray(o)?o=new Ne(o.slice(),{unique:!0}):Ge("function"==typeof o.getArray,43):o=new Ne(void 0,{unique:!0}),i.setLayers(o),i}return qi(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(fe),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(ce(t,ne,this.handleLayersAdd_,this),ce(t,re,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(fe);ae(this.listenerKeys_);for(var i=t.getArray(),n=0,r=i.length;n<r;n++){var o=i[n];this.listenerKeys_[$t(o)]=[ce(o,oe,this.handleLayerChange_,this),ce(o,Oe,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[$t(e)]=[ce(e,oe,this.handleLayerChange_,this),ce(e,Oe,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=$t(t.element);this.listenerKeys_[e].forEach(fe),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(Vi)},e.prototype.setLayers=function(t){this.set(Vi,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var n=this.getLayerState(),r=i,o=e.length;r<o;r++){var s=e[r];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=mi(s.extent,n.extent):s.extent=n.extent)}return e},e.prototype.getSourceState=function(){return Wi},e}(Xi),Ki="prerender",Ui="postrender",Zi="precompose",Ji=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var Qi=function(t){function e(e){var i=this,n=se({},e);delete n.source,(i=t.call(this,n)||this).mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,e.render&&(i.render=e.render),e.map&&i.setMap(e.map),i.addEventListener(Me(Mi),i.handleSourcePropertyChange_);var r=e.source?e.source:null;return i.setSource(r),i}return Ji(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Mi)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():zi},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(fe(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=ce(t,Oe,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var i=this.getRenderer();if(i.prepareFrame(t))return i.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(fe(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(fe(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ce(t,Zi,(function(t){var e=t.frameState.layerStatesArray,i=this.getLayerState(!1);Ge(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=ce(this,Oe,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Mi,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(Xi),$i="Point",tn="LineString",en="LinearRing",nn="Polygon",rn="MultiPoint",on="MultiLineString",sn="MultiPolygon",an="GeometryCollection",un="Circle",ln=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,cn=/^([a-z]*)$|^hsla?\(.*\)$/i;function hn(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}var fn,pn,dn=(fn={},pn=0,function(t){var e;if(fn.hasOwnProperty(t))e=fn[t];else{if(pn>=1024){var i=0;for(var n in fn)0==(3&i++)&&(delete fn[n],--pn)}e=function(t){var e,i,n,r,o;if(cn.exec(t)&&(t=hn(t)),ln.exec(t)){var s=t.length-1,a=void 0;a=s<=4?1:2;var u=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),i=parseInt(t.substr(1+1*a,a),16),n=parseInt(t.substr(1+2*a,a),16),r=u?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,u&&(r=(r<<4)+r)),o=[e,i,n,r/255]}else 0==t.indexOf("rgba(")?yn(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),yn(o)):Ge(!1,14);return o}(t),fn[t]=e,++pn}return e});function vn(t){return Array.isArray(t)?t:dn(t)}function yn(t){return t[0]=Li(t[0]+.5|0,0,255),t[1]=Li(t[1]+.5|0,0,255),t[2]=Li(t[2]+.5|0,0,255),t[3]=Li(t[3],0,1),t}function gn(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}function mn(t){return Array.isArray(t)?gn(t):t}var _n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",bn=(_n.indexOf("firefox"),-1!==_n.indexOf("safari")&&_n.indexOf("chrom"),-1!==_n.indexOf("webkit")&&_n.indexOf("edge"),_n.indexOf("macintosh"),"undefined"!=typeof devicePixelRatio&&devicePixelRatio,"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope),wn="undefined"!=typeof Image&&Image.prototype.decode;!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}}();function xn(t,e,i){var n=i&&i.length?i.shift():bn?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}var Sn=0,On=1,Tn=2,kn=3,Cn=4,En=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Pn=["style","variant","weight","size","lineHeight","family"],In=function(t){var e=t.match(En);if(!e)return null;for(var i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,r=Pn.length;n<r;++n){var o=e[n+1];void 0!==o&&(i[Pn[n]]=o)}return i.families=i.family.split(/,\s?/),i},Rn=new Array(6);function jn(t){return Ln(t,1,0,0,1,0,0)}function Mn(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return t[0]=i*u+r*l,t[1]=n*u+o*l,t[2]=i*c+r*h,t[3]=n*c+o*h,t[4]=i*f+r*p+s,t[5]=n*f+o*p+a,t}function Ln(t,e,i,n,r,o,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t}function An(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function Dn(t,e,i){return Mn(t,Ln(Rn,e,0,0,i,0,0))}function Fn(t,e,i,n,r,o,s,a){var u=Math.sin(o),l=Math.cos(o);return t[0]=n*l,t[1]=r*u,t[2]=-n*u,t[3]=r*l,t[4]=s*n*l-a*n*u+e,t[5]=s*r*u+a*r*l+i,t}function Nn(t,e){var i,n=(i=e)[0]*i[3]-i[1]*i[2];Ge(0!==n,32);var r=e[0],o=e[1],s=e[2],a=e[3],u=e[4],l=e[5];return t[0]=a/n,t[1]=-o/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*l-a*u)/n,t[5]=-(r*l-o*u)/n,t}function Gn(t){return"matrix("+t.join(", ")+")"}var Bn=[],Yn=[0,0,0,0],Xn=new Le;(new Se).setSize=function(){console.warn("labelCache is deprecated.")};var zn,Wn,qn,Vn=null,Hn={},Kn=function(){var t,e,i=["monospace","serif"],n=i.length,r="wmytzilWMYTZIL@#/&?$%10ï";function o(t,o,s){for(var a=!0,u=0;u<n;++u){var l=i[u];if(e=Jn(t+" "+o+" 32px "+l,r),s!=l){var c=Jn(t+" "+o+" 32px "+s+","+l,r);a=a&&c!=e}}return!!a}function s(){for(var e=!0,i=Xn.getKeys(),n=0,r=i.length;n<r;++n){var s=i[n];Xn.get(s)<100&&(o.apply(this,s.split("\n"))?(ae(Hn),Vn=null,zn=void 0,Xn.set(s,100)):(Xn.set(s,Xn.get(s)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var i=In(e);if(i)for(var n=i.families,r=0,a=n.length;r<a;++r){var u=n[r],l=i.style+"\n"+i.weight+"\n"+u;void 0===Xn.get(l)&&(Xn.set(l,100,!0),o(i.style,i.weight,u)||(Xn.set(l,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),Un=(qn=Hn,function(t){var e=qn[t];if(null==e)if(bn){var i=In(t),n=Zn(t,"Å½g"),r=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);Hn[t]=r*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else Wn||((Wn=document.createElement("div")).innerHTML="M",Wn.style.margin="0 !important",Wn.style.padding="0 !important",Wn.style.position="absolute !important",Wn.style.left="-99999px !important"),Wn.style.font=t,document.body.appendChild(Wn),e=Wn.offsetHeight,qn[t]=e,document.body.removeChild(Wn);return e});function Zn(t,e){return Vn||(Vn=xn(1,1)),t!=zn&&(Vn.font=t,zn=Vn.font),Vn.measureText(e)}function Jn(t,e){return Zn(t,e).width}function Qn(t,e,i){if(e in i)return i[e];var n=Jn(t,e);return i[e]=n,n}function $n(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}function tr(t,e,i,n,r,o,s,a,u,l,c){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(u,l),t.scale(c,c),function(t,e){for(var i=t.contextInstructions,n=0,r=i.length;n<r;n+=2)Array.isArray(i[n+1])?e[i[n]].apply(e,i[n+1]):e[i[n]]=i[n+1]}(n,t)):t.drawImage(n,r,o,s,a,u,l,s*c,a*c),t.restore()}var er=null;function ir(t){return bn?Gn(t):(er||(er=xn(1,1).canvas),er.style.transform=Gn(t),er.style.transform)}var nr=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return Jt()},t.prototype.getImage=function(t){return Jt()},t.prototype.getHitDetectionImage=function(t){return Jt()},t.prototype.getImageState=function(){return Jt()},t.prototype.getImageSize=function(){return Jt()},t.prototype.getHitDetectionImageSize=function(){return Jt()},t.prototype.getOrigin=function(){return Jt()},t.prototype.getSize=function(){return Jt()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){Jt()},t.prototype.load=function(){Jt()},t.prototype.unlistenImageChange=function(t){Jt()},t}(),rr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),or=function(t){function e(e){var i=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return rr(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return Tn},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e="round",i="round",n=0,r=null,o=0,s=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t="#000"),t=mn(t),void 0===(s=this.stroke_.getWidth())&&(s=1),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i="round"),void 0===(e=this.stroke_.getLineCap())&&(e="round"),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var a=2*(this.radius_+s)+1,u={strokeStyle:t,strokeWidth:s,size:a,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:i,miterLimit:n},l=xn(a,a);this.canvas_=l.canvas;var c=a=this.canvas_.width,h=this.getDisplacement();this.draw_(u,l,0,0),this.createHitDetectionCanvas_(u),this.anchor_=[a/2-h[0],a/2+h[1]],this.size_=[a,a],this.imageSize_=[c,c]},e.prototype.draw_=function(t,e,i,n){var r,o,s;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(a*=2),r=0;r<=a;r++)o=2*r*Math.PI/a-Math.PI/2+this.angle_,s=r%2==0?this.radius_:u,e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l="#000"),e.fillStyle=mn(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=vn(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var n=xn(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(r*=2);var s=void 0,a=void 0,u=void 0;for(s=0;s<=r;s++)u=2*s*Math.PI/r-Math.PI/2+this.angle_,a=s%2==0?this.radius_:o,e.lineTo(t.size/2+a*Math.cos(u),t.size/2+a*Math.sin(u))}e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(nr),sr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ar=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return sr(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(or),ur=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),lr=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var hr=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=dr,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===cr(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=dr,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();var fr=null;function pr(t,e){if(!fr){var i=new ur({color:"rgba(255,255,255,0.4)"}),n=new lr({color:"#3399CC",width:1.25});fr=[new hr({image:new ar({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return fr}function dr(t){return t.getGeometry()}var vr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yr="renderOrder",gr=function(t){function e(e){var i=this,n=e||{},r=se({},n);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(i=t.call(this,r)||this).declutter_=void 0!==n.declutter&&n.declutter,i.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,i.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,i}return vr(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(yr)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(yr,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:pr,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var i;if(Array.isArray(t))i=t;else Ge("function"==typeof t.getZIndex,41),i=[t];e=function(){return i}}return e}(this.style_),this.changed()},e}(Qi),mr=0,_r=1;function br(t,e){var i=e.getExtent();if(e.canWrapX()&&(t[0]<i[0]||t[0]>=i[2])){var n=wi(i),r=Math.floor((t[0]-i[0])/n);t[0]-=r*n}return t}function wr(t,e,i){var n=i||6371008.8,r=Ni(t[1]),o=Ni(e[1]),s=(o-r)/2,a=Ni(e[0]-t[0])/2,u=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}var xr={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Sr={};Sr[xr.DEGREES]=2*Math.PI*6370997/360,Sr[xr.FEET]=.3048,Sr[xr.METERS]=1,Sr[xr.USFEET]=1200/3937;var Or=xr,Tr=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Sr[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),kr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cr=6378137*Math.PI,Er=[-Cr,-Cr,Cr,Cr],Pr=[-180,-85,180,85],Ir=function(t){function e(e){return t.call(this,{code:e,units:Or.METERS,extent:Er,global:!0,worldExtent:Pr,getPointResolution:function(t,e){return t/Ai(e[1]/6378137)}})||this}return kr(e,t),e}(Tr),Rr=[new Ir("EPSG:3857"),new Ir("EPSG:102100"),new Ir("EPSG:102113"),new Ir("EPSG:900913"),new Ir("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Ir("urn:ogc:def:crs:EPSG::3857"),new Ir("http://www.opengis.net/gml/srs/epsg.xml#3857")];function jr(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=Cr,a=0;a<n;a+=r){o[a]=s*t[a]/180;var u=6378137*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));u>s?u=s:u<-s&&(u=-s),o[a+1]=u}return o}function Mr(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=0;s<n;s+=r)o[s]=180*t[s]/Cr,o[s+1]=360*Math.atan(Math.exp(t[s+1]/6378137))/Math.PI-90;return o}var Lr=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ar=[-180,-90,180,90],Dr=6378137*Math.PI/180,Fr=function(t){function e(e,i){return t.call(this,{code:e,units:Or.DEGREES,extent:Ar,axisOrientation:i,global:!0,metersPerUnit:Dr,worldExtent:Ar})||this}return Lr(e,t),e}(Tr),Nr=[new Fr("CRS:84"),new Fr("EPSG:4326","neu"),new Fr("urn:ogc:def:crs:EPSG::4326","neu"),new Fr("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Fr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Fr("urn:ogc:def:crs:OGC:2:84"),new Fr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Fr("urn:x-ogc:def:crs:EPSG:4326","neu")],Gr={};function Br(t,e,i){var n=t.getCode(),r=e.getCode();n in Gr||(Gr[n]={}),Gr[n][r]=i}var Yr={};function Xr(t,e,i){var n;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];n=e}else n=t.slice();return n}function zr(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function Wr(t){!function(t,e){Yr[t]=e}(t.getCode(),t),Br(t,t,Xr)}function qr(t){return"string"==typeof t?Yr[t]||null:t||null}function Vr(t,e,i,n){var r,o=(t=qr(t)).getPointResolutionFunc();if(o)r=o(e,i),n&&n!==t.getUnits()&&(s=t.getMetersPerUnit())&&(r=r*s/Sr[n]);else if(t.getUnits()==Or.DEGREES&&!n||n==Or.DEGREES)r=e;else{var s,a=Ur(t,qr("EPSG:4326")),u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(wr((u=a(u,u,2)).slice(0,2),u.slice(2,4))+wr(u.slice(4,6),u.slice(6,8)))/2,void 0!==(s=n?Sr[n]:t.getMetersPerUnit())&&(r/=s)}return r}function Hr(t){!function(t){t.forEach(Wr)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Br(e,t,Xr)}))}))}function Kr(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Ur(t,e)===Xr)&&i}function Ur(t,e){var i=function(t,e){var i;return t in Gr&&e in Gr[t]&&(i=Gr[t][e]),i}(t.getCode(),e.getCode());return i||(i=zr),i}function Zr(t,e){return Ur(qr(t),qr(e))}function Jr(t,e,i){return Zr(e,i)(t,void 0,t.length)}function Qr(t,e,i,n){return Oi(t,Zr(e,i),void 0,n)}var $r,to,eo,io=null;function no(t,e){return io?Qr(t,e,io):t}function ro(t,e){return io?Qr(t,io,e):t}function oo(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=e;a<i;a+=n)o[s++]=t.slice(a,a+n);return o.length=s,o}function so(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=0,u=i.length;a<u;++a){var l=i[a];o[s++]=oo(t,e,l,n,o[s]),e=l}return o.length=s,o}function ao(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=0,u=i.length;a<u;++a){var l=i[a];o[s++]=so(t,e,l,n,o[s]),e=l[l.length-1]}return o.length=s,o}Hr(Rr),Hr(Nr),$r=Rr,to=jr,eo=Mr,Nr.forEach((function(t){$r.forEach((function(e){Br(t,e,to),Br(e,t,eo)}))}));var uo=function(){function t(){}return t.prototype.drawCustom=function(t,e,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),lo={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},co=[lo.FILL],ho=[lo.STROKE],fo=[lo.BEGIN_PATH],po=[lo.CLOSE_PATH],vo=lo,yo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),go=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=r,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return yo(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=n);var u,l,c,h=t[e],f=t[e+1],p=this.tmpCoordinate_,d=!0;for(u=e+n;u<i;u+=n)p[0]=t[u],p[1]=t[u+1],(c=ii(a,p))!==l?(d&&(this.coordinates[s++]=h,this.coordinates[s++]=f),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):c===qe?(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):d=!0,h=p[0],f=p[1],l=c;return(r&&d||u===e+n)&&(this.coordinates[s++]=h,this.coordinates[s++]=f),s},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatCoordinates(t,e,a,n,!1,!1);r.push(u),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,s,a,u=t.getType(),l=t.getStride(),c=this.coordinates.length;if(u==sn){n=(t=t).getOrientedFlatCoordinates(),s=[];var h=t.getEndss();a=0;for(var f=0,p=h.length;f<p;++f){var d=[];a=this.drawCustomCoordinates_(n,a,h[f],l,d),s.push(d)}this.instructions.push([vo.CUSTOM,c,s,t,i,ao])}else u==nn||u==on?(o=[],n=u==nn?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(n,0,t.getEnds(),l,o),this.instructions.push([vo.CUSTOM,c,o,t,i,so])):u==tn||u==rn?(n=t.getFlatCoordinates(),r=this.appendFlatCoordinates(n,0,n.length,l,!1,!1),this.instructions.push([vo.CUSTOM,c,r,t,i,oo])):u==$i&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([vo.CUSTOM,c,r,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[vo.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[vo.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,o=-1;for(t=0;t<r;++t)(n=(i=e[t])[0])==vo.END_GEOMETRY?o=t:n==vo.BEGIN_GEOMETRY&&(i[2]=t,ye(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=mn(n||"#000")}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=mn(r||"#000");var o=e.getLineCap();i.lineCap=void 0!==o?o:"round";var s=e.getLineDash();i.lineDash=s?s.slice():Bn;var a=e.getLineDashOffset();i.lineDashOffset=a||0;var u=e.getLineJoin();i.lineJoin=void 0!==u?u:"round";var l=e.getWidth();i.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();i.miterLimit=void 0!==c?c:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[vo.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[vo.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!me(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=u)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[vo.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(e=this.maxExtent,i?(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i):e.slice()),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Je(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}var e,i;return this.bufferedMaxExtent_},e}(uo),mo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_o=function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return mo(e,t),e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([vo.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([vo.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([vo.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([vo.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroups_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(go),bo=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wo=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return bo(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,n,!1,!1),s=[vo.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([vo.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],fo);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(ho),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([vo.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],fo);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(s,u,o[l],a);this.hitDetectionInstructions.push(ho),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(ho),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ho),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(fo)},e}(go);function xo(t,e,i,n,r,o,s){var a=(i-e)/n;if(a<3){for(;e<i;e+=n)o[s++]=t[e],o[s++]=t[e+1];return s}var u=new Array(a);u[0]=1,u[a-1]=1;for(var l=[e,i-n],c=0;l.length>0;){for(var h=l.pop(),f=l.pop(),p=0,d=t[f],v=t[f+1],y=t[h],g=t[h+1],m=f+n;m<h;m+=n){var _=Di(t[m],t[m+1],d,v,y,g);_>p&&(c=m,p=_)}p>r&&(u[(c-e)/n]=1,f+n<c&&l.push(f,c),c+n<h&&l.push(c,h))}for(m=0;m<a;++m)u[m]&&(o[s++]=t[e+m*n],o[s++]=t[e+m*n+1]);return s}function So(t,e,i,n,r,o,s,a){for(var u=0,l=i.length;u<l;++u){var c=i[u];s=xo(t,e,c,n,r,o,s),a.push(s),e=c}return s}function Oo(t,e){return e*Math.round(t/e)}function To(t,e,i,n,r,o,s){if(e==i)return s;var a,u,l=Oo(t[e],r),c=Oo(t[e+1],r);e+=n,o[s++]=l,o[s++]=c;do{if(a=Oo(t[e],r),u=Oo(t[e+1],r),(e+=n)==i)return o[s++]=a,o[s++]=u,s}while(a==l&&u==c);for(;e<i;){var h=Oo(t[e],r),f=Oo(t[e+1],r);if(e+=n,h!=a||f!=u){var p=a-l,d=u-c,v=h-l,y=f-c;p*y==d*v&&(p<0&&v<p||p==v||p>0&&v>p)&&(d<0&&y<d||d==y||d>0&&y>d)?(a=h,u=f):(o[s++]=a,o[s++]=u,l=a,c=u,a=h,u=f)}}return o[s++]=a,o[s++]=u,s}function ko(t,e,i,n,r,o,s,a){for(var u=0,l=i.length;u<l;++u){var c=i[u];s=To(t,e,c,n,r,o,s),a.push(s),e=c}return s}var Co=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Eo=function(t){function e(e,i,n,r){return t.call(this,e,i,n,r)||this}return Co(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=i.length;this.instructions.push(fo),this.hitDetectionInstructions.push(fo);for(var u=0;u<a;++u){var l=i[u],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,l,n,!0,!s),f=[vo.MOVE_TO_LINE_TO,c,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),s&&(this.instructions.push(po),this.hitDetectionInstructions.push(po)),e=l}return o&&(this.instructions.push(co),this.hitDetectionInstructions.push(co)),s&&(this.instructions.push(ho),this.hitDetectionInstructions.push(ho)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([vo.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([vo.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var u=[vo.CIRCLE,a];this.instructions.push(fo,u),this.hitDetectionInstructions.push(fo,u),void 0!==i.fillStyle&&(this.instructions.push(co),this.hitDetectionInstructions.push(co)),void 0!==i.strokeStyle&&(this.instructions.push(ho),this.hitDetectionInstructions.push(ho)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([vo.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([vo.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([vo.SET_FILL_STYLE,"#000"]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([vo.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(s,u,o[l],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,r=i.length;n<r;++n)i[n]=Oo(i[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(go);function Po(t,e,i,n,r){var o,s,a,u,l,c,h,f,p,d=i,v=i,y=0,g=0,m=i;for(o=i;o<n;o+=r){var _=e[o],b=e[o+1];void 0!==u&&(f=_-u,p=b-l,a=Math.sqrt(f*f+p*p),void 0!==c&&(g+=s,Math.acos((c*f+h*p)/(s*a))>t&&(g>y&&(y=g,d=m,v=o),g=0,m=o-r)),s=a,c=f,h=p),u=_,l=b}return(g+=a)>y?[m,o]:[d,v]}var Io="line",Ro=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jo={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Mo={Circle:Eo,Default:go,Image:_o,LineString:wo,Polygon:Eo,Text:function(t){function e(e,i,n,r){var o=t.call(this,e,i,n,r)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return Ro(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o,s,a=this.coordinates.length,u=t.getType(),l=null,c=2,h=2;if(r.placement===Io){if(!xi(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(l=t.getFlatCoordinates(),h=t.getStride(),u==tn)f=[l.length];else if(u==on)f=t.getEnds();else if(u==nn)f=t.getEnds().slice(0,1);else if(u==sn){var p=t.getEndss();for(f=[],o=0,s=p.length;o<s;++o)f.push(p[o][0])}this.beginGeometry(t,e);for(var d=r.textAlign,v=0,y=void 0,g=0,m=f.length;g<m;++g){if(null==d){var _=Po(r.maxAngle,l,v,f[g],h);v=_[0],y=_[1]}else y=f[g];for(o=v;o<y;o+=h)this.coordinates.push(l[o],l[o+1]);c=this.coordinates.length,v=f[g];var b=this.declutterGroups_?0===g?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(a,c,b),a=c}this.endGeometry(e)}else{var w=null;switch(r.overflow||(w=[]),u){case $i:case rn:c=(l=t.getFlatCoordinates()).length;break;case tn:l=t.getFlatMidpoint();break;case un:l=t.getCenter();break;case on:c=(l=t.getFlatMidpoints()).length;break;case nn:l=t.getFlatInteriorPoint(),r.overflow||w.push(l[2]/this.resolution),h=3;break;case sn:var x=t.getFlatInteriorPoints();for(l=[],o=0,s=x.length;o<s;o+=3)r.overflow||w.push(x[o+2]/this.resolution),l.push(x[o],x[o+1]);if(0==(c=l.length))return}c=this.appendFlatCoordinates(l,0,c,h,!1,!1),this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var S=this.pixelRatio;this.instructions.push([vo.DRAW_IMAGE,a,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,r.padding==Yn?Yn:r.padding.map((function(t){return t*S})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.hitDetectionInstructions.push([vo.DRAW_IMAGE,a,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,r.padding,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||"center",textBaseline:e.textBaseline||"middle",scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,l=jo[r.textBaseline],c=this.textOffsetY_*u,h=this.text_,f=r.scale,p=n?n.lineWidth*f/2:0;this.instructions.push([vo.DRAW_CHARS,t,e,l,i,r.overflow,a,r.maxAngle,u,c,o,p*u,h,s,1]),this.hitDetectionInstructions.push([vo.DRAW_CHARS,t,e,l,i,r.overflow,a,r.maxAngle,1,c,o,p,h,s,1/u])},e.prototype.setTextStyle=function(t,e){var i,n,r;if(t){this.declutterGroups_=e;var o=t.getFill();o?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=mn(o.getColor()||"#000")):(n=null,this.textFillState_=n);var s=t.getStroke();if(s){(r=this.textStrokeState_)||(r={},this.textStrokeState_=r);var a=s.getLineDash(),u=s.getLineDashOffset(),l=s.getWidth(),c=s.getMiterLimit();r.lineCap=s.getLineCap()||"round",r.lineDash=a?a.slice():Bn,r.lineDashOffset=void 0===u?0:u,r.lineJoin=s.getLineJoin()||"round",r.lineWidth=void 0===l?1:l,r.miterLimit=void 0===c?10:c,r.strokeStyle=mn(s.getColor()||"#000")}else r=null,this.textStrokeState_=r;i=this.textState_;var h=t.getFont()||"10px sans-serif";Kn(h);var f=t.getScale();i.overflow=t.getOverflow(),i.font=h,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||"middle",i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Yn,i.scale=void 0===f?1:f;var p=t.getOffsetX(),d=t.getOffsetY(),v=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===y?0:y,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:$t(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+$t(n.fillStyle):""}else this.text_=""},e}(go)},Lo=function(){function t(t,e,i,n,r){this.declutter_=r,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[[1/0,1/0,-1/0,-1/0]],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var n in i){var r=i[n].finish();t[e][n]=r}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);var r=n[e];void 0===r&&(r=new(0,Mo[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r);return r},t}();function Ao(t,e,i,n,r,o){for(var s=o||[],a=0,u=e;u<i;u+=n){var l=t[u],c=t[u+1];s[a++]=r[0]*l+r[2]*c+r[4],s[a++]=r[1]*l+r[3]*c+r[5]}return o&&s.length!=a&&(s.length=a),s}var Do="Circle",Fo="Default",No="Image",Go="LineString",Bo="Polygon",Yo="Text";function Xo(t,e,i,n){for(var r=t[e],o=t[e+1],s=0,a=e+n;a<i;a+=n){var u=t[a],l=t[a+1];s+=Math.sqrt((u-r)*(u-r)+(l-o)*(l-o)),r=u,o=l}return s}function zo(t,e,i,n,r,o,s,a,u,l,c){for(var h,f,p=[],d=t[e]>t[i-n],v=r.length,y=t[e],g=t[e+1],m=t[e+=n],_=t[e+1],b=0,w=Math.sqrt(Math.pow(m-y,2)+Math.pow(_-g,2)),x=!1,S=0;S<v;++S){for(var O=r[h=d?v-S-1:S],T=a*u(l,O,c),k=o+T/2;e<i-n&&b+w<k;)y=m,g=_,m=t[e+=n],_=t[e+1],b+=w,w=Math.sqrt(Math.pow(m-y,2)+Math.pow(_-g,2));var C=k-b,E=Math.atan2(_-g,m-y);if(d&&(E+=E>0?-Math.PI:Math.PI),void 0!==f){var P=E-f;if(x=x||0!==P,P+=P>Math.PI?-2*Math.PI:P<-Math.PI?2*Math.PI:0,Math.abs(P)>s)return null}f=E;var I=C/w,R=Bi(y,m,I),j=Bi(g,_,I);p[h]=[R,j,T/2,E,O],o+=T}return x?p:[[p[0][0],p[0][1],p[0][2],p[0][3],r]]}var Wo=i(2),qo=i.n(Wo),Vo=[1/0,1/0,-1/0,-1/0],Ho=[1,0,0,1,0,0],Ko=[],Uo=[],Zo=[],Jo=[],Qo=function(){function t(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,n){var r=t+e+i+n;if(this.labels_[r])return this.labels_[r];var o=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],u=this.pixelRatio,l=a.scale*u,c=jo[a.textAlign||"center"],h=n&&o.lineWidth?o.lineWidth:0,f=t.split("\n"),p=f.length,d=[],v=function(t,e,i){for(var n=e.length,r=0,o=0;o<n;++o){var s=Jn(t,e[o]);r=Math.max(r,s),i.push(s)}return r}(a.font,f,d),y=Un(a.font),g=y*p,m=v+h,_=[],b={width:Math.ceil((m+2)*l),height:Math.ceil((g+h)*l),contextInstructions:_};(1!=l&&_.push("scale",[l,l]),_.push("font",a.font),n)&&(_.push("strokeStyle",o.strokeStyle),_.push("lineWidth",h),_.push("lineCap",o.lineCap),_.push("lineJoin",o.lineJoin),_.push("miterLimit",o.miterLimit),(bn?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(_.push("setLineDash",[o.lineDash]),_.push("lineDashOffset",o.lineDashOffset)));i&&_.push("fillStyle",s.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");var w,x=.5-c,S=c*m+x*h;if(n)for(w=0;w<p;++w)_.push("strokeText",[f[w],S+x*d[w],.5*(h+y)+w*y]);if(i)for(w=0;w<p;++w)_.push("fillText",[f[w],S+x*d[w],.5*(h+y)+w*y]);return this.labels_[r]=b,b},t.prototype.replayTextBackground_=function(t,e,i,n,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,i,n,r,o,s,a,u,l,c,h,f,p,d,v,y,g){var m=y||g;e-=r*=f,i-=o*=f;var _=d+l>n.width?n.width-l:d,b=a+c>n.height?n.height-c:a,w=v[3]+_*f+v[1],x=v[0]+b*f+v[2],S=e-v[3],O=i-v[0];(m||0!==h)&&(Ko[0]=S,Jo[0]=S,Ko[1]=O,Uo[1]=O,Uo[0]=S+w,Zo[0]=Uo[0],Zo[1]=O+x,Jo[1]=Zo[1]);var T=null;if(0!==h){var k=e+r,C=i+o;T=Fn(Ho,k,C,1,1,h,-k,-C),An(Ho,Ko),An(Ho,Uo),An(Ho,Zo),An(Ho,Jo),ri(Math.min(Ko[0],Uo[0],Zo[0],Jo[0]),Math.min(Ko[1],Uo[1],Zo[1],Jo[1]),Math.max(Ko[0],Uo[0],Zo[0],Jo[0]),Math.max(Ko[1],Uo[1],Zo[1],Jo[1]),Vo)}else ri(S,O,S+w,O+x,Vo);var E=t.canvas,P=g?g[2]*f/2:0,I=Vo[0]-P<=E.width&&Vo[2]+P>=0&&Vo[1]-P<=E.height&&Vo[3]+P>=0;if(p&&(e=Math.round(e),i=Math.round(i)),s){if(!I&&1==s[4])return;ui(s,Vo);var R=I?[t,T?T.slice(0):null,u,n,l,c,_,b,e,i,f]:null;R&&(m&&R.push(y,g,Ko.slice(0),Uo.slice(0),Zo.slice(0),Jo.slice(0)),s.push(R))}else I&&(m&&this.replayTextBackground_(t,Ko,Uo,Zo,Jo,y,g),tr(t,T,u,n,l,c,_,b,e,i,f))},t.prototype.fill_=function(t){if(this.alignFill_){var e=An(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,i,n){if(t&&t.length>5){var r=t[4];if(1==r||r==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new qo.a(9)),!n.collides(o)){n.insert(o);for(var s=5,a=t.length;s<a;++s){var u=t[s],l=u[0],c=l.globalAlpha;c!==i&&(l.globalAlpha=i),u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),tr.apply(void 0,u),c!==i&&(l.globalAlpha=c)}}t.length=5,oi(t)}}return n},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,n){var r=this.textStates[e],o=this.createLabel(t,e,n,i),s=this.strokeStates[i],a=this.pixelRatio,u=jo[r.textAlign||"center"],l=jo[r.textBaseline||"middle"],c=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:u*(o.width/a-2*r.scale)+2*(.5-u)*c,anchorY:l*o.height/a+2*(.5-l)*c}},t.prototype.execute_=function(t,e,i,n,r,o){var s,a,u;this.declutterItems.length=0,this.pixelCoordinates_&&me(e,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=Ao(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),a=this.renderedTransform_,u=e,a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[4]=u[4],a[5]=u[5]);for(var l,c,h,f,p,d,v,y,g,m,_,b,w,x,S,O,T,k=0,C=i.length,E=0,P=0,I=0,R=null,j=null,M=this.coordinateCache_,L=this.viewRotation_,A=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},F=this.instructions!=i||this.overlaps?0:200;k<C;){var N=i[k];switch(N[0]){case vo.BEGIN_GEOMETRY:(S=N[1]).getGeometry()?void 0===o||xi(o,N[3])?++k:k=N[2]+1:k=N[2];break;case vo.BEGIN_PATH:P>F&&(this.fill_(t),P=0),I>F&&(t.stroke(),I=0),P||I||(t.beginPath(),f=NaN,p=NaN),++k;break;case vo.CIRCLE:var G=s[E=N[1]],B=s[E+1],Y=s[E+2]-G,X=s[E+3]-B,z=Math.sqrt(Y*Y+X*X);t.moveTo(G+z,B),t.arc(G,B,z,0,2*Math.PI,!0),++k;break;case vo.CLOSE_PATH:t.closePath(),++k;break;case vo.CUSTOM:E=N[1],l=N[2];var W=N[3],q=N[4],V=6==N.length?N[5]:void 0;D.geometry=W,D.feature=S,k in M||(M[k]=[]);var H=M[k];V?V(s,E,l,2,H):(H[0]=s[E],H[1]=s[E+1],H.length=2),q(H,D),++k;break;case vo.DRAW_IMAGE:E=N[1],l=N[2],m=N[3],c=N[4],h=N[5],g=r?null:N[6];var K=N[7],U=N[8],Z=N[9],J=N[10],Q=N[11],$=N[12],tt=N[13],et=N[14];if(!m&&N.length>=19){_=N[18],b=N[19],w=N[20],x=N[21];var it=this.drawLabelWithPointPlacement_(_,b,w,x);m=it.label,N[3]=m;var nt=N[22];c=(it.anchorX-nt)*this.pixelRatio,N[4]=c;var rt=N[23];h=(it.anchorY-rt)*this.pixelRatio,N[5]=h,K=m.height,N[7]=K,et=m.width,N[14]=et}var ot=void 0;N.length>24&&(ot=N[24]);var st=void 0,at=void 0,ut=void 0;N.length>16?(st=N[15],at=N[16],ut=N[17]):(st=Yn,at=!1,ut=!1),Q&&A?$+=L:Q||A||($-=L);for(var lt=0,ct=0;E<l;E+=2)if(!(ot&&ot[lt++]<et/this.pixelRatio)){if(g){var ht=Math.floor(ct);g.length<ht+1&&((y=[1/0,1/0,-1/0,-1/0]).push(g[0][4]),g.push(y)),y=g[ht]}this.replayImageOrLabel_(t,s[E],s[E+1],m,c,h,y,K,U,Z,J,$,tt,n,et,st,at?R:null,ut?j:null),y&&(ct===Math.floor(ct)&&this.declutterItems.push(this,y,S),ct+=1/y[4])}++k;break;case vo.DRAW_CHARS:var ft=N[1],pt=N[2],dt=N[3];y=r?null:N[4];var vt=N[5];x=N[6];var yt=N[7],gt=N[8],mt=N[9];w=N[10];var _t=N[11];_=N[12],b=N[13];var bt=N[14],wt=this.textStates[b],xt=wt.font,St=wt.scale*gt,Ot=void 0;xt in this.widths_?Ot=this.widths_[xt]:(Ot={},this.widths_[xt]=Ot);var Tt=Xo(s,ft,pt,2),kt=St*Qn(xt,_,Ot);if(vt||kt<=Tt){var Ct=this.textStates[b].textAlign,Et=zo(s,ft,pt,2,_,(Tt-kt)*jo[Ct],yt,St,Qn,xt,Ot);if(Et){var Pt=void 0,It=void 0,Rt=void 0,jt=void 0,Mt=void 0;if(w)for(Pt=0,It=Et.length;Pt<It;++Pt)Rt=(Mt=Et[Pt])[4],jt=this.createLabel(Rt,b,"",w),c=Mt[2]+_t,h=dt*jt.height+2*(.5-dt)*_t-mt,this.replayImageOrLabel_(t,Mt[0],Mt[1],jt,c,h,y,jt.height,1,0,0,Mt[3],bt,!1,jt.width,Yn,null,null);if(x)for(Pt=0,It=Et.length;Pt<It;++Pt)Rt=(Mt=Et[Pt])[4],jt=this.createLabel(Rt,b,x,""),c=Mt[2],h=dt*jt.height-mt,this.replayImageOrLabel_(t,Mt[0],Mt[1],jt,c,h,y,jt.height,1,0,0,Mt[3],bt,!1,jt.width,Yn,null,null)}}this.declutterItems.push(this,y,S),++k;break;case vo.END_GEOMETRY:if(void 0!==r){var Lt=r(S=N[1]);if(Lt)return Lt}++k;break;case vo.FILL:F?P++:this.fill_(t),++k;break;case vo.MOVE_TO_LINE_TO:for(E=N[1],l=N[2],O=s[E],v=(T=s[E+1])+.5|0,(d=O+.5|0)===f&&v===p||(t.moveTo(O,T),f=d,p=v),E+=2;E<l;E+=2)d=(O=s[E])+.5|0,v=(T=s[E+1])+.5|0,E!=l-2&&d===f&&v===p||(t.lineTo(O,T),f=d,p=v);++k;break;case vo.SET_FILL_STYLE:R=N,this.alignFill_=N[2],P&&(this.fill_(t),P=0,I&&(t.stroke(),I=0)),t.fillStyle=N[1],++k;break;case vo.SET_STROKE_STYLE:j=N,I&&(t.stroke(),I=0),this.setStrokeStyle_(t,N),++k;break;case vo.STROKE:F?I++:t.stroke(),++k;break;default:++k}}P&&this.fill_(t),I&&t.stroke()},t.prototype.execute=function(t,e,i,n){this.viewRotation_=i,this.execute_(t,e,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,e,this.hitDetectionInstructions,!0,n,r)},t}(),$o=[Bo,Do,Go,No,Yo,Fo],ts=function(){function t(t,e,i,n,r,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var n=t[e];for(var r in n){var o=n[r];i[r]=new Qo(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o){var s=2*(n=Math.round(n))+1,a=Fn(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=xn(s,s));var u,l=this.hitDetectionContext_;l.canvas.width!==s||l.canvas.height!==s?(l.canvas.width=s,l.canvas.height=s):l.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(li(u=[1/0,1/0,-1/0,-1/0],t),Je(u,e*(this.renderBuffer_+n),u));var c,h=function(t){if(void 0!==es[t])return es[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);var r=t,o=0,s=0;for(;r>=o;)is(i,t+r,t+o),is(i,t+o,t+r),is(i,t-o,t+r),is(i,t-r,t+o),is(i,t-r,t-o),is(i,t-o,t-r),is(i,t+o,t-r),is(i,t+r,t-o),o++,2*((s+=1+2*o)-r)+1>0&&(s+=1-2*(r-=1));return es[t]=i,i}(n);function f(t){for(var e=l.getImageData(0,0,s,s).data,i=0;i<s;i++)for(var n=0;n<s;n++)if(h[i][n]&&e[4*(n*s+i)+3]>0){var a=void 0;return(!o||c!=No&&c!=Yo||-1!==o.indexOf(t))&&(a=r(t)),a||void l.clearRect(0,0,s,s)}}var p,d,v,y,g,m=Object.keys(this.executorsByZIndex_).map(Number);for(m.sort(de),p=m.length-1;p>=0;--p){var _=m[p].toString();for(v=this.executorsByZIndex_[_],d=$o.length-1;d>=0;--d)if(void 0!==(y=v[c=$o[d]])&&(g=y.executeHitDetection(l,a,i,f,u)))return g}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],n=e[1],r=e[2],o=e[3],s=[i,n,i,o,r,o,r,n];return Ao(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return le(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,n,r,o){var s=Object.keys(this.executorsByZIndex_).map(Number);s.sort(de),this.maxExtent_&&(t.save(),this.clip(t,e));var a,u,l,c,h,f,p=r||$o;for(a=0,u=s.length;a<u;++a){var d=s[a].toString();for(h=this.executorsByZIndex_[d],l=0,c=p.length;l<c;++l){var v=p[l];if(void 0!==(f=h[v]))if(!o||v!=No&&v!=Yo)f.execute(t,e,i,n);else{var y=o[d];y?y.push(f,e.slice(0)):o[d]=[f,e.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),es={0:[[!0]]};function is(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}function ns(t,e,i,n,r,o){for(var s=Object.keys(t).map(Number).sort(de),a=0,u=s.length;a<u;++a)for(var l=t[s[a].toString()],c=void 0,h=0,f=l.length;h<f;){var p=l[h++];p!==c&&(c=p,o.push({items:p.declutterItems,opacity:n}));var d=l[h++];p.execute(e,d,i,r)}}var rs=ts,os=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ss=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.inversePixelTransform=i,o.frameState=n,o.context=r,o}return os(e,t),e}(we),as=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),us=function(t){function e(e){var i=t.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=e,i}return as(e,t),e.prototype.getFeatures=function(t){return Jt()},e.prototype.prepareFrame=function(t){return Jt()},e.prototype.renderFrame=function(t,e){return Jt()},e.prototype.loadedTileCallback=function(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,r){var o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,r,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){},e.prototype.getDataAtPixel=function(t,e,i){return Jt()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===Tn&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=Tn&&e!=kn&&t.addEventListener(Oe,this.boundHandleImageChange_),e==Sn&&(t.load(),e=t.getState()),e==Tn},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Wi&&t.changed()},e}(Ee),ls=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cs=function(t){function e(e){var i=t.call(this,e)||this;return i.container=null,i.renderedResolution,i.tempTransform_=[1,0,0,1,0,0],i.pixelTransform=[1,0,0,1,0,0],i.inversePixelTransform=[1,0,0,1,0,0],i.context=null,i.containerReused=!1,i}return ls(e,t),e.prototype.useContainer=function(t,e,i){var n,r,o=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===o&&((a=t.firstElementChild)instanceof HTMLCanvasElement&&(r=a.getContext("2d")));if(r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=o;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var a=(r=xn()).canvas;n.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=r}},e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n/2,o=e.size[1]*n/2,s=e.viewState.rotation,a=_i(i),u=bi(i),l=di(i),c=pi(i);An(e.coordinateToPixelTransform,a),An(e.coordinateToPixelTransform,u),An(e.coordinateToPixelTransform,l),An(e.coordinateToPixelTransform,c),t.save(),$n(t,-s,r,o),t.beginPath(),t.moveTo(a[0]*n,a[1]*n),t.lineTo(u[0]*n,u[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(c[0]*n,c[1]*n),t.clip(),$n(t,s,r,o)},e.prototype.clipUnrotated=function(t,e,i){var n=_i(i),r=bi(i),o=di(i),s=pi(i);An(e.coordinateToPixelTransform,n),An(e.coordinateToPixelTransform,r),An(e.coordinateToPixelTransform,o),An(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;An(a,n),An(a,r),An(a,o),An(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,i){var n=this.getLayer();if(n.hasListener(t)){var r=new ss(t,this.inversePixelTransform,i,e);n.dispatchEvent(r)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(Ki,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(Ui,t,e)},e.prototype.getRenderTransform=function(t,e,i,n,r,o,s){var a=r/2,u=o/2,l=n/e,c=-l,h=-t[0]+s,f=-t[1];return Fn(this.tempTransform_,a,u,l,c,-i,h,f)},e.prototype.getDataAtPixel=function(t,e,i){var n,r=An(this.inversePixelTransform,t.slice()),o=this.context;try{n=o.getImageData(Math.round(r[0]),Math.round(r[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(us),hs={Point:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=Tn)return;var o=t.getBuilder(i.getZIndex(),No);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,n)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Yo);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,n)}},LineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getBuilder(i.getZIndex(),Go);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Yo);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,n)}},Polygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var s=t.getBuilder(i.getZIndex(),Bo);s.setFillStrokeStyle(r,o),s.drawPolygon(e,n)}var a=i.getText();if(a){var u=t.getBuilder(i.getZIndex(),Yo);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,n)}},MultiPoint:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=Tn)return;var o=t.getBuilder(i.getZIndex(),No);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Yo);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,n)}},MultiLineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getBuilder(i.getZIndex(),Go);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Yo);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(o||r){var s=t.getBuilder(i.getZIndex(),Bo);s.setFillStrokeStyle(r,o),s.drawMultiPolygon(e,n)}var a=i.getText();if(a){var u=t.getBuilder(i.getZIndex(),Yo);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var r,o,s=e.getGeometriesArray();for(r=0,o=s.length;r<o;++r){(0,hs[s[r].getType()])(t,s[r],i,n)}},Circle:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var s=t.getBuilder(i.getZIndex(),Do);s.setFillStrokeStyle(r,o),s.drawCircle(e,n)}var a=i.getText();if(a){var u=t.getBuilder(i.getZIndex(),Yo);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,n)}}};function fs(t,e){return parseInt($t(t),10)-parseInt($t(e),10)}function ps(t,e){var i=ds(t,e);return i*i}function ds(t,e){return.5*t/e}function vs(t,e,i,n,r,o){var s=!1,a=i.getImage();if(a){var u=a.getImageState();u==Tn||u==kn?a.unlistenImageChange(r):(u==Sn&&a.load(),u=a.getImageState(),a.listenImageChange(r),s=!0)}return function(t,e,i,n,r){var o=i.getGeometryFunction()(e);if(!o)return;var s=o.simplifyTransformed(n,r);if(i.getRenderer())!function t(e,i,n,r){if(i.getType()==an){for(var o=i.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],n,r);return}e.getBuilder(n.getZIndex(),Fo).drawCustom(i,r,n.getRenderer())}(t,s,i,e);else{(0,hs[s.getType()])(t,s,i,e)}}(t,e,i,n,o),s}var ys=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gs=[1,0,0,1,0,0],ms=function(t){function e(){var e,i,n,r,o,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===r&&me(t,n)||(o=!0,r=this,n=t,i=e.apply(this,arguments)),i}),s}return ys(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return Jt()},e.prototype.closestPointXY=function(t,e,i,n){return Jt()},e.prototype.containsXY=function(t,e){var i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Jt()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){Jt()},e.prototype.scale=function(t,e,i){Jt()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Jt()},e.prototype.getType=function(){return Jt()},e.prototype.applyTransform=function(t){Jt()},e.prototype.intersectsExtent=function(t){return Jt()},e.prototype.translate=function(t,e){Jt()},e.prototype.transform=function(t,e){var i=qr(t),n=i.getUnits()==Or.TILE_PIXELS?function(t,n,r){var o=i.getExtent(),s=i.getWorldExtent(),a=gi(s)/gi(o);return Fn(gs,s[0],s[3],a,-a,0,0,0),Ao(t,0,t.length,r,gs,n),Zr(i,e)(t,n,r)}:Zr(i,e);return this.applyTransform(n),this},e}(Le),_s="XY",bs="XYZ",ws="XYM",xs="XYZM",Ss=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Os(t){var e;return t==_s?e=2:t==bs||t==ws?e=3:t==xs&&(e=4),e}var Ts=function(t){function e(){var e=t.call(this)||this;return e.layout=_s,e.stride=2,e.flatCoordinates=null,e}return Ss(e,t),e.prototype.computeExtent=function(t){return si(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Jt()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Os(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Jt()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=Os(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=_s,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=_s:3==t?e=bs:4==t&&(e=xs);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,r,o,s){for(var a=s||[],u=Math.cos(r),l=Math.sin(r),c=o[0],h=o[1],f=0,p=e;p<i;p+=n){var d=t[p]-c,v=t[p+1]-h;a[f++]=c+d*u-v*l,a[f++]=h+d*l+v*u;for(var y=p+2;y<p+n;++y)a[f++]=t[y]}s&&a.length!=f&&(a.length=f)}(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=vi(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,i,n,r,o,s,a){for(var u=a||[],l=s[0],c=s[1],h=0,f=e;f<i;f+=n){var p=t[f]-l,d=t[f+1]-c;u[h++]=l+r*p,u[h++]=c+o*d;for(var v=f+2;v<f+n;++v)u[h++]=t[v]}a&&u.length!=h&&(u.length=h)}(o,0,o.length,s,t,n,r,o),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,r,o,s){for(var a=s||[],u=0,l=e;l<i;l+=n){a[u++]=t[l]+r,a[u++]=t[l+1]+o;for(var c=l+2;c<l+n;++c)a[u++]=t[c]}s&&a.length!=u&&(a.length=u)}(i,0,i.length,n,t,e,i),this.changed()}},e}(ms),ks=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cs=function(t){function e(e,i,n,r,o,s,a){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=i,u.extent_=n,u.transform_=r,u.viewRotation_=o,u.squaredTolerance_=s,u.userTransform_=a,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=0,u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=0,u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}return ks(e,t),e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var r=Ao(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=r.length;l<c;l+=2){var h=r[l]-this.imageAnchorX_,f=r[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var p=h+this.imageAnchorX_,d=f+this.imageAnchorY_;Fn(s,p,d,this.imageScale_,this.imageScale_,u,-p,-d),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Ao(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=n){var a=r[e]+this.textOffsetX_,u=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var l=Fn(this.tmpLocalTransform_,a,u,this.textScale_,this.textScale_,s,-a,-u);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,a,u),this.textFillState_&&o.fillText(this.text_,a,u)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,s=Ao(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var u=2;u<a;u+=2)o.lineTo(s[u],s[u+1]);return r&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},e.prototype.drawCircle=function(t){if(xi(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var n=t.getFlatCoordinates();if(n){var r=t.getStride();return Ao(n,0,n.length,r,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case $i:this.drawPoint(t);break;case tn:this.drawLineString(t);break;case nn:this.drawPolygon(t);break;case rn:this.drawMultiPoint(t);break;case on:this.drawMultiLineString(t);break;case sn:this.drawMultiPolygon(t);break;case an:this.drawGeometryCollection(t);break;case un:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&xi(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),xi(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(xi(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,u=o.length;a<u;++a)r=this.moveToLineTo_(n,r,o[a],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),xi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),xi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var u=r[s];n=this.drawRings_(i,n,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(me(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:"center";i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:mn(i||"#000")}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:"round",lineDash:o||Bn,lineDashOffset:s||0,lineJoin:void 0!==a?a:"round",lineWidth:this.pixelRatio_*(void 0!==u?u:1),miterLimit:void 0!==l?l:10,strokeStyle:mn(n||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:mn(i||"#000")}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),s=n.getLineDash(),a=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:s||Bn,lineDashOffset:a||0,lineJoin:void 0!==u?u:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:mn(r||"#000")}}else this.textStrokeState_=null;var h=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),v=t.getRotation(),y=t.getScale(),g=t.getText(),m=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==h?h:"10px sans-serif",textAlign:void 0!==m?m:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==g?g:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==v?v:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},e}(uo),Es="fraction",Ps="pixels",Is=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,i){var n=Rs(t,e,i);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,i,n){var r=Rs(t,e,i);this.cache_[r]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Rs(t,e,i){return e+":"+t+":"+(i?function(t){return"string"==typeof t?t:gn(t)}(i):"null")}var js=new Is,Ms=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ls=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=i,o.state=r,o}return Ms(e,t),e.prototype.changed=function(){this.dispatchEvent(Oe)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Jt()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Jt()},e}(Se),As=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Ds(t,e,i){var n=t;if(n.src&&wn){var r=n.decode(),o=!0;return r.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():i())})),function(){o=!1}}var s=[he(n,ke,e),he(n,Te,i)];return function(){s.forEach(fe)}}var Fs=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,n,Sn)||this;return a.src_=r,a.image_=new Image,null!==o&&(a.image_.crossOrigin=o),a.unlisten_=null,a.state=Sn,a.imageLoadFunction_=s,a}return As(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=kn,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=gi(this.extent)/this.image_.height),this.state=Tn,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=Sn&&this.state!=kn||(this.state=On,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Ds(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Ls),Ns=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gs=function(t){function e(e,i,n,r,o,s){var a=t.call(this)||this;return a.hitDetectionImage_=null,a.image_=e||new Image,null!==r&&(a.image_.crossOrigin=r),a.canvas_=s?document.createElement("canvas"):null,a.color_=s,a.unlisten_=null,a.imageState_=o,a.size_=n,a.src_=i,a.tainted_,a}return Ns(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&this.imageState_===Tn){t||(t=xn(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Oe)},e.prototype.handleImageError_=function(){this.imageState_=kn,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Tn,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],n=xn(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Sn){this.imageState_=On;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Ds(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var i=t.getImageData(0,0,this.image_.width,this.image_.height),n=i.data,r=this.color_[0]/255,o=this.color_[1]/255,s=this.color_[2]/255,a=0,u=n.length;a<u;a+=4)n[a]*=r,n[a+1]*=o,n[a+2]*=s;t.putImageData(i,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Se);var Bs="bottom-left",Ys="bottom-right",Xs="top-left",zs="top-right",Ws=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qs=function(t){function e(e){var i=this,n=e||{},r=void 0!==n.opacity?n.opacity:1,o=void 0!==n.rotation?n.rotation:0,s=void 0!==n.scale?n.scale:1,a=void 0!==n.rotateWithView&&n.rotateWithView;(i=t.call(this,{opacity:r,rotation:o,scale:s,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:a})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:Xs,i.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:Es,i.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:Es,i.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var u=void 0!==n.img?n.img:null,l=void 0!==n.imgSize?n.imgSize:null,c=n.src;Ge(!(void 0!==c&&u),4),Ge(!u||u&&l,5),void 0!==c&&0!==c.length||!u||(c=u.src||$t(u)),Ge(void 0!==c&&c.length>0,6);var h=void 0!==n.src?Sn:Tn;return i.color_=void 0!==n.color?vn(n.color):null,i.iconImage_=function(t,e,i,n,r,o){var s=js.get(e,n,o);return s||(s=new Gs(t,e,i,n,r,o),js.set(e,n,o,s)),s}(u,c,l,i.crossOrigin_,h,i.color_),i.offset_=void 0!==n.offset?n.offset:[0,0],i.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:Xs,i.origin_=null,i.size_=void 0!==n.size?n.size:null,i}return Ws(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==Es||this.anchorYUnits_==Es){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Es&&(t[0]*=e[0]),this.anchorYUnits_==Es&&(t[1]*=e[1])}if(this.anchorOrigin_!=Xs){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=zs&&this.anchorOrigin_!=Ys||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Bs&&this.anchorOrigin_!=Ys||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=Xs){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),this.offsetOrigin_!=zs&&this.offsetOrigin_!=Ys||(t[0]=n[0]-i[0]-t[0]),this.offsetOrigin_!=Bs&&this.offsetOrigin_!=Ys||(t[1]=n[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Oe,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Oe,t)},e}(nr);function Vs(t,e,i,n,r,o,s){var a=xn(t[0]/2,t[1]/2);a.imageSmoothingEnabled=!1;for(var u=a.canvas,l=new Cs(a,.5,r,null,s),c=i.length,h=Math.floor(16777215/c),f={},p=1;p<=c;++p){var d=i[p-1],v=d.getStyleFunction()||n;if(n){var y=v(d,o);if(y){Array.isArray(y)||(y=[y]);for(var g="#"+("000000"+(p*h).toString(16)).slice(-6),m=0,_=y.length;m<_;++m){var b=y[m],w=b.clone(),x=w.getFill();x&&x.setColor(g);var S=w.getStroke();S&&S.setColor(g),w.setText(void 0);var O=b.getImage();if(O){var T=O.getImageSize();if(!T)continue;var k=document.createElement("canvas");k.width=T[0],k.height=T[1];var C=k.getContext("2d",{alpha:!1});C.fillStyle=g;var E=C.canvas;C.fillRect(0,0,E.width,E.height),xn(T?T[0]:E.width,T?T[1]:E.height).drawImage(E,0,0),w.setImage(new qs({img:E,imgSize:T,anchor:O.getAnchor(),anchorXUnits:Ps,anchorYUnits:Ps,offset:O.getOrigin(),size:O.getSize(),opacity:O.getOpacity(),scale:O.getScale(),rotation:O.getRotation(),rotateWithView:O.getRotateWithView()}))}var P=Number(w.getZIndex());(M=f[P])||(M={},f[P]=M,M[nn]=[],M[un]=[],M[tn]=[],M[$i]=[]);var I=w.getGeometryFunction()(d);I&&xi(r,I.getExtent())&&M[I.getType().replace("Multi","")].push(I,w)}}}}for(var R=Object.keys(f).map(Number).sort(de),j=(p=0,R.length);p<j;++p){var M=f[R[p]];for(var L in M){var A=M[L];for(m=0,_=A.length;m<_;m+=2){l.setStyle(A[m+1]);for(var D=0,F=e.length;D<F;++D)l.setTransform(e[D]),l.drawGeometry(A[m])}}}return document.body.appendChild(a.canvas),a.getImageData(0,0,u.width,u.height)}function Hs(t,e,i){var n=[];if(i){var r=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),o=i.data[r],s=i.data[r+1],a=i.data[r+2]+256*(s+256*o),u=Math.floor(16777215/e.length);a&&a%u==0&&n.push(e[a/u-1])}return n}var Ks=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Us=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=[1/0,1/0,-1/0,-1/0],i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i}return Ks(e,t),e.prototype.useContainer=function(e,i,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,i,n)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,i){Ln(t,e,0,0,i,0,0)}(this.pixelTransform,1/i,1/i),Nn(this.inversePixelTransform,this.pixelTransform);var r=Gn(this.pixelTransform);this.useContainer(e,r,n.opacity);var o=this.context,s=o.canvas,a=this.replayGroup_;if(!a||a.isEmpty())return!this.containerReused&&s.width>0&&(s.width=0),this.container;var u=Math.round(t.size[0]*i),l=Math.round(t.size[1]*i);s.width!=u||s.height!=l?(s.width=u,s.height=l,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,u,l),this.preRender(o,t);var c=t.extent,h=t.viewState,f=h.center,p=h.resolution,d=h.projection,v=h.rotation,y=d.getExtent(),g=this.getLayer().getSource(),m=!1;if(n.extent){var _=ro(n.extent,d);(m=!ti(_,t.extent)&&xi(_,t.extent))&&this.clip(o,t,_)}var b=t.viewHints,w=!(b[mr]||b[_r]),x=this.getRenderTransform(f,p,v,i,u,l,0),S=this.getLayer().getDeclutter()?{}:null;if(a.execute(o,x,v,w,void 0,S),g.getWrapX()&&d.canWrapX()&&!ti(y,c)){for(var O=c[0],T=wi(y),k=0,C=void 0;O<y[0];){C=T*--k;var E=this.getRenderTransform(f,p,v,i,u,l,C);a.execute(o,E,v,w,void 0,S),O+=T}for(k=0,O=c[2];O>y[2];){C=T*++k;var P=this.getRenderTransform(f,p,v,i,u,l,C);a.execute(o,P,v,w,void 0,S),O-=T}}if(S){var I=t.viewHints;ns(S,o,v,1,!(I[mr]||I[_r]),t.declutterItems)}m&&o.restore(),this.postRender(o,t);var R=n.opacity,j=this.container;return R!==parseFloat(j.style.opacity)&&(j.style.opacity=1===R?"":R),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];An(this.pixelTransform,n);var r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,u=this.renderedExtent_,l=this.getLayer(),c=[],h=n[0]/2,f=n[1]/2;c.push(this.getRenderTransform(r,o,s,.5,h,f,0).slice());var p=l.getSource(),d=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!ti(d,u)){for(var v=u[0],y=wi(d),g=0,m=void 0;v<d[0];)m=y*--g,c.push(this.getRenderTransform(r,o,s,.5,h,f,m).slice()),v+=y;for(g=0,v=u[2];v>d[2];)m=y*++g,c.push(this.getRenderTransform(r,o,s,.5,h,f,m).slice()),v-=y}this.hitDetectionImageData_=Vs(n,c,this.renderedFeatures_,l.getStyleFunction(),u,o,s)}e(Hs(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){if(this.replayGroup_){var o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,i,(function(t){var e=$t(t);if(!(e in u))return u[e]=!0,n(t,a)}),a.getDeclutter()?r:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var n=t.viewHints[mr],r=t.viewHints[_r],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!s&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var a=t.extent,u=t.viewState,l=u.projection,c=u.resolution,h=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=fs);var v=u.center.slice(),y=Je(a,p*c),g=[y.slice()],m=l.getExtent();if(i.getWrapX()&&l.canWrapX()&&!ti(m,t.extent)){var _=wi(m),b=Math.max(wi(y)/2,_);y[0]=m[0]-b,y[2]=m[2]+b,br(v,l);var w=function(t,e){var i=e.getExtent(),n=vi(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){var r=wi(i),o=Math.floor((n[0]-i[0])/r)*r;t[0]-=o,t[2]-=o}return t}(g[0],l);w[0]<m[0]&&w[2]<m[2]?g.push([w[0]+_,w[1],w[2]+_,w[3]]):w[0]>m[0]&&w[2]>m[2]&&g.push([w[0]-_,w[1],w[2]-_,w[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&ti(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x,S=new Lo(ds(c,h),y,c,h,e.getDeclutter()),O=io;if(O){for(var T=0,k=g.length;T<k;++T)i.loadFeatures(no(g[T],l),c,O);x=Ur(O,l)}else for(T=0,k=g.length;T<k;++T)i.loadFeatures(g[T],c,l);var C=ps(c,h),E=function(t){var i,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,c)),i){var r=this.renderFeature(t,C,i,S,x);this.dirty_=this.dirty_||r}}.bind(this),P=no(y,l),I=i.getFeaturesInExtent(P);d&&I.sort(d);for(T=0,k=I.length;T<k;++T)E(I[T]);this.renderedFeatures_=I;var R=S.finish(),j=new rs(y,c,h,i.getOverlaps(),R,e.getRenderBuffer());return this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=y,this.renderedRotation_=u.rotation,this.renderedCenter_=v,this.renderedProjection_=l,this.replayGroup_=j,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)o=vs(n,t,i[s],e,this.boundHandleStyleImageChange_,r)||o;else o=vs(n,t,i,e,this.boundHandleStyleImageChange_,r);return o},e}(cs),Zs=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Js=function(t){function e(e){return t.call(this,e)||this}return Zs(e,t),e.prototype.createRenderer=function(){return new Us(this)},e}(gr);function Qs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ta=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.url,n=void 0===i?void 0:i,r=e.datetime,o=void 0===r?void 0:r,s=e.mimetype,a=void 0===s?void 0:s,u=e.reloadTime,l=void 0===u?void 0:u,c=e.className,h=void 0===c?void 0:c,f=e.imageSmoothingEnabled,p=void 0===f?void 0:f,d=e.ol,v=void 0===d?{}:d;Qs(this,t),this.options={url:n,datetime:o,mimetype:a,reloadTime:l,className:h,imageSmoothingEnabled:p,ol:v},this._normalizeOLOptions(this.options.ol),this.layer=void 0,this.layerGroup=void 0,this.reloadTimerId=void 0,this.visible=!1,this.zIndex=void 0,this.opacity=1}var e,i,n;return e=t,(i=[{key:"getId",value:function(){return this.getUrl()}},{key:"getUrl",value:function(){return this.options.url}},{key:"getDatetime",value:function(){return this.options.datetime}},{key:"getMIMEType",value:function(){return void 0===this.options.mimetype?"application/octet-stream":this.options.mimetype}},{key:"getReloadTime",value:function(){return this.options.reloadTime}},{key:"setReloadTime",value:function(t){return this.options.reloadTime=t,this._reload(),this}},{key:"getVisible",value:function(){return this.visible}},{key:"setVisible",value:function(t){return this.visible=t,void 0!==this.layer&&("setVisible"in this.layer?this.layer.setVisible(t):this.visible?this.layer.addTo(this.layerGroup):this.layerGroup.removeLayer(this.layer)),this}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setZIndex",value:function(t){return this.zIndex=t,void 0!==this.layer&&this.layer.setZIndex(t),this}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setOpacity",value:function(t){return this.opacity=t,void 0!==this.layer&&this.layer.setOpacity(t),this}},{key:"getLayerGroup",value:function(){return this.layerGroup}},{key:"setLayerGroup",value:function(t){if(void 0!==this.layerGroup&&void 0!==this.layer&&("remove"in this.layerGroup.getLayers()?this.layerGroup.getLayers().remove(this.layer):this.layerGroup.removeLayer(this.layer)),void 0===t&&(this.layer=void 0),this.layerGroup=t,void 0!==this.layerGroup)if("addLayer"in this.layerGroup){var e=this.getLLLayer();this.getVisible()&&this.layerGroup.addLayer(e)}else this.layerGroup.getLayers().push(this.getOLLayer());return this.setReloadTime(this.getReloadTime()),this}},{key:"getOLLayer",value:function(){return void 0!==this.layer||(this.layer=this._makeOLLayer()),this.layer}},{key:"makeOLLayer",value:function(){return new Js({className:this.className})}},{key:"_makeOLLayer",value:function(){var t=this,e=this.makeOLLayer();return e.setVisible(this.visible),e.setZIndex(this.zIndex),e.setOpacity(this.opacity),"events"in this.options.ol&&void 0!==this.options.ol.events&&["prerender","postrender"].forEach((function(i){i in t.options.ol.events&&void 0!==t.options.ol.events[i]&&e.on(i,(function(n){t.options.ol.events[i].call(t,n,e)}))})),void 0===this.options.imageSmoothingEnabled||this.options.imageSmoothingEnabled||(e.on("prerender",(function(e){e.context.imageSmoothingEnabled=t.options.imageSmoothingEnabled})),e.on("postrender",(function(e){e.context.imageSmoothingEnabled=!t.options.imageSmoothingEnabled}))),e}},{key:"getLLLayer",value:function(){return void 0!==this.layer||(this.layer=this._makeLLLayer()),this.layer}},{key:"makeLLLayer",value:function(){return L.Layer()}},{key:"_makeLLLayer",value:function(){return this.makeLLLayer()}},{key:"_reload",value:function(){if(void 0!==this.reloadTimerId&&(clearTimeout(this.reloadTimerId),this.reloadTimerId=void 0),void 0!==this.options.reloadTime&&void 0!==this.layerGroup){var t=function(){if(this.reloadTimerId=void 0,void 0!==this.layerGroup){var e=this._makeOLLayer();if("getUrl"in e.getSource()){var i=this.layerGroup,n=e.getSource().on("change",function(){"ready"!=e.getSource().getState()&&"error"!=e.getSource().getState()||(function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)fe(t[e]);else fe(t)}(n),"ready"==e.getSource().getState()&&void 0!==this.layerGroup?(e.setVisible(this.layer.getVisible()),e.setOpacity(this.layer.getOpacity()),e.setZIndex(this.layer.getZIndex()),this.layerGroup.getLayers().remove(this.layer),this.layer=e):void 0!==this.layerGroup?this.layerGroup.getLayers().remove(e):i.getLayers().remove(e),void 0===this.reloadTimerId&&void 0!==this.options.reloadTime&&void 0!==this.layerGroup&&(this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime)))}.bind(this));this.layerGroup.getLayers().push(e),e.setVisible(!0)}else this.layerGroup.getLayers().push(e),e.setVisible(!0),setTimeout(function(){this.layer=e,void 0===this.reloadTimerId&&void 0!==this.options.reloadTime&&(this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime))}.bind(this),1e3)}}.bind(this);return this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime),this}}},{key:"_normalizeOLOptions",value:function(t){var e=t.source,i=void 0===e?{}:e,n=t.events,r=void 0===n?void 0:n,o=t.style,s=void 0===o?void 0:o;this.options.ol={source:i,events:r,style:s}}},{key:"className",get:function(){return this.options.className},set:function(t){this.options.className=t}},{key:"imageSmoothingEnabled",get:function(){return this.options.imageSmoothingEnabled},set:function(t){this.options.imageSmoothingEnabled=t}}])&&$s(e.prototype,i),n&&$s(e,n),t}();A(ta.prototype);var ea=ta;function ia(t){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ra(t,e,i){return(ra="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ua(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function oa(t,e){return(oa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ua(t);if(e){var r=ua(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return aa(this,i)}}function aa(t,e){return!e||"object"!==ia(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var la=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oa(t,e)}(o,t);var e,i,n,r=sa(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).times=[],t}return e=o,(i=[{key:"getResources",value:function(){return this.times.map((function(t){return this.items[t.valueOf()]}),this)}},{key:"getTimes",value:function(){return this.times}},{key:"getItemById",value:function(t){var e=ra(ua(o.prototype),"getItemById",this).call(this,t);return void 0===e?new ea:e}},{key:"getResourceByTime",value:function(t){return this.getItemById(isNaN(t)?"":t.valueOf())}},{key:"containsTime",value:function(t){return this.getIndexById(isNaN(t)?"":t.valueOf())>-1}},{key:"getIndexByTime",value:function(t){var e=-1;return isNaN(t)||this.times.forEach((function(i,n){i.valueOf()==t.valueOf()&&(e=n)})),e}},{key:"getNewestResource",value:function(){return this.times.length<1?new ea:this.getResourceByTime(this.times[this.times.length-1])}},{key:"append",value:function(t){return this._append(t),this._sortTimes(),this}},{key:"remove",value:function(t){return this._remove(isNaN(t)?"":t.valueOf()),this._sortTimes(),this}},{key:"setResources",value:function(t){return t.forEach((function(t){this._append(t)}),this),this._filterTimesByResources(t),this._sortTimes(),this}},{key:"_append",value:function(t){var e=t.getDatetime(),i=void 0===e?"":e.valueOf();this.containsId(i)?(this.trigger("replace:item",t,this.getItemById(i)),this.items[i]=t):(this.itemIds.push(i),this.items[i]=t,void 0===e||isNaN(e)||this.times.push(e),this.trigger("add:item",t))}},{key:"_remove",value:function(t){var e=this.getIndexById(t);if(e>-1){var i=this.items[t];if(delete this.items[t],this.itemIds.splice(e,1),void 0!==t&&""!==t&&!isNaN(t)){var n=this.times.findIndex((function(e){return e.valueOf()==t}));n>-1&&this.times.splice(n,1)}this.trigger("remove:item",i)}}},{key:"_filterTimesByResources",value:function(t){var e=!1;this.times=this.times.filter((function(i){var n=!1;return t.findIndex((function(t){var n=!1,r=t.getDatetime();return void 0!==r&&i.valueOf()==r.valueOf()?n=!0:void 0===r&&(e=!0),n}),this)<0&&(this.remove(i.valueOf()),n=!0),!n}),this),e&&this.remove("")}},{key:"_sortTimes",value:function(){this.times.sort((function(t,e){return t.valueOf()-e.valueOf()}))}}])&&na(e.prototype,i),n&&na(e,n),o}(Zt);function ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ha(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var fa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id,n=void 0===i?void 0:i,r=e.visible,o=void 0===r||r,s=e.zIndex,a=void 0===s?void 0:s,u=e.displayMethod,l=void 0===u?"floor":u,c=e.displayMaxResourceAge,h=void 0===c?10800:c,f=e.displayFadeStart,p=void 0===f?900:f,d=e.displayFadeStartOpacity,v=void 0===d?.95:d,y=e.resources,g=void 0===y?void 0:y,m=e.className,_=void 0===m?void 0:m,b=e.imageSmoothingEnabled,w=void 0===b?void 0:b,x=e.tooltip,S=void 0===x?void 0:x;ca(this,t),this.options={id:n,visible:o,zIndex:a,displayMethod:l,displayMaxResourceAge:h,displayFadeStart:p,displayFadeStartOpacity:v,resources:g,className:_,imageSmoothingEnabled:w,tooltip:S},this.layerGroup=void 0,this.collection=new la,this.displayedResourceTime=new Date("invalid"),this.collection.on("add:item",(function(t){t.className=this.className,this._addOLLayer(t)}),this),this.collection.on("remove:item",(function(t){this._removeOLLayer(t)}),this),this.collection.on("replace:item",(function(t,e){t!==e&&(t.className=this.className,this._replaceOLLayer(t,e))}),this),void 0!==this.options.resources&&this.collection.setResources(this.options.resources),delete this.options.resources}var e,i,n;return e=t,(i=[{key:"getId",value:function(){return this.options.id}},{key:"setId",value:function(t){return this.options.id=t,this}},{key:"getVisible",value:function(){return this.options.visible}},{key:"setVisible",value:function(t){return(this.options.visible?!t:t)&&(this.options.visible=!!t,void 0!==this.layerGroup&&this.layerGroup.setVisible(this.options.visible),this.getResourceCollection().getItems().forEach((function(t){isNaN(t.getDatetime())&&t.setVisible(this.options.visible),t.setLayerGroup(this.options.visible?this.layerGroup:void 0)}),this),this.trigger("change:visible")),this}},{key:"getZIndex",value:function(){return this.options.zIndex}},{key:"setZIndex",value:function(t){return this.options.zIndex=t,void 0!==this.layerGroup&&this.layerGroup.setZIndex(t),this.getResourceCollection().getItems().forEach((function(e){e.setZIndex(t)})),this}},{key:"getLayerGroup",value:function(){return void 0===this.layerGroup?new Hi:this.layerGroup}},{key:"setLayerGroup",value:function(t){return this.layerGroup=t,void 0!==this.layerGroup&&("setVisible"in this.layerGroup&&this.layerGroup.setVisible(this.options.visible),this.layerGroup.setZIndex(this.options.zIndex)),this.getResourceCollection().getItems().forEach((function(e){e.setLayerGroup(this.options.visible?t:void 0)}),this),this}},{key:"getResourceCollection",value:function(){return this.collection}},{key:"appendResource",value:function(t){return this.collection.append(t),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"removeResource",value:function(t){return this._hideVisibleResource(),this.collection.remove(t.getDatetime()),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"setResources",value:function(t){return this._hideVisibleResource(),this.collection.setResources(t),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"getDisplayedResource",value:function(){return this.getVisible()&&void 0!==this.layerGroup?isNaN(this.displayedResourceTime)&&this.collection.getTimes().length>0?new ea:this.collection.getResourceByTime(this.displayedResourceTime):new ea}},{key:"setDisplayTime",value:function(t){if(!this.getVisible())return this;var e=this._getResourceTimeByDisplayTime(t);if((void 0===e||void 0!==e&&!isNaN(this.displayedResourceTime)&&this.displayedResourceTime.valueOf()!=e.valueOf())&&this._hideVisibleResource(),void 0!==e){this.displayedResourceTime=e;var i=this.getResourceCollection().getItemById(e.valueOf());if(i.getId()){i.setVisible(!0);var n=1;Math.abs(t.valueOf()-e.valueOf())>1e3*this.options.displayMaxResourceAge?n=0:Math.abs(t.valueOf()-e.valueOf())>1e3*this.options.displayFadeStart&&(n=this.options.displayFadeStartOpacity*(Math.abs(t.valueOf()-e.valueOf())-1e3*this.options.displayMaxResourceAge)/(1e3*(this.options.displayFadeStart-this.options.displayMaxResourceAge))),i.setOpacity(n)}}else this.displayedResourceTime=new Date("invalid");return this}},{key:"getTooltip",value:function(){return this.options.tooltip}},{key:"setTooltip",value:function(t){return this.options.tooltip=t,this}},{key:"setResourcesOLStyle",value:function(){var t=arguments;return this.getResourceCollection().getItems().forEach((function(e){"setOLStyle"in e&&e.setOLStyle.apply(e,t)})),this}},{key:"_hideVisibleResource",value:function(){isNaN(this.displayedResourceTime)||this.getResourceCollection().getItemById(this.displayedResourceTime.valueOf()).setVisible(!1)}},{key:"_addOLLayer",value:function(t){isNaN(t.getDatetime())&&t.setVisible(this.getVisible()),void 0!==this.options.imageSmoothingEnabled&&void 0===t.imageSmoothingEnabled&&(t.imageSmoothingEnabled=this.options.imageSmoothingEnabled),t.setLayerGroup(this.getLayerGroup()),t.setZIndex(this.options.zIndex)}},{key:"_removeOLLayer",value:function(t){t.setLayerGroup(void 0)}},{key:"_replaceOLLayer",value:function(t,e){this._removeOLLayer(e),this._addOLLayer(t)}},{key:"_getResourceTimeByDisplayTime",value:function(t){if(!isNaN(t)){var e=void 0;return this.collection.getTimes().forEach((function(i){switch(this.options.displayMethod){case"exact":t.valueOf()==i.valueOf()&&(e=i);break;case"nearest":(void 0===e||Math.abs(t.valueOf()-i.valueOf())<Math.abs(t.valueOf()-e.valueOf()))&&(e=i);break;case"floor":default:(void 0===e||i.valueOf()<=t.valueOf()&&t.valueOf()-i.valueOf()<t.valueOf()-e.valueOf())&&(e=i)}}),this),e}}},{key:"className",get:function(){return this.options.className},set:function(t){this.options.className=t}}])&&ha(e.prototype,i),n&&ha(e,n),t}();A(fa.prototype);var pa=fa;function da(t){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function va(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ya(t,e,i){return(ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ba(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function ga(t,e){return(ga=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ma(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ba(t);if(e){var r=ba(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return _a(this,i)}}function _a(t,e){return!e||"object"!==da(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ba(t){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ga(t,e)}(o,t);var e,i,n,r=ma(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).options=Z.a.extend(!0,{exclusiveVisibility:!1,syncVisibility:!1},t),e}return e=o,(i=[{key:"getItemById",value:function(t){return void 0===ya(ba(o.prototype),"getItemById",this).call(this,t)?new pa:this.items[t]}},{key:"append",value:function(t){var e=this;return this.options.exclusiveVisibility&&t.getVisible()&&this.isVisible()?t.setVisible(!1):e.options.syncVisibility&&(t.getVisible()?this.isVisible()||this.getItems().forEach((function(t){t.setVisible(!0)}),this):this.isVisible()&&t.setVisible(!0)),t.on("change:visible",(function(){e.options.exclusiveVisibility?this.getVisible()&&e.getItems().forEach((function(t){t.getId()!=this.getId()&&t.setVisible(!1)}),this):e.options.syncVisibility&&e.getItems().forEach((function(t){t.getId()!=this.getId()&&t.setVisible(this.getVisible())}),this)})),ya(ba(o.prototype),"append",this).call(this,t)}},{key:"getVisibleTypes",value:function(){return this.getItems().filter((function(t){return t.getVisible()}))}},{key:"isVisible",value:function(){return this.getVisibleTypes().length>0}},{key:"setExclusiveVisibility",value:function(t){if(this.options.exclusiveVisibility!=t&&t){var e=!1;this.getItems().forEach((function(t){e?t.setVisible(!1):e=t.getVisible()}),this)}return this.options.exclusiveVisibility=t,this}},{key:"setSyncVisibility",value:function(t){return this.options.syncVisibility!=t&&t&&this.isVisible()&&this.getItems().forEach((function(t){t.setVisible(!0)}),this),this.options.syncVisibility=t,this}}])&&va(e.prototype,i),n&&va(e,n),o}(Zt);var xa=function t(e){var i=this,n=e.map,r=e.typeCollection,o=e.tooltip;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tooltipFeature=void 0,this.tooltipPixelColor=void 0,this.map=n,this.typeCollection=r,this.tooltip=o,Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.tooltip),"tooltipNode")&&void 0===this.tooltip.tooltipNode&&(this.tooltip.tooltipNode=Z()("<div>").css("position","absolute").prependTo(this.map.getMap().getTargetElement())),this.tooltip.on("hide:tooltip",(function(){i.tooltipFeature=void 0,i.tooltipPixelColor=void 0})),this.map.on("move:pointer",(function(t){if(!t.dragging)if((t=i.map.getExtendedEventByTypeCollection(t,i.typeCollection)).feature||t.color){if(t.feature===i.tooltipFeature&&(void 0===t.color&&void 0===i.tooltipPixelColor||void 0!==t.color&&void 0!==i.tooltipPixelColor&&t.color.join(",")===i.tooltipPixelColor.join(",")))return void i.tooltip.show({posX:t.pixel[0],posY:t.pixel[1]});i.tooltipFeature=void 0,i.tooltipPixelColor=void 0;var e=t.synviewType.getTooltip().call(void 0,t);void 0!==e?(i.tooltipFeature=t.feature,i.tooltipPixelColor=t.color,i.tooltip.content=e,i.tooltip.hide().show({posX:t.pixel[0],posY:t.pixel[1]})):i.tooltip.hide()}else i.tooltip.hide()}))};function Sa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Oa=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Z.a.extend(!0,{map:void 0,timeline:void 0,tooltip:void 0},e),void 0===this.options.map&&(this.options.map=new Ht),void 0===this.options.timeline&&(this.options.timeline=new q),this.typeCollection=new wa,this.tooltip=void 0,this.options.timeline.on("change:time",(function(){this.getTypeCollection().getItems().map((function(t){t.setDisplayTime(this.options.timeline.getSelectedTime())}),this)}),this);var i=this.options.timeline,n=function(){var t=i.isLastEnabledTime();this.getVisible()?i.setTimesBySetID(this.getId(),this.getResourceCollection().getTimes()):i.setTimesBySetID(this.getId(),[]),t?i.last():isNaN(i.getSelectedTime())&&i.first()},r=function(t){t.setLayerGroup(this.options.map.makeLayerGroup()),n.call(t),t.setDisplayTime(this.getTimeline().getSelectedTime()),t.on("change:resources",n),t.on("change:visible",n),void 0!==t.getTooltip()&&void 0===this.tooltip&&(this.tooltip=new xa({map:this.options.map,typeCollection:this.typeCollection,tooltip:this.options.tooltip}))},o=function(t){this.getTimeline().deleteSetID(t.getId())};this.typeCollection.on("add:item",r,this),this.typeCollection.on("remove:item",o,this),this.typeCollection.on("replace:item",(function(t,e){r.call(this,t),o.call(this,e)}),this)}var e,i,n;return e=t,(i=[{key:"getTimeline",value:function(){return this.options.timeline}},{key:"getMap",value:function(){return this.options.map}},{key:"getTypeCollection",value:function(){return this.typeCollection}},{key:"appendType",value:function(t){if(void 0===t.getId()){var e,i=0;do{e="synview-type-"+i++}while(this.getTypeCollection().containsId(e));t.setId(e)}return this.getTypeCollection().append(t),this}},{key:"getTooltip",value:function(){return this.options.tooltip}}])&&Sa(e.prototype,i),n&&Sa(e,n),t}();function Ta(t){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ka(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return Ca(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ca(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ca(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ea(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pa(t,e,i){return(Pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=La(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Ia(t,e){return(Ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ra(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=La(t);if(e){var r=La(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ja(this,i)}}function ja(t,e){return!e||"object"!==Ta(e)&&"function"!=typeof e?Ma(t):e}function Ma(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function La(t){return(La=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Aa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ia(t,e)}(o,t);var e,i,n,r=Ra(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),void 0===(e=r.call(this,t)).options.layerGroup&&(e.options.layerGroup=new Hi,e.options.map.addLayer(e.options.layerGroup)),e.options.map.getView().on("change:center",function(){this.trigger("change:view",this)}.bind(Ma(e))),e.options.map.getView().on("change:resolution",function(){this.trigger("change:view",this)}.bind(Ma(e))),e.options.map.on("pointermove",function(t){this.trigger("move:pointer",t)}.bind(Ma(e))),e.options.map.on("click",function(t){this.trigger("click:pointer",t)}.bind(Ma(e))),e.options.map.on("singleclick",function(t){this.trigger("singleclick:pointer",t)}.bind(Ma(e))),e.options.map.on("dblclick",function(t){this.trigger("dblclick:pointer",t)}.bind(Ma(e))),e.options.map.on("pointerdrag",function(t){this.trigger("drag:pointer",t)}.bind(Ma(e))),e}return e=o,(i=[{key:"getViewCenter",value:function(){return Jr(this.options.map.getView().getCenter(),this.options.map.getView().getProjection(),"EPSG:4326")}},{key:"setViewCenter",value:function(t){var e,i=!0;return t=t.map((function(t){return isNaN(t)?void(i=!1):1*t})),i&&this.options.map.getView().setCenter(Jr(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")),this}},{key:"getViewZoom",value:function(){return this.options.map.getView().getZoom()}},{key:"setViewZoom",value:function(t){return isNaN(t)||this.options.map.getView().setZoom(1*t),this}},{key:"makeLayerGroup",value:function(){var t=new Hi;return this.options.layerGroup.getLayers().push(t),t}},{key:"getExtendedEventByTypeCollection",value:function(t,e){t=Pa(La(o.prototype),"getExtendedEventByTypeCollection",this).call(this,t,e);var i=new Map;e.getVisibleTypes().filter((function(t){return void 0!==t.getTooltip()})).map((function(t){return i.set(t,[])}));var n,r=new Set,s=new Set,a=ka(i.keys());try{var u=function(){var t=n.value;t.getLayerGroup().getLayers().getArray().filter((function(t){return t.getVisible()})).forEach((function(e){i.get(t).push(e),r.add(e),s.add(e.getClassName())}))};for(a.s();!(n=a.n()).done;)u()}catch(t){a.e(t)}finally{a.f()}return this.options.map.forEachFeatureAtPixel(t.pixel,(function(e,n){var r,o=ka(i.keys());try{var s=function(){var o=r.value;if(i.get(o).forEach((function(i){void 0===t.synviewType&&i===n&&(t.feature=e,t.layer=n,t.synviewType=o)})),void 0!==t.synviewType)return"break"};for(o.s();!(r=o.n()).done&&"break"!==s(););}catch(t){o.e(t)}finally{o.f()}return void 0!==t.synviewType}),{hitTolerance:5,layerFilter:function(t){return r.has(t)}}),void 0===t.feature&&this.options.map.forEachLayerAtPixel(t.pixel,(function(e,n){if(null==n||n.length<1)return!1;var r,o=ka(i.keys());try{var s=function(){var o=r.value;if(i.get(o).forEach((function(i){void 0===t.synviewType&&i.getClassName()==e.getClassName()&&(t.color=n,t.layer=e,t.synviewType=o)})),void 0!==t.synviewType)return"break"};for(o.s();!(r=o.n()).done&&"break"!==s(););}catch(t){o.e(t)}finally{o.f()}return void 0!==t.synviewType}),{hitTolerance:5,layerFilter:function(t){return s.has(t.getClassName())}}),t}},{key:"findLayerInType",value:function(t,e){return e.getLayerGroup().getLayers().getArray().findIndex((function(e){return e==t}))>-1}}])&&Ea(e.prototype,i),n&&Ea(e,n),o}(Ht);function Da(t){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Na(t,e){return(Na=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ga(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ya(t);if(e){var r=Ya(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ba(this,i)}}function Ba(t,e){return!e||"object"!==Da(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ya(t){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Na(t,e)}(o,t);var e,i,n,r=Ga(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),void 0===(e=r.call(this,t)).options.layerGroup&&(e.options.layerGroup=L.layerGroup().addTo(e.options.map)),e}return e=o,(i=[{key:"makeLayerGroup",value:function(){return L.layerGroup().addTo(this.options.layerGroup)}}])&&Fa(e.prototype,i),n&&Fa(e,n),o}(Ht),za=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var Wa=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener(Me(i.geometryName_),i.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;i.setGeometry(n)}else{var r=e;i.setProperties(r)}return i}return za(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(fe(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=ce(t,Oe,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(Ge("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(Me(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(Me(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Le),qa=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var i;if(e){var n=e.dataProjection?qr(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===Or.TILE_PIXELS&&(n=qr(n)).setWorldExtent(e.extent),i={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(i)},t.prototype.adaptOptions=function(t){return se({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return Jt()},t.prototype.readFeature=function(t,e){return Jt()},t.prototype.readFeatures=function(t,e){return Jt()},t.prototype.readGeometry=function(t,e){return Jt()},t.prototype.readProjection=function(t){return Jt()},t.prototype.writeFeature=function(t,e){return Jt()},t.prototype.writeFeatures=function(t,e){return Jt()},t.prototype.writeGeometry=function(t,e){return Jt()},t}();function Va(t,e,i){var n,r=i?qr(i.featureProjection):null,o=i?qr(i.dataProjection):null;if(n=r&&o&&!Kr(r,o)?(e?t.clone():t).transform(e?r:o,e?o:r):t,e&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform((function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t}))}return n}var Ha="arraybuffer",Ka="json",Ua="text",Za="xml",Ja=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Qa(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var $a=function(t){function e(){return t.call(this)||this}return Ja(e,t),e.prototype.getType=function(){return Ka},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(Qa(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(Qa(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Jt()},e.prototype.readFeaturesFromObject=function(t,e){return Jt()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(Qa(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Jt()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(Qa(t))},e.prototype.readProjectionFromObject=function(t){return Jt()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Jt()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Jt()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Jt()},e}(qa),tu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function eu(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}var iu=function(t){function e(e){var i=t.call(this)||this;return i.geometries_=e||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return tu(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(fe),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(ce(this.geometries_[t],Oe,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<Qe(this.getExtent(),t,e))return n;for(var r=this.geometries_,o=0,s=r.length;o<s;++o)n=r[o].closestPointXY(t,e,i,n);return n},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){oi(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)ui(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return eu(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],n=this.geometries_,r=!1,o=0,s=n.length;o<s;++o){var a=n[o],u=a.getSimplifiedGeometry(t);i.push(u),u!==a&&(r=!0)}if(r){var l=new e(null);return l.setGeometriesArray(i),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return an},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var n=i;n||(n=vi(this.getExtent()));for(var r=this.geometries_,o=0,s=r.length;o<s;++o)r[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(eu(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(ms);function nu(t,e,i,n,r,o,s){var a,u=t[e],l=t[e+1],c=t[i]-u,h=t[i+1]-l;if(0===c&&0===h)a=e;else{var f=((r-u)*c+(o-l)*h)/(c*c+h*h);if(f>1)a=i;else{if(f>0){for(var p=0;p<n;++p)s[p]=Bi(t[e+p],t[i+p],f);return void(s.length=n)}a=e}}for(p=0;p<n;++p)s[p]=t[a+p];s.length=n}function ru(t,e,i,n,r){var o=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var a=t[e],u=t[e+1],l=Fi(o,s,a,u);l>r&&(r=l),o=a,s=u}return r}function ou(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];r=ru(t,e,a,n,r),e=a}return r}function su(t,e,i,n,r,o,s,a,u,l,c){if(e==i)return l;var h,f;if(0===r){if((f=Fi(s,a,t[e],t[e+1]))<l){for(h=0;h<n;++h)u[h]=t[e+h];return u.length=n,f}return l}for(var p=c||[NaN,NaN],d=e+n;d<i;)if(nu(t,d-n,d,n,s,a,p),(f=Fi(s,a,p[0],p[1]))<l){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(l))/r|0,1);if(o&&(nu(t,i-n,e,n,s,a,p),(f=Fi(s,a,p[0],p[1]))<l)){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n}return l}function au(t,e,i,n,r,o,s,a,u,l,c){for(var h=c||[NaN,NaN],f=0,p=i.length;f<p;++f){var d=i[f];l=su(t,e,d,n,r,o,s,a,u,l,h),e=d}return l}function uu(t,e,i,n){for(var r=0,o=i.length;r<o;++r)for(var s=i[r],a=0;a<n;++a)t[e++]=s[a];return e}function lu(t,e,i,n,r){for(var o=r||[],s=0,a=0,u=i.length;a<u;++a){var l=uu(t,e,i[a],n);o[s++]=l,e=l}return o.length=s,o}function cu(t,e,i,n,r,o){var s=NaN,a=NaN,u=(i-e)/n;if(1===u)s=t[e],a=t[e+1];else if(2==u)s=(1-r)*t[e]+r*t[e+n],a=(1-r)*t[e+1]+r*t[e+n+1];else if(0!==u){for(var l=t[e],c=t[e+1],h=0,f=[0],p=e+n;p<i;p+=n){var d=t[p],v=t[p+1];h+=Math.sqrt((d-l)*(d-l)+(v-c)*(v-c)),f.push(h),l=d,c=v}var y=r*h,g=function(t,e,i){for(var n,r,o=i||de,s=0,a=t.length,u=!1;s<a;)(r=+o(t[n=s+(a-s>>1)],e))<0?s=n+1:(a=n,u=!r);return u?s:~s}(f,y);if(g<0){var m=(y-f[-g-2])/(f[-g-1]-f[-g-2]),_=e+(-g-2)*n;s=Bi(t[_],t[_+n],m),a=Bi(t[_+1],t[_+n+1],m)}else s=t[e+g*n],a=t[e+g*n+1]}return o?(o[0]=s,o[1]=a,o):[s,a]}function hu(t,e,i,n,r,o){if(i==e)return null;var s;if(r<t[e+n-1])return o?((s=t.slice(e,e+n))[n-1]=r,s):null;if(t[i-1]<r)return o?((s=t.slice(i-n,i))[n-1]=r,s):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var a=e/n,u=i/n;a<u;){var l=a+u>>1;r<t[(l+1)*n-1]?u=l:a=l+1}var c=t[a*n-1];if(r==c)return t.slice((a-1)*n,(a-1)*n+n);var h=(r-c)/(t[(a+1)*n-1]-c);s=[];for(var f=0;f<n-1;++f)s.push(Bi(t[(a-1)*n+f],t[a*n+f],h));return s.push(r),s}function fu(t,e,i,n,r){return!function(t,e){var i;return(i=e(pi(t)))||(i=e(di(t)))||(i=e(bi(t)))?i:(i=e(_i(t)))||!1}(r,(function(r){return!pu(t,e,i,n,r[0],r[1])}))}function pu(t,e,i,n,r,o){for(var s=0,a=t[i-n],u=t[i-n+1];e<i;e+=n){var l=t[e],c=t[e+1];u<=o?c>o&&(l-a)*(o-u)-(r-a)*(c-u)>0&&s++:c<=o&&(l-a)*(o-u)-(r-a)*(c-u)<0&&s--,a=l,u=c}return 0!==s}function du(t,e,i,n,r,o){if(0===i.length)return!1;if(!pu(t,e,i[0],n,r,o))return!1;for(var s=1,a=i.length;s<a;++s)if(pu(t,i[s-1],i[s],n,r,o))return!1;return!0}function vu(t,e,i,n,r){for(var o,s=[t[e],t[e+1]],a=[];e+n<i;e+=n){if(a[0]=t[e+n],a[1]=t[e+n+1],o=r(s,a))return o;s[0]=a[0],s[1]=a[1]}return!1}function yu(t,e,i,n,r){var o=ci([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!xi(r,o)&&(!!ti(r,o)||(o[0]>=r[0]&&o[2]<=r[2]||(o[1]>=r[1]&&o[3]<=r[3]||vu(t,e,i,n,(function(t,e){return function(t,e,i){var n=!1,r=ii(t,e),o=ii(t,i);if(r===qe||o===qe)n=!0;else{var s=t[0],a=t[1],u=t[2],l=t[3],c=e[0],h=e[1],f=i[0],p=i[1],d=(p-h)/(f-c),v=void 0,y=void 0;o&Ve&&!(r&Ve)&&(n=(v=f-(p-l)/d)>=s&&v<=u),n||!(o&He)||r&He||(n=(y=p-(f-u)*d)>=a&&y<=l),n||!(o&Ke)||r&Ke||(n=(v=f-(p-a)/d)>=s&&v<=u),n||!(o&Ue)||r&Ue||(n=(y=p-(f-s)*d)>=a&&y<=l)}return n}(r,t,e)})))))}function gu(t,e,i,n,r){if(!function(t,e,i,n,r){return!!yu(t,e,i,n,r)||(!!pu(t,e,i,n,r[0],r[1])||(!!pu(t,e,i,n,r[0],r[3])||(!!pu(t,e,i,n,r[2],r[1])||!!pu(t,e,i,n,r[2],r[3]))))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o)if(fu(t,i[o-1],i[o],n,r)&&!yu(t,i[o-1],i[o],n,r))return!1;return!0}var mu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_u=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return mu(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?ge(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Qe(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ru(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),su(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return vu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=ws&&this.layout!=xs)return null;var i=void 0!==e&&e;return hu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return oo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return cu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,_s)},e.prototype.getType=function(){return tn},e.prototype.intersectsExtent=function(t){return yu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=uu(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ts),bu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wu=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,i);else if(void 0!==i&&n)r.setFlatCoordinates(i,e),r.ends_=n;else{for(var o=r.getLayout(),s=e,a=[],u=[],l=0,c=s.length;l<c;++l){var h=s[l];0===l&&(o=h.getLayout()),ge(a,h.getFlatCoordinates()),u.push(a.length)}r.setFlatCoordinates(o,a),r.ends_=u}return r}return bu(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?ge(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Qe(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ou(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),au(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=ws&&this.layout!=xs||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,r=void 0!==i&&i;return function(t,e,i,n,r,o,s){if(s)return hu(t,e,i[i.length-1],n,r,o);var a;if(r<t[n-1])return o?((a=t.slice(0,n))[n-1]=r,a):null;if(t[t.length-1]<r)return o?((a=t.slice(t.length-n))[n-1]=r,a):null;for(var u=0,l=i.length;u<l;++u){var c=i[u];if(e!=c){if(r<t[e+n-1])return null;if(r<=t[c-1])return hu(t,e,c,n,r,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,r)},e.prototype.getCoordinates=function(){return so(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new _u(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,o=0,s=e.length;o<s;++o){var a=e[o],u=new _u(t.slice(r,a),i);n.push(u),r=a}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,r=this.stride,o=0,s=n.length;o<s;++o){var a=n[o];ge(t,cu(e,i,a,r,.5)),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=So(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,_s,n)},e.prototype.getType=function(){return on},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){if(yu(t,e,i[o],n,r))return!0;e=i[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=lu(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(Ts),xu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Su=function(t){function e(e,i){var n=t.call(this)||this;return n.setCoordinates(e,i),n}return xu(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=Fi(t,e,r[0],r[1]);if(o<n){for(var s=this.stride,a=0;a<s;++a)i[a]=r[a];return i.length=s,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return e=this.flatCoordinates,i=t,n=e[0],r=e[1],ri(n,r,n,r,i);var e,i,n,r},e.prototype.getType=function(){return $i},e.prototype.intersectsExtent=function(t){return ei(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)t[e++]=i[r];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ts),Ou=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tu=function(t){function e(e,i){var n=t.call(this)||this;return i&&!Array.isArray(e[0])?n.setFlatCoordinates(i,e):n.setCoordinates(e,i),n}return Ou(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?ge(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<Qe(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,o=this.stride,s=0,a=r.length;s<a;s+=o){var u=Fi(t,e,r[s],r[s+1]);if(u<n){n=u;for(var l=0;l<o;++l)i[l]=r[s+l];i.length=o}}return n},e.prototype.getCoordinates=function(){return oo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Su(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,o=t.length;r<o;r+=i){var s=new Su(t.slice(r,r+i),e);n.push(s)}return n},e.prototype.getType=function(){return rn},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i){if(ei(t,e[n],e[n+1]))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=uu(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ts);function ku(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],u=t[e+1];r+=s*a-o*u,o=a,s=u}return r/2}function Cu(t,e,i,n){for(var r=0,o=0,s=i.length;o<s;++o){var a=i[o];r+=ku(t,e,a,n),e=a}return r}var Eu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pu=function(t){function e(e,i){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return Eu(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Qe(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ru(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),su(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return ku(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return oo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,_s)},e.prototype.getType=function(){return en},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=uu(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Ts);function Iu(t,e,i,n,r,o,s){for(var a,u,l,c,h,f,p,d=r[o+1],v=[],y=0,g=i.length;y<g;++y){var m=i[y];for(c=t[m-n],f=t[m-n+1],a=e;a<m;a+=n)h=t[a],p=t[a+1],(d<=f&&p<=d||f<=d&&d<=p)&&(l=(d-f)/(p-f)*(h-c)+c,v.push(l)),c=h,f=p}var _=NaN,b=-1/0;for(v.sort(de),c=v[0],a=1,u=v.length;a<u;++a){h=v[a];var w=Math.abs(h-c);w>b&&du(t,e,i,n,l=(c+h)/2,d)&&(_=l,b=w),c=h}return isNaN(_)&&(_=r[o]),s?(s.push(_,d,b),s):[_,d,b]}function Ru(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function ju(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],u=t[e+1];r+=(a-o)*(u+s),o=a,s=u}return r>0}function Mu(t,e,i,n,r){for(var o=void 0!==r&&r,s=0,a=i.length;s<a;++s){var u=i[s],l=ju(t,e,u,n);if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0}function Lu(t,e,i,n,r){for(var o=void 0!==r&&r,s=0,a=i.length;s<a;++s){var u=i[s],l=ju(t,e,u,n);(0===s?o&&l||!o&&!l:o&&!l||!o&&l)&&Ru(t,e,u,n),e=u}return e}function Au(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o)e=Lu(t,e,i[o],n,r);return e}var Du=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fu=function(t){function e(e,i,n){var r=t.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==i&&n?(r.setFlatCoordinates(i,e),r.ends_=n):r.setCoordinates(e,i),r}return Du(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?ge(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Qe(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ou(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),au(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return du(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Cu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Lu(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,so(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=vi(this.getExtent());this.flatInteriorPoint_=Iu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Su(this.getFlatInteriorPoint(),ws)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Pu(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o],u=new Pu(e.slice(r,a),t);n.push(u),r=a}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Mu(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Lu(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=ko(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,_s,n)},e.prototype.getType=function(){return nn},e.prototype.intersectsExtent=function(t){return gu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=lu(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(Ts),Nu=Fu;var Gu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bu=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=r.getLayout(),s=e,a=[],u=[],l=0,c=s.length;l<c;++l){var h=s[l];0===l&&(o=h.getLayout());for(var f=a.length,p=h.getEnds(),d=0,v=p.length;d<v;++d)p[d]+=f;ge(a,h.getFlatCoordinates()),u.push(p)}i=o,e=a,n=u}return void 0!==i&&n?(r.setFlatCoordinates(i,e),r.endss_=n):r.setCoordinates(e,i),r}return Gu(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;ge(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<Qe(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];r=ou(t,e,a,n,r),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,r,o,s,a,u,l,c){for(var h=c||[NaN,NaN],f=0,p=i.length;f<p;++f){var d=i[f];l=au(t,e,d,n,r,o,s,a,u,l,h),e=d[d.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return function(t,e,i,n,r,o){if(0===i.length)return!1;for(var s=0,a=i.length;s<a;++s){var u=i[s];if(du(t,e,u,n,r,o))return!0;e=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,n){for(var r=0,o=0,s=i.length;o<s;++o){var a=i[o];r+=Cu(t,e,a,n),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Au(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,ao(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,n){for(var r=[],o=[1/0,1/0,-1/0,-1/0],s=0,a=i.length;s<a;++s){var u=i[s];o=si(t,e,u[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,i,n,r){for(var o=[],s=0,a=i.length;s<a;++s){var u=i[s];o=Iu(t,e,u,n,r,2*s,o),e=u[u.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Tu(this.getFlatInteriorPoints().slice(),ws)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];if(!Mu(t,e,a,n,r))return!1;a.length&&(e=a[a.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Au(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,o,s,a){for(var u=0,l=i.length;u<l;++u){var c=i[u],h=[];s=ko(t,e,c,n,r,o,s,h),a.push(h),e=c[c.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,_s,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,s=n.length;o<s;++o)n[o]-=e;return new Nu(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o].slice(),u=a[a.length-1];if(0!==r)for(var l=0,c=a.length;l<c;++l)a[l]-=r;var h=new Nu(e.slice(r,u),t,a);n.push(h),r=u}return n},e.prototype.getType=function(){return sn},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];if(gu(t,e,a,n,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,n,r){for(var o=r||[],s=0,a=0,u=i.length;a<u;++a){var l=lu(t,e,i[a],n,o[s]);o[s++]=l,e=l[l.length-1]}return o.length=s,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(Ts),Yu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Xu(t,e){if(!t)return null;var i;switch(t.type){case $i:i=function(t){return new Su(t.coordinates)}(t);break;case tn:i=function(t){return new _u(t.coordinates)}(t);break;case nn:i=function(t){return new Nu(t.coordinates)}(t);break;case rn:i=function(t){return new Tu(t.coordinates)}(t);break;case on:i=function(t){return new wu(t.coordinates)}(t);break;case sn:i=function(t){return new Bu(t.coordinates)}(t);break;case an:i=function(t,e){var i=t.geometries.map((function(t){return Xu(t,e)}));return new iu(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Va(i,!1,e)}function zu(t,e){var i,n=(t=Va(t,!0,e)).getType();switch(n){case $i:i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case tn:i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case nn:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case rn:i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case on:i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case sn:i=function(t,e){var i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case an:i=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var i=se({},e);return delete i.featureProjection,zu(t,i)}))}}(t,e);break;case un:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}var Wu=function(t){function e(e){var i=this,n=e||{};return(i=t.call(this)||this).dataProjection=qr(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(i.defaultFeatureProjection=qr(n.featureProjection)),i.geometryName_=n.geometryName,i.extractGeometryName_=n.extractGeometryName,i}return Yu(e,t),e.prototype.readFeatureFromObject=function(t,e){var i=null,n=Xu((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),r=new Wa;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(n),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var n=t.features,r=0,o=n.length;r<o;++r)i.push(this.readFeatureFromObject(n[r],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return Xu(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=qr(i.properties.name):"EPSG"===i.type?e=qr("EPSG:"+i.properties.code):Ge(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(i.id=n);var r=t.getGeometry();r&&(i.geometry=zu(r,e));var o=t.getProperties();return delete o[t.getGeometryName()],le(o)||(i.properties=o),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return zu(t,this.adaptOptions(e))},e}($a),qu=!1;function Vu(t,e,i,n){return function(r,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(r,o,s):t,!0),e.getType()==Ha&&(a.responseType="arraybuffer"),a.withCredentials=qu,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var o=e.getType(),u=void 0;o==Ka||o==Ua?u=a.responseText:o==Za?(u=a.responseXML)||(u=(new DOMParser).parseFromString(a.responseText,"application/xml")):o==Ha&&(u=a.response),u?i.call(this,e.readFeatures(u,{extent:r,featureProjection:s}),e.readProjection(u)):n.call(this)}else n.call(this)}.bind(this),a.onerror=function(){n.call(this)}.bind(this),a.send()}}function Hu(t,e){return Vu(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),be)}function Ku(t,e){return[[-1/0,-1/0,1/0,1/0]]}var Uu=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Zu(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Ju=function(t){function e(e){var i=t.call(this)||this;return i.projection_=qr(e.projection),i.attributions_=Zu(e.attributions),i.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,i.loading=!1,i.state_=void 0!==e.state?e.state:Wi,i.wrapX_=void 0!==e.wrapX&&e.wrapX,i}return Uu(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Jt()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Zu(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Le),Qu="addfeature",$u="changefeature",tl="clear",el="removefeature",il=function(){function t(t){this.rbush_=new qo.a(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[$t(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,r=e.length;n<r;n++){var o=t[n],s=e[n],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[n]=a,this.items_[$t(s)]=a}this.rbush_.load(i)},t.prototype.remove=function(t){var e=$t(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[$t(e)];ai([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,n=0,r=t.length;n<r;n++)if(i=e(t[n]))return i;return i},t.prototype.isEmpty=function(){return le(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return ri(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),nl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rl=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return nl(e,t),e}(we),ol=function(t){function e(e){var i=this,n=e||{};(i=t.call(this,{attributions:n.attributions,projection:void 0,state:Wi,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=be,i.format_=n.format,i.overlaps_=void 0===n.overlaps||n.overlaps,i.url_=n.url,void 0!==n.loader?i.loader_=n.loader:void 0!==i.url_&&(Ge(i.format_,7),i.loader_=Hu(i.url_,i.format_)),i.strategy_=void 0!==n.strategy?n.strategy:Ku;var r,o,s=void 0===n.useSpatialIndex||n.useSpatialIndex;return i.featuresRtree_=s?new il:null,i.loadedExtentsRtree_=new il,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(r=n.features).getArray()),s||void 0!==r||(r=new Ne(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==r&&i.bindFeaturesCollection_(r),i}return nl(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=$t(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new rl(Qu,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[ce(e,Oe,this.handleFeatureChange_,this),ce(e,oe,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(Ge(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],r=0,o=t.length;r<o;r++){var s=$t(u=t[r]);this.addToIndex_(s,u)&&i.push(u)}r=0;for(var a=i.length;r<a;r++){var u;s=$t(u=i[r]);this.setupChangeEvents_(s,u);var l=u.getGeometry();if(l){var c=l.getExtent();e.push(c),n.push(u)}else this.nullGeometryFeatures_[s]=u}this.featuresRtree_&&this.featuresRtree_.load(e,n);r=0;for(var h=i.length;r<h;r++)this.dispatchEvent(new rl(Qu,i[r]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(Qu,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(el,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(ne,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(re,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(fe)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new rl(tl);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),le(this.nullGeometryFeatures_)||ge(t,ue(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=e||_e;return this.featuresRtree_.forEachInExtent(a,(function(t){if(u(t)){var e=t.getGeometry(),l=s;if((s=e.closestPointXY(i,n,o,s))<l){r=t;var c=Math.sqrt(s);a[0]=i-c,a[1]=n-c,a[2]=i+c,a[3]=n+c}}})),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=$t(e),n=e.getGeometry();if(n){var r=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var o=e.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new rl($u,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:$t(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&le(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this.loadedExtentsRtree_,r=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var a=r[t];n.forEachInExtent(a,(function(t){return ti(t.extent,a)}))||(s.loader_.call(s,a,e,i),n.insert(a,{extent:a.slice()}),s.loading=s.loader_!==be)},s=this,a=0,u=r.length;a<u;++a)o(a)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if(ai(i.extent,t))return e=i,!0})),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=$t(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=$t(t);this.featureChangeKeys_[e].forEach(fe),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new rl(el,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Ge(this.format_,7),this.setLoader(Hu(t,this.format_))},e}(Ju);function sl(t){return(sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function al(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ul(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ll(t,e){return(ll=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=fl(t);if(e){var r=fl(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return hl(this,i)}}function hl(t,e){return!e||"object"!==sl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fl(t){return(fl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ll(t,e)}(o,t);var e,i,n,r=cl(o);function o(){return al(this,o),r.apply(this,arguments)}return e=o,(i=[{key:"getId",value:function(){var t=this.getDatetime();return isNaN(t)?"":t.toISOString()}},{key:"makeOLLayer",value:function(){var t={source:this.options.ol.source,events:this.options.ol.events,style:this.options.ol.style};if(this.options.ol,!("refresh"in t.source)){var e=t.source;void 0!==this.options.url&&"format"in e&&void 0!==e.format&&(e.url=this.options.url),"projection"in e&&void 0!==e.projection||(e.projection="EPSG:4326"),t.source=new ol(e)}return"function"==typeof t.style&&(t.style=t.style.bind(this)),this.className&&(t.className=this.className),new Js(t)}},{key:"setOLStyle",value:function(t){return void 0===this.layer&&this.getOLLayer(),void 0!==this.layer&&"setStyle"in this.layer?(0==arguments.length?this.layer.setStyle(this.layer.getStyle()):this.layer.setStyle(t),this):this}}])&&ul(e.prototype,i),n&&ul(e,n),o}(ea);function dl(t){return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vl(t,e){return(vl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ml(t);if(e){var r=ml(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return gl(this,i)}}function gl(t,e){return!e||"object"!==dl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ml(t){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vl(t,e)}(i,t);var e=yl(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this,t)).options.ol.source.url=n.options.url,n.options.ol.source.format=new Wu,n}return i}(pl),bl=0,wl=1,xl=2,Sl=3,Ol=4;function Tl(t){return Math.pow(t,3)}var kl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cl=function(t){function e(e,i,n){var r=t.call(this)||this,o=n||{};return r.tileCoord=e,r.state=i,r.interimTile=null,r.hifi=!0,r.key="",r.transition_=void 0===o.transition?250:o.transition,r.transitionStarts_={},r}return kl(e,t),e.prototype.changed=function(){this.dispatchEvent(Oe)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==xl)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==xl){t.interimTile=null;break}t.getState()==wl?e=t:t.getState()==bl?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==Sl&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){Jt()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var n=e-i+1e3/60;return n>=this.transition_?1:Tl(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Se),El=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pl=[],Il=function(t){function e(e,i,n,r){var o=t.call(this,e,i,{transition:0})||this;return o.context_={},o.executorGroups={},o.loadingSourceTiles=0,o.errorSourceTileKeys={},o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=null,o.wantedResolution,o.getSourceTiles=r.bind(void 0,o),o.sourceZ=-1,o.hifi=!1,o.wrappedTileCoord=n,o}return El(e,t),e.prototype.getContext=function(t){var e=$t(t);return e in this.context_||(this.context_[e]=xn(1,1,Pl)),this.context_[e]},e.prototype.hasContext=function(t){return $t(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=$t(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)Pl.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(Cl),Rl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),jl=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,s)||this;return a.extent=null,a.format_=r,a.features_=null,a.loader_,a.projection=null,a.resolution,a.tileLoadFunction_=o,a.url_=n,a}return Rl(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){this.state==bl&&(this.setState(wl),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(Sl)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(xl)},e.prototype.setLoader=function(t){this.loader_=t},e}(Cl);function Ml(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function Ll(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function Al(t,e,i){return t+"/"+e+"/"+i}function Dl(t){return Al(t[0],t[1],t[2])}function Fl(t){return t.split("/").map(Number)}function Nl(t,e){var i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,u){return s?t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(r,s[2].toString()).replace(o,(function(){var t=s[0],i=e.getFullTileRange(t);return Ge(i,55),(i.getHeight()-s[2]-1).toString()})):void 0}}function Gl(t,e){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=Nl(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,i,n){if(e){var r=Gi(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[r](e,i,n)}}}(n)}function Bl(t,e,i){}var Yl=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var i=this.entries_[t];return Ge(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},t.prototype.remove=function(t){var e=this.entries_[t];return Ge(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Ge(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}(),Xl=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xl(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Fl(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Dl(e.tileCoord)),e.release())}.bind(this))}},e}(Yl),Wl=function(){function t(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function ql(t,e,i,n,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new Wl(t,e,i,n)}var Vl=Wl,Hl=[0,0,0],Kl=function(){function t(t){var e,i,n,r;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Ge((e=this.resolutions_,i=!0,n=function(t,e){return e-t}||de,e.every((function(t,r){if(0===r)return!0;var o=n(e[r-1],t);return!(o>0||i&&0===o)}))),17),!t.origins)for(var o=0,s=this.resolutions_.length-1;o<s;++o)if(r){if(this.resolutions_[o]/this.resolutions_[o+1]!==r){r=void 0;break}}else r=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Ge(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=_i(a)),Ge(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Ge(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Ge(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new Vl(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),r=n.minX,o=n.maxX;r<=o;++r)for(var s=n.minY,a=n.maxY;s<=a;++s)i([e,r,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,i,n){var r,o,s=null,a=t[0]-1;for(2===this.zoomFactor_?(r=t[1],o=t[2]):s=this.getTileCoordExtent(t,n);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?ql(r=Math.floor(r/2),r,o=Math.floor(o/2),o,i):this.getTileRangeForExtentAndZ(s,a,i)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],r=2*t[2];return ql(n,n+1,r,r+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),o=Ml(this.getTileSize(t),this.tmpSize_),s=n[0]+e.minX*o[0]*r,a=n[0]+(e.maxX+1)*o[0]*r;return ri(s,n[1]+e.minY*o[1]*r,a,n[1]+(e.maxY+1)*o[1]*r,i)},t.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=Hl;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var r=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),ql(r,n[1],o,n[2],i)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Ml(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]},t.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Ml(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,s=i[1]-(t[2]+1)*r[1]*n;return ri(o,s,o+r[0]*n,s+r[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){var o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),u=Ml(this.getTileSize(o),this.tmpSize_),l=n?.5:0,c=n?.5:0,h=Math.floor((t-a[0])/i+l),f=Math.floor((a[1]-e)/i+c),p=s*h/u[0],d=s*f/u[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Ll(o,p,d,r)},t.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){var o=this.getOrigin(i),s=this.getResolution(i),a=Ml(this.getTileSize(i),this.tmpSize_),u=n?.5:0,l=n?.5:0,c=Math.floor((t-o[0])/s+u),h=Math.floor((o[1]-e)/s+l),f=c/a[0],p=h/a[1];return n?(f=Math.ceil(f)-1,p=Math.ceil(p)-1):(f=Math.floor(f),p=Math.floor(p)),Ll(i,f,p,r)},t.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return Li(ve(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},t}();function Ul(t){var e=t.getDefaultTileGrid();return e||(e=Ql(t),t.setDefaultTileGrid(e)),e}function Zl(t){var e=t||{},i=e.extent||qr("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Jl(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Kl(n)}function Jl(t,e,i,n){for(var r=void 0!==e?e:42,o=gi(t),s=wi(t),a=Ml(void 0!==i?i:256),u=n>0?n:Math.max(s/a[0],o/a[1]),l=r+1,c=new Array(l),h=0;h<l;++h)c[h]=u/Math.pow(2,h);return c}function Ql(t,e,i,n){return function(t,e,i,n){var r=void 0!==n?n:Xe,o=Jl(t,e,i);return new Kl({extent:t,origin:yi(t,r),resolutions:o,tileSize:i})}($l(t),e,i,n)}function $l(t){var e=(t=qr(t)).getExtent();if(!e){var i=180*Sr[Or.DEGREES]/t.getMetersPerUnit();e=ri(-i,-i,i,i)}return e}var tc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ec=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;i.opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=[256,256],r=e.tileGrid;r&&Ml(r.getTileSize(r.getMinZoom()),n);var o="undefined"!=typeof screen,s=o?screen.availWidth||screen.width:1920,a=o?screen.availHeight||screen.height:1080,u=4*Math.ceil(s/n[0])*Math.ceil(a/n[1]);return i.tileCache=new zl(Math.max(u,e.cacheSize||0)),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition},i.zDirection=e.zDirection?e.zDirection:0,i}return tc(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,n){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,s,a,u=!0,l=i.minX;l<=i.maxX;++l)for(var c=i.minY;c<=i.maxY;++c)s=Al(e,l,c),a=!1,r.containsKey(s)&&(a=(o=r.get(s)).getState()===xl)&&(a=!1!==n(o)),a||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,n,r){return Jt()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Ul(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Kr(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var n,r,o,s=this.getTileGridForProjection(i),a=this.getTilePixelRatio(e),u=Ml(s.getTileSize(t),this.tmpSize);return 1==a?u:(n=u,r=a,void 0===(o=this.tmpSize)&&(o=[0,0]),o[0]=n[0]*r+.5|0,o[1]=n[1]*r+.5|0,o)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var n=e[0],r=t.getTileCoordCenter(e),o=$l(i);if($e(o,r))return e;var s=wi(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,n)}(n,t,i)),function(t,e){var i=t[0],n=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,i):e.getFullTileRange(i))||o.containsXY(n,r)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,i,n){},e}(Ju),ic=function(t){function e(e,i){var n=t.call(this,e)||this;return n.tile=i,n}return tc(e,t),e}(we),nc=ec,rc="tileloadstart",oc="tileloadend",sc="tileloaderror",ac=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),uc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.generateTileUrlFunction_=!e.tileUrlFunction,i.tileLoadFunction=e.tileLoadFunction,i.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(i):Bl,i.urls=null,e.urls?i.setUrls(e.urls):e.url&&i.setUrl(e.url),i.tileLoadingKeys_={},i}return ac(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,n=$t(i),r=i.getState();r==wl?(this.tileLoadingKeys_[n]=!0,e=rc):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=r==Sl?sc:r==xl?oc:void 0),null!=e&&this.dispatchEvent(new ic(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var n=i[1].charCodeAt(0),r=i[2].charCodeAt(0),o=void 0;for(o=n;o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Gl(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var n=Al(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(nc),lc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cc=function(t){function e(e){var i=this,n=e.projection||"EPSG:3857",r=e.extent||$l(n),o=e.tileGrid||Zl({extent:r,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(i=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:hc,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,i.loadingTiles_={},i.sourceTileCache=new zl(i.tileCache.highWaterMark),i.overlaps_=null==e.overlaps||e.overlaps,i.tileClass=e.tileClass?e.tileClass:jl,i.tileGrids_={},i}return lc(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],i=this.tileCache;if(0===i.getCount())return e;var n=Fl(i.peekFirstKey())[0],r=this.tileGrid;return i.forEach((function(i){if(i.tileCoord[0]===n&&i.getState()===xl)for(var o=i.getSourceTiles(),s=0,a=o.length;s<a;++s){var u=o[s],l=u.tileCoord;if(xi(t,r.getTileCoordExtent(l))){var c=u.getFeatures();if(c)for(var h=0,f=c.length;h<f;++h){var p=c[h],d=p.getGeometry();xi(t,d.getExtent())&&e.push(p)}}}})),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,i){t.prototype.expireCache.call(this,e,i),this.sourceTileCache.expireCache({})},e.prototype.getSourceTiles=function(t,e,i){var n=i.wrappedTileCoord,r=this.getTileGridForProjection(e),o=r.getTileCoordExtent(n),s=n[0],a=r.getResolution(s);Je(o,-a,o);var u=this.tileGrid,l=u.getExtent();l&&mi(o,l,o);var c,h,f,p=u.getZForResolution(a,1),d=u.getMinZoom(),v=i.sourceTiles;if(v&&v.length>0&&v[0].tileCoord[0]===p)c=v,h=!0,f=p;else{c=[],f=p+1;do{--f,h=!0,u.forEachTileCoord(o,f,function(n){var r,o=this.tileUrlFunction(n,t,e);if(void 0!==o)if(this.sourceTileCache.containsKey(o)){var s=(r=this.sourceTileCache.get(o)).getState();if(s===xl||s===Sl||s===Ol)return void c.push(r)}else f===p&&((r=new this.tileClass(n,bl,o,this.format_,this.tileLoadFunction)).extent=u.getTileCoordExtent(n),r.projection=e,r.resolution=u.getResolution(n[0]),this.sourceTileCache.set(o,r),r.addEventListener(Oe,this.handleTileChange.bind(this)),r.load());h=h&&r&&r.getState()===xl,r&&r.getState()!==Ol&&i.getState()===bl&&(i.loadingSourceTiles++,r.addEventListener(Oe,(function t(){var e=r.getState(),n=r.getKey();if(e===xl||e===Sl){e===xl?(r.removeEventListener(Oe,t),i.loadingSourceTiles--,delete i.errorSourceTileKeys[n]):e===Sl&&(i.errorSourceTileKeys[n]=!0);var o=Object.keys(i.errorSourceTileKeys).length;i.loadingSourceTiles-o==0&&(i.hifi=0===o,i.sourceZ=p,i.setState(xl))}})))}.bind(this)),h||(c.length=0)}while(!h&&f>d)}return i.getState()===bl&&i.setState(wl),h&&(i.hifi=p===f,i.sourceZ=f,i.getState()<xl?i.setState(xl):v&&me(c,v)||(i.sourceTiles=c)),c},e.prototype.getTile=function(t,e,i,n,r){var o,s=Al(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)&&(o=this.tileCache.get(s)).key===a)return o;var u=[t,e,i],l=this.getTileCoordForTileUrlFunction(u,r),c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(r);if(l&&c){var f=h.getTileCoordExtent(l);Je(f,-h.getResolution(t),f),xi(c,f)||(l=null)}var p=!0;if(null!==l){var d=this.tileGrid,v=h.getResolution(t),y=d.getZForResolution(v,1),g=h.getTileCoordExtent(l);Je(g,-v,g),d.forEachTileCoord(g,y,function(t){p=p&&!this.tileUrlFunction(t,n,r)}.bind(this))}var m=new Il(u,p?Ol:bl,l,this.getSourceTiles.bind(this,n,r));return m.key=a,o?(m.interimTile=o,m.refreshInterimChain(),this.tileCache.replace(s,m)):this.tileCache.set(s,m),m},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var n=this.tileGrid;i=Ql(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=i}return i},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,i){var n=Ml(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(uc);function hc(t,e){var i=Vu(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}var fc="preload",pc="useInterimTilesOnError",dc="image",vc="hybrid",yc="vector",gc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mc=function(t){function e(e){var i=t.call(this,e)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=[1/0,1/0,-1/0,-1/0],i.tmpTileRange_=new Vl(0,0,0,0),i}return gc(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==xl||i==Ol||i==Sl&&!n},e.prototype.getTile=function(t,e,i,n){var r=n.pixelRatio,o=n.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,i,r,o);return a.getState()==Sl&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(xl)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,i,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,i,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var i=t.layerStatesArray[t.layerIndex],n=t.viewState,r=n.projection,o=n.resolution,s=n.center,a=n.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),h=c.getRevision(),f=c.getTileGridForProjection(r),p=f.getZForResolution(o,c.zDirection),d=f.getResolution(p),v=t.extent,y=i.extent&&ro(i.extent,r);y&&(v=mi(v,ro(i.extent,r)));var g=c.getTilePixelRatio(u),m=Math.round(t.size[0]*g),_=Math.round(t.size[1]*g);if(a){var b=Math.round(Math.sqrt(m*m+_*_));m=b,_=b}var w=d*m/2/g,x=d*_/2/g,S=[s[0]-w,s[1]-x,s[0]+w,s[1]+x],O=f.getTileRangeForExtentAndZ(v,p),T={};T[p]={};var k=this.createLoadedTileFinder(c,r,T),C=this.tmpExtent,E=this.tmpTileRange_;this.newTiles_=!1;for(var P=O.minX;P<=O.maxX;++P)for(var I=O.minY;I<=O.maxY;++I){var R=this.getTile(p,P,I,t);if(this.isDrawableTile(R)){var j=$t(this);if(R.getState()==xl){T[p][R.tileCoord.toString()]=R;var M=R.inTransition(j);this.newTiles_||!M&&-1!==this.renderedTiles.indexOf(R)||(this.newTiles_=!0)}if(1===R.getAlpha(j,t.time))continue}var L=f.getTileCoordChildTileRange(R.tileCoord,E,C),A=!1;L&&(A=k(p+1,L)),A||f.forEachTileCoordParentTileRange(R.tileCoord,k,E,C)}var D=d/o;Fn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/g,1/g,a,-m/2,-_/2);var F=ir(this.pixelTransform);this.useContainer(e,F,i.opacity);var N=this.context,G=N.canvas;Nn(this.inversePixelTransform,this.pixelTransform),Fn(this.tempTransform_,m/2,_/2,D,D,0,-m/2,-_/2),G.width!=m||G.height!=_?(G.width=m,G.height=_):this.containerReused||N.clearRect(0,0,m,_),y&&this.clipUnrotated(N,t,y),this.preRender(N,t),this.renderedTiles.length=0;var B,Y,X,z=Object.keys(T).map(Number);z.sort(de),1!==i.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(B=[],Y=[]):z=z.reverse();for(var W=z.length-1;W>=0;--W){var q=z[W],V=c.getTilePixelSize(q,u,r),H=f.getResolution(q)/d,K=V[0]*H*D,U=V[1]*H*D,Z=f.getTileCoordForCoordAndZ(_i(S),q),J=f.getTileCoordExtent(Z),Q=An(this.tempTransform_,[g*(J[0]-S[0])/d,g*(S[3]-J[3])/d]),$=g*c.getGutterForProjection(r),tt=T[q];for(var et in tt){var it=(R=tt[et]).tileCoord,nt=Q[0]-(Z[1]-it[1])*K,rt=Math.round(nt+K),ot=Q[1]-(Z[2]-it[2])*U,st=Math.round(ot+U),at=rt-(P=Math.round(nt)),ut=st-(I=Math.round(ot)),lt=p===q;if(!(M=lt&&1!==R.getAlpha($t(this),t.time)))if(B){N.save(),X=[P,I,P+at,I,P+at,I+ut,P,I+ut];for(var ct=0,ht=B.length;ct<ht;++ct)if(p!==q&&q<Y[ct]){var ft=B[ct];N.beginPath(),N.moveTo(X[0],X[1]),N.lineTo(X[2],X[3]),N.lineTo(X[4],X[5]),N.lineTo(X[6],X[7]),N.moveTo(ft[6],ft[7]),N.lineTo(ft[4],ft[5]),N.lineTo(ft[2],ft[3]),N.lineTo(ft[0],ft[1]),N.clip()}B.push(X),Y.push(q)}else N.clearRect(P,I,at,ut);this.drawTileImage(R,t,P,I,at,ut,$,lt,i.opacity),B&&!M&&N.restore(),this.renderedTiles.push(R),this.updateUsedTiles(t.usedTiles,c,R)}}return this.renderedRevision=h,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!ai(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(t,c,f,u,r,v,p,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(N,t),i.extent&&N.restore(),F!==G.style.transform&&(G.style.transform=F),this.container},e.prototype.drawTileImage=function(t,e,i,n,r,o,s,a,u){var l=this.getTileImage(t);if(l){var c=$t(this),h=a?t.getAlpha(c,e.time):1,f=u*h,p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,i,n,r,o),p&&this.context.restore(),1!==h?e.animate=!0:a&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var n=$t(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i){var n=$t(e);n in t||(t[n]={}),t[n][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,i,n,r,o,s,a,u){var l=$t(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,h,f,p,d,v,y=t.wantedTiles[l],g=t.tileQueue;for(v=i.getMinZoom();v<=s;++v)for(h=i.getTileRangeForExtentAndZ(o,v,h),f=i.getResolution(v),p=h.minX;p<=h.maxX;++p)for(d=h.minY;d<=h.maxY;++d)s-v<=a?((c=e.getTile(v,p,d,n,r)).getState()==bl&&(y[c.getKey()]=!0,g.isKeyQueued(c.getKey())||g.enqueue([c,l,i.getTileCoordCenter(c.tileCoord),f])),void 0!==u&&u(c)):e.useTile(v,p,d,r)},e}(cs);mc.prototype.getLayer;var _c=mc,bc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wc={image:[Bo,Do,Go,No,Yo],hybrid:[Bo,Go],vector:[]},xc={image:[Fo],hybrid:[No,Yo,Fo],vector:[Bo,Do,Go,No,Yo,Fo]},Sc=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.dirty_=!1,i.renderedLayerRevision_,i.renderedPixelToCoordinateTransform_=null,i.renderedRotation_,i.renderTileImageQueue_={},i.tileListenerKeys_={},i.tmpTransform_=[1,0,0,1,0,0],i}return bc(e,t),e.prototype.prepareTile=function(t,e,i,n){var r,o=$t(t),s=t.getState();return(s===xl&&t.hifi||s===Sl)&&o in this.tileListenerKeys_&&(fe(this.tileListenerKeys_[o]),delete this.tileListenerKeys_[o]),s!==xl&&s!==Sl||(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t,e,i)&&(r=!0,n&&(this.renderTileImageQueue_[o]=t))),r},e.prototype.getTile=function(e,i,n,r){var o=r.pixelRatio,s=r.viewState,a=s.resolution,u=s.projection,l=this.getLayer(),c=l.getSource().getTile(e,i,n,o,u);if(c.getState()<xl){c.wantedResolution=a;var h=$t(c);if(!(h in this.tileListenerKeys_)){var f=ce(c,Oe,this.prepareTile.bind(this,c,o,u,!0));this.tileListenerKeys_[h]=f}}else{var p=r.viewHints;!!(p[mr]||p[_r])&&c.wantedResolution||(c.wantedResolution=a),this.prepareTile(c,o,u,!1)&&l.getRenderMode()!==yc&&this.renderTileImage_(c,r)}return t.prototype.getTile.call(this,e,i,n,r)},e.prototype.isDrawableTile=function(e){var i=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&i.getRenderMode()===yc||e.hasContext(i)},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,i){var n=this.getLayer(),r=n.getRevision(),o=n.getRenderOrder()||null,s=t.wantedResolution,a=t.getReplayState(n);if(a.dirty||a.renderedResolution!==s||a.renderedRevision!=r||a.renderedRenderOrder!=o||a.renderedZ!==t.sourceZ){var u=n.getSource(),l=u.getTileGrid(),c=u.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),h=u.getSourceTiles(e,i,t),f=$t(n);delete t.hitDetectionImageData[f],t.executorGroups[f]=[];for(var p=function(i,r){var p=h[i];if(p.getState()!=xl)return"continue";var v=p.tileCoord,y=l.getTileCoordExtent(v),g=mi(c,y),m=ai(y,g)?null:Je(g,n.getRenderBuffer()*s,d.tmpExtent);a.dirty=!1;var _=new Lo(0,g,s,e,n.getDeclutter()),b=ps(s,e),w=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,s)),e){var r=this.renderFeature(t,b,e,_);this.dirty_=this.dirty_||r,a.dirty=a.dirty||r}},x=p.getFeatures();o&&o!==a.renderedRenderOrder&&x.sort(o);for(var S=0,O=x.length;S<O;++S){var T=x[S];m&&!xi(m,T.getGeometry().getExtent())||w.call(d,T)}var k=_.finish(),C=n.getRenderMode()!==yc&&n.getDeclutter()&&1===h.length?null:g,E=new rs(C,s,e,u.getOverlaps(),k,n.getRenderBuffer());t.executorGroups[f].push(E)},d=this,v=0,y=h.length;v<y;++v)p(v);a.renderedRevision=r,a.renderedZ=t.sourceZ,a.renderedRenderOrder=o,a.renderedResolution=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var o=e.viewState.resolution,s=e.viewState.rotation;i=null==i?0:i;var a,u,l,c=this.getLayer(),h=c.getDeclutter(),f=c.getSource().getTileGridForProjection(e.viewState.projection),p={},d=this.renderedTiles,v=function(){var e=d[u],l=$e(f.getTileCoordExtent(e.wrappedTileCoord),t);if(!h&&!l)return"continue";for(var v=e.executorGroups[$t(c)],y=0,g=v.length;y<g;++y){var m=v[y];a=a||m.forEachFeatureAtCoordinate(t,o,s,i,(function(t){if(l||r&&-1!==r.indexOf(t)){var e=t.getId();if(void 0===e&&(e=$t(t)),!(e in p))return p[e]=!0,n(t,c)}}),c.getDeclutter()?r:null)}};for(u=0,l=d.length;u<l;++u)v();return a},e.prototype.getFeatures=function(t){return new Promise(function(e,i){for(var n,r=this.getLayer(),o=$t(r),s=r.getSource(),a=this.renderedProjection,u=a.getExtent(),l=this.renderedResolution,c=s.getTileGridForProjection(a),h=An(this.renderedPixelToCoordinateTransform_,t.slice()),f=c.getTileCoordForCoordAndResolution(h,l),p=0,d=this.renderedTiles.length;p<d;++p)if(f.toString()===this.renderedTiles[p].tileCoord.toString()){if((n=this.renderedTiles[p]).getState()===xl&&n.hifi){var v=c.getTileCoordExtent(n.tileCoord);s.getWrapX()&&a.canWrapX()&&!ti(u,v)&&br(h,a);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var y=_i(c.getTileCoordExtent(n.wrappedTileCoord)),g=[(h[0]-y[0])/l,(y[1]-h[1])/l],m=n.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),_=n.hitDetectionImageData[o];if(!_&&!this.animatingOrInteracting_){var b=Ml(c.getTileSize(c.getZForResolution(l))),w=[b[0]/2,b[1]/2],x=this.renderedRotation_;_=Vs(b,[this.getRenderTransform(c.getTileCoordCenter(n.wrappedTileCoord),l,0,.5,w[0],w[1],0)],m,r.getStyleFunction(),c.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(r).renderedResolution,x),n.hitDetectionImageData[o]=_}e(Hs(g,m,_))}}.bind(this))},e.prototype.handleFontsChanged=function(){ae(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,i){var n=e.viewHints,r=!(n[mr]||n[_r]);this.renderQueuedTileImages_(r,e),t.prototype.renderFrame.call(this,e,i),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var o=this.getLayer(),s=o.getRenderMode();if(s===dc)return this.container;var a=o.getSource(),u=e.usedTiles[$t(a)];for(var l in this.renderTileImageQueue_)u&&l in u||delete this.renderTileImageQueue_[l];for(var c=this.context,h=o.getDeclutter()?{}:null,f=xc[s],p=e.pixelRatio,d=e.viewState,v=d.center,y=d.resolution,g=d.rotation,m=e.size,_=Math.round(m[0]*p),b=Math.round(m[1]*p),w=this.renderedTiles,x=a.getTileGridForProjection(e.viewState.projection),S=[],O=[],T=w.length-1;T>=0;--T)for(var k=w[T],C=k.tileCoord,E=x.getTileCoordExtent(k.wrappedTileCoord),P=x.getTileCoordExtent(C,this.tmpExtent)[0]-E[0],I=Mn(Dn(this.inversePixelTransform.slice(),1/p,1/p),this.getRenderTransform(v,y,g,p,_,b,P)),R=k.executorGroups[$t(o)],j=!1,M=0,L=R.length;M<L;++M){var A=R[M];if(A.hasExecutors(f)){var D=k.tileCoord[0],F=void 0;if(!h&&!j){F=A.getClipCoords(I),c.save();for(var N=0,G=S.length;N<G;++N){var B=S[N];D<O[N]&&(c.beginPath(),c.moveTo(F[0],F[1]),c.lineTo(F[2],F[3]),c.lineTo(F[4],F[5]),c.lineTo(F[6],F[7]),c.moveTo(B[6],B[7]),c.lineTo(B[4],B[5]),c.lineTo(B[2],B[3]),c.lineTo(B[0],B[1]),c.clip())}}A.execute(c,I,g,r,f,h),h||j||(c.restore(),S.push(F),O.push(D),j=!0)}}h&&ns(h,c,g,e.layerStatesArray[e.layerIndex].opacity,r,e.declutterItems);return this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var i in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[i];delete this.renderTileImageQueue_[i],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var o=0,s=i.length;o<s;++o)r=vs(n,t,i[o],e,this.boundHandleStyleImageChange_)||r;else r=vs(n,t,i,e,this.boundHandleStyleImageChange_);return r},e.prototype.tileImageNeedsRender_=function(t,e,i){var n=this.getLayer(),r=t.getReplayState(n),o=n.getRevision(),s=t.sourceZ,a=t.wantedResolution;return r.renderedTileResolution!==a||r.renderedTileRevision!==o||r.renderedTileZ!==s},e.prototype.renderTileImage_=function(t,e){var i=this.getLayer(),n=t.getReplayState(i),r=i.getRevision(),o=t.executorGroups[$t(i)];n.renderedTileRevision=r,n.renderedTileZ=t.sourceZ;var s=t.wrappedTileCoord,a=s[0],u=i.getSource(),l=e.pixelRatio,c=e.viewState.projection,h=u.getTileGridForProjection(c),f=h.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*f,d=h.getResolution(a),v=t.getContext(i);l=Math.max(l,p/l);var y=u.getTilePixelSize(a,l,c);v.canvas.width=y[0],v.canvas.height=y[1];var g=l/p;if(1!==g){var m=jn(this.tmpTransform_);Dn(m,g,g),v.setTransform.apply(v,m)}var _=h.getTileCoordExtent(s,this.tmpExtent),b=p/d,w=jn(this.tmpTransform_);Dn(w,b,-b),function(t,e,i){Mn(t,Ln(Rn,1,0,0,1,e,i))}(w,-_[0],-_[3]);for(var x=0,S=o.length;x<S;++x){o[x].execute(v,w,0,!0,wc[i.getRenderMode()])}n.renderedTileResolution=t.wantedResolution},e}(_c),Oc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Tc=function(t){function e(e){var i=this,n=e||{},r=se({},n);delete r.preload,delete r.useInterimTilesOnError,i=t.call(this,r)||this;var o=n.renderMode||vc;return Ge(null==o||o==dc||o==vc||o==yc,28),i.renderMode_=o,i.setPreload(n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return Oc(e,t),e.prototype.createRenderer=function(){return new Sc(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(fc)},e.prototype.getUseInterimTilesOnError=function(){return this.get(pc)},e.prototype.setPreload=function(t){this.set(fc,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(pc,t)},e}(gr);function kc(t){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ec(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pc(t,e){return(Pc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ic(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=jc(t);if(e){var r=jc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Rc(this,i)}}function Rc(t,e){return!e||"object"!==kc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jc(t){return(jc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pc(t,e)}(o,t);var e,i,n,r=Ic(o);function o(){return Cc(this,o),r.apply(this,arguments)}return e=o,(i=[{key:"makeOLLayer",value:function(){var t={source:this.options.ol.source,events:this.options.ol.events,style:this.options.ol.style};if(!("refresh"in t.source)){var e=t.source;!("tileUrlFunction"in e)&&void 0!==this.options.url&&"format"in e&&void 0!==e.format&&(e.url=this.options.url),"projection"in e&&void 0!==e.projection||(e.projection="EPSG:4326"),t.source=new cc(e)}return"function"==typeof t.style&&(t.style=t.style.bind(this)),this.className&&(t.className=this.className),new Tc(t)}}])&&Ec(e.prototype,i),n&&Ec(e,n),o}(pl);function Lc(t){return(Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ac(t,e){return(Ac=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Nc(t);if(e){var r=Nc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Fc(this,i)}}function Fc(t,e){return!e||"object"!==Lc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nc(t){return(Nc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ac(t,e)}(i,t);var e=Dc(i);function i(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this,t)).options.ol.source.format=new Wu,n}return i}(Mc);function Bc(t,e,i,n){var r=Jr(i,e,t),o=Vr(e,n,i),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var u=t.getExtent();if(!u||$e(u,r)){var l=Vr(t,o,r)/o;isFinite(l)&&l>0&&(o/=l)}return o}function Yc(t,e,i,n){var r=i-t,o=n-e,s=Math.sqrt(r*r+o*o);return[Math.round(i+r/s),Math.round(n+o/s)]}function Xc(t,e,i,n,r,o,s,a,u,l,c){var h=xn(Math.round(i*t),Math.round(i*e));if(0===u.length)return h.canvas;h.scale(i,i);var f=[1/0,1/0,-1/0,-1/0];u.forEach((function(t,e,i){ui(f,t.extent)}));var p=wi(f),d=gi(f),v=xn(Math.round(i*p/n),Math.round(i*d/n)),y=i/n;u.forEach((function(t,e,i){var n=t.extent[0]-f[0],r=-(t.extent[3]-f[3]),o=wi(t.extent),s=gi(t.extent);v.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*y,r*y,o*y,s*y)}));var g=_i(s);return a.getTriangles().forEach((function(t,e,r){var s=t.source,a=t.target,u=s[0][0],l=s[0][1],c=s[1][0],p=s[1][1],d=s[2][0],y=s[2][1],m=(a[0][0]-g[0])/o,_=-(a[0][1]-g[1])/o,b=(a[1][0]-g[0])/o,w=-(a[1][1]-g[1])/o,x=(a[2][0]-g[0])/o,S=-(a[2][1]-g[1])/o,O=u,T=l;u=0,l=0;var k=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),o=i+1;o<e;o++){var s=Math.abs(t[o][i]);s>r&&(r=s,n=o)}if(0===r)return null;var a=t[n];t[n]=t[i],t[i]=a;for(var u=i+1;u<e;u++)for(var l=-t[u][i]/t[i][i],c=i;c<e+1;c++)i==c?t[u][c]=0:t[u][c]+=l*t[i][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}([[c-=O,p-=T,0,0,b-m],[d-=O,y-=T,0,0,x-m],[0,0,c,p,w-_],[0,0,d,y,S-_]]);if(k){h.save(),h.beginPath();var C=(m+b+x)/3,E=(_+w+S)/3,P=Yc(C,E,m,_),I=Yc(C,E,b,w),R=Yc(C,E,x,S);h.moveTo(I[0],I[1]),h.lineTo(P[0],P[1]),h.lineTo(R[0],R[1]),h.clip(),h.transform(k[0],k[2],k[1],k[3],m,_),h.translate(f[0]-O,f[3]-T),h.scale(n/i,-n/i),h.drawImage(v.canvas,0,0),h.restore()}})),c&&(h.save(),h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach((function(t,e,i){var n=t.target,r=(n[0][0]-g[0])/o,s=-(n[0][1]-g[1])/o,a=(n[1][0]-g[0])/o,u=-(n[1][1]-g[1])/o,l=(n[2][0]-g[0])/o,c=-(n[2][1]-g[1])/o;h.beginPath(),h.moveTo(a,u),h.lineTo(r,s),h.lineTo(l,c),h.closePath(),h.stroke()})),h.restore()),h.canvas}var zc=function(){function t(t,e,i,n,r,o){this.sourceProj_=t,this.targetProj_=e;var s={},a=Zr(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&wi(n)==wi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?wi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?wi(this.targetProj_.getExtent()):null;var u=_i(i),l=bi(i),c=di(i),h=pi(i),f=this.transformInv_(u),p=this.transformInv_(l),d=this.transformInv_(c),v=this.transformInv_(h),y=10+(o?Math.max(0,Math.ceil(Math.log2(fi(i)/(o*o*256*256)))):0);if(this.addQuad_(u,l,c,h,f,p,d,v,y),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach((function(t,e,i){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},t.prototype.addQuad_=function(t,e,i,n,r,o,s,a,u){var l=Ze([r,o,s,a]),c=this.sourceWorldWidth_?wi(l)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1,p=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)p=wi(Ze([t,e,i,n]))/this.targetWorldWidth_>.25||p;!f&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)}if(p||!this.maxSourceExtent_||xi(l,this.maxSourceExtent_)){if(!(p||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(u>0))return;p=!0}if(u>0){if(!p){var d=[(t[0]+i[0])/2,(t[1]+i[1])/2],v=this.transformInv_(d),y=void 0;if(f)y=(Gi(r[0],h)+Gi(s[0],h))/2-Gi(v[0],h);else y=(r[0]+s[0])/2-v[0];var g=(r[1]+s[1])/2-v[1];p=y*y+g*g>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var m=[(e[0]+i[0])/2,(e[1]+i[1])/2],_=this.transformInv_(m),b=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(b);this.addQuad_(t,e,m,b,r,o,_,w,u-1),this.addQuad_(b,m,i,n,w,_,s,a,u-1)}else{var x=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(x),O=[(i[0]+n[0])/2,(i[1]+n[1])/2],T=this.transformInv_(O);this.addQuad_(t,x,O,n,r,S,T,a,u-1),this.addQuad_(x,e,i,O,S,o,s,T,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,r,s,a),this.addTriangle_(t,e,i,r,o,s)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,i,n){var r=e.source;li(t,r[0]),li(t,r[1]),li(t,r[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Wc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qc=function(t){function e(e,i,n,r,o,s){var a=this,u=e.getExtent(),l=i.getExtent(),c=l?mi(n,l):n,h=Bc(e,i,vi(c),r),f=new zc(e,i,c,u,.5*h,r),p=s(f.calculateSourceExtent(),h,o),d=p?Sn:Cn,v=p?p.getPixelRatio():1;return(a=t.call(this,n,r,v,d)||this).targetProj_=i,a.maxSourceExtent_=u,a.triangulation_=f,a.targetResolution_=r,a.targetExtent_=n,a.sourceImage_=p,a.sourcePixelRatio_=v,a.canvas_=null,a.sourceListenerKey_=null,a}return Wc(e,t),e.prototype.disposeInternal=function(){this.state==On&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==Tn){var e=wi(this.targetExtent_)/this.targetResolution_,i=gi(this.targetExtent_)/this.targetResolution_;this.canvas_=Xc(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==Sn){this.state=On,this.changed();var t=this.sourceImage_.getState();t==Tn||t==kn?this.reproject_():(this.sourceListenerKey_=ce(this.sourceImage_,Oe,(function(t){var e=this.sourceImage_.getState();e!=Tn&&e!=kn||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){fe(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(Ls),Vc=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hc="imageloadstart",Kc="imageloadend",Uc="imageloaderror",Zc=function(t){function e(e,i){var n=t.call(this,e)||this;return n.image=i,n}return Vc(e,t),e}(we);function Jc(t,e){t.getImage().src=e}var Qc=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return i.resolutions_=void 0!==e.resolutions?e.resolutions:null,i.reprojectedImage_=null,i.reprojectedRevision_=0,i}return Vc(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=ve(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,n){var r=this.getProjection();if(r&&n&&!Kr(r,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Kr(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&ai(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new qc(r,n,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,r)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return r&&(n=r),this.getImageInternal(t,e,i,n)},e.prototype.getImageInternal=function(t,e,i,n){return Jt()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case On:this.loading=!0,this.dispatchEvent(new Zc(Hc,e));break;case Tn:this.loading=!1,this.dispatchEvent(new Zc(Kc,e));break;case kn:this.loading=!1,this.dispatchEvent(new Zc(Uc,e))}},e}(Ju),$c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),th=function(t){function e(e){var i=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,r=void 0!==e.imageLoadFunction?e.imageLoadFunction:Jc;return(i=t.call(this,{attributions:e.attributions,projection:qr(e.projection)})||this).url_=e.url,i.imageExtent_=e.imageExtent,i.image_=new Fs(i.imageExtent_,void 0,1,i.url_,n,r),i.imageSize_=e.imageSize?e.imageSize:null,i.image_.addEventListener(Oe,i.handleImageChange.bind(i)),i}return $c(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,i,n){return xi(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==Tn){var i=this.image_.getExtent(),n=this.image_.getImage(),r=void 0,o=void 0;this.imageSize_?(r=this.imageSize_[0],o=this.imageSize_[1]):(r=n.width,o=n.height);var s=gi(i)/o,a=Math.ceil(wi(i)/s);if(a!=r){var u=xn(a,o),l=u.canvas;u.drawImage(n,0,0,r,o,0,0,l.width,l.height),this.image_.setImage(l)}}t.prototype.handleImageChange.call(this,e)},e}(Qc),eh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ih=function(t){function e(e){var i=e||{};return t.call(this,i)||this}return eh(e,t),e}(Qi),nh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rh=function(t){function e(e){var i=t.call(this,e)||this;return i.image_=null,i}return nh(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,n=t.viewState,r=n.resolution,o=this.getLayer().getSource(),s=t.viewHints,a=t.extent;if(void 0!==e.extent&&(a=mi(a,ro(e.extent,n.projection))),!s[mr]&&!s[_r]&&!Si(a))if(o){var u=n.projection,l=o.getImage(a,r,i,u);l&&this.loadImage(l)&&(this.image_=l)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var i=this.image_,n=i.getExtent(),r=i.getResolution(),o=i.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,u=t.viewState,l=u.center,c=u.resolution,h=t.size,f=a*r/(c*o),p=Math.round(h[0]*a),d=Math.round(h[1]*a),v=u.rotation;if(v){var y=Math.round(Math.sqrt(p*p+d*d));p=y,d=y}Fn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,v,-p/2,-d/2),Nn(this.inversePixelTransform,this.pixelTransform);var g=ir(this.pixelTransform);this.useContainer(e,g,s.opacity);var m=this.context,_=m.canvas;_.width!=p||_.height!=d?(_.width=p,_.height=d):this.containerReused||m.clearRect(0,0,p,d);var b=!1;if(s.extent){var w=ro(s.extent,u.projection);(b=!ti(w,t.extent)&&xi(w,t.extent))&&this.clipUnrotated(m,t,w)}var x=i.getImage(),S=Fn(this.tempTransform_,p/2,d/2,f,f,0,o*(n[0]-l[0])/r,o*(l[1]-n[3])/r);this.renderedResolution=r*a/o;var O=S[4],T=S[5],k=x.width*S[0],C=x.height*S[3];if(this.preRender(m,t),k>=.5&&C>=.5){var E=s.opacity,P=void 0;1!==E&&(P=this.context.globalAlpha,this.context.globalAlpha=E),this.context.drawImage(x,0,0,+x.width,+x.height,Math.round(O),Math.round(T),Math.round(k),Math.round(C)),1!==E&&(this.context.globalAlpha=P)}return this.postRender(m,t),b&&m.restore(),g!==_.style.transform&&(_.style.transform=g),this.container},e}(cs),oh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sh=function(t){function e(e){return t.call(this,e)||this}return oh(e,t),e.prototype.createRenderer=function(){return new rh(this)},e}(ih);function ah(t){return(ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ch(t,e){return(ch=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ph(t);if(e){var r=ph(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return fh(this,i)}}function fh(t,e){return!e||"object"!==ah(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ph(t){return(ph=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ch(t,e)}(o,t);var e,i,n,r=hh(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.url,n=void 0===i?void 0:i,s=e.datetime,a=void 0===s?void 0:s,u=e.mimetype,l=void 0===u?void 0:u,c=e.reloadTime,h=void 0===c?void 0:c,f=e.className,p=void 0===f?void 0:f,d=e.extent,v=e.ol,y=void 0===v?{}:v;return uh(this,o),(t=r.call(this,{url:n,datetime:a,mimetype:l,reloadTime:h,className:p,ol:y})).options.extent=d,t}return e=o,(i=[{key:"makeOLLayer",value:function(){var t=this.options.ol.source;return t.url=this.options.url,t.imageExtent=Qr(this.options.extent,"EPSG:4326","EPSG:3857"),new sh({source:new th(t),className:this.className})}},{key:"makeLLLayer",value:function(){return L.imageOverlay(this.options.url,[[this.options.extent[1],this.options.extent[0]],[this.options.extent[3],this.options.extent[2]]])}}])&&lh(e.prototype,i),n&&lh(e,n),o}(ea),vh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();var yh=function(t){function e(e,i,n,r,o,s){var a=t.call(this,e,i,s)||this;return a.crossOrigin_=r,a.src_=n,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.tileLoadFunction_=o,a}return vh(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=Sl,this.unlistenImage_(),this.image_=((t=xn(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=xl:this.state=Ol,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Sl&&(this.state=bl,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==bl&&(this.state=wl,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ds(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Cl),gh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mh=function(t){function e(e,i,n,r,o,s,a,u,l,c,h){var f=t.call(this,o,bl)||this;f.renderEdges_=void 0!==h&&h,f.pixelRatio_=a,f.gutter_=u,f.canvas_=null,f.sourceTileGrid_=i,f.targetTileGrid_=r,f.wrappedTileCoord_=s||o,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var p=r.getTileCoordExtent(f.wrappedTileCoord_),d=f.targetTileGrid_.getExtent(),v=f.sourceTileGrid_.getExtent(),y=d?mi(p,d):p;if(0===fi(y))return f.state=Ol,f;var g=e.getExtent();g&&(v=v?mi(v,g):g);var m=r.getResolution(f.wrappedTileCoord_[0]),_=Bc(e,n,vi(y),m);if(!isFinite(_)||_<=0)return f.state=Ol,f;var b=void 0!==c?c:.5;if(f.triangulation_=new zc(e,n,y,v,_*b,m),0===f.triangulation_.getTriangles().length)return f.state=Ol,f;f.sourceZ_=i.getZForResolution(_);var w=f.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(w[1]=Li(w[1],v[1],v[3]),w[3]=Li(w[3],v[1],v[3])):w=mi(w,v)),fi(w)){for(var x=i.getTileRangeForExtentAndZ(w,f.sourceZ_),S=x.minX;S<=x.maxX;S++)for(var O=x.minY;O<=x.maxY;O++){var T=l(f.sourceZ_,S,O,a);T&&f.sourceTiles_.push(T)}0===f.sourceTiles_.length&&(f.state=Ol)}else f.state=Ol;return f}return gh(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==xl&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=Sl;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Xc(n,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=xl}this.changed()},e.prototype.load=function(){if(this.state==bl){this.state=wl,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){var r=e.getState();if(r==bl||r==wl){t++;var o=ce(e,Oe,(function(i){var n=e.getState();n!=xl&&n!=Sl&&n!=Ol||(fe(o),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,i){t.getState()==bl&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(fe),this.sourcesListenerKeys_=null},e}(Cl),_h=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function bh(t,e){t.getImage().src=e}var wh=function(t){function e(e){var i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:bh,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return i.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,i.tileClass=void 0!==e.tileClass?e.tileClass:yh,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return _h(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[n];r.expireCache(r==i?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Kr(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Kr(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Kr(e,t)){var i=$t(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Ul(t)),this.tileGridForProjection[i]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Kr(e,t))return this.tileCache;var i=$t(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new zl(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,e,i,n,r,o){var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,r),u=a?this.tileUrlFunction(a,n,r):void 0,l=new this.tileClass(s,void 0!==u?bl:Ol,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,l.addEventListener(Oe,this.handleTileChange.bind(this)),l},e.prototype.getTile=function(t,e,i,n,r){var o=this.getProjection();if(o&&r&&!Kr(o,r)){var s=this.getTileCacheForProjection(r),a=[t,e,i],u=void 0,l=Dl(a);s.containsKey(l)&&(u=s.get(l));var c=this.getKey();if(u&&u.key==c)return u;var h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),p=this.getTileCoordForTileUrlFunction(a,r),d=new mh(o,h,r,f,a,p,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=c,u?(d.interimTile=u,d.refreshInterimChain(),s.replace(l,d)):s.set(l,d),d}return this.getTileInternal(t,e,i,n,o||r)},e.prototype.getTileInternal=function(t,e,i,n,r){var o=null,s=Al(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=a){var u=o;o=this.createTile_(t,e,i,n,r,a),u.getState()==bl?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,i,n,r,a),this.tileCache.set(s,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var i=qr(t);if(i){var n=$t(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(uc),xh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Sh=function(t){function e(e){var i=e||{},n=void 0!==i.projection?i.projection:"EPSG:3857",r=void 0!==i.tileGrid?i.tileGrid:Zl({extent:$l(n),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:n,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return xh(e,t),e}(wh),Oh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Th=function(t){function e(e){var i,n=e||{};i=void 0!==n.attributions?n.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];var r=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",o=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:i,cacheSize:n.cacheSize,crossOrigin:r,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:o,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return Oh(e,t),e}(Sh),kh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ch=function(t){function e(e){var i=this,n=e||{},r=se({},n);return delete r.preload,delete r.useInterimTilesOnError,(i=t.call(this,r)||this).setPreload(void 0!==n.preload?n.preload:0),i.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),i}return kh(e,t),e.prototype.getPreload=function(){return this.get(fc)},e.prototype.setPreload=function(t){this.set(fc,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(pc)},e.prototype.setUseInterimTilesOnError=function(t){this.set(pc,t)},e}(Qi),Eh=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ph=function(t){function e(e){return t.call(this,e)||this}return Eh(e,t),e.prototype.createRenderer=function(){return new _c(this)},e}(Ch);function Ih(t){return(Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mh(t,e){return(Mh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Dh(t);if(e){var r=Dh(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ah(this,i)}}function Ah(t,e){return!e||"object"!==Ih(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dh(t){return(Dh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mh(t,e)}(o,t);var e,i,n,r=Lh(o);function o(){return Rh(this,o),r.apply(this,arguments)}return e=o,(i=[{key:"makeOLLayer",value:function(){var t=this.options.ol.source;return t.url=this.options.url,new Ph({source:new Th(t)})}}])&&jh(e.prototype,i),n&&jh(e,n),o}(ea);function Nh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Gh=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isShown=!1,this._content=void 0}var e,i,n;return e=t,(i=[{key:"show",value:function(){var t=!this.isShown;return this._isShown=!0,t&&this.trigger("show:tooltip"),this}},{key:"hide",value:function(){var t=this.isShown;return this._isShown=!1,t&&this.trigger("hide:tooltip"),this}},{key:"update",value:function(){return this}},{key:"onContentChange",value:function(){}},{key:"isShown",get:function(){return this._isShown}},{key:"content",get:function(){return this._content},set:function(t){var e=this._content;this._content=t,e!==this._content&&this.onContentChange()}}])&&Nh(e.prototype,i),n&&Nh(e,n),t}();A(Gh.prototype);var Bh=Gh;i(6);function Yh(t){return(Yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wh(t,e,i){return(Wh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kh(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function qh(t,e){return(qh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Kh(t);if(e){var r=Kh(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Hh(this,i)}}function Hh(t,e){return!e||"object"!==Yh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kh(t){return(Kh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qh(t,e)}(o,t);var e,i,n,r=Vh(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.tooltipNode,n=void 0===i?void 0:i,s=e.bootstrapOptions,a=void 0===s?void 0:s,u=e.closeOnMouseMove,l=void 0===u||u,c=e.closeOnMouseEnter,h=void 0!==c&&c;return Xh(this,o),(t=r.call(this)).bootstrapOptions=a||{},t._initBootstrapOptions(a),t.closeOnMouseMove=l,t.closeOnMouseEnter=h,t._tooltipNode=void 0,t.tooltipNode=n,t}return e=o,(i=[{key:"show",value:function(t){var e=t.posX,i=t.posY;return this.tooltipNode.css({left:"".concat(e,"px"),top:"".concat(i,"px")}).tooltip(this.isShown?"update":"show"),Wh(Kh(o.prototype),"show",this).call(this)}},{key:"hide",value:function(){return this.isShown&&this.tooltipNode.tooltip("hide").attr("data-original-title",void 0),Wh(Kh(o.prototype),"hide",this).call(this)}},{key:"update",value:function(){return this.tooltipNode.tooltip("update"),Wh(Kh(o.prototype),"update",this).call(this)}},{key:"onContentChange",value:function(){this.tooltipNode.attr("data-original-title",Zh(this.content)?this.content:"-"),this._updateNonStringContent(),this.update()}},{key:"_initBootstrapOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.trigger,i=void 0===e?"manual":e;this.bootstrapOptions.trigger=i}},{key:"_initTooltipNode",value:function(){var t=this;this.tooltipNode.tooltip(this.bootstrapOptions).on("inserted.bs.tooltip",(function(){var e=t._updateNonStringContent();e.length&&(t.closeOnMouseMove&&e.children(".tooltip-inner").mousemove((function(){return t.hide()})),t.closeOnMouseEnter&&e.children(".tooltip-inner").mouseenter((function(){return t.hide()})))}))}},{key:"_updateNonStringContent",value:function(){var t=Z()(document.getElementById(this.tooltipNode.attr("aria-describedby")));if(t.length)return void 0===this.content||Zh(this.content)||t.children(".tooltip-inner").empty().append(this.content),t}},{key:"tooltipNode",get:function(){return this._tooltipNode},set:function(t){void 0!==t?(this._tooltipNode=Z()(t),this._initTooltipNode()):this._tooltipNode=t}}])&&zh(e.prototype,i),n&&zh(e,n),o}(Bh),Zh=function(t){return"[object String]"==Object.prototype.toString.call(t)};function Jh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id;Jh(this,t),this._id=i}var e,i,n;return e=t,(i=[{key:"setId",value:function(){}},{key:"id",get:function(){return this._id},set:function(t){this._id=t,this.setId(t)}}])&&Qh(e.prototype,i),n&&Qh(e,n),t}();function tf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ef(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nf=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.fireReplace,n=void 0===i||i,r=e.fireAddRemoveOnReplace,o=void 0!==r&&r,s=e.appendOnReplace,a=void 0===s||s,u=e.sortFunction,l=e.emptyObjectMaker;tf(this,t),this.options={fireReplace:n,fireAddRemoveOnReplace:o,appendOnReplace:a,sortFunction:u,emptyObjectMaker:l},this._itemIds=[],this._items={}}var e,i,n;return e=t,(i=[{key:Symbol.iterator,value:function(){var t=this,e=0;return{next:function(){return e<t._itemIds.length?{value:t._items[t._itemIds[e++]]}:{done:!0}}}}},{key:"getItemById",value:function(t){return t in this._items?this._items[t]:void 0===this.options.emptyObjectMaker?new $h:this.options.emptyObjectMaker.call(this)}},{key:"contains",value:function(t){var e=this.containsId(t.id);return e&&(e=t===this.getItemById(t.id)),e}},{key:"containsId",value:function(t){return t in this._items}},{key:"append",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach((function(e){var i=e.id;if(t.containsId(i)){var n=t.getItemById(i);t.options.appendOnReplace&&(t._itemIds.splice(t._itemIds.indexOf(i),1),t._itemIds.push(i)),n!==e&&(t._items[i]=e,t.options.fireReplace&&t.trigger("replace:item",e,n),t.options.fireAddRemoveOnReplace&&(t.trigger("remove:item",n),t.trigger("add:item",e)))}else t._itemIds.push(i),t._items[i]=e,t.trigger("add:item",e)})),this._sort(),this}},{key:"remove",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach((function(e){var i=t._itemIds.indexOf(e.id);if(i>-1){var n=t._items[e.id];delete t._items[e.id],t._itemIds.splice(i,1),t.trigger("remove:item",n)}})),this}},{key:"removeById",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach((function(e){var i=t._itemIds.indexOf(e);if(i>-1){var n=t._items[e];delete t._items[e],t._itemIds.splice(i,1),t.trigger("remove:item",n)}})),this}},{key:"_sort",value:function(){var t=this;void 0!==this.options.sortFunction&&this._itemIds.sort((function(e,i){return t.options.sortFunction(t._items[e],t._items[i])}))}},{key:"count",get:function(){return this._itemIds.length}},{key:"items",get:function(){var t=this;return this._itemIds.map((function(e){return t._items[e]}))}},{key:"itemIds",get:function(){return this._itemIds}},{key:"sortFunction",get:function(){return this.options.sortFunction},set:function(t){this.options.sortFunction=t,this._sort()}}])&&ef(e.prototype,i),n&&ef(e,n),t}();A(nf.prototype);var rf=nf;function of(t){return(of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function af(t,e){return(af=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=cf(t);if(e){var r=cf(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return lf(this,i)}}function lf(t,e){return!e||"object"!==of(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cf(t){return(cf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&af(t,e)}(i,t);var e=uf(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.id,o=void 0===r?void 0:r,s=n.pres,a=void 0===s?void 0:s,u=n.tmpc,l=void 0===u?void 0:u,c=n.dwpc,h=void 0===c?void 0:c,f=n.ptrace,p=void 0===f?void 0:f,d=n.ttrace,v=void 0===d?void 0:d,y=n.blayer,g=void 0===y?void 0:y,m=n.tlayer,_=void 0===m?void 0:m,b=n.lclpres,w=void 0===b?void 0:b,x=n.lclhght,S=void 0===x?void 0:x,O=n.lfcpres,T=void 0===O?void 0:O,k=n.lfchght,C=void 0===k?void 0:k,E=n.elpres,P=void 0===E?void 0:E,I=n.elhght,R=void 0===I?void 0:I,j=n.mplpres,M=void 0===j?void 0:j,L=n.mplhght,A=void 0===L?void 0:L,D=n.bplus,F=void 0===D?void 0:D,N=n.bminus,G=void 0===N?void 0:N,B=n.bfzl,Y=void 0===B?void 0:B,X=n.b3km,z=void 0===X?void 0:X,W=n.b6km,q=void 0===W?void 0:W,V=n.p0c,H=void 0===V?void 0:V,K=n.pm10c,U=void 0===K?void 0:K,Z=n.pm20c,J=void 0===Z?void 0:Z,Q=n.pm30c,$=void 0===Q?void 0:Q,tt=n.hght0c,et=void 0===tt?void 0:tt,it=n.hghtm10c,nt=void 0===it?void 0:it,rt=n.hghtm20c,ot=void 0===rt?void 0:rt,st=n.hghtm30c,at=void 0===st?void 0:st,ut=n.wm10c,lt=void 0===ut?void 0:ut,ct=n.wm20c,ht=void 0===ct?void 0:ct,ft=n.wm30c,pt=void 0===ft?void 0:ft,dt=n.li5,vt=void 0===dt?void 0:dt,yt=n.li3,gt=void 0===yt?void 0:yt,mt=n.brnshear,_t=void 0===mt?void 0:mt,bt=n.brnu,wt=void 0===bt?void 0:bt,xt=n.brnv,St=void 0===xt?void 0:xt,Ot=n.limax,Tt=void 0===Ot?void 0:Ot,kt=n.limaxpres,Ct=void 0===kt?void 0:kt,Et=n.cap,Pt=void 0===Et?void 0:Et,It=n.cappres,Rt=void 0===It?void 0:It,jt=n.bmin,Mt=void 0===jt?void 0:jt,Lt=n.bminpres,At=void 0===Lt?void 0:Lt;return sf(this,i),(t=e.call(this,{id:o})).pres=a,t.tmpc=l,t.dwpc=h,t.ptrace=p,t.ttrace=v,t.blayer=g,t.tlayer=_,t.lclpres=w,t.lclhght=S,t.lfcpres=T,t.lfchght=C,t.elpres=P,t.elhght=R,t.mplpres=M,t.mplhght=A,t.bplus=F,t.bminus=G,t.bfzl=Y,t.b3km=z,t.b6km=q,t.p0c=H,t.pm10c=U,t.pm20c=J,t.pm30c=$,t.hght0c=et,t.hghtm10c=nt,t.hghtm20c=ot,t.hghtm30c=at,t.wm10c=lt,t.wm20c=ht,t.wm30c=pt,t.li5=vt,t.li3=gt,t.brnshear=_t,t.brnu=wt,t.brnv=St,t.limax=Tt,t.limaxpres=Ct,t.cap=Pt,t.cappres=Rt,t.bmin=Mt,t.bminpres=At,t}return i}($h);function ff(t){return function(t){if(Array.isArray(t))return pf(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return pf(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pf(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pf(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function df(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vf(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yf=function(){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.calcMissing,r=void 0!==n&&n,o=i.parcels,s=void 0===o?[]:o;df(this,t),this.options={calcMissing:r},this.levels={},this._parcelCollection=new rf({fireAddRemoveOnReplace:!0,fireReplace:!1,emptyObjectMaker:function(){return new hf}}),(e=this._parcelCollection).append.apply(e,ff(s))}var e,i,n;return e=t,(i=[{key:"addLevels",value:function(t,e){return t.forEach((function(t){this.addLevel(t,e)}),this),this}},{key:"addLevel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.calcMissing;return i=i||this.options.calcMissing,"pres"in t&&void 0!==t.pres&&(i&&(t=this.calculateMissingData(t)),this.levels[t.pres]=t),this}},{key:"calculateMissingData",value:function(t){var e={pres:t.pres,hght:t.hght,u:t.u,v:t.v,wdir:t.wdir,wspd:t.wspd,tmpk:t.tmpk,dwpk:t.dwpk,relh:t.relh,mixr:t.mixr,theta:t.theta,thetae:t.thetae,wetbulb:t.wetbulb,vtmp:t.vtmp};return void 0===e.hght&&(e.hght=r(e.pres)),void 0===e.u&&void 0===e.v&&void 0!==e.wdir&&void 0!==e.wspd?(e.u=e.wspd*Math.sin(e.wdir/180*Math.PI),e.v=e.wspd*Math.cos(e.wdir/180*Math.PI)):void 0!==e.u&&void 0!==e.v&&void 0===e.wdir&&void 0===e.wspd&&(e.wspd=Math.sqrt(Math.pow(e.u,2)+Math.pow(e.v,2)),e.wdir=Math.arctan(e.u/e.v)/Math.PI*180),void 0!==e.tmpk&&void 0!==e.dwpk?(void 0===e.theta&&(e.theta=s(e.tmpk,e.pres)),void 0===e.thetae&&(e.thetae=h(e.tmpk,e.dwpk,e.pres))):void 0!==e.mixr&&void 0===e.dwpk&&(e.dwpk=l(e.mixr,e.pres)),e}},{key:"removeLevel",value:function(t){return t in this.levels&&delete this.levels[t],this}},{key:"getData",value:function(t){return t in this.levels?this.levels[t]:{pres:void 0,hght:void 0,tmpk:void 0,dwpk:void 0,wdir:void 0,wspd:void 0,u:void 0,v:void 0,relh:void 0,mixr:void 0,theta:void 0,thetae:void 0,wetbulb:void 0,vtmp:void 0}}},{key:"getLevels",value:function(){return Object.keys(this.levels).map((function(t){return+t})).sort((function(t,e){return t-e}))}},{key:"getNearestLevel",value:function(t){if(!(Object.keys(this.levels).length<1))return Object.keys(this.levels).sort((function(e,i){return Math.abs(e-t)-Math.abs(i-t)})).shift()}},{key:"parcelCollection",get:function(){return this._parcelCollection}}])&&vf(e.prototype,i),n&&vf(e,n),t}(),gf=i(1);function mf(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function _f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,i=void 0===e?void 0:e,n=t.width,r=void 0===n?void 0:n,o=mf(t,["color","width"]),s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.color=xf(i,s.color,"black"),o.width=xf(r,s.width,1),Object.keys(s).forEach((function(t){"color"!=t&&"width"!=t&&void 0===o[t]&&(o[t]=s[t])})),o}function bf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.size,i=void 0===e?void 0:e,n=t.color,r=void 0===n?void 0:n,o=t.anchor,s=void 0===o?void 0:o,a=mf(t,["size","color","anchor"]),u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.size=xf(i,u.size,12),a.color=xf(r,u.color,"black"),void 0!==(s=xf(s,u.anchor))&&(a.anchor=s),Object.keys(u).forEach((function(t){"color"!=t&&"size"!=t&&"anchor"!=t&&void 0===a[t]&&(a[t]=u[t])})),a}function wf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,i=void 0===e?void 0:e,n=t.style,r=void 0===n?{}:n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{visible:xf(i,o.visible,!0),style:_f(r,o.style)}}function xf(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce((function(t,e){return void 0!==t?t:e}))}function Sf(t){var e=t.node,i=t.text,n=t.x,r=t.y,o=t.horizontalMargin,s=void 0===o?0:o,a=t.verticalMargin,u=void 0===a?0:a,l=t.font,c=void 0===l?{}:l,h=t.fill,f=void 0===h?{}:h,p=e.group();"color"in f||(f.color="white");var d=p.rect().fill(f),v=p.text(i).attr({x:n,y:r}).font(c);return"bottom"==c["alignment-baseline"]&&v.dy(-v.bbox().height-5),v.dx(s*("end"==v.attr("text-anchor")?-1:1)).dy(u*("bottom"==c["alignment-baseline"]?-1:1)),d.attr({x:v.bbox().x,y:v.bbox().y,width:v.bbox().width,height:v.bbox().height}),p}function Of(t){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kf(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cf(t,e){return(Cf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ef(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=If(t);if(e){var r=If(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Pf(this,i)}}function Pf(t,e){return!e||"object"!==Of(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function If(t){return(If=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cf(t,e)}(o,t);var e,i,n,r=Ef(o);function o(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.visible,s=void 0===n||n,a=i.diagram,u=void 0===a?{}:a,l=i.windprofile,c=void 0===l?{}:l,h=i.hodograph,f=void 0===h?{}:h,p=i.parcels,d=void 0===p?{}:p;return Tf(this,o),(e=r.call(this))._sounding=t,e._visible=s,e._options={diagram:Mf(u),windprofile:Af(c),hodograph:wf(f),parcels:Ff(d)},e}return e=o,(i=[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,i=void 0===e?void 0:e,n=t.diagram,r=void 0===n?void 0:n,o=t.windprofile,s=void 0===o?void 0:o,a=t.hodograph,u=void 0===a?void 0:a,l=t.parcels,c=void 0===l?void 0:l,h=!1;void 0===r?r={}:h=!0,void 0===s?s={}:h=!0,void 0===u?u={}:h=!0,void 0===c?c={}:h=!0,this._options.diagram=Lf(this._options.diagram,r),this._options.windprofile=Df(this._options.windprofile,s),this._options.hodograph=Bf(this._options.hodograph,u),this._options.parcels=Nf(this._options.parcels,c),h&&this.trigger("change:options"),void 0!==i&&(this.visible=i)}},{key:"getParcelOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e={visible:this.options.parcels.default.visible,temp:{visible:this.options.parcels.default.temp.visible,style:this.options.parcels.default.temp.style},dewp:{visible:this.options.parcels.default.dewp.visible,style:this.options.parcels.default.dewp.style}};return void 0!==t&&t.id in this.options.parcels&&(e=Gf(e,this.options.parcels[t.id],["temp","dewp"])),e}},{key:"sounding",get:function(){return this._sounding}},{key:"visible",get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=!!t,e!=this._visible&&this.trigger("change:visible")}},{key:"options",get:function(){return this._options}}])&&kf(e.prototype,i),n&&kf(e,n),o}($h);A(Rf.prototype);var jf=Rf;function Mf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,i=void 0===e||e,n=t.temp,r=void 0===n?{}:n,o=t.dewp,s=void 0===o?{}:o,a=t.wetbulb,u=void 0===a?{}:a;return{visible:i,temp:wf(r,{style:{color:"red",width:3,linecap:"round"}}),dewp:wf(s,{style:{color:"blue",width:3,linecap:"round"}}),wetbulb:wf(u,{style:{color:"green",width:2,linecap:"round"}})}}function Lf(t,e){return Gf(t,e,["temp","dewp","wetbulb"])}function Af(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,i=void 0===e||e,n=t.windbarbs,r=void 0===n?{}:n,o=t.windspeed,s=void 0===o?{}:o;return{visible:i,windbarbs:wf(r),windspeed:wf(s)}}function Df(t,e){return Gf(t,e,["windbarbs","windspeed"])}function Ff(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.visible&&(t.visible=!0),void 0===t.default&&(t.default={}),void 0===t.default.visible&&(t.default.visible=!1),void 0===t.default.temp&&(t.default.temp={}),void 0===t.default.temp.visible&&(t.default.temp.visible=!0),void 0===t.default.temp.style&&(t.default.temp.style={}),void 0===t.default.temp.style.color&&(t.default.temp.style.color="rgb(255, 153, 0)"),void 0===t.default.temp.style.width&&(t.default.temp.style.width=3),void 0===t.default.temp.style.linecap&&(t.default.temp.style.linecap="round"),void 0===t.default.dewp&&(t.default.dewp={}),void 0===t.default.dewp.visible&&(t.default.dewp.visible=!0),void 0===t.default.dewp.style&&(t.default.dewp.style={}),void 0===t.default.dewp.style.color&&(t.default.dewp.style.color="rgb(255, 194, 102)"),void 0===t.default.dewp.style.width&&(t.default.dewp.style.width=3),void 0===t.default.dewp.style.linecap&&(t.default.dewp.style.linecap="round"),t}function Nf(t,e){return"visible"in e&&(t.visible=e.visible),"default"in e&&(t.default=Gf(t.default,e.default,["temp","dewp"])),Object.keys(e).filter((function(t){return"visible"!=t&&"default"!=t})).forEach((function(i){return t[i]=Lf(i in t?t[i]:{},e[i])})),t}function Gf(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"visible"in e&&(t.visible=e.visible),i.forEach((function(i){i in e&&(t[i]=Bf(t[i]?t[i]:{style:{}},e[i]))})),t}function Bf(t,e){return"visible"in e&&(t.visible=e.visible),"style"in e&&["color","width","opacity","linecap","linejoin","dasharray"].forEach((function(i){i in e.style&&(t.style[i]=e.style[i])})),t}function Yf(t){return(Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xf(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return zf(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return zf(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function zf(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Wf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qf(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vf(t,e){return(Vf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Uf(t);if(e){var r=Uf(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Kf(this,i)}}function Kf(t,e){return!e||"object"!==Yf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uf(t){return(Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vf(t,e)}(o,t);var e,i,n,r=Hf(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.renderTo,n=void 0===i?void 0:i,s=e.width,a=void 0===s?void 0:s,u=e.height,l=void 0===u?void 0:u;if(Wf(this,o),(t=r.call(this,{fireReplace:!1,fireAddRemoveOnReplace:!0,emptyObjectMaker:function(){return new jf}}))._svgNode=void 0===n||"node"in n||"instance"in n?Object(gf.a)(n):Object(gf.a)().addTo(n),void 0!==a||void 0!==l)t._svgNode.size(a,l);else if(void 0===a&&void 0===l&&void 0!==n&&"getBoundingClientRect"in n){var c=n.getBoundingClientRect(),h=window.getComputedStyle(n);t._svgNode.size(c.width-parseFloat(h.getPropertyValue("padding-left"))-parseFloat(h.getPropertyValue("padding-right")),c.height-parseFloat(h.getPropertyValue("padding-top"))-parseFloat(h.getPropertyValue("padding-bottom")))}return t._plotAreas=new Set,t._svgNode.on("mousemove",(function(e){var i,n=Xf(t._plotAreas);try{for(n.s();!(i=n.n()).done;){var r=i.value;"isHoverLabelsRemote"in r&&r.svgNode.dispatchEvent(e)}}catch(t){n.e(t)}finally{n.f()}})),t._svgNode.on("mouseout",(function(e){if(t._svgNode.node===e.target){var i,n=Xf(t._plotAreas);try{for(n.s();!(i=n.n()).done;){var r=i.value;"_hoverLabelsGroup"in r&&r._hoverLabelsGroup.clear()}}catch(t){n.e(t)}finally{n.f()}}})),t.on("add:item",(function(e){var i,n=Xf(t._plotAreas);try{for(n.s();!(i=n.n()).done;){var r=i.value;"addSounding"in r&&r.addSounding(e)}}catch(t){n.e(t)}finally{n.f()}})),t.on("remove:item",(function(e){var i,n=Xf(t._plotAreas);try{for(n.s();!(i=n.n()).done;){var r=i.value;"removeSounding"in r&&r.removeSounding(e)}}catch(t){n.e(t)}finally{n.f()}})),t}return e=o,(i=[{key:"appendPlotArea",value:function(t){if(!this._plotAreas.has(t)){this._plotAreas.add(t),t.addTo(this.svgNode);var e,i=Xf(this);try{for(i.s();!(e=i.n()).done;){var n=e.value;"addSounding"in t&&t.addSounding(n)}}catch(t){i.e(t)}finally{i.f()}return this}}},{key:"removePlotArea",value:function(t){if(this._plotAreas.has(t)){var e,i=Xf(this);try{for(i.s();!(e=i.n()).done;){var n=e.value;t.removeSounding(n)}}catch(t){i.e(t)}finally{i.f()}return this._plotAreas.delete(t),this}}},{key:"exchangeCoordinateSystem",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Xf(this._plotAreas);try{for(n.s();!(e=n.n()).done;){var r=e.value;void 0!==i&&r.coordinateSystem!==i||(r.coordinateSystem=t)}}catch(t){n.e(t)}finally{n.f()}}},{key:"addSounding",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new jf(t,e),n=1,r="sounding-".concat(n);this.containsId(r);)n++,r="sounding-".concat(n);return i.id=r,this.append(i),i}},{key:"svgNode",get:function(){return this._svgNode}}])&&qf(e.prototype,i),n&&qf(e,n),o}(rf);function Jf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qf(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.width,n=void 0===i?100:i,r=e.height,o=void 0===r?100:r,s=e.pressure,a=void 0===s?{}:s,u=e.temperature,l=void 0===u?{}:u;Jf(this,t),this._width=n,this._height=o,this.temperatureBottomLeft,this.temperatureBottomRight,this.inclinationTan,this.options={pressure:{},temperature:{}},this._initPressureOptions(a),this._initTemperatureOptions(l)}var e,i,n;return e=t,(i=[{key:"isIsobarsStraightLine",value:function(){return!0}},{key:"isDryAdiabatStraightLine",value:function(){return!1}},{key:"isIsothermsVertical",value:function(){return void 0!==this.options.temperature.inclinationAngle&&0==this.options.temperature.inclinationAngle}},{key:"getPByXY",value:function(t,e){return Math.pow(this.options.pressure.min,e/this.height)*Math.pow(this.options.pressure.max,(this.height-e)/this.height)}},{key:"getTByXY",value:function(t,e){var i=t-e*this.inclinationTan;return this.temperatureBottomLeft+i*(this.temperatureBottomRight-this.temperatureBottomLeft)/this.width}},{key:"getYByXP",value:function(t,e){return this.height*Math.log(this.options.pressure.max/e)/Math.log(this.options.pressure.max/this.options.pressure.min)}},{key:"getTByXP",value:function(t,e){return this.getTByXY(t,this.getYByXP(t,e))}},{key:"getXByYT",value:function(t,e){return(e-this.temperatureBottomLeft)*this.width/(this.temperatureBottomRight-this.temperatureBottomLeft)+t*this.inclinationTan}},{key:"getYByXT",value:function(t,e){return 0!=this.inclinationTan?(t-this.getXByYT(0,e))/this.inclinationTan:void 0}},{key:"getXByPT",value:function(t,e){return this.getXByYT(this.getYByXP(0,t),e)}},{key:"getYByPT",value:function(t){return this.getYByXP(0,t)}},{key:"getXByYPotentialTemperature",value:function(t,e){return e=a(e,this.getPByXY(0,t)),this.getXByYT(t,e)}},{key:"getYByXPotentialTemperature",value:function(t,e){var i=this.getPByXY(t,0),n=this.getPByXY(t,this.height);if(!(s(this.getTByXP(t,n),n)<e||e<s(this.getTByXP(t,i),i))){for(;i-n>10;){var r=n+(i-n)/2,o=s(this.getTByXP(t,r),r);if(void 0===o)return;o<e?i=r:n=r}return this.getYByXP(t,n+(i-n)/2)}}},{key:"getXByPPotentialTemperatur",value:function(t,e){return e=a(e,t),this.getXByPT(t,e)}},{key:"getYByPPotentialTemperatur",value:function(t,e){var i=this.getXByPPotentialTemperatur(t,e);return this.getYByXPotentialTemperature(i,e)}},{key:"getXByYHMR",value:function(t,e){var i=this.getPByXY(0,t);return this.getXByYT(t,l(e,i))}},{key:"getYByXHMR",value:function(t,e){for(var i=this.getPByXY(t,0),n=this.getPByXY(t,this.height);i-n>10;){var r=n+(i-n)/2,o=p(this.getTByXP(t,r),r);if(void 0===o)return;o<e?n=r:i=r}return this.getYByXP(t,n+(i-n)/2)}},{key:"getXByPHMR",value:function(t,e){var i=l(e,t);return this.getXByPT(t,i)}},{key:"getYByPHMR",value:function(t,e){var i=l(e,t);return this.getYByPT(t,i)}},{key:"getXByYEquiPotTemp",value:function(t,e){var i=u(e,this.getPByXY(0,t));return this.getXByYT(t,i)}},{key:"getYByXEquiPotTemp",value:function(t,e){for(var i=0,n=this.height,r=void 0;n-i>10;){r=i+(n-i)/2;var o=this.getYByXT(t,u(e,this.getPByXY(t,r)));if(void 0===o)return;o<e?n=r:i=r}return r}},{key:"getXByPEquiPotTemp",value:function(t,e){var i=u(e,t);return this.getXByPT(t,i)}},{key:"getYByPEquiPotTemp",value:function(t,e){var i=u(e,t);return this.getYByPT(t,i)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.pressure,i=void 0===e?{}:e,n=t.temperature,r=void 0===n?{}:n;"min"in i&&(this.options.pressure.min=void 0===i.min?100:i.min),"max"in i&&(this.options.pressure.max=void 0===i.max?1e3:i.max),"min"in r&&(this.options.temperature.min=void 0===r.min?g(-40):r.min),"max"in r&&(this.options.temperature.max=void 0===r.max?g(-45):r.max),"reference"in r&&(this.options.temperature.reference=void 0===r.reference?"base":r.reference),"inclinationAngle"in r&&(this.options.temperature.inclinationAngle=void 0===r.inclinationAngle?45:r.inclinationAngle),this._normalizeTemperatureRange(),this.trigger("change:options")}},{key:"_initPressureOptions",value:function(t){var e=t.min,i=void 0===e?100:e,n=t.max,r=void 0===n?1050:n;this.options.pressure={min:i,max:r}}},{key:"_initTemperatureOptions",value:function(t){var e=t.min,i=void 0===e?g(-40):e,n=t.max,r=void 0===n?g(45):n,o=t.reference,s=void 0===o?"base":o,a=t.inclinationAngle,u=void 0===a?45:a;this.options.temperature={min:i,max:r,reference:s,inclinationAngle:u},this._normalizeTemperatureRange()}},{key:"_normalizeTemperatureRange",value:function(){if(this.temperatureBottomLeft=this.options.temperature.min,this.temperatureBottomRight=this.options.temperature.max,this.inclinationTan=45==this.options.temperature.inclinationAngle?1:0==this.options.temperature.inclinationAngle?0:Math.tan(this.options.temperature.inclinationAngle*Math.PI/180),/^[0-9]+$/.test(this.options.temperature.reference)){var t=this.getYByXP(0,this.options.temperature.reference),e=this.inclinationTan*t,i=(this.temperatureBottomRight-this.temperatureBottomLeft)/this.width;this.temperatureBottomLeft+=i*e,this.temperatureBottomRight+=i*e}}},{key:"width",get:function(){return this._width},set:function(t){var e=this._width;this._width=t,e!=this._width&&this.trigger("change:options")}},{key:"height",get:function(){return this._height},set:function(t){var e=this._height;this._height=t,e!=this._height&&this.trigger("change:options")}}])&&Qf(e.prototype,i),n&&Qf(e,n),t}();A($f.prototype);var tp=$f;function ep(t){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ip(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function np(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rp(t,e){return(rp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function op(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=ap(t);if(e){var r=ap(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return sp(this,i)}}function sp(t,e){return!e||"object"!==ep(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ap(t){return(ap=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var up=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rp(t,e)}(o,t);var e,i,n,r=op(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,i=void 0===e?100:e,n=t.height,s=void 0===n?100:n,a=t.pressure,u=void 0===a?{}:a,l=t.temperature,c=void 0===l?{}:l;return ip(this,o),c.inclinationAngle=0,r.call(this,{width:i,height:s,pressure:u,temperature:c})}return e=o,(i=[{key:"isDryAdiabatStraightLine",value:function(){return!0}},{key:"getPByXY",value:function(t,e){return Math.pow(Math.pow(this.options.pressure.max,.2857)-e*(Math.pow(this.options.pressure.max,.2857)-Math.pow(this.options.pressure.min,.2857))/this.height,1/.2857)}},{key:"getYByXP",value:function(t,e){return this.height*(Math.pow(this.options.pressure.max,.2857)-Math.pow(e,.2857))/(Math.pow(this.options.pressure.max,.2857)-Math.pow(this.options.pressure.min,.2857))}},{key:"getYByXT",value:function(){}}])&&np(e.prototype,i),n&&np(e,n),o}(tp);function lp(t){return(lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hp(t,e){return(hp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=dp(t);if(e){var r=dp(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return pp(this,i)}}function pp(t,e){return!e||"object"!==lp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dp(t){return(dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hp(t,e)}(i,t);var e=fp(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=void 0===n?100:n,o=t.height,s=void 0===o?100:o,a=t.pressure,u=void 0===a?{}:a,l=t.temperature,c=void 0===l?{}:l;return cp(this,i),c.inclinationAngle=0,e.call(this,{width:r,height:s,pressure:u,temperature:c})}return i}(tp);function yp(t){return(yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mp(t,e){return(mp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=wp(t);if(e){var r=wp(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return bp(this,i)}}function bp(t,e){return!e||"object"!==yp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wp(t){return(wp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mp(t,e)}(i,t);var e=_p(i);function i(){return gp(this,i),e.apply(this,arguments)}return i}(tp);function Sp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Op(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Tp=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.svgNode,r=void 0===n?void 0:n,o=i.coordinateSystem,s=void 0===o?void 0:o,a=i.x,u=void 0===a?0:a,l=i.y,c=void 0===l?0:l,h=i.width,f=void 0===h?100:h,p=i.height,d=void 0===p?100:p,v=i.style,y=void 0===v?{}:v,g=i.visible,m=void 0===g||g,_=i.events,b=void 0===_?{}:_;Sp(this,t),this._svgNode=Object(gf.a)().attr({x:u,y:c,width:f,height:d}).css(this._getNormalizedStyle(y)).css("display",m?"inline":"none"),void 0!==r&&this.addTo(r),this._svgNodeBackground=this._svgNode.group(),this._visible=m,this._coordinateSystem=s,this._coordinateSystemListenerKey=void 0!==this._coordinateSystem?this._coordinateSystem.on("change:options",(function(){return e.onCoordinateSystemChange()})):void 0,this.on("change:extent",(function(){return e.onCoordinateSystemChange()})),this._initEvents(b)}var e,i,n;return e=t,(i=[{key:"addTo",value:function(t){this._svgNode.addTo(t)}},{key:"init",value:function(){this.onCoordinateSystemChange()}},{key:"onCoordinateSystemChange",value:function(){void 0!==this._coordinateSystem&&this.drawBackground(this._svgNodeBackground)}},{key:"drawBackground",value:function(t){t.clear()}},{key:"_getNormalizedStyle",value:function(t){var e=t.overflow;return{overflow:void 0===e?"hidden":e}}},{key:"_initEvents",value:function(t){var e=this,i=t.click,n=void 0===i?void 0:i,r=t.dblclick,o=void 0===r?void 0:r,s=t.mousedown,a=void 0===s?void 0:s,u=t.mouseup,l=void 0===u?void 0:u,c=t.mouseover,h=void 0===c?void 0:c,f=t.mouseout,p=void 0===f?void 0:f,d=t.mousemove,v=void 0===d?void 0:d,y=t.touchstart,g=void 0===y?void 0:y,m=t.touchmove,_=void 0===m?void 0:m,b=t.touchleave,w=void 0===b?void 0:b,x=t.touchend,S=void 0===x?void 0:x,O=t.touchcancel,T={click:n,dblclick:o,mousedown:a,mouseup:l,mouseover:h,mouseout:p,mousemove:v,touchstart:g,touchmove:_,touchleave:w,touchend:S,touchcancel:void 0===O?void 0:O};Object.keys(T).forEach((function(t){e._svgNode.on(t,(function(i){var n=e.getExtendedEvent(i,e._svgNode.point(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset));void 0!==T[t]&&T[t].call(e,n),e.trigger(t,n)}))}))}},{key:"getExtendedEvent",value:function(t,e){return t.elementX=e.x,t.elementY=e.y,t}},{key:"svgNode",get:function(){return this._svgNode}},{key:"visible",get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=t,e!=this._visible&&(this._svgNode.style("display",this._visible?"inline":"none"),this.trigger("change:visible"))}},{key:"x",get:function(){return this._svgNode.attr("x")},set:function(t){this._svgNode.attr({x:t}),this.trigger("change:position")}},{key:"y",get:function(){return this._svgNode.attr("y")},set:function(t){this._svgNode.attr({y:t}),this.trigger("change:position")}},{key:"width",get:function(){return this._svgNode.attr("width")},set:function(t){this._svgNode.attr({width:t}),this.trigger("change:extent")}},{key:"height",get:function(){return this._svgNode.attr("height")},set:function(t){this._svgNode.attr({height:t}),this.trigger("change:extent")}},{key:"style",get:function(){return this._svgNode.css()},set:function(t){this._svgNode.css(t)}},{key:"coordinateSystem",get:function(){return this._coordinateSystem},set:function(t){var e=this;void 0!==this._coordinateSystemListenerKey&&this._coordinateSystem.un("change:options",this._coordinateSystemListenerKey),this._coordinateSystem=t,this._coordinateSystemListenerKey=this._coordinateSystem.on("change:options",(function(){return e.onCoordinateSystemChange()})),this.onCoordinateSystemChange()}},{key:"minExtentLength",get:function(){return Math.min(this.width,this.height)}},{key:"maxExtentLength",get:function(){return Math.max(this.width,this.height)}}])&&Op(e.prototype,i),n&&Op(e,n),t}();A(Tp.prototype);var kp=Tp;function Cp(t){return(Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ep(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return Pp(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pp(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Pp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ip(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rp(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jp(t,e,i){return(jp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dp(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Mp(t,e){return(Mp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Dp(t);if(e){var r=Dp(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ap(this,i)}}function Ap(t,e){return!e||"object"!==Cp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dp(t){return(Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mp(t,e)}(o,t);var e,i,n,r=Lp(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.svgNode,n=void 0===i?void 0:i,s=e.coordinateSystem,a=void 0===s?void 0:s,u=e.x,l=void 0===u?0:u,c=e.y,h=void 0===c?0:c,f=e.width,p=void 0===f?100:f,d=e.height,v=void 0===d?100:d,y=e.style,g=void 0===y?{}:y,m=e.visible,_=void 0===m||m,b=e.events,w=void 0===b?{}:b,x=e.getSoundingVisibility,S=void 0===x?function(t){return t.visible}:x,O=e.dataGroupIds,T=void 0===O?[]:O,k=e.getCoordinatesByLevelData,C=void 0===k?function(){return{x:void 0,y:void 0}}:k,E=e.insertDataGroupInto,P=void 0===E?function(){}:E;return Ip(this,o),(t=r.call(this,{svgNode:n,coordinateSystem:a,x:l,y:h,width:p,height:v,style:g,visible:_,events:w}))._getSoundingVisibility=S,t._dataGroupIds=T,t._getCoordinatesByLevelData=C,t._insertDataGroupInto=P,t._svgNodeData=t.svgNode.group(),t._soundings=new Map,t}return e=o,(i=[{key:"addSounding",value:function(t){var e=this,i=this._svgNodeData.group(),n=function(){void 0!==e.coordinateSystem&&e.drawSounding(t,i),e.onChangeSoundingVisibility(t,i)},r=t.on("change:visible",(function(){return e.onChangeSoundingVisibility(t,i)})),o=t.on("change:options",n);this._soundings.set(t,{group:i,listenerKeyVisible:r,listenerKeyOptions:o}),this.trigger("add:sounding",t),n()}},{key:"removeSounding",value:function(t){this._soundings.has(t)&&(this._soundings.get(t).group.remove(),t.un(this._soundings.get(t).listenerKeyVisible),t.un(this._soundings.get(t).listenerKeyOptions),this._soundings.delete(t)),this.trigger("remove:sounding",t)}},{key:"onCoordinateSystemChange",value:function(){if(jp(Dp(o.prototype),"onCoordinateSystemChange",this).call(this),void 0!==this.coordinateSystem){var t,e=Ep(this._soundings.keys());try{for(e.s();!(t=e.n()).done;){var i=t.value;this.drawSounding(i,this._soundings.get(i).group)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"onChangeSoundingVisibility",value:function(t,e){e.css("display",this._getSoundingVisibility(t)?"inline":"none")}},{key:"drawSounding",value:function(t,e){var i=this;e.clear();var n=e.group(),r={};t.sounding.getLevels().forEach((function(e){var n=t.sounding.getData(e);i._dataGroupIds.forEach((function(e){e in r||(r[e]=[]);var o={levelData:n,x:void 0,y:void 0},s=i._getCoordinatesByLevelData(e,t,o.levelData,i),a=s.x,u=s.y;void 0===a&&void 0===u||(o.x=a,o.y=u,r[e].push(o))}))})),Object.keys(r).forEach((function(e){r[e].length>0&&i._insertDataGroupInto(n,e,t,r[e],i)}))}},{key:"dataGroupIds",get:function(){return this._dataGroupIds}},{key:"getCoordinatesByLevelData",get:function(){return this._getCoordinatesByLevelData}}])&&Rp(e.prototype,i),n&&Rp(e,n),o}(kp);function Np(t){return(Np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gp(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return Bp(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bp(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Bp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Yp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xp(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zp(t,e,i){return(zp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hp(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Wp(t,e){return(Wp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Hp(t);if(e){var r=Hp(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Vp(this,i)}}function Vp(t,e){return!e||"object"!==Np(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hp(t){return(Hp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wp(t,e)}(o,t);var e,i,n,r=qp(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.svgNode,n=void 0===i?void 0:i,s=e.coordinateSystem,a=void 0===s?void 0:s,u=e.x,l=void 0===u?0:u,c=e.y,h=void 0===c?0:c,f=e.width,p=void 0===f?100:f,d=e.height,v=void 0===d?100:d,y=e.style,g=void 0===y?{}:y,m=e.visible,_=void 0===m||m,b=e.events,w=void 0===b?{}:b,x=e.hoverLabels,S=void 0===x?{}:x,O=e.getSoundingVisibility,T=void 0===O?function(t){return t.visible}:O,k=e.dataGroupIds,C=void 0===k?void 0:k,E=e.getCoordinatesByLevelData,P=void 0===E?void 0:E,I=e.insertDataGroupInto,R=void 0===I?void 0:I;return Yp(this,o),(t=r.call(this,{svgNode:n,coordinateSystem:a,x:l,y:h,width:p,height:v,style:g,visible:_,events:w,getSoundingVisibility:T,dataGroupIds:C,getCoordinatesByLevelData:P,insertDataGroupInto:R}))._hoverLabelsGroup=t.svgNode.group(),t._isHoverLabelsRemote=!0,t._initHoverLabels(S),t}return e=o,(i=[{key:"onChangeSoundingVisibility",value:function(t,e){zp(Hp(o.prototype),"onChangeSoundingVisibility",this).call(this,t,e),this._hoverLabelsGroup.clear()}},{key:"drawSounding",value:function(t,e){zp(Hp(o.prototype),"drawSounding",this).call(this,t,e),this._hoverLabelsGroup.clear()}},{key:"getExtendedEvent",value:function(t,e){return(t=zp(Hp(o.prototype),"getExtendedEvent",this).call(this,t,e)).diagramPres=void 0,void 0!==this.coordinateSystem&&(t.diagramPres=this.coordinateSystem.getPByXY(0,this.coordinateSystem.height-t.elementY)),t}},{key:"_initHoverLabels",value:function(t){var e=this,i=t.visible,n=void 0===i||i,r=t.type,o=void 0===r?"mousemove":r,s=t.remote,a=void 0===s||s,u=t.insertLabelsFunc,l=void 0===u?void 0:u;this._isHoverLabelsRemote=a,n&&void 0!==l&&(this.on("change:extent",(function(){return e._hoverLabelsGroup.clear()})),this.on(o,(function(t){if(t.diagramPres){var i=e.hoverLabelsSounding;if(void 0!==i){var n=i.sounding;l(i,n.getData(n.getNearestLevel(t.diagramPres)),e._hoverLabelsGroup)}}})))}},{key:"isHoverLabelsRemote",get:function(){return this._isHoverLabelsRemote}},{key:"hoverLabelsSounding",get:function(){var t,e=Gp(this._soundings.keys());try{for(e.s();!(t=e.n()).done;){var i=t.value;if(this._getSoundingVisibility(i))return i}}catch(t){e.e(t)}finally{e.f()}}}])&&Xp(e.prototype,i),n&&Xp(e,n),o}(Fp);function Up(t){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zp(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return Jp(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jp(t,e)}(t))){var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Jp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Qp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function td(t,e,i){return(td="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rd(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function ed(t,e){return(ed=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function id(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=rd(t);if(e){var r=rd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return nd(this,i)}}function nd(t,e){return!e||"object"!==Up(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rd(t){return(rd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var od=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ed(t,e)}(a,t);var e,i,n,o=id(a);function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.svgNode,n=void 0===i?void 0:i,r=e.coordinateSystem,s=void 0===r?void 0:r,u=e.x,l=void 0===u?0:u,h=e.y,f=void 0===h?0:h,p=e.width,d=void 0===p?100:p,v=e.height,y=void 0===v?100:v,_=e.style,b=void 0===_?{}:_,w=e.visible,x=void 0===w||w,S=e.events,O=void 0===S?{}:S,T=e.dataGroupIds,k=void 0===T?["temp","dewp","wetbulb"]:T,C=e.getCoordinatesByLevelData,E=void 0===C?function(t,e,i,n){if(void 0===i.pres)return{};var r=void 0;switch(t){case"temp":r=i.tmpk;break;case"dewp":r=i.dwpk;break;case"wetbulb":r=c(i.tmpk,i.dwpk,i.pres)}return void 0===r?{}:{x:n.coordinateSystem.getXByPT(i.pres,r),y:n.coordinateSystem.height-n.coordinateSystem.getYByPT(i.pres,r),value:Math.round(10*m(r))/10,unit:"â"}}:C,P=e.insertDataGroupInto,I=void 0===P?function(t,e,i,n){var r=e in i.options.diagram?i.options.diagram[e].style:{};t.group().polyline(n.map((function(t){return[t.x,t.y]}))).fill("none").stroke(r)}:P,R=e.isobars,j=void 0===R?{}:R,M=e.isotherms,L=void 0===M?{}:M,A=e.dryadiabats,D=void 0===A?{}:A,F=e.pseudoadiabats,N=void 0===F?{}:F,G=e.mixingratio,B=void 0===G?{}:G,Y=e.hoverLabels,X=void 0===Y?{}:Y,z=e.parcels,W=void 0===z?{}:z;return Qp(this,a),(t=o.call(this,{svgNode:n,coordinateSystem:s,x:l,y:f,width:d,height:y,style:b,visible:x,events:O,hoverLabels:X,getSoundingVisibility:function(t){return t.visible&&t.options.diagram.visible},dataGroupIds:k,getCoordinatesByLevelData:E,insertDataGroupInto:I})).options={isobars:sd(j),isotherms:sd(L,{highlightedLines:[g(0)]}),dryadiabats:sd(D),pseudoadiabats:sd(N,{style:{color:"rgb(102, 51, 0)",dasharray:6}}),mixingratio:sd(B,{minPressure:500,style:{color:"rgb(102, 51, 0)",dasharray:2}})},t.svgGroups={border:t._svgNodeBackground.group(),isobars:t._svgNodeBackground.group(),isotherms:t._svgNodeBackground.group(),dryadiabats:t._svgNodeBackground.group(),mixingratio:t._svgNodeBackground.group(),pseudoadiabats:t._svgNodeBackground.group()},t._parcelsOptions=W,"visible"in t._parcelsOptions||(t._parcelsOptions.visible=!0),t._parcels=new Map,t.on("add:sounding",(function(e){t._parcels.set(e,{parcelsGroup:void 0,listenerKey:e.sounding.parcelCollection.on("add:item",(function(){return t.drawParcels(e)}))})})),t.on("remove:sounding",(function(e){t._parcels.has(e)&&e.sounding.parcelCollection.un("add:item",t._parcels.get(e).listenerKey),t._parcels.delete(e)})),t.init(),t}return e=a,(i=[{key:"getIsobarsVisible",value:function(){return this.options.isobars.visible}},{key:"setIsobarsVisible",value:function(t){return this.options.isobars.visible=!!t,this.plotIsobars(),this}},{key:"getIsothermsVisible",value:function(){return this.options.isotherms.visible}},{key:"setIsothermsVisible",value:function(t){return this.options.isotherms.visible=!!t,this.plotIsotherms(),this}},{key:"getDryadiabatsVisible",value:function(){return this.options.dryadiabats.visible}},{key:"setDryadiabatsVisible",value:function(t){return this.options.dryadiabats.visible=!!t,this.plotDryadiabats(),this}},{key:"getPseudoadiabatsVisible",value:function(){return this.options.pseudoadiabats.visible}},{key:"setPseudoadiabatsVisible",value:function(t){return this.options.pseudoadiabats.visible=!!t,this.plotPseudoadiabats(),this}},{key:"getMixingratioVisible",value:function(){return this.options.mixingratio.visible}},{key:"setMixingratioVisible",value:function(t){return this.options.mixingratio.visible=!!t,this.plotMixingratio(),this}},{key:"drawSounding",value:function(t,e){if(td(rd(a.prototype),"drawSounding",this).call(this,t,e),this._parcels.has(t)){var i=this._parcels.get(t);i.parcelsGroup=e.group(),t.options.parcels.visible||i.parcelsGroup.hide(),this._parcels.set(t,i)}this.drawParcels(t)}},{key:"drawParcels",value:function(t){if(this._parcelsOptions.visible&&this._parcels.has(t)){var e=this._parcels.get(t).parcelsGroup;e.clear();var i,n=Zp(t.sounding.parcelCollection);try{for(n.s();!(i=n.n()).done;){var r=i.value;this.drawParcel(t,r,e.group())}}catch(t){n.e(t)}finally{n.f()}}}},{key:"drawParcel",value:function(t,e,i){var n=this;if(void 0!==e.pres&&void 0!==e.tmpc&&void 0!==e.dwpc){var r=s(g(e.tmpc),e.pres),o=p(g(e.dwpc),e.pres),a=d(r,o),u=y(g(e.tmpc),g(e.dwpc)),l=h(u,u,a),c=t.getParcelOptions(e);c.visible||i.hide();var f=i.group();c.temp.visible||f.hide();var v=i.group();c.dewp.visible||v.hide();var m=this.coordinateSystem.getYByPT(e.pres,g(e.tmpc)),_=this.coordinateSystem.getXByYPotentialTemperature(m,r),b=this.coordinateSystem.getYByPPotentialTemperatur(a,r),w=this.coordinateSystem.getXByYPotentialTemperature(b,r),x=[[_,m]];if(!this.coordinateSystem.isDryAdiabatStraightLine())for(var S=m+10;S<b;S+=10)x.push([this.coordinateSystem.getXByYPotentialTemperature(S,r),S]);x.push([w,b]);for(var O=this.coordinateSystem.height,T=this.coordinateSystem.getXByYEquiPotTemp(O,l),k=b+10;k<O;k+=10)x.push([this.coordinateSystem.getXByYEquiPotTemp(k,l),k]);x.push([T,O]),f.polyline(x.map((function(t){return t[1]=n.coordinateSystem.height-t[1],t}))).fill("none").stroke(c.temp.style);for(var C=this.coordinateSystem.getXByYHMR(m,o),E=this.coordinateSystem.getXByYHMR(b,o),P=[[C,m]],I=m+10;I<b;I+=10)P.push([this.coordinateSystem.getXByYHMR(I,o),I]);P.push([E,b]),v.polyline(P.map((function(t){return t[1]=n.coordinateSystem.height-t[1],t}))).fill("none").stroke(c.dewp.style)}}},{key:"drawBackground",value:function(t){td(rd(a.prototype),"drawBackground",this).call(this,t),this.svgGroups={border:t.group(),isobars:t.group(),isotherms:t.group(),dryadiabats:t.group(),mixingratio:t.group(),pseudoadiabats:t.group()},this.svgGroups.border.clear(),this.svgGroups.border.rect(this.coordinateSystem.width,this.coordinateSystem.height).attr({stroke:"black","stroke-width":1,"fill-opacity":0}),this.plotIsobars(!0),this.plotIsotherms(!0),this.plotDryadiabats(!0),this.plotPseudoadiabats(!0),this.plotMixingratio(!0)}},{key:"plotIsobars",value:function(t){var e=this,i=this.coordinateSystem.getPByXY(0,this.coordinateSystem.height),n=this.coordinateSystem.getPByXY(0,0),r=n-i;this._plotLines(this.svgGroups.isobars,this.options.isobars,{min:i,max:n,interval:r>500?100:r>50?10:1},(function(t){var i=e.coordinateSystem.getYByXP(0,t);return[[0,i],[e.coordinateSystem.width,i]]}),t)}},{key:"plotIsotherms",value:function(t){var e=this,i=m(this.coordinateSystem.getTByXY(0,this.coordinateSystem.height)),n=m(this.coordinateSystem.getTByXY(this.coordinateSystem.width,0)),r=n-i;this._plotLines(this.svgGroups.isotherms,this.options.isotherms,{min:i,max:n,interval:r>50?10:5},(function(t){t=g(t);var i=[[void 0,void 0],[void 0,void 0]];return e.coordinateSystem.isIsothermsVertical()?(i[0][1]=0,i[1][1]=e.coordinateSystem.height,i[0][0]=i[1][0]=e.coordinateSystem.getXByYT(i[0][1],t)):(i[0][1]=0,i[0][0]=e.coordinateSystem.getXByYT(i[0][1],t),i[0][0]<0&&(i[0][1]=e.coordinateSystem.getYByXT(i[0][0]=0,t)),i[1][0]=e.coordinateSystem.width,i[1][1]=e.coordinateSystem.getYByXT(i[1][0],t),void 0===i[1][1]?(i[1][0]=i[0][0],i[1][1]=e.coordinateSystem.height):i[1][1]>e.coordinateSystem.height&&(i[1][1]=e.coordinateSystem.height,i[1][0]=e.coordinateSystem.getXByYT(i[1][1],t))),i}),t)}},{key:"plotDryadiabats",value:function(t){var e=this;this._plotLines(this.svgGroups.dryadiabats,this.options.dryadiabats,{min:m(s(this.coordinateSystem.getTByXY(0,0),this.coordinateSystem.getPByXY(0,0))),max:m(s(this.coordinateSystem.getTByXY(this.coordinateSystem.width,this.coordinateSystem.height),this.coordinateSystem.getPByXY(this.coordinateSystem.width,this.coordinateSystem.height))),interval:10},(function(t){var i=g(t),n=0,r=e.coordinateSystem.getXByYPotentialTemperature(n,i);(void 0===r||r>e.coordinateSystem.width)&&(r=e.coordinateSystem.width,n=e.coordinateSystem.getYByXPotentialTemperature(r,i));var o=0,s=e.coordinateSystem.getYByXPotentialTemperature(o,i);if((void 0===s||s>e.coordinateSystem.height)&&(s=e.coordinateSystem.height,o=e.coordinateSystem.getXByYPotentialTemperature(s,i)),void 0!==r&&void 0!==n&&void 0!==o&&void 0!==s){if(e.coordinateSystem.isDryAdiabatStraightLine())return[[r,n],[o,s]];for(var a=[[r,n]],u=n+10;u<s;u+=10)a.push([e.coordinateSystem.getXByYPotentialTemperature(u,i),u]);return a.push([o,s]),a}}),t)}},{key:"plotPseudoadiabats",value:function(t){var e=this;this._plotLines(this.svgGroups.pseudoadiabats,this.options.pseudoadiabats,{lines:[-18,-5,10,30,60,110,180]},(function(t){for(var i=g(t),n=Math.max(0,void 0===e.options.pseudoadiabats.maxPressure?0:e.coordinateSystem.getYByPEquiPotTemp(e.options.pseudoadiabats.maxPressure,i)),r=e.coordinateSystem.getXByYEquiPotTemp(n,i),o=Math.min(e.coordinateSystem.height,void 0===e.options.pseudoadiabats.minPressure?e.coordinateSystem.height:e.coordinateSystem.getYByPEquiPotTemp(e.options.pseudoadiabats.minPressure,i)),s=e.coordinateSystem.getXByYEquiPotTemp(o,i),a=[[r,n]],u=n+10;u<o;u+=10)a.push([e.coordinateSystem.getXByYEquiPotTemp(u,i),u]);return a.push([s,o]),a}),t)}},{key:"plotMixingratio",value:function(t){var e=this;this._plotLines(this.svgGroups.mixingratio,this.options.mixingratio,{lines:[.01,.1,1,2,4,7,10,16,21,32,40]},(function(t){for(var i=Math.max(0,void 0===e.options.mixingratio.maxPressure?0:e.coordinateSystem.getYByPHMR(e.options.mixingratio.maxPressure,t)),n=e.coordinateSystem.getXByYHMR(i,t),r=Math.min(e.coordinateSystem.height,void 0===e.options.mixingratio.minPressure?e.coordinateSystem.height:e.coordinateSystem.getYByPHMR(e.options.mixingratio.minPressure,t)),o=e.coordinateSystem.getXByYHMR(r,t),s=[[n,i]],a=i+10;a<r;a+=10)s.push([e.coordinateSystem.getXByYHMR(a,t),a]);return s.push([o,r]),s}),t)}},{key:"_plotLines",value:function(t,e,i,n,r){if(t.style("display",e.visible?"inline":"none"),r){t.clear();var o=[];if(void 0!==e.lines)o=e.lines;else if(void 0===e.min&&void 0===e.max&&void 0===e.interval&&void 0!==i.lines)o=i.lines;else{void 0!==e.min&&(i.min=e.min),void 0!==e.max&&(i.max=e.max);var s=e.interval;void 0===s&&(s=i.interval);for(var a=Math.ceil(i.min/s)*s,u=Math.floor(i.max/s)*s,l=a;l<=u;l+=s)o.push(l)}var c=3;void 0!==e.style.width&&(c=e.style.width+2),o.forEach((function(i){var r=n.call(this,i),o=2==r.length?t.line(r[0][0],this.coordinateSystem.height-r[0][1],r[1][0],this.coordinateSystem.height-r[1][1]).stroke(e.style):t.polyline(r.map((function(t){return t[1]=this.coordinateSystem.height-t[1],t}),this)).fill("none").stroke(e.style);void 0!==e.highlightedLines&&e.highlightedLines.forEach((function(t){i==t&&o.stroke({width:c})}),this)}),this)}}},{key:"getExtendedEvent",value:function(t,e){return(t=td(rd(a.prototype),"getExtendedEvent",this).call(this,t,e)).diagramTmpk=this.coordinateSystem.getTByXY(t.elementX,this.coordinateSystem.height-t.elementY),t}},{key:"_initHoverLabels",value:function(t){var e=t.visible,i=void 0===e||e,n=t.type,r=void 0===n?"mousemove":n,o=t.snapToData,s=void 0===o||o,u=t.remote,l=void 0===u||u,c=t.insertLabelsFunc,h=void 0===c?void 0:c,f=t.pres,p=void 0===f?{}:f,d=t.temp,v=void 0===d?{}:d,y=t.dewp,g=void 0===y?{}:y,m=t.wetbulb,_=void 0===m?{}:m;p.length="length"in p?p.length:60,p.align="align"in p?p.align:"left","visible"in p||(p.visible=!0),"style"in p||(p.style={}),p.font=bf(p.font,{anchor:"right"==p.align?"end":"start"}),"fill"in p||(p.fill={}),void 0===p.fill.opacity&&(p.fill.opacity=.7),void 0===p.horizontalMargin&&(p.horizontalMargin=5),"visible"in v||(v.visible=!0),"style"in v||(v.style={}),v.font=bf(v.font,{anchor:"start","alignment-baseline":"bottom"}),"fill"in v||(v.fill={}),void 0===v.fill.opacity&&(v.fill.opacity=.7),v.radius="radius"in v?v.radius:void 0,v.radiusPlus="radiusPlus"in v?v.radiusPlus:2,void 0===v.horizontalMargin&&(v.horizontalMargin=10),"visible"in g||(g.visible=!0),"style"in g||(g.style={}),g.font=bf(g.font,{anchor:"end","alignment-baseline":"bottom"}),"fill"in g||(g.fill={}),void 0===g.fill.opacity&&(g.fill.opacity=.7),g.radius="radius"in g?g.radius:void 0,g.radiusPlus="radiusPlus"in g?g.radiusPlus:2,void 0===g.horizontalMargin&&(g.horizontalMargin=10),"visible"in _||(_.visible=!0),"style"in _||(_.style={}),_.font=bf(_.font,{anchor:"middle"}),"fill"in _||(_.fill={}),void 0===_.fill.opacity&&(_.fill.opacity=.7),_.radius="radius"in _?_.radius:void 0,_.radiusPlus="radiusPlus"in _?_.radiusPlus:2,void 0===_.verticalMargin&&(_.verticalMargin=10),void 0===h&&(h=this._makeInsertLabelsFunc(p,v,g,_)),td(rd(a.prototype),"_initHoverLabels",this).call(this,{visible:i,type:r,snapToData:s,remote:l,insertLabelsFunc:h})}},{key:"_makeInsertLabelsFunc",value:function(t,e,i,n){var o=this;return function(s,a,u){u.clear(),void 0!==a.pres&&(t.visible&&function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.length,s=void 0===o?60:o,a=n.align,u=void 0===a?"left":a,l=n.horizontalMargin,c=void 0===l?void 0:l,h=n.verticalMargin,f=void 0===h?void 0:h,p=n.style,d=void 0===p?{}:p,v=n.font,y=void 0===v?{}:v,g=n.fill,m=void 0===g?{}:g,_=0,b=s,w=/^([0-9]+)%$/.exec(b);w&&(b=w[1]/100*i.width),"right"==u&&(_=i.width,b=i.width-b);var x=i.height-i.getYByXP(0,e.pres);d=_f(d),t.line([[Math.min(_,b),x],[Math.max(_,b),x]]).stroke(d),(y=bf(y))["alignment-baseline"]="bottom",Sf({node:t,text:"".concat(Math.round(e.pres)," hPa"),x:_,y:x,horizontalMargin:c,verticalMargin:f,font:y,fill:m}),y["alignment-baseline"]="top";var S=void 0===e.hght?"~".concat(Math.round(r(e.pres))," m"):"".concat(Math.round(e.hght)," m");Sf({node:t,text:S,x:_,y:x,horizontalMargin:c,verticalMargin:f,font:y,fill:m})}(u,a,o.coordinateSystem,t),o.dataGroupIds.reverse().forEach((function(t){var r={visible:!1};switch(t){case"temp":r=e;break;case"dewp":r=i;break;case"wetbulb":r=n}if(r.visible){var l=o._getCoordinatesByLevelData(t,s,a,o),c=l.x,h=l.y,f=l.value,p=l.unit;if(void 0!==c&&void 0!==h){var d=t in o.hoverLabelsSounding.options.diagram?o.hoverLabelsSounding.options.diagram[t].style.width:3,v=void 0===r.radius?d+r.radiusPlus:r.radius,y=r.style;!("color"in y)&&t in o.hoverLabelsSounding.options.diagram&&(y.color=s.options.diagram[t].style.color),u.circle(2*v).attr({cx:c,cy:h}).fill(y),Sf({node:u,text:"".concat(f," ").concat(p),x:c,y:h,horizontalMargin:r.horizontalMargin,verticalMargin:r.verticalMargin,font:r.font,fill:r.fill})}}})))}}}])&&$p(e.prototype,i),n&&$p(e,n),a}(Kp);function sd(t){var e=t.highlightedLines,i=void 0===e?void 0:e,n=t.interval,r=void 0===n?void 0:n,o=t.lines,s=void 0===o?void 0:o,a=t.max,u=void 0===a?void 0:a,l=t.min,c=void 0===l?void 0:l,h=t.maxPressure,f=void 0===h?void 0:h,p=t.minPressure,d=void 0===p?void 0:p,v=t.style,y=void 0===v?void 0:v,g=t.visible,m=void 0===g?void 0:g,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{highlightedLines:xf(i,_.highlightedLines),interval:xf(r,_.interval),lines:xf(s,_.lines),max:xf(u,_.max),min:xf(c,_.min),maxPressure:xf(f,_.maxPressure),minPressure:xf(d,_.minPressure),style:_f(y,_.style),visible:xf(m,_.visible,!0)}}function ad(t){return(ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ud(t,e){return(ud=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ld(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=hd(t);if(e){var r=hd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return cd(this,i)}}function cd(t,e){return!e||"object"!==ad(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hd(t){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ud(t,e)}(i,t);var e=ld(i);function i(t){var n,r=t.svgNode,o=void 0===r?void 0:r,s=t.coordinateSystem,a=void 0===s?void 0:s,u=t.x,l=void 0===u?void 0:u,c=t.y,h=void 0===c?void 0:c,f=t.width,p=void 0===f?void 0:f,d=t.height,v=void 0===d?void 0:d,y=t.style,g=void 0===y?{}:y,m=t.visible,_=void 0===m||m,b=t.events,x=void 0===b?{}:b,S=t.hoverLabels,O=void 0===S?{}:S,T=t.windbarbLength,k=void 0===T?void 0:T,C=t.dataGroupIds,E=void 0===C?["windbarbs"]:C,P=t.getCoordinatesByLevelData,I=void 0===P?function(t,e,i,n){return void 0===i.pres||void 0===i.wspd||void 0===i.wdir?{}:{x:n.width/2,y:n.coordinateSystem.height-n.coordinateSystem.getYByXP(0,i.pres)}}:P,R=t.insertDataGroupInto,j=void 0===R?function(t,e,i,n,r){var o=r.width/2;n.forEach((function(e){var n=t.group(),s=e.y-r._windbarbLength,a=r._windbarbLength/4;n.line(o,s,o,e.y).stroke(i.options.windprofile.windbarbs.style);for(var u=w(e.levelData.wspd);u>=50;)n.polyline([[o,s],[o+2*a,s+.8*a/2],[o,s+.8*a]]).fill("none").stroke(i.options.windprofile.windbarbs.style),s+=a,u-=50;for(;u>=10;)n.line(o,s+a/2,o+2*a,s).stroke(i.options.windprofile.windbarbs.style),s+=a/2,u-=10;u>=5&&n.line(o,s+a/2,o+a,s+a/4).stroke(i.options.windprofile.windbarbs.style),n.rotate(e.levelData.wdir,o,e.y)}))}:R;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=e.call(this,{svgNode:o,coordinateSystem:a,x:l,y:h,width:p,height:v,style:g,visible:_,events:x,hoverLabels:O,getSoundingVisibility:function(t){return t.visible&&t.options.windprofile.windbarbs.visible},dataGroupIds:E,getCoordinatesByLevelData:I,insertDataGroupInto:j}))._windbarbLength=k,void 0===n._windbarbLength&&(n._windbarbLength=2*n.width/5),n.init(),n}return i}(Kp);function pd(t){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dd(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vd(t,e,i){return(vd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_d(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function yd(t,e){return(yd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_d(t);if(e){var r=_d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return md(this,i)}}function md(t,e){return!e||"object"!==pd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _d(t){return(_d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yd(t,e)}(o,t);var e,i,n,r=gd(o);function o(t){var e,i=t.svgNode,n=void 0===i?void 0:i,s=t.coordinateSystem,a=void 0===s?void 0:s,u=t.x,l=void 0===u?void 0:u,c=t.y,h=void 0===c?void 0:c,f=t.width,p=void 0===f?void 0:f,d=t.height,v=void 0===d?void 0:d,y=t.style,g=void 0===y?{}:y,m=t.visible,_=void 0===m||m,b=t.events,x=void 0===b?{}:b,S=t.hoverLabels,O=void 0===S?{}:S,T=t.dataGroupIds,k=void 0===T?["windspeed"]:T,C=t.getCoordinatesByLevelData,E=void 0===C?function(t,e,i,n){return void 0===i.pres||void 0===i.wspd?{}:{x:w(n.width*i.wspd)/150,y:n.coordinateSystem.height-n.coordinateSystem.getYByXP(0,i.pres)}}:C,P=t.insertDataGroupInto,I=void 0===P?function(t,e,i,n){t.polyline(n.map((function(t){return[t.x,t.y]}))).fill("none").stroke(i.options.windprofile.windspeed.style)}:P;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,{svgNode:n,coordinateSystem:a,x:l,y:h,width:p,height:v,style:g,visible:_,events:x,hoverLabels:O,getSoundingVisibility:function(t){return t.visible&&t.options.windprofile.windspeed.visible},dataGroupIds:k,getCoordinatesByLevelData:E,insertDataGroupInto:I})).init(),e}return e=o,(i=[{key:"drawBackground",value:function(t){vd(_d(o.prototype),"drawBackground",this).call(this,t),t.line(0,0,0,this.height).stroke({color:"black",width:1}),t.line(this.width,0,this.width,this.height).stroke({color:"black",width:1})}},{key:"_initHoverLabels",value:function(t){var e=t.visible,i=void 0===e||e,n=t.type,r=void 0===n?"mousemove":n,s=t.snapToData,a=void 0===s||s,u=t.remote,l=void 0===u||u,c=t.insertLabelsFunc,h=void 0===c?void 0:c,f=t.windspeed,p=void 0===f?{}:f;"visible"in p||(p.visible=!0),"style"in p||(p.style={}),p.font=bf(p.font,{anchor:"end","alignment-baseline":"bottom"}),"fill"in p||(p.fill={}),void 0===p.fill.opacity&&(p.fill.opacity=.7),p.radius="radius"in p?p.radius:void 0,p.radiusPlus="radiusPlus"in p?p.radiusPlus:2,void 0===p.horizontalMargin&&(p.horizontalMargin=10),void 0===h&&(h=this._makeInsertLabelsFunc(p)),vd(_d(o.prototype),"_initHoverLabels",this).call(this,{visible:i,type:r,snapToData:a,remote:l,insertLabelsFunc:h})}},{key:"_makeInsertLabelsFunc",value:function(t){var e=this;return function(i,n,r){if(r.clear(),void 0!==n.pres&&t.visible&&void 0!==n.wspd){var o=e._getCoordinatesByLevelData("windspeed",i,n,e),s=o.x,a=o.y;if(void 0!==s&&void 0!==a){var u=void 0===t.radius?e.hoverLabelsSounding.options.windprofile.windspeed.style.width/2+t.radiusPlus:t.radius,l=t.style;"color"in l||(l.color=i.options.windprofile.windspeed.style.color),r.circle(2*u).attr({cx:s,cy:a}).fill(l),Sf({node:r,text:"".concat(Math.round(10*w(n.wspd))/10," kn"),x:s,y:a,horizontalMargin:t.horizontalMargin,verticalMargin:t.verticalMargin,font:t.font,fill:t.fill})}}}}}])&&dd(e.prototype,i),n&&dd(e,n),o}(Kp);function wd(t){return(wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xd(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sd(t,e,i){return(Sd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cd(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Od(t,e){return(Od=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Td(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Cd(t);if(e){var r=Cd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return kd(this,i)}}function kd(t,e){return!e||"object"!==wd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cd(t){return(Cd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ed=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Od(t,e)}(o,t);var e,i,n,r=Td(o);function o(t){var e,i=t.svgNode,n=void 0===i?void 0:i,s=t.coordinateSystem,a=t.x,u=t.y,l=t.width,c=t.height,h=t.style,f=void 0===h?{}:h,p=t.visible,d=void 0===p||p,v=t.events,y=void 0===v?{}:v,g=t.grid,m=void 0===g?{}:g,_=t.windspeedMax,b=void 0===_?x(150):_,w=t.origin,S=void 0===w?void 0:w;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,{svgNode:n,coordinateSystem:s,x:a,y:u,width:l,height:c,style:f,visible:d,events:y,getSoundingVisibility:function(t){return t.visible&&t.options.hodograph.visible}}))._gridOptions=e.getNormalizedGridOptions(m),e.center=[e.width/2,e.height/2],void 0!==S&&(e.center[0]-=S[0]*e.minLength/2,e.center[1]+=S[1]*e.minLength/2),e.pixelPerSpeed=Math.min(Math.max(e.width-e.center[0],e.center[0]),Math.max(e.height-e.center[1],e.center[1]))/b,void 0===e._gridOptions.max&&(e._gridOptions.max=b),e.init(),e}return e=o,(i=[{key:"drawSounding",value:function(t,e){var i=this;Sd(Cd(o.prototype),"drawSounding",this).call(this,t,e);var n=[];t.sounding.getLevels().forEach((function(e){if(void 0!==e){var r=t.sounding.getData(e);if(void 0!==r.wdir&&void 0!==r.wspd){var o=r.wspd*-Math.sin(r.wdir/180*Math.PI),s=r.wspd*Math.cos(r.wdir/180*Math.PI);n.push([i.center[0]+o*i.pixelPerSpeed,i.center[1]+s*i.pixelPerSpeed])}}})),e.polyline(n).fill("none").stroke(t.options.hodograph.style)}},{key:"drawBackground",value:function(t){if(Sd(Cd(o.prototype),"drawBackground",this).call(this,t),t.rect(this.width-2,this.height-2).move(1,1).fill({color:"white"}).stroke({color:"black",width:1}),this._gridOptions.axes.visible){var e=this._gridOptions.max+this._gridOptions.circles.interval/2;t.line(Math.max(0,this.center[0]-e*this.pixelPerSpeed),this.center[1],Math.min(this.width,this.center[0]+e*this.pixelPerSpeed),this.center[1]).stroke(this._gridOptions.axes.style),t.line(this.center[0],Math.max(0,this.center[1]-e*this.pixelPerSpeed),this.center[0],Math.min(this.height,this.center[1]+e*this.pixelPerSpeed)).stroke(this._gridOptions.axes.style)}for(var i=this._gridOptions.circles.interval;i<=this._gridOptions.max;i+=this._gridOptions.circles.interval){var n=i*this.pixelPerSpeed;if(t.circle(2*n).attr({cx:this.center[0],cy:this.center[1]}).fill("none").stroke(this._gridOptions.circles.style),this._gridOptions.labels.visible){var r=n*Math.cos((this._gridOptions.labels.angle-90)/180*Math.PI),s=n*Math.sin((this._gridOptions.labels.angle-90)/180*Math.PI),a="middle",u=0,l=-this._gridOptions.labels.font.size;0==this._gridOptions.labels.angle||180==this._gridOptions.labels.angle?(u=-3,a="end"):90!=this._gridOptions.labels.angle&&270!=this._gridOptions.labels.angle||(l=-3);var c=t.plain(""+Math.round(_(i))).move(this.center[0]+r,this.center[1]+s).attr({"text-anchor":a,dx:u,dy:l}).font(this._gridOptions.labels.font),h=c.bbox();c.before(t.rect(h.width,h.height).move(h.x,h.y).fill("white"))}}}},{key:"getNormalizedGridOptions",value:function(t){var e=t.axes,i=void 0===e?{}:e,n=t.circles,r=void 0===n?{}:n,o=t.labels,s=void 0===o?{}:o,a=t.max,u=void 0===a?void 0:a;return i=wf(i),"interval"in(r=wf(r))&&void 0!==r.interval||(r.interval=b(50)),"angle"in(s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,i=void 0===e||e,n=t.font,r=void 0===n?{}:n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{visible:xf(i,o.visible,!0),font:bf(r,o.font)}}(s))&&void 0!==s.angle||(s.angle=225),void 0===s.font.size&&(s.font.size=10),{axes:i,circles:r,labels:s,max:u}}}])&&xd(e.prototype,i),n&&xd(e,n),o}(Fp);function Pd(t){return(Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Id(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rd(t,e,i){return(Rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ad(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function jd(t,e){return(jd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Md(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Ad(t);if(e){var r=Ad(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ld(this,i)}}function Ld(t,e){return!e||"object"!==Pd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ad(t){return(Ad=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jd(t,e)}(o,t);var e,i,n,r=Md(o);function o(t){var e,i,n,s,a,u,l=t.svgNode,c=void 0===l?void 0:l,h=t.coordinateSystem,f=t.x,p=t.y,d=t.width,v=t.height,y=t.style,g=void 0===y?{}:y,m=t.visible,_=void 0===m||m,b=t.events,w=void 0===b?{}:b,x=t.labels,S=void 0===x?{}:x,O=t.title,T=void 0===O?{}:O;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),void 0===g.overflow&&(g.overflow="visible"),(e=r.call(this,{svgNode:c,coordinateSystem:h,x:f,y:p,width:d,height:v,style:g,visible:_,events:w}))._labelsOptions=(n=(i=S).enabled,s=void 0===n||n,a=i.style,(u={enabled:s,style:void 0===a?{}:a}).style=_f(u.style),u),e._titleOptions=function(t){var e=t.align,i=void 0===e?"middle":e,n=t.style,r=void 0===n?{}:n,o=t.text,s=void 0===o?void 0:o,a={align:i,style:r,text:s};return a.style=_f(a.style),a}(T),e.init(),e}return e=o,(i=[{key:"drawBackground",value:function(t){if(Rd(Ad(o.prototype),"drawBackground",this).call(this,t),this._labelsOptions.enabled)for(var e=t.group(),i=50*Math.ceil(this.coordinateSystem.getPByXY(0,this.height)/50),n=50*Math.floor(this.coordinateSystem.getPByXY(0,0)/50),r=i;r<=n;r+=50){var s=this.height-this.coordinateSystem.getYByXP(0,r);e.plain(r).attr({y:s+3.3,x:this.width}).font({size:"11px",anchor:"end"}).attr({fill:this._labelsOptions.style.color})}void 0!==this._titleOptions.text&&t.group().plain(this._titleOptions.text).attr({x:12*.4,y:this.height/2,fill:this._titleOptions.style.color}).font({size:12,anchor:"middle"}).rotate(-90)}}])&&Id(e.prototype,i),n&&Id(e,n),o}(kp),Fd=Dd;function Nd(t){return(Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bd(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yd(t,e){return(Yd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Wd(t);if(e){var r=Wd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return zd(this,i)}}function zd(t,e){return!e||"object"!==Nd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wd(t){return(Wd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yd(t,e)}(o,t);var e,i,n,r=Xd(o);function o(){return Gd(this,o),r.apply(this,arguments)}return e=o,(i=[{key:"drawBackground",value:function(t){if(t.clear(),this._labelsOptions.enabled)for(var e=t.group(),i=10*Math.ceil(m(this.coordinateSystem.getTByXY(0,0))/10),n=10*Math.floor(m(this.coordinateSystem.getTByXY(this.width,0))/10),r=i;r<=n;r+=10){var o=g(r);e.plain(Math.round(m(o))).attr({x:this.coordinateSystem.getXByYT(0,o),y:10,fill:this._labelsOptions.style.color}).font({size:"10px",anchor:"middle"})}void 0!==this._titleOptions.text&&t.group().plain(this._titleOptions.text).attr({x:this.width/2,y:this.height-12*.3,fill:this._titleOptions.style.color}).font({size:12,anchor:"middle"}).rotate(-90)}}])&&Bd(e.prototype,i),n&&Bd(e,n),o}(Fd),Vd=qd;function Hd(t){return(Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kd(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function Ud(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zd(t,e){return(Zd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=$d(t);if(e){var r=$d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Qd(this,i)}}function Qd(t,e){return!e||"object"!==Hd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $d(t){return($d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zd(t,e)}(o,t);var e,i,n,r=Jd(o);function o(t){var e,i=t.renderTo,n=void 0===i?void 0:i,s=t.width,a=void 0===s?void 0:s,u=t.height,l=void 0===u?void 0:u,c=t.coordinateSystem,h=void 0===c?{}:c,f=t.diagram,p=void 0===f?{}:f,d=t.windbarbsProfile,v=void 0===d?{}:d,y=t.windspeedProfile,g=void 0===y?{}:y,m=t.hodograph,_=void 0===m?{}:m,b=t.xAxis,w=void 0===b?{}:b,x=t.yAxis,S=void 0===x?{}:x;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=r.call(this,{renderTo:n,width:a,height:l}),p=ev(p),v=ev(v),g=ev(g),_=ev(_),w=ev(w),S=ev(S);var O=.05*e.svgNode.width();return void 0===w.width&&void 0===p.width&&void 0===v.width&&void 0===g.width?(S.width=.1*(e.svgNode.width()-2*O),p.width=.7*(e.svgNode.width()-2*O),v.width=.2*(e.svgNode.width()-2*O)*1/3,g.width=.2*(e.svgNode.width()-2*O)*2/3):void 0===p.width?p.width=e.svgNode.width()-2*O-v.width-g.width:void 0===v.width&&void 0===g.width&&(v.width=1*(e.svgNode.width()-2*O-p.width)/3,g.width=2*(e.svgNode.width()-2*O-p.width)/3),void 0===S.x&&void 0===p.x&&void 0===v.x&&void 0===g.x?(S.x=O,p.x=S.x+S.width,v.x=p.x+p.width,g.x=v.x+v.width):void 0===p.x?p.x=v.x-v.width:void 0===v.x&&void 0===g.x&&(v.x=p.x+p.width,g.x=v.x+v.width),void 0===w.height&&(w.height=.06*e.svgNode.height()),void 0===p.height&&(p.height=e.svgNode.height()-w.height-2*O),void 0===S.height&&(S.height=p.height),void 0===v.height&&(v.height=p.height),void 0===g.height&&(g.height=p.height),void 0===p.y&&(p.y=O),void 0===S.y&&(S.y=p.y),void 0===v.y&&(v.y=p.y),void 0===g.y&&(g.y=p.y),void 0===w.width&&(w.width=p.width),void 0===w.x&&(w.x=p.x),void 0===w.y&&(w.y=p.y+p.height),void 0===w.height&&(w.height=O),void 0===_.x&&(_.x=p.x),void 0===_.y&&(_.y=p.y),void 0===_.width&&(_.width=.4*Math.min(p.width,p.height)),void 0===_.height&&(_.height=_.width),e.diagram=new od(p),e.appendPlotArea(e.diagram),e.yAxis=new Dd(S),e.appendPlotArea(e.yAxis),e.xAxis=new qd(w),e.appendPlotArea(e.xAxis),e.windbarbsProfile=new fd(v),e.appendPlotArea(e.windbarbsProfile),e.windspeedProfile=new bd(g),e.appendPlotArea(e.windspeedProfile),e.hodograph=new Ed(_),e.appendPlotArea(e.hodograph),void 0===h.type&&(h.type="skewTlogP"),h.width=p.width,h.height=p.height,e._coordinateSystem,e.coordinateSystem="stueve"==h.type?new up(h):"emagram"==h.type?new vp(h):new xp(h),e}return e=o,(i=[{key:"getDiagramPlotArea",value:function(){return this.diagram}},{key:"coordinateSystem",get:function(){return this._coordinateSystem},set:function(t){this._coordinateSystem=t,this.exchangeCoordinateSystem(this._coordinateSystem)}}])&&Ud(e.prototype,i),n&&Ud(e,n),o}(Zf);function ev(t){var e=t.svgNode,i=void 0===e?void 0:e,n=t.coordinateSystem,r=void 0===n?void 0:n,o=t.x,s=void 0===o?void 0:o,a=t.y,u=void 0===a?void 0:a,l=t.width,c=void 0===l?void 0:l,h=t.height,f=void 0===h?void 0:h,p=t.style,d=void 0===p?{}:p,v=t.visible,y=void 0===v||v,g=t.events,m=void 0===g?{}:g,_=t.hoverLabels,b=void 0===_?{}:_,w=Kd(t,["svgNode","coordinateSystem","x","y","width","height","style","visible","events","hoverLabels"]);return w.svgNode=i,w.coordinateSystem=r,w.x=s,w.y=u,w.width=c,w.height=f,w.style=d,w.visible=y,w.events=m,w.hoverLabels=b,w}var iv={addEventFunctions:A},nv={Animation:tt,Visualisation:lt,animation:{ToggleButton:ot,insertFrequencyInput:et,insertFrequencyRange:it,insertFrequencyButtonGroup:function(t,e){var i=e.animation,n=e.frequencies,r=e.btnGroupClass,o=void 0===r?"btn-group":r,s=e.btnClass,a=void 0===s?"btn btn-primary":s,u=e.suffix,l=void 0===u?"fps":u,c=Z()("<div>").addClass(o);(n=n||[]).forEach((function(t){c.append(Z()("<button>").addClass(a).data("frequency",t).text(t+" "+l).click((function(){return i.setImageFrequency(t)})))}));var h=function(){c.children("button").removeClass("active").each((function(){Z()(this).data("frequency")==i.getImageFrequency()&&Z()(this).addClass("active")}))};return i.on("change:imageFrequency",h),h(),t.append(c),c},insertRestartPauseInput:nt,insertRestartPauseRange:function(t,e){var i=e.animation,n=e.pauses;n=(n=n||[1]).map((function(t){return Math.round(1e3*t)}));var r=Z()("<input>").addClass("custom-range").attr("type","range").attr("min",0).attr("max",n.length-1);r.on("change input",(function(){var t=r.val();t<n.length&&i.setRestartPause(n[t]/1e3)}));var o=function(){var t=n.indexOf(Math.round(1e3*i.getRestartPause()));t>-1&&r.val(t)};return i.on("change:imageFrequency",o),o(),t.append(r),r},insertRestartPauseButtonGroup:function(t,e){var i=e.animation,n=e.pauses,r=e.btnGroupClass,o=void 0===r?"btn-group":r,s=e.btnClass,a=void 0===s?"btn btn-primary":s,u=e.suffix,l=void 0===u?"s":u,c=Z()("<div>").addClass(o);(n=n||[]).forEach((function(t){c.append(Z()("<button>").addClass(a).data("pause",t).text(t+" "+l).click((function(){return i.setRestartPause(t)})))}));var h=function(){c.children("button").removeClass("active").each((function(){Z()(this).data("pause")==i.getRestartPause()&&Z()(this).addClass("active")}))};return i.on("change:restartPause",h),h(),t.append(c),c}},visualisation:{Text:mt,Slider:Tt,bsButtons:Lt,bsDropdown:Wt}},rv={Collection:Zt,Map:Ht,map:{MapOL:Aa,MapLL:Xa},Resource:ea,resource:{GeoJSON:_l,GeoJSONTile:Gc,Image:dh,OSM:Fh,Vector:pl,VectorTile:Mc},ResourceCollection:la,Tooltip:xa,Type:pa,TypeCollection:wa},ov={BootstrapTooltip:Uh},sv={Parcel:hf},av={CoordinateSystem:tp,coordinateSystem:{StueveDiagram:up,Emagram:vp,SkewTlogPDiagram:xp},DiagramSounding:jf,Hodograph:Ed,TDDiagram:od,WindbarbsProfile:fd,WindspeedProfile:bd,axes:{xAxis:Vd,yAxis:Fd}}}]);
//# sourceMappingURL=meteoJS.min.js.map