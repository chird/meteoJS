/*! For license information please see meteoJS.min.js.LICENSE.txt */
var meteoJS,SVG=SVG||{},jQuery=jQuery||{},ol=ol||{layer:{},source:{},format:{},style:{}},Popper=Popper||{},bootstrap=bootstrap||{};(()=>{var e={588:(e,t,n)=>{function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(e){"use strict";var t,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof m?t:m,r=Object.create(o.prototype),a=new j(i||[]);return r._invoke=function(e,t,n){var i=d;return function(o,r){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw r;return C()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=P(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=f(e,t,n);if("normal"===l.type){if(i=n.done?v:h,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=v,n.method="throw",n.arg=l.arg)}}}(e,n,a),r}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",v="completed",y={};function m(){}function b(){}function g(){}var w={};w[a]=function(){return this};var _=Object.getPrototypeOf,O=_&&_(_(E([])));O&&O!==n&&o.call(O,a)&&(w=O);var S=g.prototype=m.prototype=Object.create(w);function T(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,a,s,l){var u=f(e[r],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"===i(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,l)}))}l(u.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,o){n(e,i,t,o)}))}return r=r?r.then(o,o):o()}}function P(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var r=o.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:C}}function C(){return{value:t,done:!0}}return b.prototype=S.constructor=g,g.constructor=b,b.displayName=u(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},T(k.prototype),k.prototype[s]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new k(c(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(S),u(S,l,"Generator"),S[a]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=E,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,o){return s.type="throw",s.arg=e,n.next=i,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:E(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}("object"===i(e=n.nmd(e))?e.exports:{});try{regeneratorRuntime=o}catch(e){Function("r","regeneratorRuntime = r")(o)}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i](r,r.exports,n),r.loaded=!0,r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};(()=>{"use strict";n.r(i),n.d(i,{Modelviewer:()=>Ti,RepetitiveRequests:()=>V,Sounding:()=>Ho,Synview:()=>kt,ThermodynamicDiagram:()=>kl,ThermodynamicDiagramPluggable:()=>ja,Timeline:()=>z,Tooltip:()=>Hn,calc:()=>e,events:()=>Yl,modelviewer:()=>ql,sounding:()=>Hl,synview:()=>Xl,thermodynamicDiagram:()=>Kl,timeline:()=>Fl,tooltip:()=>zl});var e={};function t(e){if(void 0!==e&&!isNaN(e))return 44330.769*(1-Math.pow(e/1013.25,.19029496))}function o(e){if(void 0!==e&&!isNaN(e))return 1013.25*Math.pow(1-e/44330.769,5.255)}function r(e,t){if(void 0!==e&&!isNaN(e)&&void 0!==t&&!isNaN(t))return e*Math.pow(1e3/t,.286)}function a(e,t){if(void 0!==e&&!isNaN(e)&&void 0!==t&&!isNaN(t))return e*Math.pow(t/1e3,.286)}function s(e,t){if(void 0!==t&&!isNaN(t)){for(var n=void 0,i=Math.pow(1e3/t,.286),o=273,r=20,a=0;Math.abs(r)>.1&&a<100;)a++,n=d(o,t),(o*i*Math.exp(2.5*n/o)-e)*r>0&&(r*=-.5),o+=r;return o}}function l(e,t){if(void 0!==e&&!isNaN(e)&&void 0!==t&&!isNaN(t)){var n=.4343*Math.log(e*t/(622+e));return Math.pow(10,.0498646455*n+2.4082965)-7.07475+38.9114*Math.pow(Math.pow(10,.0915*n)-1.2035,2)}}function u(e,t,n){if(!(void 0===e||isNaN(e)||void 0===t||isNaN(t)||void 0===n||isNaN(n))){for(var i=t-273.15,o=1,r=10,a=1,s=6.112*Math.exp(17.67*i/(i+243.5));Math.abs(o)>.05&&0!=(o=s-(6.112*Math.exp(17.67*i/(i+243.5))-n*(e-273.15-i)*66e-5*(1+.00115*i)))&&(o<0?-1!=a&&(a=-1,r/=10):1!=a&&(a=1,r/=10),!(Math.abs(o)<=.05));)i+=r*a;return i+273.15}}function c(e,t,n){var i=r(e,n);if(!(void 0===i||void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===n||isNaN(n)))return i*Math.exp(2.4819*d(t,n)/v(e,t))}function f(e){if(void 0!==e&&!isNaN(e)){var t=new Array(6.1104546,.4442351,.014302099,.00026454708,30357098e-13,2.0972268e-8,60487594e-18,-1469687e-19),n=new Array(.06485546857696639,.03783195122560735,.02224449342887902,.013182892842468312,.007874020771412448,.004739730494884733,.0028751203550435793,.001757430376758103,.0010824173951885098,.0006717089391856059,.0004199647026320394,.0002645243638634699,.00016784796373681322,.00010728539763162038,6907426344961356e-20,4479404897680843e-20,2925704195639373e-20,19245291263499416e-21,12749137241074795e-21,8505070102755051e-21,5713400253349711e-21,3864650296738762e-21,2632109719650053e-21,18049107293057043e-22,12460785055581605e-22,8.660705713468708e-7,6.059822176688955e-7,4.2682119794324277e-7,3.026165085143795e-7,2.15963854234914e-7,1.5512895457833687e-7),i=0;if((e-=273.15)>-50)i=t[0]+e*(t[1]+e*(t[2]+e*(t[3]+e*(t[4]+e*(t[5]+e*(t[6]+e*t[7]))))));else{var o=(-e-50)/5;i=0<n.length-1?n[0]+o%1*(n[1]-n[0]):1e-7}return i}}function d(e,t){var n=f(e);if(void 0!==n&&void 0!==t&&!isNaN(t))return 621.97*n/(t-n)}function h(e,t){if(void 0!==t&&!isNaN(t)){for(var n=1013,i=100;n-i>10;){var o=i+(n-i)/2,r=d(a(e,o),o);if(void 0===r)return;r<t?i=o:n=o}return i+(n-i)/2}}function p(e,t){if(void 0!==e&&!isNaN(e)){for(var n=323,i=223;n-i>.1;){var o=i+(n-i)/2,r=h(o,t);if(void 0===r)return;r>e?i=o:n=o}return i+(n-i)/2}}function v(e,t){if(void 0!==e&&!isNaN(e)&&void 0!==t&&!isNaN(t))return t-(.001296*t-.15772)*(e-t)}function y(e){return void 0===e||isNaN(e)?void 0:e+273.15}function m(e){return void 0===e||isNaN(e)?void 0:e-273.15}function b(e){return void 0===e||isNaN(e)?void 0:3.6*e}function g(e){return void 0===e||isNaN(e)?void 0:e/3.6}function w(e){return void 0===e||isNaN(e)?void 0:900*e/463}function _(e){return void 0===e||isNaN(e)?void 0:463*e/900}function O(e){return void 0===e||isNaN(e)?void 0:Math.min(12,Math.pow(e/.836,2/3))}function S(e){return void 0===e||isNaN(e)?void 0:.836*Math.pow(e,1.5)}function T(e,t){if(void 0!==e&&!isNaN(e)&&void 0!==t&&!isNaN(t))return 153*m(e)+.9985*t-304.26}function k(e,t,n,i){if(!(void 0===e||isNaN(e)||void 0===t||isNaN(t)||void 0===n||isNaN(n))){if(0==t)return e;var o=.02896;if(void 0===i&&(i=n),n==i)return e*Math.exp(9.807*-o/8.314/n*t);var r=(n-i)/t;return e*Math.exp(9.807*o/8.314/r*Math.log(1-r*t/n))}}function P(e,t,n){if(!(void 0===e||isNaN(e)||void 0===t||isNaN(t)||void 0===n||isNaN(n))){var i=f(t)*n;return 100*(e-i)/287.058/t+100*i/461.495/t}}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,n){"listeners"in this&&void 0!==this.listeners||(this.listeners={}),e in this.listeners||(this.listeners[e]={});var i=Math.random().toString(36).substr(2,9);return this.listeners[e][i]={callback:t,thisArg:n},i}function j(e,t){"listeners"in this&&void 0!==this.listeners&&e in this.listeners&&t in this.listeners[e]&&delete this.listeners[e][t]}function E(e,t,n){"once_listeners"in this&&void 0!==this.once_listeners||(this.once_listeners={}),e in this.once_listeners&&"push"in this.once_listeners[e]||(this.once_listeners[e]=[]),this.once_listeners[e].push({callback:t,thisArg:n})}function C(e){return"listeners"in this&&void 0!==this.listeners&&e in this.listeners&&Object.keys(this.listeners[e]).length||"once_listeners"in this&&e in this.once_listeners&&Object.keys(this.once_listeners[e]).length}function N(e){var t=this,n=Array.prototype.slice.call(arguments);if(n.shift(),"listeners"in this&&void 0!==this.listeners&&e in this.listeners&&"object"==x(this.listeners[e])&&Object.keys(this.listeners[e]).forEach((function(i){t.listeners[e][i].callback.apply(void 0===t.listeners[e][i].thisArg?t:t.listeners[e][i].thisArg,n)})),"once_listeners"in this&&void 0!==this.once_listeners&&e in this.once_listeners&&"forEach"in this.once_listeners[e]){var i=this.once_listeners[e];this.once_listeners[e]=[],i.forEach((function(e){e.callback.apply(void 0===e.thisArg?t:e.thisArg,n)}))}}n.r(e),n.d(e,{altitudeISAByPres:()=>t,densityHumidAirByPressureAndTempAndRelHumidity:()=>P,dewpointByHMRAndPres:()=>l,equiPotentialTempByTempAndDewpointAndPres:()=>c,lclByPotentialTempAndHMR:()=>h,lclTemperatureByTempAndDewpoint:()=>v,potentialTempByLCLAndHMR:()=>p,potentialTempByTempAndPres:()=>r,pressureByBarometricFormula:()=>k,pressureISAByAltitude:()=>o,saturationHMRByTempAndPres:()=>d,saturationPressureByTemp:()=>f,snowlineByTemp850hPaAndAltidude:()=>T,tempByEquiPotTempAndPres:()=>s,tempByPotentialTempAndPres:()=>a,tempCelsiusToKelvin:()=>y,tempKelvinToCelsius:()=>m,wetbulbTempByTempAndDewpointAndPres:()=>u,windspeedBFToMS:()=>S,windspeedKMHToMS:()=>g,windspeedKNToMS:()=>_,windspeedMSToBF:()=>O,windspeedMSToKMH:()=>b,windspeedMSToKN:()=>w}),n(588);const B=function(e){e.on=R,e.un=j,e.once=E,e.hasListener=C,e.trigger=N};function I(e,t,n,i,o,r,a){try{var s=e[r](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,o)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,i=void 0===n?void 0:n,o=t.user,r=void 0===o?"":o,a=t.password,s=void 0===a?"":a,l=t.start,u=void 0===l||l,c=t.defaultTimeout,f=void 0===c?void 0:c,d=t.timeoutOnError,h=void 0===d?void 0:d,p=t.pauseOnHiddenDocument,v=void 0!==p&&p,y=t.responseType,m=void 0===y?"":y;D(this,e),this._url=i,this._user=r,this._password=s,this._isStarted=u,this._defaultTimeout=f,this._timeoutOnError=h,this._pauseOnHiddenDocument=v,this._initPauseOnHiddenDocument(),this._isSuppressedByHiddenDocument=!1,this._responseType=m,this._timeoutID=void 0,this._loading=!1,this._isStarted&&this.start()}var t,n,i,o;return t=e,(n=[{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"password",get:function(){return this._password},set:function(e){this._password=e}},{key:"responseType",get:function(){return this._responseType},set:function(e){this._responseType=e}},{key:"start",value:function(){this._isStarted=!0,this._startRequest()}},{key:"stop",value:function(){this._isStarted=!1,void 0!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=void 0)}},{key:"_planRequest",value:function(e){var t=this,n=e.delay;void 0===this._timeoutID&&(this._timeoutID=setTimeout((function(){t._pauseOnHiddenDocument&&"hidden"in document&&document.hidden?t._isSuppressedByHiddenDocument=!0:t._startRequest()}),n))}},{key:"_startRequest",value:function(){var e=this;void 0!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=void 0),this._makeRequest().then((function(t){var n=t.request;if(e._isStarted){var i=e._defaultTimeout,o=n.getResponseHeader("Cache-Control");if(null!==o){var r=/(^|,\s*)max-age=([0-9]+)($|\s*,)/.exec(o);null!==r&&r[2]>0&&(i=Math.round(1e3*r[2]))}e.trigger("success:request",{request:n}),void 0!==i&&e._planRequest({delay:i})}}),(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.request;e._isStarted&&void 0!==n&&(e.trigger("error:request",{request:n}),void 0!==e._timeoutOnError&&e._planRequest({delay:e._timeoutOnError}))}),(function(t){var n=t.request,i=void 0===n?void 0:n;void 0!==i&&e.trigger("error:request",{request:i})}))}},{key:"_makeRequest",value:(i=regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.trigger("before:request"),e.abrupt("return",new Promise((function(e,n){if(void 0!==t._url)if(t._loading)n();else{t._loading=!0;var i=new XMLHttpRequest;void 0!==t.responseType&&(i.responseType=t.responseType),i.addEventListener("load",(function(){t._loading=!1,200==i.status?e({request:i}):n({request:i})})),i.addEventListener("error",(function(){t._loading=!1,n({request:i})})),i.open("GET",t._url,!0,t._user,t._password),i.send()}else n()})));case 2:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(n,o){var r=i.apply(e,t);function a(e){I(r,n,o,a,s,"next",e)}function s(e){I(r,n,o,a,s,"throw",e)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"_initPauseOnHiddenDocument",value:function(){var e=this;this._pauseOnHiddenDocument&&document.addEventListener("visibilitychange",(function(){"hidden"in document&&!document.hidden&&e._isSuppressedByHiddenDocument&&e._isStarted&&(e._isSuppressedByHiddenDocument=!1,e.start())}))}}])&&A(t.prototype,n),e}();B(M.prototype);const V=M;function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var X=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.maxTimeGap,i=void 0===n?void 0:n,o=t.keyboardNavigation,r=void 0===o?{}:o;Y(this,e),this.maxTimeGap=i,this.selectedTime=new Date("invalid"),this.times=[],this.enabledTimes=[],this.allEnabledTimes=[],this.timesByKey={},this._keyboardNavigation={},this._initKeyboardNavigation(r)}var t,n;return t=e,(n=[{key:"getSelectedTime",value:function(){return this.selectedTime}},{key:"setSelectedTime",value:function(e){return this._setSelectedTime(q(e,this.times)>-1?e:new Date("invalid")),this}},{key:"getTimes",value:function(){return this.times}},{key:"getEnabledTimes",value:function(){return this.enabledTimes}},{key:"getAllEnabledTimes",value:function(){return this.allEnabledTimes}},{key:"setTimesBySetID",value:function(e,t){return this.timesByKey[e]={times:t,enabled:t},this._updateTimes(),this._updateEnabledTimes(),this}},{key:"setEnabledTimesBySetID",value:function(e,t){return e in this.timesByKey&&(this.timesByKey[e].enabled=t,this._updateEnabledTimes()),this}},{key:"getSetIDs",value:function(){return Object.keys(this.timesByKey)}},{key:"deleteSetID",value:function(e){return e in this.timesByKey&&(delete this.timesByKey[e],this._updateTimes(),this._updateEnabledTimes()),this}},{key:"first",value:function(){return this._setSelectedTime(this.getFirstEnabledTime()),this}},{key:"last",value:function(){return this._setSelectedTime(this.getLastEnabledTime()),this}},{key:"next",value:function(){return this._setSelectedTime(this.getNextEnabledTime()),this}},{key:"prev",value:function(){return this._setSelectedTime(this.getPrevEnabledTime()),this}},{key:"nextAllEnabledTime",value:function(){return this._setSelectedTime(this.getNextAllEnabledTime()),this}},{key:"prevAllEnabledTime",value:function(){return this._setSelectedTime(this.getPrevAllEnabledTime()),this}},{key:"add",value:function(e,t){var n=this.getSelectedTime(),i=0;switch(t){case"hours":case"h":i=3600*e*1e3;break;case"minutes":case"m":i=60*e*1e3;break;case"seconds":case"s":i=1e3*e;break;case"milliseconds":case"ms":i=e}switch(0!=i&&(n=new Date(n.valueOf()+i)),t){case"years":case"y":n.setUTCFullYear(n.getUTCFullYear()+e);break;case"months":case"M":n.setUTCMonth(n.getUTCMonth()+e);break;case"days":case"d":n.setUTCDate(n.getUTCDate()+e)}return q(n,this.times)>-1&&this._setSelectedTime(n),this}},{key:"sub",value:function(e,t){var n=this.getSelectedTime(),i=0;switch(t){case"hours":case"h":i=3600*e*1e3;break;case"minutes":case"m":i=60*e*1e3;break;case"seconds":case"s":i=1e3*e;break;case"milliseconds":case"ms":i=e}switch(0!=i&&(n=new Date(n.valueOf()-i)),t){case"years":case"y":n.setUTCFullYear(n.getUTCFullYear()-e);break;case"months":case"M":n.setUTCMonth(n.getUTCMonth()-e);break;case"days":case"d":n.setUTCDate(n.getUTCDate()-e)}return q(n,this.times)>-1&&this._setSelectedTime(n),this}},{key:"getFirstEnabledTime",value:function(){return this.enabledTimes.length>0?this.enabledTimes[0]:new Date("invalid")}},{key:"getLastEnabledTime",value:function(){return this.enabledTimes.length>0?this.enabledTimes[this.enabledTimes.length-1]:new Date("invalid")}},{key:"getNextEnabledTime",value:function(){if(this.enabledTimes.length<1)return new Date("invalid");var e=q(this.getSelectedTime(),this.enabledTimes);if(e>-1)return++e<this.enabledTimes.length?this.enabledTimes[e]:this.enabledTimes[this.enabledTimes.length-1];if(isNaN(this.getSelectedTime()))return this.enabledTimes[0];for(var t=new Date("invalid"),n=0;n<this.enabledTimes.length;n++)if(this.getSelectedTime().valueOf()<this.enabledTimes[n].valueOf()){t=this.enabledTimes[n];break}return t}},{key:"getPrevEnabledTime",value:function(){if(this.enabledTimes.length<1)return new Date("invalid");var e=q(this.getSelectedTime(),this.enabledTimes);if(e>-1)return-1<--e?this.enabledTimes[e]:this.enabledTimes[0];if(isNaN(this.getSelectedTime()))return this.enabledTimes[0];for(var t=new Date("invalid"),n=this.enabledTimes.length-1;n>=0;n--)if(this.getSelectedTime().valueOf()>this.enabledTimes[n].valueOf()){t=this.enabledTimes[n];break}return t}},{key:"getFirstAllEnabledTime",value:function(){return this.allEnabledTimes.length>0?this.allEnabledTimes[0]:new Date("invalid")}},{key:"getLastAllEnabledTime",value:function(){return this.allEnabledTimes.length>0?this.allEnabledTimes[this.allEnabledTimes.length-1]:new Date("invalid")}},{key:"getNextAllEnabledTime",value:function(){if(this.allEnabledTimes.length<1)return new Date("invalid");var e=q(this.getSelectedTime(),this.allEnabledTimes);if(e>-1)return++e<this.allEnabledTimes.length?this.allEnabledTimes[e]:this.allEnabledTimes[this.allEnabledTimes.length-1];if(isNaN(this.getSelectedTime()))return this.allEnabledTimes[0];for(var t=new Date("invalid"),n=0;n<this.allEnabledTimes.length;n++)if(this.getSelectedTime().valueOf()<this.allEnabledTimes[n].valueOf()){t=this.allEnabledTimes[n];break}return t}},{key:"getPrevAllEnabledTime",value:function(){if(this.allEnabledTimes.length<1)return new Date("invalid");var e=q(this.getSelectedTime(),this.allEnabledTimes);if(e>-1)return-1<--e?this.allEnabledTimes[e]:this.allEnabledTimes[0];if(isNaN(this.getSelectedTime()))return this.allEnabledTimes[0];for(var t=new Date("invalid"),n=this.allEnabledTimes.length-1;n>=0;n--)if(this.getSelectedTime().valueOf()>this.allEnabledTimes[n].valueOf()){t=this.allEnabledTimes[n];break}return t}},{key:"isTimeEnabled",value:function(e){return this.enabledTimes.reduce((function(t,n){return n.valueOf()==e.valueOf()||t}),!1)}},{key:"isTimeAllEnabled",value:function(e){return this.allEnabledTimes.reduce((function(t,n){return n.valueOf()==e.valueOf()||t}),!1)}},{key:"isFirstEnabledTime",value:function(){return this.getFirstEnabledTime().valueOf()==this.getSelectedTime().valueOf()}},{key:"isLastEnabledTime",value:function(){return this.getLastEnabledTime().valueOf()==this.getSelectedTime().valueOf()}},{key:"_setSelectedTime",value:function(e){var t=this.selectedTime;return this.selectedTime=e,this.trigger("change:time",t),this.selectedTime}},{key:"_updateTimes",value:function(){this.times=[];var e=[],t={};for(var n in this.timesByKey)this.timesByKey[n].times.forEach((function(n){n.valueOf()in t||(e.push(n),t[n.valueOf()]=n)}));H(e),e.forEach((function(e){if(this.times.length<1)this.times.push(e);else{var t=this.times[this.times.length-1];if(void 0!==this.maxTimeGap&&e.valueOf()-t.valueOf()>1e3*this.maxTimeGap){var n=t;do{n=new Date(n.getTime()+1e3*this.maxTimeGap),this.times.push(n)}while(e.valueOf()-n.valueOf()>1e3*this.maxTimeGap)}this.times.push(e)}}),this),H(this.times),this.trigger("change:times")}},{key:"_updateEnabledTimes",value:function(){this.enabledTimes=[],this.allEnabledTimes=[];var e={},t={};for(var n in this.timesByKey)this.timesByKey[n].enabled.forEach((function(n){n.valueOf()in e||(this.enabledTimes.push(n),e[n.valueOf()]=n),n.valueOf()in t?t[n.valueOf()]++:t[n.valueOf()]=1}),this);for(var i in H(this.enabledTimes),t)t[i]==Object.keys(this.timesByKey).length&&this.allEnabledTimes.push(e[i]);H(this.allEnabledTimes),this.trigger("change:enabledTimes")}},{key:"_initKeyboardNavigation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.enabled,i=void 0!==n&&n,o=t.first,r=void 0===o?36:o,a=t.last,s=void 0===a?35:a,l=t.prev,u=void 0===l?37:l,c=t.next,f=void 0===c?39:c,d=t.prevAllEnabledTime,h=void 0===d?[37,"ctrl"]:d,p=t.nextAllEnabledTime,v=void 0===p?[39,"ctrl"]:p,y=t.add,m=void 0===y?void 0:y,b=t.sub,g=void 0===b?void 0:b;void 0===m&&(m={"3h":[39,"ctrl","shift"],"6h":[39,"shift"],"12h":[39,"alt","shift"],"24h":[39,"alt"]}),void 0===g&&(g={"3h":[37,"ctrl","shift"],"6h":[37,"shift"],"12h":[37,"alt","shift"],"24h":[37,"alt"]}),this._keyboardNavigation={enabled:i,first:r,last:s,prev:u,next:f,prevAllEnabledTime:h,nextAllEnabledTime:v,add:m,sub:g},document&&this._keyboardNavigation.enabled&&document.addEventListener("keydown",(function(t){Object.keys(e._keyboardNavigation).forEach((function(n){"enabled"!=n&&(/^(add|sub)$/.test(n)?Object.keys(e._keyboardNavigation[n]).forEach((function(i){var o=i.match(/^([0-9]+)\s*([a-zA-Z]+)$/);null!==o&&K(t,e._keyboardNavigation[n][i])&&(e[n](+o[1],o[2]),t.preventDefault(),t.stopPropagation())})):n in e&&K(t,e._keyboardNavigation[n])&&(e[n](),t.preventDefault(),t.stopPropagation()))}))}))}}])&&F(t.prototype,n),e}();B(X.prototype);const z=X;var q=function(e,t){return t.findIndex((function(t){return t.valueOf()==e.valueOf()}))};function H(e){e.sort((function(e,t){return e.valueOf()-t.valueOf()}))}function K(e,t){if("object"==G(t)&&"forEach"in t||(t=[t]),0==t.length)return!1;var n=[["ctrl","ctrlKey"],["alt","altKey"],["shift","shiftKey"],["meta","metaKey"]].reduce((function(n,i){return n&&(t.indexOf(i[0])>-1?e[i[1]]:!e[i[1]])}),!0);return t.forEach((function(t){switch(t){case"ctrl":case"alt":case"shift":case"meta":break;default:t!=e.keyCode&&(n=!1)}})),n}const U=jQuery;var $=n.n(U);function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var J=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.timeline,o=n.restartPause,r=void 0===o?1.8:o,a=n.imagePeriod,s=void 0===a?.2:a,l=n.imageFrequency,u=void 0===l?void 0:l,c=n.enabledStepsOnly,f=void 0===c||c,d=n.allEnabledStepsOnly,h=void 0!==d&&d;Z(this,e),this.options={timeline:i,restartPause:r,imagePeriod:s,imageFrequency:u,enabledStepsOnly:f,allEnabledStepsOnly:h},void 0===this.options.timeline&&(this.options.timeline=new z),void 0!==this.options.imageFrequency&&0!=this.options.imageFrequency&&(this.options.imagePeriod=1/this.options.imageFrequency),this.animationIntervalID=void 0,this.animationTimeoutID=void 0,this.animationStep=0,this.timesHash={},this.times=[];var p=function(){t.times=t.options.timeline[t._getTimelineTimesMethod()](),t.timesHash={},t.times.forEach((function(e,n){return t.timesHash[e.valueOf()]=n}))};this.options.timeline.on(this._getTimelineChangeTimesEvent(),p),p()}var t,n;return t=e,(n=[{key:"getImagePeriod",value:function(){return this.options.imagePeriod}},{key:"setImagePeriod",value:function(e){return this.options.imagePeriod=e,this.isStarted()&&this._updateAnimation(),this.trigger("change:imageFrequency"),this}},{key:"getImageFrequency",value:function(){return 1/this.options.imagePeriod}},{key:"setImageFrequency",value:function(e){return 0!=e&&this.setImagePeriod(1/e),this}},{key:"getRestartPause",value:function(){return this.options.restartPause}},{key:"setRestartPause",value:function(e){return this.options.restartPause=Number(e),this.trigger("change:restartPause"),this}},{key:"isStarted",value:function(){return void 0!==this.animationIntervalID||void 0!==this.animationTimeoutID}},{key:"start",value:function(){this.options.timeline.getSelectedTime().valueOf()in this.timesHash&&this._setStep(this.timesHash[this.options.timeline.getSelectedTime().valueOf()]),this.isStarted()||this._updateAnimation(),this.trigger("start:animation")}},{key:"stop",value:function(){this._clearAnimation(),this.trigger("stop:animation")}},{key:"toggle",value:function(){this.isStarted()?this.stop():this.start()}},{key:"_setStep",value:function(e){0<=e&&e<this._getCount()&&(this.animationStep=e)}},{key:"_getTimelineChangeTimesEvent",value:function(){return this.options.enabledStepsOnly||this.options.allEnabledStepsOnly?"change:enabledTimes":"change:times"}},{key:"_getTimelineTimesMethod",value:function(){return this.options.allEnabledStepsOnly?"getAllEnabledTimes":this.options.enabledStepsOnly?"getEnabledTimes":"getTimes"}},{key:"_getCount",value:function(){return this.options.timeline[this._getTimelineTimesMethod()]().length}},{key:"_updateAnimation",value:function(){this._clearAnimation(),this.animationStep<this._getCount()-1?this._initAnimation():this._initRestartPause()}},{key:"_initAnimation",value:function(){var e=this;void 0===this.animationIntervalID&&(this.animationIntervalID=window.setInterval((function(){e.animationStep++,e.animationStep<e.times.length&&e.options.timeline.setSelectedTime(e.times[e.animationStep]),e.animationStep>=e._getCount()-1&&(e.trigger("end:animation"),e._clearAnimation(),e._initRestartPause())}),1e3*this.options.imagePeriod))}},{key:"_initRestartPause",value:function(){var e=this;void 0===this.animationTimeoutID&&(this.animationTimeoutID=window.setTimeout((function(){e.animationStep=0,e.trigger("restart:animation"),e.animationStep<e.times.length&&e.options.timeline.setSelectedTime(e.times[e.animationStep]),e._clearAnimation(),e._initAnimation()}),1e3*(this.options.imagePeriod+this.options.restartPause)))}},{key:"_clearAnimation",value:function(){void 0!==this.animationIntervalID&&(window.clearInterval(this.animationIntervalID),this.animationIntervalID=void 0),void 0!==this.animationTimeoutID&&(window.clearTimeout(this.animationTimeoutID),this.animationTimeoutID=void 0)}}])&&W(t.prototype,n),e}();B(J.prototype);const Q=J;function ee(e,t){var n=t.animation,i=t.suffix,o=void 0===i?"fps":i,r=$()("<input>").addClass("form-control").attr("type","number").attr("min",1).attr("step",1),a=$()("<div>").addClass("input-group").append(r).append($()("<span>").addClass("input-group-text").text(o));r.on("change",(function(){return n.setImageFrequency(r.val())}));var s=function(){return r.val(n.getImageFrequency())};return n.on("change:imageFrequency",s),s(),e.append(a),a}function te(e,t){var n=t.animation,i=t.frequencies;i=i||[1];var o=$()("<input>").addClass("form-range").attr("type","range").attr("min",0).attr("max",i.length-1);o.on("change input",(function(){var e=o.val();e<i.length&&n.setImageFrequency(i[e])}));var r=function(){var e=i.indexOf(n.getImageFrequency());e>-1&&o.val(e)};return n.on("change:imageFrequency",r),r(),e.append(o),o}function ne(e,t){var n=t.animation,i=t.suffix,o=void 0===i?"s":i,r=$()("<input>").addClass("form-control").attr("type","number").attr("min",0).attr("step",.1),a=$()("<div>").addClass("input-group").append(r).append($()("<span>").addClass("input-group-text").text(o));r.on("change",(function(){return n.setRestartPause(r.val())}));var s=function(){return r.val(n.getRestartPause())};return n.on("change:restartPause",s),s(),e.append(a),a}const ie='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">\n  <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n</svg>',oe='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">\n  <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>\n</svg>';function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var le=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timeline,i=void 0===n?void 0:n,o=t.node,r=void 0===o?void 0:o,a=t.animation,s=void 0===a?void 0:a,l=t.enabledStepsOnly,u=void 0===l||l,c=t.allEnabledStepsOnly,f=void 0!==c&&c,d=t.textInvalid,h=void 0===d?"-":d,p=t.getTimeText,v=void 0===p?void 0:p,y=t.outputTimezone,m=void 0===y?void 0:y;ae(this,e),this.options={timeline:i,node:r,animation:s,enabledStepsOnly:u,allEnabledStepsOnly:f,textInvalid:h,getTimeText:v,outputTimezone:m},void 0===this.options.timeline&&(this.options.timeline=new z),this.listeners=[],this.inputListener=void 0}var t,n;return t=e,(n=[{key:"setNode",value:function(e){if(void 0!==this.options.node&&this.emptyNode(),void 0===e)this.detachEventListeners(),this.options.node=e;else{this.options.node=e;var t=this.listeners.length>0;t||(this.attachEventListener(this.options.timeline,"change:time",(function(){this.onChangeTime()}),this),this.attachEventListener(this.options.timeline,"change:times",(function(){this.onChangeTimes()}),this),this.attachEventListener(this.options.timeline,"change:enabledTimes",(function(){this.onChangeTimes()}),this)),this.onInitNode(t),this.onChangeTimes(),this.onChangeTime()}return void 0===this.inputListener&&(this.inputListener=this.on("input",(function(){void 0!==this.options.animation&&this.options.animation.stop()}),this)),this}},{key:"getOutputTimezone",value:function(){return this.options.outputTimezone}},{key:"setOutputTimezone",value:function(e){var t=this.options.outputTimezone!=e;return this.options.outputTimezone=e,t&&void 0!==this.options.node&&(this.onChangeTimes(),this.onChangeTime()),this}},{key:"onChangeTime",value:function(){}},{key:"onChangeTimes",value:function(){}},{key:"emptyNode",value:function(){}},{key:"onInitNode",value:function(){}},{key:"getTimelineTimes",value:function(){var e=this.options.allEnabledStepsOnly?"getAllEnabledTimes":this.options.enabledStepsOnly?"getEnabledTimes":"getTimes";return this.options.timeline[e]()}},{key:"timeToText",value:function(e,t){return isNaN(e)?this.options.textInvalid:void 0!==this.options.getTimeText?this.options.getTimeText.call(this,e,t):e.toISOString()}},{key:"attachEventListener",value:function(e,t,n,i){this.listeners.push([e,t]),e.on(t,n,i)}},{key:"detachEventListeners",value:function(){this.listeners.forEach((function(e){"un"in e[0]?e[0].un(e[1]):"off"in e[0]&&e[0].off(e[1])})),this.listeners=[]}}])&&se(t.prototype,n),e}();B(le.prototype);const ue=le;function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fe=["format"];function de(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=me(i);if(o){var n=me(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ye(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.format,i=void 0===n?void 0:n,o=de(t,fe);return he(this,a),(e=r.call(this,o)).options.format=i,e.setNode(e.options.node),e}return t=a,(n=[{key:"onChangeTime",value:function(){this.options.node.text(this.timeToText(this.options.timeline.getSelectedTime(),this.options.format))}},{key:"emptyNode",value:function(){this.options.node.text("")}}])&&pe(t.prototype,n),a}(ue);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Se(i);if(o){var n=Se(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Oe(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).times=[],t.timesIndexes={},t.setNode(t.options.node),t}return t=a,(n=[{key:"onChangeTime",value:function(){var e=this.options.timeline.getSelectedTime();e.valueOf()in this.timesIndexes?this.options.node.val(this.timesIndexes[e.valueOf()]+1):this.options.node.val(1)}},{key:"onChangeTimes",value:function(){this.times=this.getTimelineTimes(),this.timesIndexes={},this.times.forEach((function(e,t){this.timesIndexes[e.valueOf()]=t}),this),this.options.node.prop("max",this.times.length)}},{key:"onInitNode",value:function(e){if(this.options.node.prop("min",1),this.options.node.prop("step",1),!e){var t=this;this.attachEventListener(this.options.node,"change input",(function(){var e=+$()(this).val();0<e&&e<=t.times.length&&t.options.timeline.setSelectedTime(t.times[e-1]),t.trigger("input")}))}}}])&&we(t.prototype,n),a}(ue);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pe=["format","grouping","groupingFormat","classMain","classButtonGroup","classButtonGroupMargin","classLabel","classLabelSpan","classButton","classButtonActive","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled"];function xe(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ne(i);if(o){var n=Ne(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ce(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.format,i=void 0===n?"HH":n,o=t.grouping,s=void 0===o?"daily":o,l=t.groupingFormat,u=void 0===l?"ddd, DD. MMM":l,c=t.classMain,f=void 0===c?"btn-toolbar":c,d=t.classButtonGroup,h=void 0===d?"btn-group":d,p=t.classButtonGroupMargin,v=void 0===p?"me-2":p,y=t.classLabel,m=void 0===y?void 0:y,b=t.classLabelSpan,g=void 0===b?"d-block w-100":b,w=t.classButton,_=void 0===w?"btn":w,O=t.classButtonActive,S=void 0===O?"active":O,T=t.classButtonNotEnabled,k=void 0===T?"btn-light":T,P=t.classButtonEnabled,x=void 0===P?"btn-secondary":P,R=t.classButtonAllEnabled,j=void 0===R?"btn-primary":R,E=xe(t,Pe);return Re(this,a),(e=r.call(this,E)).options.format=i,e.options.grouping=s,e.options.groupingFormat=u,e.options.classMain=f,e.options.classButtonGroup=h,e.options.classButtonGroupMargin=v,e.options.classLabel=m,e.options.classLabelSpan=g,e.options.classButton=_,e.options.classButtonActive=S,e.options.classButtonNotEnabled=k,e.options.classButtonEnabled=x,e.options.classButtonAllEnabled=j,e.toolbarNode=void 0,e.setNode(e.options.node),e}return t=a,(n=[{key:"onChangeTime",value:function(){if(void 0!==this.toolbarNode){var e=this.options.timeline.getSelectedTime(),t=this;this.toolbarNode.find("button").each((function(){var n=new Date(+$()(this).data("time"));$()(this).removeClass(t.options.classButtonActive),e.valueOf()==n.valueOf()&&$()(this).addClass(t.options.classButtonActive)}))}}},{key:"onChangeTimes",value:function(){void 0===this.toolbarNode&&(this.toolbarNode=$()("<div>")),this.toolbarNode.empty();var e="daily"==this.options.grouping?"YYYY-MM-DD":"hourly"==this.options.grouping?"YYYY-MM-DD HH":this.options.grouping,t=void 0;this.getTimelineTimes().forEach((function(n){if(void 0===t||t.data("date")!=this.timeToText(n,e)){var i=$()("<div>").addClass(this.options.classButtonGroup).addClass(this.options.classButtonGroupMargin).attr("role","group").attr("aria-label",this.timeToText(n,e));if(void 0===this.options.groupingFormat)t=i;else{var o=$()("<span>").addClass(this.options.classLabelSpan).text(this.timeToText(n,this.options.groupingFormat));t=$()("<label>").addClass(this.options.classLabel).append(o),i.attr("aria-label",o.text()),t.append(i)}t.data("date",this.timeToText(n,e)),this.toolbarNode.append(t)}var r=$()("<button>").addClass(this.options.classButton).attr("type","button").data("time",n.valueOf());"function"==typeof this.options.format?r.text(this.timeToText(n,this.options.format.call(this,n))):r.text(this.timeToText(n,this.options.format)),this.options.timeline.isTimeAllEnabled(n)?r.addClass(this.options.classButtonAllEnabled):this.options.timeline.isTimeEnabled(n)?r.addClass(this.options.classButtonEnabled):r.addClass(this.options.classButtonNotEnabled);var a=this.options.timeline.getSelectedTime();n.valueOf()==a.valueOf()&&r.addClass(this.options.classButtonActive);var s=this;r.click((function(){s.options.timeline.setSelectedTime(new Date(+$()(this).data("time"))),s.trigger("input")})),t.hasClass(this.options.classButtonGroup)?t.append(r):t.children("div").append(r)}),this),this.toolbarNode.find("div."+this.options.classButtonGroup).last().removeClass(this.options.classButtonGroupMargin)}},{key:"emptyNode",value:function(){this.toolbarNode=void 0,this.options.node.empty()}},{key:"onInitNode",value:function(){this.toolbarNode=$()("<div>").addClass(this.options.classMain).attr("role","toolbar").attr("aria-label","Timeline toolbar"),this.options.node.append(this.toolbarNode)}}])&&je(t.prototype,n),a}(ue);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var De=["format","buttonFormat","grouping","groupingDivider","groupingFormat","classMain","classDropdownMenu","classDropdownItem","classItemActive","classItemNotEnabled","classItemEnabled","classItemAllEnabled","classDropdownHeader","classDropdownDivider","classDropdownButton","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled"];function Ae(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ve(e,t,n){return(Ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fe(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fe(i);if(o){var n=Fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ye(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.format,i=void 0===n?"HH:mm":n,o=t.buttonFormat,s=void 0===o?"DD. MMMM YYYY HH:mm":o,l=t.grouping,u=void 0===l?"daily":l,c=t.groupingDivider,f=void 0===c||c,d=t.groupingFormat,h=void 0===d?"ddd, DD. MMMM YYYY":d,p=t.classMain,v=void 0===p?"dropdown":p,y=t.classDropdownMenu,m=void 0===y?"dropdown-menu":y,b=t.classDropdownItem,g=void 0===b?"dropdown-item":b,w=t.classItemActive,_=void 0===w?"active":w,O=t.classItemNotEnabled,S=void 0===O?"disabled":O,T=t.classItemEnabled,k=void 0===T?void 0:T,P=t.classItemAllEnabled,x=void 0===P?void 0:P,R=t.classDropdownHeader,j=void 0===R?"dropdown-header":R,E=t.classDropdownDivider,C=void 0===E?"dropdown-divider":E,N=t.classDropdownButton,B=void 0===N?"btn dropdown-toggle":N,I=t.classButtonNotEnabled,D=void 0===I?void 0:I,A=t.classButtonEnabled,L=void 0===A?void 0:A,M=t.classButtonAllEnabled,V=void 0===M?void 0:M,G=Ae(t,De);return Le(this,a),(e=r.call(this,G)).options.format=i,e.options.buttonFormat=s,e.options.grouping=u,e.options.groupingDivider=f,e.options.groupingFormat=h,e.options.classMain=v,e.options.classDropdownMenu=m,e.options.classDropdownItem=g,e.options.classItemActive=_,e.options.classItemNotEnabled=S,e.options.classItemEnabled=k,e.options.classItemAllEnabled=x,e.options.classDropdownHeader=j,e.options.classDropdownDivider=C,e.options.classDropdownButton=B,e.options.classButtonNotEnabled=D,e.options.classButtonEnabled=L,e.options.classButtonAllEnabled=V,e.visualisationButtonText=new be({timeline:e.options.timeline,format:e.options.buttonFormat,textInvalid:e.options.textInvalid,outputTimezone:e.options.outputTimezone,getTimeText:e.options.getTimeText}),e.dropdownNode=void 0,e.setNode(e.options.node),e}return t=a,(n=[{key:"setOutputTimezone",value:function(e){return Ve(Fe(a.prototype),"setOutputTimezone",this).call(this,e),this.visualisationButtonText.setOutputTimezone(e),this}},{key:"onChangeTime",value:function(){if(void 0!==this.dropdownNode){var e=this.options.timeline.getSelectedTime();this.options.node.children("li").children("button").removeClass(this.options.classButtonActive).removeClass(this.options.classButtonNotEnabled).removeClass(this.options.classButtonEnabled).removeClass(this.options.classButtonAllEnabled),this.options.timeline.isTimeAllEnabled(e)?this.options.node.children("button").addClass(this.options.classButtonAllEnabled):this.options.timeline.isTimeEnabled(e)?this.options.node.children("button").addClass(this.options.classButtonEnabled):this.options.node.children("button").addClass(this.options.classButtonNotEnabled);var t=this;this.dropdownNode.children("li").children("button."+this.options.classDropdownItem).each((function(){var n=new Date(+$()(this).data("time"));$()(this).removeClass(t.options.classItemActive).removeClass(t.options.classItemNotEnabled).removeClass(t.options.classItemEnabled).removeClass(t.options.classItemAllEnabled),e.valueOf()==n.valueOf()?$()(this).addClass(t.options.classItemActive):t.options.timeline.isTimeAllEnabled(n)?$()(this).addClass(t.options.classItemAllEnabled):t.options.timeline.isTimeEnabled(n)?$()(this).addClass(t.options.classItemEnabled):$()(this).addClass(t.options.classItemNotEnabled)}))}}},{key:"onChangeTimes",value:function(){void 0===this.dropdownNode&&(this.dropdownNode=$()("<div>")),this.dropdownNode.empty();var e="daily"==this.options.grouping?"YYYY-MM-DD":"hourly"==this.options.grouping?"YYYY-MM-DD HH":this.options.grouping,t=void 0;this.getTimelineTimes().forEach((function(n){void 0!==t&&t==this.timeToText(n,e)||(void 0!==t&&this.options.groupingDivider&&this.dropdownNode.append($()("<div>").addClass(this.options.classDropdownDivider)),void 0!==this.options.groupingFormat&&this.dropdownNode.append($()("<h6>").addClass(this.options.classDropdownHeader).text(this.timeToText(n,this.options.groupingFormat))),t=this.timeToText(n,e));var i=$()("<button>").addClass(this.options.classDropdownItem).attr("type","button").text(this.timeToText(n,this.options.format)).data("time",n.valueOf()),o=this;i.click((function(){o.options.timeline.setSelectedTime(new Date(+$()(this).data("time"))),o.trigger("input")})),this.dropdownNode.append($()("<li>").append(i))}),this)}},{key:"emptyNode",value:function(){void 0!==this.visualisationButtonText&&this.visualisationButtonText.setNode(void 0),this.dropdownNode=void 0,this.options.node.empty()}},{key:"onInitNode",value:function(){for(var e="dropdownMenuButton",t=0;null!=document.getElementById(e);)e="dropdownMenuButton"+ ++t;var n=$()("<button>").addClass(this.options.classDropdownButton).attr("type","button").attr("id",e).attr("data-bs-toggle","dropdown").attr("aria-haspopup",!0).attr("aria-expanded",!1);this.visualisationButtonText.setNode(n),this.dropdownNode=$()("<ul>").addClass(this.options.classDropdownMenu).attr("aria-labelledby",e),this.options.node.addClass(this.options.classMain).append(n).append(this.dropdownNode)}}])&&Me(t.prototype,n),a}(ue);function ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=$().extend(!0,{map:void 0,layerGroup:void 0},t)}var t,n;return t=e,(n=[{key:"getMap",value:function(){return this.options.map}},{key:"getViewCenter",value:function(){}},{key:"setViewCenter",value:function(){return this}},{key:"getViewZoom",value:function(){}},{key:"setViewZoom",value:function(){return this}},{key:"makeLayerGroup",value:function(){}},{key:"getExtendedEventByTypeCollection",value:function(e){return e.synviewType=void 0,e.layer=void 0,e.feature=void 0,e.color=void 0,e}},{key:"findLayerInType",value:function(){return-1}}])&&ze(t.prototype,n),e}();B(qe.prototype);const He=qe;function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemIds=[],this.items={}}var t,n;return t=e,(n=[{key:"getCount",value:function(){return this.itemIds.length}},{key:"getItems",value:function(){return this.itemIds.map((function(e){return this.items[e]}),this)}},{key:"getItemIds",value:function(){return this.itemIds}},{key:"getItemById",value:function(e){return e in this.items?this.items[e]:void 0}},{key:"containsId",value:function(e){return-1!==this.getIndexById(e)}},{key:"getIndexById",value:function(e){var t=-1;return this.itemIds.forEach((function(n,i){n==e&&(t=i)})),t}},{key:"append",value:function(e){var t=e.getId();return this.containsId(t)?(this.trigger("replace:item",e,this.getItemById(t)),this.items[t]=e):(this.itemIds.push(t),this.items[t]=e,this.trigger("add:item",e)),this}},{key:"remove",value:function(e){var t=this.getItemById(e);if(void 0!==t){var n=this.getIndexById(e);delete this.items[e],this.itemIds.splice(n,1),this.trigger("remove:item",t)}return this}}])&&Ke(t.prototype,n),e}();B(Ue.prototype);const $e=Ue,Ze=ol.layer.Group;var We=n.n(Ze);const Je=ol.layer.Vector;var Qe=n.n(Je);const et=ol.Observable;function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var it=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,i=void 0===n?void 0:n,o=t.datetime,r=void 0===o?void 0:o,a=t.mimetype,s=void 0===a?void 0:a,l=t.reloadTime,u=void 0===l?void 0:l,c=t.className,f=void 0===c?void 0:c,d=t.imageSmoothingEnabled,h=void 0===d?void 0:d,p=t.ol,v=void 0===p?{}:p;tt(this,e),this.options={url:i,datetime:r,mimetype:s,reloadTime:u,className:f,ol:v},this._normalizeOLOptions(this.options.ol),this.layer=void 0,this.layerGroup=void 0,this.reloadTimerId=void 0,this.visible=!1,this.zIndex=void 0,this.opacity=1,this._imageSmoothing=h}var t,n;return t=e,(n=[{key:"getId",value:function(){return this.getUrl()}},{key:"getUrl",value:function(){return this.options.url}},{key:"getDatetime",value:function(){return this.options.datetime}},{key:"getMIMEType",value:function(){return void 0===this.options.mimetype?"application/octet-stream":this.options.mimetype}},{key:"getReloadTime",value:function(){return this.options.reloadTime}},{key:"setReloadTime",value:function(e){return this.options.reloadTime=e,this._reload(),this}},{key:"getVisible",value:function(){return this.visible}},{key:"setVisible",value:function(e){return this.visible=e,void 0!==this.layer&&("setVisible"in this.layer?this.layer.setVisible(e):this.visible?this.layer.addTo(this.layerGroup):this.layerGroup.removeLayer(this.layer)),this}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setZIndex",value:function(e){return this.zIndex=e,void 0!==this.layer&&this.layer.setZIndex(e),this}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setOpacity",value:function(e){return this.opacity=e,void 0!==this.layer&&this.layer.setOpacity(e),this}},{key:"className",get:function(){return this.options.className},set:function(e){this.options.className=e}},{key:"imageSmoothingEnabled",get:function(){return this._imageSmoothing},set:function(e){this._imageSmoothing=e}},{key:"getLayerGroup",value:function(){return this.layerGroup}},{key:"setLayerGroup",value:function(e){if(void 0!==this.layerGroup&&void 0!==this.layer&&("remove"in this.layerGroup.getLayers()?this.layerGroup.getLayers().remove(this.layer):this.layerGroup.removeLayer(this.layer)),void 0===e&&(this.layer=void 0),this.layerGroup=e,void 0!==this.layerGroup)if("addLayer"in this.layerGroup){var t=this.getLLLayer();this.getVisible()&&this.layerGroup.addLayer(t)}else this.layerGroup.getLayers().push(this.getOLLayer());return this.setReloadTime(this.getReloadTime()),this}},{key:"getOLLayer",value:function(){return void 0!==this.layer||(this.layer=this._makeOLLayer()),this.layer}},{key:"makeOLLayer",value:function(){return new(Qe())({className:this.className})}},{key:"_makeOLLayer",value:function(){var e=this,t=this.makeOLLayer();if(t.setVisible(this.visible),t.setZIndex(this.zIndex),t.setOpacity(this.opacity),"events"in this.options.ol&&void 0!==this.options.ol.events&&["prerender","postrender"].forEach((function(n){n in e.options.ol.events&&void 0!==e.options.ol.events[n]&&t.on(n,(function(i){e.options.ol.events[n].call(e,i,t)}))})),!this._imageSmoothing){var n=t.getSource();null!==n&&"contextOptions_"in n&&(n.contextOptions_={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1})}return t}},{key:"getLLLayer",value:function(){return void 0!==this.layer||(this.layer=this._makeLLLayer()),this.layer}},{key:"makeLLLayer",value:function(){return L.Layer()}},{key:"preload",value:function(){}},{key:"_makeLLLayer",value:function(){return this.makeLLLayer()}},{key:"_reload",value:function(){if(void 0!==this.reloadTimerId&&(clearTimeout(this.reloadTimerId),this.reloadTimerId=void 0),void 0!==this.options.reloadTime&&void 0!==this.layerGroup){var e=function(){if(this.reloadTimerId=void 0,void 0!==this.layerGroup){var t=this._makeOLLayer();if("getUrl"in t.getSource()){var n=this.layerGroup,i=t.getSource().on("change",function(){"ready"!=t.getSource().getState()&&"error"!=t.getSource().getState()||((0,et.unByKey)(i),"ready"==t.getSource().getState()&&void 0!==this.layerGroup?(t.setVisible(this.layer.getVisible()),t.setOpacity(this.layer.getOpacity()),t.setZIndex(this.layer.getZIndex()),this.layerGroup.getLayers().remove(this.layer),this.layer=t):void 0!==this.layerGroup?this.layerGroup.getLayers().remove(t):n.getLayers().remove(t),void 0===this.reloadTimerId&&void 0!==this.options.reloadTime&&void 0!==this.layerGroup&&(this.reloadTimerId=setTimeout(e,1e3*this.options.reloadTime)))}.bind(this));this.layerGroup.getLayers().push(t),t.setVisible(!0)}else this.layerGroup.getLayers().push(t),t.setVisible(!0),setTimeout(function(){this.layer=t,void 0===this.reloadTimerId&&void 0!==this.options.reloadTime&&(this.reloadTimerId=setTimeout(e,1e3*this.options.reloadTime))}.bind(this),1e3)}}.bind(this);return this.reloadTimerId=setTimeout(e,1e3*this.options.reloadTime),this}}},{key:"_normalizeOLOptions",value:function(e){var t=e.source,n=void 0===t?{}:t,i=e.events,o=void 0===i?void 0:i,r=e.style,a=void 0===r?void 0:r;this.options.ol={source:n,events:o,style:a}}}])&&nt(t.prototype,n),e}();B(it.prototype);const ot=it;function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function st(e,t,n){return(st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ct(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ct(i);if(o){var n=ct(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ut(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this)).times=[],e}return t=a,(n=[{key:"getResources",value:function(){return this.times.map((function(e){return this.items[e.valueOf()]}),this)}},{key:"getTimes",value:function(){return this.times}},{key:"getItemById",value:function(e){var t=st(ct(a.prototype),"getItemById",this).call(this,e);return void 0===t?new ot:t}},{key:"getResourceByTime",value:function(e){return this.getItemById(isNaN(e)?"":e.valueOf())}},{key:"containsTime",value:function(e){return this.getIndexById(isNaN(e)?"":e.valueOf())>-1}},{key:"getIndexByTime",value:function(e){var t=-1;return isNaN(e)||this.times.forEach((function(n,i){n.valueOf()==e.valueOf()&&(t=i)})),t}},{key:"getNewestResource",value:function(){return this.times.length<1?new ot:this.getResourceByTime(this.times[this.times.length-1])}},{key:"append",value:function(e){return this._append(e),this._sortTimes(),this}},{key:"remove",value:function(e){return this._remove(isNaN(e)?"":e.valueOf()),this._sortTimes(),this}},{key:"setResources",value:function(e){return e.forEach((function(e){this._append(e)}),this),this._filterTimesByResources(e),this._sortTimes(),this}},{key:"_append",value:function(e){var t=e.getDatetime(),n=void 0===t?"":t.valueOf();this.containsId(n)?(this.trigger("replace:item",e,this.getItemById(n)),this.items[n]=e):(this.itemIds.push(n),this.items[n]=e,void 0===t||isNaN(t)||this.times.push(t),this.trigger("add:item",e))}},{key:"_remove",value:function(e){var t=this.getIndexById(e);if(t>-1){var n=this.items[e];if(delete this.items[e],this.itemIds.splice(t,1),void 0!==e&&""!==e&&!isNaN(e)){var i=this.times.findIndex((function(t){return t.valueOf()==e}));i>-1&&this.times.splice(i,1)}this.trigger("remove:item",n)}}},{key:"_filterTimesByResources",value:function(e){var t=!1;this.times=this.times.filter((function(n){var i=!1;return e.findIndex((function(e){var i=!1,o=e.getDatetime();return void 0!==o&&n.valueOf()==o.valueOf()?i=!0:void 0===o&&(t=!0),i}),this)<0&&(this.remove(n.valueOf()),i=!0),!i}),this),t&&this.remove("")}},{key:"_sortTimes",value:function(){this.times.sort((function(e,t){return e.valueOf()-t.valueOf()}))}}])&&at(t.prototype,n),a}($e);function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,i=void 0===n?void 0:n,o=t.visible,r=void 0===o||o,a=t.zIndex,s=void 0===a?void 0:a,l=t.displayMethod,u=void 0===l?"floor":l,c=t.displayMaxResourceAge,f=void 0===c?10800:c,d=t.displayFadeStart,h=void 0===d?900:d,p=t.displayFadeStartOpacity,v=void 0===p?.95:p,y=t.resources,m=void 0===y?void 0:y,b=t.className,g=void 0===b?void 0:b,w=t.imageSmoothingEnabled,_=void 0===w?void 0:w,O=t.tooltip,S=void 0===O?void 0:O,T=t.preload,k=void 0===T?{}:T;dt(this,e),this.options={id:i,visible:r,zIndex:s,displayMethod:u,displayMaxResourceAge:f,displayFadeStart:h,displayFadeStartOpacity:v,resources:m,className:g,imageSmoothingEnabled:_,tooltip:S},this.layerGroup=void 0,this.collection=new ft,this.displayedResourceTime=new Date("invalid"),this.collection.on("add:item",(function(e){e.className=this.className,this._addOLLayer(e),this._preload.enabled&&e.preload()}),this),this.collection.on("remove:item",(function(e){this._removeOLLayer(e)}),this),this.collection.on("replace:item",(function(e,t){e!==t&&(e.className=this.className,this._replaceOLLayer(e,t),this._preload.enabled&&e.preload())}),this),this._preload=k,void 0!==this.options.resources&&this.collection.setResources(this.options.resources),delete this.options.resources}var t,n;return t=e,(n=[{key:"getId",value:function(){return this.options.id}},{key:"setId",value:function(e){return this.options.id=e,this}},{key:"getVisible",value:function(){return this.options.visible}},{key:"setVisible",value:function(e){return(this.options.visible?!e:e)&&(this.options.visible=!!e,void 0!==this.layerGroup&&this.layerGroup.setVisible(this.options.visible),this.getResourceCollection().getItems().forEach((function(e){isNaN(e.getDatetime())&&e.setVisible(this.options.visible),e.setLayerGroup(this.options.visible?this.layerGroup:void 0)}),this),this.trigger("change:visible")),this}},{key:"getZIndex",value:function(){return this.options.zIndex}},{key:"setZIndex",value:function(e){return this.options.zIndex=e,void 0!==this.layerGroup&&this.layerGroup.setZIndex(e),this.getResourceCollection().getItems().forEach((function(t){t.setZIndex(e)})),this}},{key:"className",get:function(){return this.options.className},set:function(e){this.options.className=e}},{key:"getLayerGroup",value:function(){return void 0===this.layerGroup?new(We()):this.layerGroup}},{key:"setLayerGroup",value:function(e){return this.layerGroup=e,void 0!==this.layerGroup&&("setVisible"in this.layerGroup&&this.layerGroup.setVisible(this.options.visible),this.layerGroup.setZIndex(this.options.zIndex)),this.getResourceCollection().getItems().forEach((function(t){t.setLayerGroup(this.options.visible?e:void 0)}),this),this}},{key:"getResourceCollection",value:function(){return this.collection}},{key:"appendResource",value:function(e){return this.collection.append(e),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"removeResource",value:function(e){return this._hideVisibleResource(),this.collection.remove(e.getDatetime()),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"setResources",value:function(e){return this._hideVisibleResource(),this.collection.setResources(e),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"getDisplayedResource",value:function(){return this.getVisible()&&void 0!==this.layerGroup?isNaN(this.displayedResourceTime)&&this.collection.getTimes().length>0?new ot:this.collection.getResourceByTime(this.displayedResourceTime):new ot}},{key:"setDisplayTime",value:function(e){if(!this.getVisible())return this;var t=this._getResourceTimeByDisplayTime(e);if((void 0===t||void 0!==t&&!isNaN(this.displayedResourceTime)&&this.displayedResourceTime.valueOf()!=t.valueOf())&&this._hideVisibleResource(),void 0!==t){this.displayedResourceTime=t;var n=this.getResourceCollection().getItemById(t.valueOf());if(n.getId()){n.setVisible(!0);var i=1;Math.abs(e.valueOf()-t.valueOf())>1e3*this.options.displayMaxResourceAge?i=0:Math.abs(e.valueOf()-t.valueOf())>1e3*this.options.displayFadeStart&&(i=this.options.displayFadeStartOpacity*(Math.abs(e.valueOf()-t.valueOf())-1e3*this.options.displayMaxResourceAge)/(1e3*(this.options.displayFadeStart-this.options.displayMaxResourceAge))),n.setOpacity(i)}}else this.displayedResourceTime=new Date("invalid");return this}},{key:"getTooltip",value:function(){return this.options.tooltip}},{key:"setTooltip",value:function(e){return this.options.tooltip=e,this}},{key:"setResourcesOLStyle",value:function(){var e=arguments;return this.getResourceCollection().getItems().forEach((function(t){"setOLStyle"in t&&t.setOLStyle.apply(t,e)})),this}},{key:"_hideVisibleResource",value:function(){isNaN(this.displayedResourceTime)||this.getResourceCollection().getItemById(this.displayedResourceTime.valueOf()).setVisible(!1)}},{key:"_addOLLayer",value:function(e){isNaN(e.getDatetime())&&e.setVisible(this.getVisible()),void 0!==this.options.imageSmoothingEnabled&&void 0===e.imageSmoothingEnabled&&(e.imageSmoothingEnabled=this.options.imageSmoothingEnabled),e.setLayerGroup(this.getLayerGroup()),e.setZIndex(this.options.zIndex)}},{key:"_removeOLLayer",value:function(e){e.setLayerGroup(void 0)}},{key:"_replaceOLLayer",value:function(e,t){this._removeOLLayer(t),this._addOLLayer(e)}},{key:"_getResourceTimeByDisplayTime",value:function(e){if(!isNaN(e)){var t=void 0;return this.collection.getTimes().forEach((function(n){switch(this.options.displayMethod){case"exact":e.valueOf()==n.valueOf()&&(t=n);break;case"nearest":(void 0===t||Math.abs(e.valueOf()-n.valueOf())<Math.abs(e.valueOf()-t.valueOf()))&&(t=n);break;case"floor":default:(void 0===t||n.valueOf()<=e.valueOf()&&e.valueOf()-n.valueOf()<e.valueOf()-t.valueOf())&&(t=n)}}),this),t}}}])&&ht(t.prototype,n),e}();B(pt.prototype);const vt=pt;function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bt(e,t,n){return(bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_t(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_t(i);if(o){var n=_t(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return wt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this)).options=$().extend(!0,{exclusiveVisibility:!1,syncVisibility:!1},e),t}return t=a,(n=[{key:"getItemById",value:function(e){return void 0===bt(_t(a.prototype),"getItemById",this).call(this,e)?new vt:this.items[e]}},{key:"append",value:function(e){var t=this;return this.options.exclusiveVisibility&&e.getVisible()&&this.isVisible()?e.setVisible(!1):t.options.syncVisibility&&(e.getVisible()?this.isVisible()||this.getItems().forEach((function(e){e.setVisible(!0)}),this):this.isVisible()&&e.setVisible(!0)),e.on("change:visible",(function(){t.options.exclusiveVisibility?this.getVisible()&&t.getItems().forEach((function(e){e.getId()!=this.getId()&&e.setVisible(!1)}),this):t.options.syncVisibility&&t.getItems().forEach((function(e){e.getId()!=this.getId()&&e.setVisible(this.getVisible())}),this)})),bt(_t(a.prototype),"append",this).call(this,e)}},{key:"getVisibleTypes",value:function(){return this.getItems().filter((function(e){return e.getVisible()}))}},{key:"isVisible",value:function(){return this.getVisibleTypes().length>0}},{key:"setExclusiveVisibility",value:function(e){if(this.options.exclusiveVisibility!=e&&e){var t=!1;this.getItems().forEach((function(e){t?e.setVisible(!1):t=e.getVisible()}),this)}return this.options.exclusiveVisibility=e,this}},{key:"setSyncVisibility",value:function(e){return this.options.syncVisibility!=e&&e&&this.isVisible()&&this.getItems().forEach((function(e){e.setVisible(!0)}),this),this.options.syncVisibility=e,this}}])&&mt(t.prototype,n),a}($e),St=function e(t){var n=this,i=t.map,o=t.typeCollection,r=t.tooltip;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tooltipFeature=void 0,this.tooltipPixelColor=void 0,this.map=i,this.typeCollection=o,this.tooltip=r,Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.tooltip),"tooltipNode")&&void 0===this.tooltip.tooltipNode&&(this.tooltip.tooltipNode=$()("<div>").css("position","absolute").prependTo(this.map.getMap().getTargetElement())),this.tooltip.on("hide:tooltip",(function(){n.tooltipFeature=void 0,n.tooltipPixelColor=void 0})),this.map.on("move:pointer",(function(e){if(!e.dragging)if((e=n.map.getExtendedEventByTypeCollection(e,n.typeCollection)).feature||e.color){if(e.feature===n.tooltipFeature&&(void 0===e.color&&void 0===n.tooltipPixelColor||void 0!==e.color&&void 0!==n.tooltipPixelColor&&e.color.join(",")===n.tooltipPixelColor.join(",")))return void n.tooltip.show({posX:e.pixel[0],posY:e.pixel[1]});n.tooltipFeature=void 0,n.tooltipPixelColor=void 0;var t=e.synviewType.getTooltip().call(void 0,e);void 0!==t?(n.tooltipFeature=e.feature,n.tooltipPixelColor=e.color,n.tooltip.content=t,n.tooltip.hide().show({posX:e.pixel[0],posY:e.pixel[1]})):n.tooltip.hide()}else n.tooltip.hide()}))};function Tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var kt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=$().extend(!0,{map:void 0,timeline:void 0,tooltip:void 0},t),void 0===this.options.map&&(this.options.map=new He),void 0===this.options.timeline&&(this.options.timeline=new z),this.typeCollection=new Ot,this.tooltip=void 0,this.options.timeline.on("change:time",(function(){this.getTypeCollection().getItems().map((function(e){e.setDisplayTime(this.options.timeline.getSelectedTime())}),this)}),this);var n=this.options.timeline,i=function(){var e=n.isLastEnabledTime();this.getVisible()?n.setTimesBySetID(this.getId(),this.getResourceCollection().getTimes()):n.setTimesBySetID(this.getId(),[]),e?n.last():isNaN(n.getSelectedTime())&&n.first()},o=function(e){e.setLayerGroup(this.options.map.makeLayerGroup()),i.call(e),e.setDisplayTime(this.getTimeline().getSelectedTime()),e.on("change:resources",i),e.on("change:visible",i),void 0!==e.getTooltip()&&void 0===this.tooltip&&(this.tooltip=new St({map:this.options.map,typeCollection:this.typeCollection,tooltip:this.options.tooltip}))},r=function(e){this.getTimeline().deleteSetID(e.getId())};this.typeCollection.on("add:item",o,this),this.typeCollection.on("remove:item",r,this),this.typeCollection.on("replace:item",(function(e,t){o.call(this,e),r.call(this,t)}),this)}var t,n;return t=e,(n=[{key:"getTimeline",value:function(){return this.options.timeline}},{key:"getMap",value:function(){return this.options.map}},{key:"getTypeCollection",value:function(){return this.typeCollection}},{key:"appendType",value:function(e){if(void 0===e.getId()){var t,n=0;do{t="synview-type-"+n++}while(this.getTypeCollection().containsId(t));e.setId(t)}return this.getTypeCollection().append(e),this}},{key:"getTooltip",value:function(){return this.options.tooltip}}])&&Tt(t.prototype,n),e}();const Pt=ol.proj;function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ct(e,t,n){return(Ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dt(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e,t){return!t||"object"!==xt(t)&&"function"!=typeof t?It(e):t}function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var At="EPSG:4326";const Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dt(i);if(o){var n=Dt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),void 0===(t=r.call(this,e)).options.layerGroup&&(t.options.layerGroup=new(We()),t.options.map.addLayer(t.options.layerGroup)),t.options.map.getView().on("change:center",function(){this.trigger("change:view",this)}.bind(It(t))),t.options.map.getView().on("change:resolution",function(){this.trigger("change:view",this)}.bind(It(t))),t.options.map.on("pointermove",function(e){this.trigger("move:pointer",e)}.bind(It(t))),t.options.map.on("click",function(e){this.trigger("click:pointer",e)}.bind(It(t))),t.options.map.on("singleclick",function(e){this.trigger("singleclick:pointer",e)}.bind(It(t))),t.options.map.on("dblclick",function(e){this.trigger("dblclick:pointer",e)}.bind(It(t))),t.options.map.on("pointerdrag",function(e){this.trigger("drag:pointer",e)}.bind(It(t))),t}return t=a,(n=[{key:"getViewCenter",value:function(){return(0,Pt.transform)(this.options.map.getView().getCenter(),this.options.map.getView().getProjection(),At)}},{key:"setViewCenter",value:function(e){var t=!0;return e=e.map((function(e){return isNaN(e)?void(t=!1):1*e})),t&&this.options.map.getView().setCenter((0,Pt.fromLonLat)(e)),this}},{key:"getViewZoom",value:function(){return this.options.map.getView().getZoom()}},{key:"setViewZoom",value:function(e){return isNaN(e)||this.options.map.getView().setZoom(1*e),this}},{key:"makeLayerGroup",value:function(){var e=new(We());return this.options.layerGroup.getLayers().push(e),e}},{key:"getExtendedEventByTypeCollection",value:function(e,t){e=Ct(Dt(a.prototype),"getExtendedEventByTypeCollection",this).call(this,e,t);var n=new Map;t.getVisibleTypes().filter((function(e){return void 0!==e.getTooltip()})).map((function(e){return n.set(e,[])}));var i,o=new Set,r=new Set,s=Rt(n.keys());try{var l=function(){var e=i.value;e.getLayerGroup().getLayers().getArray().filter((function(e){return e.getVisible()})).forEach((function(t){n.get(e).push(t),o.add(t),r.add(t.getClassName())}))};for(s.s();!(i=s.n()).done;)l()}catch(e){s.e(e)}finally{s.f()}return this.options.map.forEachFeatureAtPixel(e.pixel,(function(t,i){var o,r=Rt(n.keys());try{var a=function(){var r=o.value;if(n.get(r).forEach((function(n){void 0===e.synviewType&&n===i&&(e.feature=t,e.layer=i,e.synviewType=r)})),void 0!==e.synviewType)return"break"};for(r.s();!(o=r.n()).done&&"break"!==a(););}catch(e){r.e(e)}finally{r.f()}return void 0!==e.synviewType}),{hitTolerance:5,layerFilter:function(e){return o.has(e)}}),void 0===e.feature&&this.options.map.forEachLayerAtPixel(e.pixel,(function(t,i){if(null==i||i.length<1)return!1;var o,r=Rt(n.keys());try{var a=function(){var r=o.value;if(n.get(r).forEach((function(n){void 0===e.synviewType&&n.getClassName()==t.getClassName()&&(e.color=i,e.layer=t,e.synviewType=r)})),void 0!==e.synviewType)return"break"};for(r.s();!(o=r.n()).done&&"break"!==a(););}catch(e){r.e(e)}finally{r.f()}return void 0!==e.synviewType}),{hitTolerance:5,layerFilter:function(e){return r.has(e.getClassName())}}),e}},{key:"findLayerInType",value:function(e,t){return t.getLayerGroup().getLayers().getArray().findIndex((function(t){return t==e}))>-1}}])&&Et(t.prototype,n),a}(He);function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ft(i);if(o){var n=Ft(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Yt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),void 0===(t=r.call(this,e)).options.layerGroup&&(t.options.layerGroup=L.layerGroup().addTo(t.options.map)),t}return t=a,(n=[{key:"makeLayerGroup",value:function(){return L.layerGroup().addTo(this.options.layerGroup)}}])&&Vt(t.prototype,n),a}(He),zt=ol.format.GeoJSON;var qt=n.n(zt);const Ht=ol.source.Vector;var Kt=n.n(Ht);function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const en=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qt(i);if(o){var n=Qt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jt(this,e)});function a(){return $t(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getId",value:function(){var e=this.getDatetime();return isNaN(e)?"":e.toISOString()}},{key:"makeOLLayer",value:function(){var e={source:this.options.ol.source,events:this.options.ol.events,style:this.options.ol.style};if(this.options.ol,!("refresh"in e.source)){var t=e.source;void 0!==this.options.url&&"format"in t&&void 0!==t.format&&(t.url=this.options.url),"projection"in t&&void 0!==t.projection||(t.projection=At),e.source=new(Kt())(t)}return"function"==typeof e.style&&(e.style=e.style.bind(this)),this.className&&(e.className=this.className),new(Qe())(e)}},{key:"setOLStyle",value:function(e){return void 0===this.layer&&this.getOLLayer(),void 0!==this.layer&&"setStyle"in this.layer?(0==arguments.length?this.layer.setStyle(this.layer.getStyle()):this.layer.setStyle(e),this):this}}])&&Zt(t.prototype,n),a}(ot);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=rn(t);if(n){var o=rn(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return on(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).options.ol.source.url=t.options.url,t.options.ol.source.format=new(qt()),t}return o}(en),sn=ol.source.VectorTile;var ln=n.n(sn);const un=ol.layer.VectorTile;var cn=n.n(un);function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vn(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yn(i);if(o){var n=yn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return vn(this,e)});function a(){return dn(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"makeOLLayer",value:function(){var e={source:this.options.ol.source,events:this.options.ol.events,style:this.options.ol.style};if(!("refresh"in e.source)){var t=e.source;!("tileUrlFunction"in t)&&void 0!==this.options.url&&"format"in t&&void 0!==t.format&&(t.url=this.options.url),"projection"in t&&void 0!==t.projection||(t.projection=At),e.source=new(ln())(t)}return"function"==typeof e.style&&(e.style=e.style.bind(this)),this.className&&(e.className=this.className),new(cn())(e)}}])&&hn(t.prototype,n),a}(en);function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e,t){return!t||"object"!==bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=_n(t);if(n){var o=_n(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return wn(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).options.ol.source.format=new(qt()),t}return o}(mn),Sn=ol.source.ImageStatic;var Tn=n.n(Sn);const kn=ol.layer.Image;var Pn=n.n(kn);function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(e,t){return!t||"object"!==xn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Bn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nn(i);if(o){var n=Nn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Cn(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,i=void 0===n?void 0:n,o=t.datetime,s=void 0===o?void 0:o,l=t.mimetype,u=void 0===l?void 0:l,c=t.reloadTime,f=void 0===c?void 0:c,d=t.className,h=void 0===d?void 0:d,p=t.extent,v=t.ol,y=void 0===v?{}:v;return Rn(this,a),(e=r.call(this,{url:i,datetime:s,mimetype:u,reloadTime:f,className:h,ol:y})).options.extent=p,e}return t=a,(n=[{key:"makeOLLayer",value:function(){var e=this.options.ol.source;return e.url=this.options.url,e.imageExtent=(0,Pt.transformExtent)(this.options.extent,At,"EPSG:3857"),new(Pn())({source:new(Tn())(e),className:this.className})}},{key:"makeLLLayer",value:function(){return L.imageOverlay(this.options.url,[[this.options.extent[1],this.options.extent[0]],[this.options.extent[3],this.options.extent[2]]])}},{key:"preload",value:function(){this.getOLLayer().getSource().image_.load()}}])&&jn(t.prototype,n),a}(ot),In=ol.source.OSM;var Dn=n.n(In);const An=ol.layer.Tile;var Ln=n.n(An);function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fn(e,t){return!t||"object"!==Mn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xn(i);if(o){var n=Xn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Fn(this,e)});function a(){return Vn(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"makeOLLayer",value:function(){var e=this.options.ol.source;return e.url=this.options.url,new(Ln())({source:new(Dn())(e)})}}])&&Gn(t.prototype,n),a}(ot);function qn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Hn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isShown=!1,this._content=void 0}var t,n;return t=e,(n=[{key:"isShown",get:function(){return this._isShown}},{key:"content",get:function(){return this._content},set:function(e){var t=this._content;this._content=e,t!==this._content&&this.onContentChange()}},{key:"show",value:function(){var e=!this.isShown;return this._isShown=!0,e&&this.trigger("show:tooltip"),this}},{key:"hide",value:function(){var e=this.isShown;return this._isShown=!1,e&&this.trigger("hide:tooltip"),this}},{key:"update",value:function(){return this}},{key:"onContentChange",value:function(){}}])&&qn(t.prototype,n),e}();B(Hn.prototype);const Kn=bootstrap;function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wn(e,t,n){return(Wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ei(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ei(e){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ei(i);if(o){var n=ei(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qn(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.tooltipNode,i=void 0===n?void 0:n,o=t.bootstrapOptions,s=void 0===o?void 0:o,l=t.closeOnMouseMove,u=void 0===l||l,c=t.closeOnMouseEnter,f=void 0!==c&&c;return $n(this,a),(e=r.call(this)).bootstrapOptions=s||{},e._initBootstrapOptions(s),e.closeOnMouseMove=u,e.closeOnMouseEnter=f,e._tooltipNode=void 0,e.tooltipNode=i,e._bsTooltip=void 0,e}return t=a,(n=[{key:"tooltipNode",get:function(){return this._tooltipNode},set:function(e){if(void 0===e)return this._tooltipNode=e,void(this._bsTooltip=void 0);this._tooltipNode=$()(e),this._initTooltipNode()}},{key:"show",value:function(e){var t=e.posX,n=e.posY;if(void 0!==this._tooltipNode&&void 0!==this._bsTooltip)return this.tooltipNode.css({left:"".concat(t,"px"),top:"".concat(n,"px")}),this.isShown?this._bsTooltip.update():this._bsTooltip.show(),Wn(ei(a.prototype),"show",this).call(this)}},{key:"hide",value:function(){if(void 0!==this._tooltipNode&&void 0!==this._bsTooltip)return this.isShown&&(this.tooltipNode.attr("data-original-title",void 0),this._bsTooltip.hide()),Wn(ei(a.prototype),"hide",this).call(this)}},{key:"update",value:function(){if(void 0!==this._bsTooltip)return this._bsTooltip.update(),Wn(ei(a.prototype),"update",this).call(this)}},{key:"onContentChange",value:function(){this.tooltipNode.attr("data-bs-original-title",ni(this.content)?this.content:"-"),this._updateNonStringContent(),this.update()}},{key:"_initBootstrapOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trigger,n=void 0===t?"manual":t;this.bootstrapOptions.trigger=n}},{key:"_initTooltipNode",value:function(){var e=this;void 0!==this._bsTooltip&&this._bsTooltip.dispose(),this._bsTooltip=new Kn.Tooltip(this._tooltipNode[0],this.bootstrapOptions),this.tooltipNode[0].addEventListener("inserted.bs.tooltip",(function(){var t=e._updateNonStringContent();t.length&&(e.closeOnMouseMove&&t.children(".tooltip-inner").mousemove((function(){return e.hide()})),e.closeOnMouseEnter&&t.children(".tooltip-inner").mouseenter((function(){return e.hide()})))}))}},{key:"_updateNonStringContent",value:function(){var e=$()(document.getElementById(this.tooltipNode.attr("aria-describedby")));if(e.length)return void 0===this.content||ni(this.content)||e.children(".tooltip-inner").empty().append(this.content),e}}])&&Zn(t.prototype,n),a}(Hn);var ni=function(e){return"[object String]"==Object.prototype.toString.call(e)};function ii(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const ri=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id;ii(this,e),this._id=n}var t,n;return t=e,(n=[{key:"id",get:function(){return this._id},set:function(e){this._id=e,this.setId(e)}},{key:"setId",value:function(){}}])&&oi(t.prototype,n),e}();function ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?si(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ui(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ci=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fireReplace,i=void 0===n||n,o=t.fireAddRemoveOnReplace,r=void 0!==o&&o,a=t.appendOnReplace,s=void 0===a||a,l=t.sortFunction,u=t.emptyObjectMaker;li(this,e),this.options={fireReplace:i,fireAddRemoveOnReplace:r,appendOnReplace:s,sortFunction:l,emptyObjectMaker:u},this._itemIds=[],this._items={}}var t,n;return t=e,(n=[{key:"count",get:function(){return this._itemIds.length}},{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e._itemIds.length?{value:e._items[e._itemIds[t++]]}:{done:!0}}}}},{key:"items",get:function(){var e=this;return this._itemIds.map((function(t){return e._items[t]}))}},{key:"itemIds",get:function(){return this._itemIds}},{key:"sortFunction",get:function(){return this.options.sortFunction}},{key:"sortFunction",set:function(e){this.options.sortFunction=e,this._sort()}},{key:"getItemById",value:function(e){return e in this._items?this._items[e]:void 0===this.options.emptyObjectMaker?new ri:this.options.emptyObjectMaker.call(this)}},{key:"contains",value:function(e){var t=this.containsId(e.id);return t&&(t=e===this.getItemById(e.id)),t}},{key:"containsId",value:function(e){return e in this._items}},{key:"append",value:function(){for(var e=this,t=[],n=[],i=[],o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return r.forEach((function(o){var r=o.id;if(e.containsId(r)){var a=e.getItemById(r);e.options.appendOnReplace&&(e._itemIds.splice(e._itemIds.indexOf(r),1),e._itemIds.push(r)),a!==o&&(e._items[r]=o,e.options.fireReplace&&i.push([o,a]),e.options.fireAddRemoveOnReplace&&(n.push(a),t.push(o)))}else e._itemIds.push(r),e._items[r]=o,t.push(o)})),this._sort(),t.forEach((function(t){return e.trigger("add:item",t)})),n.forEach((function(t){return e.trigger("remove:item",t)})),i.forEach((function(t){var n=ai(t,2),i=n[0],o=n[1];return e.trigger("replace:item",i,o)})),this}},{key:"remove",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){var n=e._itemIds.indexOf(t.id);if(n>-1){var i=e._items[t.id];delete e._items[t.id],e._itemIds.splice(n,1),e.trigger("remove:item",i)}})),this}},{key:"removeById",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){var n=e._itemIds.indexOf(t);if(n>-1){var i=e._items[t];delete e._items[t],e._itemIds.splice(n,1),e.trigger("remove:item",i)}})),this}},{key:"_sort",value:function(){var e=this;void 0!==this.options.sortFunction&&this._itemIds.sort((function(t,n){return e.options.sortFunction(e._items[t],e._items[n])}))}}])&&ui(t.prototype,n),e}();B(ci.prototype);const fi=ci;function di(e){return function(e){if(Array.isArray(e))return vi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pi(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function pi(e,t){if(e){if("string"==typeof e)return vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vi(e,t):void 0}}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function yi(e){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gi(e,t,n){return(gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Si(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wi(e,t){return(wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _i(e,t){return!t||"object"!==yi(t)&&"function"!=typeof t?Oi(e):t}function Oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Si(e){return(Si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wi(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Si(i);if(o){var n=Si(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _i(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.resources,i=t.containersNode,o=t.timeline,s=void 0===o?void 0:o,l=t.makeContainerNode,u=void 0===l?void 0:l,c=t.firstTimeOnInit,f=void 0===c||c,d=t.lastTimeOnInit,h=void 0!==d&&d;mi(this,a),(e=r.call(this,{fireReplace:!1,fireAddRemoveOnReplace:!0}))._resources=n,e._containersNode="object"==yi(i)&&i.jquery?i[0]:i,e._timeline=void 0===s?new z:s,e._makeContainerNode=u;var p=new Map;return e.on("add:item",(function(t){t.modelviewer=Oi(e),t.containerNode=e._getContainerNode(t),isNaN(e.timeline.getSelectedTime().valueOf())&&(f||h)&&p.set(t,t.on("change:selectedVariables",(function(){if(isNaN(e._timeline.getSelectedTime().valueOf())&&(f?e._timeline.first():h&&e._timeline.last(),!isNaN(e._timeline.getSelectedTime().valueOf()))){var t,n=hi(p.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value;i.un("change:selectedVariables",p.get(i)),p.delete(i)}}catch(e){n.e(e)}finally{n.f()}}})))})),e.on("remove:item",(function(t){void 0!==t.containerNode&&null!=t.containerNode.parentNode&&t.containerNode.parentNode.removeChild(t.containerNode),t.modelviewer=void 0,t.containerNode=void 0,p.has(t)&&(t.un("change:selectedVariables",p.get(t)),p.delete(t)),e.timeline.deleteSetID(t.id)})),e}return t=a,(n=[{key:"resources",get:function(){return this._resources}},{key:"containersNode",get:function(){return this._containersNode}},{key:"timeline",get:function(){return this._timeline}},{key:"append",value:function(){for(var e,t=di(this.itemIds),n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.filter((function(e){return void 0!==e.id})).forEach((function(e){return t.push(e.id)})),i.filter((function(e){return void 0===e.id})).forEach((function(e){for(var n=1,i="container".concat(n);t.indexOf(i)>-1;)n++,i="container".concat(n);e.id=i,t.push(i)})),(e=gi(Si(a.prototype),"append",this)).call.apply(e,[this].concat(i)),this}},{key:"_getContainerNode",value:function(e){if(void 0!==this._makeContainerNode){var t=this._makeContainerNode.call(this,this.containersNode,e);return"object"==yi(t)&&t.jquery?t[0]:t}var n=void 0!==e.containerNode?e.containerNode:document.createElement("div");return void 0!==this.containersNode&&this.containersNode.appendChild(n),n}}])&&bi(t.prototype,n),a}(fi);function ki(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const xi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,i=void 0===n?void 0:n,o=t.names,r=void 0===o?{}:o,a=t.langSortation,s=void 0===a?[]:a;ki(this,e),this._name=i,this._names=r,this._langSortation=s}var t,n;return t=e,(n=[{key:"name",get:function(){return this.getDefaultName()},set:function(e){this._name=e}},{key:"getNameByLangNoFallback",value:function(e){return e in this._names?this._names[e]:""}},{key:"setNameByLang",value:function(e,t){this._names[e]=t,void 0===t&&delete this._names[e]}},{key:"langSortation",get:function(){return this._langSortation},set:function(e){this._langSortation=e}},{key:"getDefaultName",value:function(){return void 0!==this._name?this._name:this.getNameByLang()}},{key:"getNameByLang",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.langSortation,i=void 0===n?void 0:n,o=void 0===i?this._langSortation:i,r=Object.keys(this._names);return r.length<1?void 0===this._name?"":this._name:this._names[r.sort((function(t,n){if(t==e)return-1;if(n==e)return 1;var i=o.indexOf(t),r=o.indexOf(n);return r<0?0:i<0?1:i<r?-1:i==r?0:1}))[0]]}}])&&Pi(t.prototype,n),e}();function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ei(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ci(e,t){return(Ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ni(e,t){return!t||"object"!==Ri(t)&&"function"!=typeof t?Bi(e):t}function Bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Di=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ci(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ii(i);if(o){var n=Ii(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ni(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,i=t.name,o=void 0===i?void 0:i,s=t.names,l=void 0===s?{}:s,u=t.langSortation,c=void 0===u?[]:u;return ji(this,a),e=r.call(this,{name:o,names:l,langSortation:c}),Object.defineProperty(Bi(e),"id",Object.getOwnPropertyDescriptor(ri.prototype,"id")),e._id=n,e}return t=a,(n=[{key:"setId",value:function(e){ri.prototype.setId.call(this,e)}},{key:"getDefaultName",value:function(){return void 0!==this._name?this._name:Object.keys(this._names).length>0?this.getNameByLang():void 0===this._id?"":this._id}}])&&Ei(t.prototype,n),a}(xi);function Ai(e){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gi(e,t){return!t||"object"!==Ai(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Fi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vi(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yi(i);if(o){var n=Yi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Gi(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,i=t.name,o=void 0===i?void 0:i,s=t.names,l=void 0===s?{}:s,u=t.langSortation,c=void 0===u?[]:u,f=t.variableCollection;return Li(this,a),(e=r.call(this,{id:n,name:o,names:l,langSortation:c}))._variableCollection=f,e}return t=a,(n=[{key:"variableCollection",get:function(){return this._variableCollection},set:function(e){this._variableCollection=e}}])&&Mi(t.prototype,n),a}(Di);function Xi(e){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hi(e,t){return(Hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ki(e,t){return!t||"object"!==Xi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ui(e){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const $i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hi(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ui(i);if(o){var n=Ui(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ki(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,i=t.name,o=void 0===i?void 0:i,s=t.names,l=void 0===s?{}:s,u=t.langSortation,c=void 0===u?[]:u,f=t.datetime,d=void 0===f?void 0:f;return zi(this,a),(e=r.call(this,{id:n,name:o,names:l,langSortation:c}))._datetime=void 0===e.id?void 0:new Date(e.id),void 0!==d&&(e.datetime=d),e}return t=a,(n=[{key:"setId",value:function(e){this._datetime=void 0===e?void 0:new Date(e)}},{key:"datetime",get:function(){return this._datetime},set:function(e){this._datetime=e,this._id=void 0!==e?e.valueOf():void 0}}])&&qi(t.prototype,n),a}(Fi);function Zi(e){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ji(e,t){return(Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qi(e,t){return!t||"object"!==Zi(t)&&"function"!=typeof t?eo(e):t}function eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ro(e,t){return(ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ao(e,t){return!t||"object"!==no(t)&&"function"!=typeof t?so(e):t}function so(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lo(e){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const uo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ro(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lo(i);if(o){var n=lo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ao(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,i=t.fireReplace,o=void 0===i||i,s=t.fireAddRemoveOnReplace,l=void 0!==s&&s,u=t.appendOnReplace,c=void 0===u||u,f=t.sortFunction,d=t.names,h=t.langSortation;return io(this,a),e=r.call(this,{emptyObjectMaker:function(){return new Fi},fireReplace:o,fireAddRemoveOnReplace:l,appendOnReplace:c,sortFunction:f,names:d,langSortation:h}),Object.defineProperty(so(e),"id",Object.getOwnPropertyDescriptor(ri.prototype,"id")),e._id=n,Object.defineProperty(so(e),"getDefaultName",Object.getOwnPropertyDescriptor(Di.prototype,"getDefaultName")),e._node=void 0,e.on("add:item",(function(t){void 0!==t.variableCollection&&t.variableCollection.remove(t),t.variableCollection=so(e),e.trigger("add:variable",t)})),e.on("remove:item",(function(t){return e.trigger("remove:variable",t)})),e}return t=a,(n=[{key:"setId",value:function(e){ri.prototype.setId.call(this,e)}},{key:"variables",get:function(){return this.items}},{key:"getVariableById",value:function(e){return this.getItemById(e)}},{key:"node",get:function(){return this._node},set:function(e){this._node=e}}])&&oo(t.prototype,n),a}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=to(t);if(n){var o=to(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return Qi(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fireReplace,r=void 0===n||n,a=t.fireAddRemoveOnReplace,s=void 0!==a&&a,l=t.appendOnReplace,u=void 0===l||l,c=t.sortFunction,f=t.emptyObjectMaker,d=t.name,h=void 0===d?void 0:d,p=t.names,v=void 0===p?{}:p,y=t.langSortation,m=void 0===y?[]:y;return Wi(this,o),e=i.call(this,{fireReplace:r,fireAddRemoveOnReplace:s,appendOnReplace:u,sortFunction:c,emptyObjectMaker:f}),Object.defineProperty(eo(e),"name",Object.getOwnPropertyDescriptor(xi.prototype,"name")),Object.getPrototypeOf(eo(e)).getDefaultName=xi.prototype.getDefaultName,Object.getPrototypeOf(eo(e)).getNameByLang=xi.prototype.getNameByLang,Object.getPrototypeOf(eo(e)).setNameByLang=xi.prototype.setNameByLang,Object.getPrototypeOf(eo(e)).getNameByLangNoFallback=xi.prototype.getNameByLangNoFallback,e._name=h,e._names=v,e._langSortation=m,e}return o}(fi));function co(e,t){if(e){if("string"==typeof e)return fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fo(e,t):void 0}}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ho(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const po=function(){function e(t){var n=t.node;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._node=n,this._children=new Map,this._parent=void 0}var t,n;return t=e,(n=[{key:"node",get:function(){return this._node}},{key:"variableCollection",get:function(){return this._node.variableCollection}},{key:"children",get:function(){return function(e){if(Array.isArray(e))return fo(e)}(e=this._children.values())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||co(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var e}},{key:"parent",get:function(){return this._parent},set:function(e){this._parent=e}},{key:"getChildByVariable",value:function(e){return this._children.get(e)}},{key:"buildChildrenTreeForResource",value:function(t){var n=t.resource,i=t.aimedNode;if(this.node===i)return this;var o=n.getVariableByVariableCollection(this.variableCollection);if(void 0!==o.id){var r=this._children.get(o);return void 0!==r?r.buildChildrenTreeForResource({resource:n,aimedNode:i}):(this.node.children.forEach((function(t){void 0!==n.getVariableByVariableCollection(t.variableCollection).id&&(r=new e({node:t}))})),void 0!==r?(this._children.set(o,r),r.parent=this,r.buildChildrenTreeForResource({resource:n,aimedNode:i})):void 0)}}},{key:"removeChild",value:function(e){var t,n,i,o=e.child,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=co(e))){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(this._children.entries());try{for(r.s();!(t=r.n()).done;){var a=(n=t.value,i=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(n,i)||co(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0];a[1]===o&&this._children.delete(s)}}catch(e){r.e(e)}finally{r.f()}this._children.size<1&&void 0!==this.parent&&this.parent.removeChild({child:this})}},{key:"findNodeByVariables",value:function(){for(var e=this,t=void 0,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(i.forEach((function(n){n.variableCollection===e.variableCollection&&(t=n)})),void 0!==t){var r=this._children.get(t);if(void 0!==r){var a=r.findNodeByVariables.apply(r,i);return void 0===a?this:a}return this}}}])&&ho(t.prototype,n),e}();function vo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,t)||go(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yo(e){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e){return function(e){if(Array.isArray(e))return wo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||go(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=go(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function go(e,t){if(e){if("string"==typeof e)return wo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wo(e,t):void 0}}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Oo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._variableCollection=t,t.node=this,this._parents=[],this._children=[],this._resourcesTopNode=void 0,this._resources=new Map}var t,n;return t=e,(n=[{key:"variableCollection",get:function(){return this._variableCollection}},{key:"parents",get:function(){return this._parents}},{key:"children",get:function(){return this._children}},{key:"appendChild",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e._children.push(t),t._addParent(e),e.trigger("append:child",t)})),this}},{key:"_addParent",value:function(e){this._parents.push(e)}},{key:"resources",get:function(){var e,t=[],n=bo(this._resources.values());try{for(n.s();!(e=n.n()).done;)mo(e.value.values()).forEach((function(e){return t.push.apply(t,mo(e))}))}catch(e){n.e(e)}finally{n.f()}return t}},{key:"append",value:function(){var e=this;void 0===this._resourcesTopNode&&this._makeResourcesTopNode();for(var t=0,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.forEach((function(n){if(!(n.variables.filter((function(t){return t.variableCollection===e.variableCollection})).length<1)){var i=e._resourcesTopNode.buildChildrenTreeForResource({resource:n,aimedNode:e});if(void 0!==i){var o=n.getVariableByVariableCollection(i.variableCollection);if(void 0!==o){var r=e._resources.get(i);void 0===r&&(r=new Map,e._resources.set(i,r));var a=r.get(o);void 0===a&&(a=new Set,r.set(o,a)),a.has(n)||(a.add(n),t++)}}}})),t}},{key:"remove",value:function(){for(var e=this,t=0,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.forEach((function(n){var i,o=(i=e._resourcesTopNode).findNodeByVariables.apply(i,mo(n.variables));if(void 0!==o){var r=n.getVariableByVariableCollection(o.variableCollection),a=e._resources.get(o);if(void 0!==a){var s=a.get(r);if(void 0!==s&&(s.delete(n),t++,s.size<1&&(a.delete(r),a.size<1))){e._resources.delete(o);var l=o.parent;void 0!==l&&l.removeChild({child:o})}}}})),t}},{key:"getResourcesByVariables",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(void 0===this._resourcesTopNode)return[];var o=!1;if(n.length&&"boolean"==typeof n[0]&&(o=n.shift()),o&&0==n.length)return[];if(o){var r,a=new Set(n),s=(r=this._resourcesTopNode).findNodeByVariables.apply(r,n),l=this._resources.get(s);if(void 0!==l){var u,c=bo(l);try{var f=function(){var e=vo(u.value,2),t=e[0],i=e[1];if(!a.has(t))return"continue";if(void 0===i||i.size<1)return{v:[]};var o=mo(i)[0],r=!0;return n.forEach((function(e){o.getVariableByVariableCollection(e.variableCollection)!==e&&(r=!1)})),{v:r?mo(i):[]}};for(c.s();!(u=c.n()).done;){var d=f();if("continue"!==d&&"object"===yo(d))return d.v}}catch(e){c.e(e)}finally{c.f()}}return[]}var h=function e(t){var i=new Set;if(t.children.length<1)return i.add(t),i;var o=void 0;if(n.forEach((function(e){e.variableCollection===t.variableCollection&&(o=e)})),void 0===o)t.children.forEach((function(t){i=new Set([].concat(mo(i),mo(e(t))))}));else{var r=t.getChildByVariable(o);void 0!==r&&(i=new Set([].concat(mo(i),mo(e(r)))))}return i},p=h(this._resourcesTopNode),v=[];return mo(p).forEach((function(t){var i=e._resources.get(t);if(void 0!==i){var o,r=bo(i);try{var a=function(){var e=vo(o.value,2),i=e[0],r=e[1];if(i.variableCollection!==t.variableCollection)return"continue";if(void 0===r||r.size<1)return{v:void 0};var a=mo(r)[0],s=!0;n.forEach((function(e){a.getVariableByVariableCollection(e.variableCollection)!==e&&(s=!1)})),s&&v.push.apply(v,mo(r))};for(r.s();!(o=r.n()).done;){var s=a();if("continue"!==s&&"object"===yo(s))return s.v}}catch(e){r.e(e)}finally{r.f()}}})),v}},{key:"hasResourcesByVariables",value:function(){return this.getResourcesByVariables.apply(this,arguments).length>0}},{key:"_makeResourcesTopNode",value:function(){var e=new Set;this._resourcesTopNode=new po({node:function t(n){var i=n.parents;if(i.length<1)return n;var o=void 0;return i.forEach((function(n){if(!e.has(n)){e.add(n);var i=t(n);void 0!==i&&(o=i)}})),o}(this)})}}])&&_o(t.prototype,n),e}();B(Oo.prototype);const So=Oo;function To(e){return function(e){if(Array.isArray(e))return ko(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ko(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ko(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Po(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const Ro=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.variables,o=void 0===i?[]:i,r=n.datetime,a=void 0===r?void 0:r,s=n.run,l=void 0===s?void 0:s,u=n.offset,c=void 0===u?void 0:u;Po(this,e),this._variables=new Map,o.forEach((function(e){return t._variables.set(e.variableCollection,e)})),this._datetime=a,this._run=l,this._offset=c,this._updateDatetime()}var t,n;return t=e,(n=[{key:"variables",get:function(){return To(this._variables.values())}},{key:"datetime",get:function(){return this._datetime},set:function(e){this._datetime=e}},{key:"run",get:function(){return this._run},set:function(e){this._run=e,this._updateDatetime()}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset=e,this._updateDatetime()}},{key:"getVariableByVariableCollection",value:function(e){var t=this._variables.get(e);return void 0===t?new Fi:t}},{key:"isDefinedBy",value:function(){for(var e=!1,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.length&&"boolean"==typeof n[0]&&(e=n.shift());var o=new Set(To(this._variables.values()));if(!e)return 0==n.filter((function(e){return!o.has(e)})).length;if(0!=n.filter((function(e){return!o.has(e)})).length)return!1;var r=new Set(n);return 0==To(o).filter((function(e){return!r.has(e)})).length}},{key:"isDefinedByVariableOf",value:function(e){return void 0!==this._variables.get(e)}},{key:"_updateDatetime",value:function(){void 0!==this._run&&void 0!==this._offset&&(this.datetime=new Date(this._run.valueOf()+1e3*this._offset))}}])&&xo(t.prototype,n),e}();function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Co(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function No(e,t){return(No=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bo(e,t){return!t||"object"!==jo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Io(e){return(Io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Do=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&No(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Io(i);if(o){var n=Io(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bo(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.variables,i=void 0===n?[]:n,o=t.datetime,s=void 0===o?void 0:o,l=t.run,u=void 0===l?void 0:l,c=t.offset,f=void 0===c?void 0:c,d=t.url,h=void 0===d?void 0:d;return Eo(this,a),(e=r.call(this,{variables:i,datetime:s,run:u,offset:f}))._url=h,e}return t=a,(n=[{key:"url",get:function(){return this._url}}])&&Co(t.prototype,n),a}(Ro);function Ao(e){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mo(e,t){return(Mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vo(e,t){return!t||"object"!==Ao(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Go(e){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mo(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=Go(t);if(n){var o=Go(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return Vo(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=void 0===n?void 0:n,a=t.pres,s=void 0===a?void 0:a,l=t.tmpc,u=void 0===l?void 0:l,c=t.dwpc,f=void 0===c?void 0:c,d=t.ptrace,h=void 0===d?void 0:d,p=t.ttrace,v=void 0===p?void 0:p,y=t.blayer,m=void 0===y?void 0:y,b=t.tlayer,g=void 0===b?void 0:b,w=t.lclpres,_=void 0===w?void 0:w,O=t.lclhght,S=void 0===O?void 0:O,T=t.lfcpres,k=void 0===T?void 0:T,P=t.lfchght,x=void 0===P?void 0:P,R=t.elpres,j=void 0===R?void 0:R,E=t.elhght,C=void 0===E?void 0:E,N=t.mplpres,B=void 0===N?void 0:N,I=t.mplhght,D=void 0===I?void 0:I,A=t.bplus,L=void 0===A?void 0:A,M=t.bminus,V=void 0===M?void 0:M,G=t.bfzl,Y=void 0===G?void 0:G,F=t.b3km,X=void 0===F?void 0:F,z=t.b6km,q=void 0===z?void 0:z,H=t.p0c,K=void 0===H?void 0:H,U=t.pm10c,$=void 0===U?void 0:U,Z=t.pm20c,W=void 0===Z?void 0:Z,J=t.pm30c,Q=void 0===J?void 0:J,ee=t.hght0c,te=void 0===ee?void 0:ee,ne=t.hghtm10c,ie=void 0===ne?void 0:ne,oe=t.hghtm20c,re=void 0===oe?void 0:oe,ae=t.hghtm30c,se=void 0===ae?void 0:ae,le=t.wm10c,ue=void 0===le?void 0:le,ce=t.wm20c,fe=void 0===ce?void 0:ce,de=t.wm30c,he=void 0===de?void 0:de,pe=t.li5,ve=void 0===pe?void 0:pe,ye=t.li3,me=void 0===ye?void 0:ye,be=t.brnshear,ge=void 0===be?void 0:be,we=t.brnu,_e=void 0===we?void 0:we,Oe=t.brnv,Se=void 0===Oe?void 0:Oe,Te=t.limax,ke=void 0===Te?void 0:Te,Pe=t.limaxpres,xe=void 0===Pe?void 0:Pe,Re=t.cap,je=void 0===Re?void 0:Re,Ee=t.cappres,Ce=void 0===Ee?void 0:Ee,Ne=t.bmin,Be=void 0===Ne?void 0:Ne,Ie=t.bminpres,De=void 0===Ie?void 0:Ie;return Lo(this,o),(e=i.call(this,{id:r})).pres=s,e.tmpc=u,e.dwpc=f,e.ptrace=h,e.ttrace=v,e.blayer=m,e.tlayer=g,e.lclpres=_,e.lclhght=S,e.lfcpres=k,e.lfchght=x,e.elpres=j,e.elhght=C,e.mplpres=B,e.mplhght=D,e.bplus=L,e.bminus=V,e.bfzl=Y,e.b3km=X,e.b6km=q,e.p0c=K,e.pm10c=$,e.pm20c=W,e.pm30c=Q,e.hght0c=te,e.hghtm10c=ie,e.hghtm20c=re,e.hghtm30c=se,e.wm10c=ue,e.wm20c=fe,e.wm30c=he,e.li5=ve,e.li3=me,e.brnshear=ge,e.brnu=_e,e.brnv=Se,e.limax=ke,e.limaxpres=xe,e.cap=je,e.cappres=Ce,e.bmin=Be,e.bminpres=De,e}return o}(ri);function Fo(e){return function(e){if(Array.isArray(e))return Xo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function zo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const Ho=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.calcMissing,o=void 0!==i&&i,r=n.parcels,a=void 0===r?[]:r;zo(this,e),this.options={calcMissing:o},this.levels={},this._parcelCollection=new fi({fireAddRemoveOnReplace:!0,fireReplace:!1,emptyObjectMaker:function(){return new Yo}}),(t=this._parcelCollection).append.apply(t,Fo(a))}var n,i;return n=e,(i=[{key:"parcelCollection",get:function(){return this._parcelCollection}},{key:"addLevels",value:function(e,t){return e.forEach((function(e){this.addLevel(e,t)}),this),this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.calcMissing;return n=n||this.options.calcMissing,"pres"in e&&void 0!==e.pres&&(n&&(e=this.calculateMissingData(e)),this.levels[e.pres]=e),this}},{key:"calculateMissingData",value:function(e){var n={pres:e.pres,hght:e.hght,u:e.u,v:e.v,wdir:e.wdir,wspd:e.wspd,tmpk:e.tmpk,dwpk:e.dwpk,relh:e.relh,mixr:e.mixr,theta:e.theta,thetae:e.thetae,wetbulb:e.wetbulb,vtmp:e.vtmp};return void 0===n.hght&&(n.hght=t(n.pres)),void 0===n.u&&void 0===n.v&&void 0!==n.wdir&&void 0!==n.wspd?(n.u=n.wspd*Math.sin(n.wdir/180*Math.PI),n.v=n.wspd*Math.cos(n.wdir/180*Math.PI)):void 0!==n.u&&void 0!==n.v&&void 0===n.wdir&&void 0===n.wspd&&(n.wspd=Math.sqrt(Math.pow(n.u,2)+Math.pow(n.v,2)),n.wdir=Math.arctan(n.u/n.v)/Math.PI*180),void 0!==n.tmpk&&void 0!==n.dwpk?(void 0===n.theta&&(n.theta=r(n.tmpk,n.pres)),void 0===n.thetae&&(n.thetae=c(n.tmpk,n.dwpk,n.pres))):void 0!==n.mixr&&void 0===n.dwpk&&(n.dwpk=l(n.mixr,n.pres)),n}},{key:"removeLevel",value:function(e){return e in this.levels&&delete this.levels[e],this}},{key:"getData",value:function(e){return e in this.levels?this.levels[e]:{pres:void 0,hght:void 0,tmpk:void 0,dwpk:void 0,wdir:void 0,wspd:void 0,u:void 0,v:void 0,relh:void 0,mixr:void 0,theta:void 0,thetae:void 0,wetbulb:void 0,vtmp:void 0}}},{key:"getLevels",value:function(){return Object.keys(this.levels).map((function(e){return+e})).sort((function(e,t){return e-t}))}},{key:"getNearestLevel",value:function(e){if(!(Object.keys(this.levels).length<1))return Object.keys(this.levels).sort((function(t,n){return Math.abs(t-e)-Math.abs(n-e)})).shift()}}])&&qo(n.prototype,i),e}();function Ko(e){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zo(e,t){return(Zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wo(e,t){return!t||"object"!==Ko(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jo(e){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Qo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zo(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jo(i);if(o){var n=Jo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wo(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.variables,i=void 0===n?[]:n,o=t.datetime,s=void 0===o?void 0:o,l=t.run,u=void 0===l?void 0:l,c=t.offset,f=void 0===c?void 0:c,d=t.sounding,h=void 0===d?void 0:d;return Uo(this,a),(e=r.call(this,{variables:i,datetime:s,run:u,offset:f}))._sounding=h,e}return t=a,(n=[{key:"sounding",get:function(){return void 0===this._sounding?new Ho:this._sounding},set:function(e){this._sounding=e}}])&&$o(t.prototype,n),a}(Ro);function er(e){return function(e){if(Array.isArray(e))return ir(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function nr(e,t){if(e){if("string"==typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ir(e,t):void 0}}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ar=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.topNode,i=t.timesVariableCollections,o=void 0===i?[]:i;or(this,e),this._topNode=n,this._availableVariablesMap=new Map,this._timesVariableCollections=o}var t,n;return t=e,(n=[{key:"topNode",get:function(){return this._topNode}},{key:"variableCollections",get:function(){var e;e=function(n){n.children.forEach((function(n){t.push(n.variableCollection),e(n)}))};var t=[this.topNode.variableCollection];return e(this.topNode),t}},{key:"availableVariablesMap",get:function(){return this._availableVariablesMap}},{key:"append",value:function(){for(var e,t=this,n=[],i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return o.forEach((function(e){var i=t._getTopNodeOfResourceDefinition(e,t.topNode);if(void 0!==i){var o=t._getTopMostChildWithAllVariables(new Set(e.variables),i,!0);void 0!==o&&o.append(e)>0&&(n.push(e),t._addAvailableVariablesMapByResource(e))}})),n.length>0&&(lr.timeoutId&&clearTimeout(lr.timeoutId),(e=lr.addedResources).push.apply(e,n),lr.timeoutId=setTimeout((function(){t.trigger("change:resources",{addedResources:lr.addedResources}),lr.addedResources=[]}),100)),this}},{key:"_addAvailableVariablesMapByResource",value:function(e){var t=this;e.variables.forEach((function(e){void 0!==e.variableCollection.node&&(t._availableVariablesMap.has(e.variableCollection.node)||t._availableVariablesMap.set(e.variableCollection.node,new Set),t._availableVariablesMap.get(e.variableCollection.node).add(e))}))}},{key:"remove",value:function(){for(var e=this,t=[],n=new Map,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return o.forEach((function(i){var o=e._getTopNodeOfResourceDefinition(i,e.topNode);if(void 0!==o){var r=e._getTopMostChildWithAllVariables(new Set(i.variables),o,!0);void 0!==r&&r.remove(i)>0&&(t.push(i),n.has(r)||n.set(r,new Set),n.get(r).add(i))}})),n.size>0&&this._removeAvailableVariablesMapByResources(n),t.length>0&&this.trigger("change:resources",{removedResources:t}),this}},{key:"_removeAvailableVariablesMapByResources",value:function(e){var t,n=new Set,i=tr(e.entries());try{var o=function(){var e,i,o,r=(i=t.value,o=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(i,o)||nr(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],s=r[1],l=new Set,u=tr(s);try{for(u.s();!(e=u.n()).done;)e.value.variables.forEach((function(e){return l.add(e)}))}catch(e){u.e(e)}finally{u.f()}var c,f=tr(l);try{for(f.s();!(c=f.n()).done;){var d=c.value;a.hasResourcesByVariables(d)||n.add(d)}}catch(e){f.e(e)}finally{f.f()}};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}var r,a=tr(n);try{for(a.s();!(r=a.n()).done;){var s=r.value,l=this.getNodeByVariableCollection(s.variableCollection);this._hasResourcesOfNodeChildren(l,[s])||this._availableVariablesMap.has(l)&&this._availableVariablesMap.get(l).delete(s)}}catch(e){a.e(e)}finally{a.f()}}},{key:"getTopMostNodeWithAllVariables",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this._getTopMostChildWithAllVariables(new Set(t),this.topNode,!0);return void 0===i?new So(new uo):i}},{key:"_getTopNodeOfResourceDefinition",value:function(e,t){var n=this;if(e.isDefinedByVariableOf(t.variableCollection))return t;var i=void 0;return t.children.forEach((function(t){void 0!==i&&(i=n._getTopNodeOfResourceDefinition(e,t))})),i}},{key:"_getTopMostChildWithAllVariables",value:function(e,t,n){var i=this,o=!1;if(t.variableCollection.variables.forEach((function(t){e.has(t)&&(o=!0,e.delete(t))})),0==e.size)return t;if(0!=t.children.length&&(o||n)){var r=void 0;return t.children.forEach((function(t){void 0===r&&(r=i._getTopMostChildWithAllVariables(e,t,n))})),r}}},{key:"getNodeByVariableCollection",value:function(e){return void 0===e.node?new So(new uo):e.node}},{key:"getNodeByVariableCollectionId",value:function(e){var t=this._getNodeByVariableCollection((function(t){return e==t.id}));return void 0===t?new So(new uo):t}},{key:"_getNodeByVariableCollection",value:function(e){return e(this.topNode.variableCollection)?this.topNode:this._findChildNodeByVariableCollection(e,this.topNode)}},{key:"_findChildNodeByVariableCollection",value:function(e,t){var n,i=this;return t.children.forEach((function(t){void 0===n&&e(t.variableCollection)?n=t:void 0===n&&t.children.length>0&&(n=i._findChildNodeByVariableCollection(e,t))})),n}},{key:"appendImage",value:function(e){var t=e.variables,n=e.datetime,i=e.run,o=e.offset,r=e.url;return this.append(new Do({variables:t,datetime:n,run:i,offset:o,url:r})),this}},{key:"getAvailableVariables",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.variables,i=void 0===n?[]:n,o=new Set,r=function e(t,n){if(n.resources.length>0){var r,a=tr(n.resources);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.isDefinedBy.apply(s,[!1,t].concat(er(i))))return o.add(t),!0}}catch(e){a.e(e)}finally{a.f()}return!1}var l,u=tr(n.children);try{for(u.s();!(l=u.n()).done;)if(e(t,l.value))return!0}catch(e){u.e(e)}finally{u.f()}return!1};return Array.from(e).forEach((function(t){r(t,e.node)})),o}},{key:"_hasResourcesOfNodeChildren",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,o=tr(e.children);try{for(o.s();!(n=o.n()).done;){var r=n.value;if(!i.has(r)){if(i.add(r),r.hasResourcesByVariables.apply(r,er(t)))return!0;if(this._hasResourcesOfNodeChildren(r,t,i))return!0}}}catch(e){o.e(e)}finally{o.f()}}},{key:"getTimesByVariables",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.variables,n=void 0===t?[]:t,i=e.exact,o=void 0!==i&&i,r=this._getTopMostChildWithAllVariables(new Set(n),this.topNode,!0);if(void 0===r)return[];var a=new Set,s=function e(t){t.getResourcesByVariables.apply(t,[o].concat(er(n))).forEach((function(e){void 0!==e.datetime&&a.add(e.datetime.valueOf())})),t.children.forEach((function(t){return e(t)}))};return s(r),er(a).sort().map((function(e){return new Date(e)}))}}])&&rr(t.prototype,n),e}();B(ar.prototype);const sr=ar;var lr={timeoutId:void 0,addedResources:[]};function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function fr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e,t){return!t||"object"!==ur(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pr(i);if(o){var n=pr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return hr(this,e)});function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var e=new Set;["models","runs","regions","fields","levels","accumulations","thresholds"].forEach((function(t){return e.add(new uo({id:t}))}));var t,n={},i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n[o.id]=new So(o)}}catch(e){i.e(e)}finally{i.f()}return n.models.appendChild(n.runs),n.runs.appendChild(n.regions),n.regions.appendChild(n.fields),n.fields.appendChild(n.levels,n.accumulations),n.accumulations.appendChild(n.thresholds),r.call(this,{topNode:n.models,timesVariableCollections:new Set([n.models.variableCollection,n.runs.variableCollection])})}return t=a,(n=[{key:"addVariable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id,i=t.name,o=void 0===i?void 0:i,r=t.names,a=void 0===r?{}:r,s=t.langSortation,l=void 0===s?[]:s,u=t.datetime,c=void 0===u?void 0:u,f=void 0===c?new Fi({id:n,name:o,names:a,langSortation:l}):new $i({id:n,name:o,names:a,langSortation:l,datetime:c});return e.append(f),this}},{key:"models",get:function(){return this.getNodeByVariableCollectionId("models").variableCollection}},{key:"runs",get:function(){return this.getNodeByVariableCollectionId("runs").variableCollection}},{key:"regions",get:function(){return this.getNodeByVariableCollectionId("regions").variableCollection}},{key:"fields",get:function(){return this.getNodeByVariableCollectionId("fields").variableCollection}},{key:"levels",get:function(){return this.getNodeByVariableCollectionId("levels").variableCollection}},{key:"accumulations",get:function(){return this.getNodeByVariableCollectionId("accumulations").variableCollection}},{key:"thresholds",get:function(){return this.getNodeByVariableCollectionId("thresholds").variableCollection}}])&&fr(t.prototype,n),a}(sr);function yr(e){return function(e){if(Array.isArray(e))return br(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){if(e){if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(e,t):void 0}}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.alwaysAvailableCollections,i=void 0===n?[]:n;gr(this,e),this._alwaysAvailableCollections=new Set(i),this._modelviewer=void 0,this._container=void 0,this._parentNode=void 0,this._resourceNode=void 0,this._resourceOutput={image:void 0,thermodynamicDiagram:void 0}}var t,n;return t=e,(n=[{key:"modelviewer",get:function(){return this._modelviewer},set:function(e){var t=this;this._modelviewer=e,void 0!==this._modelviewer&&this._modelviewer.resources.variableCollections.forEach((function(e){e.on("add:variable",(function(e){t.trigger("add:variable",{variable:e})}))}))}},{key:"container",get:function(){return this._container},set:function(e){var t=this;this._container=e,void 0!==this._container&&this._container.on("change:visibleResource",(function(){t._onChangeVisibleResource()}))}},{key:"parentNode",get:function(){return this._parentNode},set:function(e){this._parentNode=e,this.onInit()}},{key:"resourceNode",get:function(){return this._resourceNode},set:function(e){this._resourceNode=e,this._onChangeVisibleResource()}},{key:"render",value:function(){this.onInit(),this.onChangeVisibleResource()}},{key:"onInit",value:function(){var e=this;void 0!==this.parentNode&&($()(this.parentNode).empty(),this.trigger("init:display"),void 0!==this._modelviewer&&this._modelviewer.resources.variableCollections.forEach((function(t){e.trigger("add:variableCollection",{variableCollection:t});var n,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=mr(e))){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.trigger("add:variable",{variable:o})}}catch(e){i.e(e)}finally{i.f()}})))}},{key:"getAvailableVariables",value:function(e){var t=e.variableCollection,n=this._getParentsVariables(t.node);return this._modelviewer.resources.getAvailableVariables(t,{variables:n})}},{key:"_getParentsVariables",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=new Set;return e.parents.forEach((function(e){if(!n.has(e)){n.add(e),Array.from(e.variableCollection).forEach((function(e){t._container.selectedVariables.has(e)&&i.add(e)}));var o=t._getParentsVariables(e,n);o.size>0&&(i=new Set([].concat(yr(i),yr(o))))}})),i}},{key:"_onChangeVisibleResource",value:function(){if(void 0!==this._resourceNode){if(void 0!==this._container){var e=this._container.visibleResource;if("url"in e)void 0!==this.thermodynamicDiagram&&(this.thermodynamicDiagram=void 0,$()(this._resourceNode).empty()),void 0===this._resourceOutput.image&&($()(this._resourceNode).empty(),this._resourceOutput.image=$()("<img>").css({"max-width":"100%"}),$()(this._resourceNode).append(this._resourceOutput.image)),this._resourceOutput.image.attr("src",e.url);else if("sounding"in e){void 0!==this._resourceOutput.image&&(this._resourceOutput.image=void 0,$()(this._resourceNode).empty());var t=!1;this._resourceOutput.thermodynamicDiagram.soundings.forEach((function(n){n.getSounding()===e.sounding?(t=!0,n.visible(!0)):n.visible(!1)})),t||this._resourceOutput.thermodynamicDiagram.addSounding(e.sounding)}else void 0!==this._resourceOutput.image&&(this._resourceOutput.image=void 0,$()(this._resourceNode).empty()),void 0!==this._resourceOutput.thermodynamicDiagram&&this._resourceOutput.thermodynamicDiagram.soundings.forEach((function(e){return e.visible(!1)}))}}else this.trigger("change:visibleResource")}}])&&wr(t.prototype,n),e}();B(_r.prototype);const Or=_r;function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,t)||xr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e){return function(e){if(Array.isArray(e))return Rr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function xr(e,t){if(e){if("string"==typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rr(e,t):void 0}}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Er(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nr(e,t){return!t||"object"!==Sr(t)&&"function"!=typeof t?Br(e):t}function Br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ir(i);if(o){var n=Ir(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Nr(this,e)});function a(){var e,t,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=o.id,l=o.display,u=void 0===l?void 0:l,c=o.adaptSuitableResource,f=void 0===c?{}:c;return jr(this,a),(e=r.call(this,{id:s}))._display=void 0===u?new Or:u,e._display.modelviewer=e.modelviewer,e._display.container=Br(e),e._display.parentNode=e._containerNode,e._adaptSuitableResource={},e._initAdaptSuitableResource(f),e._modelviewer=void 0,e._visibleResource,e._displayVariables=new Set,e._selectedVariables=new Map,e._selectedNode=void 0,e._enabledResources=new Map,e._containerNode=void 0,e._debouncedChangeSelectedVariables=(n=new Set,i=new Set,function(o){var r,a=o.addedVariables,s=o.removedVariables,l=Pr(a);try{for(l.s();!(r=l.n()).done;){var u=r.value;i.has(u)&&i.delete(u)}}catch(e){l.e(e)}finally{l.f()}var c,f=Pr(s);try{for(f.s();!(c=f.n()).done;){var d=c.value;n.has(d)&&n.delete(d)}}catch(e){f.e(e)}finally{f.f()}n=new Set([].concat(kr(n),kr(a))),i=new Set([].concat(kr(i),kr(s))),clearTimeout(t),t=setTimeout((function(){e.trigger("change:selectedVariables",{addedVariables:n,removedVariables:i}),n.clear(),i.clear()}),300)}),e._listeners={mirror:[],timeline:{timeline:void 0,listenerKey:void 0},resources:{resources:void 0,listenerKey:void 0}},e}return t=a,(n=[{key:"display",get:function(){return this._display}},{key:"modelviewer",get:function(){return this._modelviewer},set:function(e){var t=this;if(this._modelviewer=e,void 0===this._modelviewer)return void 0!==this._listeners.timeline.listenerKey&&this._listeners.timeline.timeline.un("change:time",this._listeners.timeline.listenerKey),void(void 0!==this._listeners.resources.listenerKey&&this._listeners.resources.resources.un("change:resources",this._listeners.resources.listenerKey));this._display.modelviewer=e,this._listeners.timeline.timeline=this._modelviewer.timeline,this._listeners.timeline.listenerKey=this._modelviewer.timeline.on("change:time",(function(){return t._setVisibleResource()})),this._listeners.resources.resources=this._modelviewer.resources,this._listeners.resources.listenerKey=this._modelviewer.resources.on("change:resources",(function(){t._setTimes(),t._setEnabledResources(),t._updateSelectedVariables()})),this._setTimes()}},{key:"containerNode",get:function(){return this._containerNode},set:function(e){this._containerNode=e,void 0!==this._containerNode&&(this._display.parentNode=this._containerNode)}},{key:"visibleResource",get:function(){return void 0===this._visibleResource?new Ro:this._visibleResource}},{key:"displayVariables",get:function(){return this._displayVariables},set:function(e){var t,n=new Set,i=Pr(e=new Set(e));try{for(i.s();!(t=i.n()).done;){var o=t.value;this._displayVariables.has(o)||n.add(o)}}catch(e){i.e(e)}finally{i.f()}var r,a=new Set,s=Pr(this.displayVariables);try{for(s.s();!(r=s.n()).done;){var l=r.value;e.has(l)||a.add(l)}}catch(e){s.e(e)}finally{s.f()}(n.size>0||a.size>0)&&(this._displayVariables=e,this._updateSelectedVariables({addedVariables:n,removedVariables:a}),this.trigger("change:displayVariables",{addedVariables:n,removedVariables:a}))}},{key:"selectedVariables",get:function(){return new Set(kr(this._selectedVariables.values()))}},{key:"getSelectedVariable",value:function(e){var t=this._selectedVariables.get(e);return void 0===t?new Fi({id:void 0}):t}},{key:"enabledTimes",get:function(){return kr(this._enabledResources.keys()).filter((function(e){return!isNaN(e)})).map((function(e){return new Date(e)}))}},{key:"exchangeDisplayVariable",value:function(e){var t,n=new Set(this.displayVariables),i=Pr(e);try{for(i.s();!(t=i.n()).done;){var o,r=t.value,a=Pr(this.displayVariables);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.variableCollection===r.variableCollection&&(n.delete(s),n.add(r))}}catch(e){a.e(e)}finally{a.f()}}}catch(e){i.e(e)}finally{i.f()}var l,u=Pr(e);try{for(u.s();!(l=u.n()).done;){var c=l.value;n.has(c)||n.add(c)}}catch(e){u.e(e)}finally{u.f()}return this.displayVariables=n,this}},{key:"mirrorsFrom",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this._listeners.mirror=this._listeners.mirror.filter((function(e){return e.container!==t&&void 0!==t||(e.container.un("change:displayVariables",e.listenerKey),!1)})),void 0!==t&&!(void 0!==n&&n.length<1)){void 0===n&&(n=this.modelviewer.resources.variableCollections);var i=function(){var i,o=new Set,r=Pr(t.displayVariables);try{var a=function(){var e=i.value;n.forEach((function(t){e.variableCollection===t&&o.add(e)}))};for(r.s();!(i=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}e.exchangeDisplayVariable(o)},o=t.on("change:displayVariables",i),r={container:t,listenerKey:o,variableCollections:n};this._listeners.mirror.forEach((function(t){var i=[];t.variableCollections.forEach((function(e){var t=!1;n.forEach((function(n){n===e&&(t=!0)})),t||i.push(e)})),i.length<t.variableCollections.length&&e.mirrorsFrom(t.container,i)})),this._listeners.mirror.push(r),i()}}},{key:"getMirrorsFrom",value:function(){var e=new Map;return this._listeners.mirror.forEach((function(t){e.set(t.container,t.variableCollections)})),e}},{key:"_setTimes",value:function(){var e=this,t=Tr(this._getSelectedVariablesWithResources([this.modelviewer.resources.topNode],new Set,void 0,(function(t){var n=!0;return e.modelviewer.resources._timesVariableCollections.forEach((function(e){var i,o=!1,r=Pr(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.contains(a)&&(o=!0)}}catch(e){r.e(e)}finally{r.f()}o||(n=!1)})),n})),1)[0];void 0===t&&(t=new Set);var n=0==t.size?[]:this.modelviewer.resources.getTimesByVariables({variables:t});this.modelviewer.timeline.setTimesBySetID(this.id,n)}},{key:"_updateSelectedVariables",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.addedVariables,i=void 0===n?void 0:n,o=t.removedVariables,r=void 0===o?void 0:o;if(!this._adaptSuitableResource.enabled){var a=void 0,s=function t(n){if(n.hasResourcesByVariables.apply(n,[!0].concat(kr(e.displayVariables))))a=n;else{var i,o=Pr(n.children);try{for(o.s();!(i=o.n()).done;)t(i.value)}catch(e){o.e(e)}finally{o.f()}}};return s(this.modelviewer.resources.topNode),void this._setSelectedVariables(this.displayVariables,a)}var l=[],u=new Set,c=void 0;if(void 0===i||void 0===r)l.push(this.modelviewer.resources.topNode);else{var f=function t(n){for(var o=!1,a=0,s=[].concat(kr(i),kr(r));a<s.length;a++)if(s[a].variableCollection.node===n){l.push(n),o=!0;break}if(!o){var f=e.getSelectedVariable(n.variableCollection);if(void 0!==f.id){c=f,u.add(c);var d,h=Pr(n.children);try{for(h.s();!(d=h.n()).done;)t(d.value)}catch(e){h.e(e)}finally{h.f()}}}};f(this.modelviewer.resources.topNode),(l=l.filter((function(e,t,n){return t===n.indexOf(e)}))).length<1&&l.push(this.modelviewer.resources.topNode)}var d,h=this._getSelectedVariablesWithResources(l,u,c),p=Tr(h,2),v=p[0],y=p[1];void 0===v?(v=u,d=void 0!==c?c.variableCollection.node:new So({variableCollection:new uo})):d=y.variableCollection.node,this._setSelectedVariables(v,d)}},{key:"_getSelectedVariablesWithResources",value:function(e,t,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._adaptSuitableResource.isResourceSelected;if(o.call(this,t,n))return[t,n];var r,a=[void 0,void 0],s=function(e){var n=new Set(t);n.add(e);var r=Tr(i._getSelectedVariablesWithResources(e.variableCollection.node.children,n,e,o),2),s=r[0],l=r[1];if(void 0!==s)return a[0]=s,void(a[1]=l);var u,c=!0,f=Pr(n);try{var d=function(){var e=u.value,t=!1;i.modelviewer.resources._timesVariableCollections.forEach((function(n){n.contains(e)&&(t=!0)})),t||(c=!1)};for(f.s();!(u=f.n()).done;)d()}catch(e){f.e(e)}finally{f.f()}c&&n.size==i.modelviewer.resources._timesVariableCollections.size&&(a[0]=n,a[1]=e)},l=[],u=Pr(e);try{for(u.s();!(r=u.n()).done;){var c=r.value;if(this.modelviewer.resources.availableVariablesMap.has(c)&&this.modelviewer.resources.availableVariablesMap.get(c).size){var f,d=Pr(c.variableCollection);try{for(d.s();!(f=d.n()).done;){var h=f.value;if(this.modelviewer.resources.availableVariablesMap.get(c).has(h)&&(this.displayVariables.has(h)?s(h):this._adaptSuitableResource.enabled&&l.push(h),void 0!==a[0]))break}}catch(e){d.e(e)}finally{d.f()}}if(void 0!==a[0])break}}catch(e){u.e(e)}finally{u.f()}if(void 0!==a[0])return a;var p,v=this._adaptSuitableResource.getPossibleVariables.call(this,l,t),y=Pr(v);try{for(y.s();!(p=y.n()).done;){var m=p.value;if(s(m),void 0!==a[0])break}}catch(e){y.e(e)}finally{y.f()}return a}},{key:"_setSelectedVariables",value:function(e,t){var n,i=new Set,o=Pr(e=new Set(e));try{for(o.s();!(n=o.n()).done;){var r=n.value;this.selectedVariables.has(r)||i.add(r)}}catch(e){o.e(e)}finally{o.f()}var a,s=new Set,l=Pr(this.selectedVariables);try{for(l.s();!(a=l.n()).done;){var u=a.value;e.has(u)||s.add(u)}}catch(e){l.e(e)}finally{l.f()}if(i.size>0||s.size>0||this._selectedNode!==t){this._selectedVariables.clear();var c,f=Pr(e);try{for(f.s();!(c=f.n()).done;){var d=c.value;this._selectedVariables.set(d.variableCollection,d)}}catch(e){f.e(e)}finally{f.f()}this._selectedNode=t,this._setTimes(),this._setEnabledResources(),this._debouncedChangeSelectedVariables({addedVariables:i,removedVariables:s})}}},{key:"_setEnabledResources",value:function(){var e,t=this;this._enabledResources.clear(),void 0!==this._selectedNode&&(0!=this.selectedVariables.size&&(e=this._selectedNode).getResourcesByVariables.apply(e,[!0].concat(kr(this.selectedVariables))).filter((function(e){return e.datetime&&!isNaN(e.datetime.valueOf())})).forEach((function(e){return t._enabledResources.set(e.datetime.valueOf(),e)})),this.modelviewer.timeline.setEnabledTimesBySetID(this.id,this.enabledTimes),this.trigger("change:enabledResources",this._enabledResources),this._setVisibleResource())}},{key:"_setVisibleResource",value:function(){var e=this._visibleResource,t=this.modelviewer.timeline.getSelectedTime().valueOf();this._enabledResources.has(t)?this._visibleResource=this._enabledResources.get(t):this._visibleResource=void 0,this._visibleResource!==e&&this.trigger("change:visibleResource")}},{key:"_initAdaptSuitableResource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,n=void 0===t||t,i=e.getPossibleVariables,o=void 0===i?void 0:i,r=e.isResourceSelected,a=void 0===r?void 0:r;this._adaptSuitableResource={enabled:n,getPossibleVariables:o,isResourceSelected:a},void 0===this._adaptSuitableResource.getPossibleVariables&&(this._adaptSuitableResource.getPossibleVariables=function(e){return e}),void 0===this._adaptSuitableResource.isResourceSelected&&(this._adaptSuitableResource.isResourceSelected=function(e,t){var n;return void 0!==t&&(n=t.variableCollection.node).getResourcesByVariables.apply(n,[!0].concat(kr(e))).length>0})}}])&&Er(t.prototype,n),a}(ri);B(Dr.prototype);const Ar=Dr,Lr=SVG;var Mr=["color","width"],Vr=["size","color","anchor"];function Gr(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=void 0===t?void 0:t,i=e.width,o=void 0===i?void 0:i,r=Gr(e,Mr),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.color=qr(n,a.color,"black"),r.width=qr(o,a.width,1),Object.keys(a).forEach((function(e){"color"!=e&&"width"!=e&&void 0===r[e]&&(r[e]=a[e])})),r}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.size,n=void 0===t?void 0:t,i=e.color,o=void 0===i?void 0:i,r=e.anchor,a=void 0===r?void 0:r,s=Gr(e,Vr),l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.size=qr(n,l.size,12),s.color=qr(o,l.color,"black"),void 0!==(a=qr(a,l.anchor))&&(s.anchor=a),Object.keys(l).forEach((function(e){"color"!=e&&"size"!=e&&"anchor"!=e&&void 0===s[e]&&(s[e]=l[e])})),s}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visible,n=void 0===t?void 0:t,i=e.style,o=void 0===i?{}:i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{visible:qr(n,r.visible,!0),style:Yr(o,r.style)}}function zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"visible"in t&&(e.visible=t.visible),"style"in t&&["color","width","opacity","linecap","linejoin","dasharray"].forEach((function(n){n in t.style&&(e.style[n]=t.style[n])})),e}function qr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return void 0!==e?e:t}))}function Hr(e){var t=e.node,n=e.text,i=e.x,o=e.y,r=e.horizontalMargin,a=void 0===r?0:r,s=e.verticalMargin,l=void 0===s?0:s,u=e.font,c=void 0===u?{}:u,f=e.fill,d=void 0===f?{}:f,h=t.group();"color"in d||(d.color="white");var p=h.rect().fill(d),v=h.text(n).attr({x:i,y:o}).font(c);return"bottom"==c["alignment-baseline"]&&v.dy(-v.bbox().height-5),v.dx(a*("end"==v.attr("text-anchor")?-1:1)).dy(l*("bottom"==c["alignment-baseline"]?-1:1)),p.attr({x:v.bbox().x,y:v.bbox().y,width:v.bbox().width,height:v.bbox().height}),h}function Kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.node,n=e.x,i=void 0===n?0:n,o=e.y,r=void 0===o?0:o,a=e.wspd,s=void 0===a?0:a,l=e.wdir,u=void 0===l?270:l,c=e.length,f=void 0===c?50:c,d=e.strokeStyle,h=void 0===d?void 0:d,p=e.fillTriangle,v=void 0===p||p,y=e.triangleRatio,m=void 0===y?.2:y,b=e.barbDistanceRatio,g=void 0===b?.1:b,_=e.barbHeightRatio,O=void 0===_?3/8:_,S=e.circleOnLowWindspeed,T=void 0===S||S,k=e.circleRadiusRatio,P=void 0===k?.1:k;h=Yr(h);var x=w(s),R=t.group(),j=x>=5?R.group():void 0,E=f*m,C=f*g,N=f*O,B=r-f,I=x;if(x<5&&T)R.circle(f*P).cx(i).cy(r).stroke(h).fill("none");else{for(R.line(i,B,i,r).stroke(h);I>=50;)j.polyline([[i,B],[i+N,B+E/2],[i,B+E]]).fill(v?h:"none").stroke(h),B+=E+((I-=50)>=50?C/2:C);for(;I>=10;)j.line(i,B,i+N,B-E/2).stroke(h),B+=C,I-=10;x<10&&(B+=C),I>=5&&j.line(i,B,i+N/2,B-E/4).stroke(h);var D=B-(r-f);D>.9*f&&j.scale(1,.9*f/D,i,r-f),0!=u&&R.rotate(u,i,r)}}function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $r=["parcel","visible","temp","dewp"];function Zr(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ea(e,t){return!t||"object"!==Ur(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ta(e){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ta(i);if(o){var n=ta(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ea(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.parcel,i=void 0===n?void 0:n,o=t.visible,s=void 0===o||o,l=t.temp,u=void 0===l?{}:l,c=t.dewp,f=void 0===c?{}:c,d=Zr(t,$r);return Wr(this,a),(e=r.call(this,d))._parcel=i,void 0===e.id&&void 0!==i&&(e.id=i.id),e._options={visible:s,temp:Xr(u,{style:{color:"rgb(255, 153, 0)",width:3,linecap:"round"}}),dewp:Xr(f,{style:{color:"rgb(255, 153, 0)",width:3,linecap:"round"}})},e}return t=a,(n=[{key:"parcel",get:function(){return this._parcel}},{key:"visible",get:function(){return this._options.visible},set:function(e){var t=this._options.visible;this._options.visible=!!e,t!=this._options.visible&&this.trigger("change:visible")}},{key:"options",get:function(){return this._options}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visible,n=void 0===t?void 0:t,i=e.temp,o=void 0===i?void 0:i,r=e.dewp,a=void 0===r?void 0:r,s=!1;void 0===o?o={}:s=!0,void 0===a?a={}:s=!0,this._options.temp=zr(this._options.temp,o),this._options.dewp=zr(this._options.dewp,a),s&&this.trigger("change:options"),void 0!==n&&(this.visible=n)}}])&&Jr(t.prototype,n),a}(ri);B(na.prototype);const ia=na;function oa(e){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function sa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function la(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ca(e,t){return!t||"object"!==oa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fa(e){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var da=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fa(i);if(o){var n=fa(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ca(this,e)});function a(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.visible,o=void 0===i||i,s=n.diagram,l=void 0===s?{}:s,u=n.windprofile,c=void 0===u?{}:u,f=n.hodograph,d=void 0===f?{}:f,h=n.parcels,p=void 0===h?{}:h;if(sa(this,a),(t=r.call(this))._sounding=e,t._diagramParcelCollection=new fi({fireReplace:!1,fireAddRemoveOnReplace:!0,emptyObjectMaker:function(){return new ia}}),t._visible=o,t._options={diagram:pa(l),windprofile:ya(c),hodograph:Xr(d),parcels:ba(p)},void 0!==t._sounding){t._sounding.parcelCollection.on("add:item",(function(e){return t.addParcel(e)})),t._sounding.parcelCollection.on("remove:item",(function(e){var n,i=ra(t._diagramParcelCollection);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.parcel===e&&t._diagramParcelCollection.remove(o)}}catch(e){i.e(e)}finally{i.f()}}));var v,y=ra(t._sounding.parcelCollection);try{for(y.s();!(v=y.n()).done;){var m=v.value;t.addParcel(m)}}catch(e){y.e(e)}finally{y.f()}}return t}return t=a,(n=[{key:"sounding",get:function(){return this._sounding}},{key:"visible",get:function(){return this._visible},set:function(e){var t=this._visible;this._visible=!!e,t!=this._visible&&this.trigger("change:visible")}},{key:"options",get:function(){return this._options}},{key:"diagramParcelCollection",get:function(){return this._diagramParcelCollection}},{key:"addParcel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(t=void 0===t?this.getParcelOptions(e):t).parcel=e;var n=new ia(t);return this._diagramParcelCollection.append(n),n}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visible,n=void 0===t?void 0:t,i=e.diagram,o=void 0===i?void 0:i,r=e.windprofile,a=void 0===r?void 0:r,s=e.hodograph,l=void 0===s?void 0:s,u=e.parcels,c=void 0===u?void 0:u,f=!1;void 0===o?o={}:f=!0,void 0===a?a={}:f=!0,void 0===l?l={}:f=!0,this._options.diagram=va(this._options.diagram,o),this._options.windprofile=ma(this._options.windprofile,a),this._options.hodograph=zr(this._options.hodograph,l),f&&this.trigger("change:options"),void 0===c&&(c={}),this._options.parcels=ga(this._options.parcels,c);var d,h=ra(this.diagramParcelCollection);try{for(h.s();!(d=h.n()).done;){var p=d.value;p.id in c&&p.update(c[p.id])}}catch(e){h.e(e)}finally{h.f()}void 0!==n&&(this.visible=n)}},{key:"getParcelOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n={visible:this.options.parcels.default.visible,temp:{visible:this.options.parcels.default.temp.visible,style:{}},dewp:{visible:this.options.parcels.default.dewp.visible,style:{}}};return["temp","dewp"].forEach((function(t){Object.keys(e.options.parcels.default[t].style).forEach((function(i){n[t].style[i]=e.options.parcels.default[t].style[i]}))})),void 0!==t&&t.id in this.options.parcels&&(n=wa(n,this.options.parcels[t.id],["temp","dewp"])),n}}])&&la(t.prototype,n),a}(ri);B(da.prototype);const ha=da;function pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visible,n=void 0===t||t,i=e.temp,o=void 0===i?{}:i,r=e.dewp,a=void 0===r?{}:r,s=e.wetbulb,l=void 0===s?{}:s;return{visible:n,temp:Xr(o,{style:{color:"red",width:3,linecap:"round"}}),dewp:Xr(a,{style:{color:"blue",width:3,linecap:"round"}}),wetbulb:Xr(l,{style:{color:"green",width:2,linecap:"round"}})}}function va(e,t){return wa(e,t,["temp","dewp","wetbulb"])}function ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visible,n=void 0===t||t,i=e.windbarbs,o=void 0===i?{}:i,r=e.windspeed,a=void 0===r?{}:r;return{visible:n,windbarbs:Xr(o),windspeed:Xr(a)}}function ma(e,t){return wa(e,t,["windbarbs","windspeed"])}function ba(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===e.visible&&(e.visible=!0),void 0===e.default&&(e.default={}),void 0===e.default.visible&&(e.default.visible=!1),void 0===e.default.temp&&(e.default.temp={}),void 0===e.default.temp.visible&&(e.default.temp.visible=!0),void 0===e.default.temp.style&&(e.default.temp.style={}),void 0===e.default.temp.style.color&&(e.default.temp.style.color="rgb(255, 153, 0)"),void 0===e.default.temp.style.width&&(e.default.temp.style.width=3),void 0===e.default.temp.style.linecap&&(e.default.temp.style.linecap="round"),void 0===e.default.dewp&&(e.default.dewp={}),void 0===e.default.dewp.visible&&(e.default.dewp.visible=!0),void 0===e.default.dewp.style&&(e.default.dewp.style={}),void 0===e.default.dewp.style.color&&(e.default.dewp.style.color="rgb(255, 194, 102)"),void 0===e.default.dewp.style.width&&(e.default.dewp.style.width=3),void 0===e.default.dewp.style.linecap&&(e.default.dewp.style.linecap="round"),e}function ga(e,t){return"visible"in t&&(e.visible=t.visible),"default"in t&&(e.default=wa(e.default,t.default,["temp","dewp"])),Object.keys(t).filter((function(e){return"visible"!=e&&"default"!=e})).forEach((function(n){return e[n]=va(n in e?e[n]:{},t[n])})),e}function wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"visible"in t&&(e.visible=t.visible),n.forEach((function(n){n in t&&(e[n]=zr(e[n]?e[n]:{style:{}},t[n]))})),e}function _a(e){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ka(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pa(e,t){return(Pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xa(e,t){return!t||"object"!==_a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pa(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ra(i);if(o){var n=Ra(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xa(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.renderTo,i=void 0===n?void 0:n,o=t.width,s=void 0===o?void 0:o,l=t.height,u=void 0===l?void 0:l;if(Ta(this,a),(e=r.call(this,{fireReplace:!1,fireAddRemoveOnReplace:!0,emptyObjectMaker:function(){return new ha}}))._svgNode=void 0===i||"node"in i||"instance"in i?(0,Lr.SVG)(i):(0,Lr.SVG)().addTo(i),void 0!==s||void 0!==u)e._svgNode.size(s,u);else if(void 0===s&&void 0===u&&void 0!==i&&"getBoundingClientRect"in i){var c=i.getBoundingClientRect(),f=window.getComputedStyle(i);e._svgNode.size(c.width-parseFloat(f.getPropertyValue("padding-left"))-parseFloat(f.getPropertyValue("padding-right")),c.height-parseFloat(f.getPropertyValue("padding-top"))-parseFloat(f.getPropertyValue("padding-bottom")))}return e._plotAreas=new Set,e._svgNode.on("mousemove",(function(t){var n,i=Oa(e._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"isHoverLabelsRemote"in o&&o.svgNode.dispatchEvent(t)}}catch(e){i.e(e)}finally{i.f()}})),e._svgNode.on("mouseout",(function(t){if(e._svgNode.node===t.target){var n,i=Oa(e._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"_hoverLabelsGroup"in o&&o._hoverLabelsGroup.clear()}}catch(e){i.e(e)}finally{i.f()}}})),e.on("add:item",(function(t){var n,i=Oa(e._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"addSounding"in o&&o.addSounding(t)}}catch(e){i.e(e)}finally{i.f()}})),e.on("remove:item",(function(t){var n,i=Oa(e._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"removeSounding"in o&&o.removeSounding(t)}}catch(e){i.e(e)}finally{i.f()}})),e}return t=a,(n=[{key:"svgNode",get:function(){return this._svgNode}},{key:"appendPlotArea",value:function(e){if(!this._plotAreas.has(e)){this._plotAreas.add(e),e.addTo(this.svgNode);var t,n=Oa(this);try{for(n.s();!(t=n.n()).done;){var i=t.value;"addSounding"in e&&e.addSounding(i)}}catch(e){n.e(e)}finally{n.f()}return this}}},{key:"removePlotArea",value:function(e){if(this._plotAreas.has(e)){var t,n=Oa(this);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.removeSounding(i)}}catch(e){n.e(e)}finally{n.f()}return this._plotAreas.delete(e),this}}},{key:"exchangeCoordinateSystem",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=Oa(this._plotAreas);try{for(i.s();!(t=i.n()).done;){var o=t.value;void 0!==n&&o.coordinateSystem!==n||(o.coordinateSystem=e)}}catch(e){i.e(e)}finally{i.f()}}},{key:"addSounding",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ha(e,t),i=1,o="sounding-".concat(i);this.containsId(o);)i++,o="sounding-".concat(i);return n.id=o,this.append(n),n}}])&&ka(t.prototype,n),a}(fi);function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ca(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Na=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,i=void 0===n?100:n,o=t.height,r=void 0===o?100:o,a=t.pressure,s=void 0===a?{}:a,l=t.temperature,u=void 0===l?{}:l;Ea(this,e),this._width=i,this._height=r,this.temperatureBottomLeft,this.temperatureBottomRight,this.inclinationTan,this.options={pressure:{},temperature:{}},this._initPressureOptions(s),this._initTemperatureOptions(u)}var t,n;return t=e,(n=[{key:"width",get:function(){return this._width},set:function(e){var t=this._width;this._width=e,t!=this._width&&this.trigger("change:options")}},{key:"height",get:function(){return this._height},set:function(e){var t=this._height;this._height=e,t!=this._height&&this.trigger("change:options")}},{key:"isIsobarsStraightLine",value:function(){return!0}},{key:"isDryAdiabatStraightLine",value:function(){return!1}},{key:"isIsothermsVertical",value:function(){return void 0!==this.options.temperature.inclinationAngle&&0==this.options.temperature.inclinationAngle}},{key:"getPByXY",value:function(e,t){return Math.pow(this.options.pressure.min,t/this.height)*Math.pow(this.options.pressure.max,(this.height-t)/this.height)}},{key:"getTByXY",value:function(e,t){var n=e-t*this.inclinationTan;return this.temperatureBottomLeft+n*(this.temperatureBottomRight-this.temperatureBottomLeft)/this.width}},{key:"getYByXP",value:function(e,t){return this.height*Math.log(this.options.pressure.max/t)/Math.log(this.options.pressure.max/this.options.pressure.min)}},{key:"getTByXP",value:function(e,t){return this.getTByXY(e,this.getYByXP(e,t))}},{key:"getXByYT",value:function(e,t){return(t-this.temperatureBottomLeft)*this.width/(this.temperatureBottomRight-this.temperatureBottomLeft)+e*this.inclinationTan}},{key:"getYByXT",value:function(e,t){return 0!=this.inclinationTan?(e-this.getXByYT(0,t))/this.inclinationTan:void 0}},{key:"getXByPT",value:function(e,t){return this.getXByYT(this.getYByXP(0,e),t)}},{key:"getYByPT",value:function(e){return this.getYByXP(0,e)}},{key:"getXByYPotentialTemperature",value:function(e,t){return t=a(t,this.getPByXY(0,e)),this.getXByYT(e,t)}},{key:"getYByXPotentialTemperature",value:function(e,t){var n=this.getPByXY(e,0),i=this.getPByXY(e,this.height);if(!(r(this.getTByXP(e,i),i)<t||t<r(this.getTByXP(e,n),n))){for(;n-i>10;){var o=i+(n-i)/2,a=r(this.getTByXP(e,o),o);if(void 0===a)return;a<t?n=o:i=o}return this.getYByXP(e,i+(n-i)/2)}}},{key:"getXByPPotentialTemperatur",value:function(e,t){return t=a(t,e),this.getXByPT(e,t)}},{key:"getYByPPotentialTemperatur",value:function(e,t){var n=this.getXByPPotentialTemperatur(e,t);return this.getYByXPotentialTemperature(n,t)}},{key:"getXByYHMR",value:function(e,t){var n=this.getPByXY(0,e);return this.getXByYT(e,l(t,n))}},{key:"getYByXHMR",value:function(e,t){for(var n=this.getPByXY(e,0),i=this.getPByXY(e,this.height);n-i>10;){var o=i+(n-i)/2,r=d(this.getTByXP(e,o),o);if(void 0===r)return;r<t?i=o:n=o}return this.getYByXP(e,i+(n-i)/2)}},{key:"getXByPHMR",value:function(e,t){var n=l(t,e);return this.getXByPT(e,n)}},{key:"getYByPHMR",value:function(e,t){var n=l(t,e);return this.getYByPT(e,n)}},{key:"getXByYEquiPotTemp",value:function(e,t){var n=s(t,this.getPByXY(0,e));return this.getXByYT(e,n)}},{key:"getYByXEquiPotTemp",value:function(e,t){for(var n=0,i=this.height,o=void 0;i-n>10;){o=n+(i-n)/2;var r=this.getYByXT(e,s(t,this.getPByXY(e,o)));if(void 0===r)return;r<t?i=o:n=o}return o}},{key:"getXByPEquiPotTemp",value:function(e,t){var n=s(t,e);return this.getXByPT(e,n)}},{key:"getYByPEquiPotTemp",value:function(e,t){var n=s(t,e);return this.getYByPT(e,n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pressure,n=void 0===t?{}:t,i=e.temperature,o=void 0===i?{}:i;"min"in n&&(this.options.pressure.min=void 0===n.min?100:n.min),"max"in n&&(this.options.pressure.max=void 0===n.max?1e3:n.max),"min"in o&&(this.options.temperature.min=void 0===o.min?y(-40):o.min),"max"in o&&(this.options.temperature.max=void 0===o.max?y(-45):o.max),"reference"in o&&(this.options.temperature.reference=void 0===o.reference?"base":o.reference),"inclinationAngle"in o&&(this.options.temperature.inclinationAngle=void 0===o.inclinationAngle?45:o.inclinationAngle),this._normalizeTemperatureRange(),this.trigger("change:options")}},{key:"_initPressureOptions",value:function(e){var t=e.min,n=void 0===t?100:t,i=e.max,o=void 0===i?1050:i;this.options.pressure={min:n,max:o}}},{key:"_initTemperatureOptions",value:function(e){var t=e.min,n=void 0===t?y(-40):t,i=e.max,o=void 0===i?y(45):i,r=e.reference,a=void 0===r?"base":r,s=e.inclinationAngle,l=void 0===s?45:s;this.options.temperature={min:n,max:o,reference:a,inclinationAngle:l},this._normalizeTemperatureRange()}},{key:"_normalizeTemperatureRange",value:function(){if(this.temperatureBottomLeft=this.options.temperature.min,this.temperatureBottomRight=this.options.temperature.max,this.inclinationTan=45==this.options.temperature.inclinationAngle?1:0==this.options.temperature.inclinationAngle?0:Math.tan(this.options.temperature.inclinationAngle*Math.PI/180),/^[0-9]+$/.test(this.options.temperature.reference)){var e=this.getYByXP(0,this.options.temperature.reference),t=this.inclinationTan*e,n=(this.temperatureBottomRight-this.temperatureBottomLeft)/this.width;this.temperatureBottomLeft+=n*t,this.temperatureBottomRight+=n*t}}}])&&Ca(t.prototype,n),e}();B(Na.prototype);const Ba=Na;function Ia(e){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function La(e,t){return(La=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e,t){return!t||"object"!==Ia(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ga=.2857;const Ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&La(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Va(i);if(o){var n=Va(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ma(this,e)});function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=void 0===t?100:t,i=e.height,o=void 0===i?100:i,s=e.pressure,l=void 0===s?{}:s,u=e.temperature,c=void 0===u?{}:u;return Da(this,a),c.inclinationAngle=0,r.call(this,{width:n,height:o,pressure:l,temperature:c})}return t=a,(n=[{key:"isDryAdiabatStraightLine",value:function(){return!0}},{key:"getPByXY",value:function(e,t){return Math.pow(Math.pow(this.options.pressure.max,Ga)-t*(Math.pow(this.options.pressure.max,Ga)-Math.pow(this.options.pressure.min,Ga))/this.height,1/Ga)}},{key:"getYByXP",value:function(e,t){return this.height*(Math.pow(this.options.pressure.max,Ga)-Math.pow(t,Ga))/(Math.pow(this.options.pressure.max,Ga)-Math.pow(this.options.pressure.min,Ga))}},{key:"getYByXT",value:function(){}}])&&Aa(t.prototype,n),a}(Ba);function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function za(e,t){return(za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qa(e,t){return!t||"object"!==Fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ha(e){return(Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Ka=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&za(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=Ha(t);if(n){var o=Ha(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return qa(this,e)});function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=void 0===t?100:t,r=e.height,a=void 0===r?100:r,s=e.pressure,l=void 0===s?{}:s,u=e.temperature,c=void 0===u?{}:u;return Xa(this,o),c.inclinationAngle=0,i.call(this,{width:n,height:a,pressure:l,temperature:c})}return o}(Ba);function Ua(e){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Za(e,t){return(Za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e,t){return!t||"object"!==Ua(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ja(e){return(Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Qa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Za(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=Ja(t);if(n){var o=Ja(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return Wa(this,e)});function o(){return $a(this,o),i.apply(this,arguments)}return o}(Ba);function es(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ts(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ns=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.svgNode,o=void 0===i?void 0:i,r=n.coordinateSystem,a=void 0===r?void 0:r,s=n.x,l=void 0===s?0:s,u=n.y,c=void 0===u?0:u,f=n.width,d=void 0===f?100:f,h=n.height,p=void 0===h?100:h,v=n.style,y=void 0===v?{}:v,m=n.visible,b=void 0===m||m,g=n.events,w=void 0===g?{}:g;es(this,e),this._svgNode=(0,Lr.SVG)().attr({x:l,y:c,width:d,height:p}).css(this._getNormalizedStyle(y)).css("display",b?"inline":"none"),void 0!==o&&this.addTo(o),this._svgNodeBackground=this._svgNode.group(),this._visible=b,this._coordinateSystem=a,this._coordinateSystemListenerKey=void 0!==this._coordinateSystem?this._coordinateSystem.on("change:options",(function(){return t.onCoordinateSystemChange()})):void 0,this.on("change:extent",(function(){return t.onCoordinateSystemChange()})),this._initEvents(w)}var t,n;return t=e,(n=[{key:"svgNode",get:function(){return this._svgNode}},{key:"visible",get:function(){return this._visible},set:function(e){var t=this._visible;this._visible=e,t!=this._visible&&(this._svgNode.style("display",this._visible?"inline":"none"),this.trigger("change:visible"))}},{key:"x",get:function(){return this._svgNode.attr("x")},set:function(e){this._svgNode.attr({x:e}),this.trigger("change:position")}},{key:"y",get:function(){return this._svgNode.attr("y")},set:function(e){this._svgNode.attr({y:e}),this.trigger("change:position")}},{key:"width",get:function(){return this._svgNode.attr("width")},set:function(e){this._svgNode.attr({width:e}),this.trigger("change:extent")}},{key:"height",get:function(){return this._svgNode.attr("height")},set:function(e){this._svgNode.attr({height:e}),this.trigger("change:extent")}},{key:"style",get:function(){return this._svgNode.css()},set:function(e){this._svgNode.css(e)}},{key:"coordinateSystem",get:function(){return this._coordinateSystem},set:function(e){var t=this;void 0!==this._coordinateSystemListenerKey&&this._coordinateSystem.un("change:options",this._coordinateSystemListenerKey),this._coordinateSystem=e,this._coordinateSystemListenerKey=this._coordinateSystem.on("change:options",(function(){return t.onCoordinateSystemChange()})),this.onCoordinateSystemChange()}},{key:"minExtentLength",get:function(){return Math.min(this.width,this.height)}},{key:"maxExtentLength",get:function(){return Math.max(this.width,this.height)}},{key:"addTo",value:function(e){this._svgNode.addTo(e)}},{key:"init",value:function(){this.onCoordinateSystemChange()}},{key:"onCoordinateSystemChange",value:function(){void 0!==this._coordinateSystem&&this.drawBackground(this._svgNodeBackground)}},{key:"drawBackground",value:function(e){e.clear(),this.trigger("prebuild:background",{node:e}),this._drawBackground(e),this.trigger("postbuild:background",{node:e})}},{key:"_drawBackground",value:function(){}},{key:"_getNormalizedStyle",value:function(e){var t=e.overflow;return{overflow:void 0===t?"hidden":t}}},{key:"_initEvents",value:function(e){var t=this,n=e.click,i=void 0===n?void 0:n,o=e.dblclick,r=void 0===o?void 0:o,a=e.mousedown,s=void 0===a?void 0:a,l=e.mouseup,u=void 0===l?void 0:l,c=e.mouseover,f=void 0===c?void 0:c,d=e.mouseout,h=void 0===d?void 0:d,p=e.mousemove,v=void 0===p?void 0:p,y=e.touchstart,m=void 0===y?void 0:y,b=e.touchmove,g=void 0===b?void 0:b,w=e.touchleave,_=void 0===w?void 0:w,O=e.touchend,S=void 0===O?void 0:O,T=e.touchcancel,k={click:i,dblclick:r,mousedown:s,mouseup:u,mouseover:f,mouseout:h,mousemove:v,touchstart:m,touchmove:g,touchleave:_,touchend:S,touchcancel:void 0===T?void 0:T};Object.keys(k).forEach((function(e){t._svgNode.on(e,(function(n){var i=t.getExtendedEvent(n,t._svgNode.point(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset));void 0!==k[e]&&k[e].call(t,i),t.trigger(e,i)}))}))}},{key:"getExtendedEvent",value:function(e,t){return e.elementX=t.x,e.elementY=t.y,e}}])&&ts(t.prototype,n),e}();B(ns.prototype);const is=ns;function os(e){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function as(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ls(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function us(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cs(e,t,n){return(cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hs(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function fs(e,t){return(fs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ds(e,t){return!t||"object"!==os(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hs(e){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ps=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fs(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hs(i);if(o){var n=hs(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ds(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.svgNode,i=void 0===n?void 0:n,o=t.coordinateSystem,s=void 0===o?void 0:o,l=t.x,u=void 0===l?0:l,c=t.y,f=void 0===c?0:c,d=t.width,h=void 0===d?100:d,p=t.height,v=void 0===p?100:p,y=t.style,m=void 0===y?{}:y,b=t.visible,g=void 0===b||b,w=t.events,_=void 0===w?{}:w,O=t.getSoundingVisibility,S=void 0===O?function(e){return e.visible}:O,T=t.dataGroupIds,k=void 0===T?[]:T,P=t.getCoordinatesByLevelData,x=void 0===P?function(){return{x:void 0,y:void 0}}:P,R=t.insertDataGroupInto,j=void 0===R?function(){}:R,E=t.filterDataPoint,C=void 0===E?void 0:E,N=t.minDataPointsDistance,B=void 0===N?0:N;return ls(this,a),(e=r.call(this,{svgNode:i,coordinateSystem:s,x:u,y:f,width:h,height:v,style:m,visible:g,events:_}))._getSoundingVisibility=S,e._dataGroupIds=k,e._getCoordinatesByLevelData=x,e._insertDataGroupInto=j,e._filterDataPoint=C,e._minDataPointsDistance=B,e._svgNodeData=e.svgNode.group(),e._soundings=new Map,e}return t=a,(n=[{key:"dataGroupIds",get:function(){return this._dataGroupIds}},{key:"getCoordinatesByLevelData",get:function(){return this._getCoordinatesByLevelData}},{key:"minDataPointsDistance",get:function(){return this._minDataPointsDistance},set:function(e){var t=this._minDataPointsDistance;this._minDataPointsDistance=e,t!=this._minDataPointsDistance&&this.drawSoundings()}},{key:"addSounding",value:function(e){var t=this,n=this._svgNodeData.group(),i=e.on("change:visible",(function(){return t.onChangeSoundingVisibility(e,n)})),o=e.on("change:options",(function(){void 0!==t.coordinateSystem&&t.drawSounding(e,n),t.onChangeSoundingVisibility(e,n)}));this._soundings.set(e,{group:n,listenerKeyVisible:i,listenerKeyOptions:o}),this.trigger("add:sounding",e),void 0!==this.coordinateSystem&&this.drawSounding(e,n),this.setDisplayOfSounding(e,n)}},{key:"removeSounding",value:function(e){this._soundings.has(e)&&(this._soundings.get(e).group.remove(),e.un(this._soundings.get(e).listenerKeyVisible),e.un(this._soundings.get(e).listenerKeyOptions),this._soundings.delete(e)),this.trigger("remove:sounding",e)}},{key:"onCoordinateSystemChange",value:function(){cs(hs(a.prototype),"onCoordinateSystemChange",this).call(this),this.drawSoundings()}},{key:"onChangeSoundingVisibility",value:function(e,t){this.setDisplayOfSounding(e,t)}},{key:"setDisplayOfSounding",value:function(e,t){t.css("display",this._getSoundingVisibility(e)?"inline":"none")}},{key:"drawSoundings",value:function(){if(void 0!==this.coordinateSystem){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ss(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(this._soundings.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.drawSounding(n,this._soundings.get(n).group)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"drawSounding",value:function(e,t){var n=this;t.clear(),this.trigger("preinsert:sounding",{sounding:e,node:t});var i=t.group(),o={},r=this._getFilterDataPointFunction(),a={};e.sounding.getLevels().reverse().forEach((function(t){var i=e.sounding.getData(t);n._dataGroupIds.forEach((function(t){t in o||(o[t]=[]);var s={levelData:i,x:void 0,y:void 0},l=n._getCoordinatesByLevelData(t,e,s.levelData,n),u=l.x,c=l.y;s.x=u,s.y=c,void 0===u||void 0===c||void 0!==r&&r(s,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach((function(t){as(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a))||(a=s,o[t].push(s))}))})),Object.keys(o).forEach((function(t){o[t].length>0&&n._insertDataGroupInto(i,t,e,o[t],n)})),this.trigger("postinsert:sounding",{sounding:e,node:t})}},{key:"_getFilterDataPointFunction",value:function(){return void 0===this._filterDataPoint?0===(e=this._minDataPointsDistance)?void 0:function(t,n){var i=t.x,o=t.y;if(void 0===n.x||void 0===n.y)return n.x=i,n.y=o,!1;var r=Math.sqrt(Math.pow(i-n.x,2)+Math.pow(o-n.y,2))<e;return r||(n.x=i,n.y=o),r}:this._filterDataPoint;var e}}])&&us(t.prototype,n),a}(is);function vs(e){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ms(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gs(e,t,n){return(gs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Os(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ws(e,t){return(ws=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _s(e,t){return!t||"object"!==vs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Ss=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ws(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Os(i);if(o){var n=Os(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _s(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.svgNode,i=void 0===n?void 0:n,o=t.coordinateSystem,s=void 0===o?void 0:o,l=t.x,u=void 0===l?0:l,c=t.y,f=void 0===c?0:c,d=t.width,h=void 0===d?100:d,p=t.height,v=void 0===p?100:p,y=t.style,m=void 0===y?{}:y,b=t.visible,g=void 0===b||b,w=t.events,_=void 0===w?{}:w,O=t.hoverLabels,S=void 0===O?{}:O,T=t.getSoundingVisibility,k=void 0===T?function(e){return e.visible}:T,P=t.dataGroupIds,x=void 0===P?void 0:P,R=t.getCoordinatesByLevelData,j=void 0===R?void 0:R,E=t.insertDataGroupInto,C=void 0===E?void 0:E,N=t.filterDataPoint,B=void 0===N?void 0:N,I=t.minDataPointsDistance,D=void 0===I?0:I;return ms(this,a),(e=r.call(this,{svgNode:i,coordinateSystem:s,x:u,y:f,width:h,height:v,style:m,visible:g,events:_,getSoundingVisibility:k,dataGroupIds:x,getCoordinatesByLevelData:j,insertDataGroupInto:C,filterDataPoint:B,minDataPointsDistance:D}))._hoverLabelsGroup=e.svgNode.group(),e._isHoverLabelsRemote=!0,e._initHoverLabels(S),e}return t=a,(n=[{key:"onChangeSoundingVisibility",value:function(e,t){gs(Os(a.prototype),"onChangeSoundingVisibility",this).call(this,e,t),this._hoverLabelsGroup.clear()}},{key:"drawSounding",value:function(e,t){gs(Os(a.prototype),"drawSounding",this).call(this,e,t),this._getSoundingVisibility(e)&&this._hoverLabelsGroup.clear()}},{key:"getExtendedEvent",value:function(e,t){return(e=gs(Os(a.prototype),"getExtendedEvent",this).call(this,e,t)).diagramPres=void 0,void 0!==this.coordinateSystem&&(e.diagramPres=this.coordinateSystem.getPByXY(0,this.coordinateSystem.height-e.elementY)),e}},{key:"isHoverLabelsRemote",get:function(){return this._isHoverLabelsRemote}},{key:"hoverLabelsSounding",get:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ys(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(this._soundings.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this._getSoundingVisibility(n))return n}}catch(e){t.e(e)}finally{t.f()}}},{key:"_initHoverLabels",value:function(e){var t=this,n=e.visible,i=void 0===n||n,o=e.type,r=void 0===o?"mousemove":o,a=e.remote,s=void 0===a||a,l=e.insertLabelsFunc,u=void 0===l?void 0:l;this._isHoverLabelsRemote=s,i&&void 0!==u&&(this.on("change:extent",(function(){return t._hoverLabelsGroup.clear()})),this.on(r,(function(e){if(e.diagramPres){var n=t.hoverLabelsSounding;if(void 0!==n){var i=n.sounding;u(n,i.getData(i.getNearestLevel(e.diagramPres)),t._hoverLabelsGroup)}}})))}}])&&bs(t.prototype,n),a}(ps);function Ts(e){return(Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ks(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function xs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function js(e,t,n){return(js="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ns(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Es(e,t){return(Es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cs(e,t){return!t||"object"!==Ts(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ns(e){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Bs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Es(e,t)}(l,e);var n,i,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ns(o);if(a){var n=Ns(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Cs(this,e)});function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.svgNode,i=void 0===n?void 0:n,o=t.coordinateSystem,r=void 0===o?void 0:o,a=t.x,c=void 0===a?0:a,f=t.y,d=void 0===f?0:f,h=t.width,p=void 0===h?100:h,v=t.height,b=void 0===v?100:v,g=t.style,w=void 0===g?{}:g,_=t.visible,O=void 0===_||_,S=t.events,T=void 0===S?{}:S,k=t.dataGroupIds,P=void 0===k?["temp","dewp","wetbulb"]:k,x=t.getCoordinatesByLevelData,R=void 0===x?function(e,t,n,i){if(void 0===n.pres)return{};var o=void 0;switch(e){case"temp":o=n.tmpk;break;case"dewp":o=n.dwpk;break;case"wetbulb":o=u(n.tmpk,n.dwpk,n.pres)}return void 0===o?{}:{x:i.coordinateSystem.getXByPT(n.pres,o),y:i.coordinateSystem.height-i.coordinateSystem.getYByPT(n.pres,o),value:Math.round(10*m(o))/10,unit:""}}:x,j=t.insertDataGroupInto,E=void 0===j?function(e,t,n,i){var o=t in n.options.diagram?n.options.diagram[t].style:{};e.group().polyline(i.map((function(e){return[e.x,e.y]}))).fill("none").stroke(o)}:j,C=t.filterDataPoint,N=void 0===C?void 0:C,B=t.minDataPointsDistance,I=void 0===B?0:B,D=t.isobars,A=void 0===D?{}:D,L=t.isotherms,M=void 0===L?{}:L,V=t.dryadiabats,G=void 0===V?{}:V,Y=t.pseudoadiabats,F=void 0===Y?{}:Y,X=t.mixingratio,z=void 0===X?{}:X,q=t.hoverLabels,H=void 0===q?{}:q,K=t.parcels,U=void 0===K?{}:K;return xs(this,l),(e=s.call(this,{svgNode:i,coordinateSystem:r,x:c,y:d,width:p,height:b,style:w,visible:O,events:T,hoverLabels:H,getSoundingVisibility:function(e){return e.visible&&e.options.diagram.visible},dataGroupIds:P,getCoordinatesByLevelData:R,insertDataGroupInto:E,filterDataPoint:N,minDataPointsDistance:I})).options={isobars:Is(A),isotherms:Is(M,{highlightedLines:[y(0)]}),dryadiabats:Is(G),pseudoadiabats:Is(F,{style:{color:"rgb(102, 51, 0)",dasharray:6}}),mixingratio:Is(z,{minPressure:500,style:{color:"rgb(102, 51, 0)",dasharray:2}})},e.svgGroups={border:e._svgNodeBackground.group(),isobars:e._svgNodeBackground.group(),isotherms:e._svgNodeBackground.group(),dryadiabats:e._svgNodeBackground.group(),mixingratio:e._svgNodeBackground.group(),pseudoadiabats:e._svgNodeBackground.group()},e._parcelsOptions=U,"visible"in e._parcelsOptions||(e._parcelsOptions.visible=!0),e._parcels=new Map,e.on("add:sounding",(function(t){var n={parcelsGroup:void 0,parcelsGroups:new Map,addItemListenerKey:void 0,removeItemListenerKey:void 0,changeVisibleListeners:[],changeOptionsListeners:[]},i=function(i){n.changeVisibleListeners.push({diagramParcel:i,listenerKey:i.on("change:visible",(function(){if(n.parcelsGroups.has(i)){var e=n.parcelsGroups.get(i);i.visible?e.show():e.hide()}}))}),n.changeOptionsListeners.push({diagramParcel:i,listenerKey:i.on("change:options",(function(){var n=e._parcels.get(t);if(void 0!==n){var o=n.parcelsGroups.get(i);void 0!==o&&(n.parcelsGroups.delete(i),o.remove())}e.drawParcel(t,i)}))})};n.addItemListenerKey=t.diagramParcelCollection.on("add:item",(function(n){i(n),e.drawParcel(t,n)})),n.removeItemListenerKey=t.diagramParcelCollection.on("remove:item",(function(e){var t=n.parcelsGroups.get(e);void 0!==t&&(n.parcelsGroups.delete(e),t.remove())}));var o,r=ks(t.diagramParcelCollection);try{for(r.s();!(o=r.n()).done;){var a=o.value;i(a)}}catch(e){r.e(e)}finally{r.f()}e._parcels.set(t,n)})),e.on("remove:sounding",(function(t){if(e._parcels.has(t)){var n=e._parcels.get(t);t.diagramParcelCollection.un("add:item",n.addItemListenerKey),t.diagramParcelCollection.un("remove:item",n.removeItemListenerKey),n.changeVisibleListeners.forEach((function(e){return e.diagramParcel.un("change:visible",e.listenerKey)})),n.changeOptionsListeners.forEach((function(e){return e.diagramParcel.un("change:options",e.listenerKey)}))}e._parcels.delete(t)})),e.init(),e}return n=l,(i=[{key:"getIsobarsVisible",value:function(){return this.options.isobars.visible}},{key:"setIsobarsVisible",value:function(e){return this.options.isobars.visible=!!e,this.plotIsobars(),this}},{key:"getIsothermsVisible",value:function(){return this.options.isotherms.visible}},{key:"setIsothermsVisible",value:function(e){return this.options.isotherms.visible=!!e,this.plotIsotherms(),this}},{key:"getDryadiabatsVisible",value:function(){return this.options.dryadiabats.visible}},{key:"setDryadiabatsVisible",value:function(e){return this.options.dryadiabats.visible=!!e,this.plotDryadiabats(),this}},{key:"getPseudoadiabatsVisible",value:function(){return this.options.pseudoadiabats.visible}},{key:"setPseudoadiabatsVisible",value:function(e){return this.options.pseudoadiabats.visible=!!e,this.plotPseudoadiabats(),this}},{key:"getMixingratioVisible",value:function(){return this.options.mixingratio.visible}},{key:"setMixingratioVisible",value:function(e){return this.options.mixingratio.visible=!!e,this.plotMixingratio(),this}},{key:"drawSounding",value:function(e,t){if(js(Ns(l.prototype),"drawSounding",this).call(this,e,t),this._parcels.has(e)){var n=this._parcels.get(e);n.parcelsGroup=t.group(),e.options.parcels.visible||n.parcelsGroup.hide(),this._parcels.set(e,n)}this.drawParcels(e)}},{key:"drawParcels",value:function(e){if(this._parcelsOptions.visible&&this._parcels.has(e)){var t=this._parcels.get(e);t.parcelsGroup.clear(),t.parcelsGroups.clear();var n,i=ks(e.diagramParcelCollection);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.drawParcel(e,o)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"drawParcel",value:function(e,t){var n=this,i=t.parcel;if(void 0!==i.pres&&void 0!==i.tmpc&&void 0!==i.dwpc&&this._parcels.has(e)){var o=this._parcels.get(e),a=o.parcelsGroup.group();o.parcelsGroups.set(t,a),this._parcels.set(e,o);var s=r(y(i.tmpc),i.pres),l=d(y(i.dwpc),i.pres),u=h(s,l),f=v(y(i.tmpc),y(i.dwpc)),p=c(f,f,u),m=t.options;m.visible||a.hide();var b=a.group();m.temp.visible||b.hide();var g=a.group();m.dewp.visible||g.hide();var w=10,_=this.coordinateSystem.getYByPT(i.pres,y(i.tmpc)),O=this.coordinateSystem.getXByYPotentialTemperature(_,s),S=this.coordinateSystem.getYByPPotentialTemperatur(u,s),T=this.coordinateSystem.getXByYPotentialTemperature(S,s),k=[[O,_]];if(!this.coordinateSystem.isDryAdiabatStraightLine())for(var P=_+w;P<S;P+=w)k.push([this.coordinateSystem.getXByYPotentialTemperature(P,s),P]);k.push([T,S]);for(var x=this.coordinateSystem.height,R=this.coordinateSystem.getXByYEquiPotTemp(x,p),j=S+w;j<x;j+=w)k.push([this.coordinateSystem.getXByYEquiPotTemp(j,p),j]);k.push([R,x]),b.polyline(k.map((function(e){return e[1]=n.coordinateSystem.height-e[1],e}))).fill("none").stroke(m.temp.style);for(var E=this.coordinateSystem.getXByYHMR(_,l),C=this.coordinateSystem.getXByYHMR(S,l),N=[[E,_]],B=_+w;B<S;B+=w)N.push([this.coordinateSystem.getXByYHMR(B,l),B]);N.push([C,S]),g.polyline(N.map((function(e){return e[1]=n.coordinateSystem.height-e[1],e}))).fill("none").stroke(m.dewp.style)}}},{key:"_drawBackground",value:function(e){js(Ns(l.prototype),"_drawBackground",this).call(this,e),this.svgGroups={border:e.group(),isobars:e.group(),isotherms:e.group(),dryadiabats:e.group(),mixingratio:e.group(),pseudoadiabats:e.group()},this.svgGroups.border.clear(),this.svgGroups.border.rect(this.coordinateSystem.width,this.coordinateSystem.height).attr({stroke:"black","stroke-width":1,"fill-opacity":0}),this.plotIsobars(!0),this.plotIsotherms(!0),this.plotDryadiabats(!0),this.plotPseudoadiabats(!0),this.plotMixingratio(!0)}},{key:"plotIsobars",value:function(e){var t=this,n=this.coordinateSystem.getPByXY(0,this.coordinateSystem.height),i=this.coordinateSystem.getPByXY(0,0),o=i-n;this._plotLines(this.svgGroups.isobars,this.options.isobars,{min:n,max:i,interval:o>500?100:o>50?10:1},(function(e){var n=t.coordinateSystem.getYByXP(0,e);return[[0,n],[t.coordinateSystem.width,n]]}),e)}},{key:"plotIsotherms",value:function(e){var t=this,n=m(this.coordinateSystem.getTByXY(0,this.coordinateSystem.height)),i=m(this.coordinateSystem.getTByXY(this.coordinateSystem.width,0)),o=i-n;this._plotLines(this.svgGroups.isotherms,this.options.isotherms,{min:n,max:i,interval:o>50?10:5},(function(e){e=y(e);var n=[[void 0,void 0],[void 0,void 0]];return t.coordinateSystem.isIsothermsVertical()?(n[0][1]=0,n[1][1]=t.coordinateSystem.height,n[0][0]=n[1][0]=t.coordinateSystem.getXByYT(n[0][1],e)):(n[0][1]=0,n[0][0]=t.coordinateSystem.getXByYT(n[0][1],e),n[0][0]<0&&(n[0][1]=t.coordinateSystem.getYByXT(n[0][0]=0,e)),n[1][0]=t.coordinateSystem.width,n[1][1]=t.coordinateSystem.getYByXT(n[1][0],e),void 0===n[1][1]?(n[1][0]=n[0][0],n[1][1]=t.coordinateSystem.height):n[1][1]>t.coordinateSystem.height&&(n[1][1]=t.coordinateSystem.height,n[1][0]=t.coordinateSystem.getXByYT(n[1][1],e))),n}),e)}},{key:"plotDryadiabats",value:function(e){var t=this;this._plotLines(this.svgGroups.dryadiabats,this.options.dryadiabats,{min:m(r(this.coordinateSystem.getTByXY(0,0),this.coordinateSystem.getPByXY(0,0))),max:m(r(this.coordinateSystem.getTByXY(this.coordinateSystem.width,this.coordinateSystem.height),this.coordinateSystem.getPByXY(this.coordinateSystem.width,this.coordinateSystem.height))),interval:10},(function(e){var n=y(e),i=0,o=t.coordinateSystem.getXByYPotentialTemperature(i,n);(void 0===o||o>t.coordinateSystem.width)&&(o=t.coordinateSystem.width,i=t.coordinateSystem.getYByXPotentialTemperature(o,n));var r=0,a=t.coordinateSystem.getYByXPotentialTemperature(r,n);if((void 0===a||a>t.coordinateSystem.height)&&(a=t.coordinateSystem.height,r=t.coordinateSystem.getXByYPotentialTemperature(a,n)),void 0!==o&&void 0!==i&&void 0!==r&&void 0!==a){if(t.coordinateSystem.isDryAdiabatStraightLine())return[[o,i],[r,a]];for(var s=[[o,i]],l=i+10;l<a;l+=10)s.push([t.coordinateSystem.getXByYPotentialTemperature(l,n),l]);return s.push([r,a]),s}}),e)}},{key:"plotPseudoadiabats",value:function(e){var t=this;this._plotLines(this.svgGroups.pseudoadiabats,this.options.pseudoadiabats,{lines:[-18,-5,10,30,60,110,180]},(function(e){for(var n=y(e),i=Math.max(0,void 0===t.options.pseudoadiabats.maxPressure?0:t.coordinateSystem.getYByPEquiPotTemp(t.options.pseudoadiabats.maxPressure,n)),o=t.coordinateSystem.getXByYEquiPotTemp(i,n),r=Math.min(t.coordinateSystem.height,void 0===t.options.pseudoadiabats.minPressure?t.coordinateSystem.height:t.coordinateSystem.getYByPEquiPotTemp(t.options.pseudoadiabats.minPressure,n)),a=t.coordinateSystem.getXByYEquiPotTemp(r,n),s=[[o,i]],l=i+10;l<r;l+=10)s.push([t.coordinateSystem.getXByYEquiPotTemp(l,n),l]);return s.push([a,r]),s}),e)}},{key:"plotMixingratio",value:function(e){var t=this;this._plotLines(this.svgGroups.mixingratio,this.options.mixingratio,{lines:[.01,.1,1,2,4,7,10,16,21,32,40]},(function(e){for(var n=Math.max(0,void 0===t.options.mixingratio.maxPressure?0:t.coordinateSystem.getYByPHMR(t.options.mixingratio.maxPressure,e)),i=t.coordinateSystem.getXByYHMR(n,e),o=Math.min(t.coordinateSystem.height,void 0===t.options.mixingratio.minPressure?t.coordinateSystem.height:t.coordinateSystem.getYByPHMR(t.options.mixingratio.minPressure,e)),r=t.coordinateSystem.getXByYHMR(o,e),a=[[i,n]],s=n+10;s<o;s+=10)a.push([t.coordinateSystem.getXByYHMR(s,e),s]);return a.push([r,o]),a}),e)}},{key:"_plotLines",value:function(e,t,n,i,o){if(t.visible?e.show():e.hide(),o){e.clear();var r=[];if(void 0!==t.lines)r=t.lines;else if(void 0===t.min&&void 0===t.max&&void 0===t.interval&&void 0!==n.lines)r=n.lines;else{void 0!==t.min&&(n.min=t.min),void 0!==t.max&&(n.max=t.max);var a=t.interval;void 0===a&&(a=n.interval);for(var s=Math.ceil(n.min/a)*a,l=Math.floor(n.max/a)*a,u=s;u<=l;u+=a)r.push(u)}var c=3;void 0!==t.style.width&&(c=t.style.width+2),r.forEach((function(n){var o=i.call(this,n),r=2==o.length?e.line(o[0][0],this.coordinateSystem.height-o[0][1],o[1][0],this.coordinateSystem.height-o[1][1]).stroke(t.style):e.polyline(o.map((function(e){return e[1]=this.coordinateSystem.height-e[1],e}),this)).fill("none").stroke(t.style);void 0!==t.highlightedLines&&t.highlightedLines.forEach((function(e){n==e&&r.stroke({width:c})}),this)}),this)}}},{key:"getExtendedEvent",value:function(e,t){return(e=js(Ns(l.prototype),"getExtendedEvent",this).call(this,e,t)).diagramTmpk=this.coordinateSystem.getTByXY(e.elementX,this.coordinateSystem.height-e.elementY),e}},{key:"_initHoverLabels",value:function(e){var t=e.visible,n=void 0===t||t,i=e.type,o=void 0===i?"mousemove":i,r=e.snapToData,a=void 0===r||r,s=e.remote,u=void 0===s||s,c=e.insertLabelsFunc,f=void 0===c?void 0:c,d=e.pres,h=void 0===d?{}:d,p=e.temp,v=void 0===p?{}:p,y=e.dewp,m=void 0===y?{}:y,b=e.wetbulb,g=void 0===b?{}:b;h.length="length"in h?h.length:60,h.align="align"in h?h.align:"left","visible"in h||(h.visible=!0),"style"in h||(h.style={}),h.font=Fr(h.font,{anchor:"right"==h.align?"end":"start"}),"fill"in h||(h.fill={}),void 0===h.fill.opacity&&(h.fill.opacity=.7),void 0===h.horizontalMargin&&(h.horizontalMargin=5),"visible"in v||(v.visible=!0),"style"in v||(v.style={}),v.font=Fr(v.font,{anchor:"start","alignment-baseline":"bottom"}),"fill"in v||(v.fill={}),void 0===v.fill.opacity&&(v.fill.opacity=.7),v.radius="radius"in v?v.radius:void 0,v.radiusPlus="radiusPlus"in v?v.radiusPlus:2,void 0===v.horizontalMargin&&(v.horizontalMargin=10),"visible"in m||(m.visible=!0),"style"in m||(m.style={}),m.font=Fr(m.font,{anchor:"end","alignment-baseline":"bottom"}),"fill"in m||(m.fill={}),void 0===m.fill.opacity&&(m.fill.opacity=.7),m.radius="radius"in m?m.radius:void 0,m.radiusPlus="radiusPlus"in m?m.radiusPlus:2,void 0===m.horizontalMargin&&(m.horizontalMargin=10),"visible"in g||(g.visible=!0),"style"in g||(g.style={}),g.font=Fr(g.font,{anchor:"middle"}),"fill"in g||(g.fill={}),void 0===g.fill.opacity&&(g.fill.opacity=.7),g.radius="radius"in g?g.radius:void 0,g.radiusPlus="radiusPlus"in g?g.radiusPlus:2,void 0===g.verticalMargin&&(g.verticalMargin=10),void 0===f&&(f=this._makeInsertLabelsFunc(h,v,m,g)),js(Ns(l.prototype),"_initHoverLabels",this).call(this,{visible:n,type:o,snapToData:a,remote:u,insertLabelsFunc:f})}},{key:"_makeInsertLabelsFunc",value:function(e,n,i,o){var r=this;return function(a,s,l){l.clear(),void 0!==s.pres&&(e.visible&&function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.length,a=void 0===r?60:r,s=o.align,l=void 0===s?"left":s,u=o.horizontalMargin,c=void 0===u?void 0:u,f=o.verticalMargin,d=void 0===f?void 0:f,h=o.style,p=void 0===h?{}:h,v=o.font,y=void 0===v?{}:v,m=o.fill,b=void 0===m?{}:m,g=0,w=a,_=/^([0-9]+)%$/.exec(w);_&&(w=_[1]/100*i.width),"right"==l&&(g=i.width,w=i.width-w);var O=i.height-i.getYByXP(0,n.pres);p=Yr(p),e.line([[Math.min(g,w),O],[Math.max(g,w),O]]).stroke(p),(y=Fr(y))["alignment-baseline"]="bottom",Hr({node:e,text:"".concat(Math.round(n.pres)," hPa"),x:g,y:O,horizontalMargin:c,verticalMargin:d,font:y,fill:b}),y["alignment-baseline"]="top";var S=void 0===n.hght?"~".concat(Math.round(t(n.pres))," m"):"".concat(Math.round(n.hght)," m");Hr({node:e,text:S,x:g,y:O,horizontalMargin:c,verticalMargin:d,font:y,fill:b})}(l,s,r.coordinateSystem,e),r.dataGroupIds.reverse().forEach((function(e){var t={visible:!1};switch(e){case"temp":t=n;break;case"dewp":t=i;break;case"wetbulb":t=o}if(t.visible){var u=r._getCoordinatesByLevelData(e,a,s,r),c=u.x,f=u.y,d=u.value,h=u.unit;if(void 0!==c&&void 0!==f){var p=e in r.hoverLabelsSounding.options.diagram?r.hoverLabelsSounding.options.diagram[e].style.width:3,v=void 0===t.radius?p+t.radiusPlus:t.radius,y=t.style;!("color"in y)&&e in r.hoverLabelsSounding.options.diagram&&(y.color=a.options.diagram[e].style.color),l.circle(2*v).attr({cx:c,cy:f}).fill(y),Hr({node:l,text:"".concat(d," ").concat(h),x:c,y:f,horizontalMargin:t.horizontalMargin,verticalMargin:t.verticalMargin,font:t.font,fill:t.fill})}}})))}}}])&&Rs(n.prototype,i),l}(Ss);function Is(e){var t=e.highlightedLines,n=void 0===t?void 0:t,i=e.interval,o=void 0===i?void 0:i,r=e.lines,a=void 0===r?void 0:r,s=e.max,l=void 0===s?void 0:s,u=e.min,c=void 0===u?void 0:u,f=e.maxPressure,d=void 0===f?void 0:f,h=e.minPressure,p=void 0===h?void 0:h,v=e.style,y=void 0===v?void 0:v,m=e.visible,b=void 0===m?void 0:m,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{highlightedLines:qr(n,g.highlightedLines),interval:qr(o,g.interval),lines:qr(a,g.lines),max:qr(l,g.max),min:qr(c,g.min),maxPressure:qr(d,g.maxPressure),minPressure:qr(p,g.minPressure),style:Yr(y,g.style),visible:qr(b,g.visible,!0)}}function Ds(e){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function As(e,t){return(As=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ls(e,t){return!t||"object"!==Ds(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ms(e){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Vs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&As(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=Ms(t);if(n){var o=Ms(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return Ls(this,e)});function o(e){var t,n=e.svgNode,r=void 0===n?void 0:n,a=e.coordinateSystem,s=void 0===a?void 0:a,l=e.x,u=void 0===l?void 0:l,c=e.y,f=void 0===c?void 0:c,d=e.width,h=void 0===d?void 0:d,p=e.height,v=void 0===p?void 0:p,y=e.style,m=void 0===y?{}:y,b=e.visible,g=void 0===b||b,w=e.events,_=void 0===w?{}:w,O=e.hoverLabels,S=void 0===O?{}:O,T=e.windbarbLength,k=void 0===T?void 0:T,P=e.dataGroupIds,x=void 0===P?["windbarbs"]:P,R=e.getCoordinatesByLevelData,j=void 0===R?function(e,t,n,i){return void 0===n.pres||void 0===n.wspd||void 0===n.wdir?{}:{x:i.width/2,y:i.coordinateSystem.height-i.coordinateSystem.getYByXP(0,n.pres)}}:R,E=e.insertDataGroupInto,C=void 0===E?function(e,t,n,i,o){i.forEach((function(t){Kr({node:e,x:o.width/2,y:t.y,wspd:t.levelData.wspd,wdir:t.levelData.wdir,length:o._windbarbLength,strokeStyle:n.options.windprofile.windbarbs.style})}))}:E,N=e.filterDataPoint,B=void 0===N?void 0:N,I=e.minDataPointsDistance,D=void 0===I?void 0:I;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{svgNode:r,coordinateSystem:s,x:u,y:f,width:h,height:v,style:m,visible:g,events:_,hoverLabels:S,getSoundingVisibility:function(e){return e.visible&&e.options.windprofile.windbarbs.visible},dataGroupIds:x,getCoordinatesByLevelData:j,insertDataGroupInto:C,filterDataPoint:B,minDataPointsDistance:void 0===D?0:D}))._windbarbLength=k,void 0===t._windbarbLength&&(t._windbarbLength=2*t.width/5),void 0===D&&(t.minDataPointsDistance=t._windbarbLength/2),t.init(),t}return o}(Ss);function Gs(e){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zs(e,t,n){return(zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ks(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function qs(e,t){return(qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hs(e,t){return!t||"object"!==Gs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ks(e){return(Ks=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Us=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qs(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ks(i);if(o){var n=Ks(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Hs(this,e)});function a(e){var t,n=e.svgNode,i=void 0===n?void 0:n,o=e.coordinateSystem,s=void 0===o?void 0:o,l=e.x,u=void 0===l?void 0:l,c=e.y,f=void 0===c?void 0:c,d=e.width,h=void 0===d?void 0:d,p=e.height,v=void 0===p?void 0:p,y=e.style,m=void 0===y?{}:y,b=e.visible,g=void 0===b||b,w=e.events,O=void 0===w?{}:w,S=e.hoverLabels,T=void 0===S?{}:S,k=e.windspeedMax,P=void 0===k?_(150):k,x=e.dataGroupIds,R=void 0===x?["windspeed"]:x,j=e.getCoordinatesByLevelData,E=void 0===j?function(e,t,n,i){return void 0===n.pres||void 0===n.wspd?{}:{x:i.width*n.wspd/P,y:i.coordinateSystem.height-i.coordinateSystem.getYByXP(0,n.pres)}}:j,C=e.insertDataGroupInto,N=void 0===C?function(e,t,n,i){e.polyline(i.map((function(e){return[e.x,e.y]}))).fill("none").stroke(n.options.windprofile.windspeed.style)}:C,B=e.filterDataPoint,I=void 0===B?void 0:B,D=e.minDataPointsDistance,A=void 0===D?0:D;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,{svgNode:i,coordinateSystem:s,x:u,y:f,width:h,height:v,style:m,visible:g,events:O,hoverLabels:T,getSoundingVisibility:function(e){return e.visible&&e.options.windprofile.windspeed.visible},dataGroupIds:R,getCoordinatesByLevelData:E,insertDataGroupInto:N,filterDataPoint:I,minDataPointsDistance:A})).init(),t}return t=a,(n=[{key:"_drawBackground",value:function(e){zs(Ks(a.prototype),"_drawBackground",this).call(this,e),e.line(0,0,0,this.height).stroke({color:"black",width:1}),e.line(this.width,0,this.width,this.height).stroke({color:"black",width:1})}},{key:"_initHoverLabels",value:function(e){var t=e.visible,n=void 0===t||t,i=e.type,o=void 0===i?"mousemove":i,r=e.snapToData,s=void 0===r||r,l=e.remote,u=void 0===l||l,c=e.insertLabelsFunc,f=void 0===c?void 0:c,d=e.windspeed,h=void 0===d?{}:d;"visible"in h||(h.visible=!0),"style"in h||(h.style={}),h.font=Fr(h.font,{anchor:"end","alignment-baseline":"bottom"}),"fill"in h||(h.fill={}),void 0===h.fill.opacity&&(h.fill.opacity=.7),h.radius="radius"in h?h.radius:void 0,h.radiusPlus="radiusPlus"in h?h.radiusPlus:2,void 0===h.horizontalMargin&&(h.horizontalMargin=10),void 0===f&&(f=this._makeInsertLabelsFunc(h)),zs(Ks(a.prototype),"_initHoverLabels",this).call(this,{visible:n,type:o,snapToData:s,remote:u,insertLabelsFunc:f})}},{key:"_makeInsertLabelsFunc",value:function(e){var t=this;return function(n,i,o){if(o.clear(),void 0!==i.pres&&e.visible&&void 0!==i.wspd){var r=t._getCoordinatesByLevelData("windspeed",n,i,t),a=r.x,s=r.y;if(void 0!==a&&void 0!==s){var l=void 0===e.radius?t.hoverLabelsSounding.options.windprofile.windspeed.style.width/2+e.radiusPlus:e.radius,u=e.style;"color"in u||(u.color=n.options.windprofile.windspeed.style.color);var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(n),!0).forEach((function(t){Fs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.font);"start"==c.anchor&&t.width-a<45&&(c.anchor="end"),"end"==c.anchor&&a<45&&(c.anchor="start"),"bottom"==c["alignment-baseline"]&&s<5*c.size/4&&(c["alignment-baseline"]="top"),"top"==c["alignment-baseline"]&&t.height-s<5*c.size/4&&(c["alignment-baseline"]="bottom"),o.circle(2*l).attr({cx:a,cy:s}).fill(u),Hr({node:o,text:"".concat(Math.round(10*w(i.wspd))/10," kn"),x:a,y:s,horizontalMargin:e.horizontalMargin,verticalMargin:e.verticalMargin,font:c,fill:e.fill})}}}}}])&&Xs(t.prototype,n),a}(Ss);function $s(e){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ws(e,t,n){return(Ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=el(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Js(e,t){return(Js=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qs(e,t){return!t||"object"!==$s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function el(e){return(el=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const tl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Js(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=el(i);if(o){var n=el(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Qs(this,e)});function a(e){var t,n=e.svgNode,i=void 0===n?void 0:n,o=e.coordinateSystem,s=e.x,l=e.y,u=e.width,c=e.height,f=e.style,d=void 0===f?{}:f,h=e.visible,p=void 0===h||h,v=e.events,y=void 0===v?{}:v,m=e.dataGroupIds,b=void 0===m?["windbarbs"]:m,g=e.getCoordinatesByLevelData,w=void 0===g?function(e,t,n,i){if(void 0===n.wspd||void 0===n.wdir)return{};var o=n.wspd*-Math.sin(n.wdir/180*Math.PI),r=n.wspd*Math.cos(n.wdir/180*Math.PI);return{x:i.center[0]+o*i.pixelPerSpeed,y:i.center[1]+r*i.pixelPerSpeed}}:g,O=e.insertDataGroupInto,S=void 0===O?function(e,t,n,i){e.polyline(i.map((function(e){return[e.x,e.y]}))).fill("none").stroke(n.options.hodograph.style)}:O,T=e.grid,k=void 0===T?{}:T,P=e.windspeedMax,x=void 0===P?_(150):P,R=e.origin,j=void 0===R?void 0:R,E=e.filterDataPoint,C=void 0===E?void 0:E,N=e.minDataPointsDistance,B=void 0===N?0:N;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,{svgNode:i,coordinateSystem:o,x:s,y:l,width:u,height:c,style:d,visible:p,events:y,dataGroupIds:b,getCoordinatesByLevelData:w,insertDataGroupInto:S,getSoundingVisibility:function(e){return e.visible&&e.options.hodograph.visible},filterDataPoint:C,minDataPointsDistance:B}))._gridOptions=t.getNormalizedGridOptions(k),t.center=[t.width/2,t.height/2],void 0!==j&&(t.center[0]-=j[0]*t.minLength/2,t.center[1]+=j[1]*t.minLength/2),t.pixelPerSpeed=Math.min(Math.max(t.width-t.center[0],t.center[0]),Math.max(t.height-t.center[1],t.center[1]))/x,void 0===t._gridOptions.max&&(t._gridOptions.max=x),t.init(),t}return t=a,(n=[{key:"_drawBackground",value:function(e){if(Ws(el(a.prototype),"_drawBackground",this).call(this,e),e.rect(this.width-2,this.height-2).move(1,1).fill({color:"white"}).stroke({color:"black",width:1}),this._gridOptions.axes.visible){var t=this._gridOptions.max+this._gridOptions.circles.interval/2;e.line(Math.max(0,this.center[0]-t*this.pixelPerSpeed),this.center[1],Math.min(this.width,this.center[0]+t*this.pixelPerSpeed),this.center[1]).stroke(this._gridOptions.axes.style),e.line(this.center[0],Math.max(0,this.center[1]-t*this.pixelPerSpeed),this.center[0],Math.min(this.height,this.center[1]+t*this.pixelPerSpeed)).stroke(this._gridOptions.axes.style)}for(var n=this._gridOptions.circles.interval;n<=this._gridOptions.max;n+=this._gridOptions.circles.interval){var i=n*this.pixelPerSpeed;if(e.circle(2*i).attr({cx:this.center[0],cy:this.center[1]}).fill("none").stroke(this._gridOptions.circles.style),this._gridOptions.labels.visible){var o=i*Math.cos((this._gridOptions.labels.angle-90)/180*Math.PI),r=i*Math.sin((this._gridOptions.labels.angle-90)/180*Math.PI),s="middle",l=0,u=-this._gridOptions.labels.font.size;0==this._gridOptions.labels.angle||180==this._gridOptions.labels.angle?(l=-3,s="end"):90!=this._gridOptions.labels.angle&&270!=this._gridOptions.labels.angle||(u=-3);var c=e.plain(""+Math.round(b(n))).move(this.center[0]+o,this.center[1]+r).attr({"text-anchor":s,dx:l,dy:u}).font(this._gridOptions.labels.font),f=c.bbox();c.before(e.rect(f.width,f.height).move(f.x,f.y).fill("white"))}}}},{key:"getNormalizedGridOptions",value:function(e){var t=e.axes,n=void 0===t?{}:t,i=e.circles,o=void 0===i?{}:i,r=e.labels,a=void 0===r?{}:r,s=e.max,l=void 0===s?void 0:s;return n=Xr(n),"interval"in(o=Xr(o))&&void 0!==o.interval||(o.interval=g(50)),"angle"in(a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visible,n=void 0===t||t,i=e.font,o=void 0===i?{}:i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{visible:qr(n,r.visible,!0),font:Fr(o,r.font)}}(a))&&void 0!==a.angle||(a.angle=225),void 0===a.font.size&&(a.font.size=10),{axes:n,circles:o,labels:a,max:l}}}])&&Zs(t.prototype,n),a}(ps);function nl(e){return(nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function il(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rl(e,t,n){return(rl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ll(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function al(e,t){return(al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sl(e,t){return!t||"object"!==nl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ul=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&al(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ll(i);if(o){var n=ll(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return sl(this,e)});function a(e){var t,n,i,o,s,l=e.svgNode,u=void 0===l?void 0:l,c=e.coordinateSystem,f=e.x,d=e.y,h=e.width,p=e.height,v=e.style,y=void 0===v?{}:v,m=e.visible,b=void 0===m||m,g=e.events,w=void 0===g?{}:g,_=e.labels,O=void 0===_?{}:_,S=e.title,T=void 0===S?{}:S;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),void 0===y.overflow&&(y.overflow="visible"),(t=r.call(this,{svgNode:u,coordinateSystem:c,x:f,y:d,width:h,height:p,style:y,visible:b,events:w}))._labelsOptions=((s={enabled:void 0===(i=(n=O).enabled)||i,style:void 0===(o=n.style)?{}:o}).style=Yr(s.style),s),t._titleOptions=function(e){var t=e.align,n=void 0===t?"middle":t,i=e.style,o=void 0===i?{}:i,r=e.text,a={align:n,style:o,text:void 0===r?void 0:r};return a.style=Yr(a.style),a}(T),t.init(),t}return t=a,(n=[{key:"_drawBackground",value:function(e){if(rl(ll(a.prototype),"_drawBackground",this).call(this,e),this._labelsOptions.enabled)for(var t=e.group(),n=50*Math.ceil(this.coordinateSystem.getPByXY(0,this.height)/50),i=50*Math.floor(this.coordinateSystem.getPByXY(0,0)/50),o=n;o<=i;o+=50){var r=this.height-this.coordinateSystem.getYByXP(0,o);t.plain(o).attr({y:r+3.3,x:this.width}).font({size:"11px",anchor:"end"}).attr({fill:this._labelsOptions.style.color})}void 0!==this._titleOptions.text&&e.group().plain(this._titleOptions.text).attr({x:12*.4,y:this.height/2,fill:this._titleOptions.style.color}).font({size:12,anchor:"middle"}).rotate(-90)}}])&&il(t.prototype,n),a}(is);const cl=ul;function fl(e){return(fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pl(e,t){return(pl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vl(e,t){return!t||"object"!==fl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yl(e){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ml=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pl(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yl(i);if(o){var n=yl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return vl(this,e)});function a(){return dl(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"_drawBackground",value:function(e){if(e.clear(),this._labelsOptions.enabled)for(var t=e.group(),n=10*Math.ceil(m(this.coordinateSystem.getTByXY(0,0))/10),i=10*Math.floor(m(this.coordinateSystem.getTByXY(this.width,0))/10),o=n;o<=i;o+=10){var r=y(o);t.plain(Math.round(m(r))).attr({x:this.coordinateSystem.getXByYT(0,r),y:10,fill:this._labelsOptions.style.color}).font({size:"10px",anchor:"middle"})}void 0!==this._titleOptions.text&&e.group().plain(this._titleOptions.text).attr({x:this.width/2,y:this.height-12*.3,fill:this._titleOptions.style.color}).font({size:12,anchor:"middle"})}}])&&hl(t.prototype,n),a}(cl);const bl=ml;function gl(e){return(gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wl=["svgNode","coordinateSystem","x","y","width","height","style","visible","events","hoverLabels"];function _l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ol(e,t){return(Ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sl(e,t){return!t||"object"!==gl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tl(e){return(Tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const kl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ol(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tl(i);if(o){var n=Tl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Sl(this,e)});function a(e){var t,n=e.renderTo,i=void 0===n?void 0:n,o=e.width,s=void 0===o?void 0:o,l=e.height,u=void 0===l?void 0:l,c=e.coordinateSystem,f=void 0===c?{}:c,d=e.diagram,h=void 0===d?{}:d,p=e.windbarbsProfile,v=void 0===p?{}:p,y=e.windspeedProfile,m=void 0===y?{}:y,b=e.hodograph,g=void 0===b?{}:b,w=e.xAxis,_=void 0===w?{}:w,O=e.yAxis,S=void 0===O?{}:O;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=r.call(this,{renderTo:i,width:s,height:u}),h=Pl(h),v=Pl(v),m=Pl(m),g=Pl(g),_=Pl(_),S=Pl(S);var T=.05*t.svgNode.width();return void 0===_.width&&void 0===h.width&&void 0===v.width&&void 0===m.width?(S.width=.1*(t.svgNode.width()-2*T),h.width=.7*(t.svgNode.width()-2*T),v.width=.2*(t.svgNode.width()-2*T)*1/3,m.width=.2*(t.svgNode.width()-2*T)*2/3):void 0===h.width?h.width=t.svgNode.width()-2*T-v.width-m.width:void 0===v.width&&void 0===m.width&&(v.width=1*(t.svgNode.width()-2*T-h.width)/3,m.width=2*(t.svgNode.width()-2*T-h.width)/3),void 0===S.x&&void 0===h.x&&void 0===v.x&&void 0===m.x?(S.x=T,h.x=S.x+S.width,v.x=h.x+h.width,m.x=v.x+v.width):void 0===h.x?h.x=v.x-v.width:void 0===v.x&&void 0===m.x&&(v.x=h.x+h.width,m.x=v.x+v.width),void 0===_.height&&(_.height=.06*t.svgNode.height()),void 0===h.height&&(h.height=t.svgNode.height()-_.height-2*T),void 0===S.height&&(S.height=h.height),void 0===v.height&&(v.height=h.height),void 0===m.height&&(m.height=h.height),void 0===h.y&&(h.y=T),void 0===S.y&&(S.y=h.y),void 0===v.y&&(v.y=h.y),void 0===m.y&&(m.y=h.y),void 0===_.width&&(_.width=h.width),void 0===_.x&&(_.x=h.x),void 0===_.y&&(_.y=h.y+h.height),void 0===_.height&&(_.height=T),void 0===g.x&&(g.x=h.x),void 0===g.y&&(g.y=h.y),void 0===g.width&&(g.width=.4*Math.min(h.width,h.height)),void 0===g.height&&(g.height=g.width),t.diagram=new Bs(h),t.appendPlotArea(t.diagram),t.yAxis=new ul(S),t.appendPlotArea(t.yAxis),t.xAxis=new ml(_),t.appendPlotArea(t.xAxis),t.windbarbsProfile=new Vs(v),t.appendPlotArea(t.windbarbsProfile),t.windspeedProfile=new Us(m),t.appendPlotArea(t.windspeedProfile),t.hodograph=new tl(g),t.appendPlotArea(t.hodograph),void 0===f.type&&(f.type="skewTlogP"),f.width=h.width,f.height=h.height,t._coordinateSystem,t.coordinateSystem="stueve"==f.type?new Ya(f):"emagram"==f.type?new Ka(f):new Qa(f),t}return t=a,(n=[{key:"coordinateSystem",get:function(){return this._coordinateSystem},set:function(e){this._coordinateSystem=e,this.exchangeCoordinateSystem(this._coordinateSystem)}},{key:"getDiagramPlotArea",value:function(){return this.diagram}}])&&_l(t.prototype,n),a}(ja);function Pl(e){var t=e.svgNode,n=void 0===t?void 0:t,i=e.coordinateSystem,o=void 0===i?void 0:i,r=e.x,a=void 0===r?void 0:r,s=e.y,l=void 0===s?void 0:s,u=e.width,c=void 0===u?void 0:u,f=e.height,d=void 0===f?void 0:f,h=e.style,p=void 0===h?{}:h,v=e.visible,y=void 0===v||v,m=e.events,b=void 0===m?{}:m,g=e.hoverLabels,w=void 0===g?{}:g,_=function(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,wl);return _.svgNode=n,_.coordinateSystem=o,_.x=a,_.y=l,_.width=c,_.height=d,_.style=p,_.visible=y,_.events=b,_.hoverLabels=w,_}function xl(e){return(xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jl(e,t){return(jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function El(e,t){return!t||"object"!==xl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cl(e){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jl(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cl(i);if(o){var n=Cl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return El(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this)).imgNode=void 0,e.thermodynamicDiagram=void 0,e.resourceNode=void 0,e}return t=a,(n=[{key:"onInit",value:function(){void 0!==this.parentNode&&(this.resourceNode=$()(this.parentNode),this.resourceNode.empty())}},{key:"onChangeVisibleResource",value:function(){if(void 0!==this.resourceNode){var e=this.container.visibleResource;if("url"in e)void 0!==this.thermodynamicDiagram&&(this.thermodynamicDiagram=void 0,this.resourceNode.empty()),void 0===this.imgNode&&(this.resourceNode.empty(),this.imgNode=$()("<img>"),this.resourceNode.append(this.imgNode)),this.imgNode.attr("src",e.url),this.imgNode.css({"max-width":"100%"});else if("sounding"in e){void 0!==this.imgNode&&(this.imgNode=void 0,this.resourceNode.empty()),void 0===this.thermodynamicDiagram&&(this.thermodynamicDiagram=new kl({renderTo:this.resourceNode}));var t=!1;this.thermodynamicDiagram.soundings.forEach((function(n){n.getSounding()===e.sounding?(t=!0,n.visible(!0)):n.visible(!1)})),t||this.thermodynamicDiagram.addSounding(e.sounding)}else this.imgNode=void 0,this.resourceNode.empty()}}}])&&Rl(t.prototype,n),a}(Or);function Bl(e){return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Dl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Al(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ll(e,t,n){return(Ll="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gl(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ml(e,t){return(Ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vl(e,t){return!t||"object"!==Bl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gl(e){return(Gl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yl={addEventFunctions:B},Fl={Animation:Q,Visualisation:ue,makeTimeTextCallbackFunction:function(e){return function(t,n){var i=e.utc(t);return void 0!==this.options.outputTimezone&&("local"==this.options.outputTimezone?i.local():i.tz(this.options.outputTimezone)),i.format(n)}},animation:{ToggleButton:function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};re(this,e);var i=n.animation,o=void 0===i?void 0:i,r=n.node,a=void 0===r?void 0:r,s=n.startedContent,l=void 0===s?void 0:s,u=n.startedClass,c=void 0===u?void 0:u,f=n.stoppedContent,d=void 0===f?void 0:f,h=n.stoppedClass,p=void 0===h?void 0:h,v=n.classButton,y=void 0===v?void 0:v,m=n.classDropdownToggle,b=void 0===m?void 0:m,g=n.menu,w=void 0===g||g,_=n.menuImageFrequency,O=void 0===_||_,S=n.imageFrequencyCaption,T=void 0===S?"Frequency":S,k=n.menuFrequencies,P=void 0===k?void 0:k,x=n.menuRestartPause,R=void 0===x||x,j=n.restartPauseCaption,E=void 0===j?"Restart pause":j;"startedContent"in n||(l=$()(oe)),"stoppedContent"in n||(d=$()(ie)),this.options={animation:o,node:a,startedContent:l,startedClass:c,stoppedContent:d,stoppedClass:p,classButton:y,classDropdownToggle:b,menu:w,menuImageFrequency:O,imageFrequencyCaption:T,menuFrequencies:P,menuRestartPause:R,restartPauseCaption:E},this.options.node=$()(this.options.node);var C=this.options.node;this.options.node.is("button")||(C=$()("<button>").addClass("btn"),this.options.node.append(C)),C.addClass(this.options.classButton);var N=function(){C.removeClass(t.options.stoppedClass),C.addClass(t.options.startedClass),C.empty(),"string"==typeof t.options.startedContent||t.options.startedContent instanceof String?C.text(t.options.startedContent):C.append(t.options.startedContent)},B=function(){C.removeClass(t.options.startedClass),C.addClass(t.options.stoppedClass),C.empty(),"string"==typeof t.options.stoppedContent||t.options.stoppedContent instanceof String?C.text(t.options.stoppedContent):C.append(t.options.stoppedContent)};if(this.options.animation.on("start:animation",N),this.options.animation.on("stop:animation",B),C.click((function(){return t.options.animation.toggle()})),this.options.animation.isStarted()?N():B(),!this.options.node.is("button")&&this.options.menu){this.options.node.addClass("btn-group");var I=$()("<button>").attr("type","button").addClass("btn dropdown-toggle dropdown-toggle-split").addClass(this.options.classDropdownToggle).attr("data-bs-toggle","dropdown").attr("aria-expanded",!1);I.append($()("<span>").addClass("visually-hidden").text("Toggle Dropdown")),this.options.node.append(I);var D=$()("<div>").addClass("dropdown-menu");this.options.node.append(D);var A=$()("<form>").addClass("px-4 py-3");if((this.options.menuImageFrequency||this.options.menuRestartPause)&&D.append(A),this.options.menuImageFrequency){var L=$()("<label>").addClass("form-label").text(this.options.imageFrequencyCaption),M=$()("<div>").append(L);this.options.menuRestartPause&&M.addClass("mb-3"),A.append(M),ee(M,{animation:this.options.animation}),void 0!==this.options.menuFrequencies&&te(M,{animation:this.options.animation,frequencies:this.options.menuFrequencies})}if(this.options.menuRestartPause){var V=$()("<label>").addClass("form-label").text(this.options.restartPauseCaption),G=$()("<div>").append(V);A.append(G),ne(G,{animation:this.options.animation})}}},insertFrequencyInput:ee,insertFrequencyRange:te,insertFrequencyButtonGroup:function(e,t){var n=t.animation,i=t.frequencies,o=t.btnGroupClass,r=void 0===o?"btn-group":o,a=t.btnClass,s=void 0===a?"btn btn-primary":a,l=t.suffix,u=void 0===l?"fps":l,c=$()("<div>").addClass(r);(i=i||[]).forEach((function(e){c.append($()("<button>").addClass(s).data("frequency",e).text(e+" "+u).click((function(){return n.setImageFrequency(e)})))}));var f=function(){c.children("button").removeClass("active").each((function(){$()(this).data("frequency")==n.getImageFrequency()&&$()(this).addClass("active")}))};return n.on("change:imageFrequency",f),f(),e.append(c),c},insertRestartPauseInput:ne,insertRestartPauseRange:function(e,t){var n=t.animation,i=t.pauses;i=(i=i||[1]).map((function(e){return Math.round(1e3*e)}));var o=$()("<input>").addClass("form-range").attr("type","range").attr("min",0).attr("max",i.length-1);o.on("change input",(function(){var e=o.val();e<i.length&&n.setRestartPause(i[e]/1e3)}));var r=function(){var e=i.indexOf(Math.round(1e3*n.getRestartPause()));e>-1&&o.val(e)};return n.on("change:imageFrequency",r),r(),e.append(o),o},insertRestartPauseButtonGroup:function(e,t){var n=t.animation,i=t.pauses,o=t.btnGroupClass,r=void 0===o?"btn-group":o,a=t.btnClass,s=void 0===a?"btn btn-primary":a,l=t.suffix,u=void 0===l?"s":l,c=$()("<div>").addClass(r);(i=i||[]).forEach((function(e){c.append($()("<button>").addClass(s).data("pause",e).text(e+" "+u).click((function(){return n.setRestartPause(e)})))}));var f=function(){c.children("button").removeClass("active").each((function(){$()(this).data("pause")==n.getRestartPause()&&$()(this).addClass("active")}))};return n.on("change:restartPause",f),f(),e.append(c),c}},visualisation:{Text:be,Slider:Te,bsButtons:Be,bsDropdown:Xe}},Xl={Collection:$e,Map:He,map:{MapOL:Lt,MapLL:Xt},Resource:ot,resource:{GeoJSON:an,GeoJSONTile:On,Image:Bn,OSM:zn,Vector:en,VectorTile:mn},ResourceCollection:ft,Tooltip:St,Type:vt,TypeCollection:Ot},zl={BootstrapTooltip:ti},ql={Variable:Fi,TimeVariable:$i,VariableCollection:uo,Node:So,Resource:Ro,resource:{Image:Do,Sounding:Qo},Resources:sr,NWPResources:vr,Container:Ar,Display:Or,display:{Simple:Nl,SelectNavigation:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ml(e,t)}(a,e);var t,n,i,o,r=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gl(i);if(o){var n=Gl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Vl(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ignoreVariableCollections,i=void 0===n?[]:n,o=t.selectCaption,s=void 0!==o&&o,l=t.navigationClass,u=void 0===l?void 0:l,c=t.selectDivClass,f=void 0===c?void 0:c,d=t.selectClass,h=void 0===d?void 0:d;return Dl(this,a),(e=r.call(this)).options={ignoreVariableCollections:new Set(i),selectCaption:s,navigationClass:u,selectDivClass:f,selectClass:h},e.navigationNode=void 0,e.selectNodes=new Map,e}return t=a,(n=[{key:"onInit",value:function(){var e=this;void 0!==this.parentNode&&(this.navigationNode=$()("<div>").addClass(this.options.navigationClass),this.resourceNode=$()("<div>"),$()(this.parentNode).empty().append(this.navigationNode,this.resourceNode),void 0!==this.modelviewer&&this.modelviewer.resources.variableCollections.filter((function(t){return!e.options.ignoreVariableCollections.has(t)&&t.count>0})).forEach((function(t){return e._appendSelectNode(t)})),this._changeSelected())}},{key:"onChangeVisibleResource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.variable;Ll(Gl(a.prototype),"onChangeVisibleResource",this).call(this,{variable:t}),this._changeSelected()}},{key:"onAppendVariable",value:function(e){this.selectNodes.has(e.variableCollection)?this._appendOptionNode(this.selectNodes.get(e.variableCollection),e):this._appendSelectNode(e.variableCollection),this._changeSelected()}},{key:"_appendSelectNode",value:function(e){var t=this,n=$()("<select>").addClass(this.options.selectClass);if(n.on("change",(function(){var i=e.getItemById(n.val());t.container.exchangeDisplayVariable=[i]})),this.options.selectCaption){var i=$()("<option>").text(e.name).attr("disabled","disabled").prop("selected","selected");n.append(i)}e.variables.forEach((function(e){t._appendOptionNode(n,e)})),this.navigationNode.append($()("<div>").addClass(this.options.selectDivClass).append(n)),this.selectNodes.set(e,n)}},{key:"_appendOptionNode",value:function(e,t){var n=$()("<option>").attr("value",t.id).text(t.name).addClass(this.options.optionsClass);e.append(n)}},{key:"_changeSelected",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Il(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(this.selectNodes.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.selectNodes.has(n)){var i=this.container.visibleResource.getVariableByVariableCollection(n);this.selectNodes.get(n).val(i.id)}}}catch(e){t.e(e)}finally{t.f()}}}])&&Al(t.prototype,n),a}(Nl)}},Hl={Parcel:Yo},Kl={CoordinateSystem:Ba,coordinateSystem:{StueveDiagram:Ya,Emagram:Ka,SkewTlogPDiagram:Qa},DiagramSounding:ha,Hodograph:tl,TDDiagram:Bs,functions:{drawWindbarbInto:Kr},WindbarbsProfile:Vs,WindspeedProfile:Us,axes:{xAxis:bl,yAxis:cl}}})(),meteoJS=i})();
//# sourceMappingURL=meteoJS.min.js.map