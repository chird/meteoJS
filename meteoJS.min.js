/*! /*meteoJS v1.11.2 | (c) Ivo Sonderegger, SRF Meteo | https://chird.github.io/meteoJS/LICENSE* / */
var SVG=SVG||{},jQuery=jQuery||{},ol=ol||{layer:{},source:{},format:{},style:{}},Popper=Popper||{},bootstrap=bootstrap||{},meteoJS=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=17)}([function(t,e){t.exports=jQuery},function(t,e){t.exports=ol.layer.Group},function(t,e){t.exports=ol.proj},function(t,e){t.exports=SVG},function(t,e){t.exports=ol.layer.Vector},function(t,e){t.exports=ol.format.GeoJSON},function(t,e){t.exports=ol.Observable},function(t,e){t.exports=ol.source.Vector},function(t,e){t.exports=ol.source.VectorTile},function(t,e){t.exports=ol.layer.VectorTile},function(t,e){t.exports=ol.source.ImageStatic},function(t,e){t.exports=ol.layer.Image},function(t,e){t.exports=ol.source.OSM},function(t,e){t.exports=ol.layer.Tile},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){"use strict";var n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var o=e&&e.prototype instanceof d?e:d,r=Object.create(o.prototype),a=new k(i||[]);return r._invoke=function(t,e,n){var i="suspendedStart";return function(o,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw r;return P()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=c(t,e,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),r}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function d(){}function p(){}function h(){}var v={};v[r]=function(){return this};var y=Object.getPrototypeOf,m=y&&y(y(T([])));m&&m!==n&&i.call(m,r)&&(v=m);var b=h.prototype=d.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,n){var o;this._invoke=function(r,a){function s(){return new n((function(o,s){!function o(r,a,s,u){var l=c(t[r],t,a);if("throw"!==l.type){var f=l.arg,d=f.value;return d&&"object"===e(d)&&i.call(d,"__await")?n.resolve(d.__await).then((function(t){o("next",t,s,u)}),(function(t){o("throw",t,s,u)})):n.resolve(d).then((function(t){f.value=t,s(f)}),(function(t){return o("throw",t,s,u)}))}u(l.arg)}(r,a,o,s)}))}return o=o?o.then(s,s):s()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=b.constructor=h,h.constructor=p,p.displayName=u(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),w.prototype[a]=function(){return this},t.AsyncIterator=w,t.async=function(e,n,i,o,r){void 0===r&&(r=Promise);var a=new w(l(e,n,i,o),r);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(b),u(b,s,"Generator"),b[r]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=i.call(r,"catchLoc"),u=i.call(r,"finallyLoc");if(s&&u){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(15)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=bootstrap},function(t,e,n){"use strict";n.r(e),n.d(e,"calc",(function(){return i})),n.d(e,"events",(function(){return Sl})),n.d(e,"RepetitiveRequests",(function(){return G})),n.d(e,"Timeline",(function(){return q})),n.d(e,"timeline",(function(){return kl})),n.d(e,"Synview",(function(){return Re})),n.d(e,"synview",(function(){return Tl})),n.d(e,"Tooltip",(function(){return ni})),n.d(e,"tooltip",(function(){return Pl})),n.d(e,"Modelviewer",(function(){return Ai})),n.d(e,"modelviewer",(function(){return xl})),n.d(e,"Sounding",(function(){return sr})),n.d(e,"sounding",(function(){return Rl})),n.d(e,"ThermodynamicDiagramPluggable",(function(){return $a})),n.d(e,"ThermodynamicDiagram",(function(){return ol})),n.d(e,"thermodynamicDiagram",(function(){return jl}));var i={};n.r(i),n.d(i,"altitudeISAByPres",(function(){return o})),n.d(i,"pressureISAByAltitude",(function(){return r})),n.d(i,"potentialTempByTempAndPres",(function(){return a})),n.d(i,"tempByPotentialTempAndPres",(function(){return s})),n.d(i,"tempByEquiPotTempAndPres",(function(){return u})),n.d(i,"dewpointByHMRAndPres",(function(){return l})),n.d(i,"wetbulbTempByTempAndDewpointAndPres",(function(){return c})),n.d(i,"equiPotentialTempByTempAndDewpointAndPres",(function(){return f})),n.d(i,"saturationPressureByTemp",(function(){return d})),n.d(i,"saturationHMRByTempAndPres",(function(){return p})),n.d(i,"lclByPotentialTempAndHMR",(function(){return h})),n.d(i,"potentialTempByLCLAndHMR",(function(){return v})),n.d(i,"lclTemperatureByTempAndDewpoint",(function(){return y})),n.d(i,"tempCelsiusToKelvin",(function(){return m})),n.d(i,"tempKelvinToCelsius",(function(){return b})),n.d(i,"windspeedMSToKMH",(function(){return g})),n.d(i,"windspeedKMHToMS",(function(){return w})),n.d(i,"windspeedMSToKN",(function(){return _})),n.d(i,"windspeedKNToMS",(function(){return O})),n.d(i,"windspeedMSToBF",(function(){return S})),n.d(i,"windspeedBFToMS",(function(){return k})),n.d(i,"snowlineByTemp850hPaAndAltidude",(function(){return T})),n.d(i,"pressureByBarometricFormula",(function(){return P})),n.d(i,"densityHumidAirByPressureAndTempAndRelHumidity",(function(){return x}));n(14);function o(t){if(void 0!==t&&!isNaN(t))return 44330.769*(1-Math.pow(t/1013.25,.19029496))}function r(t){if(void 0!==t&&!isNaN(t))return 1013.25*Math.pow(1-t/44330.769,5.255)}function a(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return t*Math.pow(1e3/e,.286)}function s(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return t*Math.pow(e/1e3,.286)}function u(t,e){if(void 0!==e&&!isNaN(e)){for(var n=void 0,i=Math.pow(1e3/e,.286),o=273,r=20,a=0;Math.abs(r)>.1&&a<100;)a++,n=p(o,e),(o*i*Math.exp(2.5*n/o)-t)*r>0&&(r*=-.5),o+=r;return o}}function l(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e)){var n=.4343*Math.log(t*e/(622+t));return Math.pow(10,.0498646455*n+2.4082965)-7.07475+38.9114*Math.pow(Math.pow(10,.0915*n)-1.2035,2)}}function c(t,e,n){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===n||isNaN(n))){for(var i=e-273.15,o=1,r=10,a=1,s=6.112*Math.exp(17.67*i/(i+243.5));Math.abs(o)>.05;){if(0==(o=s-(6.112*Math.exp(17.67*i/(i+243.5))-n*(t-273.15-i)*66e-5*(1+.00115*i))))break;if(o<0?-1!=a&&(a=-1,r/=10):1!=a&&(a=1,r/=10),Math.abs(o)<=.05)break;i+=r*a}return i+273.15}}function f(t,e,n){var i=a(t,n);if(!(void 0===i||void 0===e||isNaN(e)||void 0===t||isNaN(t)||void 0===n||isNaN(n)))return i*Math.exp(2.4819*p(e,n)/y(t,e))}function d(t){if(void 0!==t&&!isNaN(t)){var e=new Array(6.1104546,.4442351,.014302099,.00026454708,30357098e-13,2.0972268e-8,60487594e-18,-1469687e-19),n=new Array(.06485546857696639,.03783195122560735,.02224449342887902,.013182892842468312,.007874020771412448,.004739730494884733,.0028751203550435793,.001757430376758103,.0010824173951885098,.0006717089391856059,.0004199647026320394,.0002645243638634699,.00016784796373681322,.00010728539763162038,6907426344961356e-20,4479404897680843e-20,2925704195639373e-20,19245291263499416e-21,12749137241074795e-21,8505070102755051e-21,5713400253349711e-21,3864650296738762e-21,2632109719650053e-21,18049107293057043e-22,12460785055581605e-22,8.660705713468708e-7,6.059822176688955e-7,4.2682119794324277e-7,3.026165085143795e-7,2.15963854234914e-7,1.5512895457833687e-7),i=0;if((t-=273.15)>-50)i=e[0]+t*(e[1]+t*(e[2]+t*(e[3]+t*(e[4]+t*(e[5]+t*(e[6]+t*e[7]))))));else{var o=(-t-50)/5;i=0<n.length-1?n[0]+o%1*(n[1]-n[0]):1e-7}return i}}function p(t,e){var n=d(t);if(void 0!==n&&void 0!==e&&!isNaN(e))return 621.97*n/(e-n)}function h(t,e){if(void 0!==e&&!isNaN(e)){for(var n=1013,i=100;n-i>10;){var o=i+(n-i)/2,r=p(s(t,o),o);if(void 0===r)return;r<e?i=o:n=o}return i+(n-i)/2}}function v(t,e){if(void 0!==t&&!isNaN(t)){for(var n=323,i=223;n-i>.1;){var o=i+(n-i)/2,r=h(o,e);if(void 0===r)return;r>t?i=o:n=o}return i+(n-i)/2}}function y(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return e-(.001296*e-.15772)*(t-e)}function m(t){return void 0===t||isNaN(t)?void 0:t+273.15}function b(t){return void 0===t||isNaN(t)?void 0:t-273.15}function g(t){return void 0===t||isNaN(t)?void 0:3.6*t}function w(t){return void 0===t||isNaN(t)?void 0:t/3.6}function _(t){return void 0===t||isNaN(t)?void 0:900*t/463}function O(t){return void 0===t||isNaN(t)?void 0:463*t/900}function S(t){return void 0===t||isNaN(t)?void 0:Math.min(12,Math.pow(t/.836,2/3))}function k(t){return void 0===t||isNaN(t)?void 0:.836*Math.pow(t,1.5)}function T(t,e){if(void 0!==t&&!isNaN(t)&&void 0!==e&&!isNaN(e))return 153*b(t)+.9985*e-304.26}function P(t,e,n,i){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===n||isNaN(n))){if(0==e)return t;var o=.02896;if(void 0===i&&(i=n),n==i)return t*Math.exp(9.807*-o/8.314/n*e);var r=(n-i)/e;return t*Math.exp(9.807*o/8.314/r*Math.log(1-r*e/n))}}function x(t,e,n){if(!(void 0===t||isNaN(t)||void 0===e||isNaN(e)||void 0===n||isNaN(n))){var i=d(e)*n;return 100*(t-i)/287.058/e+100*i/461.495/e}}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e,n){"listeners"in this&&void 0!==this.listeners||(this.listeners={}),t in this.listeners||(this.listeners[t]={});var i=Math.random().toString(36).substr(2,9);return this.listeners[t][i]={callback:e,thisArg:n},i}function E(t,e){"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&e in this.listeners[t]&&delete this.listeners[t][e]}function N(t,e,n){"once_listeners"in this&&void 0!==this.once_listeners||(this.once_listeners={}),t in this.once_listeners&&"push"in this.once_listeners[t]||(this.once_listeners[t]=[]),this.once_listeners[t].push({callback:e,thisArg:n})}function C(t){return"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&Object.keys(this.listeners[t]).length||"once_listeners"in this&&t in this.once_listeners&&Object.keys(this.once_listeners[t]).length}function I(t){var e=this,n=Array.prototype.slice.call(arguments);if(n.shift(),"listeners"in this&&void 0!==this.listeners&&t in this.listeners&&"object"==R(this.listeners[t])&&Object.keys(this.listeners[t]).forEach((function(i){e.listeners[t][i].callback.apply(void 0===e.listeners[t][i].thisArg?e:e.listeners[t][i].thisArg,n)})),"once_listeners"in this&&void 0!==this.once_listeners&&t in this.once_listeners&&"forEach"in this.once_listeners[t]){var i=this.once_listeners[t];this.once_listeners[t]=[],i.forEach((function(t){t.callback.apply(void 0===t.thisArg?e:t.thisArg,n)}))}}var D=function(t){t.on=j,t.un=E,t.once=N,t.hasListener=C,t.trigger=I};function B(t,e,n,i,o,r,a){try{var s=t[r](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,o)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var V=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,i=void 0===n?void 0:n,o=e.user,r=void 0===o?"":o,a=e.password,s=void 0===a?"":a,u=e.start,l=void 0===u||u,c=e.defaultTimeout,f=void 0===c?void 0:c,d=e.timeoutOnError,p=void 0===d?void 0:d,h=e.pauseOnHiddenDocument,v=void 0!==h&&h,y=e.responseType,m=void 0===y?"":y;A(this,t),this._url=i,this._user=r,this._password=s,this._isStarted=l,this._defaultTimeout=f,this._timeoutOnError=p,this._pauseOnHiddenDocument=v,this._initPauseOnHiddenDocument(),this._responseType=m,this._timeoutID=void 0,this._loading=!1,this._isStarted&&this.start()}var e,n,i,o,r;return e=t,(n=[{key:"start",value:function(){this._isStarted=!0,this._startRequest()}},{key:"stop",value:function(){this._isStarted=!1,void 0!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=void 0)}},{key:"_planRequest",value:function(t){var e=this,n=t.delay;void 0===this._timeoutID&&(this._timeoutID=setTimeout((function(){e._startRequest()}),n))}},{key:"_startRequest",value:function(){var t=this;void 0!==this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=void 0),this._makeRequest().then((function(e){var n=e.request;if(t._isStarted){var i=t._defaultTimeout,o=n.getResponseHeader("Cache-Control");if(null!==o){var r=/(^|,\s*)max-age=([0-9]+)($|\s*,)/.exec(o);null!==r&&r[2]>0&&(i=Math.round(1e3*r[2]))}t.trigger("success:request",{request:n}),void 0!==i&&t._planRequest({delay:i})}}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.request;t._isStarted&&void 0!==n&&(t.trigger("error:request",{request:n}),void 0!==t._timeoutOnError&&t._planRequest({delay:t._timeoutOnError}))}))}},{key:"_makeRequest",value:(o=regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.trigger("before:request"),t.abrupt("return",new Promise((function(t,n){if(void 0!==e._url)if(e._loading)n();else{e._loading=!0;var i=new XMLHttpRequest;void 0!==e.responseType&&(i.responseType=e.responseType),i.addEventListener("load",(function(){e._loading=!1,200==i.status?t({request:i}):n({request:i})})),i.addEventListener("error",(function(){e._loading=!1,n({request:i})})),i.open("GET",e._url,!0,e._user,e._password),i.send()}else n()})));case 2:case"end":return t.stop()}}),t,this)})),r=function(){var t=this,e=arguments;return new Promise((function(n,i){var r=o.apply(t,e);function a(t){B(r,n,i,a,s,"next",t)}function s(t){B(r,n,i,a,s,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"_initPauseOnHiddenDocument",value:function(){var t=this;this._pauseOnHiddenDocument&&document.addEventListener("visibilitychange",(function(){"hidden"in document&&(document.hidden?t.stop():t.start())}))}},{key:"url",get:function(){return this._url},set:function(t){this._url=t}},{key:"user",get:function(){return this._user},set:function(t){this._user=t}},{key:"password",get:function(){return this._password},set:function(t){this._password=t}},{key:"responseType",get:function(){return this._responseType},set:function(t){this._responseType=t}}])&&M(e.prototype,n),i&&M(e,i),t}();D(V.prototype);var G=V;function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.maxTimeGap,i=void 0===n?void 0:n,o=e.keyboardNavigation,r=void 0===o?{}:o;F(this,t),this.maxTimeGap=i,this.selectedTime=new Date("invalid"),this.times=[],this.enabledTimes=[],this.allEnabledTimes=[],this.timesByKey={},this._keyboardNavigation={},this._initKeyboardNavigation(r)}var e,n,i;return e=t,(n=[{key:"getSelectedTime",value:function(){return this.selectedTime}},{key:"setSelectedTime",value:function(t){return this._setSelectedTime(H(t,this.times)>-1?t:new Date("invalid")),this}},{key:"getTimes",value:function(){return this.times}},{key:"getEnabledTimes",value:function(){return this.enabledTimes}},{key:"getAllEnabledTimes",value:function(){return this.allEnabledTimes}},{key:"setTimesBySetID",value:function(t,e){return this.timesByKey[t]={times:e,enabled:e},this._updateTimes(),this._updateEnabledTimes(),this}},{key:"setEnabledTimesBySetID",value:function(t,e){return t in this.timesByKey&&(this.timesByKey[t].enabled=e,this._updateEnabledTimes()),this}},{key:"getSetIDs",value:function(){return Object.keys(this.timesByKey)}},{key:"deleteSetID",value:function(t){return t in this.timesByKey&&(delete this.timesByKey[t],this._updateTimes(),this._updateEnabledTimes()),this}},{key:"first",value:function(){return this._setSelectedTime(this.getFirstEnabledTime()),this}},{key:"last",value:function(){return this._setSelectedTime(this.getLastEnabledTime()),this}},{key:"next",value:function(){return this._setSelectedTime(this.getNextEnabledTime()),this}},{key:"prev",value:function(){return this._setSelectedTime(this.getPrevEnabledTime()),this}},{key:"nextAllEnabledTime",value:function(){return this._setSelectedTime(this.getNextAllEnabledTime()),this}},{key:"prevAllEnabledTime",value:function(){return this._setSelectedTime(this.getPrevAllEnabledTime()),this}},{key:"add",value:function(t,e){var n=this.getSelectedTime(),i=0;switch(e){case"hours":case"h":i=3600*t*1e3;break;case"minutes":case"m":i=60*t*1e3;break;case"seconds":case"s":i=1e3*t;break;case"milliseconds":case"ms":i=t}switch(0!=i&&(n=new Date(n.valueOf()+i)),e){case"years":case"y":n.setUTCFullYear(n.getUTCFullYear()+t);break;case"months":case"M":n.setUTCMonth(n.getUTCMonth()+t);break;case"days":case"d":n.setUTCDate(n.getUTCDate()+t)}return H(n,this.times)>-1&&this._setSelectedTime(n),this}},{key:"sub",value:function(t,e){var n=this.getSelectedTime(),i=0;switch(e){case"hours":case"h":i=3600*t*1e3;break;case"minutes":case"m":i=60*t*1e3;break;case"seconds":case"s":i=1e3*t;break;case"milliseconds":case"ms":i=t}switch(0!=i&&(n=new Date(n.valueOf()-i)),e){case"years":case"y":n.setUTCFullYear(n.getUTCFullYear()-t);break;case"months":case"M":n.setUTCMonth(n.getUTCMonth()-t);break;case"days":case"d":n.setUTCDate(n.getUTCDate()-t)}return H(n,this.times)>-1&&this._setSelectedTime(n),this}},{key:"getFirstEnabledTime",value:function(){return this.enabledTimes.length>0?this.enabledTimes[0]:new Date("invalid")}},{key:"getLastEnabledTime",value:function(){return this.enabledTimes.length>0?this.enabledTimes[this.enabledTimes.length-1]:new Date("invalid")}},{key:"getNextEnabledTime",value:function(){if(this.enabledTimes.length<1)return new Date("invalid");var t=H(this.getSelectedTime(),this.enabledTimes);if(t>-1)return++t<this.enabledTimes.length?this.enabledTimes[t]:this.enabledTimes[this.enabledTimes.length-1];if(isNaN(this.getSelectedTime()))return this.enabledTimes[0];for(var e=new Date("invalid"),n=0;n<this.enabledTimes.length;n++)if(this.getSelectedTime().valueOf()<this.enabledTimes[n].valueOf()){e=this.enabledTimes[n];break}return e}},{key:"getPrevEnabledTime",value:function(){if(this.enabledTimes.length<1)return new Date("invalid");var t=H(this.getSelectedTime(),this.enabledTimes);if(t>-1)return-1<--t?this.enabledTimes[t]:this.enabledTimes[0];if(isNaN(this.getSelectedTime()))return this.enabledTimes[0];for(var e=new Date("invalid"),n=this.enabledTimes.length-1;n>=0;n--)if(this.getSelectedTime().valueOf()>this.enabledTimes[n].valueOf()){e=this.enabledTimes[n];break}return e}},{key:"getFirstAllEnabledTime",value:function(){return this.allEnabledTimes.length>0?this.allEnabledTimes[0]:new Date("invalid")}},{key:"getLastAllEnabledTime",value:function(){return this.allEnabledTimes.length>0?this.allEnabledTimes[this.allEnabledTimes.length-1]:new Date("invalid")}},{key:"getNextAllEnabledTime",value:function(){if(this.allEnabledTimes.length<1)return new Date("invalid");var t=H(this.getSelectedTime(),this.allEnabledTimes);if(t>-1)return++t<this.allEnabledTimes.length?this.allEnabledTimes[t]:this.allEnabledTimes[this.allEnabledTimes.length-1];if(isNaN(this.getSelectedTime()))return this.allEnabledTimes[0];for(var e=new Date("invalid"),n=0;n<this.allEnabledTimes.length;n++)if(this.getSelectedTime().valueOf()<this.allEnabledTimes[n].valueOf()){e=this.allEnabledTimes[n];break}return e}},{key:"getPrevAllEnabledTime",value:function(){if(this.allEnabledTimes.length<1)return new Date("invalid");var t=H(this.getSelectedTime(),this.allEnabledTimes);if(t>-1)return-1<--t?this.allEnabledTimes[t]:this.allEnabledTimes[0];if(isNaN(this.getSelectedTime()))return this.allEnabledTimes[0];for(var e=new Date("invalid"),n=this.allEnabledTimes.length-1;n>=0;n--)if(this.getSelectedTime().valueOf()>this.allEnabledTimes[n].valueOf()){e=this.allEnabledTimes[n];break}return e}},{key:"isTimeEnabled",value:function(t){return this.enabledTimes.reduce((function(e,n){return n.valueOf()==t.valueOf()||e}),!1)}},{key:"isTimeAllEnabled",value:function(t){return this.allEnabledTimes.reduce((function(e,n){return n.valueOf()==t.valueOf()||e}),!1)}},{key:"isFirstEnabledTime",value:function(){return this.getFirstEnabledTime().valueOf()==this.getSelectedTime().valueOf()}},{key:"isLastEnabledTime",value:function(){return this.getLastEnabledTime().valueOf()==this.getSelectedTime().valueOf()}},{key:"_setSelectedTime",value:function(t){var e=this.selectedTime;return this.selectedTime=t,this.trigger("change:time",e),this.selectedTime}},{key:"_updateTimes",value:function(){this.times=[];var t=[],e={};for(var n in this.timesByKey)this.timesByKey[n].times.forEach((function(n){n.valueOf()in e||(t.push(n),e[n.valueOf()]=n)}));K(t),t.forEach((function(t){if(this.times.length<1)this.times.push(t);else{var e=this.times[this.times.length-1];if(void 0!==this.maxTimeGap&&t.valueOf()-e.valueOf()>1e3*this.maxTimeGap){var n=e;do{n=new Date(n.getTime()+1e3*this.maxTimeGap),this.times.push(n)}while(t.valueOf()-n.valueOf()>1e3*this.maxTimeGap)}this.times.push(t)}}),this),K(this.times),this.trigger("change:times")}},{key:"_updateEnabledTimes",value:function(){this.enabledTimes=[],this.allEnabledTimes=[];var t={},e={};for(var n in this.timesByKey)this.timesByKey[n].enabled.forEach((function(n){n.valueOf()in t||(this.enabledTimes.push(n),t[n.valueOf()]=n),n.valueOf()in e?e[n.valueOf()]++:e[n.valueOf()]=1}),this);for(var i in K(this.enabledTimes),e)e[i]==Object.keys(this.timesByKey).length&&this.allEnabledTimes.push(t[i]);K(this.allEnabledTimes),this.trigger("change:enabledTimes")}},{key:"_initKeyboardNavigation",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.enabled,i=void 0!==n&&n,o=e.first,r=void 0===o?36:o,a=e.last,s=void 0===a?35:a,u=e.prev,l=void 0===u?37:u,c=e.next,f=void 0===c?39:c,d=e.prevAllEnabledTime,p=void 0===d?[37,"ctrl"]:d,h=e.nextAllEnabledTime,v=void 0===h?[38,"ctrl"]:h;this._keyboardNavigation={enabled:i,first:r,last:s,prev:l,next:f,prevAllEnabledTime:p,nextAllEnabledTime:v},document&&this._keyboardNavigation.enabled&&document.addEventListener("keydown",(function(e){Object.keys(t._keyboardNavigation).forEach((function(n){"enabled"!=n&&n in t&&U(e,t._keyboardNavigation[n])&&t[n]()}))}))}}])&&X(e.prototype,n),i&&X(e,i),t}();D(z.prototype);var q=z,H=function(t,e){return e.findIndex((function(e){return e.valueOf()==t.valueOf()}))};function K(t){t.sort((function(t,e){return t.valueOf()-e.valueOf()}))}function U(t,e){if("object"==Y(e)&&"forEach"in e||(e=[e]),0==e.length)return!1;var n=[["ctrl","ctrlKey"],["alt","altKey"],["shift","shiftKey"],["meta","metaKey"]].reduce((function(n,i){return n&&(e.indexOf(i[0])>-1?t[i[1]]:!t[i[1]])}),!0);return e.forEach((function(e){switch(e){case"ctrl":case"alt":case"shift":case"meta":break;default:e!=t.keyCode&&(n=!1)}})),n}var $=n(0),Z=n.n($);function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Q=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.timeline,o=n.restartPause,r=void 0===o?1.8:o,a=n.imagePeriod,s=void 0===a?.2:a,u=n.imageFrequency,l=n.enabledStepsOnly,c=void 0===l||l,f=n.allEnabledStepsOnly,d=void 0!==f&&f;W(this,t),this.options={timeline:i,restartPause:r,imagePeriod:s,imageFrequency:u,enabledStepsOnly:c,allEnabledStepsOnly:d},void 0===this.options.timeline&&(this.options.timeline=new q),void 0!==this.options.imageFrequency&&0!=this.options.imageFrequency&&(this.options.imagePeriod=1/this.options.imageFrequency),this.animationIntervalID=void 0,this.animationTimeoutID=void 0,this.animationStep=0,this.timesHash={},this.times=[];var p=function(){e.times=e.options.timeline[e._getTimelineTimesMethod()](),e.timesHash={},e.times.forEach((function(t,n){return e.timesHash[t.valueOf()]=n}))};this.options.timeline.on(this._getTimelineChangeTimesEvent(),p),p()}var e,n,i;return e=t,(n=[{key:"getImagePeriod",value:function(){return this.options.imagePeriod}},{key:"setImagePeriod",value:function(t){return this.options.imagePeriod=t,this.isStarted()&&this._updateAnimation(),this.trigger("change:imageFrequency"),this}},{key:"getImageFrequency",value:function(){return 1/this.options.imagePeriod}},{key:"setImageFrequency",value:function(t){return 0!=t&&this.setImagePeriod(1/t),this}},{key:"getRestartPause",value:function(){return this.options.restartPause}},{key:"setRestartPause",value:function(t){return this.options.restartPause=Number(t),this.trigger("change:restartPause"),this}},{key:"isStarted",value:function(){return void 0!==this.animationIntervalID||void 0!==this.animationTimeoutID}},{key:"start",value:function(){this.options.timeline.getSelectedTime().valueOf()in this.timesHash&&this._setStep(this.timesHash[this.options.timeline.getSelectedTime().valueOf()]),this.isStarted()||this._updateAnimation(),this.trigger("start:animation")}},{key:"stop",value:function(){this._clearAnimation(),this.trigger("stop:animation")}},{key:"toggle",value:function(){this.isStarted()?this.stop():this.start()}},{key:"_setStep",value:function(t){0<=t&&t<this._getCount()&&(this.animationStep=t)}},{key:"_getTimelineChangeTimesEvent",value:function(){return this.options.enabledStepsOnly||this.options.allEnabledStepsOnly?"change:enabledTimes":"change:times"}},{key:"_getTimelineTimesMethod",value:function(){return this.options.allEnabledStepsOnly?"getAllEnabledTimes":this.options.enabledStepsOnly?"getEnabledTimes":"getTimes"}},{key:"_getCount",value:function(){return this.options.timeline[this._getTimelineTimesMethod()]().length}},{key:"_updateAnimation",value:function(){this._clearAnimation(),this.animationStep<this._getCount()-1?this._initAnimation():this._initRestartPause()}},{key:"_initAnimation",value:function(){var t=this;void 0===this.animationIntervalID&&(this.animationIntervalID=window.setInterval((function(){t.animationStep++,t.animationStep<t.times.length&&t.options.timeline.setSelectedTime(t.times[t.animationStep]),t.animationStep>=t._getCount()-1&&(t.trigger("end:animation"),t._clearAnimation(),t._initRestartPause())}),1e3*this.options.imagePeriod))}},{key:"_initRestartPause",value:function(){var t=this;void 0===this.animationTimeoutID&&(this.animationTimeoutID=window.setTimeout((function(){t.animationStep=0,t.trigger("restart:animation"),t.animationStep<t.times.length&&t.options.timeline.setSelectedTime(t.times[t.animationStep]),t._clearAnimation(),t._initAnimation()}),1e3*(this.options.imagePeriod+this.options.restartPause)))}},{key:"_clearAnimation",value:function(){void 0!==this.animationIntervalID&&(window.clearInterval(this.animationIntervalID),this.animationIntervalID=void 0),void 0!==this.animationTimeoutID&&(window.clearTimeout(this.animationTimeoutID),this.animationTimeoutID=void 0)}}])&&J(e.prototype,n),i&&J(e,i),t}();D(Q.prototype);var tt=Q;function et(t,e){var n=e.animation,i=e.suffix,o=void 0===i?"fps":i,r=Z()("<input>").addClass("form-control").attr("type","number").attr("min",1).attr("step",1),a=Z()("<div>").addClass("input-group").append(r).append(Z()("<div>").addClass("input-group-append").append(Z()("<span>").addClass("input-group-text").text(o)));r.on("change",(function(){return n.setImageFrequency(r.val())}));var s=function(){return r.val(n.getImageFrequency())};return n.on("change:imageFrequency",s),s(),t.append(a),a}function nt(t,e){var n=e.animation,i=e.frequencies;i=i||[1];var o=Z()("<input>").addClass("custom-range").attr("type","range").attr("min",0).attr("max",i.length-1);o.on("change input",(function(){var t=o.val();t<i.length&&n.setImageFrequency(i[t])}));var r=function(){var t=i.indexOf(n.getImageFrequency());t>-1&&o.val(t)};return n.on("change:imageFrequency",r),r(),t.append(o),o}function it(t,e){var n=e.animation,i=e.suffix,o=void 0===i?"s":i,r=Z()("<input>").addClass("form-control").attr("type","number").attr("min",0).attr("step",.1),a=Z()("<div>").addClass("input-group").append(r).append(Z()("<div>").addClass("input-group-append").append(Z()("<span>").addClass("input-group-text").text(o)));r.on("change",(function(){return n.setRestartPause(r.val())}));var s=function(){return r.val(n.getRestartPause())};return n.on("change:restartPause",s),s(),t.append(a),a}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var rt=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ot(this,t);var i=n.animation,o=void 0===i?void 0:i,r=n.node,a=void 0===r?void 0:r,s=n.startedContent,u=void 0===s?void 0:s,l=n.startedClass,c=void 0===l?void 0:l,f=n.stoppedContent,d=void 0===f?void 0:f,p=n.stoppedClass,h=void 0===p?void 0:p,v=n.classButton,y=void 0===v?void 0:v,m=n.classDropdownToggle,b=void 0===m?void 0:m,g=n.menu,w=void 0===g||g,_=n.menuImageFrequency,O=void 0===_||_,S=n.imageFrequencyCaption,k=void 0===S?"Frequency":S,T=n.menuFrequencies,P=void 0===T?void 0:T,x=n.menuRestartPause,R=void 0===x||x,j=n.restartPauseCaption,E=void 0===j?"Restart pause":j;"startedContent"in n||(u="⏸"),"stoppedContent"in n||(d="▶"),this.options={animation:o,node:a,startedContent:u,startedClass:c,stoppedContent:d,stoppedClass:h,classButton:y,classDropdownToggle:b,menu:w,menuImageFrequency:O,imageFrequencyCaption:k,menuFrequencies:P,menuRestartPause:R,restartPauseCaption:E},this.options.node=Z()(this.options.node);var N=this.options.node;this.options.node.is("button")||(N=Z()("<button>").addClass("btn"),this.options.node.append(N)),N.addClass(this.options.classButton);var C=function(){N.removeClass(e.options.stoppedClass),N.addClass(e.options.startedClass),N.empty(),"string"==typeof e.options.startedContent||e.options.startedContent instanceof String?N.text(e.options.startedContent):N.append(e.options.startedContent)},I=function(){N.removeClass(e.options.startedClass),N.addClass(e.options.stoppedClass),N.empty(),"string"==typeof e.options.stoppedContent||e.options.stoppedContent instanceof String?N.text(e.options.stoppedContent):N.append(e.options.stoppedContent)};if(this.options.animation.on("start:animation",C),this.options.animation.on("stop:animation",I),N.click((function(){return e.options.animation.toggle()})),this.options.animation.isStarted()?C():I(),!this.options.node.is("button")&&this.options.menu){this.options.node.addClass("btn-group");var D=Z()("<button>").attr("type","button").addClass("btn dropdown-toggle dropdown-toggle-split").addClass(this.options.classDropdownToggle).attr("data-toggle","dropdown").attr("aria-haspopup",!0).attr("aria-expanded",!1);D.append(Z()("<span>").addClass("sr-only").text("Toggle Dropdown")),this.options.node.append(D);var B=Z()("<div>").addClass("dropdown-menu pl-4 pr-4 pt-2 pb-2 text-muted");if(this.options.node.append(B),this.options.menuImageFrequency){var A=Z()("<label>").text(this.options.imageFrequencyCaption),L=Z()("<div>").addClass("form-group").append(A);B.append(L),et(A,{animation:this.options.animation}),void 0!==this.options.menuFrequencies&&nt(L,{animation:this.options.animation,frequencies:this.options.menuFrequencies})}if(this.options.menuRestartPause){var M=Z()("<label>").text(this.options.restartPauseCaption),V=Z()("<div>").addClass("form-group").append(M);it(M,{animation:this.options.animation}),B.append(V)}}};function at(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ut=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.timeline,i=void 0===n?void 0:n,o=e.node,r=void 0===o?void 0:o,a=e.animation,s=void 0===a?void 0:a,u=e.enabledStepsOnly,l=void 0===u||u,c=e.allEnabledStepsOnly,f=void 0!==c&&c,d=e.textInvalid,p=void 0===d?"-":d,h=e.getTimeText,v=void 0===h?void 0:h,y=e.outputTimezone,m=void 0===y?void 0:y;at(this,t),this.options={timeline:i,node:r,animation:s,enabledStepsOnly:l,allEnabledStepsOnly:f,textInvalid:p,getTimeText:v,outputTimezone:m},void 0===this.options.timeline&&(this.options.timeline=new q),this.listeners=[],this.inputListener=void 0}var e,n,i;return e=t,(n=[{key:"setNode",value:function(t){if(void 0!==this.options.node&&this.emptyNode(),void 0===t)this.detachEventListeners(),this.options.node=t;else{this.options.node=t;var e=this.listeners.length>0;e||(this.attachEventListener(this.options.timeline,"change:time",(function(){this.onChangeTime()}),this),this.attachEventListener(this.options.timeline,"change:times",(function(){this.onChangeTimes()}),this),this.attachEventListener(this.options.timeline,"change:enabledTimes",(function(){this.onChangeTimes()}),this)),this.onInitNode(e),this.onChangeTimes(),this.onChangeTime()}return void 0===this.inputListener&&(this.inputListener=this.on("input",(function(){void 0!==this.options.animation&&this.options.animation.stop()}),this)),this}},{key:"getOutputTimezone",value:function(){return this.options.outputTimezone}},{key:"setOutputTimezone",value:function(t){var e=this.options.outputTimezone!=t;return this.options.outputTimezone=t,e&&void 0!==this.options.node&&(this.onChangeTimes(),this.onChangeTime()),this}},{key:"onChangeTime",value:function(){}},{key:"onChangeTimes",value:function(){}},{key:"emptyNode",value:function(){}},{key:"onInitNode",value:function(){}},{key:"getTimelineTimes",value:function(){var t=this.options.allEnabledStepsOnly?"getAllEnabledTimes":this.options.enabledStepsOnly?"getEnabledTimes":"getTimes";return this.options.timeline[t]()}},{key:"timeToText",value:function(t,e){return isNaN(t)?this.options.textInvalid:void 0!==this.options.getTimeText?this.options.getTimeText.call(this,t,e):t.toISOString()}},{key:"attachEventListener",value:function(t,e,n,i){this.listeners.push([t,e]),t.on(e,n,i)}},{key:"detachEventListeners",value:function(){this.listeners.forEach((function(t){"un"in t[0]?t[0].un(t[1]):"off"in t[0]&&t[0].off(t[1])})),this.listeners=[]}}])&&st(e.prototype,n),i&&st(e,i),t}();D(ut.prototype);var lt=ut;function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=mt(t);if(e){var o=mt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return yt(this,n)}}function yt(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(r,t);var e,n,i,o=vt(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.format,i=void 0===n?void 0:n,a=ft(e,["format"]);return dt(this,r),(t=o.call(this,a)).options.format=i,t.setNode(t.options.node),t}return e=r,(n=[{key:"onChangeTime",value:function(){this.options.node.text(this.timeToText(this.options.timeline.getSelectedTime(),this.options.format))}},{key:"emptyNode",value:function(){this.options.node.text("")}}])&&pt(e.prototype,n),i&&pt(e,i),r}(lt);function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=kt(t);if(e){var o=kt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return St(this,n)}}function St(t,e){return!e||"object"!==gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(r,t);var e,n,i,o=Ot(r);function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o.call(this,t)).times=[],e.timesIndexes={},e.setNode(e.options.node),e}return e=r,(n=[{key:"onChangeTime",value:function(){var t=this.options.timeline.getSelectedTime();t.valueOf()in this.timesIndexes?this.options.node.val(this.timesIndexes[t.valueOf()]+1):this.options.node.val(1)}},{key:"onChangeTimes",value:function(){this.times=this.getTimelineTimes(),this.timesIndexes={},this.times.forEach((function(t,e){this.timesIndexes[t.valueOf()]=e}),this),this.options.node.prop("max",this.times.length)}},{key:"onInitNode",value:function(t){if(this.options.node.prop("min",1),this.options.node.prop("step",1),!t){var e=this;this.attachEventListener(this.options.node,"change input",(function(){var t=+Z()(this).val();0<t&&t<=e.times.length&&e.options.timeline.setSelectedTime(e.times[t-1]),e.trigger("input")}))}}}])&&wt(e.prototype,n),i&&wt(e,i),r}(lt);function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=It(t);if(e){var o=It(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ct(this,n)}}function Ct(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(r,t);var e,n,i,o=Nt(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.format,i=void 0===n?"HH":n,a=e.grouping,s=void 0===a?"daily":a,u=e.groupingFormat,l=void 0===u?"ddd, DD. MMM":u,c=e.classMain,f=void 0===c?"btn-toolbar":c,d=e.classButtonGroup,p=void 0===d?"btn-group":d,h=e.classButtonGroupMargin,v=void 0===h?"mr-2":h,y=e.classLabel,m=void 0===y?void 0:y,b=e.classLabelSpan,g=void 0===b?"d-block w-100":b,w=e.classButton,_=void 0===w?"btn":w,O=e.classButtonActive,S=void 0===O?"active":O,k=e.classButtonNotEnabled,T=void 0===k?"btn-light":k,P=e.classButtonEnabled,x=void 0===P?"btn-secondary":P,R=e.classButtonAllEnabled,j=void 0===R?"btn-primary":R,E=xt(e,["format","grouping","groupingFormat","classMain","classButtonGroup","classButtonGroupMargin","classLabel","classLabelSpan","classButton","classButtonActive","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled"]);return Rt(this,r),(t=o.call(this,E)).options.format=i,t.options.grouping=s,t.options.groupingFormat=l,t.options.classMain=f,t.options.classButtonGroup=p,t.options.classButtonGroupMargin=v,t.options.classLabel=m,t.options.classLabelSpan=g,t.options.classButton=_,t.options.classButtonActive=S,t.options.classButtonNotEnabled=T,t.options.classButtonEnabled=x,t.options.classButtonAllEnabled=j,t.toolbarNode=void 0,t.setNode(t.options.node),t}return e=r,(n=[{key:"onChangeTime",value:function(){if(void 0!==this.toolbarNode){var t=this.options.timeline.getSelectedTime(),e=this;this.toolbarNode.find("button").each((function(){var n=new Date(+Z()(this).data("time"));Z()(this).removeClass(e.options.classButtonActive),t.valueOf()==n.valueOf()&&Z()(this).addClass(e.options.classButtonActive)}))}}},{key:"onChangeTimes",value:function(){void 0===this.toolbarNode&&(this.toolbarNode=Z()("<div>")),this.toolbarNode.empty();var t="daily"==this.options.grouping?"YYYY-MM-DD":"hourly"==this.options.grouping?"YYYY-MM-DD HH":this.options.grouping,e=void 0;this.getTimelineTimes().forEach((function(n){if(void 0===e||e.data("date")!=this.timeToText(n,t)){var i=Z()("<div>").addClass(this.options.classButtonGroup).addClass(this.options.classButtonGroupMargin).attr("role","group").attr("aria-label",this.timeToText(n,t));if(void 0===this.options.groupingFormat)e=i;else{var o=Z()("<span>").addClass(this.options.classLabelSpan).text(this.timeToText(n,this.options.groupingFormat));e=Z()("<label>").addClass(this.options.classLabel).append(o),i.attr("aria-label",o.text()),e.append(i)}e.data("date",this.timeToText(n,t)),this.toolbarNode.append(e)}var r=Z()("<button>").addClass(this.options.classButton).attr("type","button").text(this.timeToText(n,this.options.format)).data("time",n.valueOf());this.options.timeline.isTimeAllEnabled(n)?r.addClass(this.options.classButtonAllEnabled):this.options.timeline.isTimeEnabled(n)?r.addClass(this.options.classButtonEnabled):r.addClass(this.options.classButtonNotEnabled);var a=this;r.click((function(){a.options.timeline.setSelectedTime(new Date(+Z()(this).data("time"))),a.trigger("input")})),e.hasClass(this.options.classButtonGroup)?e.append(r):e.children("div").append(r)}),this),this.toolbarNode.find("div."+this.options.classButtonGroup).last().removeClass(this.options.classButtonGroupMargin)}},{key:"emptyNode",value:function(){this.toolbarNode=void 0,this.options.node.empty()}},{key:"onInitNode",value:function(){this.toolbarNode=Z()("<div>").addClass(this.options.classMain).attr("role","toolbar").attr("aria-label","Timeline toolbar"),this.options.node.append(this.toolbarNode)}}])&&jt(e.prototype,n),i&&jt(e,i),r}(lt);function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Vt(t,e,n){return(Vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xt(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Gt(t,e){return(Gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Xt(t);if(e){var o=Xt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ft(this,n)}}function Ft(t,e){return!e||"object"!==Bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gt(t,e)}(r,t);var e,n,i,o=Yt(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.format,i=void 0===n?"HH:mm":n,a=e.buttonFormat,s=void 0===a?"DD. MMMM YYYY HH:mm":a,u=e.grouping,l=void 0===u?"daily":u,c=e.groupingDivider,f=void 0===c||c,d=e.groupingFormat,p=void 0===d?"ddd, DD. MMMM YYYY":d,h=e.classMain,v=void 0===h?"dropdown":h,y=e.classDropdownMenu,m=void 0===y?"dropdown-menu":y,b=e.classDropdownItem,g=void 0===b?"dropdown-item":b,w=e.classItemActive,_=void 0===w?"active":w,O=e.classItemNotEnabled,S=void 0===O?"disabled":O,k=e.classItemEnabled,T=void 0===k?void 0:k,P=e.classItemAllEnabled,x=void 0===P?void 0:P,R=e.classDropdownHeader,j=void 0===R?"dropdown-header":R,E=e.classDropdownDivider,N=void 0===E?"dropdown-divider":E,C=e.classDropdownButton,I=void 0===C?"btn dropdown-toggle":C,D=e.classButtonNotEnabled,B=void 0===D?void 0:D,A=e.classButtonEnabled,L=void 0===A?void 0:A,M=e.classButtonAllEnabled,V=void 0===M?void 0:M,G=At(e,["format","buttonFormat","grouping","groupingDivider","groupingFormat","classMain","classDropdownMenu","classDropdownItem","classItemActive","classItemNotEnabled","classItemEnabled","classItemAllEnabled","classDropdownHeader","classDropdownDivider","classDropdownButton","classButtonNotEnabled","classButtonEnabled","classButtonAllEnabled"]);return Lt(this,r),(t=o.call(this,G)).options.format=i,t.options.buttonFormat=s,t.options.grouping=l,t.options.groupingDivider=f,t.options.groupingFormat=p,t.options.classMain=v,t.options.classDropdownMenu=m,t.options.classDropdownItem=g,t.options.classItemActive=_,t.options.classItemNotEnabled=S,t.options.classItemEnabled=T,t.options.classItemAllEnabled=x,t.options.classDropdownHeader=j,t.options.classDropdownDivider=N,t.options.classDropdownButton=I,t.options.classButtonNotEnabled=B,t.options.classButtonEnabled=L,t.options.classButtonAllEnabled=V,t.visualisationButtonText=new bt({timeline:t.options.timeline,format:t.options.buttonFormat,textInvalid:t.options.textInvalid,outputTimezone:t.options.outputTimezone,getTimeText:t.options.getTimeText}),t.dropdownNode=void 0,t.setNode(t.options.node),t}return e=r,(n=[{key:"setOutputTimezone",value:function(t){return Vt(Xt(r.prototype),"setOutputTimezone",this).call(this,t),this.visualisationButtonText.setOutputTimezone(t),this}},{key:"onChangeTime",value:function(){if(void 0!==this.dropdownNode){var t=this.options.timeline.getSelectedTime();this.options.node.children("button").removeClass(this.options.classButtonActive).removeClass(this.options.classButtonNotEnabled).removeClass(this.options.classButtonEnabled).removeClass(this.options.classButtonAllEnabled),this.options.timeline.isTimeAllEnabled(t)?this.options.node.children("button").addClass(this.options.classButtonAllEnabled):this.options.timeline.isTimeEnabled(t)?this.options.node.children("button").addClass(this.options.classButtonEnabled):this.options.node.children("button").addClass(this.options.classButtonNotEnabled);var e=this;this.dropdownNode.children("button."+this.options.classDropdownItem).each((function(){var n=new Date(+Z()(this).data("time"));Z()(this).removeClass(e.options.classItemActive).removeClass(e.options.classItemNotEnabled).removeClass(e.options.classItemEnabled).removeClass(e.options.classItemAllEnabled),t.valueOf()==n.valueOf()?Z()(this).addClass(e.options.classItemActive):e.options.timeline.isTimeAllEnabled(n)?Z()(this).addClass(e.options.classItemAllEnabled):e.options.timeline.isTimeEnabled(n)?Z()(this).addClass(e.options.classItemEnabled):Z()(this).addClass(e.options.classItemNotEnabled)}))}}},{key:"onChangeTimes",value:function(){void 0===this.dropdownNode&&(this.dropdownNode=Z()("<div>")),this.dropdownNode.empty();var t="daily"==this.options.grouping?"YYYY-MM-DD":"hourly"==this.options.grouping?"YYYY-MM-DD HH":this.options.grouping,e=void 0;this.getTimelineTimes().forEach((function(n){void 0!==e&&e==this.timeToText(n,t)||(void 0!==e&&this.options.groupingDivider&&this.dropdownNode.append(Z()("<div>").addClass(this.options.classDropdownDivider)),void 0!==this.options.groupingFormat&&this.dropdownNode.append(Z()("<h6>").addClass(this.options.classDropdownHeader).text(this.timeToText(n,this.options.groupingFormat))),e=this.timeToText(n,t));var i=Z()("<button>").addClass(this.options.classDropdownItem).attr("type","button").text(this.timeToText(n,this.options.format)).data("time",n.valueOf()),o=this;i.click((function(){o.options.timeline.setSelectedTime(new Date(+Z()(this).data("time"))),o.trigger("input")})),this.dropdownNode.append(i)}),this)}},{key:"emptyNode",value:function(){void 0!==this.visualisationButtonText&&this.visualisationButtonText.setNode(void 0),this.dropdownNode=void 0,this.options.node.empty()}},{key:"onInitNode",value:function(){for(var t="dropdownMenuButton",e=0;null!=document.getElementById(t);)t="dropdownMenuButton"+ ++e;var n=Z()("<button>").addClass(this.options.classDropdownButton).attr("type","button").attr("id",t).attr("data-toggle","dropdown").attr("aria-haspopup",!0).attr("aria-expanded",!1);this.visualisationButtonText.setNode(n),this.dropdownNode=Z()("<div>").addClass(this.options.classDropdownMenu).attr("aria-labelledby",t),this.options.node.addClass(this.options.classMain).append(n).append(this.dropdownNode)}}])&&Mt(e.prototype,n),i&&Mt(e,i),r}(lt);function qt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ht=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Z.a.extend(!0,{map:void 0,layerGroup:void 0},e)}var e,n,i;return e=t,(n=[{key:"getMap",value:function(){return this.options.map}},{key:"getViewCenter",value:function(){}},{key:"setViewCenter",value:function(){return this}},{key:"getViewZoom",value:function(){}},{key:"setViewZoom",value:function(){return this}},{key:"makeLayerGroup",value:function(){}},{key:"getExtendedEventByTypeCollection",value:function(t){return t.synviewType=void 0,t.layer=void 0,t.feature=void 0,t.color=void 0,t}},{key:"findLayerInType",value:function(){return-1}}])&&qt(e.prototype,n),i&&qt(e,i),t}();D(Ht.prototype);var Kt=Ht;function Ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var $t=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemIds=[],this.items={}}var e,n,i;return e=t,(n=[{key:"getCount",value:function(){return this.itemIds.length}},{key:"getItems",value:function(){return this.itemIds.map((function(t){return this.items[t]}),this)}},{key:"getItemIds",value:function(){return this.itemIds}},{key:"getItemById",value:function(t){return t in this.items?this.items[t]:void 0}},{key:"containsId",value:function(t){return-1!==this.getIndexById(t)}},{key:"getIndexById",value:function(t){var e=-1;return this.itemIds.forEach((function(n,i){n==t&&(e=i)})),e}},{key:"append",value:function(t){var e=t.getId();return this.containsId(e)?(this.trigger("replace:item",t,this.getItemById(e)),this.items[e]=t):(this.itemIds.push(e),this.items[e]=t,this.trigger("add:item",t)),this}},{key:"remove",value:function(t){var e=this.getItemById(t);if(void 0!==e){var n=this.getIndexById(t);delete this.items[t],this.itemIds.splice(n,1),this.trigger("remove:item",e)}return this}}])&&Ut(e.prototype,n),i&&Ut(e,i),t}();D($t.prototype);var Zt=$t,Wt=n(1),Jt=n.n(Wt),Qt=n(4),te=n.n(Qt),ee=n(6);function ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ie(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var oe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,i=void 0===n?void 0:n,o=e.datetime,r=void 0===o?void 0:o,a=e.mimetype,s=void 0===a?void 0:a,u=e.reloadTime,l=void 0===u?void 0:u,c=e.className,f=void 0===c?void 0:c,d=e.imageSmoothingEnabled,p=void 0===d?void 0:d,h=e.ol,v=void 0===h?{}:h;ne(this,t),this.options={url:i,datetime:r,mimetype:s,reloadTime:l,className:f,ol:v},this._normalizeOLOptions(this.options.ol),this.layer=void 0,this.layerGroup=void 0,this.reloadTimerId=void 0,this.visible=!1,this.zIndex=void 0,this.opacity=1,this._imageSmoothing=p}var e,n,i;return e=t,(n=[{key:"getId",value:function(){return this.getUrl()}},{key:"getUrl",value:function(){return this.options.url}},{key:"getDatetime",value:function(){return this.options.datetime}},{key:"getMIMEType",value:function(){return void 0===this.options.mimetype?"application/octet-stream":this.options.mimetype}},{key:"getReloadTime",value:function(){return this.options.reloadTime}},{key:"setReloadTime",value:function(t){return this.options.reloadTime=t,this._reload(),this}},{key:"getVisible",value:function(){return this.visible}},{key:"setVisible",value:function(t){return this.visible=t,void 0!==this.layer&&("setVisible"in this.layer?this.layer.setVisible(t):this.visible?this.layer.addTo(this.layerGroup):this.layerGroup.removeLayer(this.layer)),this}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"setZIndex",value:function(t){return this.zIndex=t,void 0!==this.layer&&this.layer.setZIndex(t),this}},{key:"getOpacity",value:function(){return this.opacity}},{key:"setOpacity",value:function(t){return this.opacity=t,void 0!==this.layer&&this.layer.setOpacity(t),this}},{key:"getLayerGroup",value:function(){return this.layerGroup}},{key:"setLayerGroup",value:function(t){if(void 0!==this.layerGroup&&void 0!==this.layer&&("remove"in this.layerGroup.getLayers()?this.layerGroup.getLayers().remove(this.layer):this.layerGroup.removeLayer(this.layer)),void 0===t&&(this.layer=void 0),this.layerGroup=t,void 0!==this.layerGroup)if("addLayer"in this.layerGroup){var e=this.getLLLayer();this.getVisible()&&this.layerGroup.addLayer(e)}else this.layerGroup.getLayers().push(this.getOLLayer());return this.setReloadTime(this.getReloadTime()),this}},{key:"getOLLayer",value:function(){return void 0!==this.layer||(this.layer=this._makeOLLayer()),this.layer}},{key:"makeOLLayer",value:function(){return new te.a({className:this.className})}},{key:"_makeOLLayer",value:function(){var t=this,e=this.makeOLLayer();if(e.setVisible(this.visible),e.setZIndex(this.zIndex),e.setOpacity(this.opacity),"events"in this.options.ol&&void 0!==this.options.ol.events&&["prerender","postrender"].forEach((function(n){n in t.options.ol.events&&void 0!==t.options.ol.events[n]&&e.on(n,(function(i){t.options.ol.events[n].call(t,i,e)}))})),!this._imageSmoothing){var n=e.getSource();null!==n&&"contextOptions_"in n&&(n.contextOptions_={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1})}return e}},{key:"getLLLayer",value:function(){return void 0!==this.layer||(this.layer=this._makeLLLayer()),this.layer}},{key:"makeLLLayer",value:function(){return L.Layer()}},{key:"preload",value:function(){}},{key:"_makeLLLayer",value:function(){return this.makeLLLayer()}},{key:"_reload",value:function(){if(void 0!==this.reloadTimerId&&(clearTimeout(this.reloadTimerId),this.reloadTimerId=void 0),void 0!==this.options.reloadTime&&void 0!==this.layerGroup){var t=function(){if(this.reloadTimerId=void 0,void 0!==this.layerGroup){var e=this._makeOLLayer();if("getUrl"in e.getSource()){var n=this.layerGroup,i=e.getSource().on("change",function(){"ready"!=e.getSource().getState()&&"error"!=e.getSource().getState()||(Object(ee.unByKey)(i),"ready"==e.getSource().getState()&&void 0!==this.layerGroup?(e.setVisible(this.layer.getVisible()),e.setOpacity(this.layer.getOpacity()),e.setZIndex(this.layer.getZIndex()),this.layerGroup.getLayers().remove(this.layer),this.layer=e):void 0!==this.layerGroup?this.layerGroup.getLayers().remove(e):n.getLayers().remove(e),void 0===this.reloadTimerId&&void 0!==this.options.reloadTime&&void 0!==this.layerGroup&&(this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime)))}.bind(this));this.layerGroup.getLayers().push(e),e.setVisible(!0)}else this.layerGroup.getLayers().push(e),e.setVisible(!0),setTimeout(function(){this.layer=e,void 0===this.reloadTimerId&&void 0!==this.options.reloadTime&&(this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime))}.bind(this),1e3)}}.bind(this);return this.reloadTimerId=setTimeout(t,1e3*this.options.reloadTime),this}}},{key:"_normalizeOLOptions",value:function(t){var e=t.source,n=void 0===e?{}:e,i=t.events,o=void 0===i?void 0:i,r=t.style,a=void 0===r?void 0:r;this.options.ol={source:n,events:o,style:a}}},{key:"className",get:function(){return this.options.className},set:function(t){this.options.className=t}},{key:"imageSmoothingEnabled",get:function(){return this._imageSmoothing},set:function(t){this._imageSmoothing=t}}])&&ie(e.prototype,n),i&&ie(e,i),t}();D(oe.prototype);var re=oe;function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ue(t,e,n){return(ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=de(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function le(t,e){return(le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=de(t);if(e){var o=de(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return fe(this,n)}}function fe(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&le(t,e)}(r,t);var e,n,i,o=ce(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this)).times=[],t}return e=r,(n=[{key:"getResources",value:function(){return this.times.map((function(t){return this.items[t.valueOf()]}),this)}},{key:"getTimes",value:function(){return this.times}},{key:"getItemById",value:function(t){var e=ue(de(r.prototype),"getItemById",this).call(this,t);return void 0===e?new re:e}},{key:"getResourceByTime",value:function(t){return this.getItemById(isNaN(t)?"":t.valueOf())}},{key:"containsTime",value:function(t){return this.getIndexById(isNaN(t)?"":t.valueOf())>-1}},{key:"getIndexByTime",value:function(t){var e=-1;return isNaN(t)||this.times.forEach((function(n,i){n.valueOf()==t.valueOf()&&(e=i)})),e}},{key:"getNewestResource",value:function(){return this.times.length<1?new re:this.getResourceByTime(this.times[this.times.length-1])}},{key:"append",value:function(t){return this._append(t),this._sortTimes(),this}},{key:"remove",value:function(t){return this._remove(isNaN(t)?"":t.valueOf()),this._sortTimes(),this}},{key:"setResources",value:function(t){return t.forEach((function(t){this._append(t)}),this),this._filterTimesByResources(t),this._sortTimes(),this}},{key:"_append",value:function(t){var e=t.getDatetime(),n=void 0===e?"":e.valueOf();this.containsId(n)?(this.trigger("replace:item",t,this.getItemById(n)),this.items[n]=t):(this.itemIds.push(n),this.items[n]=t,void 0===e||isNaN(e)||this.times.push(e),this.trigger("add:item",t))}},{key:"_remove",value:function(t){var e=this.getIndexById(t);if(e>-1){var n=this.items[t];if(delete this.items[t],this.itemIds.splice(e,1),void 0!==t&&""!==t&&!isNaN(t)){var i=this.times.findIndex((function(e){return e.valueOf()==t}));i>-1&&this.times.splice(i,1)}this.trigger("remove:item",n)}}},{key:"_filterTimesByResources",value:function(t){var e=!1;this.times=this.times.filter((function(n){var i=!1;return t.findIndex((function(t){var i=!1,o=t.getDatetime();return void 0!==o&&n.valueOf()==o.valueOf()?i=!0:void 0===o&&(e=!0),i}),this)<0&&(this.remove(n.valueOf()),i=!0),!i}),this),e&&this.remove("")}},{key:"_sortTimes",value:function(){this.times.sort((function(t,e){return t.valueOf()-e.valueOf()}))}}])&&se(e.prototype,n),i&&se(e,i),r}(Zt);function he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ye=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=void 0===n?void 0:n,o=e.visible,r=void 0===o||o,a=e.zIndex,s=void 0===a?void 0:a,u=e.displayMethod,l=void 0===u?"floor":u,c=e.displayMaxResourceAge,f=void 0===c?10800:c,d=e.displayFadeStart,p=void 0===d?900:d,h=e.displayFadeStartOpacity,v=void 0===h?.95:h,y=e.resources,m=void 0===y?void 0:y,b=e.className,g=void 0===b?void 0:b,w=e.imageSmoothingEnabled,_=void 0===w?void 0:w,O=e.tooltip,S=void 0===O?void 0:O,k=e.preload,T=void 0===k?{}:k;he(this,t),this.options={id:i,visible:r,zIndex:s,displayMethod:l,displayMaxResourceAge:f,displayFadeStart:p,displayFadeStartOpacity:v,resources:m,className:g,imageSmoothingEnabled:_,tooltip:S},this.layerGroup=void 0,this.collection=new pe,this.displayedResourceTime=new Date("invalid"),this.collection.on("add:item",(function(t){t.className=this.className,this._addOLLayer(t),this._preload.enabled&&t.preload()}),this),this.collection.on("remove:item",(function(t){this._removeOLLayer(t)}),this),this.collection.on("replace:item",(function(t,e){t!==e&&(t.className=this.className,this._replaceOLLayer(t,e),this._preload.enabled&&t.preload())}),this),this._preload=T,void 0!==this.options.resources&&this.collection.setResources(this.options.resources),delete this.options.resources}var e,n,i;return e=t,(n=[{key:"getId",value:function(){return this.options.id}},{key:"setId",value:function(t){return this.options.id=t,this}},{key:"getVisible",value:function(){return this.options.visible}},{key:"setVisible",value:function(t){return(this.options.visible?!t:t)&&(this.options.visible=!!t,void 0!==this.layerGroup&&this.layerGroup.setVisible(this.options.visible),this.getResourceCollection().getItems().forEach((function(t){isNaN(t.getDatetime())&&t.setVisible(this.options.visible),t.setLayerGroup(this.options.visible?this.layerGroup:void 0)}),this),this.trigger("change:visible")),this}},{key:"getZIndex",value:function(){return this.options.zIndex}},{key:"setZIndex",value:function(t){return this.options.zIndex=t,void 0!==this.layerGroup&&this.layerGroup.setZIndex(t),this.getResourceCollection().getItems().forEach((function(e){e.setZIndex(t)})),this}},{key:"getLayerGroup",value:function(){return void 0===this.layerGroup?new Jt.a:this.layerGroup}},{key:"setLayerGroup",value:function(t){return this.layerGroup=t,void 0!==this.layerGroup&&("setVisible"in this.layerGroup&&this.layerGroup.setVisible(this.options.visible),this.layerGroup.setZIndex(this.options.zIndex)),this.getResourceCollection().getItems().forEach((function(e){e.setLayerGroup(this.options.visible?t:void 0)}),this),this}},{key:"getResourceCollection",value:function(){return this.collection}},{key:"appendResource",value:function(t){return this.collection.append(t),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"removeResource",value:function(t){return this._hideVisibleResource(),this.collection.remove(t.getDatetime()),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"setResources",value:function(t){return this._hideVisibleResource(),this.collection.setResources(t),this.setDisplayTime(this.displayedResourceTime),this.trigger("change:resources"),this}},{key:"getDisplayedResource",value:function(){return this.getVisible()&&void 0!==this.layerGroup?isNaN(this.displayedResourceTime)&&this.collection.getTimes().length>0?new re:this.collection.getResourceByTime(this.displayedResourceTime):new re}},{key:"setDisplayTime",value:function(t){if(!this.getVisible())return this;var e=this._getResourceTimeByDisplayTime(t);if((void 0===e||void 0!==e&&!isNaN(this.displayedResourceTime)&&this.displayedResourceTime.valueOf()!=e.valueOf())&&this._hideVisibleResource(),void 0!==e){this.displayedResourceTime=e;var n=this.getResourceCollection().getItemById(e.valueOf());if(n.getId()){n.setVisible(!0);var i=1;Math.abs(t.valueOf()-e.valueOf())>1e3*this.options.displayMaxResourceAge?i=0:Math.abs(t.valueOf()-e.valueOf())>1e3*this.options.displayFadeStart&&(i=this.options.displayFadeStartOpacity*(Math.abs(t.valueOf()-e.valueOf())-1e3*this.options.displayMaxResourceAge)/(1e3*(this.options.displayFadeStart-this.options.displayMaxResourceAge))),n.setOpacity(i)}}else this.displayedResourceTime=new Date("invalid");return this}},{key:"getTooltip",value:function(){return this.options.tooltip}},{key:"setTooltip",value:function(t){return this.options.tooltip=t,this}},{key:"setResourcesOLStyle",value:function(){var t=arguments;return this.getResourceCollection().getItems().forEach((function(e){"setOLStyle"in e&&e.setOLStyle.apply(e,t)})),this}},{key:"_hideVisibleResource",value:function(){isNaN(this.displayedResourceTime)||this.getResourceCollection().getItemById(this.displayedResourceTime.valueOf()).setVisible(!1)}},{key:"_addOLLayer",value:function(t){isNaN(t.getDatetime())&&t.setVisible(this.getVisible()),void 0!==this.options.imageSmoothingEnabled&&void 0===t.imageSmoothingEnabled&&(t.imageSmoothingEnabled=this.options.imageSmoothingEnabled),t.setLayerGroup(this.getLayerGroup()),t.setZIndex(this.options.zIndex)}},{key:"_removeOLLayer",value:function(t){t.setLayerGroup(void 0)}},{key:"_replaceOLLayer",value:function(t,e){this._removeOLLayer(e),this._addOLLayer(t)}},{key:"_getResourceTimeByDisplayTime",value:function(t){if(!isNaN(t)){var e=void 0;return this.collection.getTimes().forEach((function(n){switch(this.options.displayMethod){case"exact":t.valueOf()==n.valueOf()&&(e=n);break;case"nearest":(void 0===e||Math.abs(t.valueOf()-n.valueOf())<Math.abs(t.valueOf()-e.valueOf()))&&(e=n);break;case"floor":default:(void 0===e||n.valueOf()<=t.valueOf()&&t.valueOf()-n.valueOf()<t.valueOf()-e.valueOf())&&(e=n)}}),this),e}}},{key:"className",get:function(){return this.options.className},set:function(t){this.options.className=t}}])&&ve(e.prototype,n),i&&ve(e,i),t}();D(ye.prototype);var me=ye;function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function we(t,e,n){return(we="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ke(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ke(t);if(e){var o=ke(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Se(this,n)}}function Se(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Te=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(r,t);var e,n,i,o=Oe(r);function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o.call(this)).options=Z.a.extend(!0,{exclusiveVisibility:!1,syncVisibility:!1},t),e}return e=r,(n=[{key:"getItemById",value:function(t){return void 0===we(ke(r.prototype),"getItemById",this).call(this,t)?new me:this.items[t]}},{key:"append",value:function(t){var e=this;return this.options.exclusiveVisibility&&t.getVisible()&&this.isVisible()?t.setVisible(!1):e.options.syncVisibility&&(t.getVisible()?this.isVisible()||this.getItems().forEach((function(t){t.setVisible(!0)}),this):this.isVisible()&&t.setVisible(!0)),t.on("change:visible",(function(){e.options.exclusiveVisibility?this.getVisible()&&e.getItems().forEach((function(t){t.getId()!=this.getId()&&t.setVisible(!1)}),this):e.options.syncVisibility&&e.getItems().forEach((function(t){t.getId()!=this.getId()&&t.setVisible(this.getVisible())}),this)})),we(ke(r.prototype),"append",this).call(this,t)}},{key:"getVisibleTypes",value:function(){return this.getItems().filter((function(t){return t.getVisible()}))}},{key:"isVisible",value:function(){return this.getVisibleTypes().length>0}},{key:"setExclusiveVisibility",value:function(t){if(this.options.exclusiveVisibility!=t&&t){var e=!1;this.getItems().forEach((function(t){e?t.setVisible(!1):e=t.getVisible()}),this)}return this.options.exclusiveVisibility=t,this}},{key:"setSyncVisibility",value:function(t){return this.options.syncVisibility!=t&&t&&this.isVisible()&&this.getItems().forEach((function(t){t.setVisible(!0)}),this),this.options.syncVisibility=t,this}}])&&ge(e.prototype,n),i&&ge(e,i),r}(Zt);var Pe=function t(e){var n=this,i=e.map,o=e.typeCollection,r=e.tooltip;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tooltipFeature=void 0,this.tooltipPixelColor=void 0,this.map=i,this.typeCollection=o,this.tooltip=r,Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.tooltip),"tooltipNode")&&void 0===this.tooltip.tooltipNode&&(this.tooltip.tooltipNode=Z()("<div>").css("position","absolute").prependTo(this.map.getMap().getTargetElement())),this.tooltip.on("hide:tooltip",(function(){n.tooltipFeature=void 0,n.tooltipPixelColor=void 0})),this.map.on("move:pointer",(function(t){if(!t.dragging)if((t=n.map.getExtendedEventByTypeCollection(t,n.typeCollection)).feature||t.color){if(t.feature===n.tooltipFeature&&(void 0===t.color&&void 0===n.tooltipPixelColor||void 0!==t.color&&void 0!==n.tooltipPixelColor&&t.color.join(",")===n.tooltipPixelColor.join(",")))return void n.tooltip.show({posX:t.pixel[0],posY:t.pixel[1]});n.tooltipFeature=void 0,n.tooltipPixelColor=void 0;var e=t.synviewType.getTooltip().call(void 0,t);void 0!==e?(n.tooltipFeature=t.feature,n.tooltipPixelColor=t.color,n.tooltip.content=e,n.tooltip.hide().show({posX:t.pixel[0],posY:t.pixel[1]})):n.tooltip.hide()}else n.tooltip.hide()}))};function xe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Re=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Z.a.extend(!0,{map:void 0,timeline:void 0,tooltip:void 0},e),void 0===this.options.map&&(this.options.map=new Kt),void 0===this.options.timeline&&(this.options.timeline=new q),this.typeCollection=new Te,this.tooltip=void 0,this.options.timeline.on("change:time",(function(){this.getTypeCollection().getItems().map((function(t){t.setDisplayTime(this.options.timeline.getSelectedTime())}),this)}),this);var n=this.options.timeline,i=function(){var t=n.isLastEnabledTime();this.getVisible()?n.setTimesBySetID(this.getId(),this.getResourceCollection().getTimes()):n.setTimesBySetID(this.getId(),[]),t?n.last():isNaN(n.getSelectedTime())&&n.first()},o=function(t){t.setLayerGroup(this.options.map.makeLayerGroup()),i.call(t),t.setDisplayTime(this.getTimeline().getSelectedTime()),t.on("change:resources",i),t.on("change:visible",i),void 0!==t.getTooltip()&&void 0===this.tooltip&&(this.tooltip=new Pe({map:this.options.map,typeCollection:this.typeCollection,tooltip:this.options.tooltip}))},r=function(t){this.getTimeline().deleteSetID(t.getId())};this.typeCollection.on("add:item",o,this),this.typeCollection.on("remove:item",r,this),this.typeCollection.on("replace:item",(function(t,e){o.call(this,t),r.call(this,e)}),this)}var e,n,i;return e=t,(n=[{key:"getTimeline",value:function(){return this.options.timeline}},{key:"getMap",value:function(){return this.options.map}},{key:"getTypeCollection",value:function(){return this.typeCollection}},{key:"appendType",value:function(t){if(void 0===t.getId()){var e,n=0;do{e="synview-type-"+n++}while(this.getTypeCollection().containsId(e));t.setId(e)}return this.getTypeCollection().append(t),this}},{key:"getTooltip",value:function(){return this.options.tooltip}}])&&xe(e.prototype,n),i&&xe(e,i),t}(),je=n(2);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ie(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function De(t,e,n){return(De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ve(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Be(t,e){return(Be=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ve(t);if(e){var o=Ve(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Le(this,n)}}function Le(t,e){return!e||"object"!==Ee(e)&&"function"!=typeof e?Me(t):e}function Me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ge=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Be(t,e)}(r,t);var e,n,i,o=Ae(r);function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),void 0===(e=o.call(this,t)).options.layerGroup&&(e.options.layerGroup=new Jt.a,e.options.map.addLayer(e.options.layerGroup)),e.options.map.getView().on("change:center",function(){this.trigger("change:view",this)}.bind(Me(e))),e.options.map.getView().on("change:resolution",function(){this.trigger("change:view",this)}.bind(Me(e))),e.options.map.on("pointermove",function(t){this.trigger("move:pointer",t)}.bind(Me(e))),e.options.map.on("click",function(t){this.trigger("click:pointer",t)}.bind(Me(e))),e.options.map.on("singleclick",function(t){this.trigger("singleclick:pointer",t)}.bind(Me(e))),e.options.map.on("dblclick",function(t){this.trigger("dblclick:pointer",t)}.bind(Me(e))),e.options.map.on("pointerdrag",function(t){this.trigger("drag:pointer",t)}.bind(Me(e))),e}return e=r,(n=[{key:"getViewCenter",value:function(){return Object(je.transform)(this.options.map.getView().getCenter(),this.options.map.getView().getProjection(),"EPSG:4326")}},{key:"setViewCenter",value:function(t){var e=!0;return t=t.map((function(t){return isNaN(t)?void(e=!1):1*t})),e&&this.options.map.getView().setCenter(Object(je.fromLonLat)(t)),this}},{key:"getViewZoom",value:function(){return this.options.map.getView().getZoom()}},{key:"setViewZoom",value:function(t){return isNaN(t)||this.options.map.getView().setZoom(1*t),this}},{key:"makeLayerGroup",value:function(){var t=new Jt.a;return this.options.layerGroup.getLayers().push(t),t}},{key:"getExtendedEventByTypeCollection",value:function(t,e){t=De(Ve(r.prototype),"getExtendedEventByTypeCollection",this).call(this,t,e);var n=new Map;e.getVisibleTypes().filter((function(t){return void 0!==t.getTooltip()})).map((function(t){return n.set(t,[])}));var i,o=new Set,a=new Set,s=Ne(n.keys());try{var u=function(){var t=i.value;t.getLayerGroup().getLayers().getArray().filter((function(t){return t.getVisible()})).forEach((function(e){n.get(t).push(e),o.add(e),a.add(e.getClassName())}))};for(s.s();!(i=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}return this.options.map.forEachFeatureAtPixel(t.pixel,(function(e,i){var o,r=Ne(n.keys());try{var a=function(){var r=o.value;if(n.get(r).forEach((function(n){void 0===t.synviewType&&n===i&&(t.feature=e,t.layer=i,t.synviewType=r)})),void 0!==t.synviewType)return"break"};for(r.s();!(o=r.n()).done&&"break"!==a(););}catch(t){r.e(t)}finally{r.f()}return void 0!==t.synviewType}),{hitTolerance:5,layerFilter:function(t){return o.has(t)}}),void 0===t.feature&&this.options.map.forEachLayerAtPixel(t.pixel,(function(e,i){if(null==i||i.length<1)return!1;var o,r=Ne(n.keys());try{var a=function(){var r=o.value;if(n.get(r).forEach((function(n){void 0===t.synviewType&&n.getClassName()==e.getClassName()&&(t.color=i,t.layer=e,t.synviewType=r)})),void 0!==t.synviewType)return"break"};for(r.s();!(o=r.n()).done&&"break"!==a(););}catch(t){r.e(t)}finally{r.f()}return void 0!==t.synviewType}),{hitTolerance:5,layerFilter:function(t){return a.has(t.getClassName())}}),t}},{key:"findLayerInType",value:function(t,e){return e.getLayerGroup().getLayers().getArray().findIndex((function(e){return e==t}))>-1}}])&&Ie(e.prototype,n),i&&Ie(e,i),r}(Kt);function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xe(t,e){return(Xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ze(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=He(t);if(e){var o=He(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return qe(this,n)}}function qe(t,e){return!e||"object"!==Ye(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ke=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xe(t,e)}(r,t);var e,n,i,o=ze(r);function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),void 0===(e=o.call(this,t)).options.layerGroup&&(e.options.layerGroup=L.layerGroup().addTo(e.options.map)),e}return e=r,(n=[{key:"makeLayerGroup",value:function(){return L.layerGroup().addTo(this.options.layerGroup)}}])&&Fe(e.prototype,n),i&&Fe(e,i),r}(Kt),Ue=n(5),$e=n.n(Ue),Ze=n(7),We=n.n(Ze);function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function en(t,e){return(en=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=rn(t);if(e){var o=rn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return on(this,n)}}function on(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var an=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&en(t,e)}(r,t);var e,n,i,o=nn(r);function r(){return Qe(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"getId",value:function(){var t=this.getDatetime();return isNaN(t)?"":t.toISOString()}},{key:"makeOLLayer",value:function(){var t={source:this.options.ol.source,events:this.options.ol.events,style:this.options.ol.style};if(this.options.ol,!("refresh"in t.source)){var e=t.source;void 0!==this.options.url&&"format"in e&&void 0!==e.format&&(e.url=this.options.url),"projection"in e&&void 0!==e.projection||(e.projection="EPSG:4326"),t.source=new We.a(e)}return"function"==typeof t.style&&(t.style=t.style.bind(this)),this.className&&(t.className=this.className),new te.a(t)}},{key:"setOLStyle",value:function(t){return void 0===this.layer&&this.getOLLayer(),void 0!==this.layer&&"setStyle"in this.layer?(0==arguments.length?this.layer.setStyle(this.layer.getStyle()):this.layer.setStyle(t),this):this}}])&&tn(e.prototype,n),i&&tn(e,i),r}(re);function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t,e){return(un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=fn(t);if(e){var o=fn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return cn(this,n)}}function cn(t,e){return!e||"object"!==sn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&un(t,e)}(n,t);var e=ln(n);function n(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=e.call(this,t)).options.ol.source.url=i.options.url,i.options.ol.source.format=new $e.a,i}return n}(an),pn=n(8),hn=n.n(pn),vn=n(9),yn=n.n(vn);function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wn(t,e){return(wn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Sn(t);if(e){var o=Sn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return On(this,n)}}function On(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wn(t,e)}(r,t);var e,n,i,o=_n(r);function r(){return bn(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"makeOLLayer",value:function(){var t={source:this.options.ol.source,events:this.options.ol.events,style:this.options.ol.style};if(!("refresh"in t.source)){var e=t.source;!("tileUrlFunction"in e)&&void 0!==this.options.url&&"format"in e&&void 0!==e.format&&(e.url=this.options.url),"projection"in e&&void 0!==e.projection||(e.projection="EPSG:4326"),t.source=new hn.a(e)}return"function"==typeof t.style&&(t.style=t.style.bind(this)),this.className&&(t.className=this.className),new yn.a(t)}}])&&gn(e.prototype,n),i&&gn(e,i),r}(an);function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t,e){return(Pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=jn(t);if(e){var o=jn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Rn(this,n)}}function Rn(t,e){return!e||"object"!==Tn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jn(t){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var En=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pn(t,e)}(n,t);var e=xn(n);function n(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=e.call(this,t)).options.ol.source.format=new $e.a,i}return n}(kn),Nn=n(10),Cn=n.n(Nn),In=n(11),Dn=n.n(In);function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Yn(t);if(e){var o=Yn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Gn(this,n)}}function Gn(t,e){return!e||"object"!==Bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(r,t);var e,n,i,o=Vn(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,i=void 0===n?void 0:n,a=e.datetime,s=void 0===a?void 0:a,u=e.mimetype,l=void 0===u?void 0:u,c=e.reloadTime,f=void 0===c?void 0:c,d=e.className,p=void 0===d?void 0:d,h=e.extent,v=e.ol,y=void 0===v?{}:v;return An(this,r),(t=o.call(this,{url:i,datetime:s,mimetype:l,reloadTime:f,className:p,ol:y})).options.extent=h,t}return e=r,(n=[{key:"makeOLLayer",value:function(){var t=this.options.ol.source;return t.url=this.options.url,t.imageExtent=Object(je.transformExtent)(this.options.extent,"EPSG:4326","EPSG:3857"),new Dn.a({source:new Cn.a(t),className:this.className})}},{key:"makeLLLayer",value:function(){return L.imageOverlay(this.options.url,[[this.options.extent[1],this.options.extent[0]],[this.options.extent[3],this.options.extent[2]]])}},{key:"preload",value:function(){this.getOLLayer().getSource().image_.load()}}])&&Ln(e.prototype,n),i&&Ln(e,i),r}(re),Xn=n(12),zn=n.n(Xn),qn=n(13),Hn=n.n(qn);function Kn(t){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zn(t,e){return(Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Qn(t);if(e){var o=Qn(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Jn(this,n)}}function Jn(t,e){return!e||"object"!==Kn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ti=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zn(t,e)}(r,t);var e,n,i,o=Wn(r);function r(){return Un(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"makeOLLayer",value:function(){var t=this.options.ol.source;return t.url=this.options.url,new Hn.a({source:new zn.a(t)})}}])&&$n(e.prototype,n),i&&$n(e,i),r}(re);function ei(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ni=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._isShown=!1,this._content=void 0}var e,n,i;return e=t,(n=[{key:"show",value:function(){var t=!this.isShown;return this._isShown=!0,t&&this.trigger("show:tooltip"),this}},{key:"hide",value:function(){var t=this.isShown;return this._isShown=!1,t&&this.trigger("hide:tooltip"),this}},{key:"update",value:function(){return this}},{key:"onContentChange",value:function(){}},{key:"isShown",get:function(){return this._isShown}},{key:"content",get:function(){return this._content},set:function(t){var e=this._content;this._content=t,e!==this._content&&this.onContentChange()}}])&&ei(e.prototype,n),i&&ei(e,i),t}();D(ni.prototype);var ii=ni;n(16);function oi(t){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ri(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ai(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function si(t,e,n){return(si="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fi(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function li(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=fi(t);if(e){var o=fi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ci(this,n)}}function ci(t,e){return!e||"object"!==oi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var di=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(r,t);var e,n,i,o=li(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.tooltipNode,i=void 0===n?void 0:n,a=e.bootstrapOptions,s=void 0===a?void 0:a,u=e.closeOnMouseMove,l=void 0===u||u,c=e.closeOnMouseEnter,f=void 0!==c&&c;return ri(this,r),(t=o.call(this)).bootstrapOptions=s||{},t._initBootstrapOptions(s),t.closeOnMouseMove=l,t.closeOnMouseEnter=f,t._tooltipNode=void 0,t.tooltipNode=i,t}return e=r,(n=[{key:"show",value:function(t){var e=t.posX,n=t.posY;return this.tooltipNode.css({left:"".concat(e,"px"),top:"".concat(n,"px")}).tooltip(this.isShown?"update":"show"),si(fi(r.prototype),"show",this).call(this)}},{key:"hide",value:function(){return this.isShown&&this.tooltipNode.tooltip("hide").attr("data-original-title",void 0),si(fi(r.prototype),"hide",this).call(this)}},{key:"update",value:function(){return this.tooltipNode.tooltip("update"),si(fi(r.prototype),"update",this).call(this)}},{key:"onContentChange",value:function(){this.tooltipNode.attr("data-original-title",pi(this.content)?this.content:"-"),this._updateNonStringContent(),this.update()}},{key:"_initBootstrapOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.trigger,n=void 0===e?"manual":e;this.bootstrapOptions.trigger=n}},{key:"_initTooltipNode",value:function(){var t=this;this.tooltipNode.tooltip(this.bootstrapOptions).on("inserted.bs.tooltip",(function(){var e=t._updateNonStringContent();e.length&&(t.closeOnMouseMove&&e.children(".tooltip-inner").mousemove((function(){return t.hide()})),t.closeOnMouseEnter&&e.children(".tooltip-inner").mouseenter((function(){return t.hide()})))}))}},{key:"_updateNonStringContent",value:function(){var t=Z()(document.getElementById(this.tooltipNode.attr("aria-describedby")));if(t.length)return void 0===this.content||pi(this.content)||t.children(".tooltip-inner").empty().append(this.content),t}},{key:"tooltipNode",get:function(){return this._tooltipNode},set:function(t){void 0!==t?(this._tooltipNode=Z()(t),this._initTooltipNode()):this._tooltipNode=t}}])&&ai(e.prototype,n),i&&ai(e,i),r}(ii),pi=function(t){return"[object String]"==Object.prototype.toString.call(t)};function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var yi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id;hi(this,t),this._id=n}var e,n,i;return e=t,(n=[{key:"setId",value:function(){}},{key:"id",get:function(){return this._id},set:function(t){this._id=t,this.setId(t)}}])&&vi(e.prototype,n),i&&vi(e,i),t}();function mi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function gi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var _i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fireReplace,i=void 0===n||n,o=e.fireAddRemoveOnReplace,r=void 0!==o&&o,a=e.appendOnReplace,s=void 0===a||a,u=e.sortFunction,l=e.emptyObjectMaker;gi(this,t),this.options={fireReplace:i,fireAddRemoveOnReplace:r,appendOnReplace:s,sortFunction:u,emptyObjectMaker:l},this._itemIds=[],this._items={}}var e,n,i;return e=t,(n=[{key:Symbol.iterator,value:function(){var t=this,e=0;return{next:function(){return e<t._itemIds.length?{value:t._items[t._itemIds[e++]]}:{done:!0}}}}},{key:"getItemById",value:function(t){return t in this._items?this._items[t]:void 0===this.options.emptyObjectMaker?new yi:this.options.emptyObjectMaker.call(this)}},{key:"contains",value:function(t){var e=this.containsId(t.id);return e&&(e=t===this.getItemById(t.id)),e}},{key:"containsId",value:function(t){return t in this._items}},{key:"append",value:function(){for(var t=this,e=[],n=[],i=[],o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return r.forEach((function(o){var r=o.id;if(t.containsId(r)){var a=t.getItemById(r);t.options.appendOnReplace&&(t._itemIds.splice(t._itemIds.indexOf(r),1),t._itemIds.push(r)),a!==o&&(t._items[r]=o,t.options.fireReplace&&i.push([o,a]),t.options.fireAddRemoveOnReplace&&(n.push(a),e.push(o)))}else t._itemIds.push(r),t._items[r]=o,e.push(o)})),this._sort(),e.forEach((function(e){return t.trigger("add:item",e)})),n.forEach((function(e){return t.trigger("remove:item",e)})),i.forEach((function(e){var n=mi(e,2),i=n[0],o=n[1];return t.trigger("replace:item",i,o)})),this}},{key:"remove",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){var n=t._itemIds.indexOf(e.id);if(n>-1){var i=t._items[e.id];delete t._items[e.id],t._itemIds.splice(n,1),t.trigger("remove:item",i)}})),this}},{key:"removeById",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){var n=t._itemIds.indexOf(e);if(n>-1){var i=t._items[e];delete t._items[e],t._itemIds.splice(n,1),t.trigger("remove:item",i)}})),this}},{key:"_sort",value:function(){var t=this;void 0!==this.options.sortFunction&&this._itemIds.sort((function(e,n){return t.options.sortFunction(t._items[e],t._items[n])}))}},{key:"count",get:function(){return this._itemIds.length}},{key:"items",get:function(){var t=this;return this._itemIds.map((function(e){return t._items[e]}))}},{key:"itemIds",get:function(){return this._itemIds}},{key:"sortFunction",get:function(){return this.options.sortFunction},set:function(t){this.options.sortFunction=t,this._sort()}}])&&wi(e.prototype,n),i&&wi(e,i),t}();D(_i.prototype);var Oi=_i;function Si(t){return function(t){if(Array.isArray(t))return Pi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Ti(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Ti(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Ti(t,e){if(t){if("string"==typeof t)return Pi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pi(t,e):void 0}}function Pi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function xi(t){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ri(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ji(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ei(t,e,n){return(Ei="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bi(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ni(t,e){return(Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ci(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Bi(t);if(e){var o=Bi(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ii(this,n)}}function Ii(t,e){return!e||"object"!==xi(e)&&"function"!=typeof e?Di(t):e}function Di(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bi(t){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ai=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ni(t,e)}(r,t);var e,n,i,o=Ci(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.resources,i=e.containersNode,a=e.timeline,s=void 0===a?void 0:a,u=e.makeContainerNode,l=void 0===u?void 0:u,c=e.firstTimeOnInit,f=void 0===c||c,d=e.lastTimeOnInit,p=void 0!==d&&d;Ri(this,r),(t=o.call(this,{fireReplace:!1,fireAddRemoveOnReplace:!0}))._resources=n,t._containersNode="object"==xi(i)&&i.jquery?i[0]:i,t._timeline=void 0===s?new q:s,t._makeContainerNode=l;var h=new Map;return t.on("add:item",(function(e){e.modelviewer=Di(t),e.containerNode=t._getContainerNode(e),isNaN(t.timeline.getSelectedTime().valueOf())&&(f||p)&&h.set(e,e.on("change:selectedVariables",(function(){if(isNaN(t._timeline.getSelectedTime().valueOf())&&(f?t._timeline.first():p&&t._timeline.last(),!isNaN(t._timeline.getSelectedTime().valueOf()))){var e,n=ki(h.keys());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.un("change:selectedVariables",h.get(i)),h.delete(i)}}catch(t){n.e(t)}finally{n.f()}}})))})),t.on("remove:item",(function(e){void 0!==e.containerNode&&null!=e.containerNode.parentNode&&e.containerNode.parentNode.removeChild(e.containerNode),e.modelviewer=void 0,e.containerNode=void 0,h.has(e)&&(e.un("change:selectedVariables",h.get(e)),h.delete(e)),t.timeline.deleteSetID(e.id)})),t}return e=r,(n=[{key:"append",value:function(){for(var t,e=Si(this.itemIds),n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.filter((function(t){return void 0!==t.id})).forEach((function(t){return e.push(t.id)})),i.filter((function(t){return void 0===t.id})).forEach((function(t){for(var n=1,i="container".concat(n);e.indexOf(i)>-1;)n++,i="container".concat(n);t.id=i,e.push(i)})),(t=Ei(Bi(r.prototype),"append",this)).call.apply(t,[this].concat(i)),this}},{key:"_getContainerNode",value:function(t){if(void 0!==this._makeContainerNode){var e=this._makeContainerNode.call(this,this.containersNode,t);return"object"==xi(e)&&e.jquery?e[0]:e}var n=void 0!==t.containerNode?t.containerNode:document.createElement("div");return void 0!==this.containersNode&&this.containersNode.appendChild(n),n}},{key:"resources",get:function(){return this._resources}},{key:"containersNode",get:function(){return this._containersNode}},{key:"timeline",get:function(){return this._timeline}}])&&ji(e.prototype,n),i&&ji(e,i),r}(Oi);function Li(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Vi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,i=void 0===n?void 0:n,o=e.names,r=void 0===o?{}:o,a=e.langSortation,s=void 0===a?[]:a;Li(this,t),this._name=i,this._names=r,this._langSortation=s}var e,n,i;return e=t,(n=[{key:"getNameByLangNoFallback",value:function(t){return t in this._names?this._names[t]:""}},{key:"setNameByLang",value:function(t,e){this._names[t]=e,void 0===e&&delete this._names[t]}},{key:"getDefaultName",value:function(){return void 0!==this._name?this._name:this.getNameByLang()}},{key:"getNameByLang",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.langSortation,i=void 0===n?void 0:n,o=void 0===i?this._langSortation:i,r=Object.keys(this._names);return r.length<1?void 0===this._name?"":this._name:this._names[r.sort((function(e,n){if(e==t)return-1;if(n==t)return 1;var i=o.indexOf(e),r=o.indexOf(n);return r<0?0:i<0?1:i<r?-1:i==r?0:1}))[0]]}},{key:"name",get:function(){return this.getDefaultName()},set:function(t){this._name=t}},{key:"langSortation",get:function(){return this._langSortation},set:function(t){this._langSortation=t}}])&&Mi(e.prototype,n),i&&Mi(e,i),t}();function Gi(t){return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xi(t,e){return(Xi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ki(t);if(e){var o=Ki(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return qi(this,n)}}function qi(t,e){return!e||"object"!==Gi(e)&&"function"!=typeof e?Hi(t):e}function Hi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ki(t){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ui=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xi(t,e)}(r,t);var e,n,i,o=zi(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.name,a=void 0===i?void 0:i,s=e.names,u=void 0===s?{}:s,l=e.langSortation,c=void 0===l?[]:l;return Yi(this,r),t=o.call(this,{name:a,names:u,langSortation:c}),Object.defineProperty(Hi(t),"id",Object.getOwnPropertyDescriptor(yi.prototype,"id")),t._id=n,t}return e=r,(n=[{key:"setId",value:function(t){yi.prototype.setId.call(this,t)}},{key:"getDefaultName",value:function(){return void 0!==this._name?this._name:Object.keys(this._names).length>0?this.getNameByLang():void 0===this._id?"":this._id}}])&&Fi(e.prototype,n),i&&Fi(e,i),r}(Vi);function $i(t){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ji(t,e){return(Ji=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=eo(t);if(e){var o=eo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return to(this,n)}}function to(t,e){return!e||"object"!==$i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eo(t){return(eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var no=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ji(t,e)}(r,t);var e,n,i,o=Qi(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.name,a=void 0===i?void 0:i,s=e.names,u=void 0===s?{}:s,l=e.langSortation,c=void 0===l?[]:l,f=e.variableCollection;return Zi(this,r),(t=o.call(this,{id:n,name:a,names:u,langSortation:c}))._variableCollection=f,t}return e=r,(n=[{key:"variableCollection",get:function(){return this._variableCollection},set:function(t){this._variableCollection=t}}])&&Wi(e.prototype,n),i&&Wi(e,i),r}(Ui);function io(t){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ro(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ao(t,e){return(ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function so(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=lo(t);if(e){var o=lo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return uo(this,n)}}function uo(t,e){return!e||"object"!==io(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lo(t){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var co=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ao(t,e)}(r,t);var e,n,i,o=so(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.name,a=void 0===i?void 0:i,s=e.names,u=void 0===s?{}:s,l=e.langSortation,c=void 0===l?[]:l,f=e.datetime,d=void 0===f?void 0:f;return oo(this,r),(t=o.call(this,{id:n,name:a,names:u,langSortation:c}))._datetime=void 0===t.id?void 0:new Date(t.id),void 0!==d&&(t.datetime=d),t}return e=r,(n=[{key:"setId",value:function(t){this._datetime=void 0===t?void 0:new Date(t)}},{key:"datetime",get:function(){return this._datetime},set:function(t){this._datetime=t,this._id=void 0!==t?t.valueOf():void 0}}])&&ro(e.prototype,n),i&&ro(e,i),r}(no);function fo(t){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ho(t,e){return(ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=bo(t);if(e){var o=bo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return yo(this,n)}}function yo(t,e){return!e||"object"!==fo(e)&&"function"!=typeof e?mo(t):e}function mo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bo(t){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function go(t){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oo(t,e){return(Oo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function So(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Po(t);if(e){var o=Po(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ko(this,n)}}function ko(t,e){return!e||"object"!==go(e)&&"function"!=typeof e?To(t):e}function To(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Po(t){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oo(t,e)}(r,t);var e,n,i,o=So(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.fireReplace,a=void 0===i||i,s=e.fireAddRemoveOnReplace,u=void 0!==s&&s,l=e.appendOnReplace,c=void 0===l||l,f=e.sortFunction,d=e.names,p=e.langSortation;return wo(this,r),t=o.call(this,{emptyObjectMaker:function(){return new no},fireReplace:a,fireAddRemoveOnReplace:u,appendOnReplace:c,sortFunction:f,names:d,langSortation:p}),Object.defineProperty(To(t),"id",Object.getOwnPropertyDescriptor(yi.prototype,"id")),t._id=n,Object.defineProperty(To(t),"getDefaultName",Object.getOwnPropertyDescriptor(Ui.prototype,"getDefaultName")),t._node=void 0,t.on("add:item",(function(e){void 0!==e.variableCollection&&e.variableCollection.remove(e),e.variableCollection=To(t),t.trigger("add:variable",e)})),t.on("remove:item",(function(e){return t.trigger("remove:variable",e)})),t}return e=r,(n=[{key:"setId",value:function(t){yi.prototype.setId.call(this,t)}},{key:"getVariableById",value:function(t){return this.getItemById(t)}},{key:"variables",get:function(){return this.items}},{key:"node",get:function(){return this._node},set:function(t){this._node=t}}])&&_o(e.prototype,n),i&&_o(e,i),r}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ho(t,e)}(n,t);var e=vo(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.fireReplace,r=void 0===o||o,a=i.fireAddRemoveOnReplace,s=void 0!==a&&a,u=i.appendOnReplace,l=void 0===u||u,c=i.sortFunction,f=i.emptyObjectMaker,d=i.name,p=void 0===d?void 0:d,h=i.names,v=void 0===h?{}:h,y=i.langSortation,m=void 0===y?[]:y;return po(this,n),t=e.call(this,{fireReplace:r,fireAddRemoveOnReplace:s,appendOnReplace:l,sortFunction:c,emptyObjectMaker:f}),Object.defineProperty(mo(t),"name",Object.getOwnPropertyDescriptor(Vi.prototype,"name")),Object.getPrototypeOf(mo(t)).getDefaultName=Vi.prototype.getDefaultName,Object.getPrototypeOf(mo(t)).getNameByLang=Vi.prototype.getNameByLang,Object.getPrototypeOf(mo(t)).setNameByLang=Vi.prototype.setNameByLang,Object.getPrototypeOf(mo(t)).getNameByLangNoFallback=Vi.prototype.getNameByLangNoFallback,t._name=p,t._names=v,t._langSortation=m,t}return n}(Oi));function Ro(t){return function(t){if(Array.isArray(t))return No(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Eo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Eo(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Eo(t,e){if(t){if("string"==typeof t)return No(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?No(t,e):void 0}}function No(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Co(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Io=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._variableCollection=e,e.node=this,this._parents=[],this._children=[],this._resources=new Map}var e,n,i;return e=t,(n=[{key:"appendChild",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){t._children.push(e),e._addParent(t),t.trigger("append:child",e)})),this}},{key:"_addParent",value:function(t){this._parents.push(t)}},{key:"append",value:function(){for(var t=this,e=0,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.forEach((function(n){void 0!==n.getVariableByVariableCollection(t.variableCollection).id&&n.variables.forEach((function(i){t._resources.has(i.variableCollection)||t._resources.set(i.variableCollection,new Set),t._resources.get(i.variableCollection).has(n)||e++,t._resources.get(i.variableCollection).add(n)}))})),e}},{key:"remove",value:function(){for(var t=this,e=0,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.forEach((function(n){n.variables.forEach((function(i){t._resources.has(i.variableCollection)&&t._resources.get(i.variableCollection).delete(n)&&e++}))})),e}},{key:"getResourcesByVariables",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=!1;return e.length&&"boolean"==typeof e[0]&&(i=e.shift()),0==e.length?[]:this.resources.filter((function(t){return t.isDefinedBy.apply(t,[i].concat(e))}))}},{key:"variableCollection",get:function(){return this._variableCollection}},{key:"parents",get:function(){return this._parents}},{key:"children",get:function(){return this._children}},{key:"resources",get:function(){var t,e=new Set,n=jo(this._resources.values());try{for(n.s();!(t=n.n()).done;){var i,o=jo(t.value.values());try{for(o.s();!(i=o.n()).done;){var r=i.value;e.add(r)}}catch(t){o.e(t)}finally{o.f()}}}catch(t){n.e(t)}finally{n.f()}return Ro(e)}}])&&Co(e.prototype,n),i&&Co(e,i),t}();D(Io.prototype);var Do=Io;function Bo(t){return function(t){if(Array.isArray(t))return Mo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Lo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ao(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Lo(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Lo(t,e){if(t){if("string"==typeof t)return Mo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mo(t,e):void 0}}function Mo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Vo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Go(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Yo=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.variables,o=void 0===i?[]:i,r=n.datetime,a=void 0===r?void 0:r,s=n.run,u=void 0===s?void 0:s,l=n.offset,c=void 0===l?void 0:l;Vo(this,t),this._variables=new Set,o.forEach((function(t){return e._variables.add(t)})),this._datetime=a,this._run=u,this._offset=c,this._updateDatetime()}var e,n,i;return e=t,(n=[{key:"getVariableByVariableCollection",value:function(t){var e=void 0;return this.variables.forEach((function(n){n.variableCollection===t&&(e=n)})),void 0===e?new no:e}},{key:"isDefinedBy",value:function(){for(var t=this,e=!1,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(i.length&&"boolean"==typeof i[0]&&(e=i.shift()),!e)return 0==i.filter((function(e){return!t._variables.has(e)})).length;var r,a=!0,s=new Set(i),u=Ao(s);try{for(u.s();!(r=u.n()).done;){var l=r.value;this._variables.has(l)||(a=!1)}}catch(t){u.e(t)}finally{u.f()}var c,f=Ao(this._variables);try{for(f.s();!(c=f.n()).done;){var d=c.value;s.has(d)||(a=!1)}}catch(t){f.e(t)}finally{f.f()}return a}},{key:"isDefinedByVariableOf",value:function(t){var e=this,n=!1;return t.variables.forEach((function(t){e.isDefinedBy(t)&&(n=!0)})),n}},{key:"_updateDatetime",value:function(){void 0!==this._run&&void 0!==this._offset&&(this.datetime=new Date(this._run.valueOf()+1e3*this._offset))}},{key:"variables",get:function(){return Bo(this._variables)}},{key:"datetime",get:function(){return this._datetime},set:function(t){this._datetime=t}},{key:"run",get:function(){return this._run},set:function(t){this._run=t,this._updateDatetime()}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t,this._updateDatetime()}}])&&Go(e.prototype,n),i&&Go(e,i),t}();function Fo(t){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qo(t,e){return(qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Uo(t);if(e){var o=Uo(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ko(this,n)}}function Ko(t,e){return!e||"object"!==Fo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uo(t){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qo(t,e)}(r,t);var e,n,i,o=Ho(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.variables,i=void 0===n?[]:n,a=e.datetime,s=void 0===a?void 0:a,u=e.run,l=void 0===u?void 0:u,c=e.offset,f=void 0===c?void 0:c,d=e.url,p=void 0===d?void 0:d;return Xo(this,r),(t=o.call(this,{variables:i,datetime:s,run:l,offset:f}))._url=p,t}return e=r,(n=[{key:"url",get:function(){return this._url}}])&&zo(e.prototype,n),i&&zo(e,i),r}(Yo);function Zo(t){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jo(t,e){return(Jo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=er(t);if(e){var o=er(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return tr(this,n)}}function tr(t,e){return!e||"object"!==Zo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function er(t){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jo(t,e)}(n,t);var e=Qo(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.id,r=void 0===o?void 0:o,a=i.pres,s=void 0===a?void 0:a,u=i.tmpc,l=void 0===u?void 0:u,c=i.dwpc,f=void 0===c?void 0:c,d=i.ptrace,p=void 0===d?void 0:d,h=i.ttrace,v=void 0===h?void 0:h,y=i.blayer,m=void 0===y?void 0:y,b=i.tlayer,g=void 0===b?void 0:b,w=i.lclpres,_=void 0===w?void 0:w,O=i.lclhght,S=void 0===O?void 0:O,k=i.lfcpres,T=void 0===k?void 0:k,P=i.lfchght,x=void 0===P?void 0:P,R=i.elpres,j=void 0===R?void 0:R,E=i.elhght,N=void 0===E?void 0:E,C=i.mplpres,I=void 0===C?void 0:C,D=i.mplhght,B=void 0===D?void 0:D,A=i.bplus,L=void 0===A?void 0:A,M=i.bminus,V=void 0===M?void 0:M,G=i.bfzl,Y=void 0===G?void 0:G,F=i.b3km,X=void 0===F?void 0:F,z=i.b6km,q=void 0===z?void 0:z,H=i.p0c,K=void 0===H?void 0:H,U=i.pm10c,$=void 0===U?void 0:U,Z=i.pm20c,W=void 0===Z?void 0:Z,J=i.pm30c,Q=void 0===J?void 0:J,tt=i.hght0c,et=void 0===tt?void 0:tt,nt=i.hghtm10c,it=void 0===nt?void 0:nt,ot=i.hghtm20c,rt=void 0===ot?void 0:ot,at=i.hghtm30c,st=void 0===at?void 0:at,ut=i.wm10c,lt=void 0===ut?void 0:ut,ct=i.wm20c,ft=void 0===ct?void 0:ct,dt=i.wm30c,pt=void 0===dt?void 0:dt,ht=i.li5,vt=void 0===ht?void 0:ht,yt=i.li3,mt=void 0===yt?void 0:yt,bt=i.brnshear,gt=void 0===bt?void 0:bt,wt=i.brnu,_t=void 0===wt?void 0:wt,Ot=i.brnv,St=void 0===Ot?void 0:Ot,kt=i.limax,Tt=void 0===kt?void 0:kt,Pt=i.limaxpres,xt=void 0===Pt?void 0:Pt,Rt=i.cap,jt=void 0===Rt?void 0:Rt,Et=i.cappres,Nt=void 0===Et?void 0:Et,Ct=i.bmin,It=void 0===Ct?void 0:Ct,Dt=i.bminpres,Bt=void 0===Dt?void 0:Dt;return Wo(this,n),(t=e.call(this,{id:r})).pres=s,t.tmpc=l,t.dwpc=f,t.ptrace=p,t.ttrace=v,t.blayer=m,t.tlayer=g,t.lclpres=_,t.lclhght=S,t.lfcpres=T,t.lfchght=x,t.elpres=j,t.elhght=N,t.mplpres=I,t.mplhght=B,t.bplus=L,t.bminus=V,t.bfzl=Y,t.b3km=X,t.b6km=q,t.p0c=K,t.pm10c=$,t.pm20c=W,t.pm30c=Q,t.hght0c=et,t.hghtm10c=it,t.hghtm20c=rt,t.hghtm30c=st,t.wm10c=lt,t.wm20c=ft,t.wm30c=pt,t.li5=vt,t.li3=mt,t.brnshear=gt,t.brnu=_t,t.brnv=St,t.limax=Tt,t.limaxpres=xt,t.cap=jt,t.cappres=Nt,t.bmin=It,t.bminpres=Bt,t}return n}(yi);function ir(t){return function(t){if(Array.isArray(t))return or(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return or(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return or(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function rr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ar(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var sr=function(){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.calcMissing,o=void 0!==i&&i,r=n.parcels,a=void 0===r?[]:r;rr(this,t),this.options={calcMissing:o},this.levels={},this._parcelCollection=new Oi({fireAddRemoveOnReplace:!0,fireReplace:!1,emptyObjectMaker:function(){return new nr}}),(e=this._parcelCollection).append.apply(e,ir(a))}var e,n,i;return e=t,(n=[{key:"addLevels",value:function(t,e){return t.forEach((function(t){this.addLevel(t,e)}),this),this}},{key:"addLevel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.calcMissing;return n=n||this.options.calcMissing,"pres"in t&&void 0!==t.pres&&(n&&(t=this.calculateMissingData(t)),this.levels[t.pres]=t),this}},{key:"calculateMissingData",value:function(t){var e={pres:t.pres,hght:t.hght,u:t.u,v:t.v,wdir:t.wdir,wspd:t.wspd,tmpk:t.tmpk,dwpk:t.dwpk,relh:t.relh,mixr:t.mixr,theta:t.theta,thetae:t.thetae,wetbulb:t.wetbulb,vtmp:t.vtmp};return void 0===e.hght&&(e.hght=o(e.pres)),void 0===e.u&&void 0===e.v&&void 0!==e.wdir&&void 0!==e.wspd?(e.u=e.wspd*Math.sin(e.wdir/180*Math.PI),e.v=e.wspd*Math.cos(e.wdir/180*Math.PI)):void 0!==e.u&&void 0!==e.v&&void 0===e.wdir&&void 0===e.wspd&&(e.wspd=Math.sqrt(Math.pow(e.u,2)+Math.pow(e.v,2)),e.wdir=Math.arctan(e.u/e.v)/Math.PI*180),void 0!==e.tmpk&&void 0!==e.dwpk?(void 0===e.theta&&(e.theta=a(e.tmpk,e.pres)),void 0===e.thetae&&(e.thetae=f(e.tmpk,e.dwpk,e.pres))):void 0!==e.mixr&&void 0===e.dwpk&&(e.dwpk=l(e.mixr,e.pres)),e}},{key:"removeLevel",value:function(t){return t in this.levels&&delete this.levels[t],this}},{key:"getData",value:function(t){return t in this.levels?this.levels[t]:{pres:void 0,hght:void 0,tmpk:void 0,dwpk:void 0,wdir:void 0,wspd:void 0,u:void 0,v:void 0,relh:void 0,mixr:void 0,theta:void 0,thetae:void 0,wetbulb:void 0,vtmp:void 0}}},{key:"getLevels",value:function(){return Object.keys(this.levels).map((function(t){return+t})).sort((function(t,e){return t-e}))}},{key:"getNearestLevel",value:function(t){if(!(Object.keys(this.levels).length<1))return Object.keys(this.levels).sort((function(e,n){return Math.abs(e-t)-Math.abs(n-t)})).shift()}},{key:"parcelCollection",get:function(){return this._parcelCollection}}])&&ar(e.prototype,n),i&&ar(e,i),t}();function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fr(t,e){return(fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=hr(t);if(e){var o=hr(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return pr(this,n)}}function pr(t,e){return!e||"object"!==ur(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fr(t,e)}(r,t);var e,n,i,o=dr(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.variables,i=void 0===n?[]:n,a=e.datetime,s=void 0===a?void 0:a,u=e.run,l=void 0===u?void 0:u,c=e.offset,f=void 0===c?void 0:c,d=e.sounding,p=void 0===d?void 0:d;return lr(this,r),(t=o.call(this,{variables:i,datetime:s,run:l,offset:f}))._sounding=p,t}return e=r,(n=[{key:"sounding",get:function(){return void 0===this._sounding?new sr:this._sounding},set:function(t){this._sounding=t}}])&&cr(e.prototype,n),i&&cr(e,i),r}(Yo);function yr(t){return function(t){if(Array.isArray(t))return wr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||gr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}(t,e)||gr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=gr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function gr(t,e){if(t){if("string"==typeof t)return wr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wr(t,e):void 0}}function wr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Or(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Sr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.topNode,i=e.timesVariableCollections,o=void 0===i?[]:i;_r(this,t),this._topNode=n,this._availableVariablesMap=new Map,this._timesVariableCollections=o}var e,n,i;return e=t,(n=[{key:"append",value:function(){for(var t,e=this,n=[],i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return o.forEach((function(t){var i=e._getTopNodeOfResourceDefinition(t,e.topNode);if(void 0!==i){var o=e._getTopMostChildWithAllVariables(new Set(t.variables),i,!0);void 0!==o&&o.append(t)>0&&(n.push(t),e._addAvailableVariablesMapByResource(t))}})),n.length>0&&(Tr.timeoutId&&clearTimeout(Tr.timeoutId),(t=Tr.addedResources).push.apply(t,n),Tr.timeoutId=setTimeout((function(){e.trigger("change:resources",{addedResources:Tr.addedResources}),Tr.addedResources=[]}),100)),this}},{key:"_addAvailableVariablesMapByResource",value:function(t){var e=this;t.variables.forEach((function(t){void 0!==t.variableCollection.node&&(e._availableVariablesMap.has(t.variableCollection.node)||e._availableVariablesMap.set(t.variableCollection.node,new Set),e._availableVariablesMap.get(t.variableCollection.node).add(t))}))}},{key:"remove",value:function(){for(var t=this,e=[],n=new Map,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return o.forEach((function(i){var o=t._getTopNodeOfResourceDefinition(i,t.topNode);if(void 0!==o){var r=t._getTopMostChildWithAllVariables(new Set(i.variables),o,!0);void 0!==r&&r.remove(i)>0&&(e.push(i),n.has(r)||n.set(r,new Set),n.get(r).add(i))}})),n.size>0&&this._removeAvailableVariablesMapByResources(n),e.length>0&&this.trigger("change:resources",{removedResources:e}),this}},{key:"_removeAvailableVariablesMapByResources",value:function(t){var e,n=new Set,i=br(t.entries());try{var o=function(){var t,i=mr(e.value,2),o=i[0],r=i[1],a=new Set,s=br(r);try{for(s.s();!(t=s.n()).done;)t.value.variables.forEach((function(t){return a.add(t)}))}catch(t){s.e(t)}finally{s.f()}var u,l=br(a);try{for(l.s();!(u=l.n()).done;){var c=u.value;0==o.getResourcesByVariables(c).length&&n.add(c)}}catch(t){l.e(t)}finally{l.f()}};for(i.s();!(e=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}var r,a=br(n);try{for(a.s();!(r=a.n()).done;){var s=r.value,u=this.getNodeByVariableCollection(s.variableCollection);0==this._collectResourcesOfNodeChildren(u,[s]).length&&this._availableVariablesMap.has(u)&&this._availableVariablesMap.get(u).delete(s)}}catch(t){a.e(t)}finally{a.f()}}},{key:"getTopMostNodeWithAllVariables",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=this._getTopMostChildWithAllVariables(new Set(e),this.topNode,!0);return void 0===i?new Do(new xo):i}},{key:"_getTopNodeOfResourceDefinition",value:function(t,e){var n=this;if(t.isDefinedByVariableOf(e.variableCollection))return e;var i=void 0;return e.children.forEach((function(e){void 0!==i&&(i=n._getTopNodeOfResourceDefinition(t,e))})),i}},{key:"_getTopMostChildWithAllVariables",value:function(t,e,n){var i=this,o=!1;if(e.variableCollection.variables.forEach((function(e){t.has(e)&&(o=!0,t.delete(e))})),0==t.size)return e;if(0!=e.children.length&&(o||n)){var r=void 0;return e.children.forEach((function(e){void 0===r&&(r=i._getTopMostChildWithAllVariables(t,e,n))})),r}}},{key:"getNodeByVariableCollection",value:function(t){return void 0===t.node?new Do(new xo):t.node}},{key:"getNodeByVariableCollectionId",value:function(t){var e=this._getNodeByVariableCollection((function(e){return t==e.id}));return void 0===e?new Do(new xo):e}},{key:"_getNodeByVariableCollection",value:function(t){return t(this.topNode.variableCollection)?this.topNode:this._findChildNodeByVariableCollection(t,this.topNode)}},{key:"_findChildNodeByVariableCollection",value:function(t,e){var n,i=this;return e.children.forEach((function(e){void 0===n&&t(e.variableCollection)?n=e:void 0===n&&e.children.length>0&&(n=i._findChildNodeByVariableCollection(t,e))})),n}},{key:"appendImage",value:function(t){var e=t.variables,n=t.datetime,i=t.run,o=t.offset,r=t.url;return this.append(new $o({variables:e,datetime:n,run:i,offset:o,url:r})),this}},{key:"getAvailableVariables",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.variables,o=void 0===i?[]:i;o=new Set(o);var r=[];Array.from(t).forEach((function(n){var i;[].push.apply(r,(i=t.node).getResourcesByVariables.apply(i,[n].concat(yr(o)))),[].push.apply(r,e._collectResourcesOfNodeChildren(t.node,[n].concat(yr(o))))}));var a=new Set;return r.forEach((function(e){var n,i=br(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.isDefinedBy(o)&&a.add(o)}}catch(t){i.e(t)}finally{i.f()}})),a}},{key:"_collectResourcesOfNodeChildren",value:function(t,e){var n=this,i=[];return t.children.forEach((function(t){[].push.apply(i,t.getResourcesByVariables.apply(t,yr(e))),[].push.apply(i,n._collectResourcesOfNodeChildren(t,e))})),i}},{key:"getTimesByVariables",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=n.filter((function(e){var n=!1;return t._timesVariableCollections.forEach((function(t){t.contains(e)&&(n=!0)})),n}));if(o.length!=this._timesVariableCollections.size)return[];var r=this._getTopMostChildWithAllVariables(new Set(o),this.topNode,!0);if(void 0===r)return[];var a=new Set,s=function t(e){e.getResourcesByVariables.apply(e,yr(o)).forEach((function(t){void 0!==t.datetime&&a.add(t.datetime.valueOf())})),e.children.forEach((function(e){return t(e)}))};return s(r),yr(a).sort().map((function(t){return new Date(t)}))}},{key:"topNode",get:function(){return this._topNode}},{key:"variableCollections",get:function(){var t;t=function(n){n.children.forEach((function(n){e.push(n.variableCollection),t(n)}))};var e=[this.topNode.variableCollection];return t(this.topNode),e}},{key:"availableVariablesMap",get:function(){return this._availableVariablesMap}}])&&Or(e.prototype,n),i&&Or(e,i),t}();D(Sr.prototype);var kr=Sr,Tr={timeoutId:void 0,addedResources:[]};function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Rr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Rr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function jr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ir(t);if(e){var o=Ir(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Cr(this,n)}}function Cr(t,e){return!e||"object"!==Pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}(r,t);var e,n,i,o=Nr(r);function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var t=new Set;["models","runs","regions","fields","levels","accumulations","thresholds"].forEach((function(e){return t.add(new xo({id:e}))}));var e,n={},i=xr(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;n[a.id]=new Do(a)}}catch(t){i.e(t)}finally{i.f()}return n.models.appendChild(n.runs),n.runs.appendChild(n.regions),n.regions.appendChild(n.fields),n.fields.appendChild(n.levels,n.accumulations),n.accumulations.appendChild(n.thresholds),o.call(this,{topNode:n.models,timesVariableCollections:new Set([n.models.variableCollection,n.runs.variableCollection])})}return e=r,(n=[{key:"addVariable",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,i=e.name,o=void 0===i?void 0:i,r=e.names,a=void 0===r?{}:r,s=e.langSortation,u=void 0===s?[]:s,l=e.datetime,c=void 0===l?void 0:l,f=void 0===c?new no({id:n,name:o,names:a,langSortation:u}):new co({id:n,name:o,names:a,langSortation:u,datetime:c});return t.append(f),this}},{key:"models",get:function(){return this.getNodeByVariableCollectionId("models").variableCollection}},{key:"runs",get:function(){return this.getNodeByVariableCollectionId("runs").variableCollection}},{key:"regions",get:function(){return this.getNodeByVariableCollectionId("regions").variableCollection}},{key:"fields",get:function(){return this.getNodeByVariableCollectionId("fields").variableCollection}},{key:"levels",get:function(){return this.getNodeByVariableCollectionId("levels").variableCollection}},{key:"accumulations",get:function(){return this.getNodeByVariableCollectionId("accumulations").variableCollection}},{key:"thresholds",get:function(){return this.getNodeByVariableCollectionId("thresholds").variableCollection}}])&&jr(e.prototype,n),i&&jr(e,i),r}(kr);function Br(t){return function(t){if(Array.isArray(t))return Lr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Ar(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(t,e){if(t){if("string"==typeof t)return Lr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(t,e):void 0}}function Lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Gr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.alwaysAvailableCollections,i=void 0===n?[]:n;Mr(this,t),this._alwaysAvailableCollections=new Set(i),this._modelviewer=void 0,this._container=void 0,this._parentNode=void 0,this._resourceNode=void 0,this._resourceOutput={image:void 0,thermodynamicDiagram:void 0}}var e,n,i;return e=t,(n=[{key:"render",value:function(){this.onInit(),this.onChangeVisibleResource()}},{key:"onInit",value:function(){var t=this;void 0!==this.parentNode&&(Z()(this.parentNode).empty(),this.trigger("init:display"),void 0!==this._modelviewer&&(this._modelviewer.resources.variableCollections.forEach((function(e){t.trigger("add:variableCollection",{variableCollection:e});var n,i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Ar(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.trigger("add:variable",{variable:o})}}catch(t){i.e(t)}finally{i.f()}})),this._onChangeSelectedVariables()))}},{key:"_onChangeSelectedVariables",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this._changeResources(),void 0!==this._modelviewer){var n=void 0===e?this._container.selectedVariables:e;this._modelviewer.resources.variableCollections.forEach((function(e){Br(n).forEach((function(n){e.contains(n)&&t.trigger("change:selectedVariable",{variable:n,variableCollection:e})}))}))}}},{key:"_changeResources",value:function(){var t=this;void 0!==this._modelviewer&&void 0!==this._container&&Array.from(this._modelviewer.resources.variableCollections).forEach((function(e){var n=t._getParentsVariables(e.node),i=t._modelviewer.resources.getAvailableVariables(e,{variables:n});t.trigger("change:availableVariables",{availableVariables:i,variableCollection:e})}))}},{key:"_getParentsVariables",value:function(t){var e=this,n=new Set;return t.parents.forEach((function(t){Array.from(t.variableCollection).forEach((function(t){e._container.selectedVariables.has(t)&&n.add(t)}));var i=e._getParentsVariables(t);i.size>0&&(n=new Set([].concat(Br(n),Br(i))))})),n}},{key:"_onChangeVisibleResource",value:function(){if(void 0!==this._resourceNode){if(void 0!==this._container){var t=this._container.visibleResource;if("url"in t)void 0!==this.thermodynamicDiagram&&(this.thermodynamicDiagram=void 0,Z()(this._resourceNode).empty()),void 0===this._resourceOutput.image&&(Z()(this._resourceNode).empty(),this._resourceOutput.image=Z()("<img>").css({"max-width":"100%"}),Z()(this._resourceNode).append(this._resourceOutput.image)),this._resourceOutput.image.attr("src",t.url);else if("sounding"in t){void 0!==this._resourceOutput.image&&(this._resourceOutput.image=void 0,Z()(this._resourceNode).empty());var e=!1;this._resourceOutput.thermodynamicDiagram.soundings.forEach((function(n){n.getSounding()===t.sounding?(e=!0,n.visible(!0)):n.visible(!1)})),e||this._resourceOutput.thermodynamicDiagram.addSounding(t.sounding)}else void 0!==this._resourceOutput.image&&(this._resourceOutput.image=void 0,Z()(this._resourceNode).empty()),void 0!==this._resourceOutput.thermodynamicDiagram&&this._resourceOutput.thermodynamicDiagram.soundings.forEach((function(t){return t.visible(!1)}))}}else this.trigger("change:visibleResource")}},{key:"modelviewer",get:function(){return this._modelviewer},set:function(t){var e=this;this._modelviewer=t,void 0!==this._modelviewer&&(this._modelviewer.resources.variableCollections.forEach((function(t){t.on("add:variable",(function(t){e.trigger("add:variable",{variable:t})}))})),this._modelviewer.resources.on("change:resources",(function(){return e._changeResources()})))}},{key:"container",get:function(){return this._container},set:function(t){var e=this;this._container=t,void 0!==this._container&&(this._container.on("change:selectedVariables",(function(t){var n=t.addedVariables;e._onChangeSelectedVariables(n)})),this._onChangeSelectedVariables(),this._container.on("change:visibleResource",(function(){e._onChangeVisibleResource()})))}},{key:"parentNode",get:function(){return this._parentNode},set:function(t){this._parentNode=t,this.onInit()}},{key:"resourceNode",get:function(){return this._resourceNode},set:function(t){this._resourceNode=t,this._onChangeVisibleResource()}}])&&Vr(e.prototype,n),i&&Vr(e,i),t}();D(Gr.prototype);var Yr=Gr;function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t){return function(t){if(Array.isArray(t))return Kr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Hr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}(t,e)||Hr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Hr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Hr(t,e){if(t){if("string"==typeof t)return Kr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kr(t,e):void 0}}function Kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zr(t,e){return(Zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ta(t);if(e){var o=ta(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Jr(this,n)}}function Jr(t,e){return!e||"object"!==Fr(e)&&"function"!=typeof e?Qr(t):e}function Qr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ta(t){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ea=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zr(t,e)}(r,t);var e,n,i,o=Wr(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.display,a=void 0===i?void 0:i,s=e.adaptSuitableResource,u=void 0===s?{}:s;return Ur(this,r),(t=o.call(this,{id:n}))._display=void 0===a?new Yr:a,t._display.modelviewer=t.modelviewer,t._display.container=Qr(t),t._display.parentNode=t._containerNode,t._adaptSuitableResource={},t._initAdaptSuitableResource(u),t._modelviewer=void 0,t._visibleResource,t._displayVariables=new Set,t._selectedVariables=new Set,t._selectedNode=void 0,t._enabledResources=new Map,t._containerNode=void 0,t._listeners={mirror:{container:void 0,listenerKey:void 0},timeline:{timeline:void 0,listenerKey:void 0},resources:{resources:void 0,listenerKey:void 0}},t}return e=r,(n=[{key:"exchangeDisplayVariable",value:function(t){var e,n=new Set(this.displayVariables),i=qr(t);try{for(i.s();!(e=i.n()).done;){var o,r=e.value,a=qr(this.displayVariables);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.variableCollection===r.variableCollection&&(n.delete(s),n.add(r))}}catch(t){a.e(t)}finally{a.f()}}}catch(t){i.e(t)}finally{i.f()}var u,l=qr(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;n.has(c)||n.add(c)}}catch(t){l.e(t)}finally{l.f()}return this.displayVariables=n,this}},{key:"mirrorsFrom",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==this._listeners.mirror.listenerKey&&this._listeners.mirror.container.un("change:displayVariables",this._listeners.mirror.listenerKey),void 0!==e){void 0===n&&(n=this.modelviewer.resources.variableCollections),this._listeners.mirror.container=e;var i=function(){var i,o=new Set,r=qr(e.displayVariables);try{var a=function(){var t=i.value;n.forEach((function(e){t.variableCollection===e&&o.add(t)}))};for(r.s();!(i=r.n()).done;)a()}catch(t){r.e(t)}finally{r.f()}t.exchangeDisplayVariable(o)};this._listeners.mirror.listenerKey=e.on("change:displayVariables",i),i()}}},{key:"_setTimes",value:function(){var t,e=this,n=zr(this._getSelectedVariablesWithResources([this.modelviewer.resources.topNode],new Set,void 0,(function(t){var n=!0;return e.modelviewer.resources._timesVariableCollections.forEach((function(e){var i,o=!1,r=qr(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.contains(a)&&(o=!0)}}catch(t){r.e(t)}finally{r.f()}o||(n=!1)})),n})),1)[0];void 0===n&&(n=new Set),this.modelviewer.timeline.setTimesBySetID(this.id,(t=this.modelviewer.resources).getTimesByVariables.apply(t,Xr(n)))}},{key:"_updateSelectedVariables",value:function(){var t,e=zr(this._getSelectedVariablesWithResources([this.modelviewer.resources.topNode],new Set,void 0),2),n=e[0],i=e[1];void 0===n?(n=new Set,t=new Do({variableCollection:new xo})):t=i.variableCollection.node,this._setSelectedVariables(n,t)}},{key:"_getSelectedVariablesWithResources",value:function(t,e,n){var i,o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._adaptSuitableResource.isResourceSelected;if(r.call(this,e,n))return[e,n];var a,s=[],u=[],l=qr(t);try{for(l.s();!(a=l.n()).done;){var c=a.value;if(this.modelviewer.resources.availableVariablesMap.has(c)&&this.modelviewer.resources.availableVariablesMap.get(c).size){var f,d=qr(this.modelviewer.resources.availableVariablesMap.get(c));try{for(d.s();!(f=d.n()).done;){var p=f.value;this.displayVariables.has(p)?s.push(p):this._adaptSuitableResource.enabled&&u.push(p)}}catch(t){d.e(t)}finally{d.f()}}}}catch(t){l.e(t)}finally{l.f()}(i=[].push).call.apply(i,[s].concat(Xr(this._adaptSuitableResource.getPossibleVariables.call(this,u,e))));var h=[void 0,void 0];return s.forEach((function(t){if(void 0===h[0]){var n=new Set(e);n.add(t);var i=zr(o._getSelectedVariablesWithResources(t.variableCollection.node.children,n,t,r),2),a=i[0],s=i[1];if(void 0!==a)return h[0]=a,void(h[1]=s);var u,l=!0,c=qr(n);try{var f=function(){var t=u.value,e=!1;o.modelviewer.resources._timesVariableCollections.forEach((function(n){n.contains(t)&&(e=!0)})),e||(l=!1)};for(c.s();!(u=c.n()).done;)f()}catch(t){c.e(t)}finally{c.f()}l&&n.size==o.modelviewer.resources._timesVariableCollections.size&&(h[0]=n,h[1]=t)}})),h}},{key:"_setSelectedVariables",value:function(t,e){var n,i=new Set,o=qr(t=new Set(t));try{for(o.s();!(n=o.n()).done;){var r=n.value;this.selectedVariables.has(r)||i.add(r)}}catch(t){o.e(t)}finally{o.f()}var a,s=new Set,u=qr(this.selectedVariables);try{for(u.s();!(a=u.n()).done;){var l=a.value;t.has(l)||s.add(l)}}catch(t){u.e(t)}finally{u.f()}(i.size>0||s.size>0)&&(this._selectedVariables=t,this._selectedNode=e,this._setTimes(),this._setEnabledResources(),this.trigger("change:selectedVariables",{addedVariables:i,removedVariables:s}))}},{key:"_setEnabledResources",value:function(){var t,e=this;this._enabledResources.clear(),void 0!==this._selectedNode&&((t=this._selectedNode).getResourcesByVariables.apply(t,[!0].concat(Xr(this.selectedVariables))).filter((function(t){return t.datetime&&!isNaN(t.datetime.valueOf())})).forEach((function(t){return e._enabledResources.set(t.datetime.valueOf(),t)})),this.modelviewer.timeline.setEnabledTimesBySetID(this.id,this.enabledTimes),this.trigger("change:enabledResources",this._enabledResources),this._setVisibleResource())}},{key:"_setVisibleResource",value:function(){var t=this._visibleResource,e=this.modelviewer.timeline.getSelectedTime().valueOf();this._enabledResources.has(e)?this._visibleResource=this._enabledResources.get(e):this._visibleResource=void 0,this._visibleResource!==t&&this.trigger("change:visibleResource")}},{key:"_initAdaptSuitableResource",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.enabled,n=void 0===e||e,i=t.getPossibleVariables,o=void 0===i?void 0:i,r=t.isResourceSelected,a=void 0===r?void 0:r;this._adaptSuitableResource={enabled:n,getPossibleVariables:o,isResourceSelected:a},void 0===this._adaptSuitableResource.getPossibleVariables&&(this._adaptSuitableResource.getPossibleVariables=function(t){return t}),void 0===this._adaptSuitableResource.isResourceSelected&&(this._adaptSuitableResource.isResourceSelected=function(t,e){var n;return void 0!==e&&(n=e.variableCollection.node).getResourcesByVariables.apply(n,[!0].concat(Xr(t))).length>0})}},{key:"display",get:function(){return this._display}},{key:"modelviewer",get:function(){return this._modelviewer},set:function(t){var e=this;if(this._modelviewer=t,void 0===this._modelviewer)return void 0!==this._listeners.timeline.listenerKey&&this._listeners.timeline.timeline.un("change:time",this._listeners.timeline.listenerKey),void(void 0!==this._listeners.resources.listenerKey&&this._listeners.resources.resources.un("change:resources",this._listeners.resources.listenerKey));this._display.modelviewer=t,this._listeners.timeline.timeline=this._modelviewer.timeline,this._listeners.timeline.listenerKey=this._modelviewer.timeline.on("change:time",(function(){return e._setVisibleResource()})),this._listeners.resources.resources=this._modelviewer.resources,this._listeners.resources.listenerKey=this._modelviewer.resources.on("change:resources",(function(){e._setTimes(),e._setEnabledResources(),e._updateSelectedVariables()})),this._setTimes()}},{key:"containerNode",get:function(){return this._containerNode},set:function(t){this._containerNode=t,void 0!==this._containerNode&&(this._display.parentNode=this._containerNode)}},{key:"visibleResource",get:function(){return void 0===this._visibleResource?new Yo:this._visibleResource}},{key:"displayVariables",get:function(){return this._displayVariables},set:function(t){var e,n=new Set,i=qr(t=new Set(t));try{for(i.s();!(e=i.n()).done;){var o=e.value;this._displayVariables.has(o)||n.add(o)}}catch(t){i.e(t)}finally{i.f()}var r,a=new Set,s=qr(this.displayVariables);try{for(s.s();!(r=s.n()).done;){var u=r.value;t.has(u)||a.add(u)}}catch(t){s.e(t)}finally{s.f()}(n.size>0||a.size>0)&&(this._displayVariables=t,this._updateSelectedVariables(),this.trigger("change:displayVariables",{addedVariables:n,removedVariables:a}))}},{key:"selectedVariables",get:function(){return this._selectedVariables}},{key:"enabledTimes",get:function(){return Xr(this._enabledResources.keys()).filter((function(t){return!isNaN(t)})).map((function(t){return new Date(t)}))}}])&&$r(e.prototype,n),i&&$r(e,i),r}(yi);D(ea.prototype);var na=ea,ia=n(3);function oa(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ra(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=void 0===e?void 0:e,i=t.width,o=void 0===i?void 0:i,r=oa(t,["color","width"]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.color=la(n,a.color,"black"),r.width=la(o,a.width,1),Object.keys(a).forEach((function(t){"color"!=t&&"width"!=t&&void 0===r[t]&&(r[t]=a[t])})),r}function aa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.size,n=void 0===e?void 0:e,i=t.color,o=void 0===i?void 0:i,r=t.anchor,a=void 0===r?void 0:r,s=oa(t,["size","color","anchor"]),u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.size=la(n,u.size,12),s.color=la(o,u.color,"black"),void 0!==(a=la(a,u.anchor))&&(s.anchor=a),Object.keys(u).forEach((function(t){"color"!=t&&"size"!=t&&"anchor"!=t&&void 0===s[t]&&(s[t]=u[t])})),s}function sa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e?void 0:e,i=t.style,o=void 0===i?{}:i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{visible:la(n,r.visible,!0),style:ra(o,r.style)}}function ua(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"visible"in e&&(t.visible=e.visible),"style"in e&&["color","width","opacity","linecap","linejoin","dasharray"].forEach((function(n){n in e.style&&(t.style[n]=e.style[n])})),t}function la(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return void 0!==t?t:e}))}function ca(t){var e=t.node,n=t.text,i=t.x,o=t.y,r=t.horizontalMargin,a=void 0===r?0:r,s=t.verticalMargin,u=void 0===s?0:s,l=t.font,c=void 0===l?{}:l,f=t.fill,d=void 0===f?{}:f,p=e.group();"color"in d||(d.color="white");var h=p.rect().fill(d),v=p.text(n).attr({x:i,y:o}).font(c);return"bottom"==c["alignment-baseline"]&&v.dy(-v.bbox().height-5),v.dx(a*("end"==v.attr("text-anchor")?-1:1)).dy(u*("bottom"==c["alignment-baseline"]?-1:1)),h.attr({x:v.bbox().x,y:v.bbox().y,width:v.bbox().width,height:v.bbox().height}),p}function fa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.node,n=t.x,i=void 0===n?0:n,o=t.y,r=void 0===o?0:o,a=t.wspd,s=void 0===a?0:a,u=t.wdir,l=void 0===u?270:u,c=t.length,f=void 0===c?50:c,d=t.strokeStyle,p=void 0===d?void 0:d,h=t.fillTriangle,v=void 0===h||h,y=t.triangleRatio,m=void 0===y?.2:y,b=t.barbDistanceRatio,g=void 0===b?.1:b,w=t.barbHeightRatio,O=void 0===w?3/8:w,S=t.circleOnLowWindspeed,k=void 0===S||S,T=t.circleRadiusRatio,P=void 0===T?.1:T;p=ra(p);var x=_(s),R=e.group(),j=x>=5?R.group():void 0,E=f*m,N=f*g,C=f*O,I=r-f,D=x;if(x<5&&k)R.circle(f*P).cx(i).cy(r).stroke(p).fill("none");else{for(R.line(i,I,i,r).stroke(p);D>=50;)j.polyline([[i,I],[i+C,I+E/2],[i,I+E]]).fill(v?p:"none").stroke(p),I+=E+((D-=50)>=50?N/2:N);for(;D>=10;)j.line(i,I,i+C,I-E/2).stroke(p),I+=N,D-=10;x<10&&(I+=N),D>=5&&j.line(i,I,i+C/2,I-E/4).stroke(p);var B=I-(r-f);B>.9*f&&j.scale(1,.9*f/B,i,r-f),0!=l&&R.rotate(l,i,r)}}function da(t){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pa(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ha(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function va(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ya(t,e){return(ya=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ma(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=ga(t);if(e){var o=ga(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ba(this,n)}}function ba(t,e){return!e||"object"!==da(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ga(t){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ya(t,e)}(r,t);var e,n,i,o=ma(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.parcel,i=void 0===n?void 0:n,a=e.visible,s=void 0===a||a,u=e.temp,l=void 0===u?{}:u,c=e.dewp,f=void 0===c?{}:c,d=pa(e,["parcel","visible","temp","dewp"]);return ha(this,r),(t=o.call(this,d))._parcel=i,void 0===t.id&&void 0!==i&&(t.id=i.id),t._options={visible:s,temp:sa(l,{style:{color:"rgb(255, 153, 0)",width:3,linecap:"round"}}),dewp:sa(f,{style:{color:"rgb(255, 153, 0)",width:3,linecap:"round"}})},t}return e=r,(n=[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e?void 0:e,i=t.temp,o=void 0===i?void 0:i,r=t.dewp,a=void 0===r?void 0:r,s=!1;void 0===o?o={}:s=!0,void 0===a?a={}:s=!0,this._options.temp=ua(this._options.temp,o),this._options.dewp=ua(this._options.dewp,a),s&&this.trigger("change:options"),void 0!==n&&(this.visible=n)}},{key:"parcel",get:function(){return this._parcel}},{key:"visible",get:function(){return this._options.visible},set:function(t){var e=this._options.visible;this._options.visible=!!t,e!=this._options.visible&&this.trigger("change:visible")}},{key:"options",get:function(){return this._options}}])&&va(e.prototype,n),i&&va(e,i),r}(yi);D(wa.prototype);var _a=wa;function Oa(t){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sa(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ka(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ka(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function ka(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xa(t,e){return(xa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ra(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ea(t);if(e){var o=Ea(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ja(this,n)}}function ja(t,e){return!e||"object"!==Oa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ea(t){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Na=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xa(t,e)}(r,t);var e,n,i,o=Ra(r);function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.visible,a=void 0===i||i,s=n.diagram,u=void 0===s?{}:s,l=n.windprofile,c=void 0===l?{}:l,f=n.hodograph,d=void 0===f?{}:f,p=n.parcels,h=void 0===p?{}:p;if(Ta(this,r),(e=o.call(this))._sounding=t,e._diagramParcelCollection=new Oi({fireReplace:!1,fireAddRemoveOnReplace:!0,emptyObjectMaker:function(){return new _a}}),e._visible=a,e._options={diagram:Ia(u),windprofile:Ba(c),hodograph:sa(d),parcels:La(h)},void 0!==e._sounding){e._sounding.parcelCollection.on("add:item",(function(t){return e.addParcel(t)})),e._sounding.parcelCollection.on("remove:item",(function(t){var n,i=Sa(e._diagramParcelCollection);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.parcel===t&&e._diagramParcelCollection.remove(o)}}catch(t){i.e(t)}finally{i.f()}}));var v,y=Sa(e._sounding.parcelCollection);try{for(y.s();!(v=y.n()).done;){var m=v.value;e.addParcel(m)}}catch(t){y.e(t)}finally{y.f()}}return e}return e=r,(n=[{key:"addParcel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;(e=void 0===e?this.getParcelOptions(t):e).parcel=t;var n=new _a(e);return this._diagramParcelCollection.append(n),n}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e?void 0:e,i=t.diagram,o=void 0===i?void 0:i,r=t.windprofile,a=void 0===r?void 0:r,s=t.hodograph,u=void 0===s?void 0:s,l=t.parcels,c=void 0===l?void 0:l,f=!1;void 0===o?o={}:f=!0,void 0===a?a={}:f=!0,void 0===u?u={}:f=!0,this._options.diagram=Da(this._options.diagram,o),this._options.windprofile=Aa(this._options.windprofile,a),this._options.hodograph=ua(this._options.hodograph,u),f&&this.trigger("change:options"),void 0===c&&(c={}),this._options.parcels=Ma(this._options.parcels,c);var d,p=Sa(this.diagramParcelCollection);try{for(p.s();!(d=p.n()).done;){var h=d.value;h.id in c&&h.update(c[h.id])}}catch(t){p.e(t)}finally{p.f()}void 0!==n&&(this.visible=n)}},{key:"getParcelOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n={visible:this.options.parcels.default.visible,temp:{visible:this.options.parcels.default.temp.visible,style:{}},dewp:{visible:this.options.parcels.default.dewp.visible,style:{}}};return["temp","dewp"].forEach((function(e){Object.keys(t.options.parcels.default[e].style).forEach((function(i){n[e].style[i]=t.options.parcels.default[e].style[i]}))})),void 0!==e&&e.id in this.options.parcels&&(n=Va(n,this.options.parcels[e.id],["temp","dewp"])),n}},{key:"sounding",get:function(){return this._sounding}},{key:"visible",get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=!!t,e!=this._visible&&this.trigger("change:visible")}},{key:"options",get:function(){return this._options}},{key:"diagramParcelCollection",get:function(){return this._diagramParcelCollection}}])&&Pa(e.prototype,n),i&&Pa(e,i),r}(yi);D(Na.prototype);var Ca=Na;function Ia(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e||e,i=t.temp,o=void 0===i?{}:i,r=t.dewp,a=void 0===r?{}:r,s=t.wetbulb,u=void 0===s?{}:s;return{visible:n,temp:sa(o,{style:{color:"red",width:3,linecap:"round"}}),dewp:sa(a,{style:{color:"blue",width:3,linecap:"round"}}),wetbulb:sa(u,{style:{color:"green",width:2,linecap:"round"}})}}function Da(t,e){return Va(t,e,["temp","dewp","wetbulb"])}function Ba(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e||e,i=t.windbarbs,o=void 0===i?{}:i,r=t.windspeed,a=void 0===r?{}:r;return{visible:n,windbarbs:sa(o),windspeed:sa(a)}}function Aa(t,e){return Va(t,e,["windbarbs","windspeed"])}function La(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.visible&&(t.visible=!0),void 0===t.default&&(t.default={}),void 0===t.default.visible&&(t.default.visible=!1),void 0===t.default.temp&&(t.default.temp={}),void 0===t.default.temp.visible&&(t.default.temp.visible=!0),void 0===t.default.temp.style&&(t.default.temp.style={}),void 0===t.default.temp.style.color&&(t.default.temp.style.color="rgb(255, 153, 0)"),void 0===t.default.temp.style.width&&(t.default.temp.style.width=3),void 0===t.default.temp.style.linecap&&(t.default.temp.style.linecap="round"),void 0===t.default.dewp&&(t.default.dewp={}),void 0===t.default.dewp.visible&&(t.default.dewp.visible=!0),void 0===t.default.dewp.style&&(t.default.dewp.style={}),void 0===t.default.dewp.style.color&&(t.default.dewp.style.color="rgb(255, 194, 102)"),void 0===t.default.dewp.style.width&&(t.default.dewp.style.width=3),void 0===t.default.dewp.style.linecap&&(t.default.dewp.style.linecap="round"),t}function Ma(t,e){return"visible"in e&&(t.visible=e.visible),"default"in e&&(t.default=Va(t.default,e.default,["temp","dewp"])),Object.keys(e).filter((function(t){return"visible"!=t&&"default"!=t})).forEach((function(n){return t[n]=Da(n in t?t[n]:{},e[n])})),t}function Va(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"visible"in e&&(t.visible=e.visible),n.forEach((function(n){n in e&&(t[n]=ua(t[n]?t[n]:{style:{}},e[n]))})),t}function Ga(t){return(Ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ya(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Fa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fa(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Fa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Xa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function za(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qa(t,e){return(qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ha(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ua(t);if(e){var o=Ua(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ka(this,n)}}function Ka(t,e){return!e||"object"!==Ga(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ua(t){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qa(t,e)}(r,t);var e,n,i,o=Ha(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.renderTo,i=void 0===n?void 0:n,a=e.width,s=void 0===a?void 0:a,u=e.height,l=void 0===u?void 0:u;if(Xa(this,r),(t=o.call(this,{fireReplace:!1,fireAddRemoveOnReplace:!0,emptyObjectMaker:function(){return new Ca}}))._svgNode=void 0===i||"node"in i||"instance"in i?Object(ia.SVG)(i):Object(ia.SVG)().addTo(i),void 0!==s||void 0!==l)t._svgNode.size(s,l);else if(void 0===s&&void 0===l&&void 0!==i&&"getBoundingClientRect"in i){var c=i.getBoundingClientRect(),f=window.getComputedStyle(i);t._svgNode.size(c.width-parseFloat(f.getPropertyValue("padding-left"))-parseFloat(f.getPropertyValue("padding-right")),c.height-parseFloat(f.getPropertyValue("padding-top"))-parseFloat(f.getPropertyValue("padding-bottom")))}return t._plotAreas=new Set,t._svgNode.on("mousemove",(function(e){var n,i=Ya(t._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"isHoverLabelsRemote"in o&&o.svgNode.dispatchEvent(e)}}catch(t){i.e(t)}finally{i.f()}})),t._svgNode.on("mouseout",(function(e){if(t._svgNode.node===e.target){var n,i=Ya(t._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"_hoverLabelsGroup"in o&&o._hoverLabelsGroup.clear()}}catch(t){i.e(t)}finally{i.f()}}})),t.on("add:item",(function(e){var n,i=Ya(t._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"addSounding"in o&&o.addSounding(e)}}catch(t){i.e(t)}finally{i.f()}})),t.on("remove:item",(function(e){var n,i=Ya(t._plotAreas);try{for(i.s();!(n=i.n()).done;){var o=n.value;"removeSounding"in o&&o.removeSounding(e)}}catch(t){i.e(t)}finally{i.f()}})),t}return e=r,(n=[{key:"appendPlotArea",value:function(t){if(!this._plotAreas.has(t)){this._plotAreas.add(t),t.addTo(this.svgNode);var e,n=Ya(this);try{for(n.s();!(e=n.n()).done;){var i=e.value;"addSounding"in t&&t.addSounding(i)}}catch(t){n.e(t)}finally{n.f()}return this}}},{key:"removePlotArea",value:function(t){if(this._plotAreas.has(t)){var e,n=Ya(this);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.removeSounding(i)}}catch(t){n.e(t)}finally{n.f()}return this._plotAreas.delete(t),this}}},{key:"exchangeCoordinateSystem",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=Ya(this._plotAreas);try{for(i.s();!(e=i.n()).done;){var o=e.value;void 0!==n&&o.coordinateSystem!==n||(o.coordinateSystem=t)}}catch(t){i.e(t)}finally{i.f()}}},{key:"addSounding",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Ca(t,e),i=1,o="sounding-".concat(i);this.containsId(o);)i++,o="sounding-".concat(i);return n.id=o,this.append(n),n}},{key:"svgNode",get:function(){return this._svgNode}}])&&za(e.prototype,n),i&&za(e,i),r}(Oi);function Za(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wa(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ja=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,i=void 0===n?100:n,o=e.height,r=void 0===o?100:o,a=e.pressure,s=void 0===a?{}:a,u=e.temperature,l=void 0===u?{}:u;Za(this,t),this._width=i,this._height=r,this.temperatureBottomLeft,this.temperatureBottomRight,this.inclinationTan,this.options={pressure:{},temperature:{}},this._initPressureOptions(s),this._initTemperatureOptions(l)}var e,n,i;return e=t,(n=[{key:"isIsobarsStraightLine",value:function(){return!0}},{key:"isDryAdiabatStraightLine",value:function(){return!1}},{key:"isIsothermsVertical",value:function(){return void 0!==this.options.temperature.inclinationAngle&&0==this.options.temperature.inclinationAngle}},{key:"getPByXY",value:function(t,e){return Math.pow(this.options.pressure.min,e/this.height)*Math.pow(this.options.pressure.max,(this.height-e)/this.height)}},{key:"getTByXY",value:function(t,e){var n=t-e*this.inclinationTan;return this.temperatureBottomLeft+n*(this.temperatureBottomRight-this.temperatureBottomLeft)/this.width}},{key:"getYByXP",value:function(t,e){return this.height*Math.log(this.options.pressure.max/e)/Math.log(this.options.pressure.max/this.options.pressure.min)}},{key:"getTByXP",value:function(t,e){return this.getTByXY(t,this.getYByXP(t,e))}},{key:"getXByYT",value:function(t,e){return(e-this.temperatureBottomLeft)*this.width/(this.temperatureBottomRight-this.temperatureBottomLeft)+t*this.inclinationTan}},{key:"getYByXT",value:function(t,e){return 0!=this.inclinationTan?(t-this.getXByYT(0,e))/this.inclinationTan:void 0}},{key:"getXByPT",value:function(t,e){return this.getXByYT(this.getYByXP(0,t),e)}},{key:"getYByPT",value:function(t){return this.getYByXP(0,t)}},{key:"getXByYPotentialTemperature",value:function(t,e){return e=s(e,this.getPByXY(0,t)),this.getXByYT(t,e)}},{key:"getYByXPotentialTemperature",value:function(t,e){var n=this.getPByXY(t,0),i=this.getPByXY(t,this.height);if(!(a(this.getTByXP(t,i),i)<e||e<a(this.getTByXP(t,n),n))){for(;n-i>10;){var o=i+(n-i)/2,r=a(this.getTByXP(t,o),o);if(void 0===r)return;r<e?n=o:i=o}return this.getYByXP(t,i+(n-i)/2)}}},{key:"getXByPPotentialTemperatur",value:function(t,e){return e=s(e,t),this.getXByPT(t,e)}},{key:"getYByPPotentialTemperatur",value:function(t,e){var n=this.getXByPPotentialTemperatur(t,e);return this.getYByXPotentialTemperature(n,e)}},{key:"getXByYHMR",value:function(t,e){var n=this.getPByXY(0,t);return this.getXByYT(t,l(e,n))}},{key:"getYByXHMR",value:function(t,e){for(var n=this.getPByXY(t,0),i=this.getPByXY(t,this.height);n-i>10;){var o=i+(n-i)/2,r=p(this.getTByXP(t,o),o);if(void 0===r)return;r<e?i=o:n=o}return this.getYByXP(t,i+(n-i)/2)}},{key:"getXByPHMR",value:function(t,e){var n=l(e,t);return this.getXByPT(t,n)}},{key:"getYByPHMR",value:function(t,e){var n=l(e,t);return this.getYByPT(t,n)}},{key:"getXByYEquiPotTemp",value:function(t,e){var n=u(e,this.getPByXY(0,t));return this.getXByYT(t,n)}},{key:"getYByXEquiPotTemp",value:function(t,e){for(var n=0,i=this.height,o=void 0;i-n>10;){o=n+(i-n)/2;var r=this.getYByXT(t,u(e,this.getPByXY(t,o)));if(void 0===r)return;r<e?i=o:n=o}return o}},{key:"getXByPEquiPotTemp",value:function(t,e){var n=u(e,t);return this.getXByPT(t,n)}},{key:"getYByPEquiPotTemp",value:function(t,e){var n=u(e,t);return this.getYByPT(t,n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.pressure,n=void 0===e?{}:e,i=t.temperature,o=void 0===i?{}:i;"min"in n&&(this.options.pressure.min=void 0===n.min?100:n.min),"max"in n&&(this.options.pressure.max=void 0===n.max?1e3:n.max),"min"in o&&(this.options.temperature.min=void 0===o.min?m(-40):o.min),"max"in o&&(this.options.temperature.max=void 0===o.max?m(-45):o.max),"reference"in o&&(this.options.temperature.reference=void 0===o.reference?"base":o.reference),"inclinationAngle"in o&&(this.options.temperature.inclinationAngle=void 0===o.inclinationAngle?45:o.inclinationAngle),this._normalizeTemperatureRange(),this.trigger("change:options")}},{key:"_initPressureOptions",value:function(t){var e=t.min,n=void 0===e?100:e,i=t.max,o=void 0===i?1050:i;this.options.pressure={min:n,max:o}}},{key:"_initTemperatureOptions",value:function(t){var e=t.min,n=void 0===e?m(-40):e,i=t.max,o=void 0===i?m(45):i,r=t.reference,a=void 0===r?"base":r,s=t.inclinationAngle,u=void 0===s?45:s;this.options.temperature={min:n,max:o,reference:a,inclinationAngle:u},this._normalizeTemperatureRange()}},{key:"_normalizeTemperatureRange",value:function(){if(this.temperatureBottomLeft=this.options.temperature.min,this.temperatureBottomRight=this.options.temperature.max,this.inclinationTan=45==this.options.temperature.inclinationAngle?1:0==this.options.temperature.inclinationAngle?0:Math.tan(this.options.temperature.inclinationAngle*Math.PI/180),/^[0-9]+$/.test(this.options.temperature.reference)){var t=this.getYByXP(0,this.options.temperature.reference),e=this.inclinationTan*t,n=(this.temperatureBottomRight-this.temperatureBottomLeft)/this.width;this.temperatureBottomLeft+=n*e,this.temperatureBottomRight+=n*e}}},{key:"width",get:function(){return this._width},set:function(t){var e=this._width;this._width=t,e!=this._width&&this.trigger("change:options")}},{key:"height",get:function(){return this._height},set:function(t){var e=this._height;this._height=t,e!=this._height&&this.trigger("change:options")}}])&&Wa(e.prototype,n),i&&Wa(e,i),t}();D(Ja.prototype);var Qa=Ja;function ts(t){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function es(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ns(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function is(t,e){return(is=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function os(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=as(t);if(e){var o=as(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return rs(this,n)}}function rs(t,e){return!e||"object"!==ts(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function as(t){return(as=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ss=.2857,us=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&is(t,e)}(r,t);var e,n,i,o=os(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=void 0===e?100:e,i=t.height,a=void 0===i?100:i,s=t.pressure,u=void 0===s?{}:s,l=t.temperature,c=void 0===l?{}:l;return es(this,r),c.inclinationAngle=0,o.call(this,{width:n,height:a,pressure:u,temperature:c})}return e=r,(n=[{key:"isDryAdiabatStraightLine",value:function(){return!0}},{key:"getPByXY",value:function(t,e){return Math.pow(Math.pow(this.options.pressure.max,ss)-e*(Math.pow(this.options.pressure.max,ss)-Math.pow(this.options.pressure.min,ss))/this.height,1/ss)}},{key:"getYByXP",value:function(t,e){return this.height*(Math.pow(this.options.pressure.max,ss)-Math.pow(e,ss))/(Math.pow(this.options.pressure.max,ss)-Math.pow(this.options.pressure.min,ss))}},{key:"getYByXT",value:function(){}}])&&ns(e.prototype,n),i&&ns(e,i),r}(Qa);function ls(t){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fs(t,e){return(fs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ds(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=hs(t);if(e){var o=hs(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ps(this,n)}}function ps(t,e){return!e||"object"!==ls(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hs(t){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fs(t,e)}(n,t);var e=ds(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.width,o=void 0===i?100:i,r=t.height,a=void 0===r?100:r,s=t.pressure,u=void 0===s?{}:s,l=t.temperature,c=void 0===l?{}:l;return cs(this,n),c.inclinationAngle=0,e.call(this,{width:o,height:a,pressure:u,temperature:c})}return n}(Qa);function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ms(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bs(t,e){return(bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_s(t);if(e){var o=_s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ws(this,n)}}function ws(t,e){return!e||"object"!==ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _s(t){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Os=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bs(t,e)}(n,t);var e=gs(n);function n(){return ms(this,n),e.apply(this,arguments)}return n}(Qa);function Ss(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ks(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ts=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.svgNode,o=void 0===i?void 0:i,r=n.coordinateSystem,a=void 0===r?void 0:r,s=n.x,u=void 0===s?0:s,l=n.y,c=void 0===l?0:l,f=n.width,d=void 0===f?100:f,p=n.height,h=void 0===p?100:p,v=n.style,y=void 0===v?{}:v,m=n.visible,b=void 0===m||m,g=n.events,w=void 0===g?{}:g;Ss(this,t),this._svgNode=Object(ia.SVG)().attr({x:u,y:c,width:d,height:h}).css(this._getNormalizedStyle(y)).css("display",b?"inline":"none"),void 0!==o&&this.addTo(o),this._svgNodeBackground=this._svgNode.group(),this._visible=b,this._coordinateSystem=a,this._coordinateSystemListenerKey=void 0!==this._coordinateSystem?this._coordinateSystem.on("change:options",(function(){return e.onCoordinateSystemChange()})):void 0,this.on("change:extent",(function(){return e.onCoordinateSystemChange()})),this._initEvents(w)}var e,n,i;return e=t,(n=[{key:"addTo",value:function(t){this._svgNode.addTo(t)}},{key:"init",value:function(){this.onCoordinateSystemChange()}},{key:"onCoordinateSystemChange",value:function(){void 0!==this._coordinateSystem&&this.drawBackground(this._svgNodeBackground)}},{key:"drawBackground",value:function(t){t.clear(),this.trigger("prebuild:background",{node:t}),this._drawBackground(t),this.trigger("postbuild:background",{node:t})}},{key:"_drawBackground",value:function(){}},{key:"_getNormalizedStyle",value:function(t){var e=t.overflow;return{overflow:void 0===e?"hidden":e}}},{key:"_initEvents",value:function(t){var e=this,n=t.click,i=void 0===n?void 0:n,o=t.dblclick,r=void 0===o?void 0:o,a=t.mousedown,s=void 0===a?void 0:a,u=t.mouseup,l=void 0===u?void 0:u,c=t.mouseover,f=void 0===c?void 0:c,d=t.mouseout,p=void 0===d?void 0:d,h=t.mousemove,v=void 0===h?void 0:h,y=t.touchstart,m=void 0===y?void 0:y,b=t.touchmove,g=void 0===b?void 0:b,w=t.touchleave,_=void 0===w?void 0:w,O=t.touchend,S=void 0===O?void 0:O,k=t.touchcancel,T={click:i,dblclick:r,mousedown:s,mouseup:l,mouseover:f,mouseout:p,mousemove:v,touchstart:m,touchmove:g,touchleave:_,touchend:S,touchcancel:void 0===k?void 0:k};Object.keys(T).forEach((function(t){e._svgNode.on(t,(function(n){var i=e.getExtendedEvent(n,e._svgNode.point(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset));void 0!==T[t]&&T[t].call(e,i),e.trigger(t,i)}))}))}},{key:"getExtendedEvent",value:function(t,e){return t.elementX=e.x,t.elementY=e.y,t}},{key:"svgNode",get:function(){return this._svgNode}},{key:"visible",get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=t,e!=this._visible&&(this._svgNode.style("display",this._visible?"inline":"none"),this.trigger("change:visible"))}},{key:"x",get:function(){return this._svgNode.attr("x")},set:function(t){this._svgNode.attr({x:t}),this.trigger("change:position")}},{key:"y",get:function(){return this._svgNode.attr("y")},set:function(t){this._svgNode.attr({y:t}),this.trigger("change:position")}},{key:"width",get:function(){return this._svgNode.attr("width")},set:function(t){this._svgNode.attr({width:t}),this.trigger("change:extent")}},{key:"height",get:function(){return this._svgNode.attr("height")},set:function(t){this._svgNode.attr({height:t}),this.trigger("change:extent")}},{key:"style",get:function(){return this._svgNode.css()},set:function(t){this._svgNode.css(t)}},{key:"coordinateSystem",get:function(){return this._coordinateSystem},set:function(t){var e=this;void 0!==this._coordinateSystemListenerKey&&this._coordinateSystem.un("change:options",this._coordinateSystemListenerKey),this._coordinateSystem=t,this._coordinateSystemListenerKey=this._coordinateSystem.on("change:options",(function(){return e.onCoordinateSystemChange()})),this.onCoordinateSystemChange()}},{key:"minExtentLength",get:function(){return Math.min(this.width,this.height)}},{key:"maxExtentLength",get:function(){return Math.max(this.width,this.height)}}])&&ks(e.prototype,n),i&&ks(e,i),t}();D(Ts.prototype);var Ps=Ts;function xs(t){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function js(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Es(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ns(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ns(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Ns(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Cs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Is(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ds(t,e,n){return(Ds="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ms(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Bs(t,e){return(Bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function As(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ms(t);if(e){var o=Ms(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ls(this,n)}}function Ls(t,e){return!e||"object"!==xs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ms(t){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bs(t,e)}(r,t);var e,n,i,o=As(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.svgNode,i=void 0===n?void 0:n,a=e.coordinateSystem,s=void 0===a?void 0:a,u=e.x,l=void 0===u?0:u,c=e.y,f=void 0===c?0:c,d=e.width,p=void 0===d?100:d,h=e.height,v=void 0===h?100:h,y=e.style,m=void 0===y?{}:y,b=e.visible,g=void 0===b||b,w=e.events,_=void 0===w?{}:w,O=e.getSoundingVisibility,S=void 0===O?function(t){return t.visible}:O,k=e.dataGroupIds,T=void 0===k?[]:k,P=e.getCoordinatesByLevelData,x=void 0===P?function(){return{x:void 0,y:void 0}}:P,R=e.insertDataGroupInto,j=void 0===R?function(){}:R,E=e.filterDataPoint,N=void 0===E?void 0:E,C=e.minDataPointsDistance,I=void 0===C?0:C;return Cs(this,r),(t=o.call(this,{svgNode:i,coordinateSystem:s,x:l,y:f,width:p,height:v,style:m,visible:g,events:_}))._getSoundingVisibility=S,t._dataGroupIds=T,t._getCoordinatesByLevelData=x,t._insertDataGroupInto=j,t._filterDataPoint=N,t._minDataPointsDistance=I,t._svgNodeData=t.svgNode.group(),t._soundings=new Map,t}return e=r,(n=[{key:"addSounding",value:function(t){var e=this,n=this._svgNodeData.group(),i=t.on("change:visible",(function(){return e.onChangeSoundingVisibility(t,n)})),o=t.on("change:options",(function(){void 0!==e.coordinateSystem&&e.drawSounding(t,n),e.onChangeSoundingVisibility(t,n)}));this._soundings.set(t,{group:n,listenerKeyVisible:i,listenerKeyOptions:o}),this.trigger("add:sounding",t),void 0!==this.coordinateSystem&&this.drawSounding(t,n),this.setDisplayOfSounding(t,n)}},{key:"removeSounding",value:function(t){this._soundings.has(t)&&(this._soundings.get(t).group.remove(),t.un(this._soundings.get(t).listenerKeyVisible),t.un(this._soundings.get(t).listenerKeyOptions),this._soundings.delete(t)),this.trigger("remove:sounding",t)}},{key:"onCoordinateSystemChange",value:function(){Ds(Ms(r.prototype),"onCoordinateSystemChange",this).call(this),this.drawSoundings()}},{key:"onChangeSoundingVisibility",value:function(t,e){this.setDisplayOfSounding(t,e)}},{key:"setDisplayOfSounding",value:function(t,e){e.css("display",this._getSoundingVisibility(t)?"inline":"none")}},{key:"drawSoundings",value:function(){if(void 0!==this.coordinateSystem){var t,e=Es(this._soundings.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.drawSounding(n,this._soundings.get(n).group)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"drawSounding",value:function(t,e){var n=this;e.clear(),this.trigger("preinsert:sounding",{sounding:t,node:e});var i=e.group(),o={},r=this._getFilterDataPointFunction(),a={};t.sounding.getLevels().reverse().forEach((function(e){var i=t.sounding.getData(e);n._dataGroupIds.forEach((function(e){e in o||(o[e]=[]);var s={levelData:i,x:void 0,y:void 0},u=n._getCoordinatesByLevelData(e,t,s.levelData,n),l=u.x,c=u.y;s.x=l,s.y=c,void 0===l||void 0===c||void 0!==r&&r(s,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rs(Object(n),!0).forEach((function(e){js(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},a))||(a=s,o[e].push(s))}))})),Object.keys(o).forEach((function(e){o[e].length>0&&n._insertDataGroupInto(i,e,t,o[e],n)})),this.trigger("postinsert:sounding",{sounding:t,node:e})}},{key:"_getFilterDataPointFunction",value:function(){return void 0===this._filterDataPoint?0===(t=this._minDataPointsDistance)?void 0:function(e,n){var i=e.x,o=e.y;if(void 0===n.x||void 0===n.y)return n.x=i,n.y=o,!1;var r=Math.sqrt(Math.pow(i-n.x,2)+Math.pow(o-n.y,2))<t;return r||(n.x=i,n.y=o),r}:this._filterDataPoint;var t}},{key:"dataGroupIds",get:function(){return this._dataGroupIds}},{key:"getCoordinatesByLevelData",get:function(){return this._getCoordinatesByLevelData}},{key:"minDataPointsDistance",get:function(){return this._minDataPointsDistance},set:function(t){var e=this._minDataPointsDistance;this._minDataPointsDistance=t,e!=this._minDataPointsDistance&&this.drawSoundings()}}])&&Is(e.prototype,n),i&&Is(e,i),r}(Ps);function Gs(t){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ys(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Fs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fs(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Fs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Xs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zs(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qs(t,e,n){return(qs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$s(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Hs(t,e){return(Hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ks(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=$s(t);if(e){var o=$s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Us(this,n)}}function Us(t,e){return!e||"object"!==Gs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $s(t){return($s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hs(t,e)}(r,t);var e,n,i,o=Ks(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.svgNode,i=void 0===n?void 0:n,a=e.coordinateSystem,s=void 0===a?void 0:a,u=e.x,l=void 0===u?0:u,c=e.y,f=void 0===c?0:c,d=e.width,p=void 0===d?100:d,h=e.height,v=void 0===h?100:h,y=e.style,m=void 0===y?{}:y,b=e.visible,g=void 0===b||b,w=e.events,_=void 0===w?{}:w,O=e.hoverLabels,S=void 0===O?{}:O,k=e.getSoundingVisibility,T=void 0===k?function(t){return t.visible}:k,P=e.dataGroupIds,x=void 0===P?void 0:P,R=e.getCoordinatesByLevelData,j=void 0===R?void 0:R,E=e.insertDataGroupInto,N=void 0===E?void 0:E,C=e.filterDataPoint,I=void 0===C?void 0:C,D=e.minDataPointsDistance,B=void 0===D?0:D;return Xs(this,r),(t=o.call(this,{svgNode:i,coordinateSystem:s,x:l,y:f,width:p,height:v,style:m,visible:g,events:_,getSoundingVisibility:T,dataGroupIds:x,getCoordinatesByLevelData:j,insertDataGroupInto:N,filterDataPoint:I,minDataPointsDistance:B}))._hoverLabelsGroup=t.svgNode.group(),t._isHoverLabelsRemote=!0,t._initHoverLabels(S),t}return e=r,(n=[{key:"onChangeSoundingVisibility",value:function(t,e){qs($s(r.prototype),"onChangeSoundingVisibility",this).call(this,t,e),this._hoverLabelsGroup.clear()}},{key:"drawSounding",value:function(t,e){qs($s(r.prototype),"drawSounding",this).call(this,t,e),this._getSoundingVisibility(t)&&this._hoverLabelsGroup.clear()}},{key:"getExtendedEvent",value:function(t,e){return(t=qs($s(r.prototype),"getExtendedEvent",this).call(this,t,e)).diagramPres=void 0,void 0!==this.coordinateSystem&&(t.diagramPres=this.coordinateSystem.getPByXY(0,this.coordinateSystem.height-t.elementY)),t}},{key:"_initHoverLabels",value:function(t){var e=this,n=t.visible,i=void 0===n||n,o=t.type,r=void 0===o?"mousemove":o,a=t.remote,s=void 0===a||a,u=t.insertLabelsFunc,l=void 0===u?void 0:u;this._isHoverLabelsRemote=s,i&&void 0!==l&&(this.on("change:extent",(function(){return e._hoverLabelsGroup.clear()})),this.on(r,(function(t){if(t.diagramPres){var n=e.hoverLabelsSounding;if(void 0!==n){var i=n.sounding;l(n,i.getData(i.getNearestLevel(t.diagramPres)),e._hoverLabelsGroup)}}})))}},{key:"isHoverLabelsRemote",get:function(){return this._isHoverLabelsRemote}},{key:"hoverLabelsSounding",get:function(){var t,e=Ys(this._soundings.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this._getSoundingVisibility(n))return n}}catch(t){e.e(t)}finally{e.f()}}}])&&zs(e.prototype,n),i&&zs(e,i),r}(Vs);function Ws(t){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Js(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Qs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qs(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Qs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function tu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nu(t,e,n){return(nu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=au(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function iu(t,e){return(iu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ou(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=au(t);if(e){var o=au(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return ru(this,n)}}function ru(t,e){return!e||"object"!==Ws(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function au(t){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var su=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iu(t,e)}(s,t);var e,n,i,r=ou(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.svgNode,i=void 0===n?void 0:n,o=e.coordinateSystem,a=void 0===o?void 0:o,u=e.x,l=void 0===u?0:u,f=e.y,d=void 0===f?0:f,p=e.width,h=void 0===p?100:p,v=e.height,y=void 0===v?100:v,g=e.style,w=void 0===g?{}:g,_=e.visible,O=void 0===_||_,S=e.events,k=void 0===S?{}:S,T=e.dataGroupIds,P=void 0===T?["temp","dewp","wetbulb"]:T,x=e.getCoordinatesByLevelData,R=void 0===x?function(t,e,n,i){if(void 0===n.pres)return{};var o=void 0;switch(t){case"temp":o=n.tmpk;break;case"dewp":o=n.dwpk;break;case"wetbulb":o=c(n.tmpk,n.dwpk,n.pres)}return void 0===o?{}:{x:i.coordinateSystem.getXByPT(n.pres,o),y:i.coordinateSystem.height-i.coordinateSystem.getYByPT(n.pres,o),value:Math.round(10*b(o))/10,unit:"℃"}}:x,j=e.insertDataGroupInto,E=void 0===j?function(t,e,n,i){var o=e in n.options.diagram?n.options.diagram[e].style:{};t.group().polyline(i.map((function(t){return[t.x,t.y]}))).fill("none").stroke(o)}:j,N=e.filterDataPoint,C=void 0===N?void 0:N,I=e.minDataPointsDistance,D=void 0===I?0:I,B=e.isobars,A=void 0===B?{}:B,L=e.isotherms,M=void 0===L?{}:L,V=e.dryadiabats,G=void 0===V?{}:V,Y=e.pseudoadiabats,F=void 0===Y?{}:Y,X=e.mixingratio,z=void 0===X?{}:X,q=e.hoverLabels,H=void 0===q?{}:q,K=e.parcels,U=void 0===K?{}:K;return tu(this,s),(t=r.call(this,{svgNode:i,coordinateSystem:a,x:l,y:d,width:h,height:y,style:w,visible:O,events:k,hoverLabels:H,getSoundingVisibility:function(t){return t.visible&&t.options.diagram.visible},dataGroupIds:P,getCoordinatesByLevelData:R,insertDataGroupInto:E,filterDataPoint:C,minDataPointsDistance:D})).options={isobars:uu(A),isotherms:uu(M,{highlightedLines:[m(0)]}),dryadiabats:uu(G),pseudoadiabats:uu(F,{style:{color:"rgb(102, 51, 0)",dasharray:6}}),mixingratio:uu(z,{minPressure:500,style:{color:"rgb(102, 51, 0)",dasharray:2}})},t.svgGroups={border:t._svgNodeBackground.group(),isobars:t._svgNodeBackground.group(),isotherms:t._svgNodeBackground.group(),dryadiabats:t._svgNodeBackground.group(),mixingratio:t._svgNodeBackground.group(),pseudoadiabats:t._svgNodeBackground.group()},t._parcelsOptions=U,"visible"in t._parcelsOptions||(t._parcelsOptions.visible=!0),t._parcels=new Map,t.on("add:sounding",(function(e){var n={parcelsGroup:void 0,parcelsGroups:new Map,addItemListenerKey:void 0,changeVisibleListeners:[],changeOptionsListeners:[]},i=function(i){n.changeVisibleListeners.push({diagramParcel:i,listenerKey:i.on("change:visible",(function(){if(n.parcelsGroups.has(i)){var t=n.parcelsGroups.get(i);i.visible?t.show():t.hide()}}))}),n.changeOptionsListeners.push({diagramParcel:i,listenerKey:i.on("change:options",(function(){return t.drawParcel(e,i)}))})};n.addItemListenerKey=e.diagramParcelCollection.on("add:item",(function(n){i(n),t.drawParcel(e,n)}));var o,r=Js(e.diagramParcelCollection);try{for(r.s();!(o=r.n()).done;){var a=o.value;i(a)}}catch(t){r.e(t)}finally{r.f()}t._parcels.set(e,n)})),t.on("remove:sounding",(function(e){if(t._parcels.has(e)){var n=t._parcels.get(e);e.diagramParcelCollection.un("add:item",n.addItemListenerKey),n.changeVisibleListeners.forEach((function(t){return t.diagramParcel.un("change:visible",t.listenerKey)})),n.changeOptionsListeners.forEach((function(t){return t.diagramParcel.un("change:options",t.listenerKey)}))}t._parcels.delete(e)})),t.init(),t}return e=s,(n=[{key:"getIsobarsVisible",value:function(){return this.options.isobars.visible}},{key:"setIsobarsVisible",value:function(t){return this.options.isobars.visible=!!t,this.plotIsobars(),this}},{key:"getIsothermsVisible",value:function(){return this.options.isotherms.visible}},{key:"setIsothermsVisible",value:function(t){return this.options.isotherms.visible=!!t,this.plotIsotherms(),this}},{key:"getDryadiabatsVisible",value:function(){return this.options.dryadiabats.visible}},{key:"setDryadiabatsVisible",value:function(t){return this.options.dryadiabats.visible=!!t,this.plotDryadiabats(),this}},{key:"getPseudoadiabatsVisible",value:function(){return this.options.pseudoadiabats.visible}},{key:"setPseudoadiabatsVisible",value:function(t){return this.options.pseudoadiabats.visible=!!t,this.plotPseudoadiabats(),this}},{key:"getMixingratioVisible",value:function(){return this.options.mixingratio.visible}},{key:"setMixingratioVisible",value:function(t){return this.options.mixingratio.visible=!!t,this.plotMixingratio(),this}},{key:"drawSounding",value:function(t,e){if(nu(au(s.prototype),"drawSounding",this).call(this,t,e),this._parcels.has(t)){var n=this._parcels.get(t);n.parcelsGroup=e.group(),t.options.parcels.visible||n.parcelsGroup.hide(),this._parcels.set(t,n)}this.drawParcels(t)}},{key:"drawParcels",value:function(t){if(this._parcelsOptions.visible&&this._parcels.has(t)){var e=this._parcels.get(t);e.parcelsGroup.clear(),e.parcelsGroups.clear();var n,i=Js(t.diagramParcelCollection);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.drawParcel(t,o)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"drawParcel",value:function(t,e){var n=this,i=e.parcel;if(void 0!==i.pres&&void 0!==i.tmpc&&void 0!==i.dwpc&&this._parcels.has(t)){var o=this._parcels.get(t),r=o.parcelsGroup.group();o.parcelsGroups.set(e,r),this._parcels.set(t,o);var s=a(m(i.tmpc),i.pres),u=p(m(i.dwpc),i.pres),l=h(s,u),c=y(m(i.tmpc),m(i.dwpc)),d=f(c,c,l),v=e.options;v.visible||r.hide();var b=r.group();v.temp.visible||b.hide();var g=r.group();v.dewp.visible||g.hide();var w=this.coordinateSystem.getYByPT(i.pres,m(i.tmpc)),_=this.coordinateSystem.getXByYPotentialTemperature(w,s),O=this.coordinateSystem.getYByPPotentialTemperatur(l,s),S=this.coordinateSystem.getXByYPotentialTemperature(O,s),k=[[_,w]];if(!this.coordinateSystem.isDryAdiabatStraightLine())for(var T=w+10;T<O;T+=10)k.push([this.coordinateSystem.getXByYPotentialTemperature(T,s),T]);k.push([S,O]);for(var P=this.coordinateSystem.height,x=this.coordinateSystem.getXByYEquiPotTemp(P,d),R=O+10;R<P;R+=10)k.push([this.coordinateSystem.getXByYEquiPotTemp(R,d),R]);k.push([x,P]),b.polyline(k.map((function(t){return t[1]=n.coordinateSystem.height-t[1],t}))).fill("none").stroke(v.temp.style);for(var j=this.coordinateSystem.getXByYHMR(w,u),E=this.coordinateSystem.getXByYHMR(O,u),N=[[j,w]],C=w+10;C<O;C+=10)N.push([this.coordinateSystem.getXByYHMR(C,u),C]);N.push([E,O]),g.polyline(N.map((function(t){return t[1]=n.coordinateSystem.height-t[1],t}))).fill("none").stroke(v.dewp.style)}}},{key:"_drawBackground",value:function(t){nu(au(s.prototype),"_drawBackground",this).call(this,t),this.svgGroups={border:t.group(),isobars:t.group(),isotherms:t.group(),dryadiabats:t.group(),mixingratio:t.group(),pseudoadiabats:t.group()},this.svgGroups.border.clear(),this.svgGroups.border.rect(this.coordinateSystem.width,this.coordinateSystem.height).attr({stroke:"black","stroke-width":1,"fill-opacity":0}),this.plotIsobars(!0),this.plotIsotherms(!0),this.plotDryadiabats(!0),this.plotPseudoadiabats(!0),this.plotMixingratio(!0)}},{key:"plotIsobars",value:function(t){var e=this,n=this.coordinateSystem.getPByXY(0,this.coordinateSystem.height),i=this.coordinateSystem.getPByXY(0,0),o=i-n;this._plotLines(this.svgGroups.isobars,this.options.isobars,{min:n,max:i,interval:o>500?100:o>50?10:1},(function(t){var n=e.coordinateSystem.getYByXP(0,t);return[[0,n],[e.coordinateSystem.width,n]]}),t)}},{key:"plotIsotherms",value:function(t){var e=this,n=b(this.coordinateSystem.getTByXY(0,this.coordinateSystem.height)),i=b(this.coordinateSystem.getTByXY(this.coordinateSystem.width,0)),o=i-n;this._plotLines(this.svgGroups.isotherms,this.options.isotherms,{min:n,max:i,interval:o>50?10:5},(function(t){t=m(t);var n=[[void 0,void 0],[void 0,void 0]];return e.coordinateSystem.isIsothermsVertical()?(n[0][1]=0,n[1][1]=e.coordinateSystem.height,n[0][0]=n[1][0]=e.coordinateSystem.getXByYT(n[0][1],t)):(n[0][1]=0,n[0][0]=e.coordinateSystem.getXByYT(n[0][1],t),n[0][0]<0&&(n[0][1]=e.coordinateSystem.getYByXT(n[0][0]=0,t)),n[1][0]=e.coordinateSystem.width,n[1][1]=e.coordinateSystem.getYByXT(n[1][0],t),void 0===n[1][1]?(n[1][0]=n[0][0],n[1][1]=e.coordinateSystem.height):n[1][1]>e.coordinateSystem.height&&(n[1][1]=e.coordinateSystem.height,n[1][0]=e.coordinateSystem.getXByYT(n[1][1],t))),n}),t)}},{key:"plotDryadiabats",value:function(t){var e=this;this._plotLines(this.svgGroups.dryadiabats,this.options.dryadiabats,{min:b(a(this.coordinateSystem.getTByXY(0,0),this.coordinateSystem.getPByXY(0,0))),max:b(a(this.coordinateSystem.getTByXY(this.coordinateSystem.width,this.coordinateSystem.height),this.coordinateSystem.getPByXY(this.coordinateSystem.width,this.coordinateSystem.height))),interval:10},(function(t){var n=m(t),i=0,o=e.coordinateSystem.getXByYPotentialTemperature(i,n);(void 0===o||o>e.coordinateSystem.width)&&(o=e.coordinateSystem.width,i=e.coordinateSystem.getYByXPotentialTemperature(o,n));var r=0,a=e.coordinateSystem.getYByXPotentialTemperature(r,n);if((void 0===a||a>e.coordinateSystem.height)&&(a=e.coordinateSystem.height,r=e.coordinateSystem.getXByYPotentialTemperature(a,n)),void 0!==o&&void 0!==i&&void 0!==r&&void 0!==a){if(e.coordinateSystem.isDryAdiabatStraightLine())return[[o,i],[r,a]];for(var s=[[o,i]],u=i+10;u<a;u+=10)s.push([e.coordinateSystem.getXByYPotentialTemperature(u,n),u]);return s.push([r,a]),s}}),t)}},{key:"plotPseudoadiabats",value:function(t){var e=this;this._plotLines(this.svgGroups.pseudoadiabats,this.options.pseudoadiabats,{lines:[-18,-5,10,30,60,110,180]},(function(t){for(var n=m(t),i=Math.max(0,void 0===e.options.pseudoadiabats.maxPressure?0:e.coordinateSystem.getYByPEquiPotTemp(e.options.pseudoadiabats.maxPressure,n)),o=e.coordinateSystem.getXByYEquiPotTemp(i,n),r=Math.min(e.coordinateSystem.height,void 0===e.options.pseudoadiabats.minPressure?e.coordinateSystem.height:e.coordinateSystem.getYByPEquiPotTemp(e.options.pseudoadiabats.minPressure,n)),a=e.coordinateSystem.getXByYEquiPotTemp(r,n),s=[[o,i]],u=i+10;u<r;u+=10)s.push([e.coordinateSystem.getXByYEquiPotTemp(u,n),u]);return s.push([a,r]),s}),t)}},{key:"plotMixingratio",value:function(t){var e=this;this._plotLines(this.svgGroups.mixingratio,this.options.mixingratio,{lines:[.01,.1,1,2,4,7,10,16,21,32,40]},(function(t){for(var n=Math.max(0,void 0===e.options.mixingratio.maxPressure?0:e.coordinateSystem.getYByPHMR(e.options.mixingratio.maxPressure,t)),i=e.coordinateSystem.getXByYHMR(n,t),o=Math.min(e.coordinateSystem.height,void 0===e.options.mixingratio.minPressure?e.coordinateSystem.height:e.coordinateSystem.getYByPHMR(e.options.mixingratio.minPressure,t)),r=e.coordinateSystem.getXByYHMR(o,t),a=[[i,n]],s=n+10;s<o;s+=10)a.push([e.coordinateSystem.getXByYHMR(s,t),s]);return a.push([r,o]),a}),t)}},{key:"_plotLines",value:function(t,e,n,i,o){if(e.visible?t.show():t.hide(),o){t.clear();var r=[];if(void 0!==e.lines)r=e.lines;else if(void 0===e.min&&void 0===e.max&&void 0===e.interval&&void 0!==n.lines)r=n.lines;else{void 0!==e.min&&(n.min=e.min),void 0!==e.max&&(n.max=e.max);var a=e.interval;void 0===a&&(a=n.interval);for(var s=Math.ceil(n.min/a)*a,u=Math.floor(n.max/a)*a,l=s;l<=u;l+=a)r.push(l)}var c=3;void 0!==e.style.width&&(c=e.style.width+2),r.forEach((function(n){var o=i.call(this,n),r=2==o.length?t.line(o[0][0],this.coordinateSystem.height-o[0][1],o[1][0],this.coordinateSystem.height-o[1][1]).stroke(e.style):t.polyline(o.map((function(t){return t[1]=this.coordinateSystem.height-t[1],t}),this)).fill("none").stroke(e.style);void 0!==e.highlightedLines&&e.highlightedLines.forEach((function(t){n==t&&r.stroke({width:c})}),this)}),this)}}},{key:"getExtendedEvent",value:function(t,e){return(t=nu(au(s.prototype),"getExtendedEvent",this).call(this,t,e)).diagramTmpk=this.coordinateSystem.getTByXY(t.elementX,this.coordinateSystem.height-t.elementY),t}},{key:"_initHoverLabels",value:function(t){var e=t.visible,n=void 0===e||e,i=t.type,o=void 0===i?"mousemove":i,r=t.snapToData,a=void 0===r||r,u=t.remote,l=void 0===u||u,c=t.insertLabelsFunc,f=void 0===c?void 0:c,d=t.pres,p=void 0===d?{}:d,h=t.temp,v=void 0===h?{}:h,y=t.dewp,m=void 0===y?{}:y,b=t.wetbulb,g=void 0===b?{}:b;p.length="length"in p?p.length:60,p.align="align"in p?p.align:"left","visible"in p||(p.visible=!0),"style"in p||(p.style={}),p.font=aa(p.font,{anchor:"right"==p.align?"end":"start"}),"fill"in p||(p.fill={}),void 0===p.fill.opacity&&(p.fill.opacity=.7),void 0===p.horizontalMargin&&(p.horizontalMargin=5),"visible"in v||(v.visible=!0),"style"in v||(v.style={}),v.font=aa(v.font,{anchor:"start","alignment-baseline":"bottom"}),"fill"in v||(v.fill={}),void 0===v.fill.opacity&&(v.fill.opacity=.7),v.radius="radius"in v?v.radius:void 0,v.radiusPlus="radiusPlus"in v?v.radiusPlus:2,void 0===v.horizontalMargin&&(v.horizontalMargin=10),"visible"in m||(m.visible=!0),"style"in m||(m.style={}),m.font=aa(m.font,{anchor:"end","alignment-baseline":"bottom"}),"fill"in m||(m.fill={}),void 0===m.fill.opacity&&(m.fill.opacity=.7),m.radius="radius"in m?m.radius:void 0,m.radiusPlus="radiusPlus"in m?m.radiusPlus:2,void 0===m.horizontalMargin&&(m.horizontalMargin=10),"visible"in g||(g.visible=!0),"style"in g||(g.style={}),g.font=aa(g.font,{anchor:"middle"}),"fill"in g||(g.fill={}),void 0===g.fill.opacity&&(g.fill.opacity=.7),g.radius="radius"in g?g.radius:void 0,g.radiusPlus="radiusPlus"in g?g.radiusPlus:2,void 0===g.verticalMargin&&(g.verticalMargin=10),void 0===f&&(f=this._makeInsertLabelsFunc(p,v,m,g)),nu(au(s.prototype),"_initHoverLabels",this).call(this,{visible:n,type:o,snapToData:a,remote:l,insertLabelsFunc:f})}},{key:"_makeInsertLabelsFunc",value:function(t,e,n,i){var r=this;return function(a,s,u){u.clear(),void 0!==s.pres&&(t.visible&&function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.length,a=void 0===r?60:r,s=i.align,u=void 0===s?"left":s,l=i.horizontalMargin,c=void 0===l?void 0:l,f=i.verticalMargin,d=void 0===f?void 0:f,p=i.style,h=void 0===p?{}:p,v=i.font,y=void 0===v?{}:v,m=i.fill,b=void 0===m?{}:m,g=0,w=a,_=/^([0-9]+)%$/.exec(w);_&&(w=_[1]/100*n.width),"right"==u&&(g=n.width,w=n.width-w);var O=n.height-n.getYByXP(0,e.pres);h=ra(h),t.line([[Math.min(g,w),O],[Math.max(g,w),O]]).stroke(h),(y=aa(y))["alignment-baseline"]="bottom",ca({node:t,text:"".concat(Math.round(e.pres)," hPa"),x:g,y:O,horizontalMargin:c,verticalMargin:d,font:y,fill:b}),y["alignment-baseline"]="top";var S=void 0===e.hght?"~".concat(Math.round(o(e.pres))," m"):"".concat(Math.round(e.hght)," m");ca({node:t,text:S,x:g,y:O,horizontalMargin:c,verticalMargin:d,font:y,fill:b})}(u,s,r.coordinateSystem,t),r.dataGroupIds.reverse().forEach((function(t){var o={visible:!1};switch(t){case"temp":o=e;break;case"dewp":o=n;break;case"wetbulb":o=i}if(o.visible){var l=r._getCoordinatesByLevelData(t,a,s,r),c=l.x,f=l.y,d=l.value,p=l.unit;if(void 0!==c&&void 0!==f){var h=t in r.hoverLabelsSounding.options.diagram?r.hoverLabelsSounding.options.diagram[t].style.width:3,v=void 0===o.radius?h+o.radiusPlus:o.radius,y=o.style;!("color"in y)&&t in r.hoverLabelsSounding.options.diagram&&(y.color=a.options.diagram[t].style.color),u.circle(2*v).attr({cx:c,cy:f}).fill(y),ca({node:u,text:"".concat(d," ").concat(p),x:c,y:f,horizontalMargin:o.horizontalMargin,verticalMargin:o.verticalMargin,font:o.font,fill:o.fill})}}})))}}}])&&eu(e.prototype,n),i&&eu(e,i),s}(Zs);function uu(t){var e=t.highlightedLines,n=void 0===e?void 0:e,i=t.interval,o=void 0===i?void 0:i,r=t.lines,a=void 0===r?void 0:r,s=t.max,u=void 0===s?void 0:s,l=t.min,c=void 0===l?void 0:l,f=t.maxPressure,d=void 0===f?void 0:f,p=t.minPressure,h=void 0===p?void 0:p,v=t.style,y=void 0===v?void 0:v,m=t.visible,b=void 0===m?void 0:m,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{highlightedLines:la(n,g.highlightedLines),interval:la(o,g.interval),lines:la(a,g.lines),max:la(u,g.max),min:la(c,g.min),maxPressure:la(d,g.maxPressure),minPressure:la(h,g.minPressure),style:ra(y,g.style),visible:la(b,g.visible,!0)}}function lu(t){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cu(t,e){return(cu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=pu(t);if(e){var o=pu(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return du(this,n)}}function du(t,e){return!e||"object"!==lu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pu(t){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cu(t,e)}(n,t);var e=fu(n);function n(t){var i,o=t.svgNode,r=void 0===o?void 0:o,a=t.coordinateSystem,s=void 0===a?void 0:a,u=t.x,l=void 0===u?void 0:u,c=t.y,f=void 0===c?void 0:c,d=t.width,p=void 0===d?void 0:d,h=t.height,v=void 0===h?void 0:h,y=t.style,m=void 0===y?{}:y,b=t.visible,g=void 0===b||b,w=t.events,_=void 0===w?{}:w,O=t.hoverLabels,S=void 0===O?{}:O,k=t.windbarbLength,T=void 0===k?void 0:k,P=t.dataGroupIds,x=void 0===P?["windbarbs"]:P,R=t.getCoordinatesByLevelData,j=void 0===R?function(t,e,n,i){return void 0===n.pres||void 0===n.wspd||void 0===n.wdir?{}:{x:i.width/2,y:i.coordinateSystem.height-i.coordinateSystem.getYByXP(0,n.pres)}}:R,E=t.insertDataGroupInto,N=void 0===E?function(t,e,n,i,o){i.forEach((function(e){fa({node:t,x:o.width/2,y:e.y,wspd:e.levelData.wspd,wdir:e.levelData.wdir,length:o._windbarbLength,strokeStyle:n.options.windprofile.windbarbs.style})}))}:E,C=t.filterDataPoint,I=void 0===C?void 0:C,D=t.minDataPointsDistance,B=void 0===D?void 0:D;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=e.call(this,{svgNode:r,coordinateSystem:s,x:l,y:f,width:p,height:v,style:m,visible:g,events:_,hoverLabels:S,getSoundingVisibility:function(t){return t.visible&&t.options.windprofile.windbarbs.visible},dataGroupIds:x,getCoordinatesByLevelData:j,insertDataGroupInto:N,filterDataPoint:I,minDataPointsDistance:void 0===B?0:B}))._windbarbLength=T,void 0===i._windbarbLength&&(i._windbarbLength=2*i.width/5),void 0===B&&(i.minDataPointsDistance=i._windbarbLength/2),i.init(),i}return n}(Zs);function vu(t){return(vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function mu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gu(t,e,n){return(gu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Su(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function wu(t,e){return(wu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Su(t);if(e){var o=Su(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ou(this,n)}}function Ou(t,e){return!e||"object"!==vu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Su(t){return(Su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ku=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wu(t,e)}(r,t);var e,n,i,o=_u(r);function r(t){var e,n=t.svgNode,i=void 0===n?void 0:n,a=t.coordinateSystem,s=void 0===a?void 0:a,u=t.x,l=void 0===u?void 0:u,c=t.y,f=void 0===c?void 0:c,d=t.width,p=void 0===d?void 0:d,h=t.height,v=void 0===h?void 0:h,y=t.style,m=void 0===y?{}:y,b=t.visible,g=void 0===b||b,w=t.events,_=void 0===w?{}:w,S=t.hoverLabels,k=void 0===S?{}:S,T=t.windspeedMax,P=void 0===T?O(150):T,x=t.dataGroupIds,R=void 0===x?["windspeed"]:x,j=t.getCoordinatesByLevelData,E=void 0===j?function(t,e,n,i){return void 0===n.pres||void 0===n.wspd?{}:{x:i.width*n.wspd/P,y:i.coordinateSystem.height-i.coordinateSystem.getYByXP(0,n.pres)}}:j,N=t.insertDataGroupInto,C=void 0===N?function(t,e,n,i){t.polyline(i.map((function(t){return[t.x,t.y]}))).fill("none").stroke(n.options.windprofile.windspeed.style)}:N,I=t.filterDataPoint,D=void 0===I?void 0:I,B=t.minDataPointsDistance,A=void 0===B?0:B;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o.call(this,{svgNode:i,coordinateSystem:s,x:l,y:f,width:p,height:v,style:m,visible:g,events:_,hoverLabels:k,getSoundingVisibility:function(t){return t.visible&&t.options.windprofile.windspeed.visible},dataGroupIds:R,getCoordinatesByLevelData:E,insertDataGroupInto:C,filterDataPoint:D,minDataPointsDistance:A})).init(),e}return e=r,(n=[{key:"_drawBackground",value:function(t){gu(Su(r.prototype),"_drawBackground",this).call(this,t),t.line(0,0,0,this.height).stroke({color:"black",width:1}),t.line(this.width,0,this.width,this.height).stroke({color:"black",width:1})}},{key:"_initHoverLabels",value:function(t){var e=t.visible,n=void 0===e||e,i=t.type,o=void 0===i?"mousemove":i,a=t.snapToData,s=void 0===a||a,u=t.remote,l=void 0===u||u,c=t.insertLabelsFunc,f=void 0===c?void 0:c,d=t.windspeed,p=void 0===d?{}:d;"visible"in p||(p.visible=!0),"style"in p||(p.style={}),p.font=aa(p.font,{anchor:"end","alignment-baseline":"bottom"}),"fill"in p||(p.fill={}),void 0===p.fill.opacity&&(p.fill.opacity=.7),p.radius="radius"in p?p.radius:void 0,p.radiusPlus="radiusPlus"in p?p.radiusPlus:2,void 0===p.horizontalMargin&&(p.horizontalMargin=10),void 0===f&&(f=this._makeInsertLabelsFunc(p)),gu(Su(r.prototype),"_initHoverLabels",this).call(this,{visible:n,type:o,snapToData:s,remote:l,insertLabelsFunc:f})}},{key:"_makeInsertLabelsFunc",value:function(t){var e=this;return function(n,i,o){if(o.clear(),void 0!==i.pres&&t.visible&&void 0!==i.wspd){var r=e._getCoordinatesByLevelData("windspeed",n,i,e),a=r.x,s=r.y;if(void 0!==a&&void 0!==s){var u=void 0===t.radius?e.hoverLabelsSounding.options.windprofile.windspeed.style.width/2+t.radiusPlus:t.radius,l=t.style;"color"in l||(l.color=n.options.windprofile.windspeed.style.color);var c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yu(Object(n),!0).forEach((function(e){mu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t.font);"start"==c.anchor&&e.width-a<45&&(c.anchor="end"),"end"==c.anchor&&a<45&&(c.anchor="start"),"bottom"==c["alignment-baseline"]&&s<5*c.size/4&&(c["alignment-baseline"]="top"),"top"==c["alignment-baseline"]&&e.height-s<5*c.size/4&&(c["alignment-baseline"]="bottom"),o.circle(2*u).attr({cx:a,cy:s}).fill(l),ca({node:o,text:"".concat(Math.round(10*_(i.wspd))/10," kn"),x:a,y:s,horizontalMargin:t.horizontalMargin,verticalMargin:t.verticalMargin,font:c,fill:t.fill})}}}}}])&&bu(e.prototype,n),i&&bu(e,i),r}(Zs);function Tu(t){return(Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xu(t,e,n){return(xu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nu(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Ru(t,e){return(Ru=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ju(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Nu(t);if(e){var o=Nu(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Eu(this,n)}}function Eu(t,e){return!e||"object"!==Tu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nu(t){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ru(t,e)}(r,t);var e,n,i,o=ju(r);function r(t){var e,n=t.svgNode,i=void 0===n?void 0:n,a=t.coordinateSystem,s=t.x,u=t.y,l=t.width,c=t.height,f=t.style,d=void 0===f?{}:f,p=t.visible,h=void 0===p||p,v=t.events,y=void 0===v?{}:v,m=t.dataGroupIds,b=void 0===m?["windbarbs"]:m,g=t.getCoordinatesByLevelData,w=void 0===g?function(t,e,n,i){if(void 0===n.wspd||void 0===n.wdir)return{};var o=n.wspd*-Math.sin(n.wdir/180*Math.PI),r=n.wspd*Math.cos(n.wdir/180*Math.PI);return{x:i.center[0]+o*i.pixelPerSpeed,y:i.center[1]+r*i.pixelPerSpeed}}:g,_=t.insertDataGroupInto,S=void 0===_?function(t,e,n,i){t.polyline(i.map((function(t){return[t.x,t.y]}))).fill("none").stroke(n.options.hodograph.style)}:_,k=t.grid,T=void 0===k?{}:k,P=t.windspeedMax,x=void 0===P?O(150):P,R=t.origin,j=void 0===R?void 0:R,E=t.filterDataPoint,N=void 0===E?void 0:E,C=t.minDataPointsDistance,I=void 0===C?0:C;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=o.call(this,{svgNode:i,coordinateSystem:a,x:s,y:u,width:l,height:c,style:d,visible:h,events:y,dataGroupIds:b,getCoordinatesByLevelData:w,insertDataGroupInto:S,getSoundingVisibility:function(t){return t.visible&&t.options.hodograph.visible},filterDataPoint:N,minDataPointsDistance:I}))._gridOptions=e.getNormalizedGridOptions(T),e.center=[e.width/2,e.height/2],void 0!==j&&(e.center[0]-=j[0]*e.minLength/2,e.center[1]+=j[1]*e.minLength/2),e.pixelPerSpeed=Math.min(Math.max(e.width-e.center[0],e.center[0]),Math.max(e.height-e.center[1],e.center[1]))/x,void 0===e._gridOptions.max&&(e._gridOptions.max=x),e.init(),e}return e=r,(n=[{key:"_drawBackground",value:function(t){if(xu(Nu(r.prototype),"_drawBackground",this).call(this,t),t.rect(this.width-2,this.height-2).move(1,1).fill({color:"white"}).stroke({color:"black",width:1}),this._gridOptions.axes.visible){var e=this._gridOptions.max+this._gridOptions.circles.interval/2;t.line(Math.max(0,this.center[0]-e*this.pixelPerSpeed),this.center[1],Math.min(this.width,this.center[0]+e*this.pixelPerSpeed),this.center[1]).stroke(this._gridOptions.axes.style),t.line(this.center[0],Math.max(0,this.center[1]-e*this.pixelPerSpeed),this.center[0],Math.min(this.height,this.center[1]+e*this.pixelPerSpeed)).stroke(this._gridOptions.axes.style)}for(var n=this._gridOptions.circles.interval;n<=this._gridOptions.max;n+=this._gridOptions.circles.interval){var i=n*this.pixelPerSpeed;if(t.circle(2*i).attr({cx:this.center[0],cy:this.center[1]}).fill("none").stroke(this._gridOptions.circles.style),this._gridOptions.labels.visible){var o=i*Math.cos((this._gridOptions.labels.angle-90)/180*Math.PI),a=i*Math.sin((this._gridOptions.labels.angle-90)/180*Math.PI),s="middle",u=0,l=-this._gridOptions.labels.font.size;0==this._gridOptions.labels.angle||180==this._gridOptions.labels.angle?(u=-3,s="end"):90!=this._gridOptions.labels.angle&&270!=this._gridOptions.labels.angle||(l=-3);var c=t.plain(""+Math.round(g(n))).move(this.center[0]+o,this.center[1]+a).attr({"text-anchor":s,dx:u,dy:l}).font(this._gridOptions.labels.font),f=c.bbox();c.before(t.rect(f.width,f.height).move(f.x,f.y).fill("white"))}}}},{key:"getNormalizedGridOptions",value:function(t){var e=t.axes,n=void 0===e?{}:e,i=t.circles,o=void 0===i?{}:i,r=t.labels,a=void 0===r?{}:r,s=t.max,u=void 0===s?void 0:s;return n=sa(n),"interval"in(o=sa(o))&&void 0!==o.interval||(o.interval=w(50)),"angle"in(a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visible,n=void 0===e||e,i=t.font,o=void 0===i?{}:i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{visible:la(n,r.visible,!0),font:aa(o,r.font)}}(a))&&void 0!==a.angle||(a.angle=225),void 0===a.font.size&&(a.font.size=10),{axes:n,circles:o,labels:a,max:u}}}])&&Pu(e.prototype,n),i&&Pu(e,i),r}(Vs);function Iu(t){return(Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Du(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Bu(t,e,n){return(Bu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vu(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Au(t,e){return(Au=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Vu(t);if(e){var o=Vu(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Mu(this,n)}}function Mu(t,e){return!e||"object"!==Iu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vu(t){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Au(t,e)}(r,t);var e,n,i,o=Lu(r);function r(t){var e,n,i,a,s,u,l=t.svgNode,c=void 0===l?void 0:l,f=t.coordinateSystem,d=t.x,p=t.y,h=t.width,v=t.height,y=t.style,m=void 0===y?{}:y,b=t.visible,g=void 0===b||b,w=t.events,_=void 0===w?{}:w,O=t.labels,S=void 0===O?{}:O,k=t.title,T=void 0===k?{}:k;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),void 0===m.overflow&&(m.overflow="visible"),(e=o.call(this,{svgNode:c,coordinateSystem:f,x:d,y:p,width:h,height:v,style:m,visible:g,events:_}))._labelsOptions=(i=(n=S).enabled,a=void 0===i||i,s=n.style,(u={enabled:a,style:void 0===s?{}:s}).style=ra(u.style),u),e._titleOptions=function(t){var e=t.align,n=void 0===e?"middle":e,i=t.style,o=void 0===i?{}:i,r=t.text,a=void 0===r?void 0:r,s={align:n,style:o,text:a};return s.style=ra(s.style),s}(T),e.init(),e}return e=r,(n=[{key:"_drawBackground",value:function(t){if(Bu(Vu(r.prototype),"_drawBackground",this).call(this,t),this._labelsOptions.enabled)for(var e=t.group(),n=50*Math.ceil(this.coordinateSystem.getPByXY(0,this.height)/50),i=50*Math.floor(this.coordinateSystem.getPByXY(0,0)/50),o=n;o<=i;o+=50){var a=this.height-this.coordinateSystem.getYByXP(0,o);e.plain(o).attr({y:a+3.3,x:this.width}).font({size:"11px",anchor:"end"}).attr({fill:this._labelsOptions.style.color})}void 0!==this._titleOptions.text&&t.group().plain(this._titleOptions.text).attr({x:12*.4,y:this.height/2,fill:this._titleOptions.style.color}).font({size:12,anchor:"middle"}).rotate(-90)}}])&&Du(e.prototype,n),i&&Du(e,i),r}(Ps),Yu=Gu;function Fu(t){return(Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qu(t,e){return(qu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Uu(t);if(e){var o=Uu(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Ku(this,n)}}function Ku(t,e){return!e||"object"!==Fu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uu(t){return(Uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qu(t,e)}(r,t);var e,n,i,o=Hu(r);function r(){return Xu(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"_drawBackground",value:function(t){if(t.clear(),this._labelsOptions.enabled)for(var e=t.group(),n=10*Math.ceil(b(this.coordinateSystem.getTByXY(0,0))/10),i=10*Math.floor(b(this.coordinateSystem.getTByXY(this.width,0))/10),o=n;o<=i;o+=10){var r=m(o);e.plain(Math.round(b(r))).attr({x:this.coordinateSystem.getXByYT(0,r),y:10,fill:this._labelsOptions.style.color}).font({size:"10px",anchor:"middle"})}void 0!==this._titleOptions.text&&t.group().plain(this._titleOptions.text).attr({x:this.width/2,y:this.height-12*.3,fill:this._titleOptions.style.color}).font({size:12,anchor:"middle"})}}])&&zu(e.prototype,n),i&&zu(e,i),r}(Yu),Zu=$u;function Wu(t){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ju(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Qu(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tl(t,e){return(tl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function el(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=il(t);if(e){var o=il(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return nl(this,n)}}function nl(t,e){return!e||"object"!==Wu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function il(t){return(il=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ol=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tl(t,e)}(r,t);var e,n,i,o=el(r);function r(t){var e,n=t.renderTo,i=void 0===n?void 0:n,a=t.width,s=void 0===a?void 0:a,u=t.height,l=void 0===u?void 0:u,c=t.coordinateSystem,f=void 0===c?{}:c,d=t.diagram,p=void 0===d?{}:d,h=t.windbarbsProfile,v=void 0===h?{}:h,y=t.windspeedProfile,m=void 0===y?{}:y,b=t.hodograph,g=void 0===b?{}:b,w=t.xAxis,_=void 0===w?{}:w,O=t.yAxis,S=void 0===O?{}:O;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=o.call(this,{renderTo:i,width:s,height:l}),p=rl(p),v=rl(v),m=rl(m),g=rl(g),_=rl(_),S=rl(S);var k=.05*e.svgNode.width();return void 0===_.width&&void 0===p.width&&void 0===v.width&&void 0===m.width?(S.width=.1*(e.svgNode.width()-2*k),p.width=.7*(e.svgNode.width()-2*k),v.width=.2*(e.svgNode.width()-2*k)*1/3,m.width=.2*(e.svgNode.width()-2*k)*2/3):void 0===p.width?p.width=e.svgNode.width()-2*k-v.width-m.width:void 0===v.width&&void 0===m.width&&(v.width=1*(e.svgNode.width()-2*k-p.width)/3,m.width=2*(e.svgNode.width()-2*k-p.width)/3),void 0===S.x&&void 0===p.x&&void 0===v.x&&void 0===m.x?(S.x=k,p.x=S.x+S.width,v.x=p.x+p.width,m.x=v.x+v.width):void 0===p.x?p.x=v.x-v.width:void 0===v.x&&void 0===m.x&&(v.x=p.x+p.width,m.x=v.x+v.width),void 0===_.height&&(_.height=.06*e.svgNode.height()),void 0===p.height&&(p.height=e.svgNode.height()-_.height-2*k),void 0===S.height&&(S.height=p.height),void 0===v.height&&(v.height=p.height),void 0===m.height&&(m.height=p.height),void 0===p.y&&(p.y=k),void 0===S.y&&(S.y=p.y),void 0===v.y&&(v.y=p.y),void 0===m.y&&(m.y=p.y),void 0===_.width&&(_.width=p.width),void 0===_.x&&(_.x=p.x),void 0===_.y&&(_.y=p.y+p.height),void 0===_.height&&(_.height=k),void 0===g.x&&(g.x=p.x),void 0===g.y&&(g.y=p.y),void 0===g.width&&(g.width=.4*Math.min(p.width,p.height)),void 0===g.height&&(g.height=g.width),e.diagram=new su(p),e.appendPlotArea(e.diagram),e.yAxis=new Gu(S),e.appendPlotArea(e.yAxis),e.xAxis=new $u(_),e.appendPlotArea(e.xAxis),e.windbarbsProfile=new hu(v),e.appendPlotArea(e.windbarbsProfile),e.windspeedProfile=new ku(m),e.appendPlotArea(e.windspeedProfile),e.hodograph=new Cu(g),e.appendPlotArea(e.hodograph),void 0===f.type&&(f.type="skewTlogP"),f.width=p.width,f.height=p.height,e._coordinateSystem,e.coordinateSystem="stueve"==f.type?new us(f):"emagram"==f.type?new vs(f):new Os(f),e}return e=r,(n=[{key:"getDiagramPlotArea",value:function(){return this.diagram}},{key:"coordinateSystem",get:function(){return this._coordinateSystem},set:function(t){this._coordinateSystem=t,this.exchangeCoordinateSystem(this._coordinateSystem)}}])&&Qu(e.prototype,n),i&&Qu(e,i),r}($a);function rl(t){var e=t.svgNode,n=void 0===e?void 0:e,i=t.coordinateSystem,o=void 0===i?void 0:i,r=t.x,a=void 0===r?void 0:r,s=t.y,u=void 0===s?void 0:s,l=t.width,c=void 0===l?void 0:l,f=t.height,d=void 0===f?void 0:f,p=t.style,h=void 0===p?{}:p,v=t.visible,y=void 0===v||v,m=t.events,b=void 0===m?{}:m,g=t.hoverLabels,w=void 0===g?{}:g,_=Ju(t,["svgNode","coordinateSystem","x","y","width","height","style","visible","events","hoverLabels"]);return _.svgNode=n,_.coordinateSystem=o,_.x=a,_.y=u,_.width=c,_.height=d,_.style=h,_.visible=y,_.events=b,_.hoverLabels=w,_}function al(t){return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sl(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ul(t,e){return(ul=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ll(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=fl(t);if(e){var o=fl(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return cl(this,n)}}function cl(t,e){return!e||"object"!==al(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fl(t){return(fl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ul(t,e)}(r,t);var e,n,i,o=ll(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this)).imgNode=void 0,t.thermodynamicDiagram=void 0,t.resourceNode=void 0,t}return e=r,(n=[{key:"onInit",value:function(){void 0!==this.parentNode&&(this.resourceNode=Z()(this.parentNode),this.resourceNode.empty())}},{key:"onChangeVisibleResource",value:function(){if(void 0!==this.resourceNode){var t=this.container.visibleResource;if("url"in t)void 0!==this.thermodynamicDiagram&&(this.thermodynamicDiagram=void 0,this.resourceNode.empty()),void 0===this.imgNode&&(this.resourceNode.empty(),this.imgNode=Z()("<img>"),this.resourceNode.append(this.imgNode)),this.imgNode.attr("src",t.url),this.imgNode.css({"max-width":"100%"});else if("sounding"in t){void 0!==this.imgNode&&(this.imgNode=void 0,this.resourceNode.empty()),void 0===this.thermodynamicDiagram&&(this.thermodynamicDiagram=new ol({renderTo:this.resourceNode}));var e=!1;this.thermodynamicDiagram.soundings.forEach((function(n){n.getSounding()===t.sounding?(e=!0,n.visible(!0)):n.visible(!1)})),e||this.thermodynamicDiagram.addSounding(t.sounding)}else this.imgNode=void 0,this.resourceNode.empty()}}}])&&sl(e.prototype,n),i&&sl(e,i),r}(Yr);function pl(t){return(pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hl(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return vl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vl(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function vl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function yl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ml(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bl(t,e,n){return(bl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ol(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function gl(t,e){return(gl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Ol(t);if(e){var o=Ol(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _l(this,n)}}function _l(t,e){return!e||"object"!==pl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ol(t){return(Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sl={addEventFunctions:D},kl={Animation:tt,Visualisation:lt,makeTimeTextCallbackFunction:function(t){return function(e,n){var i=t.utc(e);return void 0!==this.options.outputTimezone&&("local"==this.options.outputTimezone?i.local():i.tz(this.options.outputTimezone)),i.format(n)}},animation:{ToggleButton:rt,insertFrequencyInput:et,insertFrequencyRange:nt,insertFrequencyButtonGroup:function(t,e){var n=e.animation,i=e.frequencies,o=e.btnGroupClass,r=void 0===o?"btn-group":o,a=e.btnClass,s=void 0===a?"btn btn-primary":a,u=e.suffix,l=void 0===u?"fps":u,c=Z()("<div>").addClass(r);(i=i||[]).forEach((function(t){c.append(Z()("<button>").addClass(s).data("frequency",t).text(t+" "+l).click((function(){return n.setImageFrequency(t)})))}));var f=function(){c.children("button").removeClass("active").each((function(){Z()(this).data("frequency")==n.getImageFrequency()&&Z()(this).addClass("active")}))};return n.on("change:imageFrequency",f),f(),t.append(c),c},insertRestartPauseInput:it,insertRestartPauseRange:function(t,e){var n=e.animation,i=e.pauses;i=(i=i||[1]).map((function(t){return Math.round(1e3*t)}));var o=Z()("<input>").addClass("custom-range").attr("type","range").attr("min",0).attr("max",i.length-1);o.on("change input",(function(){var t=o.val();t<i.length&&n.setRestartPause(i[t]/1e3)}));var r=function(){var t=i.indexOf(Math.round(1e3*n.getRestartPause()));t>-1&&o.val(t)};return n.on("change:imageFrequency",r),r(),t.append(o),o},insertRestartPauseButtonGroup:function(t,e){var n=e.animation,i=e.pauses,o=e.btnGroupClass,r=void 0===o?"btn-group":o,a=e.btnClass,s=void 0===a?"btn btn-primary":a,u=e.suffix,l=void 0===u?"s":u,c=Z()("<div>").addClass(r);(i=i||[]).forEach((function(t){c.append(Z()("<button>").addClass(s).data("pause",t).text(t+" "+l).click((function(){return n.setRestartPause(t)})))}));var f=function(){c.children("button").removeClass("active").each((function(){Z()(this).data("pause")==n.getRestartPause()&&Z()(this).addClass("active")}))};return n.on("change:restartPause",f),f(),t.append(c),c}},visualisation:{Text:bt,Slider:Tt,bsButtons:Dt,bsDropdown:zt}},Tl={Collection:Zt,Map:Kt,map:{MapOL:Ge,MapLL:Ke},Resource:re,resource:{GeoJSON:dn,GeoJSONTile:En,Image:Fn,OSM:ti,Vector:an,VectorTile:kn},ResourceCollection:pe,Tooltip:Pe,Type:me,TypeCollection:Te},Pl={BootstrapTooltip:di},xl={Variable:no,TimeVariable:co,VariableCollection:xo,Node:Do,Resource:Yo,resource:{Image:$o,Sounding:vr},Resources:kr,NWPResources:Dr,Container:na,Display:Yr,display:{Simple:dl,SelectNavigation:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gl(t,e)}(r,t);var e,n,i,o=wl(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.ignoreVariableCollections,i=void 0===n?[]:n,a=e.selectCaption,s=void 0!==a&&a,u=e.navigationClass,l=void 0===u?void 0:u,c=e.selectDivClass,f=void 0===c?void 0:c,d=e.selectClass,p=void 0===d?void 0:d;return yl(this,r),(t=o.call(this)).options={ignoreVariableCollections:new Set(i),selectCaption:s,navigationClass:l,selectDivClass:f,selectClass:p},t.navigationNode=void 0,t.selectNodes=new Map,t}return e=r,(n=[{key:"onInit",value:function(){var t=this;void 0!==this.parentNode&&(this.navigationNode=Z()("<div>").addClass(this.options.navigationClass),this.resourceNode=Z()("<div>"),Z()(this.parentNode).empty().append(this.navigationNode,this.resourceNode),void 0!==this.modelviewer&&this.modelviewer.resources.variableCollections.filter((function(e){return!t.options.ignoreVariableCollections.has(e)&&e.count>0})).forEach((function(e){return t._appendSelectNode(e)})),this._changeSelected())}},{key:"onChangeVisibleResource",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.variable;bl(Ol(r.prototype),"onChangeVisibleResource",this).call(this,{variable:e}),this._changeSelected()}},{key:"onAppendVariable",value:function(t){this.selectNodes.has(t.variableCollection)?this._appendOptionNode(this.selectNodes.get(t.variableCollection),t):this._appendSelectNode(t.variableCollection),this._changeSelected()}},{key:"_appendSelectNode",value:function(t){var e=this,n=Z()("<select>").addClass(this.options.selectClass);if(n.on("change",(function(){var i=t.getItemById(n.val());e.container.exchangeDisplayVariable=[i]})),this.options.selectCaption){var i=Z()("<option>").text(t.name).attr("disabled","disabled").prop("selected","selected");n.append(i)}t.variables.forEach((function(t){e._appendOptionNode(n,t)})),this.navigationNode.append(Z()("<div>").addClass(this.options.selectDivClass).append(n)),this.selectNodes.set(t,n)}},{key:"_appendOptionNode",value:function(t,e){var n=Z()("<option>").attr("value",e.id).text(e.name).addClass(this.options.optionsClass);t.append(n)}},{key:"_changeSelected",value:function(){var t,e=hl(this.selectNodes.keys());try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this.selectNodes.has(n)){var i=this.container.visibleResource.getVariableByVariableCollection(n);this.selectNodes.get(n).val(i.id)}}}catch(t){e.e(t)}finally{e.f()}}}])&&ml(e.prototype,n),i&&ml(e,i),r}(dl)}},Rl={Parcel:nr},jl={CoordinateSystem:Qa,coordinateSystem:{StueveDiagram:us,Emagram:vs,SkewTlogPDiagram:Os},DiagramSounding:Ca,Hodograph:Cu,TDDiagram:su,functions:{drawWindbarbInto:fa},WindbarbsProfile:hu,WindspeedProfile:ku,axes:{xAxis:Zu,yAxis:Yu}}}]);
//# sourceMappingURL=meteoJS.min.js.map