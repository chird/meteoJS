<!doctype html>
<html>

<head>
  <meta name="generator" content="JSDoc 3.6.3">
  <meta charset="utf-8">
  <title>Source: timeline/visualisation/bsButtons.js</title>
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Karla:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Noto+Serif:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Inconsolata:500" type="text/css">
  <link href="css/baseline.css" rel="stylesheet">
</head>

<body onload="prettyPrint()">
  <nav id="jsdoc-navbar" role="navigation" class="jsdoc-navbar">
    <div id="jsdoc-navbar-container">
      <div id="jsdoc-navbar-content">
        <a href="index.html" class="jsdoc-navbar-package-name">Home</a>
      </div>
    </div>
  </nav>
  <div id="jsdoc-body-container">
    <div id="jsdoc-content">
      <div id="jsdoc-content-container">
        <div id="jsdoc-banner" role="banner">
        </div>
        <div id="jsdoc-main" role="main">
          <header class="page-header">
            <h1>Source: timeline/visualisation/bsButtons.js</h1>
          </header>
          <article>
            <pre class="prettyprint linenums"><code>/**
 * @module meteoJS/timeline/visualisation/bsButtons
 */

import $ from &#x27;jquery&#x27;;
import Visualisation from &#x27;../Visualisation.js&#x27;;

/**
 * Options for constructor.
 * 
 * @typedef {module:meteoJS/timeline/visualisation~options}
     module:meteoJS/timeline/visualisation/bsButtons~options
 */

/**
 * Show timeline as a group of buttons.
 * 
 * @extends module:meteoJS/timeline/visualisation.Visualisation
 */
export class bsButtons extends Visualisation {
  
  /**
   * @param {module:meteoJS/timeline/visualisation/bsButtons~options} options - Options.
   */
  constructor(options) {
    /* Sets explictly values, if an option is not existing. $.extend overrides
     * undefined values by the values passed. Without this explictly check you
     * could not pass undefined values, but this is itended. */
    if (!(&#x27;format&#x27; in options))
      options.format &#x3D; &#x27;HH&#x27;;
    if (!(&#x27;groupingFormat&#x27; in options))
      options.groupingFormat &#x3D; &#x27;ddd, DD. MMM&#x27;;
    if (!(&#x27;classMain&#x27; in options))
      options.classMain &#x3D; &#x27;btn-toolbar&#x27;;
    if (!(&#x27;classButtonGroup&#x27; in options))
      options.classButtonGroup &#x3D; &#x27;btn-group&#x27;;
    if (!(&#x27;classButtonGroupMargin&#x27; in options))
      options.classButtonGroupMargin &#x3D; &#x27;mr-2&#x27;;
    if (!(&#x27;classLabelSpan&#x27; in options))
      options.classLabelSpan &#x3D; &#x27;d-block w-100&#x27;;
    if (!(&#x27;classButton&#x27; in options))
      options.classButton &#x3D; &#x27;btn&#x27;;
    if (!(&#x27;classButtonActive&#x27; in options))
      options.classButtonActive &#x3D; &#x27;active&#x27;;
    if (!(&#x27;classButtonNotEnabled&#x27; in options))
      options.classButtonNotEnabled &#x3D; &#x27;btn-light&#x27;;
    if (!(&#x27;classButtonEnabled&#x27; in options))
      options.classButtonEnabled &#x3D; &#x27;btn-secondary&#x27;;
    if (!(&#x27;classButtonAllEnabled&#x27; in options))
      options.classButtonAllEnabled &#x3D; &#x27;btn-primary&#x27;;
    options &#x3D; $.extend(true, {
      // new part
      format: undefined,
      grouping: &#x27;daily&#x27;,
      groupingFormat: undefined,
      classMain: undefined,
      classButtonGroup: undefined,
      classButtonGroupMargin: undefined,
      classLabel: undefined,
      classLabelSpan: undefined,
      classButton: undefined,
      classButtonActive: undefined,
      classButtonNotEnabled: undefined,
      classButtonEnabled: undefined,
      classButtonAllEnabled: undefined,
      /*prependNodes: undefined,
        appendNodes: undefined*/
    }, options);
    
    super(options);
    
    /**
     * @member {external:jQuery|undefined}
     * @private
     */
    this.toolbarNode &#x3D; undefined;
    
    this.setNode(this.options.node);
  }
  
  /**
   * @inheritdoc
   */
  onChangeTime() {
    if (this.toolbarNode &#x3D;&#x3D;&#x3D; undefined)
      return;
    
    var time &#x3D; this.options.timeline.getSelectedTime();
    var that &#x3D; this;
    this.toolbarNode.find(&#x27;button&#x27;).each(function () {
      var t &#x3D; new Date(+$(this).data(&#x27;time&#x27;));
      $(this)
        .removeClass(that.options.classButtonActive);
      /*.removeClass(that.options.classButtonAllEnabled)
        .removeClass(that.options.classButtonEnabled)
        .removeClass(that.options.classButtonNotEnabled);*/
      if (time.valueOf() &#x3D;&#x3D; t.valueOf())
        $(this).addClass(that.options.classButtonActive);
      /*else if (that.options.timeline.isTimeAllEnabled(t))
        $(this).addClass(that.options.classButtonAllEnabled);
      else if (that.options.timeline.isTimeEnabled(t))
        $(this).addClass(that.options.classButtonEnabled);
      else
        $(this).addClass(that.options.classButtonNotEnabled);*/
    });
  }
  
  /**
   * @inheritdoc
   */
  onChangeTimes() {
    if (this.toolbarNode &#x3D;&#x3D;&#x3D; undefined)
      this.toolbarNode &#x3D; $(&#x27;&amp;lt;div&gt;&#x27;);
    this.toolbarNode.empty();
    
    var groupingFormat &#x3D;
      (this.options.grouping &#x3D;&#x3D; &#x27;daily&#x27;) ? &#x27;YYYY-MM-DD&#x27; :
        (this.options.grouping &#x3D;&#x3D; &#x27;hourly&#x27;) ? &#x27;YYYY-MM-DD HH&#x27; :
          this.options.grouping;
    var lastNode &#x3D; undefined;
    this.getTimelineTimes().forEach(function (time) {
      if (lastNode &#x3D;&#x3D;&#x3D; undefined ||
          lastNode.data(&#x27;date&#x27;) !&#x3D; this.timeToText(time, groupingFormat)) {
        var btnGroup &#x3D; $(&#x27;&amp;lt;div&gt;&#x27;)
          .addClass(this.options.classButtonGroup)
          .addClass(this.options.classButtonGroupMargin)
          .attr(&#x27;role&#x27;, &#x27;group&#x27;)
          .attr(&#x27;aria-label&#x27;, this.timeToText(time, groupingFormat));
        if (this.options.groupingFormat &#x3D;&#x3D;&#x3D; undefined) {
          lastNode &#x3D; btnGroup;
        }
        else {
          var span &#x3D; $(&#x27;&amp;lt;span&gt;&#x27;)
            .addClass(this.options.classLabelSpan)
            .text(this.timeToText(time, this.options.groupingFormat));
          lastNode &#x3D; $(&#x27;&amp;lt;label&gt;&#x27;)
            .addClass(this.options.classLabel)
            .append(span);
          btnGroup.attr(&#x27;aria-label&#x27;, span.text());
          lastNode.append(btnGroup);
        }
        lastNode.data(&#x27;date&#x27;, this.timeToText(time, groupingFormat));
        this.toolbarNode.append(lastNode);
      }
      
      var btn &#x3D; $(&#x27;&amp;lt;button&gt;&#x27;)
        .addClass(this.options.classButton)
        .attr(&#x27;type&#x27;, &#x27;button&#x27;)
        .text(this.timeToText(time, this.options.format))
        .data(&#x27;time&#x27;, time.valueOf());
      if (this.options.timeline.isTimeAllEnabled(time))
        btn.addClass(this.options.classButtonAllEnabled);
      else if (this.options.timeline.isTimeEnabled(time))
        btn.addClass(this.options.classButtonEnabled);
      else
        btn.addClass(this.options.classButtonNotEnabled);
      var that &#x3D; this;
      btn.click(function () {
        that.options.timeline.setSelectedTime(new Date(+$(this).data(&#x27;time&#x27;)));
        that.trigger(&#x27;input&#x27;);
      });
      if (lastNode.hasClass(this.options.classButtonGroup))
        lastNode.append(btn);
      else
        lastNode.children(&#x27;div&#x27;).append(btn);
    }, this);
    this.toolbarNode.find(&#x27;div.&#x27;+this.options.classButtonGroup).last().removeClass(this.options.classButtonGroupMargin);
  }
  
  /**
   * @inheritdoc
   */
  emptyNode() {
    this.toolbarNode &#x3D; undefined;
    this.options.node.empty();
  }
  
  /**
   * @inheritdoc
   */
  onInitNode(isListenersDefined) {
    this.toolbarNode &#x3D; $(&#x27;&amp;lt;div&gt;&#x27;)
      .addClass(this.options.classMain)
      .attr(&#x27;role&#x27;, &#x27;toolbar&#x27;)
      .attr(&#x27;aria-label&#x27;, &#x27;Timeline toolbar&#x27;);
    this.options.node.append(this.toolbarNode);
  }
  
}
export default bsButtons;</code></pre>
          </article>
        </div>
      </div>
      <nav id="jsdoc-toc-nav" role="navigation"></nav>
    </div>
  </div>
  <footer id="jsdoc-footer" class="jsdoc-footer">
    <div id="jsdoc-footer-container">
      <p>
        Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc</a> 3.6.3 on February 27, 2020.
      </p>
    </div>
  </footer>
  <script src="scripts/jquery.min.js"></script>
  <script src="scripts/tree.jquery.js"></script>
  <script src="scripts/prettify.js"></script>
  <script src="scripts/jsdoc-toc.js"></script>
  <script src="scripts/linenumber.js"></script>
  <script src="scripts/scrollanchor.js"></script>
</body>

</html>